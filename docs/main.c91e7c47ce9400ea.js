var Nbe=Object.defineProperty,kbe=Object.defineProperties,Pbe=Object.getOwnPropertyDescriptors,Y0e=Object.getOwnPropertySymbols,xbe=Object.prototype.hasOwnProperty,Lbe=Object.prototype.propertyIsEnumerable,J0e=(h,l,g)=>l in h?Nbe(h,l,{enumerable:!0,configurable:!0,writable:!0,value:g}):h[l]=g,$0e=(h,l)=>{for(var g in l||(l={}))xbe.call(l,g)&&J0e(h,g,l[g]);if(Y0e)for(var g of Y0e(l))Lbe.call(l,g)&&J0e(h,g,l[g]);return h},Z0e=(h,l)=>kbe(h,Pbe(l));(self.webpackChunkpoc=self.webpackChunkpoc||[]).push([[179],{2011:(h,l,g)=>{"use strict";g.d(l,{Dh:()=>bh,GT:()=>_a,cc:()=>v_,hO:()=>I_,on:()=>_A,pX:()=>_s,xv:()=>n_});var f=g(5e3),k=g(127),q=g(5813);h=g.hmd(h);const _r=["ngOnDestroy"],_s=(Q_,_0,c0,Qv={})=>new Proxy(Q_,{get:(h0,E0)=>c0.runOutsideAngular(()=>{var H_;if(Q_[E0])return(null===(H_=null==Qv?void 0:Qv.spy)||void 0===H_?void 0:H_.get)&&Qv.spy.get(E0,Q_[E0]),Q_[E0];if(_r.indexOf(E0)>-1)return()=>{};const e0=_0.toPromise().then(P_=>{const Rv=P_&&P_[E0];return"function"==typeof Rv?Rv.bind(P_):Rv&&Rv.then?Rv.then(E_=>c0.run(()=>E_)):c0.run(()=>Rv)});return new Proxy(()=>{},{get:(P_,Rv)=>e0[Rv],apply:(P_,Rv,E_)=>e0.then(L_=>{var F_;const J_=L_&&L_(...E_);return(null===(F_=null==Qv?void 0:Qv.spy)||void 0===F_?void 0:F_.apply)&&Qv.spy.apply(E0,E_,J_),J_})})})}),_a=(Q_,_0)=>{_0.forEach(c0=>{Object.getOwnPropertyNames(c0.prototype||c0).forEach(Qv=>{Object.defineProperty(Q_.prototype,Qv,Object.getOwnPropertyDescriptor(c0.prototype||c0,Qv))})})};class _l{constructor(_0){return _0}}const bh=new f.OlP("angularfire2.app.options"),n_=new f.OlP("angularfire2.app.name");function _A(Q_,_0,c0){const h0="object"==typeof c0&&c0||{};h0.name=h0.name||"string"==typeof c0&&c0||"[DEFAULT]";const H_=k.Z.apps.filter(e0=>e0&&e0.name===h0.name)[0]||_0.runOutsideAngular(()=>k.Z.initializeApp(Q_,h0));try{JSON.stringify(Q_)!==JSON.stringify(H_.options)&&r_("error",`${H_.name} Firebase App already initialized with different options${h.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(e0){}return new _l(H_)}const r_=(Q_,..._0)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Q_](..._0)},p_={provide:_l,useFactory:_A,deps:[bh,f.R0b,[new f.FiY,n_]]};let I_=(()=>{class Q_{constructor(c0){k.Z.registerVersion("angularfire",q.q4.full,"core"),k.Z.registerVersion("angularfire",q.q4.full,"app-compat"),k.Z.registerVersion("angular",f.q4F.full,c0.toString())}static initializeApp(c0,Qv){return{ngModule:Q_,providers:[{provide:bh,useValue:c0},{provide:n_,useValue:Qv}]}}}return Q_.\u0275fac=function(c0){return new(c0||Q_)(f.LFG(f.Lbi))},Q_.\u0275mod=f.oAB({type:Q_}),Q_.\u0275inj=f.cJS({providers:[p_]}),Q_})();function v_(Q_,_0,c0,Qv,h0){const[,E0,H_]=globalThis.\u0275AngularfireInstanceCache.find(e0=>e0[0]===Q_)||[];if(E0)return function S_(Q_,_0){try{return Q_.toString()===_0.toString()}catch(c0){return Q_===_0}}(h0,H_)||(B_("error",`${_0} was already initialized on the ${c0} Firebase App with different settings.${x_?" You may need to reload as Firebase is not HMR aware.":""}`),B_("warn",{is:h0,was:H_})),E0;{const e0=Qv();return globalThis.\u0275AngularfireInstanceCache.push([Q_,e0,h0]),e0}}const x_=!!h.hot,B_=(Q_,..._0)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Q_](..._0)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(h,l,g)=>{"use strict";g.d(l,{q4:()=>oM,iC:()=>NG,fc:()=>kS,HU:()=>A5,vb:()=>Q9,JM:()=>_L});var f=g(5e3),k=g(5867),q=g(5861),_r=g(9681),_s=g(2090),_a=g(4859),_l=g(1877),bh=g(8766);const n_="@firebase/installations",p_="w:0.5.9",I_="FIS_v2",_0=new _s.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function c0(c_){return c_ instanceof _s.ZR&&c_.code.includes("request-failed")}function Qv({projectId:c_}){return`https://firebaseinstallations.googleapis.com/v1/projects/${c_}/installations`}function h0(c_){return{token:c_.token,requestStatus:2,expiresIn:L_(c_.expiresIn),creationTime:Date.now()}}function E0(c_,d_){return H_.apply(this,arguments)}function H_(){return(H_=(0,q.Z)(function*(c_,d_){const W_=(yield d_.json()).error;return _0.create("request-failed",{requestName:c_,serverCode:W_.code,serverMessage:W_.message,serverStatus:W_.status})})).apply(this,arguments)}function e0({apiKey:c_}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":c_})}function P_(c_,{refreshToken:d_}){const T_=e0(c_);return T_.append("Authorization",function F_(c_){return`${I_} ${c_}`}(d_)),T_}function Rv(c_){return E_.apply(this,arguments)}function E_(){return(E_=(0,q.Z)(function*(c_){const d_=yield c_();return d_.status>=500&&d_.status<600?c_():d_})).apply(this,arguments)}function L_(c_){return Number(c_.replace("s","000"))}function J_(c_,d_){return z_.apply(this,arguments)}function z_(){return(z_=(0,q.Z)(function*({appConfig:c_,heartbeatServiceProvider:d_},{fid:T_}){const W_=Qv(c_),p0=e0(c_),y0=d_.getImmediate({optional:!0});if(y0){const VI=yield y0.getHeartbeatsHeader();VI&&p0.append("x-firebase-client",VI)}const yI={method:"POST",headers:p0,body:JSON.stringify({fid:T_,authVersion:I_,appId:c_.appId,sdkVersion:p_})},SI=yield Rv(()=>fetch(W_,yI));if(SI.ok){const VI=yield SI.json();return{fid:VI.fid||T_,registrationStatus:2,refreshToken:VI.refreshToken,authToken:h0(VI.authToken)}}throw yield E0("Create Installation",SI)})).apply(this,arguments)}function D0(c_){return new Promise(d_=>{setTimeout(d_,c_)})}const CI=/^[cdef][\w-]{21}$/;function K0(){try{const c_=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(c_),c_[0]=112+c_[0]%16;const T_=function B1(c_){return function O0(c_){return btoa(String.fromCharCode(...c_)).replace(/\+/g,"-").replace(/\//g,"_")}(c_).substr(0,22)}(c_);return CI.test(T_)?T_:""}catch(c_){return""}}function A1(c_){return`${c_.appName}!${c_.appId}`}const FI=new Map;function _w(c_,d_){const T_=A1(c_);S1(T_,d_),function wN(c_,d_){const T_=function xT(){return!ET&&"BroadcastChannel"in self&&(ET=new BroadcastChannel("[Firebase] FID Change"),ET.onmessage=c_=>{S1(c_.data.key,c_.data.fid)}),ET}();T_&&T_.postMessage({key:c_,fid:d_}),function XT(){0===FI.size&&ET&&(ET.close(),ET=null)}()}(T_,d_)}function S1(c_,d_){const T_=FI.get(c_);if(T_)for(const W_ of T_)W_(d_)}let ET=null;const VR="firebase-installations-store";let _D=null;function KI(){return _D||(_D=(0,bh.X3)("firebase-installations-database",1,{upgrade:(c_,d_)=>{0===d_&&c_.createObjectStore(VR)}})),_D}function fO(c_,d_){return TT.apply(this,arguments)}function TT(){return(TT=(0,q.Z)(function*(c_,d_){const T_=A1(c_),p0=(yield KI()).transaction(VR,"readwrite"),y0=p0.objectStore(VR),P0=yield y0.get(T_);return yield y0.put(d_,T_),yield p0.done,(!P0||P0.fid!==d_.fid)&&_w(c_,d_.fid),d_})).apply(this,arguments)}function qT(c_){return rP.apply(this,arguments)}function rP(){return(rP=(0,q.Z)(function*(c_){const d_=A1(c_),W_=(yield KI()).transaction(VR,"readwrite");yield W_.objectStore(VR).delete(d_),yield W_.done})).apply(this,arguments)}function GR(c_,d_){return CS.apply(this,arguments)}function CS(){return(CS=(0,q.Z)(function*(c_,d_){const T_=A1(c_),p0=(yield KI()).transaction(VR,"readwrite"),y0=p0.objectStore(VR),P0=yield y0.get(T_),yI=d_(P0);return void 0===yI?yield y0.delete(T_):yield y0.put(yI,T_),yield p0.done,yI&&(!P0||P0.fid!==yI.fid)&&_w(c_,yI.fid),yI})).apply(this,arguments)}function eS(c_){return SO.apply(this,arguments)}function SO(){return(SO=(0,q.Z)(function*(c_){let d_;const T_=yield GR(c_.appConfig,W_=>{const p0=rL(W_),y0=G1(c_,p0);return d_=y0.registrationPromise,y0.installationEntry});return""===T_.fid?{installationEntry:yield d_}:{installationEntry:T_,registrationPromise:d_}})).apply(this,arguments)}function rL(c_){return iL(c_||{fid:K0(),registrationStatus:0})}function G1(c_,d_){if(0===d_.registrationStatus){if(!navigator.onLine)return{installationEntry:d_,registrationPromise:Promise.reject(_0.create("app-offline"))};const T_={fid:d_.fid,registrationStatus:1,registrationTime:Date.now()},W_=function PI(c_,d_){return JI.apply(this,arguments)}(c_,T_);return{installationEntry:T_,registrationPromise:W_}}return 1===d_.registrationStatus?{installationEntry:d_,registrationPromise:mR(c_)}:{installationEntry:d_}}function JI(){return(JI=(0,q.Z)(function*(c_,d_){try{const T_=yield J_(c_,d_);return fO(c_.appConfig,T_)}catch(T_){throw c0(T_)&&409===T_.customData.serverCode?yield qT(c_.appConfig):yield fO(c_.appConfig,{fid:d_.fid,registrationStatus:0}),T_}})).apply(this,arguments)}function mR(c_){return iR.apply(this,arguments)}function iR(){return(iR=(0,q.Z)(function*(c_){let d_=yield P1(c_.appConfig);for(;1===d_.registrationStatus;)yield D0(100),d_=yield P1(c_.appConfig);if(0===d_.registrationStatus){const{installationEntry:T_,registrationPromise:W_}=yield eS(c_);return W_||T_}return d_})).apply(this,arguments)}function P1(c_){return GR(c_,d_=>{if(!d_)throw _0.create("installation-not-found");return iL(d_)})}function iL(c_){return function AR(c_){return 1===c_.registrationStatus&&c_.registrationTime+1e4<Date.now()}(c_)?{fid:c_.fid,registrationStatus:0}:c_}function tS(c_,d_){return $_.apply(this,arguments)}function $_(){return($_=(0,q.Z)(function*({appConfig:c_,heartbeatServiceProvider:d_},T_){const W_=_E(c_,T_),p0=P_(c_,T_),y0=d_.getImmediate({optional:!0});if(y0){const VI=yield y0.getHeartbeatsHeader();VI&&p0.append("x-firebase-client",VI)}const yI={method:"POST",headers:p0,body:JSON.stringify({installation:{sdkVersion:p_,appId:c_.appId}})},SI=yield Rv(()=>fetch(W_,yI));if(SI.ok)return h0(yield SI.json());throw yield E0("Generate Auth Token",SI)})).apply(this,arguments)}function _E(c_,{fid:d_}){return`${Qv(c_)}/${d_}/authTokens:generate`}function r0(c_){return M0.apply(this,arguments)}function M0(){return(M0=(0,q.Z)(function*(c_,d_=!1){let T_;const W_=yield GR(c_.appConfig,y0=>{if(!XI(y0))throw _0.create("not-registered");const P0=y0.authToken;if(!d_&&IT(P0))return y0;if(1===P0.requestStatus)return T_=_y(c_,d_),y0;{if(!navigator.onLine)throw _0.create("app-offline");const yI=nS(y0);return T_=II(c_,yI),yI}});return T_?yield T_:W_.authToken})).apply(this,arguments)}function _y(c_,d_){return m0.apply(this,arguments)}function m0(){return(m0=(0,q.Z)(function*(c_,d_){let T_=yield G0(c_.appConfig);for(;1===T_.authToken.requestStatus;)yield D0(100),T_=yield G0(c_.appConfig);const W_=T_.authToken;return 0===W_.requestStatus?r0(c_,d_):W_})).apply(this,arguments)}function G0(c_){return GR(c_,d_=>{if(!XI(d_))throw _0.create("not-registered");return function _R(c_){return 1===c_.requestStatus&&c_.requestTime+1e4<Date.now()}(d_.authToken)?Object.assign(Object.assign({},d_),{authToken:{requestStatus:0}}):d_})}function II(c_,d_){return qI.apply(this,arguments)}function qI(){return(qI=(0,q.Z)(function*(c_,d_){try{const T_=yield tS(c_,d_),W_=Object.assign(Object.assign({},d_),{authToken:T_});return yield fO(c_.appConfig,W_),T_}catch(T_){if(!c0(T_)||401!==T_.customData.serverCode&&404!==T_.customData.serverCode){const W_=Object.assign(Object.assign({},d_),{authToken:{requestStatus:0}});yield fO(c_.appConfig,W_)}else yield qT(c_.appConfig);throw T_}})).apply(this,arguments)}function XI(c_){return void 0!==c_&&2===c_.registrationStatus}function IT(c_){return 2===c_.requestStatus&&!function _b(c_){const d_=Date.now();return d_<c_.creationTime||c_.creationTime+c_.expiresIn<d_+36e5}(c_)}function nS(c_){const d_={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},c_),{authToken:d_})}function qM(){return(qM=(0,q.Z)(function*(c_){const d_=c_,{installationEntry:T_,registrationPromise:W_}=yield eS(d_);return W_?W_.catch(console.error):r0(d_).catch(console.error),T_.fid})).apply(this,arguments)}function WM(){return(WM=(0,q.Z)(function*(c_,d_=!1){const T_=c_;return yield wS(T_),(yield r0(T_,d_)).token})).apply(this,arguments)}function wS(c_){return eT.apply(this,arguments)}function eT(){return(eT=(0,q.Z)(function*(c_){const{registrationPromise:d_}=yield eS(c_);d_&&(yield d_)})).apply(this,arguments)}function HL(c_){return _0.create("missing-app-config-values",{valueName:c_})}const QR="installations",NI=c_=>{const d_=c_.getProvider("app").getImmediate(),T_=function QS(c_){if(!c_||!c_.options)throw HL("App Configuration");if(!c_.name)throw HL("App Name");const d_=["projectId","apiKey","appId"];for(const T_ of d_)if(!c_.options[T_])throw HL(T_);return{appName:c_.name,projectId:c_.options.projectId,apiKey:c_.options.apiKey,appId:c_.options.appId}}(d_);return{app:d_,appConfig:T_,heartbeatServiceProvider:(0,_r._getProvider)(d_,"heartbeat"),_delete:()=>Promise.resolve()}},Q1=c_=>{const d_=c_.getProvider("app").getImmediate(),T_=(0,_r._getProvider)(d_,QR).getImmediate();return{getId:()=>function i3(c_){return qM.apply(this,arguments)}(T_),getToken:p0=>function SN(c_){return WM.apply(this,arguments)}(T_,p0)}};(function HR(){(0,_r._registerComponent)(new _a.wA(QR,NI,"PUBLIC")),(0,_r._registerComponent)(new _a.wA("installations-internal",Q1,"PRIVATE"))})(),(0,_r.registerVersion)(n_,"0.5.9"),(0,_r.registerVersion)(n_,"0.5.9","esm2017");const RN="@firebase/remote-config",rS=new _s.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class B9{constructor(d_,T_,W_,p0){this.client=d_,this.storage=T_,this.storageCache=W_,this.logger=p0}isCachedDataFresh(d_,T_){if(!T_)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const W_=Date.now()-T_,p0=W_<=d_;return this.logger.debug(`Config fetch cache check. Cache age millis: ${W_}. Cache max age millis (minimumFetchIntervalMillis setting): ${d_}. Is cache hit: ${p0}.`),p0}fetch(d_){var T_=this;return(0,q.Z)(function*(){const[W_,p0]=yield Promise.all([T_.storage.getLastSuccessfulFetchTimestampMillis(),T_.storage.getLastSuccessfulFetchResponse()]);if(p0&&T_.isCachedDataFresh(d_.cacheMaxAgeMillis,W_))return p0;d_.eTag=p0&&p0.eTag;const y0=yield T_.client.fetch(d_),P0=[T_.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===y0.status&&P0.push(T_.storage.setLastSuccessfulFetchResponse(y0)),yield Promise.all(P0),y0})()}}function z6(c_=navigator){return c_.languages&&c_.languages[0]||c_.language}class oR{constructor(d_,T_,W_,p0,y0,P0){this.firebaseInstallations=d_,this.sdkVersion=T_,this.namespace=W_,this.projectId=p0,this.apiKey=y0,this.appId=P0}fetch(d_){var T_=this;return(0,q.Z)(function*(){const[W_,p0]=yield Promise.all([T_.firebaseInstallations.getId(),T_.firebaseInstallations.getToken()]),P0=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${T_.projectId}/namespaces/${T_.namespace}:fetch?key=${T_.apiKey}`,yI={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":d_.eTag||"*"},SI={sdk_version:T_.sdkVersion,app_instance_id:W_,app_instance_id_token:p0,app_id:T_.appId,language_code:z6()},VI={method:"POST",headers:yI,body:JSON.stringify(SI)},q1=fetch(P0,VI),_C=new Promise((uR,T2)=>{d_.signal.addEventListener(()=>{const S2=new Error("The operation was aborted.");S2.name="AbortError",T2(S2)})});let _S;try{yield Promise.race([q1,_C]),_S=yield q1}catch(uR){let T2="fetch-client-network";throw"AbortError"===uR.name&&(T2="fetch-timeout"),rS.create(T2,{originalErrorMessage:uR.message})}let PS=_S.status;const VN=_S.headers.get("ETag")||void 0;let oN,YR;if(200===_S.status){let uR;try{uR=yield _S.json()}catch(T2){throw rS.create("fetch-client-parse",{originalErrorMessage:T2.message})}oN=uR.entries,YR=uR.state}if("INSTANCE_STATE_UNSPECIFIED"===YR?PS=500:"NO_CHANGE"===YR?PS=304:("NO_TEMPLATE"===YR||"EMPTY_CONFIG"===YR)&&(oN={}),304!==PS&&200!==PS)throw rS.create("fetch-status",{httpStatus:PS});return{status:PS,eTag:VN,config:oN}})()}}class CG{constructor(d_,T_){this.client=d_,this.storage=T_}fetch(d_){var T_=this;return(0,q.Z)(function*(){const W_=(yield T_.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return T_.attemptFetch(d_,W_)})()}attemptFetch(d_,{throttleEndTimeMillis:T_,backoffCount:W_}){var p0=this;return(0,q.Z)(function*(){yield function bT(c_,d_){return new Promise((T_,W_)=>{const p0=Math.max(d_-Date.now(),0),y0=setTimeout(T_,p0);c_.addEventListener(()=>{clearTimeout(y0),W_(rS.create("fetch-throttle",{throttleEndTimeMillis:d_}))})})}(d_.signal,T_);try{const y0=yield p0.client.fetch(d_);return yield p0.storage.deleteThrottleMetadata(),y0}catch(y0){if(!function q4(c_){if(!(c_ instanceof _s.ZR&&c_.customData))return!1;const d_=Number(c_.customData.httpStatus);return 429===d_||500===d_||503===d_||504===d_}(y0))throw y0;const P0={throttleEndTimeMillis:Date.now()+(0,_s.$s)(W_),backoffCount:W_+1};return yield p0.storage.setThrottleMetadata(P0),p0.attemptFetch(d_,P0)}})()}}class Y6{constructor(d_,T_,W_,p0,y0){this.app=d_,this._client=T_,this._storageCache=W_,this._storage=p0,this._logger=y0,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function SS(c_,d_){const T_=c_.target.error||void 0;return rS.create(d_,{originalErrorMessage:T_&&T_.message})}const aP="app_namespace_store";class wG{constructor(d_,T_,W_,p0=function YM(){return new Promise((c_,d_)=>{try{const T_=indexedDB.open("firebase_remote_config",1);T_.onerror=W_=>{d_(SS(W_,"storage-open"))},T_.onsuccess=W_=>{c_(W_.target.result)},T_.onupgradeneeded=W_=>{0===W_.oldVersion&&W_.target.result.createObjectStore(aP,{keyPath:"compositeKey"})}}catch(T_){d_(rS.create("storage-open",{originalErrorMessage:T_}))}})}()){this.appId=d_,this.appName=T_,this.namespace=W_,this.openDbPromise=p0}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(d_){return this.set("last_fetch_status",d_)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(d_){return this.set("last_successful_fetch_timestamp_millis",d_)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(d_){return this.set("last_successful_fetch_response",d_)}getActiveConfig(){return this.get("active_config")}setActiveConfig(d_){return this.set("active_config",d_)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(d_){return this.set("active_config_etag",d_)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(d_){return this.set("throttle_metadata",d_)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(d_){var T_=this;return(0,q.Z)(function*(){const W_=yield T_.openDbPromise;return new Promise((p0,y0)=>{const yI=W_.transaction([aP],"readonly").objectStore(aP),SI=T_.createCompositeKey(d_);try{const VI=yI.get(SI);VI.onerror=q1=>{y0(SS(q1,"storage-get"))},VI.onsuccess=q1=>{const _C=q1.target.result;p0(_C?_C.value:void 0)}}catch(VI){y0(rS.create("storage-get",{originalErrorMessage:VI&&VI.message}))}})})()}set(d_,T_){var W_=this;return(0,q.Z)(function*(){const p0=yield W_.openDbPromise;return new Promise((y0,P0)=>{const SI=p0.transaction([aP],"readwrite").objectStore(aP),VI=W_.createCompositeKey(d_);try{const q1=SI.put({compositeKey:VI,value:T_});q1.onerror=_C=>{P0(SS(_C,"storage-set"))},q1.onsuccess=()=>{y0()}}catch(q1){P0(rS.create("storage-set",{originalErrorMessage:q1&&q1.message}))}})})()}delete(d_){var T_=this;return(0,q.Z)(function*(){const W_=yield T_.openDbPromise;return new Promise((p0,y0)=>{const yI=W_.transaction([aP],"readwrite").objectStore(aP),SI=T_.createCompositeKey(d_);try{const VI=yI.delete(SI);VI.onerror=q1=>{y0(SS(q1,"storage-delete"))},VI.onsuccess=()=>{p0()}}catch(VI){y0(rS.create("storage-delete",{originalErrorMessage:VI&&VI.message}))}})})()}createCompositeKey(d_){return[this.appId,this.appName,this.namespace,d_].join()}}class $6{constructor(d_){this.storage=d_}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var d_=this;return(0,q.Z)(function*(){const T_=d_.storage.getLastFetchStatus(),W_=d_.storage.getLastSuccessfulFetchTimestampMillis(),p0=d_.storage.getActiveConfig(),y0=yield T_;y0&&(d_.lastFetchStatus=y0);const P0=yield W_;P0&&(d_.lastSuccessfulFetchTimestampMillis=P0);const yI=yield p0;yI&&(d_.activeConfig=yI)})()}setLastFetchStatus(d_){return this.lastFetchStatus=d_,this.storage.setLastFetchStatus(d_)}setLastSuccessfulFetchTimestampMillis(d_){return this.lastSuccessfulFetchTimestampMillis=d_,this.storage.setLastSuccessfulFetchTimestampMillis(d_)}setActiveConfig(d_){return this.activeConfig=d_,this.storage.setActiveConfig(d_)}}function a3(){return Z6.apply(this,arguments)}function Z6(){return(Z6=(0,q.Z)(function*(){if(!(0,_s.hl)())return!1;try{return yield(0,_s.eu)()}catch(c_){return!1}})).apply(this,arguments)}!function cP(){(0,_r._registerComponent)(new _a.wA("remote-config",function c_(d_,{instanceIdentifier:T_}){const W_=d_.getProvider("app").getImmediate(),p0=d_.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw rS.create("registration-window");if(!(0,_s.hl)())throw rS.create("indexed-db-unavailable");const{projectId:y0,apiKey:P0,appId:yI}=W_.options;if(!y0)throw rS.create("registration-project-id");if(!P0)throw rS.create("registration-api-key");if(!yI)throw rS.create("registration-app-id");const SI=new wG(yI,W_.name,T_=T_||"firebase"),VI=new $6(SI),q1=new _l.Yd(RN);q1.logLevel=_l.in.ERROR;const _C=new oR(p0,_r.SDK_VERSION,T_,y0,P0,yI),_S=new CG(_C,SI),PS=new B9(_S,SI,VI,q1),VN=new Y6(W_,PS,VI,SI,q1);return function hT(c_){const d_=(0,_s.m9)(c_);d_._initializePromise||(d_._initializePromise=d_._storageCache.loadFromStorage().then(()=>{d_._isInitializationComplete=!0}))}(VN),VN},"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(RN,"0.3.8"),(0,_r.registerVersion)(RN,"0.3.8","esm2017")}();const X6="/firebase-messaging-sw.js",vR="/firebase-cloud-messaging-push-scope",RS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",WL="google.c.a.c_id",c3="google.c.a.c_l",SG="google.c.a.ts",sL="google.c.a.e";var f2=(()=>{return(c_=f2||(f2={})).PUSH_RECEIVED="push-received",c_.NOTIFICATION_CLICKED="notification-clicked",f2;var c_})();function qS(c_){const d_=new Uint8Array(c_);return btoa(String.fromCharCode(...d_)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function e5(c_){const T_=(c_+"=".repeat((4-c_.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),W_=atob(T_),p0=new Uint8Array(W_.length);for(let y0=0;y0<W_.length;++y0)p0[y0]=W_.charCodeAt(y0);return p0}const WR="fcm_token_details_db",OO="fcm_token_object_Store";function W4(c_){return t5.apply(this,arguments)}function t5(){return t5=(0,q.Z)(function*(c_){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(y0=>y0.name).includes(WR))return null;let d_=null;return(yield(0,bh.X3)(WR,5,{upgrade:(W_=(0,q.Z)(function*(p0,y0,P0,yI){var SI;if(y0<2||!p0.objectStoreNames.contains(OO))return;const VI=yI.objectStore(OO),q1=yield VI.index("fcmSenderId").get(c_);if(yield VI.clear(),q1)if(2===y0){const _C=q1;if(!_C.auth||!_C.p256dh||!_C.endpoint)return;d_={token:_C.fcmToken,createTime:null!==(SI=_C.createTime)&&void 0!==SI?SI:Date.now(),subscriptionOptions:{auth:_C.auth,p256dh:_C.p256dh,endpoint:_C.endpoint,swScope:_C.swScope,vapidKey:"string"==typeof _C.vapidKey?_C.vapidKey:qS(_C.vapidKey)}}}else if(3===y0){const _C=q1;d_={token:_C.fcmToken,createTime:_C.createTime,subscriptionOptions:{auth:qS(_C.auth),p256dh:qS(_C.p256dh),endpoint:_C.endpoint,swScope:_C.swScope,vapidKey:qS(_C.vapidKey)}}}else if(4===y0){const _C=q1;d_={token:_C.fcmToken,createTime:_C.createTime,subscriptionOptions:{auth:qS(_C.auth),p256dh:qS(_C.p256dh),endpoint:_C.endpoint,swScope:_C.swScope,vapidKey:qS(_C.vapidKey)}}}}),function(y0,P0,yI,SI){return W_.apply(this,arguments)})})).close(),yield(0,bh.Lj)(WR),yield(0,bh.Lj)("fcm_vapid_details_db"),yield(0,bh.Lj)("undefined"),u3(d_)?d_:null;var W_}),t5.apply(this,arguments)}function u3(c_){if(!c_||!c_.subscriptionOptions)return!1;const{subscriptionOptions:d_}=c_;return"number"==typeof c_.createTime&&c_.createTime>0&&"string"==typeof c_.token&&c_.token.length>0&&"string"==typeof d_.auth&&d_.auth.length>0&&"string"==typeof d_.p256dh&&d_.p256dh.length>0&&"string"==typeof d_.endpoint&&d_.endpoint.length>0&&"string"==typeof d_.swScope&&d_.swScope.length>0&&"string"==typeof d_.vapidKey&&d_.vapidKey.length>0}const xN="firebase-messaging-store";let n5=null;function tT(){return n5||(n5=(0,bh.X3)("firebase-messaging-database",1,{upgrade:(c_,d_)=>{0===d_&&c_.createObjectStore(xN)}})),n5}function ZM(c_){return cL.apply(this,arguments)}function cL(){return(cL=(0,q.Z)(function*(c_){const d_=WS(c_),W_=yield(yield tT()).transaction(xN).objectStore(xN).get(d_);if(W_)return W_;{const p0=yield W4(c_.appConfig.senderId);if(p0)return yield Y1(c_,p0),p0}})).apply(this,arguments)}function Y1(c_,d_){return uL.apply(this,arguments)}function uL(){return(uL=(0,q.Z)(function*(c_,d_){const T_=WS(c_),p0=(yield tT()).transaction(xN,"readwrite");return yield p0.objectStore(xN).put(d_,T_),yield p0.done,d_})).apply(this,arguments)}function l3(c_){return lP.apply(this,arguments)}function lP(){return(lP=(0,q.Z)(function*(c_){const d_=WS(c_),W_=(yield tT()).transaction(xN,"readwrite");yield W_.objectStore(xN).delete(d_),yield W_.done})).apply(this,arguments)}function WS({appConfig:c_}){return c_.appId}const LT=new _s.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sR(c_,d_){return aR.apply(this,arguments)}function aR(){return(aR=(0,q.Z)(function*(c_,d_){const T_=yield KL(c_),W_=hP(d_),p0={method:"POST",headers:T_,body:JSON.stringify(W_)};let y0;try{y0=yield(yield fetch(DO(c_.appConfig),p0)).json()}catch(P0){throw LT.create("token-subscribe-failed",{errorInfo:P0})}if(y0.error)throw LT.create("token-subscribe-failed",{errorInfo:y0.error.message});if(!y0.token)throw LT.create("token-subscribe-no-token");return y0.token})).apply(this,arguments)}function dP(c_,d_){return p2.apply(this,arguments)}function p2(){return(p2=(0,q.Z)(function*(c_,d_){const T_=yield KL(c_),W_=hP(d_.subscriptionOptions),p0={method:"PATCH",headers:T_,body:JSON.stringify(W_)};let y0;try{y0=yield(yield fetch(`${DO(c_.appConfig)}/${d_.token}`,p0)).json()}catch(P0){throw LT.create("token-update-failed",{errorInfo:P0})}if(y0.error)throw LT.create("token-update-failed",{errorInfo:y0.error.message});if(!y0.token)throw LT.create("token-update-no-token");return y0.token})).apply(this,arguments)}function LN(c_,d_){return MT.apply(this,arguments)}function MT(){return(MT=(0,q.Z)(function*(c_,d_){const W_={method:"DELETE",headers:yield KL(c_)};try{const y0=yield(yield fetch(`${DO(c_.appConfig)}/${d_}`,W_)).json();if(y0.error)throw LT.create("token-unsubscribe-failed",{errorInfo:y0.error.message})}catch(p0){throw LT.create("token-unsubscribe-failed",{errorInfo:p0})}})).apply(this,arguments)}function DO({projectId:c_}){return`https://fcmregistrations.googleapis.com/v1/projects/${c_}/registrations`}function KL(c_){return zI.apply(this,arguments)}function zI(){return(zI=(0,q.Z)(function*({appConfig:c_,installations:d_}){const T_=yield d_.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":c_.apiKey,"x-goog-firebase-installations-auth":`FIS ${T_}`})})).apply(this,arguments)}function hP({p256dh:c_,auth:d_,endpoint:T_,vapidKey:W_}){const p0={web:{endpoint:T_,auth:d_,p256dh:c_}};return W_!==RS&&(p0.web.applicationPubKey=W_),p0}const _B=6048e5;function lL(c_){return K4.apply(this,arguments)}function K4(){return(K4=(0,q.Z)(function*(c_){const d_=yield YL(c_.swRegistration,c_.vapidKey),T_={vapidKey:c_.vapidKey,swScope:c_.swRegistration.scope,endpoint:d_.endpoint,auth:qS(d_.getKey("auth")),p256dh:qS(d_.getKey("p256dh"))},W_=yield ZM(c_.firebaseDependencies);if(W_){if(f3(W_.subscriptionOptions,T_))return Date.now()>=W_.createTime+_B?h3(c_,{token:W_.token,createTime:Date.now(),subscriptionOptions:T_}):W_.token;try{yield LN(c_.firebaseDependencies,W_.token)}catch(p0){console.warn(p0)}return j0(c_.firebaseDependencies,T_)}return j0(c_.firebaseDependencies,T_)})).apply(this,arguments)}function eU(c_){return d3.apply(this,arguments)}function d3(){return(d3=(0,q.Z)(function*(c_){const d_=yield ZM(c_.firebaseDependencies);d_&&(yield LN(c_.firebaseDependencies,d_.token),yield l3(c_.firebaseDependencies));const T_=yield c_.swRegistration.pushManager.getSubscription();return!T_||T_.unsubscribe()})).apply(this,arguments)}function h3(c_,d_){return zL.apply(this,arguments)}function zL(){return(zL=(0,q.Z)(function*(c_,d_){try{const T_=yield dP(c_.firebaseDependencies,d_),W_=Object.assign(Object.assign({},d_),{token:T_,createTime:Date.now()});return yield Y1(c_.firebaseDependencies,W_),T_}catch(T_){throw yield eU(c_),T_}})).apply(this,arguments)}function j0(c_,d_){return R1.apply(this,arguments)}function R1(){return(R1=(0,q.Z)(function*(c_,d_){const W_={token:yield sR(c_,d_),createTime:Date.now(),subscriptionOptions:d_};return yield Y1(c_,W_),W_.token})).apply(this,arguments)}function YL(c_,d_){return ST.apply(this,arguments)}function ST(){return(ST=(0,q.Z)(function*(c_,d_){return(yield c_.pushManager.getSubscription())||c_.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e5(d_)})})).apply(this,arguments)}function f3(c_,d_){return d_.vapidKey===c_.vapidKey&&d_.endpoint===c_.endpoint&&d_.auth===c_.auth&&d_.p256dh===c_.p256dh}function tN(c_){const d_={from:c_.from,collapseKey:c_.collapse_key,messageId:c_.fcmMessageId};return function NO(c_,d_){if(!d_.notification)return;c_.notification={};const T_=d_.notification.title;T_&&(c_.notification.title=T_);const W_=d_.notification.body;W_&&(c_.notification.body=W_);const p0=d_.notification.image;p0&&(c_.notification.image=p0)}(d_,c_),function z4(c_,d_){!d_.data||(c_.data=d_.data)}(d_,c_),function MN(c_,d_){if(!d_.fcmOptions)return;c_.fcmOptions={};const T_=d_.fcmOptions.link;T_&&(c_.fcmOptions.link=T_);const W_=d_.fcmOptions.analytics_label;W_&&(c_.fcmOptions.analyticsLabel=W_)}(d_,c_),d_}function Y4(c_){return"object"==typeof c_&&!!c_&&WL in c_}function r5(c_,d_){const T_=[];for(let W_=0;W_<c_.length;W_++)T_.push(c_.charAt(W_)),W_<d_.length&&T_.push(d_.charAt(W_));return T_.join("")}function kO(c_){return LT.create("missing-app-config-values",{valueName:c_})}r5("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),r5("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yR{constructor(d_,T_,W_){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const p0=function j9(c_){if(!c_||!c_.options)throw kO("App Configuration Object");if(!c_.name)throw kO("App Name");const d_=["projectId","apiKey","appId","messagingSenderId"],{options:T_}=c_;for(const W_ of d_)if(!T_[W_])throw kO(W_);return{appName:c_.name,projectId:T_.projectId,apiKey:T_.apiKey,appId:T_.appId,senderId:T_.messagingSenderId}}(d_);this.firebaseDependencies={app:d_,appConfig:p0,installations:T_,analyticsProvider:W_}}_delete(){return Promise.resolve()}}function PO(c_){return g2.apply(this,arguments)}function g2(){return(g2=(0,q.Z)(function*(c_){try{c_.swRegistration=yield navigator.serviceWorker.register(X6,{scope:vR}),c_.swRegistration.update().catch(()=>{})}catch(d_){throw LT.create("failed-service-worker-registration",{browserErrorMessage:d_.message})}})).apply(this,arguments)}function fP(c_,d_){return OS.apply(this,arguments)}function OS(){return(OS=(0,q.Z)(function*(c_,d_){if(!d_&&!c_.swRegistration&&(yield PO(c_)),d_||!c_.swRegistration){if(!(d_ instanceof ServiceWorkerRegistration))throw LT.create("invalid-sw-registration");c_.swRegistration=d_}})).apply(this,arguments)}function J4(c_,d_){return p3.apply(this,arguments)}function p3(){return(p3=(0,q.Z)(function*(c_,d_){d_?c_.vapidKey=d_:c_.vapidKey||(c_.vapidKey=RS)})).apply(this,arguments)}function m3(){return(m3=(0,q.Z)(function*(c_,d_){if(!navigator)throw LT.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw LT.create("permission-blocked");return yield J4(c_,null==d_?void 0:d_.vapidKey),yield fP(c_,null==d_?void 0:d_.serviceWorkerRegistration),lL(c_)})).apply(this,arguments)}function tU(c_,d_,T_){return JL.apply(this,arguments)}function JL(){return(JL=(0,q.Z)(function*(c_,d_,T_){const W_=A3(d_);(yield c_.firebaseDependencies.analyticsProvider.get()).logEvent(W_,{message_id:T_[WL],message_name:T_[c3],message_time:T_[SG],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function A3(c_){switch(c_){case f2.NOTIFICATION_CLICKED:return"notification_open";case f2.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function o5(){return(o5=(0,q.Z)(function*(c_,d_){const T_=d_.data;if(!T_.isFirebaseMessaging)return;c_.onMessageHandler&&T_.messageType===f2.PUSH_RECEIVED&&("function"==typeof c_.onMessageHandler?c_.onMessageHandler(tN(T_)):c_.onMessageHandler.next(tN(T_)));const W_=T_.data;Y4(W_)&&"1"===W_[sL]&&(yield tU(c_,T_.messageType,W_))})).apply(this,arguments)}const nU="@firebase/messaging",_3=c_=>{const d_=new yR(c_.getProvider("app").getImmediate(),c_.getProvider("installations-internal").getImmediate(),c_.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",T_=>function i5(c_,d_){return o5.apply(this,arguments)}(d_,T_)),d_},$L=c_=>{const d_=c_.getProvider("messaging").getImmediate();return{getToken:W_=>function g3(c_,d_){return m3.apply(this,arguments)}(d_,W_)}};function rU(){return gO.apply(this,arguments)}function gO(){return(gO=(0,q.Z)(function*(){try{yield(0,_s.eu)()}catch(c_){return!1}return"undefined"!=typeof window&&(0,_s.hl)()&&(0,_s.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function s5(){(0,_r._registerComponent)(new _a.wA("messaging",_3,"PUBLIC")),(0,_r._registerComponent)(new _a.wA("messaging-internal",$L,"PRIVATE")),(0,_r.registerVersion)(nU,"0.9.13"),(0,_r.registerVersion)(nU,"0.9.13","esm2017")}();const c5="analytics",u5="firebase_id",m2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nN="https://www.googletagmanager.com/gtag/js",DS=new _l.Yd("@firebase/analytics");function l5(c_){return Promise.all(c_.map(d_=>d_.catch(T_=>T_)))}function V9(c_,d_){const T_=document.createElement("script");T_.src=`${nN}?l=${c_}&id=${d_}`,T_.async=!0,document.head.appendChild(T_)}function gP(c_,d_,T_,W_,p0,y0){return ZL.apply(this,arguments)}function ZL(){return(ZL=(0,q.Z)(function*(c_,d_,T_,W_,p0,y0){const P0=W_[p0];try{if(P0)yield d_[P0];else{const SI=(yield l5(T_)).find(VI=>VI.measurementId===p0);SI&&(yield d_[SI.appId])}}catch(yI){DS.error(yI)}c_("config",p0,y0)})).apply(this,arguments)}function d5(c_,d_,T_,W_,p0){return BN.apply(this,arguments)}function BN(){return(BN=(0,q.Z)(function*(c_,d_,T_,W_,p0){try{let y0=[];if(p0&&p0.send_to){let P0=p0.send_to;Array.isArray(P0)||(P0=[P0]);const yI=yield l5(T_);for(const SI of P0){const VI=yI.find(_C=>_C.measurementId===SI),q1=VI&&d_[VI.appId];if(!q1){y0=[];break}y0.push(q1)}}0===y0.length&&(y0=Object.values(d_)),yield Promise.all(y0),c_("event",W_,p0||{})}catch(y0){DS.error(y0)}})).apply(this,arguments)}function fT(){const c_=window.document.getElementsByTagName("script");for(const d_ of Object.values(c_))if(d_.src&&d_.src.includes(nN))return d_;return null}const mI=new _s.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),eM=new class UT{constructor(d_={},T_=1e3){this.throttleMetadata=d_,this.intervalMillis=T_}getThrottleMetadata(d_){return this.throttleMetadata[d_]}setThrottleMetadata(d_,T_){this.throttleMetadata[d_]=T_}deleteThrottleMetadata(d_){delete this.throttleMetadata[d_]}};function h5(c_){return new Headers({Accept:"application/json","x-goog-api-key":c_})}function tM(c_){return mP.apply(this,arguments)}function mP(){return(mP=(0,q.Z)(function*(c_){var d_;const{appId:T_,apiKey:W_}=c_,p0={method:"GET",headers:h5(W_)},y0=m2.replace("{app-id}",T_),P0=yield fetch(y0,p0);if(200!==P0.status&&304!==P0.status){let yI="";try{const SI=yield P0.json();(null===(d_=SI.error)||void 0===d_?void 0:d_.message)&&(yI=SI.error.message)}catch(SI){}throw mI.create("config-fetch-failed",{httpStatus:P0.status,responseMessage:yI})}return P0.json()})).apply(this,arguments)}function oS(c_){return AP.apply(this,arguments)}function AP(){return(AP=(0,q.Z)(function*(c_,d_=eM,T_){const{appId:W_,apiKey:p0,measurementId:y0}=c_.options;if(!W_)throw mI.create("no-app-id");if(!p0){if(y0)return{measurementId:y0,appId:W_};throw mI.create("no-api-key")}const P0=d_.getThrottleMetadata(W_)||{backoffCount:0,throttleEndTimeMillis:Date.now()},yI=new v3;return setTimeout((0,q.Z)(function*(){yI.abort()}),void 0!==T_?T_:6e4),rN({appId:W_,apiKey:p0,measurementId:y0},P0,yI,d_)})).apply(this,arguments)}function rN(c_,d_,T_){return RI.apply(this,arguments)}function RI(){return(RI=(0,q.Z)(function*(c_,{throttleEndTimeMillis:d_,backoffCount:T_},W_,p0=eM){const{appId:y0,measurementId:P0}=c_;try{yield f5(W_,d_)}catch(yI){if(P0)return DS.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${P0} provided in the "measurementId" field in the local Firebase config. [${yI.message}]`),{appId:y0,measurementId:P0};throw yI}try{const yI=yield tM(c_);return p0.deleteThrottleMetadata(y0),yI}catch(yI){if(!p5(yI)){if(p0.deleteThrottleMetadata(y0),P0)return DS.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${P0} provided in the "measurementId" field in the local Firebase config. [${yI.message}]`),{appId:y0,measurementId:P0};throw yI}const SI=503===Number(yI.customData.httpStatus)?(0,_s.$s)(T_,p0.intervalMillis,30):(0,_s.$s)(T_,p0.intervalMillis),VI={throttleEndTimeMillis:Date.now()+SI,backoffCount:T_+1};return p0.setThrottleMetadata(y0,VI),DS.debug(`Calling attemptFetch again in ${SI} millis`),rN(c_,VI,W_,p0)}})).apply(this,arguments)}function f5(c_,d_){return new Promise((T_,W_)=>{const p0=Math.max(d_-Date.now(),0),y0=setTimeout(T_,p0);c_.addEventListener(()=>{clearTimeout(y0),W_(mI.create("fetch-throttle",{throttleEndTimeMillis:d_}))})})}function p5(c_){if(!(c_ instanceof _s.ZR&&c_.customData))return!1;const d_=Number(c_.customData.httpStatus);return 429===d_||500===d_||503===d_||504===d_}class v3{constructor(){this.listeners=[]}addEventListener(d_){this.listeners.push(d_)}abort(){this.listeners.forEach(d_=>d_())}}function fL(){return sS.apply(this,arguments)}function sS(){return(sS=(0,q.Z)(function*(){if(!(0,_s.hl)())return DS.warn(mI.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,_s.eu)()}catch(c_){return DS.warn(mI.create("indexeddb-unavailable",{errorInfo:c_}).message),!1}return!0})).apply(this,arguments)}function nM(){return(nM=(0,q.Z)(function*(c_,d_,T_,W_,p0,y0,P0){var yI;const SI=oS(c_);SI.then(PS=>{T_[PS.measurementId]=PS.appId,c_.options.measurementId&&PS.measurementId!==c_.options.measurementId&&DS.warn(`The measurement ID in the local Firebase config (${c_.options.measurementId}) does not match the measurement ID fetched from the server (${PS.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(PS=>DS.error(PS)),d_.push(SI);const VI=fL().then(PS=>{if(PS)return W_.getId()}),[q1,_C]=yield Promise.all([SI,VI]);fT()||V9(y0,q1.measurementId),p0("js",new Date);const _S=null!==(yI=null==P0?void 0:P0.config)&&void 0!==yI?yI:{};return _S.origin="firebase",_S.update=!0,null!=_C&&(_S[u5]=_C),p0("config",q1.measurementId,_S),q1.measurementId})).apply(this,arguments)}class vP{constructor(d_){this.app=d_}_delete(){return delete mS[this.app.options.appId],Promise.resolve()}}let mS={},pL=[];const yP={};let rM,IP,UN="dataLayer",FN=!1;function A2(c_,d_,T_){!function sU(){const c_=[];if((0,_s.ru)()&&c_.push("This is a browser extension environment."),(0,_s.zI)()||c_.push("Cookies are not available."),c_.length>0){const d_=c_.map((W_,p0)=>`(${p0+1}) ${W_}`).join(" "),T_=mI.create("invalid-analytics-context",{errorInfo:d_});DS.warn(T_.message)}}();const W_=c_.options.appId;if(!W_)throw mI.create("no-app-id");if(!c_.options.apiKey){if(!c_.options.measurementId)throw mI.create("no-api-key");DS.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${c_.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mS[W_])throw mI.create("already-exists",{id:W_});if(!FN){!function hL(c_){let d_=[];Array.isArray(window[c_])?d_=window[c_]:window[c_]=d_}(UN);const{wrappedGtag:y0,gtagCore:P0}=function G9(c_,d_,T_,W_,p0){let y0=function(...P0){window[W_].push(arguments)};return window[p0]&&"function"==typeof window[p0]&&(y0=window[p0]),window[p0]=function oU(c_,d_,T_,W_){function y0(){return(y0=(0,q.Z)(function*(P0,yI,SI){try{"event"===P0?yield d5(c_,d_,T_,yI,SI):"config"===P0?yield gP(c_,d_,T_,W_,yI,SI):c_("set",yI)}catch(VI){DS.error(VI)}})).apply(this,arguments)}return function p0(P0,yI,SI){return y0.apply(this,arguments)}}(y0,c_,d_,T_),{gtagCore:y0,wrappedGtag:window[p0]}}(mS,pL,yP,UN,"gtag");IP=y0,rM=P0,FN=!0}return mS[W_]=function _P(c_,d_,T_,W_,p0,y0,P0){return nM.apply(this,arguments)}(c_,pL,yP,d_,rM,UN,T_),new vP(c_)}function aS(){return(aS=(0,q.Z)(function*(c_,d_,T_,W_,p0){if(p0&&p0.global)c_("event",T_,W_);else{const y0=yield d_;c_("event",T_,Object.assign(Object.assign({},W_),{send_to:y0}))}})).apply(this,arguments)}function LO(){return E3.apply(this,arguments)}function E3(){return(E3=(0,q.Z)(function*(){if((0,_s.ru)()||!(0,_s.zI)()||!(0,_s.hl)())return!1;try{return yield(0,_s.eu)()}catch(c_){return!1}})).apply(this,arguments)}const mO="@firebase/analytics";!function wP(){(0,_r._registerComponent)(new _a.wA(c5,(d_,{options:T_})=>A2(d_.getProvider("app").getImmediate(),d_.getProvider("installations-internal").getImmediate(),T_),"PUBLIC")),(0,_r._registerComponent)(new _a.wA("analytics-internal",function c_(d_){try{const T_=d_.getProvider(c5).getImmediate();return{logEvent:(W_,p0,y0)=>function iM(c_,d_,T_,W_){c_=(0,_s.m9)(c_),function gL(c_,d_,T_,W_,p0){return aS.apply(this,arguments)}(IP,mS[c_.app.options.appId],d_,T_,W_).catch(p0=>DS.error(p0))}(T_,W_,p0,y0)}}catch(T_){throw mI.create("interop-component-reg-failed",{reason:T_})}},"PRIVATE")),(0,_r.registerVersion)(mO,"0.7.9"),(0,_r.registerVersion)(mO,"0.7.9","esm2017")}();var X4=g(4408),I3=g(7565);const aU=new class AS extends I3.v{}(class v2 extends X4.o{constructor(d_,T_){super(d_,T_),this.scheduler=d_,this.work=T_}schedule(d_,T_=0){return T_>0?super.schedule(d_,T_):(this.delay=T_,this.state=d_,this.scheduler.flush(this),this)}execute(d_,T_){return T_>0||this.closed?super.execute(d_,T_):this._execute(d_,T_)}requestAsyncId(d_,T_,W_=0){return null!=W_&&W_>0||null==W_&&this.delay>0?super.requestAsyncId(d_,T_,W_):d_.flush(this)}});var m5=g(4986),DG=g(8505),ER=g(5363),zR=g(9468);const oM=new f.GfV("7.3.0"),sM="__angularfire_symbol__analyticsIsSupportedValue",y2="__angularfire_symbol__analyticsIsSupported",E2="__angularfire_symbol__remoteConfigIsSupportedValue",I2="__angularfire_symbol__remoteConfigIsSupported",b2="__angularfire_symbol__messagingIsSupportedValue",_1="__angularfire_symbol__messagingIsSupported";function _L(c_,d_,T_){if(d_){if(1===d_.length)return d_[0];const y0=d_.filter(P0=>P0.app===T_);if(1===y0.length)return y0[0]}return T_.container.getProvider(c_).getImmediate({optional:!0})}globalThis[y2]||(globalThis[y2]=LO().then(c_=>globalThis[sM]=c_).catch(()=>globalThis[sM]=!1)),globalThis[_1]||(globalThis[_1]=rU().then(c_=>globalThis[b2]=c_).catch(()=>globalThis[b2]=!1)),globalThis[I2]||(globalThis[I2]=a3().then(c_=>globalThis[E2]=c_).catch(()=>globalThis[E2]=!1));const Q9=(c_,d_)=>{const T_=d_?[d_]:(0,k.C6)(),W_=[];return T_.forEach(p0=>{p0.container.getProvider(c_).instances.forEach(P0=>{W_.includes(P0)||W_.push(P0)})}),W_};function C2(){}class MO{constructor(d_,T_=aU){this.zone=d_,this.delegate=T_}now(){return this.delegate.now()}schedule(d_,T_,W_){const p0=this.zone;return this.delegate.schedule(function(P0){p0.runGuarded(()=>{d_.apply(this,[P0])})},T_,W_)}}class C3{constructor(d_){this.zone=d_,this.task=null}call(d_,T_){const W_=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",C2,{},C2,C2)),T_.pipe((0,DG.b)({next:W_,complete:W_,error:W_})).subscribe(d_).add(W_)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let A5=(()=>{class c_{constructor(T_){this.ngZone=T_,this.outsideAngular=T_.runOutsideAngular(()=>new MO(Zone.current)),this.insideAngular=T_.run(()=>new MO(Zone.current,m5.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return c_.\u0275fac=function(T_){return new(T_||c_)(f.LFG(f.R0b))},c_.\u0275prov=f.Yz7({token:c_,factory:c_.\u0275fac,providedIn:"root"}),c_})();function iN(){const c_=globalThis.\u0275AngularFireScheduler;if(!c_)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return c_}function kS(c_){return c_.pipe((0,ER.Q)(iN().outsideAngular))}function NG(c_){return iN(),function BO(c_){return function(T_){return(T_=T_.lift(new C3(c_.ngZone))).pipe((0,zR.R)(c_.outsideAngular),(0,ER.Q)(c_.insideAngular))}}(iN())(c_)}},2090:(h,l,g)=>{"use strict";g.d(l,{$s:()=>P1,BH:()=>I_,DV:()=>U1,Dv:()=>rP,G6:()=>e0,GJ:()=>_w,L:()=>bh,LL:()=>z_,Mn:()=>E0,Pz:()=>tI,Sg:()=>v_,UG:()=>B_,UI:()=>wN,US:()=>_a,Wj:()=>eS,Yr:()=>H_,ZB:()=>r_,ZR:()=>J_,b$:()=>c0,cI:()=>CI,d:()=>Qv,dS:()=>rL,eu:()=>Rv,g5:()=>q,gK:()=>GR,gQ:()=>VR,h$:()=>_l,hl:()=>P_,hu:()=>k,jU:()=>Q_,lb:()=>SO,m9:()=>tS,ne:()=>_D,p$:()=>_A,pd:()=>TN,r3:()=>uT,ru:()=>_0,tV:()=>n_,uI:()=>x_,ug:()=>G1,vZ:()=>ET,w1:()=>h0,w9:()=>FI,xO:()=>XT,xb:()=>S1,z$:()=>S_,zI:()=>E_,zd:()=>XO});const k=function($_,_E){if(!$_)throw q(_E)},q=function($_){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$_)},_r=function($_){const _E=[];let r0=0;for(let M0=0;M0<$_.length;M0++){let _y=$_.charCodeAt(M0);_y<128?_E[r0++]=_y:_y<2048?(_E[r0++]=_y>>6|192,_E[r0++]=63&_y|128):55296==(64512&_y)&&M0+1<$_.length&&56320==(64512&$_.charCodeAt(M0+1))?(_y=65536+((1023&_y)<<10)+(1023&$_.charCodeAt(++M0)),_E[r0++]=_y>>18|240,_E[r0++]=_y>>12&63|128,_E[r0++]=_y>>6&63|128,_E[r0++]=63&_y|128):(_E[r0++]=_y>>12|224,_E[r0++]=_y>>6&63|128,_E[r0++]=63&_y|128)}return _E},_a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($_,_E){if(!Array.isArray($_))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r0=_E?this.byteToCharMapWebSafe_:this.byteToCharMap_,M0=[];for(let _y=0;_y<$_.length;_y+=3){const m0=$_[_y],G0=_y+1<$_.length,II=G0?$_[_y+1]:0,qI=_y+2<$_.length,XI=qI?$_[_y+2]:0;let nS=(15&II)<<2|XI>>6,_R=63&XI;qI||(_R=64,G0||(nS=64)),M0.push(r0[m0>>2],r0[(3&m0)<<4|II>>4],r0[nS],r0[_R])}return M0.join("")},encodeString($_,_E){return this.HAS_NATIVE_SUPPORT&&!_E?btoa($_):this.encodeByteArray(_r($_),_E)},decodeString($_,_E){return this.HAS_NATIVE_SUPPORT&&!_E?atob($_):function($_){const _E=[];let r0=0,M0=0;for(;r0<$_.length;){const _y=$_[r0++];if(_y<128)_E[M0++]=String.fromCharCode(_y);else if(_y>191&&_y<224){const m0=$_[r0++];_E[M0++]=String.fromCharCode((31&_y)<<6|63&m0)}else if(_y>239&&_y<365){const qI=((7&_y)<<18|(63&$_[r0++])<<12|(63&$_[r0++])<<6|63&$_[r0++])-65536;_E[M0++]=String.fromCharCode(55296+(qI>>10)),_E[M0++]=String.fromCharCode(56320+(1023&qI))}else{const m0=$_[r0++],G0=$_[r0++];_E[M0++]=String.fromCharCode((15&_y)<<12|(63&m0)<<6|63&G0)}}return _E.join("")}(this.decodeStringToByteArray($_,_E))},decodeStringToByteArray($_,_E){this.init_();const r0=_E?this.charToByteMapWebSafe_:this.charToByteMap_,M0=[];for(let _y=0;_y<$_.length;){const m0=r0[$_.charAt(_y++)],II=_y<$_.length?r0[$_.charAt(_y)]:0;++_y;const XI=_y<$_.length?r0[$_.charAt(_y)]:64;++_y;const _b=_y<$_.length?r0[$_.charAt(_y)]:64;if(++_y,null==m0||null==II||null==XI||null==_b)throw Error();M0.push(m0<<2|II>>4),64!==XI&&(M0.push(II<<4&240|XI>>2),64!==_b&&M0.push(XI<<6&192|_b))}return M0},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $_=0;$_<this.ENCODED_VALS.length;$_++)this.byteToCharMap_[$_]=this.ENCODED_VALS.charAt($_),this.charToByteMap_[this.byteToCharMap_[$_]]=$_,this.byteToCharMapWebSafe_[$_]=this.ENCODED_VALS_WEBSAFE.charAt($_),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$_]]=$_,$_>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($_)]=$_,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($_)]=$_)}}},_l=function($_){const _E=_r($_);return _a.encodeByteArray(_E,!0)},bh=function($_){return _l($_).replace(/\./g,"")},n_=function($_){try{return _a.decodeString($_,!0)}catch(_E){console.error("base64Decode failed: ",_E)}return null};function _A($_){return r_(void 0,$_)}function r_($_,_E){if(!(_E instanceof Object))return _E;switch(_E.constructor){case Date:return new Date(_E.getTime());case Object:void 0===$_&&($_={});break;case Array:$_=[];break;default:return _E}for(const r0 in _E)!_E.hasOwnProperty(r0)||!p_(r0)||($_[r0]=r_($_[r0],_E[r0]));return $_}function p_($_){return"__proto__"!==$_}class I_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_E,r0)=>{this.resolve=_E,this.reject=r0})}wrapCallback(_E){return(r0,M0)=>{r0?this.reject(r0):this.resolve(M0),"function"==typeof _E&&(this.promise.catch(()=>{}),1===_E.length?_E(r0):_E(r0,M0))}}}function v_($_,_E){if($_.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const M0=_E||"demo-project",_y=$_.iat||0,m0=$_.sub||$_.user_id;if(!m0)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const G0=Object.assign({iss:`https://securetoken.google.com/${M0}`,aud:M0,iat:_y,exp:_y+3600,auth_time:_y,sub:m0,user_id:m0,firebase:{sign_in_provider:"custom",identities:{}}},$_);return[bh(JSON.stringify({alg:"none",type:"JWT"})),bh(JSON.stringify(G0)),""].join(".")}function S_(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function x_(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S_())}function B_(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($_){return!1}}function Q_(){return"object"==typeof self&&self.self===self}function _0(){const $_="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $_&&void 0!==$_.id}function c0(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qv(){return S_().indexOf("Electron/")>=0}function h0(){const $_=S_();return $_.indexOf("MSIE ")>=0||$_.indexOf("Trident/")>=0}function E0(){return S_().indexOf("MSAppHost/")>=0}function H_(){return!1}function e0(){return!B_()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P_(){return"object"==typeof indexedDB}function Rv(){return new Promise(($_,_E)=>{try{let r0=!0;const M0="validate-browser-context-for-indexeddb-analytics-module",_y=self.indexedDB.open(M0);_y.onsuccess=()=>{_y.result.close(),r0||self.indexedDB.deleteDatabase(M0),$_(!0)},_y.onupgradeneeded=()=>{r0=!1},_y.onerror=()=>{var m0;_E((null===(m0=_y.error)||void 0===m0?void 0:m0.message)||"")}}catch(r0){_E(r0)}})}function E_(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class J_ extends Error{constructor(_E,r0,M0){super(r0),this.code=_E,this.customData=M0,this.name="FirebaseError",Object.setPrototypeOf(this,J_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z_.prototype.create)}}class z_{constructor(_E,r0,M0){this.service=_E,this.serviceName=r0,this.errors=M0}create(_E,...r0){const M0=r0[0]||{},_y=`${this.service}/${_E}`,m0=this.errors[_E],G0=m0?function D0($_,_E){return $_.replace(O0,(r0,M0)=>{const _y=_E[M0];return null!=_y?String(_y):`<${M0}?>`})}(m0,M0):"Error";return new J_(_y,`${this.serviceName}: ${G0} (${_y}).`,M0)}}const O0=/\{\$([^}]+)}/g;function CI($_){return JSON.parse($_)}function tI($_){return JSON.stringify($_)}const K0=function($_){let _E={},r0={},M0={},_y="";try{const m0=$_.split(".");_E=CI(n_(m0[0])||""),r0=CI(n_(m0[1])||""),_y=m0[2],M0=r0.d||{},delete r0.d}catch(m0){}return{header:_E,claims:r0,data:M0,signature:_y}},FI=function($_){const r0=K0($_).claims;return!!r0&&"object"==typeof r0&&r0.hasOwnProperty("iat")},_w=function($_){const _E=K0($_).claims;return"object"==typeof _E&&!0===_E.admin};function uT($_,_E){return Object.prototype.hasOwnProperty.call($_,_E)}function U1($_,_E){if(Object.prototype.hasOwnProperty.call($_,_E))return $_[_E]}function S1($_){for(const _E in $_)if(Object.prototype.hasOwnProperty.call($_,_E))return!1;return!0}function wN($_,_E,r0){const M0={};for(const _y in $_)Object.prototype.hasOwnProperty.call($_,_y)&&(M0[_y]=_E.call(r0,$_[_y],_y,$_));return M0}function ET($_,_E){if($_===_E)return!0;const r0=Object.keys($_),M0=Object.keys(_E);for(const _y of r0){if(!M0.includes(_y))return!1;const m0=$_[_y],G0=_E[_y];if(xT(m0)&&xT(G0)){if(!ET(m0,G0))return!1}else if(m0!==G0)return!1}for(const _y of M0)if(!r0.includes(_y))return!1;return!0}function xT($_){return null!==$_&&"object"==typeof $_}function XT($_){const _E=[];for(const[r0,M0]of Object.entries($_))Array.isArray(M0)?M0.forEach(_y=>{_E.push(encodeURIComponent(r0)+"="+encodeURIComponent(_y))}):_E.push(encodeURIComponent(r0)+"="+encodeURIComponent(M0));return _E.length?"&"+_E.join("&"):""}function XO($_){const _E={};return $_.replace(/^\?/,"").split("&").forEach(M0=>{if(M0){const[_y,m0]=M0.split("=");_E[decodeURIComponent(_y)]=decodeURIComponent(m0)}}),_E}function TN($_){const _E=$_.indexOf("?");if(!_E)return"";const r0=$_.indexOf("#",_E);return $_.substring(_E,r0>0?r0:void 0)}class VR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let _E=1;_E<this.blockSize;++_E)this.pad_[_E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(_E,r0){r0||(r0=0);const M0=this.W_;if("string"==typeof _E)for(let _b=0;_b<16;_b++)M0[_b]=_E.charCodeAt(r0)<<24|_E.charCodeAt(r0+1)<<16|_E.charCodeAt(r0+2)<<8|_E.charCodeAt(r0+3),r0+=4;else for(let _b=0;_b<16;_b++)M0[_b]=_E[r0]<<24|_E[r0+1]<<16|_E[r0+2]<<8|_E[r0+3],r0+=4;for(let _b=16;_b<80;_b++){const nS=M0[_b-3]^M0[_b-8]^M0[_b-14]^M0[_b-16];M0[_b]=4294967295&(nS<<1|nS>>>31)}let XI,IT,_y=this.chain_[0],m0=this.chain_[1],G0=this.chain_[2],II=this.chain_[3],qI=this.chain_[4];for(let _b=0;_b<80;_b++){_b<40?_b<20?(XI=II^m0&(G0^II),IT=1518500249):(XI=m0^G0^II,IT=1859775393):_b<60?(XI=m0&G0|II&(m0|G0),IT=2400959708):(XI=m0^G0^II,IT=3395469782);const nS=(_y<<5|_y>>>27)+XI+qI+IT+M0[_b]&4294967295;qI=II,II=G0,G0=4294967295&(m0<<30|m0>>>2),m0=_y,_y=nS}this.chain_[0]=this.chain_[0]+_y&4294967295,this.chain_[1]=this.chain_[1]+m0&4294967295,this.chain_[2]=this.chain_[2]+G0&4294967295,this.chain_[3]=this.chain_[3]+II&4294967295,this.chain_[4]=this.chain_[4]+qI&4294967295}update(_E,r0){if(null==_E)return;void 0===r0&&(r0=_E.length);const M0=r0-this.blockSize;let _y=0;const m0=this.buf_;let G0=this.inbuf_;for(;_y<r0;){if(0===G0)for(;_y<=M0;)this.compress_(_E,_y),_y+=this.blockSize;if("string"==typeof _E){for(;_y<r0;)if(m0[G0]=_E.charCodeAt(_y),++G0,++_y,G0===this.blockSize){this.compress_(m0),G0=0;break}}else for(;_y<r0;)if(m0[G0]=_E[_y],++G0,++_y,G0===this.blockSize){this.compress_(m0),G0=0;break}}this.inbuf_=G0,this.total_+=r0}digest(){const _E=[];let r0=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let _y=this.blockSize-1;_y>=56;_y--)this.buf_[_y]=255&r0,r0/=256;this.compress_(this.buf_);let M0=0;for(let _y=0;_y<5;_y++)for(let m0=24;m0>=0;m0-=8)_E[M0]=this.chain_[_y]>>m0&255,++M0;return _E}}function _D($_,_E){const r0=new KI($_,_E);return r0.subscribe.bind(r0)}class KI{constructor(_E,r0){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r0,this.task.then(()=>{_E(this)}).catch(M0=>{this.error(M0)})}next(_E){this.forEachObserver(r0=>{r0.next(_E)})}error(_E){this.forEachObserver(r0=>{r0.error(_E)}),this.close(_E)}complete(){this.forEachObserver(_E=>{_E.complete()}),this.close()}subscribe(_E,r0,M0){let _y;if(void 0===_E&&void 0===r0&&void 0===M0)throw new Error("Missing Observer.");_y=function TT($_,_E){if("object"!=typeof $_||null===$_)return!1;for(const r0 of _E)if(r0 in $_&&"function"==typeof $_[r0])return!0;return!1}(_E,["next","error","complete"])?_E:{next:_E,error:r0,complete:M0},void 0===_y.next&&(_y.next=qT),void 0===_y.error&&(_y.error=qT),void 0===_y.complete&&(_y.complete=qT);const m0=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?_y.error(this.finalError):_y.complete()}catch(G0){}}),this.observers.push(_y),m0}unsubscribeOne(_E){void 0===this.observers||void 0===this.observers[_E]||(delete this.observers[_E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_E){if(!this.finalized)for(let r0=0;r0<this.observers.length;r0++)this.sendOne(r0,_E)}sendOne(_E,r0){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_E])try{r0(this.observers[_E])}catch(M0){"undefined"!=typeof console&&console.error&&console.error(M0)}})}close(_E){this.finalized||(this.finalized=!0,void 0!==_E&&(this.finalError=_E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qT(){}const rP=function($_,_E,r0,M0){let _y;if(M0<_E?_y="at least "+_E:M0>r0&&(_y=0===r0?"none":"no more than "+r0),_y)throw new Error($_+" failed: Was called with "+M0+(1===M0?" argument.":" arguments.")+" Expects "+_y+".")};function GR($_,_E){return`${$_} failed: ${_E} argument `}function eS($_,_E,r0,M0){if((!M0||r0)&&"function"!=typeof r0)throw new Error(GR($_,_E)+"must be a valid function.")}function SO($_,_E,r0,M0){if((!M0||r0)&&("object"!=typeof r0||null===r0))throw new Error(GR($_,_E)+"must be a valid context object.")}const rL=function($_){const _E=[];let r0=0;for(let M0=0;M0<$_.length;M0++){let _y=$_.charCodeAt(M0);if(_y>=55296&&_y<=56319){const m0=_y-55296;M0++,k(M0<$_.length,"Surrogate pair missing trail surrogate."),_y=65536+(m0<<10)+($_.charCodeAt(M0)-56320)}_y<128?_E[r0++]=_y:_y<2048?(_E[r0++]=_y>>6|192,_E[r0++]=63&_y|128):_y<65536?(_E[r0++]=_y>>12|224,_E[r0++]=_y>>6&63|128,_E[r0++]=63&_y|128):(_E[r0++]=_y>>18|240,_E[r0++]=_y>>12&63|128,_E[r0++]=_y>>6&63|128,_E[r0++]=63&_y|128)}return _E},G1=function($_){let _E=0;for(let r0=0;r0<$_.length;r0++){const M0=$_.charCodeAt(r0);M0<128?_E++:M0<2048?_E+=2:M0>=55296&&M0<=56319?(_E+=4,r0++):_E+=3}return _E};function P1($_,_E=1e3,r0=2){const M0=_E*Math.pow(r0,$_),_y=Math.round(.5*M0*(Math.random()-.5)*2);return Math.min(144e5,M0+_y)}function tS($_){return $_&&$_._delegate?$_._delegate:$_}},6114:(h,l,g)=>{"use strict";var f=g(5e3);let k=null;function q(){return k}const _l=new f.OlP("DocumentToken");let bh=(()=>{class o{historyGo(i){throw new Error("Not implemented")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=f.Yz7({token:o,factory:function(){return function n_(){return(0,f.LFG)(r_)}()},providedIn:"platform"}),o})();const _A=new f.OlP("Location Initialized");let r_=(()=>{class o extends bh{constructor(i){super(),this._doc=i,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(i){const d=q().getGlobalEventTarget(this._doc,"window");return d.addEventListener("popstate",i,!1),()=>d.removeEventListener("popstate",i)}onHashChange(i){const d=q().getGlobalEventTarget(this._doc,"window");return d.addEventListener("hashchange",i,!1),()=>d.removeEventListener("hashchange",i)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(i){this.location.pathname=i}pushState(i,d,_){p_()?this._history.pushState(i,d,_):this.location.hash=_}replaceState(i,d,_){p_()?this._history.replaceState(i,d,_):this.location.hash=_}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:function(){return function I_(){return new r_((0,f.LFG)(_l))}()},providedIn:"platform"}),o})();function p_(){return!!window.history.pushState}function v_(o,e){if(0==o.length)return e;if(0==e.length)return o;let i=0;return o.endsWith("/")&&i++,e.startsWith("/")&&i++,2==i?o+e.substring(1):1==i?o+e:o+"/"+e}function S_(o){const e=o.match(/#|\?|$/),i=e&&e.index||o.length;return o.slice(0,i-("/"===o[i-1]?1:0))+o.slice(i)}function x_(o){return o&&"?"!==o[0]?"?"+o:o}let B_=(()=>{class o{historyGo(i){throw new Error("Not implemented")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=f.Yz7({token:o,factory:function(){return function Q_(o){const e=(0,f.LFG)(_l).location;return new c0((0,f.LFG)(bh),e&&e.origin||"")}()},providedIn:"root"}),o})();const _0=new f.OlP("appBaseHref");let c0=(()=>{class o extends B_{constructor(i,d){if(super(),this._platformLocation=i,this._removeListenerFns=[],null==d&&(d=this._platformLocation.getBaseHrefFromDOM()),null==d)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=d}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return v_(this._baseHref,i)}path(i=!1){const d=this._platformLocation.pathname+x_(this._platformLocation.search),_=this._platformLocation.hash;return _&&i?`${d}${_}`:d}pushState(i,d,_,B){const _t=this.prepareExternalUrl(_+x_(B));this._platformLocation.pushState(i,d,_t)}replaceState(i,d,_,B){const _t=this.prepareExternalUrl(_+x_(B));this._platformLocation.replaceState(i,d,_t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var d,_;null===(_=(d=this._platformLocation).historyGo)||void 0===_||_.call(d,i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(bh),f.LFG(_0,8))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),Qv=(()=>{class o extends B_{constructor(i,d){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=d&&(this._baseHref=d)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let d=this._platformLocation.hash;return null==d&&(d="#"),d.length>0?d.substring(1):d}prepareExternalUrl(i){const d=v_(this._baseHref,i);return d.length>0?"#"+d:d}pushState(i,d,_,B){let _t=this.prepareExternalUrl(_+x_(B));0==_t.length&&(_t=this._platformLocation.pathname),this._platformLocation.pushState(i,d,_t)}replaceState(i,d,_,B){let _t=this.prepareExternalUrl(_+x_(B));0==_t.length&&(_t=this._platformLocation.pathname),this._platformLocation.replaceState(i,d,_t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var d,_;null===(_=(d=this._platformLocation).historyGo)||void 0===_||_.call(d,i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(bh),f.LFG(_0,8))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),h0=(()=>{class o{constructor(i,d){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=i;const _=this._platformStrategy.getBaseHref();this._platformLocation=d,this._baseHref=S_(e0(_)),this._platformStrategy.onPopState(B=>{this._subject.emit({url:this.path(!0),pop:!0,state:B.state,type:B.type})})}path(i=!1){return this.normalize(this._platformStrategy.path(i))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(i,d=""){return this.path()==this.normalize(i+x_(d))}normalize(i){return o.stripTrailingSlash(function H_(o,e){return o&&e.startsWith(o)?e.substring(o.length):e}(this._baseHref,e0(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._platformStrategy.prepareExternalUrl(i)}go(i,d="",_=null){this._platformStrategy.pushState(_,"",i,d),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+x_(d)),_)}replaceState(i,d="",_=null){this._platformStrategy.replaceState(_,"",i,d),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+x_(d)),_)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(i=0){var d,_;null===(_=(d=this._platformStrategy).historyGo)||void 0===_||_.call(d,i)}onUrlChange(i){this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(d=>{this._notifyUrlChangeListeners(d.url,d.state)}))}_notifyUrlChangeListeners(i="",d){this._urlChangeListeners.forEach(_=>_(i,d))}subscribe(i,d,_){return this._subject.subscribe({next:i,error:d,complete:_})}}return o.normalizeQueryParams=x_,o.joinWithSlash=v_,o.stripTrailingSlash=S_,o.\u0275fac=function(i){return new(i||o)(f.LFG(B_),f.LFG(bh))},o.\u0275prov=f.Yz7({token:o,factory:function(){return function E0(){return new h0((0,f.LFG)(B_),(0,f.LFG)(bh))}()},providedIn:"root"}),o})();function e0(o){return o.replace(/\/index.html$/,"")}var L_=(()=>((L_=L_||{})[L_.Format=0]="Format",L_[L_.Standalone=1]="Standalone",L_))(),F_=(()=>((F_=F_||{})[F_.Narrow=0]="Narrow",F_[F_.Abbreviated=1]="Abbreviated",F_[F_.Wide=2]="Wide",F_[F_.Short=3]="Short",F_))(),J_=(()=>((J_=J_||{})[J_.Short=0]="Short",J_[J_.Medium=1]="Medium",J_[J_.Long=2]="Long",J_[J_.Full=3]="Full",J_))(),z_=(()=>((z_=z_||{})[z_.Decimal=0]="Decimal",z_[z_.Group=1]="Group",z_[z_.List=2]="List",z_[z_.PercentSign=3]="PercentSign",z_[z_.PlusSign=4]="PlusSign",z_[z_.MinusSign=5]="MinusSign",z_[z_.Exponential=6]="Exponential",z_[z_.SuperscriptingExponent=7]="SuperscriptingExponent",z_[z_.PerMille=8]="PerMille",z_[z_.Infinity=9]="Infinity",z_[z_.NaN=10]="NaN",z_[z_.TimeSeparator=11]="TimeSeparator",z_[z_.CurrencyDecimal=12]="CurrencyDecimal",z_[z_.CurrencyGroup=13]="CurrencyGroup",z_))();function _w(o,e){return TT((0,f.cg1)(o)[f.wAp.DateFormat],e)}function uT(o,e){return TT((0,f.cg1)(o)[f.wAp.TimeFormat],e)}function U1(o,e){return TT((0,f.cg1)(o)[f.wAp.DateTimeFormat],e)}function S1(o,e){const i=(0,f.cg1)(o),d=i[f.wAp.NumberSymbols][e];if(void 0===d){if(e===z_.CurrencyDecimal)return i[f.wAp.NumberSymbols][z_.Decimal];if(e===z_.CurrencyGroup)return i[f.wAp.NumberSymbols][z_.Group]}return d}function VR(o){if(!o[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${o[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function TT(o,e){for(let i=e;i>-1;i--)if(void 0!==o[i])return o[i];throw new Error("Locale data API: locale data undefined")}function qT(o){const[e,i]=o.split(":");return{hours:+e,minutes:+i}}const eS=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,SO={},rL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var G1=(()=>((G1=G1||{})[G1.Short=0]="Short",G1[G1.ShortGMT=1]="ShortGMT",G1[G1.Long=2]="Long",G1[G1.Extended=3]="Extended",G1))(),PI=(()=>((PI=PI||{})[PI.FullYear=0]="FullYear",PI[PI.Month=1]="Month",PI[PI.Date=2]="Date",PI[PI.Hours=3]="Hours",PI[PI.Minutes=4]="Minutes",PI[PI.Seconds=5]="Seconds",PI[PI.FractionalSeconds=6]="FractionalSeconds",PI[PI.Day=7]="Day",PI))(),JI=(()=>((JI=JI||{})[JI.DayPeriods=0]="DayPeriods",JI[JI.Days=1]="Days",JI[JI.Months=2]="Months",JI[JI.Eras=3]="Eras",JI))();function mR(o,e,i,d){let _=function SN(o){if(wS(o))return o;if("number"==typeof o&&!isNaN(o))return new Date(o);if("string"==typeof o){if(o=o.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(o)){const[_,B=1,_t=1]=o.split("-").map(ga=>+ga);return iR(_,B-1,_t)}const i=parseFloat(o);if(!isNaN(o-i))return new Date(i);let d;if(d=o.match(eS))return function WM(o){const e=new Date(0);let i=0,d=0;const _=o[8]?e.setUTCFullYear:e.setFullYear,B=o[8]?e.setUTCHours:e.setHours;o[9]&&(i=Number(o[9]+o[10]),d=Number(o[9]+o[11])),_.call(e,Number(o[1]),Number(o[2])-1,Number(o[3]));const _t=Number(o[4]||0)-i,ga=Number(o[5]||0)-d,_h=Number(o[6]||0),_g=Math.floor(1e3*parseFloat("0."+(o[7]||0)));return B.call(e,_t,ga,_h,_g),e}(d)}const e=new Date(o);if(!wS(e))throw new Error(`Unable to convert "${o}" into a date`);return e}(o);e=P1(i,e)||e;let ga,_t=[];for(;e;){if(ga=rL.exec(e),!ga){_t.push(e);break}{_t=_t.concat(ga.slice(1));const l_=_t.pop();if(!l_)break;e=l_}}let _h=_.getTimezoneOffset();d&&(_h=_R(d,_h),_=function qM(o,e,i){const d=i?-1:1,_=o.getTimezoneOffset();return function i3(o,e){return(o=new Date(o.getTime())).setMinutes(o.getMinutes()+e),o}(o,d*(_R(e,_)-_))}(_,d,!0));let _g="";return _t.forEach(l_=>{const f_=function nS(o){if(_b[o])return _b[o];let e;switch(o){case"G":case"GG":case"GGG":e=r0(JI.Eras,F_.Abbreviated);break;case"GGGG":e=r0(JI.Eras,F_.Wide);break;case"GGGGG":e=r0(JI.Eras,F_.Narrow);break;case"y":e=$_(PI.FullYear,1,0,!1,!0);break;case"yy":e=$_(PI.FullYear,2,0,!0,!0);break;case"yyy":e=$_(PI.FullYear,3,0,!1,!0);break;case"yyyy":e=$_(PI.FullYear,4,0,!1,!0);break;case"Y":e=IT(1);break;case"YY":e=IT(2,!0);break;case"YYY":e=IT(3);break;case"YYYY":e=IT(4);break;case"M":case"L":e=$_(PI.Month,1,1);break;case"MM":case"LL":e=$_(PI.Month,2,1);break;case"MMM":e=r0(JI.Months,F_.Abbreviated);break;case"MMMM":e=r0(JI.Months,F_.Wide);break;case"MMMMM":e=r0(JI.Months,F_.Narrow);break;case"LLL":e=r0(JI.Months,F_.Abbreviated,L_.Standalone);break;case"LLLL":e=r0(JI.Months,F_.Wide,L_.Standalone);break;case"LLLLL":e=r0(JI.Months,F_.Narrow,L_.Standalone);break;case"w":e=XI(1);break;case"ww":e=XI(2);break;case"W":e=XI(1,!0);break;case"d":e=$_(PI.Date,1);break;case"dd":e=$_(PI.Date,2);break;case"c":case"cc":e=$_(PI.Day,1);break;case"ccc":e=r0(JI.Days,F_.Abbreviated,L_.Standalone);break;case"cccc":e=r0(JI.Days,F_.Wide,L_.Standalone);break;case"ccccc":e=r0(JI.Days,F_.Narrow,L_.Standalone);break;case"cccccc":e=r0(JI.Days,F_.Short,L_.Standalone);break;case"E":case"EE":case"EEE":e=r0(JI.Days,F_.Abbreviated);break;case"EEEE":e=r0(JI.Days,F_.Wide);break;case"EEEEE":e=r0(JI.Days,F_.Narrow);break;case"EEEEEE":e=r0(JI.Days,F_.Short);break;case"a":case"aa":case"aaa":e=r0(JI.DayPeriods,F_.Abbreviated);break;case"aaaa":e=r0(JI.DayPeriods,F_.Wide);break;case"aaaaa":e=r0(JI.DayPeriods,F_.Narrow);break;case"b":case"bb":case"bbb":e=r0(JI.DayPeriods,F_.Abbreviated,L_.Standalone,!0);break;case"bbbb":e=r0(JI.DayPeriods,F_.Wide,L_.Standalone,!0);break;case"bbbbb":e=r0(JI.DayPeriods,F_.Narrow,L_.Standalone,!0);break;case"B":case"BB":case"BBB":e=r0(JI.DayPeriods,F_.Abbreviated,L_.Format,!0);break;case"BBBB":e=r0(JI.DayPeriods,F_.Wide,L_.Format,!0);break;case"BBBBB":e=r0(JI.DayPeriods,F_.Narrow,L_.Format,!0);break;case"h":e=$_(PI.Hours,1,-12);break;case"hh":e=$_(PI.Hours,2,-12);break;case"H":e=$_(PI.Hours,1);break;case"HH":e=$_(PI.Hours,2);break;case"m":e=$_(PI.Minutes,1);break;case"mm":e=$_(PI.Minutes,2);break;case"s":e=$_(PI.Seconds,1);break;case"ss":e=$_(PI.Seconds,2);break;case"S":e=$_(PI.FractionalSeconds,1);break;case"SS":e=$_(PI.FractionalSeconds,2);break;case"SSS":e=$_(PI.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=_y(G1.Short);break;case"ZZZZZ":e=_y(G1.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=_y(G1.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=_y(G1.Long);break;default:return null}return _b[o]=e,e}(l_);_g+=f_?f_(_,i,_h):"''"===l_?"'":l_.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_g}function iR(o,e,i){const d=new Date(0);return d.setFullYear(o,e,i),d.setHours(0,0,0),d}function P1(o,e){const i=function O0(o){return(0,f.cg1)(o)[f.wAp.LocaleId]}(o);if(SO[i]=SO[i]||{},SO[i][e])return SO[i][e];let d="";switch(e){case"shortDate":d=_w(o,J_.Short);break;case"mediumDate":d=_w(o,J_.Medium);break;case"longDate":d=_w(o,J_.Long);break;case"fullDate":d=_w(o,J_.Full);break;case"shortTime":d=uT(o,J_.Short);break;case"mediumTime":d=uT(o,J_.Medium);break;case"longTime":d=uT(o,J_.Long);break;case"fullTime":d=uT(o,J_.Full);break;case"short":const _=P1(o,"shortTime"),B=P1(o,"shortDate");d=iL(U1(o,J_.Short),[_,B]);break;case"medium":const _t=P1(o,"mediumTime"),ga=P1(o,"mediumDate");d=iL(U1(o,J_.Medium),[_t,ga]);break;case"long":const _h=P1(o,"longTime"),_g=P1(o,"longDate");d=iL(U1(o,J_.Long),[_h,_g]);break;case"full":const l_=P1(o,"fullTime"),f_=P1(o,"fullDate");d=iL(U1(o,J_.Full),[l_,f_])}return d&&(SO[i][e]=d),d}function iL(o,e){return e&&(o=o.replace(/\{([^}]+)}/g,function(i,d){return null!=e&&d in e?e[d]:i})),o}function AR(o,e,i="-",d,_){let B="";(o<0||_&&o<=0)&&(_?o=1-o:(o=-o,B=i));let _t=String(o);for(;_t.length<e;)_t="0"+_t;return d&&(_t=_t.substr(_t.length-e)),B+_t}function $_(o,e,i=0,d=!1,_=!1){return function(B,_t){let ga=function _E(o,e){switch(o){case PI.FullYear:return e.getFullYear();case PI.Month:return e.getMonth();case PI.Date:return e.getDate();case PI.Hours:return e.getHours();case PI.Minutes:return e.getMinutes();case PI.Seconds:return e.getSeconds();case PI.FractionalSeconds:return e.getMilliseconds();case PI.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${o}".`)}}(o,B);if((i>0||ga>-i)&&(ga+=i),o===PI.Hours)0===ga&&-12===i&&(ga=12);else if(o===PI.FractionalSeconds)return function tS(o,e){return AR(o,3).substr(0,e)}(ga,e);const _h=S1(_t,z_.MinusSign);return AR(ga,e,_h,d,_)}}function r0(o,e,i=L_.Format,d=!1){return function(_,B){return function M0(o,e,i,d,_,B){switch(i){case JI.Months:return function K0(o,e,i){const d=(0,f.cg1)(o),B=TT([d[f.wAp.MonthsFormat],d[f.wAp.MonthsStandalone]],e);return TT(B,i)}(e,_,d)[o.getMonth()];case JI.Days:return function tI(o,e,i){const d=(0,f.cg1)(o),B=TT([d[f.wAp.DaysFormat],d[f.wAp.DaysStandalone]],e);return TT(B,i)}(e,_,d)[o.getDay()];case JI.DayPeriods:const _t=o.getHours(),ga=o.getMinutes();if(B){const _g=function _D(o){const e=(0,f.cg1)(o);return VR(e),(e[f.wAp.ExtraData][2]||[]).map(d=>"string"==typeof d?qT(d):[qT(d[0]),qT(d[1])])}(e),l_=function KI(o,e,i){const d=(0,f.cg1)(o);VR(d);const B=TT([d[f.wAp.ExtraData][0],d[f.wAp.ExtraData][1]],e)||[];return TT(B,i)||[]}(e,_,d),f_=_g.findIndex(R_=>{if(Array.isArray(R_)){const[V_,Y_]=R_,R0=_t>=V_.hours&&ga>=V_.minutes,V0=_t<Y_.hours||_t===Y_.hours&&ga<Y_.minutes;if(V_.hours<Y_.hours){if(R0&&V0)return!0}else if(R0||V0)return!0}else if(R_.hours===_t&&R_.minutes===ga)return!0;return!1});if(-1!==f_)return l_[f_]}return function CI(o,e,i){const d=(0,f.cg1)(o),B=TT([d[f.wAp.DayPeriodsFormat],d[f.wAp.DayPeriodsStandalone]],e);return TT(B,i)}(e,_,d)[_t<12?0:1];case JI.Eras:return function B1(o,e){return TT((0,f.cg1)(o)[f.wAp.Eras],e)}(e,d)[o.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${i}`)}}(_,B,o,e,i,d)}}function _y(o){return function(e,i,d){const _=-1*d,B=S1(i,z_.MinusSign),_t=_>0?Math.floor(_/60):Math.ceil(_/60);switch(o){case G1.Short:return(_>=0?"+":"")+AR(_t,2,B)+AR(Math.abs(_%60),2,B);case G1.ShortGMT:return"GMT"+(_>=0?"+":"")+AR(_t,1,B);case G1.Long:return"GMT"+(_>=0?"+":"")+AR(_t,2,B)+":"+AR(Math.abs(_%60),2,B);case G1.Extended:return 0===d?"Z":(_>=0?"+":"")+AR(_t,2,B)+":"+AR(Math.abs(_%60),2,B);default:throw new Error(`Unknown zone width "${o}"`)}}}function qI(o){return iR(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))}function XI(o,e=!1){return function(i,d){let _;if(e){const B=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,_t=i.getDate();_=1+Math.floor((_t+B)/7)}else{const B=qI(i),_t=function II(o){const e=iR(o,0,1).getDay();return iR(o,0,1+(e<=4?4:11)-e)}(B.getFullYear()),ga=B.getTime()-_t.getTime();_=1+Math.round(ga/6048e5)}return AR(_,o,S1(d,z_.MinusSign))}}function IT(o,e=!1){return function(i,d){return AR(qI(i).getFullYear(),o,S1(d,z_.MinusSign),e)}}const _b={};function _R(o,e){o=o.replace(/:/g,"");const i=Date.parse("Jan 01, 1970 00:00:00 "+o)/6e4;return isNaN(i)?e:i}function wS(o){return o instanceof Date&&!isNaN(o.valueOf())}function qL(o,e){e=encodeURIComponent(e);for(const i of o.split(";")){const d=i.indexOf("="),[_,B]=-1==d?[i,""]:[i.slice(0,d),i.slice(d+1)];if(_.trim()===e)return decodeURIComponent(B)}return null}class sP{constructor(e,i,d,_){this.$implicit=e,this.ngForOf=i,this.index=d,this.count=_}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let HS=(()=>{class o{constructor(i,d,_){this._viewContainer=i,this._template=d,this._differs=_,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const d=this._viewContainer;i.forEachOperation((_,B,_t)=>{if(null==_.previousIndex)d.createEmbeddedView(this._template,new sP(_.item,this._ngForOf,-1,-1),null===_t?void 0:_t);else if(null==_t)d.remove(null===B?void 0:B);else if(null!==B){const ga=d.get(B);d.move(ga,_t),DN(ga,_)}});for(let _=0,B=d.length;_<B;_++){const ga=d.get(_).context;ga.index=_,ga.count=B,ga.ngForOf=this._ngForOf}i.forEachIdentityChange(_=>{DN(d.get(_.currentIndex),_)})}static ngTemplateContextGuard(i,d){return!0}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},o.\u0275dir=f.lG2({type:o,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),o})();function DN(o,e){o.context.$implicit=e.item}let WT=(()=>{class o{constructor(i,d){this._viewContainer=i,this._context=new hT,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=d}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){oL("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){oL("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,d){return!0}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(f.s_b),f.Y36(f.Rgc))},o.\u0275dir=f.lG2({type:o,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),o})();class hT{constructor(){this.$implicit=null,this.ngIf=null}}function oL(o,e){if(e&&!e.createEmbeddedView)throw new Error(`${o} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}const J6=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let YM=(()=>{class o{constructor(i,d){this.locale=i,this.defaultTimezone=d}transform(i,d="mediumDate",_,B){var _t;if(null==i||""===i||i!=i)return null;try{return mR(i,d,B||this.locale,null!==(_t=null!=_?_:this.defaultTimezone)&&void 0!==_t?_t:void 0)}catch(ga){throw function oR(o,e){return new f.vHH(2100,"")}()}}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(f.soG,16),f.Y36(J6,24))},o.\u0275pipe=f.Yjl({name:"date",type:o,pure:!0}),o})(),sL=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({}),o})();function aL(o){return"server"===o}let u3=(()=>{class o{}return o.\u0275prov=(0,f.Yz7)({token:o,providedIn:"root",factory:()=>new uP((0,f.LFG)(_l),window)}),o})();class uP{constructor(e,i){this.document=e,this.window=i,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const i=function xN(o,e){const i=o.getElementById(e)||o.getElementsByName(e)[0];if(i)return i;if("function"==typeof o.createTreeWalker&&o.body&&(o.body.createShadowRoot||o.body.attachShadow)){const d=o.createTreeWalker(o.body,NodeFilter.SHOW_ELEMENT);let _=d.currentNode;for(;_;){const B=_.shadowRoot;if(B){const _t=B.getElementById(e)||B.querySelector(`[name="${e}"]`);if(_t)return _t}_=d.nextNode()}}return null}(this.document,e);i&&(this.scrollToElement(i),i.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const i=this.window.history;i&&i.scrollRestoration&&(i.scrollRestoration=e)}}scrollToElement(e){const i=e.getBoundingClientRect(),d=i.left+this.window.pageXOffset,_=i.top+this.window.pageYOffset,B=this.offset();this.window.scrollTo(d-B[0],_-B[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$M(this.window.history)||$M(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function $M(o){return Object.getOwnPropertyDescriptor(o,"scrollRestoration")}class tT{}class cL extends class ZM extends class _a{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function _s(o){k||(k=o)}(new cL)}onAndCancel(e,i,d){return e.addEventListener(i,d,!1),()=>{e.removeEventListener(i,d,!1)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return(i=i||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return"window"===i?window:"document"===i?e:"body"===i?e.body:null}getBaseHref(e){const i=function uL(){return Y1=Y1||document.querySelector("base"),Y1?Y1.getAttribute("href"):null}();return null==i?null:function lP(o){l3=l3||document.createElement("a"),l3.setAttribute("href",o);const e=l3.pathname;return"/"===e.charAt(0)?e:`/${e}`}(i)}resetBaseElement(){Y1=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qL(document.cookie,e)}}let l3,Y1=null;const WS=new f.OlP("TRANSITION_ID"),LT=[{provide:f.ip1,useFactory:function XM(o,e,i){return()=>{i.get(f.CZH).donePromise.then(()=>{const d=q(),_=e.querySelectorAll(`style[ng-transition="${o}"]`);for(let B=0;B<_.length;B++)d.remove(_[B])})}},deps:[WS,_l,f.zs3],multi:!0}];class sR{static init(){(0,f.VLi)(new sR)}addToWindow(e){f.dqk.getAngularTestability=(d,_=!0)=>{const B=e.findTestabilityInTree(d,_);if(null==B)throw new Error("Could not find testability for element.");return B},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(d=>{const _=f.dqk.getAllAngularTestabilities();let B=_.length,_t=!1;const ga=function(_h){_t=_t||_h,B--,0==B&&d(_t)};_.forEach(function(_h){_h.whenStable(ga)})})}findTestabilityInTree(e,i,d){if(null==i)return null;const _=e.getTestability(i);return null!=_?_:d?q().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null}}let aR=(()=>{class o{build(){return new XMLHttpRequest}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();const dP=new f.OlP("EventManagerPlugins");let p2=(()=>{class o{constructor(i,d){this._zone=d,this._eventNameToPlugin=new Map,i.forEach(_=>_.manager=this),this._plugins=i.slice().reverse()}addEventListener(i,d,_){return this._findPluginFor(d).addEventListener(i,d,_)}addGlobalEventListener(i,d,_){return this._findPluginFor(d).addGlobalEventListener(i,d,_)}getZone(){return this._zone}_findPluginFor(i){const d=this._eventNameToPlugin.get(i);if(d)return d;const _=this._plugins;for(let B=0;B<_.length;B++){const _t=_[B];if(_t.supports(i))return this._eventNameToPlugin.set(i,_t),_t}throw new Error(`No event manager plugin found for event ${i}`)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(dP),f.LFG(f.R0b))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();class LN{constructor(e){this._doc=e}addGlobalEventListener(e,i,d){const _=q().getGlobalEventTarget(this._doc,e);if(!_)throw new Error(`Unsupported event target ${_} for event ${i}`);return this.addEventListener(_,i,d)}}let MT=(()=>{class o{constructor(){this._stylesSet=new Set}addStyles(i){const d=new Set;i.forEach(_=>{this._stylesSet.has(_)||(this._stylesSet.add(_),d.add(_))}),this.onStylesAdded(d)}onStylesAdded(i){}getAllStyles(){return Array.from(this._stylesSet)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),DO=(()=>{class o extends MT{constructor(i){super(),this._doc=i,this._hostNodes=new Map,this._hostNodes.set(i.head,[])}_addStylesToHost(i,d,_){i.forEach(B=>{const _t=this._doc.createElement("style");_t.textContent=B,_.push(d.appendChild(_t))})}addHost(i){const d=[];this._addStylesToHost(this._stylesSet,i,d),this._hostNodes.set(i,d)}removeHost(i){const d=this._hostNodes.get(i);d&&d.forEach(KL),this._hostNodes.delete(i)}onStylesAdded(i){this._hostNodes.forEach((d,_)=>{this._addStylesToHost(i,_,d)})}ngOnDestroy(){this._hostNodes.forEach(i=>i.forEach(KL))}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();function KL(o){q().remove(o)}const zI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hP=/%COMP%/g;function zL(o,e,i){for(let d=0;d<e.length;d++){let _=e[d];Array.isArray(_)?zL(o,_,i):(_=_.replace(hP,o),i.push(_))}return i}function j0(o){return e=>{if("__ngUnwrap__"===e)return o;!1===o(e)&&(e.preventDefault(),e.returnValue=!1)}}let YL=(()=>{class o{constructor(i,d,_){this.eventManager=i,this.sharedStylesHost=d,this.appId=_,this.rendererByCompId=new Map,this.defaultRenderer=new ST(i)}createRenderer(i,d){if(!i||!d)return this.defaultRenderer;switch(d.encapsulation){case f.ifc.Emulated:{let _=this.rendererByCompId.get(d.id);return _||(_=new NO(this.eventManager,this.sharedStylesHost,d,this.appId),this.rendererByCompId.set(d.id,_)),_.applyToHost(i),_}case 1:case f.ifc.ShadowDom:return new z4(this.eventManager,this.sharedStylesHost,i,d);default:if(!this.rendererByCompId.has(d.id)){const _=zL(d.id,d.styles,[]);this.sharedStylesHost.addStyles(_),this.rendererByCompId.set(d.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(p2),f.LFG(DO),f.LFG(f.AFp))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();class ST{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,i){return i?document.createElementNS(zI[i]||i,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,i){e.appendChild(i)}insertBefore(e,i,d){e&&e.insertBefore(i,d)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let d="string"==typeof e?document.querySelector(e):e;if(!d)throw new Error(`The selector "${e}" did not match any elements`);return i||(d.textContent=""),d}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,d,_){if(_){i=_+":"+i;const B=zI[_];B?e.setAttributeNS(B,i,d):e.setAttribute(i,d)}else e.setAttribute(i,d)}removeAttribute(e,i,d){if(d){const _=zI[d];_?e.removeAttributeNS(_,i):e.removeAttribute(`${d}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,d,_){_&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(i,d,_&f.JOm.Important?"important":""):e.style[i]=d}removeStyle(e,i,d){d&f.JOm.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,d){e[i]=d}setValue(e,i){e.nodeValue=i}listen(e,i,d){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,i,j0(d)):this.eventManager.addEventListener(e,i,j0(d))}}class NO extends ST{constructor(e,i,d,_){super(e),this.component=d;const B=zL(_+"-"+d.id,d.styles,[]);i.addStyles(B),this.contentAttr=function d3(o){return"_ngcontent-%COMP%".replace(hP,o)}(_+"-"+d.id),this.hostAttr=function h3(o){return"_nghost-%COMP%".replace(hP,o)}(_+"-"+d.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,i){const d=super.createElement(e,i);return super.setAttribute(d,this.contentAttr,""),d}}class z4 extends ST{constructor(e,i,d,_){super(e),this.sharedStylesHost=i,this.hostEl=d,this.shadowRoot=d.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const B=zL(_.id,_.styles,[]);for(let _t=0;_t<B.length;_t++){const ga=document.createElement("style");ga.textContent=B[_t],this.shadowRoot.appendChild(ga)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,d){return super.insertBefore(this.nodeOrShadowRoot(e),i,d)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let MN=(()=>{class o extends LN{constructor(i){super(i)}supports(i){return!0}addEventListener(i,d,_){return i.addEventListener(d,_,!1),()=>this.removeEventListener(i,d,_)}removeEventListener(i,d,_){return i.removeEventListener(d,_)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();const Y4=["alt","control","meta","shift"],j9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kO={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yR={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey};let PO=(()=>{class o extends LN{constructor(i){super(i)}supports(i){return null!=o.parseEventName(i)}addEventListener(i,d,_){const B=o.parseEventName(d),_t=o.eventCallback(B.fullKey,_,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>q().onAndCancel(i,B.domEventName,_t))}static parseEventName(i){const d=i.toLowerCase().split("."),_=d.shift();if(0===d.length||"keydown"!==_&&"keyup"!==_)return null;const B=o._normalizeKey(d.pop());let _t="";if(Y4.forEach(_h=>{const _g=d.indexOf(_h);_g>-1&&(d.splice(_g,1),_t+=_h+".")}),_t+=B,0!=d.length||0===B.length)return null;const ga={};return ga.domEventName=_,ga.fullKey=_t,ga}static getEventFullKey(i){let d="",_=function g2(o){let e=o.key;if(null==e){if(e=o.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===o.location&&kO.hasOwnProperty(e)&&(e=kO[e]))}return j9[e]||e}(i);return _=_.toLowerCase()," "===_?_="space":"."===_&&(_="dot"),Y4.forEach(B=>{B!=_&&yR[B](i)&&(d+=B+".")}),d+=_,d}static eventCallback(i,d,_){return B=>{o.getEventFullKey(B)===i&&_.runGuarded(()=>d(B))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();const g3=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function fP(){cL.makeCurrent(),sR.init()},multi:!0},{provide:_l,useFactory:function J4(){return(0,f.RDi)(document),document},deps:[]}]),m3=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function OS(){return new f.qLn},deps:[]},{provide:dP,useClass:MN,multi:!0,deps:[_l,f.R0b,f.Lbi]},{provide:dP,useClass:PO,multi:!0,deps:[_l]},{provide:YL,useClass:YL,deps:[p2,DO,f.AFp]},{provide:f.FYo,useExisting:YL},{provide:MT,useExisting:DO},{provide:DO,useClass:DO,deps:[_l]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:p2,useClass:p2,deps:[dP,f.R0b]},{provide:tT,useClass:aR,deps:[]}];let tU=(()=>{class o{constructor(i){if(i)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(i){return{ngModule:o,providers:[{provide:f.AFp,useValue:i.appId},{provide:WS,useExisting:f.AFp},LT]}}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(o,12))},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:m3,imports:[sL,f.hGG]}),o})();"undefined"!=typeof window&&window;let d5=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=f.Yz7({token:o,factory:function(i){let d=null;return d=i?new(i||o):f.LFG(oU),d},providedIn:"root"}),o})(),oU=(()=>{class o extends d5{constructor(i){super(),this._doc=i}sanitize(i,d){if(null==d)return null;switch(i){case f.q3G.NONE:return d;case f.q3G.HTML:return(0,f.qzn)(d,"HTML")?(0,f.z3N)(d):(0,f.EiD)(this._doc,String(d)).toString();case f.q3G.STYLE:return(0,f.qzn)(d,"Style")?(0,f.z3N)(d):d;case f.q3G.SCRIPT:if((0,f.qzn)(d,"Script"))return(0,f.z3N)(d);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.yhl)(d),(0,f.qzn)(d,"URL")?(0,f.z3N)(d):(0,f.mCW)(String(d));case f.q3G.RESOURCE_URL:if((0,f.qzn)(d,"ResourceURL"))return(0,f.z3N)(d);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${i} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(i){return(0,f.JVY)(i)}bypassSecurityTrustStyle(i){return(0,f.L6k)(i)}bypassSecurityTrustScript(i){return(0,f.eBb)(i)}bypassSecurityTrustUrl(i){return(0,f.LAX)(i)}bypassSecurityTrustResourceUrl(i){return(0,f.pB0)(i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:function(i){let d=null;return d=i?new i:function BN(o){return new oU(o.get(_l))}(f.LFG(f.zs3)),d},providedIn:"root"}),o})();var fT=g(8996),XL=g(7669);function mI(...o){const e=(0,XL.yG)(o);return(0,fT.D)(o,e)}var BT=g(7579);class KR extends BT.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const i=super._subscribe(e);return!i.closed&&e.next(this._value),i}getValue(){const{hasError:e,thrownError:i,_value:d}=this;if(e)throw i;return this._throwIfClosed(),d}next(e){super.next(this._value=e)}}var UT=g(8306);const{isArray:eM}=Array,{getPrototypeOf:h5,prototype:tM,keys:mP}=Object;function oS(o){if(1===o.length){const e=o[0];if(eM(e))return{args:e,keys:null};if(function AP(o){return o&&"object"==typeof o&&h5(o)===tM}(e)){const i=mP(e);return{args:i.map(d=>e[d]),keys:i}}}return{args:o,keys:null}}var rN=g(4671),RI=g(4004);const{isArray:f5}=Array;function v3(o){return(0,RI.U)(e=>function p5(o,e){return f5(e)?o(...e):o(e)}(o,e))}function fL(o,e){return o.reduce((i,d,_)=>(i[d]=e[_],i),{})}var sS=g(5403),_P=g(9672);function mS(o,e,i){o?(0,_P.f)(i,o,e):e()}var pL=g(576);function yP(o,e){const i=(0,pL.m)(o)?o:()=>o,d=_=>_.error(i());return new UT.y(e?_=>e.schedule(d,0,_):d)}const EP=(0,g(3888).d)(o=>function(){o(this),this.name="EmptyError",this.message="no elements in sequence"});var rM=g(8189);function FN(...o){return function IP(){return(0,rM.J)(1)}()((0,fT.D)(o,(0,XL.yG)(o)))}var bP=g(8421);function sU(o){return new UT.y(e=>{(0,bP.Xf)(o()).subscribe(e)})}var A2=g(515),gL=g(727),aS=g(4482);function y3(){return(0,aS.e)((o,e)=>{let i=null;o._refCount++;const d=(0,sS.x)(e,void 0,void 0,void 0,()=>{if(!o||o._refCount<=0||0<--o._refCount)return void(i=null);const _=o._connection,B=i;i=null,_&&(!B||_===B)&&_.unsubscribe(),e.unsubscribe()});o.subscribe(d),d.closed||(i=o.connect())})}class CP extends UT.y{constructor(e,i){super(),this.source=e,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,(0,aS.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gL.w0;const i=this.getSubject();e.add(this.source.subscribe((0,sS.x)(i,void 0,()=>{this._teardown(),i.complete()},d=>{this._teardown(),i.error(d)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gL.w0.EMPTY)}return e}refCount(){return y3()(this)}}function KT(o,e){return(0,aS.e)((i,d)=>{let _=null,B=0,_t=!1;const ga=()=>_t&&!_&&d.complete();i.subscribe((0,sS.x)(d,_h=>{null==_||_.unsubscribe();let _g=0;const l_=B++;(0,bP.Xf)(o(_h,l_)).subscribe(_=(0,sS.x)(d,f_=>d.next(e?e(_h,f_,l_,_g++):f_),()=>{_=null,ga()}))},()=>{_t=!0,ga()}))})}var mL=g(5698);function jN(...o){const e=(0,XL.yG)(o);return(0,aS.e)((i,d)=>{(e?FN(o,i,e):FN(o,i)).subscribe(d)})}function _2(o,e,i,d,_){return(B,_t)=>{let ga=i,_h=e,_g=0;B.subscribe((0,sS.x)(_t,l_=>{const f_=_g++;_h=ga?o(_h,l_,f_):(ga=!0,l_),d&&_t.next(_h)},_&&(()=>{ga&&_t.next(_h),_t.complete()})))}}function xO(o,e){return(0,aS.e)(_2(o,e,arguments.length>=2,!0))}function zS(o,e){return(0,aS.e)((i,d)=>{let _=0;i.subscribe((0,sS.x)(d,B=>o.call(e,B,_++)&&d.next(B)))})}function cR(o){return(0,aS.e)((e,i)=>{let B,d=null,_=!1;d=e.subscribe((0,sS.x)(i,void 0,void 0,_t=>{B=(0,bP.Xf)(o(_t,cR(o)(e))),d?(d.unsubscribe(),d=null,B.subscribe(i)):_=!0})),_&&(d.unsubscribe(),d=null,B.subscribe(i))})}var NS=g(5577);function LO(o,e){return(0,pL.m)(e)?(0,NS.z)(o,e,1):(0,NS.z)(o,1)}function E3(o){return o<=0?()=>A2.E:(0,aS.e)((e,i)=>{let d=[];e.subscribe((0,sS.x)(i,_=>{d.push(_),o<d.length&&d.shift()},()=>{for(const _ of d)i.next(_);i.complete()},void 0,()=>{d=null}))})}function Z4(o=RT){return(0,aS.e)((e,i)=>{let d=!1;e.subscribe((0,sS.x)(i,_=>{d=!0,i.next(_)},()=>d?i.complete():i.error(o())))})}function RT(){return new EP}function OG(o){return(0,aS.e)((e,i)=>{let d=!1;e.subscribe((0,sS.x)(i,_=>{d=!0,i.next(_)},()=>{d||i.next(o),i.complete()}))})}function iM(o,e){const i=arguments.length>=2;return d=>d.pipe(o?zS((_,B)=>o(_,B,d)):rN.y,(0,mL.q)(1),i?OG(e):Z4(()=>new EP))}var mO=g(8505);class wP{constructor(e,i){this.id=e,this.url=i}}class X4 extends wP{constructor(e,i,d="imperative",_=null){super(e,i),this.navigationTrigger=d,this.restoredState=_}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class v2 extends wP{constructor(e,i,d){super(e,i),this.urlAfterRedirects=d}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class I3 extends wP{constructor(e,i,d){super(e,i),this.reason=d}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AS extends wP{constructor(e,i,d){super(e,i),this.error=d}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aU extends wP{constructor(e,i,d,_){super(e,i),this.urlAfterRedirects=d,this.state=_}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b3 extends wP{constructor(e,i,d,_){super(e,i),this.urlAfterRedirects=d,this.state=_}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m5 extends wP{constructor(e,i,d,_,B){super(e,i),this.urlAfterRedirects=d,this.state=_,this.shouldActivate=B}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class DG extends wP{constructor(e,i,d,_){super(e,i),this.urlAfterRedirects=d,this.state=_}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ER extends wP{constructor(e,i,d,_){super(e,i),this.urlAfterRedirects=d,this.state=_}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zR{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oM{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y2{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E2{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I2{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b2{constructor(e,i,d){this.routerEvent=e,this.position=i,this.anchor=d}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const _1="primary";class lj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){const i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}}function AL(o){return new lj(o)}const IR="ngNavigationCancelingError";function aM(o){const e=Error("NavigationCancelingError: "+o);return e[IR]=!0,e}function Q9(o,e,i){const d=i.path.split("/");if(d.length>o.length||"full"===i.pathMatch&&(e.hasChildren()||d.length<o.length))return null;const _={};for(let B=0;B<d.length;B++){const _t=d[B],ga=o[B];if(_t.startsWith(":"))_[_t.substring(1)]=ga;else if(_t!==ga.path)return null}return{consumed:o.slice(0,d.length),posParams:_}}function MO(o,e){const i=o?Object.keys(o):void 0,d=e?Object.keys(e):void 0;if(!i||!d||i.length!=d.length)return!1;let _;for(let B=0;B<i.length;B++)if(_=i[B],!C3(o[_],e[_]))return!1;return!0}function C3(o,e){if(Array.isArray(o)&&Array.isArray(e)){if(o.length!==e.length)return!1;const i=[...o].sort(),d=[...e].sort();return i.every((_,B)=>d[B]===_)}return o===e}function A5(o){return Array.prototype.concat.apply([],o)}function iN(o){return o.length>0?o[o.length-1]:null}function AT(o,e){for(const i in o)o.hasOwnProperty(i)&&e(o[i],i)}function kS(o){return(0,f.CqO)(o)?o:(0,f.QGY)(o)?(0,fT.D)(Promise.resolve(o)):mI(o)}const NG={exact:function c_(o,e,i){if(!VI(o.segments,e.segments)||!p0(o.segments,e.segments,i)||o.numberOfChildren!==e.numberOfChildren)return!1;for(const d in e.children)if(!o.children[d]||!c_(o.children[d],e.children[d],i))return!1;return!0},subset:T_},BO={exact:function w2(o,e){return MO(o,e)},subset:function d_(o,e){return Object.keys(e).length<=Object.keys(o).length&&Object.keys(e).every(i=>C3(o[i],e[i]))},ignored:()=>!0};function vL(o,e,i){return NG[i.paths](o.root,e.root,i.matrixParams)&&BO[i.queryParams](o.queryParams,e.queryParams)&&!("exact"===i.fragment&&o.fragment!==e.fragment)}function T_(o,e,i){return W_(o,e,e.segments,i)}function W_(o,e,i,d){if(o.segments.length>i.length){const _=o.segments.slice(0,i.length);return!(!VI(_,i)||e.hasChildren()||!p0(_,i,d))}if(o.segments.length===i.length){if(!VI(o.segments,i)||!p0(o.segments,i,d))return!1;for(const _ in e.children)if(!o.children[_]||!T_(o.children[_],e.children[_],d))return!1;return!0}{const _=i.slice(0,o.segments.length),B=i.slice(o.segments.length);return!!(VI(o.segments,_)&&p0(o.segments,_,d)&&o.children[_1])&&W_(o.children[_1],e,B,d)}}function p0(o,e,i){return e.every((d,_)=>BO[i](o[_].parameters,d.parameters))}class y0{constructor(e,i,d){this.root=e,this.queryParams=i,this.fragment=d}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=AL(this.queryParams)),this._queryParamMap}toString(){return PS.serialize(this)}}class P0{constructor(e,i){this.segments=e,this.children=i,this.parent=null,AT(i,(d,_)=>d.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return VN(this)}}class yI{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap||(this._parameterMap=AL(this.parameters)),this._parameterMap}toString(){return _j(this)}}function VI(o,e){return o.length===e.length&&o.every((i,d)=>i.path===e[d].path)}class _C{}class _S{parse(e){const i=new H9(e);return new y0(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){const i=`/${oN(e.root,!0)}`,d=function y5(o){const e=Object.keys(o).map(i=>{const d=o[i];return Array.isArray(d)?d.map(_=>`${uR(i)}=${uR(_)}`).join("&"):`${uR(i)}=${uR(d)}`}).filter(i=>!!i);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${i}${d}${"string"==typeof e.fragment?`#${function T2(o){return encodeURI(o)}(e.fragment)}`:""}`}}const PS=new _S;function VN(o){return o.segments.map(e=>_j(e)).join("/")}function oN(o,e){if(!o.hasChildren())return VN(o);if(e){const i=o.children[_1]?oN(o.children[_1],!1):"",d=[];return AT(o.children,(_,B)=>{B!==_1&&d.push(`${B}:${oN(_,!1)}`)}),d.length>0?`${i}(${d.join("//")})`:i}{const i=function q1(o,e){let i=[];return AT(o.children,(d,_)=>{_===_1&&(i=i.concat(e(d,_)))}),AT(o.children,(d,_)=>{_!==_1&&(i=i.concat(e(d,_)))}),i}(o,(d,_)=>_===_1?[oN(o.children[_1],!1)]:[`${_}:${oN(d,!1)}`]);return 1===Object.keys(o.children).length&&null!=o.children[_1]?`${VN(o)}/${i[0]}`:`${VN(o)}/(${i.join("//")})`}}function YR(o){return encodeURIComponent(o).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uR(o){return YR(o).replace(/%3B/gi,";")}function S2(o){return YR(o).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cM(o){return decodeURIComponent(o)}function JR(o){return cM(o.replace(/\+/g,"%20"))}function _j(o){return`${S2(o.path)}${function v5(o){return Object.keys(o).map(e=>`;${S2(e)}=${S2(o[e])}`).join("")}(o.parameters)}`}const kG=/^[^\/()?;=#]+/;function E5(o){const e=o.match(kG);return e?e[0]:""}const cU=/^[^=?&#]+/,I5=/^[^&#]+/;class H9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new P0([],{}):new P0([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let d={};return this.peekStartsWith("(")&&(d=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(d[_1]=new P0(e,i)),d}parseSegment(){const e=E5(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new yI(cM(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const i=E5(this.remaining);if(!i)return;this.capture(i);let d="";if(this.consumeOptional("=")){const _=E5(this.remaining);_&&(d=_,this.capture(d))}e[cM(i)]=cM(d)}parseQueryParam(e){const i=function kj(o){const e=o.match(cU);return e?e[0]:""}(this.remaining);if(!i)return;this.capture(i);let d="";if(this.consumeOptional("=")){const _t=function IX(o){const e=o.match(I5);return e?e[0]:""}(this.remaining);_t&&(d=_t,this.capture(d))}const _=JR(i),B=JR(d);if(e.hasOwnProperty(_)){let _t=e[_];Array.isArray(_t)||(_t=[_t],e[_]=_t),_t.push(B)}else e[_]=B}parseParens(e){const i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const d=E5(this.remaining),_=this.remaining[d.length];if("/"!==_&&")"!==_&&";"!==_)throw new Error(`Cannot parse url '${this.url}'`);let B;d.indexOf(":")>-1?(B=d.substr(0,d.indexOf(":")),this.capture(B),this.capture(":")):e&&(B=_1);const _t=this.parseChildren();i[B]=1===Object.keys(_t).length?_t[_1]:new P0([],_t),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class jj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){const i=b5(e,this._root);return i?i.children.map(d=>d.value):[]}firstChild(e){const i=b5(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){const i=w3(e,this._root);return i.length<2?[]:i[i.length-2].children.map(_=>_.value).filter(_=>_!==e)}pathFromRoot(e){return w3(e,this._root).map(i=>i.value)}}function b5(o,e){if(o===e.value)return e;for(const i of e.children){const d=b5(o,i);if(d)return d}return null}function w3(o,e){if(o===e.value)return[e];for(const i of e.children){const d=w3(o,i);if(d.length)return d.unshift(e),d}return[]}class R2{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}}function T3(o){const e={};return o&&o.children.forEach(i=>e[i.value.outlet]=i),e}class S3 extends jj{constructor(e,i){super(e),this.snapshot=i,eV(this,e)}toString(){return this.snapshot.toString()}}function C5(o,e){const i=function uM(o,e){const _t=new O2([],{},{},"",{},_1,e,null,o.root,-1,{});return new $j("",new R2(_t,[]))}(o,e),d=new KR([new yI("",{})]),_=new KR({}),B=new KR({}),_t=new KR({}),ga=new KR(""),_h=new sN(d,_,_t,ga,B,_1,e,i.root);return _h.snapshot=i.root,new S3(new R2(_h,[]),i)}class sN{constructor(e,i,d,_,B,_t,ga,_h){this.url=e,this.params=i,this.queryParams=d,this.fragment=_,this.data=B,this.outlet=_t,this.component=ga,this._futureSnapshot=_h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,RI.U)(e=>AL(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,RI.U)(e=>AL(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function q9(o,e="emptyOnly"){const i=o.pathFromRoot;let d=0;if("always"!==e)for(d=i.length-1;d>=1;){const _=i[d],B=i[d-1];if(_.routeConfig&&""===_.routeConfig.path)d--;else{if(B.component)break;d--}}return function W9(o){return o.reduce((e,i)=>({params:Object.assign(Object.assign({},e.params),i.params),data:Object.assign(Object.assign({},e.data),i.data),resolve:Object.assign(Object.assign({},e.resolve),i._resolvedData)}),{params:{},data:{},resolve:{}})}(i.slice(d))}class O2{constructor(e,i,d,_,B,_t,ga,_h,_g,l_,f_){this.url=e,this.params=i,this.queryParams=d,this.fragment=_,this.data=B,this.outlet=_t,this.component=ga,this.routeConfig=_h,this._urlSegment=_g,this._lastPathIndex=l_,this._resolve=f_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=AL(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=AL(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(d=>d.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $j extends jj{constructor(e,i){super(i),this.url=e,eV(this,i)}toString(){return uU(this._root)}}function eV(o,e){e.value._routerState=o,e.children.forEach(i=>eV(o,i))}function uU(o){const e=o.children.length>0?` { ${o.children.map(uU).join(", ")} } `:"";return`${o.value}${e}`}function TP(o){if(o.snapshot){const e=o.snapshot,i=o._futureSnapshot;o.snapshot=i,MO(e.queryParams,i.queryParams)||o.queryParams.next(i.queryParams),e.fragment!==i.fragment&&o.fragment.next(i.fragment),MO(e.params,i.params)||o.params.next(i.params),function C2(o,e){if(o.length!==e.length)return!1;for(let i=0;i<o.length;++i)if(!MO(o[i],e[i]))return!1;return!0}(e.url,i.url)||o.url.next(i.url),MO(e.data,i.data)||o.data.next(i.data)}else o.snapshot=o._futureSnapshot,o.data.next(o._futureSnapshot.data)}function aN(o,e){const i=MO(o.params,e.params)&&function SI(o,e){return VI(o,e)&&o.every((i,d)=>MO(i.parameters,e[d].parameters))}(o.url,e.url);return i&&!(!o.parent!=!e.parent)&&(!o.parent||aN(o.parent,e.parent))}function dU(o,e,i){if(i&&o.shouldReuseRoute(e.value,i.value.snapshot)){const d=i.value;d._futureSnapshot=e.value;const _=function PG(o,e,i){return e.children.map(d=>{for(const _ of i.children)if(o.shouldReuseRoute(d.value,_.value.snapshot))return dU(o,d,_);return dU(o,d)})}(o,e,i);return new R2(d,_)}{if(o.shouldAttach(e.value)){const B=o.retrieve(e.value);if(null!==B){const _t=B.route;return _t.value._futureSnapshot=e.value,_t.children=e.children.map(ga=>dU(o,ga)),_t}}const d=function xG(o){return new sN(new KR(o.url),new KR(o.params),new KR(o.queryParams),new KR(o.fragment),new KR(o.data),o.outlet,o.component,o)}(e.value),_=e.children.map(B=>dU(o,B));return new R2(d,_)}}function AO(o){return"object"==typeof o&&null!=o&&!o.outlets&&!o.segmentPath}function SP(o){return"object"==typeof o&&null!=o&&o.outlets}function R3(o,e,i,d,_){let B={};if(d&&AT(d,(ga,_h)=>{B[_h]=Array.isArray(ga)?ga.map(_g=>`${_g}`):`${ga}`}),o===e)return new y0(i,B,_);const _t=z9(o,e,i);return new y0(_t,B,_)}function z9(o,e,i){const d={};return AT(o.children,(_,B)=>{d[B]=_===e?i:z9(_,e,i)}),new P0(o.segments,d)}class yL{constructor(e,i,d){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=d,e&&d.length>0&&AO(d[0]))throw new Error("Root segment cannot have matrix parameters");const _=d.find(SP);if(_&&_!==iN(d))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tV{constructor(e,i,d){this.segmentGroup=e,this.processChildren=i,this.index=d}}function $9(o,e,i){if(o||(o=new P0([],{})),0===o.segments.length&&o.hasChildren())return O3(o,e,i);const d=function Z9(o,e,i){let d=0,_=e;const B={match:!1,pathIndex:0,commandIndex:0};for(;_<o.segments.length;){if(d>=i.length)return B;const _t=o.segments[_],ga=i[d];if(SP(ga))break;const _h=`${ga}`,_g=d<i.length-1?i[d+1]:null;if(_>0&&void 0===_h)break;if(_h&&_g&&"object"==typeof _g&&void 0===_g.outlets){if(!w5(_h,_g,_t))return B;d+=2}else{if(!w5(_h,{},_t))return B;d++}_++}return{match:!0,pathIndex:_,commandIndex:d}}(o,e,i),_=i.slice(d.commandIndex);if(d.match&&d.pathIndex<o.segments.length){const B=new P0(o.segments.slice(0,d.pathIndex),{});return B.children[_1]=new P0(o.segments.slice(d.pathIndex),o.children),O3(B,0,_)}return d.match&&0===_.length?new P0(o.segments,{}):d.match&&!o.hasChildren()?X9(o,e,i):d.match?O3(o,0,_):X9(o,e,i)}function O3(o,e,i){if(0===i.length)return new P0(o.segments,{});{const d=function J9(o){return SP(o[0])?o[0].outlets:{[_1]:o}}(i),_={};return AT(d,(B,_t)=>{"string"==typeof B&&(B=[B]),null!==B&&(_[_t]=$9(o.children[_t],e,B))}),AT(o.children,(B,_t)=>{void 0===d[_t]&&(_[_t]=B)}),new P0(o.segments,_)}}function X9(o,e,i){const d=o.segments.slice(0,e);let _=0;for(;_<i.length;){const B=i[_];if(SP(B)){const _h=lM(B.outlets);return new P0(d,_h)}if(0===_&&AO(i[0])){d.push(new yI(o.segments[e].path,EL(i[0]))),_++;continue}const _t=SP(B)?B.outlets[_1]:`${B}`,ga=_<i.length-1?i[_+1]:null;_t&&ga&&AO(ga)?(d.push(new yI(_t,EL(ga))),_+=2):(d.push(new yI(_t,{})),_++)}return new P0(d,{})}function lM(o){const e={};return AT(o,(i,d)=>{"string"==typeof i&&(i=[i]),null!==i&&(e[d]=X9(new P0([],{}),0,i))}),e}function EL(o){const e={};return AT(o,(i,d)=>e[d]=`${i}`),e}function w5(o,e,i){return o==i.path&&MO(e,i.parameters)}class nV{constructor(e,i,d,_){this.routeReuseStrategy=e,this.futureState=i,this.currState=d,this.forwardEvent=_}activate(e){const i=this.futureState._root,d=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,d,e),TP(this.futureState.root),this.activateChildRoutes(i,d,e)}deactivateChildRoutes(e,i,d){const _=T3(i);e.children.forEach(B=>{const _t=B.value.outlet;this.deactivateRoutes(B,_[_t],d),delete _[_t]}),AT(_,(B,_t)=>{this.deactivateRouteAndItsChildren(B,d)})}deactivateRoutes(e,i,d){const _=e.value,B=i?i.value:null;if(_===B)if(_.component){const _t=d.getContext(_.outlet);_t&&this.deactivateChildRoutes(e,i,_t.children)}else this.deactivateChildRoutes(e,i,d);else B&&this.deactivateRouteAndItsChildren(i,d)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){const d=i.getContext(e.value.outlet),_=d&&e.value.component?d.children:i,B=T3(e);for(const _t of Object.keys(B))this.deactivateRouteAndItsChildren(B[_t],_);if(d&&d.outlet){const _t=d.outlet.detach(),ga=d.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:_t,route:e,contexts:ga})}}deactivateRouteAndOutlet(e,i){const d=i.getContext(e.value.outlet),_=d&&e.value.component?d.children:i,B=T3(e);for(const _t of Object.keys(B))this.deactivateRouteAndItsChildren(B[_t],_);d&&d.outlet&&(d.outlet.deactivate(),d.children.onOutletDeactivated(),d.attachRef=null,d.resolver=null,d.route=null)}activateChildRoutes(e,i,d){const _=T3(i);e.children.forEach(B=>{this.activateRoutes(B,_[B.value.outlet],d),this.forwardEvent(new I2(B.value.snapshot))}),e.children.length&&this.forwardEvent(new y2(e.value.snapshot))}activateRoutes(e,i,d){const _=e.value,B=i?i.value:null;if(TP(_),_===B)if(_.component){const _t=d.getOrCreateContext(_.outlet);this.activateChildRoutes(e,i,_t.children)}else this.activateChildRoutes(e,i,d);else if(_.component){const _t=d.getOrCreateContext(_.outlet);if(this.routeReuseStrategy.shouldAttach(_.snapshot)){const ga=this.routeReuseStrategy.retrieve(_.snapshot);this.routeReuseStrategy.store(_.snapshot,null),_t.children.onOutletReAttached(ga.contexts),_t.attachRef=ga.componentRef,_t.route=ga.route.value,_t.outlet&&_t.outlet.attach(ga.componentRef,ga.route.value),TP(ga.route.value),this.activateChildRoutes(e,null,_t.children)}else{const ga=function D3(o){for(let e=o.parent;e;e=e.parent){const i=e.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig;if(i&&i.component)return null}return null}(_.snapshot),_h=ga?ga.module.componentFactoryResolver:null;_t.attachRef=null,_t.route=_,_t.resolver=_h,_t.outlet&&_t.outlet.activateWith(_,_h),this.activateChildRoutes(e,null,_t.children)}}else this.activateChildRoutes(e,null,d)}}class rV{constructor(e,i){this.routes=e,this.module=i}}function IL(o){return"function"==typeof o}function N3(o){return o instanceof y0}const P3=Symbol("INITIAL_VALUE");function iV(){return KT(o=>function nM(...o){const e=(0,XL.yG)(o),i=(0,XL.jO)(o),{args:d,keys:_}=oS(o);if(0===d.length)return(0,fT.D)([],e);const B=new UT.y(function vP(o,e,i=rN.y){return d=>{mS(e,()=>{const{length:_}=o,B=new Array(_);let _t=_,ga=_;for(let _h=0;_h<_;_h++)mS(e,()=>{const _g=(0,fT.D)(o[_h],e);let l_=!1;_g.subscribe((0,sS.x)(d,f_=>{B[_h]=f_,l_||(l_=!0,ga--),ga||d.next(i(B.slice()))},()=>{--_t||d.complete()}))},d)},d)}}(d,e,_?_t=>fL(_,_t):rN.y));return i?B.pipe(v3(i)):B}(o.map(e=>e.pipe((0,mL.q)(1),jN(P3)))).pipe(xO((e,i)=>{let d=!1;return i.reduce((_,B,_t)=>_!==P3?_:(B===P3&&(d=!0),d||!1!==B&&_t!==i.length-1&&!N3(B)?_:B),e)},P3),zS(e=>e!==P3),(0,RI.U)(e=>N3(e)?e:!0===e),(0,mL.q)(1)))}class UG{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hU,this.attachRef=null}}class hU{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const d=this.getOrCreateContext(e);d.outlet=i,this.contexts.set(e,d)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new UG,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}let oV=(()=>{class o{constructor(i,d,_,B,_t){this.parentContexts=i,this.location=d,this.resolver=_,this.changeDetector=_t,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=B||_1,i.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const i=this.parentContexts.getContext(this.name);i&&i.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,d){this.activated=i,this._activatedRoute=d,this.location.insert(i.hostView),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,d){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=i;const _t=(d=d||this.resolver).resolveComponentFactory(i._futureSnapshot.routeConfig.component),ga=this.parentContexts.getOrCreateContext(this.name).children,_h=new LY(i,ga,this.location.injector);this.activated=this.location.createComponent(_t,this.location.length,_h),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(hU),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},o.\u0275dir=f.lG2({type:o,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),o})();class LY{constructor(e,i,d){this.route=e,this.childContexts=i,this.parent=d}get(e,i){return e===sN?this.route:e===hU?this.childContexts:this.parent.get(e,i)}}let sV=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f.Xpm({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,d){1&i&&f._UZ(0,"router-outlet")},directives:[oV],encapsulation:2}),o})();function uN(o,e=""){for(let i=0;i<o.length;i++){const d=o[i];x3(d,RP(e,d))}}function x3(o,e){o.children&&uN(o.children,e)}function RP(o,e){return e?o||e.path?o&&!e.path?`${o}/`:!o&&e.path?e.path:`${o}/${e.path}`:"":o}function dM(o){const e=o.children&&o.children.map(dM),i=e?Object.assign(Object.assign({},o),{children:e}):Object.assign({},o);return!i.component&&(e||i.loadChildren)&&i.outlet&&i.outlet!==_1&&(i.component=sV),i}function $R(o){return o.outlet||_1}function cS(o,e){const i=o.filter(d=>$R(d)===e);return i.push(...o.filter(d=>$R(d)!==e)),i}const S5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R5(o,e,i){var d;if(""===e.path)return"full"===e.pathMatch&&(o.hasChildren()||i.length>0)?Object.assign({},S5):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};const B=(e.matcher||Q9)(i,o,e);if(!B)return Object.assign({},S5);const _t={};AT(B.posParams,(_h,_g)=>{_t[_g]=_h.path});const ga=B.consumed.length>0?Object.assign(Object.assign({},_t),B.consumed[B.consumed.length-1].parameters):_t;return{matched:!0,consumedSegments:B.consumed,remainingSegments:i.slice(B.consumed.length),parameters:ga,positionalParamSegments:null!==(d=B.posParams)&&void 0!==d?d:{}}}function fU(o,e,i,d,_="corrected"){if(i.length>0&&function MY(o,e,i){return i.some(d=>pU(o,e,d)&&$R(d)!==_1)}(o,i,d)){const _t=new P0(e,function aV(o,e,i,d){const _={};_[_1]=d,d._sourceSegment=o,d._segmentIndexShift=e.length;for(const B of i)if(""===B.path&&$R(B)!==_1){const _t=new P0([],{});_t._sourceSegment=o,_t._segmentIndexShift=e.length,_[$R(B)]=_t}return _}(o,e,d,new P0(i,o.children)));return _t._sourceSegment=o,_t._segmentIndexShift=e.length,{segmentGroup:_t,slicedSegments:[]}}if(0===i.length&&function BY(o,e,i){return i.some(d=>pU(o,e,d))}(o,i,d)){const _t=new P0(o.segments,function O5(o,e,i,d,_,B){const _t={};for(const ga of d)if(pU(o,i,ga)&&!_[$R(ga)]){const _h=new P0([],{});_h._sourceSegment=o,_h._segmentIndexShift="legacy"===B?o.segments.length:e.length,_t[$R(ga)]=_h}return Object.assign(Object.assign({},_),_t)}(o,e,i,d,o.children,_));return _t._sourceSegment=o,_t._segmentIndexShift=e.length,{segmentGroup:_t,slicedSegments:i}}const B=new P0(o.segments,o.children);return B._sourceSegment=o,B._segmentIndexShift=e.length,{segmentGroup:B,slicedSegments:i}}function pU(o,e,i){return(!(o.hasChildren()||e.length>0)||"full"!==i.pathMatch)&&""===i.path}function FG(o,e,i,d){return!!($R(o)===d||d!==_1&&pU(e,i,o))&&("**"===o.path||R5(e,o,i).matched)}function tH(o,e,i){return 0===e.length&&!o.children[i]}class jG{constructor(e){this.segmentGroup=e||null}}class gU{constructor(e){this.urlTree=e}}function vS(o){return yP(new jG(o))}function D5(o){return yP(new gU(o))}class L3{constructor(e,i,d,_,B){this.configLoader=i,this.urlSerializer=d,this.urlTree=_,this.config=B,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=fU(this.urlTree.root,[],[],this.config).segmentGroup,i=new P0(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,i,_1).pipe((0,RI.U)(B=>this.createUrlTree(lV(B),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cR(B=>{if(B instanceof gU)return this.allowRedirects=!1,this.match(B.urlTree);throw B instanceof jG?this.noMatchError(B):B}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,_1).pipe((0,RI.U)(_=>this.createUrlTree(lV(_),e.queryParams,e.fragment))).pipe(cR(_=>{throw _ instanceof jG?this.noMatchError(_):_}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,i,d){const _=e.segments.length>0?new P0([],{[_1]:e}):e;return new y0(_,i,d)}expandSegmentGroup(e,i,d,_){return 0===d.segments.length&&d.hasChildren()?this.expandChildren(e,i,d).pipe((0,RI.U)(B=>new P0([],B))):this.expandSegment(e,d,i,d.segments,_,!0)}expandChildren(e,i,d){const _=[];for(const B of Object.keys(d.children))"primary"===B?_.unshift(B):_.push(B);return(0,fT.D)(_).pipe(LO(B=>{const _t=d.children[B],ga=cS(i,B);return this.expandSegmentGroup(e,ga,_t,B).pipe((0,RI.U)(_h=>({segment:_h,outlet:B})))}),xO((B,_t)=>(B[_t.outlet]=_t.segment,B),{}),function xY(o,e){const i=arguments.length>=2;return d=>d.pipe(o?zS((_,B)=>o(_,B,d)):rN.y,E3(1),i?OG(e):Z4(()=>new EP))}())}expandSegment(e,i,d,_,B,_t){return(0,fT.D)(d).pipe(LO(ga=>this.expandSegmentAgainstRoute(e,i,d,ga,_,B,_t).pipe(cR(_g=>{if(_g instanceof jG)return mI(null);throw _g}))),iM(ga=>!!ga),cR((ga,_h)=>{if(ga instanceof EP||"EmptyError"===ga.name)return tH(i,_,B)?mI(new P0([],{})):vS(i);throw ga}))}expandSegmentAgainstRoute(e,i,d,_,B,_t,ga){return FG(_,i,B,_t)?void 0===_.redirectTo?this.matchSegmentAgainstRoute(e,i,_,B,_t):ga&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,d,_,B,_t):vS(i):vS(i)}expandSegmentAgainstRouteUsingRedirect(e,i,d,_,B,_t){return"**"===_.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,d,_,_t):this.expandRegularSegmentAgainstRouteUsingRedirect(e,i,d,_,B,_t)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,d,_){const B=this.applyRedirectCommands([],d.redirectTo,{});return d.redirectTo.startsWith("/")?D5(B):this.lineralizeSegments(d,B).pipe((0,NS.z)(_t=>{const ga=new P0(_t,{});return this.expandSegment(e,ga,i,_t,_,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,i,d,_,B,_t){const{matched:ga,consumedSegments:_h,remainingSegments:_g,positionalParamSegments:l_}=R5(i,_,B);if(!ga)return vS(i);const f_=this.applyRedirectCommands(_h,_.redirectTo,l_);return _.redirectTo.startsWith("/")?D5(f_):this.lineralizeSegments(_,f_).pipe((0,NS.z)(R_=>this.expandSegment(e,i,d,R_.concat(_g),_t,!1)))}matchSegmentAgainstRoute(e,i,d,_,B){if("**"===d.path)return d.loadChildren?(d._loadedConfig?mI(d._loadedConfig):this.configLoader.load(e.injector,d)).pipe((0,RI.U)(f_=>(d._loadedConfig=f_,new P0(_,{})))):mI(new P0(_,{}));const{matched:_t,consumedSegments:ga,remainingSegments:_h}=R5(i,d,_);return _t?this.getChildConfig(e,d,_).pipe((0,NS.z)(l_=>{const f_=l_.module,R_=l_.routes,{segmentGroup:V_,slicedSegments:Y_}=fU(i,ga,_h,R_),R0=new P0(V_.segments,V_.children);if(0===Y_.length&&R0.hasChildren())return this.expandChildren(f_,R_,R0).pipe((0,RI.U)(LI=>new P0(ga,LI)));if(0===R_.length&&0===Y_.length)return mI(new P0(ga,{}));const V0=$R(d)===B;return this.expandSegment(f_,R0,R_,Y_,V0?_1:B,!0).pipe((0,RI.U)(MI=>new P0(ga.concat(MI.segments),MI.children)))})):vS(i)}getChildConfig(e,i,d){return i.children?mI(new rV(i.children,e)):i.loadChildren?void 0!==i._loadedConfig?mI(i._loadedConfig):this.runCanLoadGuards(e.injector,i,d).pipe((0,NS.z)(_=>_?this.configLoader.load(e.injector,i).pipe((0,RI.U)(B=>(i._loadedConfig=B,B))):function cV(o){return yP(aM(`Cannot load children because the guard of the route "path: '${o.path}'" returned false`))}(i))):mI(new rV([],e))}runCanLoadGuards(e,i,d){const _=i.canLoad;return _&&0!==_.length?mI(_.map(_t=>{const ga=e.get(_t);let _h;if(function bX(o){return o&&IL(o.canLoad)}(ga))_h=ga.canLoad(i,d);else{if(!IL(ga))throw new Error("Invalid CanLoad guard");_h=ga(i,d)}return kS(_h)})).pipe(iV(),(0,mO.b)(_t=>{if(!N3(_t))return;const ga=aM(`Redirecting to "${this.urlSerializer.serialize(_t)}"`);throw ga.url=_t,ga}),(0,RI.U)(_t=>!0===_t)):mI(!0)}lineralizeSegments(e,i){let d=[],_=i.root;for(;;){if(d=d.concat(_.segments),0===_.numberOfChildren)return mI(d);if(_.numberOfChildren>1||!_.children[_1])return yP(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));_=_.children[_1]}}applyRedirectCommands(e,i,d){return this.applyRedirectCreatreUrlTree(i,this.urlSerializer.parse(i),e,d)}applyRedirectCreatreUrlTree(e,i,d,_){const B=this.createSegmentGroup(e,i.root,d,_);return new y0(B,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){const d={};return AT(e,(_,B)=>{if("string"==typeof _&&_.startsWith(":")){const ga=_.substring(1);d[B]=i[ga]}else d[B]=_}),d}createSegmentGroup(e,i,d,_){const B=this.createSegments(e,i.segments,d,_);let _t={};return AT(i.children,(ga,_h)=>{_t[_h]=this.createSegmentGroup(e,ga,d,_)}),new P0(B,_t)}createSegments(e,i,d,_){return i.map(B=>B.path.startsWith(":")?this.findPosParam(e,B,_):this.findOrReturn(B,d))}findPosParam(e,i,d){const _=d[i.path.substring(1)];if(!_)throw new Error(`Cannot redirect to '${e}'. Cannot find '${i.path}'.`);return _}findOrReturn(e,i){let d=0;for(const _ of i){if(_.path===e.path)return i.splice(d),_;d++}return e}}function lV(o){const e={};for(const d of Object.keys(o.children)){const B=lV(o.children[d]);(B.segments.length>0||B.hasChildren())&&(e[d]=B)}return function uV(o){if(1===o.numberOfChildren&&o.children[_1]){const e=o.children[_1];return new P0(o.segments.concat(e.segments),e.children)}return o}(new P0(o.segments,e))}class lR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bL{constructor(e,i){this.component=e,this.route=i}}function GG(o,e,i){const d=o._root;return dV(d,e?e._root:null,i,[d.value])}function hM(o,e,i){const d=function QG(o){if(!o)return null;for(let e=o.parent;e;e=e.parent){const i=e.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig}return null}(e);return(d?d.module.injector:i).get(o)}function dV(o,e,i,d,_={canDeactivateChecks:[],canActivateChecks:[]}){const B=T3(e);return o.children.forEach(_t=>{(function DP(o,e,i,d,_={canDeactivateChecks:[],canActivateChecks:[]}){const B=o.value,_t=e?e.value:null,ga=i?i.getContext(o.value.outlet):null;if(_t&&B.routeConfig===_t.routeConfig){const _h=function NP(o,e,i){if("function"==typeof i)return i(o,e);switch(i){case"pathParamsChange":return!VI(o.url,e.url);case"pathParamsOrQueryParamsChange":return!VI(o.url,e.url)||!MO(o.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aN(o,e)||!MO(o.queryParams,e.queryParams);default:return!aN(o,e)}}(_t,B,B.routeConfig.runGuardsAndResolvers);_h?_.canActivateChecks.push(new lR(d)):(B.data=_t.data,B._resolvedData=_t._resolvedData),dV(o,e,B.component?ga?ga.children:null:i,d,_),_h&&ga&&ga.outlet&&ga.outlet.isActivated&&_.canDeactivateChecks.push(new bL(ga.outlet.component,_t))}else _t&&ZR(e,ga,_),_.canActivateChecks.push(new lR(d)),dV(o,null,B.component?ga?ga.children:null:i,d,_)})(_t,B[_t.value.outlet],i,d.concat([_t.value]),_),delete B[_t.value.outlet]}),AT(B,(_t,ga)=>ZR(_t,i.getContext(ga),_)),_}function ZR(o,e,i){const d=T3(o),_=o.value;AT(d,(B,_t)=>{ZR(B,_.component?e?e.children.getContext(_t):null:e,i)}),i.canDeactivateChecks.push(new bL(_.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,_))}class rH{}function _O(o){return new UT.y(e=>e.error(o))}class WG{constructor(e,i,d,_,B,_t){this.rootComponentType=e,this.config=i,this.urlTree=d,this.url=_,this.paramsInheritanceStrategy=B,this.relativeLinkResolution=_t}recognize(){const e=fU(this.urlTree.root,[],[],this.config.filter(_t=>void 0===_t.redirectTo),this.relativeLinkResolution).segmentGroup,i=this.processSegmentGroup(this.config,e,_1);if(null===i)return null;const d=new O2([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},_1,this.rootComponentType,null,this.urlTree.root,-1,{}),_=new R2(d,i),B=new $j(this.url,_);return this.inheritParamsAndData(B._root),B}inheritParamsAndData(e){const i=e.value,d=q9(i,this.paramsInheritanceStrategy);i.params=Object.freeze(d.params),i.data=Object.freeze(d.data),e.children.forEach(_=>this.inheritParamsAndData(_))}processSegmentGroup(e,i,d){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,i):this.processSegment(e,i,i.segments,d)}processChildren(e,i){const d=[];for(const B of Object.keys(i.children)){const _t=i.children[B],ga=cS(e,B),_h=this.processSegmentGroup(ga,_t,B);if(null===_h)return null;d.push(..._h)}const _=oH(d);return function KG(o){o.sort((e,i)=>e.value.outlet===_1?-1:i.value.outlet===_1?1:e.value.outlet.localeCompare(i.value.outlet))}(_),_}processSegment(e,i,d,_){for(const B of e){const _t=this.processSegmentAgainstRoute(B,i,d,_);if(null!==_t)return _t}return tH(i,d,_)?[]:null}processSegmentAgainstRoute(e,i,d,_){if(e.redirectTo||!FG(e,i,d,_))return null;let B,_t=[],ga=[];if("**"===e.path){const V_=d.length>0?iN(d).parameters:{};B=new O2(d,V_,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Nf(e),$R(e),e.component,e,sH(i),GN(i)+d.length,_c(e))}else{const V_=R5(i,e,d);if(!V_.matched)return null;_t=V_.consumedSegments,ga=V_.remainingSegments,B=new O2(_t,V_.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Nf(e),$R(e),e.component,e,sH(i),GN(i)+_t.length,_c(e))}const _h=function iH(o){return o.children?o.children:o.loadChildren?o._loadedConfig.routes:[]}(e),{segmentGroup:_g,slicedSegments:l_}=fU(i,_t,ga,_h.filter(V_=>void 0===V_.redirectTo),this.relativeLinkResolution);if(0===l_.length&&_g.hasChildren()){const V_=this.processChildren(_h,_g);return null===V_?null:[new R2(B,V_)]}if(0===_h.length&&0===l_.length)return[new R2(B,[])];const f_=$R(e)===_,R_=this.processSegment(_h,_g,l_,f_?_1:_);return null===R_?null:[new R2(B,R_)]}}function P5(o){const e=o.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function oH(o){const e=[],i=new Set;for(const d of o){if(!P5(d)){e.push(d);continue}const _=e.find(B=>d.value.routeConfig===B.value.routeConfig);void 0!==_?(_.children.push(...d.children),i.add(_)):e.push(d)}for(const d of i){const _=oH(d.children);e.push(new R2(d.value,_))}return e.filter(d=>!i.has(d))}function sH(o){let e=o;for(;e._sourceSegment;)e=e._sourceSegment;return e}function GN(o){let e=o,i=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,i+=e._segmentIndexShift?e._segmentIndexShift:0;return i-1}function Nf(o){return o.data||{}}function _c(o){return o.resolve||{}}function s0(o){return[...Object.keys(o),...Object.getOwnPropertySymbols(o)]}function nI(o){return KT(e=>{const i=o(e);return i?(0,fT.D)(i).pipe((0,RI.U)(()=>e)):mI(e)})}class QI extends class GI{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}}{}const uS=new f.OlP("ROUTES");class FO{constructor(e,i,d,_){this.injector=e,this.compiler=i,this.onLoadStartListener=d,this.onLoadEndListener=_}load(e,i){if(i._loader$)return i._loader$;this.onLoadStartListener&&this.onLoadStartListener(i);const _=this.loadModuleFactory(i.loadChildren).pipe((0,RI.U)(B=>{this.onLoadEndListener&&this.onLoadEndListener(i);const _t=B.create(e);return new rV(A5(_t.injector.get(uS,void 0,f.XFs.Self|f.XFs.Optional)).map(dM),_t)}),cR(B=>{throw i._loader$=void 0,B}));return i._loader$=new CP(_,()=>new BT.x).pipe(y3()),i._loader$}loadModuleFactory(e){return kS(e()).pipe((0,NS.z)(i=>i instanceof f.YKP?mI(i):(0,fT.D)(this.compiler.compileModuleAsync(i))))}}class x5{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}function zG(o){throw o}function mU(o,e,i){return e.parse("/")}function pV(o,e){return mI(null)}const OT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lS=(()=>{class o{constructor(i,d,_,B,_t,ga,_h){this.rootComponentType=i,this.urlSerializer=d,this.rootContexts=_,this.location=B,this.config=_h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new BT.x,this.errorHandler=zG,this.malformedUriErrorHandler=mU,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pV,afterPreactivation:pV},this.urlHandlingStrategy=new x5,this.routeReuseStrategy=new QI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=_t.get(f.h0i),this.console=_t.get(f.c2e);const f_=_t.get(f.R0b);this.isNgZoneEnabled=f_ instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(_h),this.currentUrlTree=function mj(){return new y0(new P0([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new FO(_t,ga,R_=>this.triggerEvent(new zR(R_)),R_=>this.triggerEvent(new oM(R_))),this.routerState=C5(this.currentUrlTree,this.rootComponentType),this.transitions=new KR({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var i;return null===(i=this.location.getState())||void 0===i?void 0:i.\u0275routerPageId}setupNavigations(i){const d=this.events;return i.pipe(zS(_=>0!==_.id),(0,RI.U)(_=>Object.assign(Object.assign({},_),{extractedUrl:this.urlHandlingStrategy.extract(_.rawUrl)})),KT(_=>{let B=!1,_t=!1;return mI(_).pipe((0,mO.b)(ga=>{this.currentNavigation={id:ga.id,initialUrl:ga.currentRawUrl,extractedUrl:ga.extractedUrl,trigger:ga.source,extras:ga.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),KT(ga=>{const _h=this.browserUrlTree.toString(),_g=!this.navigated||ga.extractedUrl.toString()!==_h||_h!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_g)&&this.urlHandlingStrategy.shouldProcessUrl(ga.rawUrl))return YG(ga.source)&&(this.browserUrlTree=ga.extractedUrl),mI(ga).pipe(KT(f_=>{const R_=this.transitions.getValue();return d.next(new X4(f_.id,this.serializeUrl(f_.extractedUrl),f_.source,f_.restoredState)),R_!==this.transitions.getValue()?A2.E:Promise.resolve(f_)}),function UY(o,e,i,d){return KT(_=>function xS(o,e,i,d,_){return new L3(o,e,i,d,_).apply()}(o,e,i,_.extractedUrl,d).pipe((0,RI.U)(B=>Object.assign(Object.assign({},_),{urlAfterRedirects:B}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mO.b)(f_=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:f_.urlAfterRedirects})}),function ah(o,e,i,d,_){return(0,NS.z)(B=>function fV(o,e,i,d,_="emptyOnly",B="legacy"){try{const _t=new WG(o,e,i,d,_,B).recognize();return null===_t?_O(new rH):mI(_t)}catch(_t){return _O(_t)}}(o,e,B.urlAfterRedirects,i(B.urlAfterRedirects),d,_).pipe((0,RI.U)(_t=>Object.assign(Object.assign({},B),{targetSnapshot:_t}))))}(this.rootComponentType,this.config,f_=>this.serializeUrl(f_),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mO.b)(f_=>{if("eager"===this.urlUpdateStrategy){if(!f_.extras.skipLocationChange){const V_=this.urlHandlingStrategy.merge(f_.urlAfterRedirects,f_.rawUrl);this.setBrowserUrl(V_,f_)}this.browserUrlTree=f_.urlAfterRedirects}const R_=new aU(f_.id,this.serializeUrl(f_.extractedUrl),this.serializeUrl(f_.urlAfterRedirects),f_.targetSnapshot);d.next(R_)}));if(_g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R_,extractedUrl:V_,source:Y_,restoredState:R0,extras:V0}=ga,J0=new X4(R_,this.serializeUrl(V_),Y_,R0);d.next(J0);const MI=C5(V_,this.rootComponentType).snapshot;return mI(Object.assign(Object.assign({},ga),{targetSnapshot:MI,urlAfterRedirects:V_,extras:Object.assign(Object.assign({},V0),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ga.rawUrl,ga.resolve(null),A2.E}),nI(ga=>{const{targetSnapshot:_h,id:_g,extractedUrl:l_,rawUrl:f_,extras:{skipLocationChange:R_,replaceUrl:V_}}=ga;return this.hooks.beforePreactivation(_h,{navigationId:_g,appliedUrlTree:l_,rawUrlTree:f_,skipLocationChange:!!R_,replaceUrl:!!V_})}),(0,mO.b)(ga=>{const _h=new b3(ga.id,this.serializeUrl(ga.extractedUrl),this.serializeUrl(ga.urlAfterRedirects),ga.targetSnapshot);this.triggerEvent(_h)}),(0,RI.U)(ga=>Object.assign(Object.assign({},ga),{guards:GG(ga.targetSnapshot,ga.currentSnapshot,this.rootContexts)})),function hV(o,e){return(0,NS.z)(i=>{const{targetSnapshot:d,currentSnapshot:_,guards:{canActivateChecks:B,canDeactivateChecks:_t}}=i;return 0===_t.length&&0===B.length?mI(Object.assign(Object.assign({},i),{guardsResult:!0})):function HG(o,e,i,d){return(0,fT.D)(o).pipe((0,NS.z)(_=>function k5(o,e,i,d,_){const B=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return B&&0!==B.length?mI(B.map(ga=>{const _h=hM(ga,e,_);let _g;if(function T5(o){return o&&IL(o.canDeactivate)}(_h))_g=kS(_h.canDeactivate(o,e,i,d));else{if(!IL(_h))throw new Error("Invalid CanDeactivate guard");_g=kS(_h(o,e,i,d))}return _g.pipe(iM())})).pipe(iV()):mI(!0)}(_.component,_.route,i,e,d)),iM(_=>!0!==_,!0))}(_t,d,_,o).pipe((0,NS.z)(ga=>ga&&function eH(o){return"boolean"==typeof o}(ga)?function qG(o,e,i,d){return(0,fT.D)(e).pipe(LO(_=>FN(function nH(o,e){return null!==o&&e&&e(new sM(o)),mI(!0)}(_.route.parent,d),function CL(o,e){return null!==o&&e&&e(new E2(o)),mI(!0)}(_.route,d),function N5(o,e,i){const d=e[e.length-1],B=e.slice(0,e.length-1).reverse().map(_t=>function OP(o){const e=o.routeConfig?o.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:o,guards:e}:null}(_t)).filter(_t=>null!==_t).map(_t=>sU(()=>mI(_t.guards.map(_h=>{const _g=hM(_h,_t.node,i);let l_;if(function BG(o){return o&&IL(o.canActivateChild)}(_g))l_=kS(_g.canActivateChild(d,o));else{if(!IL(_g))throw new Error("Invalid CanActivateChild guard");l_=kS(_g(d,o))}return l_.pipe(iM())})).pipe(iV())));return mI(B).pipe(iV())}(o,_.path,i),function UO(o,e,i){const d=e.routeConfig?e.routeConfig.canActivate:null;if(!d||0===d.length)return mI(!0);const _=d.map(B=>sU(()=>{const _t=hM(B,e,i);let ga;if(function k3(o){return o&&IL(o.canActivate)}(_t))ga=kS(_t.canActivate(e,o));else{if(!IL(_t))throw new Error("Invalid CanActivate guard");ga=kS(_t(e,o))}return ga.pipe(iM())}));return mI(_).pipe(iV())}(o,_.route,i))),iM(_=>!0!==_,!0))}(d,B,o,e):mI(ga)),(0,RI.U)(ga=>Object.assign(Object.assign({},i),{guardsResult:ga})))})}(this.ngModule.injector,ga=>this.triggerEvent(ga)),(0,mO.b)(ga=>{if(N3(ga.guardsResult)){const _g=aM(`Redirecting to "${this.serializeUrl(ga.guardsResult)}"`);throw _g.url=ga.guardsResult,_g}const _h=new m5(ga.id,this.serializeUrl(ga.extractedUrl),this.serializeUrl(ga.urlAfterRedirects),ga.targetSnapshot,!!ga.guardsResult);this.triggerEvent(_h)}),zS(ga=>!!ga.guardsResult||(this.restoreHistory(ga),this.cancelNavigationTransition(ga,""),!1)),nI(ga=>{if(ga.guards.canActivateChecks.length)return mI(ga).pipe((0,mO.b)(_h=>{const _g=new DG(_h.id,this.serializeUrl(_h.extractedUrl),this.serializeUrl(_h.urlAfterRedirects),_h.targetSnapshot);this.triggerEvent(_g)}),KT(_h=>{let _g=!1;return mI(_h).pipe(function _m(o,e){return(0,NS.z)(i=>{const{targetSnapshot:d,guards:{canActivateChecks:_}}=i;if(!_.length)return mI(i);let B=0;return(0,fT.D)(_).pipe(LO(_t=>function m_(o,e,i,d){return function O_(o,e,i,d){const _=s0(o);if(0===_.length)return mI({});const B={};return(0,fT.D)(_).pipe((0,NS.z)(_t=>function N0(o,e,i,d){const _=hM(o,e,d);return kS(_.resolve?_.resolve(e,i):_(e,i))}(o[_t],e,i,d).pipe((0,mO.b)(ga=>{B[_t]=ga}))),E3(1),(0,NS.z)(()=>s0(B).length===_.length?mI(B):A2.E))}(o._resolve,o,e,d).pipe((0,RI.U)(B=>(o._resolvedData=B,o.data=Object.assign(Object.assign({},o.data),q9(o,i).resolve),null)))}(_t.route,d,o,e)),(0,mO.b)(()=>B++),E3(1),(0,NS.z)(_t=>B===_.length?mI(i):A2.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mO.b)({next:()=>_g=!0,complete:()=>{_g||(this.restoreHistory(_h),this.cancelNavigationTransition(_h,"At least one route resolver didn't emit any value."))}}))}),(0,mO.b)(_h=>{const _g=new ER(_h.id,this.serializeUrl(_h.extractedUrl),this.serializeUrl(_h.urlAfterRedirects),_h.targetSnapshot);this.triggerEvent(_g)}))}),nI(ga=>{const{targetSnapshot:_h,id:_g,extractedUrl:l_,rawUrl:f_,extras:{skipLocationChange:R_,replaceUrl:V_}}=ga;return this.hooks.afterPreactivation(_h,{navigationId:_g,appliedUrlTree:l_,rawUrlTree:f_,skipLocationChange:!!R_,replaceUrl:!!V_})}),(0,RI.U)(ga=>{const _h=function lU(o,e,i){const d=dU(o,e._root,i?i._root:void 0);return new S3(d,e)}(this.routeReuseStrategy,ga.targetSnapshot,ga.currentRouterState);return Object.assign(Object.assign({},ga),{targetRouterState:_h})}),(0,mO.b)(ga=>{this.currentUrlTree=ga.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ga.urlAfterRedirects,ga.rawUrl),this.routerState=ga.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ga.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ga),this.browserUrlTree=ga.urlAfterRedirects)}),((o,e,i)=>(0,RI.U)(d=>(new nV(e,d.targetRouterState,d.currentRouterState,i).activate(o),d)))(this.rootContexts,this.routeReuseStrategy,ga=>this.triggerEvent(ga)),(0,mO.b)({next(){B=!0},complete(){B=!0}}),function g5(o){return(0,aS.e)((e,i)=>{try{e.subscribe(i)}finally{i.add(o)}})}(()=>{var ga;B||_t||this.cancelNavigationTransition(_,`Navigation ID ${_.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ga=this.currentNavigation)||void 0===ga?void 0:ga.id)===_.id&&(this.currentNavigation=null)}),cR(ga=>{if(_t=!0,function _L(o){return o&&o[IR]}(ga)){const _h=N3(ga.url);_h||(this.navigated=!0,this.restoreHistory(_,!0));const _g=new I3(_.id,this.serializeUrl(_.extractedUrl),ga.message);d.next(_g),_h?setTimeout(()=>{const l_=this.urlHandlingStrategy.merge(ga.url,this.rawUrlTree),f_={skipLocationChange:_.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||YG(_.source)};this.scheduleNavigation(l_,"imperative",null,f_,{resolve:_.resolve,reject:_.reject,promise:_.promise})},0):_.resolve(!1)}else{this.restoreHistory(_,!0);const _h=new AS(_.id,this.serializeUrl(_.extractedUrl),ga);d.next(_h);try{_.resolve(this.errorHandler(ga))}catch(_g){_.reject(_g)}}return A2.E}))}))}resetRootComponentType(i){this.rootComponentType=i,this.routerState.root.component=this.rootComponentType}setTransition(i){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),i))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const d="popstate"===i.type?"popstate":"hashchange";"popstate"===d&&setTimeout(()=>{var _;const B={replaceUrl:!0},_t=(null===(_=i.state)||void 0===_?void 0:_.navigationId)?i.state:null;if(_t){const _h=Object.assign({},_t);delete _h.navigationId,delete _h.\u0275routerPageId,0!==Object.keys(_h).length&&(B.state=_h)}const ga=this.parseUrl(i.url);this.scheduleNavigation(ga,d,_t,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(i){this.events.next(i)}resetConfig(i){uN(i),this.config=i.map(dM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,d={}){const{relativeTo:_,queryParams:B,fragment:_t,queryParamsHandling:ga,preserveFragment:_h}=d,_g=_||this.routerState.root,l_=_h?this.currentUrlTree.fragment:_t;let f_=null;switch(ga){case"merge":f_=Object.assign(Object.assign({},this.currentUrlTree.queryParams),B);break;case"preserve":f_=this.currentUrlTree.queryParams;break;default:f_=B||null}return null!==f_&&(f_=this.removeEmptyProps(f_)),function K9(o,e,i,d,_){if(0===i.length)return R3(e.root,e.root,e.root,d,_);const B=function Y9(o){if("string"==typeof o[0]&&1===o.length&&"/"===o[0])return new yL(!0,0,o);let e=0,i=!1;const d=o.reduce((_,B,_t)=>{if("object"==typeof B&&null!=B){if(B.outlets){const ga={};return AT(B.outlets,(_h,_g)=>{ga[_g]="string"==typeof _h?_h.split("/"):_h}),[..._,{outlets:ga}]}if(B.segmentPath)return[..._,B.segmentPath]}return"string"!=typeof B?[..._,B]:0===_t?(B.split("/").forEach((ga,_h)=>{0==_h&&"."===ga||(0==_h&&""===ga?i=!0:".."===ga?e++:""!=ga&&_.push(ga))}),_):[..._,B]},[]);return new yL(i,e,d)}(i);if(B.toRoot())return R3(e.root,e.root,new P0([],{}),d,_);const _t=function LG(o,e,i){if(o.isAbsolute)return new tV(e.root,!0,0);if(-1===i.snapshot._lastPathIndex){const B=i.snapshot._urlSegment;return new tV(B,B===e.root,0)}const d=AO(o.commands[0])?0:1;return function MG(o,e,i){let d=o,_=e,B=i;for(;B>_;){if(B-=_,d=d.parent,!d)throw new Error("Invalid number of '../'");_=d.segments.length}return new tV(d,!1,_-B)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+d,o.numberOfDoubleDots)}(B,e,o),ga=_t.processChildren?O3(_t.segmentGroup,_t.index,B.commands):$9(_t.segmentGroup,_t.index,B.commands);return R3(e.root,_t.segmentGroup,ga,d,_)}(_g,this.currentUrlTree,i,f_,null!=l_?l_:null)}navigateByUrl(i,d={skipLocationChange:!1}){const _=N3(i)?i:this.parseUrl(i),B=this.urlHandlingStrategy.merge(_,this.rawUrlTree);return this.scheduleNavigation(B,"imperative",null,d)}navigate(i,d={skipLocationChange:!1}){return function L5(o){for(let e=0;e<o.length;e++){const i=o[e];if(null==i)throw new Error(`The requested path contains ${i} segment at index ${e}`)}}(i),this.navigateByUrl(this.createUrlTree(i,d),d)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let d;try{d=this.urlSerializer.parse(i)}catch(_){d=this.malformedUriErrorHandler(_,this.urlSerializer,i)}return d}isActive(i,d){let _;if(_=!0===d?Object.assign({},OT):!1===d?Object.assign({},gV):d,N3(i))return vL(this.currentUrlTree,i,_);const B=this.parseUrl(i);return vL(this.currentUrlTree,B,_)}removeEmptyProps(i){return Object.keys(i).reduce((d,_)=>{const B=i[_];return null!=B&&(d[_]=B),d},{})}processNavigations(){this.navigations.subscribe(i=>{this.navigated=!0,this.lastSuccessfulId=i.id,this.currentPageId=i.targetPageId,this.events.next(new v2(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,i.resolve(!0)},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}scheduleNavigation(i,d,_,B,_t){var ga,_h;if(this.disposed)return Promise.resolve(!1);let _g,l_,f_;_t?(_g=_t.resolve,l_=_t.reject,f_=_t.promise):f_=new Promise((Y_,R0)=>{_g=Y_,l_=R0});const R_=++this.navigationId;let V_;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(_=this.location.getState()),V_=_&&_.\u0275routerPageId?_.\u0275routerPageId:B.replaceUrl||B.skipLocationChange?null!==(ga=this.browserPageId)&&void 0!==ga?ga:0:(null!==(_h=this.browserPageId)&&void 0!==_h?_h:0)+1):V_=0,this.setTransition({id:R_,targetPageId:V_,source:d,restoredState:_,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:i,extras:B,resolve:_g,reject:l_,promise:f_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f_.catch(Y_=>Promise.reject(Y_))}setBrowserUrl(i,d){const _=this.urlSerializer.serialize(i),B=Object.assign(Object.assign({},d.extras.state),this.generateNgRouterState(d.id,d.targetPageId));this.location.isCurrentPathEqualTo(_)||d.extras.replaceUrl?this.location.replaceState(_,"",B):this.location.go(_,"",B)}restoreHistory(i,d=!1){var _,B;if("computed"===this.canceledNavigationResolution){const _t=this.currentPageId-i.targetPageId;"popstate"!==i.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(_=this.currentNavigation)||void 0===_?void 0:_.finalUrl)||0===_t?this.currentUrlTree===(null===(B=this.currentNavigation)||void 0===B?void 0:B.finalUrl)&&0===_t&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(_t)}else"replace"===this.canceledNavigationResolution&&(d&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(i,d){const _=new I3(i.id,this.serializeUrl(i.extractedUrl),d);this.triggerEvent(_),i.resolve(!1)}generateNgRouterState(i,d){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:d}:{navigationId:i}}}return o.\u0275fac=function(i){f.$Z()},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();function YG(o){return"imperative"!==o}let B3=(()=>{class o{constructor(i,d,_,B,_t){this.router=i,this.route=d,this.tabIndexAttribute=_,this.renderer=B,this.el=_t,this.commands=null,this.onChanges=new BT.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){if(null!=this.tabIndexAttribute)return;const d=this.renderer,_=this.el.nativeElement;null!==i?d.setAttribute(_,"tabindex",i):d.removeAttribute(_,"tabindex")}ngOnChanges(i){this.onChanges.next(this)}set routerLink(i){null!=i?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const i={skipLocationChange:nT(this.skipLocationChange),replaceUrl:nT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nT(this.preserveFragment)})}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(lS),f.Y36(sN),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},o.\u0275dir=f.lG2({type:o,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(i,d){1&i&&f.NdJ("click",function(){return d.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),o})();function nT(o){return""===o||!!o}class e1{}class $G{preload(e,i){return mI(null)}}let jY=(()=>{class o{constructor(i,d,_,B){this.router=i,this.injector=_,this.preloadingStrategy=B,this.loader=new FO(_,d,_h=>i.triggerEvent(new zR(_h)),_h=>i.triggerEvent(new oM(_h)))}setUpPreloading(){this.subscription=this.router.events.pipe(zS(i=>i instanceof v2),LO(()=>this.preload())).subscribe(()=>{})}preload(){const i=this.injector.get(f.h0i);return this.processRoutes(i,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,d){const _=[];for(const B of d)if(B.loadChildren&&!B.canLoad&&B._loadedConfig){const _t=B._loadedConfig;_.push(this.processRoutes(_t.module,_t.routes))}else B.loadChildren&&!B.canLoad?_.push(this.preloadConfig(i,B)):B.children&&_.push(this.processRoutes(i,B.children));return(0,fT.D)(_).pipe((0,rM.J)(),(0,RI.U)(B=>{}))}preloadConfig(i,d){return this.preloadingStrategy.preload(d,()=>(d._loadedConfig?mI(d._loadedConfig):this.loader.load(i.injector,d)).pipe((0,NS.z)(B=>(d._loadedConfig=B,this.processRoutes(B.module,B.routes)))))}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(lS),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(e1))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),aH=(()=>{class o{constructor(i,d,_={}){this.router=i,this.viewportScroller=d,this.options=_,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},_.scrollPositionRestoration=_.scrollPositionRestoration||"disabled",_.anchorScrolling=_.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(i=>{i instanceof X4?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof v2&&(this.lastId=i.id,this.scheduleScrollEvent(i,this.router.parseUrl(i.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(i=>{i instanceof b2&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,d){this.router.triggerEvent(new b2(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,d))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return o.\u0275fac=function(i){f.$Z()},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();const FT=new f.OlP("ROUTER_CONFIGURATION"),kP=new f.OlP("ROUTER_FORROOT_GUARD"),N2=[h0,{provide:_C,useClass:_S},{provide:lS,useFactory:function TX(o,e,i,d,_,B,_t={},ga,_h){const _g=new lS(null,o,e,i,d,_,A5(B));return ga&&(_g.urlHandlingStrategy=ga),_h&&(_g.routeReuseStrategy=_h),function fM(o,e){o.errorHandler&&(e.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(e.malformedUriErrorHandler=o.malformedUriErrorHandler),o.onSameUrlNavigation&&(e.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.relativeLinkResolution&&(e.relativeLinkResolution=o.relativeLinkResolution),o.urlUpdateStrategy&&(e.urlUpdateStrategy=o.urlUpdateStrategy),o.canceledNavigationResolution&&(e.canceledNavigationResolution=o.canceledNavigationResolution)}(_t,_g),_t.enableTracing&&_g.events.subscribe(l_=>{var f_,R_;null===(f_=console.group)||void 0===f_||f_.call(console,`Router Event: ${l_.constructor.name}`),console.log(l_.toString()),console.log(l_),null===(R_=console.groupEnd)||void 0===R_||R_.call(console)}),_g},deps:[_C,hU,h0,f.zs3,f.Sil,uS,FT,[class M3{},new f.FiY],[class _I{},new f.FiY]]},hU,{provide:sN,useFactory:function XG(o){return o.routerState.root},deps:[lS]},jY,$G,class CX{preload(e,i){return i().pipe(cR(()=>mI(null)))}},{provide:FT,useValue:{enableTracing:!1}}];function wX(){return new f.PXZ("Router",lS)}let ZG=(()=>{class o{constructor(i,d){}static forRoot(i,d){return{ngModule:o,providers:[N2,uH(i),{provide:kP,useFactory:GY,deps:[[lS,new f.FiY,new f.tp0]]},{provide:FT,useValue:d||{}},{provide:B_,useFactory:cH,deps:[bh,[new f.tBr(_0),new f.FiY],FT]},{provide:aH,useFactory:vO,deps:[lS,u3,FT]},{provide:e1,useExisting:d&&d.preloadingStrategy?d.preloadingStrategy:$G},{provide:f.PXZ,multi:!0,useFactory:wX},[k2,{provide:f.ip1,multi:!0,useFactory:eQ,deps:[k2]},{provide:lH,useFactory:SX,deps:[k2]},{provide:f.tb,multi:!0,useExisting:lH}]]}}static forChild(i){return{ngModule:o,providers:[uH(i)]}}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(kP,8),f.LFG(lS,8))},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({}),o})();function vO(o,e,i){return i.scrollOffset&&e.setOffset(i.scrollOffset),new aH(o,e,i)}function cH(o,e,i={}){return i.useHash?new Qv(o,e):new c0(o,e)}function GY(o){return"guarded"}function uH(o){return[{provide:f.deG,multi:!0,useValue:o},{provide:uS,multi:!0,useValue:o}]}let k2=(()=>{class o{constructor(i){this.injector=i,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new BT.x}appInitializer(){return this.injector.get(_A,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let d=null;const _=new Promise(ga=>d=ga),B=this.injector.get(lS),_t=this.injector.get(FT);return"disabled"===_t.initialNavigation?(B.setUpLocationChangeListener(),d(!0)):"enabled"===_t.initialNavigation||"enabledBlocking"===_t.initialNavigation?(B.hooks.afterPreactivation=()=>this.initNavigation?mI(null):(this.initNavigation=!0,d(!0),this.resultOfPreactivationDone),B.initialNavigation()):d(!0),_})}bootstrapListener(i){const d=this.injector.get(FT),_=this.injector.get(jY),B=this.injector.get(aH),_t=this.injector.get(lS),ga=this.injector.get(f.z2F);i===ga.components[0]&&(("enabledNonBlocking"===d.initialNavigation||void 0===d.initialNavigation)&&_t.initialNavigation(),_.setUpPreloading(),B.init(),_t.resetRootComponentType(ga.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(f.zs3))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();function eQ(o){return o.appInitializer.bind(o)}function SX(o){return o.bootstrapListener.bind(o)}const lH=new f.OlP("Router Initializer");var b0=g(5861);class OX{}class tQ{}class AU{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(i=>{const d=i.indexOf(":");if(d>0){const _=i.slice(0,d),B=_.toLowerCase(),_t=i.slice(d+1).trim();this.maybeSetNormalizedName(_,B),this.headers.has(B)?this.headers.get(B).push(_t):this.headers.set(B,[_t])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(i=>{let d=e[i];const _=i.toLowerCase();"string"==typeof d&&(d=[d]),d.length>0&&(this.headers.set(_,d),this.maybeSetNormalizedName(i,_))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof AU?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){const i=new AU;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof AU?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){const i=e.name.toLowerCase();switch(e.op){case"a":case"s":let d=e.value;if("string"==typeof d&&(d=[d]),0===d.length)return;this.maybeSetNormalizedName(e.name,i);const _=("a"===e.op?this.headers.get(i):void 0)||[];_.push(...d),this.headers.set(i,_);break;case"d":const B=e.value;if(B){let _t=this.headers.get(i);if(!_t)return;_t=_t.filter(ga=>-1===B.indexOf(ga)),0===_t.length?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,_t)}else this.headers.delete(i),this.normalizedNames.delete(i)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}}class dH{encodeKey(e){return Sie(e)}encodeValue(e){return Sie(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const B5=/%(\d[a-f0-9])/gi,NX={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Sie(o){return encodeURIComponent(o).replace(B5,(e,i)=>{var d;return null!==(d=NX[i])&&void 0!==d?d:e})}function pM(o){return`${o}`}class PP{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dH,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function DX(o,e){const i=new Map;return o.length>0&&o.replace(/^\?/,"").split("&").forEach(_=>{const B=_.indexOf("="),[_t,ga]=-1==B?[e.decodeKey(_),""]:[e.decodeKey(_.slice(0,B)),e.decodeValue(_.slice(B+1))],_h=i.get(_t)||[];_h.push(ga),i.set(_t,_h)}),i}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{const d=e.fromObject[i];this.map.set(i,Array.isArray(d)?d:[d])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){const i=[];return Object.keys(e).forEach(d=>{const _=e[d];Array.isArray(_)?_.forEach(B=>{i.push({param:d,value:B,op:"a"})}):i.push({param:d,value:_,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const i=this.encoder.encodeKey(e);return this.map.get(e).map(d=>i+"="+this.encoder.encodeValue(d)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const i=new PP({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const i=("a"===e.op?this.map.get(e.param):void 0)||[];i.push(pM(e.value)),this.map.set(e.param,i);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let d=this.map.get(e.param)||[];const _=d.indexOf(pM(e.value));-1!==_&&d.splice(_,1),d.length>0?this.map.set(e.param,d):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class _U{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function QN(o){return"undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer}function kX(o){return"undefined"!=typeof Blob&&o instanceof Blob}function hH(o){return"undefined"!=typeof FormData&&o instanceof FormData}class TL{constructor(e,i,d,_){let B;if(this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function QY(o){switch(o){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||_?(this.body=void 0!==d?d:null,B=_):B=d,B&&(this.reportProgress=!!B.reportProgress,this.withCredentials=!!B.withCredentials,B.responseType&&(this.responseType=B.responseType),B.headers&&(this.headers=B.headers),B.context&&(this.context=B.context),B.params&&(this.params=B.params)),this.headers||(this.headers=new AU),this.context||(this.context=new _U),this.params){const _t=this.params.toString();if(0===_t.length)this.urlWithParams=i;else{const ga=i.indexOf("?");this.urlWithParams=i+(-1===ga?"?":ga<i.length-1?"&":"")+_t}}else this.params=new PP,this.urlWithParams=i}serializeBody(){return null===this.body?null:QN(this.body)||kX(this.body)||hH(this.body)||function wL(o){return"undefined"!=typeof URLSearchParams&&o instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof PP?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hH(this.body)?null:kX(this.body)?this.body.type||null:QN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof PP?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var i;const d=e.method||this.method,_=e.url||this.url,B=e.responseType||this.responseType,_t=void 0!==e.body?e.body:this.body,ga=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _g=e.headers||this.headers,l_=e.params||this.params;const f_=null!==(i=e.context)&&void 0!==i?i:this.context;return void 0!==e.setHeaders&&(_g=Object.keys(e.setHeaders).reduce((R_,V_)=>R_.set(V_,e.setHeaders[V_]),_g)),e.setParams&&(l_=Object.keys(e.setParams).reduce((R_,V_)=>R_.set(V_,e.setParams[V_]),l_)),new TL(d,_,_t,{params:l_,headers:_g,context:f_,reportProgress:_h,responseType:B,withCredentials:ga})}}var YS=(()=>((YS=YS||{})[YS.Sent=0]="Sent",YS[YS.UploadProgress=1]="UploadProgress",YS[YS.ResponseHeader=2]="ResponseHeader",YS[YS.DownloadProgress=3]="DownloadProgress",YS[YS.Response=4]="Response",YS[YS.User=5]="User",YS))();class nQ{constructor(e,i=200,d="OK"){this.headers=e.headers||new AU,this.status=void 0!==e.status?e.status:i,this.statusText=e.statusText||d,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class rQ extends nQ{constructor(e={}){super(e),this.type=YS.ResponseHeader}clone(e={}){return new rQ({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iQ extends nQ{constructor(e={}){super(e),this.type=YS.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new iQ({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class HY extends nQ{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fH(o,e){return{body:e,headers:o.headers,context:o.context,observe:o.observe,params:o.params,reportProgress:o.reportProgress,responseType:o.responseType,withCredentials:o.withCredentials}}let t1=(()=>{class o{constructor(i){this.handler=i}request(i,d,_={}){let B;if(i instanceof TL)B=i;else{let _h,_g;_h=_.headers instanceof AU?_.headers:new AU(_.headers),_.params&&(_g=_.params instanceof PP?_.params:new PP({fromObject:_.params})),B=new TL(i,d,void 0!==_.body?_.body:null,{headers:_h,context:_.context,params:_g,reportProgress:_.reportProgress,responseType:_.responseType||"json",withCredentials:_.withCredentials})}const _t=mI(B).pipe(LO(_h=>this.handler.handle(_h)));if(i instanceof TL||"events"===_.observe)return _t;const ga=_t.pipe(zS(_h=>_h instanceof iQ));switch(_.observe||"body"){case"body":switch(B.responseType){case"arraybuffer":return ga.pipe((0,RI.U)(_h=>{if(null!==_h.body&&!(_h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _h.body}));case"blob":return ga.pipe((0,RI.U)(_h=>{if(null!==_h.body&&!(_h.body instanceof Blob))throw new Error("Response is not a Blob.");return _h.body}));case"text":return ga.pipe((0,RI.U)(_h=>{if(null!==_h.body&&"string"!=typeof _h.body)throw new Error("Response is not a string.");return _h.body}));default:return ga.pipe((0,RI.U)(_h=>_h.body))}case"response":return ga;default:throw new Error(`Unreachable: unhandled observe type ${_.observe}}`)}}delete(i,d={}){return this.request("DELETE",i,d)}get(i,d={}){return this.request("GET",i,d)}head(i,d={}){return this.request("HEAD",i,d)}jsonp(i,d){return this.request("JSONP",i,{params:(new PP).append(d,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,d={}){return this.request("OPTIONS",i,d)}patch(i,d,_={}){return this.request("PATCH",i,fH(_,d))}post(i,d,_={}){return this.request("POST",i,fH(_,d))}put(i,d,_={}){return this.request("PUT",i,fH(_,d))}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(OX))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();class pH{constructor(e,i){this.next=e,this.interceptor=i}handle(e){return this.interceptor.intercept(e,this.next)}}const qY=new f.OlP("HTTP_INTERCEPTORS");let gH=(()=>{class o{intercept(i,d){return d.handle(i)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();const U5=/^\)\]\}',?\n/;let WY=(()=>{class o{constructor(i){this.xhrFactory=i}handle(i){if("JSONP"===i.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new UT.y(d=>{const _=this.xhrFactory.build();if(_.open(i.method,i.urlWithParams),i.withCredentials&&(_.withCredentials=!0),i.headers.forEach((V_,Y_)=>_.setRequestHeader(V_,Y_.join(","))),i.headers.has("Accept")||_.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){const V_=i.detectContentTypeHeader();null!==V_&&_.setRequestHeader("Content-Type",V_)}if(i.responseType){const V_=i.responseType.toLowerCase();_.responseType="json"!==V_?V_:"text"}const B=i.serializeBody();let _t=null;const ga=()=>{if(null!==_t)return _t;const V_=_.statusText||"OK",Y_=new AU(_.getAllResponseHeaders()),R0=function ode(o){return"responseURL"in o&&o.responseURL?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):null}(_)||i.url;return _t=new rQ({headers:Y_,status:_.status,statusText:V_,url:R0}),_t},_h=()=>{let{headers:V_,status:Y_,statusText:R0,url:V0}=ga(),J0=null;204!==Y_&&(J0=void 0===_.response?_.responseText:_.response),0===Y_&&(Y_=J0?200:0);let MI=Y_>=200&&Y_<300;if("json"===i.responseType&&"string"==typeof J0){const LI=J0;J0=J0.replace(U5,"");try{J0=""!==J0?JSON.parse(J0):null}catch(DI){J0=LI,MI&&(MI=!1,J0={error:DI,text:J0})}}MI?(d.next(new iQ({body:J0,headers:V_,status:Y_,statusText:R0,url:V0||void 0})),d.complete()):d.error(new HY({error:J0,headers:V_,status:Y_,statusText:R0,url:V0||void 0}))},_g=V_=>{const{url:Y_}=ga(),R0=new HY({error:V_,status:_.status||0,statusText:_.statusText||"Unknown Error",url:Y_||void 0});d.error(R0)};let l_=!1;const f_=V_=>{l_||(d.next(ga()),l_=!0);let Y_={type:YS.DownloadProgress,loaded:V_.loaded};V_.lengthComputable&&(Y_.total=V_.total),"text"===i.responseType&&!!_.responseText&&(Y_.partialText=_.responseText),d.next(Y_)},R_=V_=>{let Y_={type:YS.UploadProgress,loaded:V_.loaded};V_.lengthComputable&&(Y_.total=V_.total),d.next(Y_)};return _.addEventListener("load",_h),_.addEventListener("error",_g),_.addEventListener("timeout",_g),_.addEventListener("abort",_g),i.reportProgress&&(_.addEventListener("progress",f_),null!==B&&_.upload&&_.upload.addEventListener("progress",R_)),_.send(B),d.next({type:YS.Sent}),()=>{_.removeEventListener("error",_g),_.removeEventListener("abort",_g),_.removeEventListener("load",_h),_.removeEventListener("timeout",_g),i.reportProgress&&(_.removeEventListener("progress",f_),null!==B&&_.upload&&_.upload.removeEventListener("progress",R_)),_.readyState!==_.DONE&&_.abort()}})}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(tT))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})();const xX=new f.OlP("XSRF_COOKIE_NAME"),HN=new f.OlP("XSRF_HEADER_NAME");class oQ{}let sQ=(()=>{class o{constructor(i,d,_){this.doc=i,this.platform=d,this.cookieName=_,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=qL(i,this.cookieName),this.lastCookieString=i),this.lastToken}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l),f.LFG(f.Lbi),f.LFG(xX))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),AV=(()=>{class o{constructor(i,d){this.tokenService=i,this.headerName=d}intercept(i,d){const _=i.url.toLowerCase();if("GET"===i.method||"HEAD"===i.method||_.startsWith("http://")||_.startsWith("https://"))return d.handle(i);const B=this.tokenService.getToken();return null!==B&&!i.headers.has(this.headerName)&&(i=i.clone({headers:i.headers.set(this.headerName,B)})),d.handle(i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(oQ),f.LFG(HN))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),aQ=(()=>{class o{constructor(i,d){this.backend=i,this.injector=d,this.chain=null}handle(i){if(null===this.chain){const d=this.injector.get(qY,[]);this.chain=d.reduceRight((_,B)=>new pH(_,B),this.backend)}return this.chain.handle(i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(tQ),f.LFG(f.zs3))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac}),o})(),_H=(()=>{class o{static disable(){return{ngModule:o,providers:[{provide:AV,useClass:gH}]}}static withOptions(i={}){return{ngModule:o,providers:[i.cookieName?{provide:xX,useValue:i.cookieName}:[],i.headerName?{provide:HN,useValue:i.headerName}:[]]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:[AV,{provide:qY,useExisting:AV,multi:!0},{provide:oQ,useClass:sQ},{provide:xX,useValue:"XSRF-TOKEN"},{provide:HN,useValue:"X-XSRF-TOKEN"}]}),o})(),LX=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:[t1,{provide:OX,useClass:aQ},WY,{provide:tQ,useExisting:WY}],imports:[[_H.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),o})();var kie=g(3890),F5=g.n(kie);function mM(o,e){return{type:7,name:o,definitions:e,options:{}}}function vH(o,e=null){return{type:4,styles:e,timings:o}}function MX(o){return{type:6,styles:o,offset:null}}function BX(o,e,i){return{type:0,name:o,styles:e,options:i}}function Lie(o,e,i=null){return{type:1,expr:o,animation:e,options:i}}const yH=["toast-component",""];function KY(o,e){if(1&o){const i=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(i),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA()()}}function LS(o,e){if(1&o&&(f.ynx(0),f._uU(1),f.BQk()),2&o){const i=f.oxw(2);f.xp6(1),f.hij("[",i.duplicatesCount+1,"]")}}function j3(o,e){if(1&o&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,LS,2,1,"ng-container",4),f.qZA()),2&o){const i=f.oxw();f.Tol(i.options.titleClass),f.uIk("aria-label",i.title),f.xp6(1),f.hij(" ",i.title," "),f.xp6(1),f.Q6J("ngIf",i.duplicatesCount)}}function zY(o,e){if(1&o&&f._UZ(0,"div",7),2&o){const i=f.oxw();f.Tol(i.options.messageClass),f.Q6J("innerHTML",i.message,f.oJD)}}function UX(o,e){if(1&o&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&o){const i=f.oxw();f.Tol(i.options.messageClass),f.uIk("aria-label",i.message),f.xp6(1),f.hij(" ",i.message," ")}}function YY(o,e){if(1&o&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&o){const i=f.oxw();f.xp6(1),f.Udp("width",i.width+"%")}}function Uie(o,e){if(1&o){const i=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(i),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA()()}}function FX(o,e){if(1&o&&(f.ynx(0),f._uU(1),f.BQk()),2&o){const i=f.oxw(2);f.xp6(1),f.hij("[",i.duplicatesCount+1,"]")}}function Fie(o,e){if(1&o&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,FX,2,1,"ng-container",4),f.qZA()),2&o){const i=f.oxw();f.Tol(i.options.titleClass),f.uIk("aria-label",i.title),f.xp6(1),f.hij(" ",i.title," "),f.xp6(1),f.Q6J("ngIf",i.duplicatesCount)}}function jie(o,e){if(1&o&&f._UZ(0,"div",7),2&o){const i=f.oxw();f.Tol(i.options.messageClass),f.Q6J("innerHTML",i.message,f.oJD)}}function lQ(o,e){if(1&o&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&o){const i=f.oxw();f.Tol(i.options.messageClass),f.uIk("aria-label",i.message),f.xp6(1),f.hij(" ",i.message," ")}}function j5(o,e){if(1&o&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&o){const i=f.oxw();f.xp6(1),f.Udp("width",i.width+"%")}}class vV{constructor(e,i){this.component=e,this.injector=i}attach(e,i){return this._attachedHost=e,e.attach(this,i)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Q5{constructor(e,i,d,_,B,_t){this.toastId=e,this.config=i,this.message=d,this.title=_,this.toastType=B,this.toastRef=_t,this._onTap=new BT.x,this._onAction=new BT.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const JY={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},hQ=new f.OlP("ToastConfig");class $Y{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new BT.x,this._activate=new BT.x,this._manualClose=new BT.x,this._resetTimeout=new BT.x,this._countDuplicate=new BT.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,i){e&&this._resetTimeout.next(),i&&this._countDuplicate.next(++this.duplicatesCount)}}class ZY{constructor(e,i){this._toastPackage=e,this._parentInjector=i}get(e,i,d){return e===Q5?this._toastPackage:this._parentInjector.get(e,i,d)}}class jX extends class G5{attach(e,i){return this._attachedPortal=e,this.attachComponentPortal(e,i)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,i,d){super(),this._hostDomElement=e,this._componentFactoryResolver=i,this._appRef=d}attachComponentPortal(e,i){const d=this._componentFactoryResolver.resolveComponentFactory(e.component);let _;return _=d.create(e.injector),this._appRef.attachView(_.hostView),this.setDisposeFn(()=>{this._appRef.detachView(_.hostView),_.destroy()}),i?this._hostDomElement.insertBefore(this._getComponentRootNode(_),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(_)),_}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class EH{constructor(e){this._portalHost=e}attach(e,i=!0){return this._portalHost.attach(e,i)}detach(){return this._portalHost.detach()}}let Vie=(()=>{class o{constructor(i){this._document=i}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i=this._document.createElement("div");i.classList.add("overlay-container"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),this._containerElement=i}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),VX=(()=>{class o{constructor(i,d,_,B){this._overlayContainer=i,this._componentFactoryResolver=d,this._appRef=_,this._document=B,this._paneElements=new Map}create(i,d){return this._createOverlayRef(this.getPaneElement(i,d))}getPaneElement(i="",d){return this._paneElements.get(d)||this._paneElements.set(d,{}),this._paneElements.get(d)[i]||(this._paneElements.get(d)[i]=this._createPaneElement(i,d)),this._paneElements.get(d)[i]}_createPaneElement(i,d){const _=this._document.createElement("div");return _.id="toast-container",_.classList.add(i),_.classList.add("toast-container"),d?d.getContainerElement().appendChild(_):this._overlayContainer.getContainerElement().appendChild(_),_}_createPortalHost(i){return new jX(i,this._componentFactoryResolver,this._appRef)}_createOverlayRef(i){return new EH(this._createPortalHost(i))}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(Vie),f.LFG(f._Vd),f.LFG(f.z2F),f.LFG(_l))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),XY=(()=>{class o{constructor(i,d,_,B,_t){this.overlay=d,this._injector=_,this.sanitizer=B,this.ngZone=_t,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},i.default),i.config),i.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},i.default.iconClasses),i.config.iconClasses))}show(i,d,_={},B=""){return this._preBuildNotification(B,i,d,this.applyConfig(_))}success(i,d,_={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",i,d,this.applyConfig(_))}error(i,d,_={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",i,d,this.applyConfig(_))}info(i,d,_={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",i,d,this.applyConfig(_))}warning(i,d,_={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",i,d,this.applyConfig(_))}clear(i){for(const d of this.toasts)if(void 0!==i){if(d.toastId===i)return void d.toastRef.manualClose()}else d.toastRef.manualClose()}remove(i){const d=this._findToast(i);if(!d||(d.activeToast.toastRef.close(),this.toasts.splice(d.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const _=this.toasts[this.currentlyActive].toastRef;_.isInactive()||(this.currentlyActive=this.currentlyActive+1,_.activate())}return!0}findDuplicate(i="",d="",_,B){const{includeTitleDuplicates:_t}=this.toastrConfig;for(const ga of this.toasts){const _h=_t&&ga.title===i;if((!_t||_h)&&ga.message===d)return ga.toastRef.onDuplicate(_,B),ga}return null}applyConfig(i={}){return Object.assign(Object.assign({},this.toastrConfig),i)}_findToast(i){for(let d=0;d<this.toasts.length;d++)if(this.toasts[d].toastId===i)return{index:d,activeToast:this.toasts[d]};return null}_preBuildNotification(i,d,_,B){return B.onActivateTick?this.ngZone.run(()=>this._buildNotification(i,d,_,B)):this._buildNotification(i,d,_,B)}_buildNotification(i,d,_,B){if(!B.toastComponent)throw new Error("toastComponent required");const _t=this.findDuplicate(_,d,this.toastrConfig.resetTimeoutOnDuplicate&&B.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&_||d)&&this.toastrConfig.preventDuplicates&&null!==_t)return _t;this.previousToastMessage=d;let ga=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(ga=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _h=this.overlay.create(B.positionClass,this.overlayContainer);this.index=this.index+1;let _g=d;d&&B.enableHtml&&(_g=this.sanitizer.sanitize(f.q3G.HTML,d));const l_=new $Y(_h),f_=new Q5(this.index,B,_g,_,i,l_),R_=new ZY(f_,this._injector),V_=new vV(B.toastComponent,R_),Y_=_h.attach(V_,this.toastrConfig.newestOnTop);l_.componentInstance=Y_.instance;const R0={toastId:this.index,title:_||"",message:d||"",toastRef:l_,onShown:l_.afterActivate(),onHidden:l_.afterClosed(),onTap:f_.onTap(),onAction:f_.onAction(),portal:Y_};return ga||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{R0.toastRef.activate()})),this.toasts.push(R0),R0}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(hQ),f.LFG(VX),f.LFG(f.zs3),f.LFG(d5),f.LFG(f.R0b))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),GX=(()=>{class o{constructor(i,d,_){this.toastrService=i,this.toastPackage=d,this.ngZone=_,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=d.message,this.title=d.title,this.options=d.config,this.originalTimeout=d.config.timeOut,this.toastClasses=`${d.toastType} ${d.config.toastClass}`,this.sub=d.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=d.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=d.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=d.toastRef.countDuplicate().subscribe(B=>{this.duplicatesCount=B})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const i=(new Date).getTime();this.width=(this.hideTime-i)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(i,d){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(i),d)):this.timeout=setTimeout(()=>i(),d)}outsideInterval(i,d){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(i),d)):this.intervalId=setInterval(()=>i(),d)}runInsideAngular(i){this.ngZone?this.ngZone.run(()=>i()):i()}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(XY),f.Y36(Q5),f.Y36(f.R0b))},o.\u0275cmp=f.Xpm({type:o,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,d){1&i&&f.NdJ("click",function(){return d.tapToast()})("mouseenter",function(){return d.stickAround()})("mouseleave",function(){return d.delayedHideToast()}),2&i&&(f.d8E("@flyInOut",d.state),f.Tol(d.toastClasses),f.Udp("display",d.displayStyle))},attrs:yH,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,d){1&i&&(f.YNc(0,KY,3,0,"button",0),f.YNc(1,j3,3,5,"div",1),f.YNc(2,zY,1,3,"div",2),f.YNc(3,UX,2,4,"div",3),f.YNc(4,YY,2,2,"div",4)),2&i&&(f.Q6J("ngIf",d.options.closeButton),f.xp6(1),f.Q6J("ngIf",d.title),f.xp6(1),f.Q6J("ngIf",d.message&&d.options.enableHtml),f.xp6(1),f.Q6J("ngIf",d.message&&!d.options.enableHtml),f.xp6(1),f.Q6J("ngIf",d.options.progressBar))},directives:[WT],encapsulation:2,data:{animation:[mM("flyInOut",[BX("inactive",MX({opacity:0})),BX("active",MX({opacity:1})),BX("removed",MX({opacity:0})),Lie("inactive => active",vH("{{ easeTime }}ms {{ easing }}")),Lie("active => removed",vH("{{ easeTime }}ms {{ easing }}"))])]}}),o})();const eJ=Object.assign(Object.assign({},JY),{toastComponent:GX});let Gie=(()=>{class o{static forRoot(i={}){return{ngModule:o,providers:[{provide:hQ,useValue:{default:eJ,config:i}}]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({imports:[[sL]]}),o})(),Hie=(()=>{class o{constructor(i,d,_){this.toastrService=i,this.toastPackage=d,this.appRef=_,this.width=-1,this.toastClasses="",this.state="inactive",this.message=d.message,this.title=d.title,this.options=d.config,this.originalTimeout=d.config.timeOut,this.toastClasses=`${d.toastType} ${d.config.toastClass}`,this.sub=d.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=d.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=d.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=d.toastRef.countDuplicate().subscribe(B=>{this.duplicatesCount=B})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const i=(new Date).getTime();this.width=(this.hideTime-i)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(XY),f.Y36(Q5),f.Y36(f.z2F))},o.\u0275cmp=f.Xpm({type:o,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,d){1&i&&f.NdJ("click",function(){return d.tapToast()})("mouseenter",function(){return d.stickAround()})("mouseleave",function(){return d.delayedHideToast()}),2&i&&(f.Tol(d.toastClasses),f.Udp("display",d.displayStyle))},attrs:yH,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,d){1&i&&(f.YNc(0,Uie,3,0,"button",0),f.YNc(1,Fie,3,5,"div",1),f.YNc(2,jie,1,3,"div",2),f.YNc(3,lQ,2,4,"div",3),f.YNc(4,j5,2,2,"div",4)),2&i&&(f.Q6J("ngIf",d.options.closeButton),f.xp6(1),f.Q6J("ngIf",d.title),f.xp6(1),f.Q6J("ngIf",d.message&&d.options.enableHtml),f.xp6(1),f.Q6J("ngIf",d.message&&!d.options.enableHtml),f.xp6(1),f.Q6J("ngIf",d.options.progressBar))},directives:[WT],encapsulation:2}),o})();const fQ=Object.assign(Object.assign({},JY),{toastComponent:Hie});let x2=(()=>{class o{static forRoot(i={}){return{ngModule:o,providers:[{provide:hQ,useValue:{default:fQ,config:i}}]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({imports:[[sL]]}),o})(),IH=(()=>{class o{constructor(i,d){this.router=i,this.toastr=d,this.rtc={client:null,localAudioTrack:null,localVideoTrack:null},this.options={appId:"65cfadb6ee9d42f4977b6eafb18b3d71",channel:"test"},this.remoteUsers=[],this.updateUserInfo=new KR(null),this.getMediaStatus=new KR(null)}createRTCClient(){this.rtc.client=F5().createClient({mode:"rtc",codec:"h264"})}agoraServerEvents(){var i=this;this.rtc.client.on("user-published",function(){var d=(0,b0.Z)(function*(_,B){if(yield i.rtc.client.subscribe(_,B),i.media=B,console.log("subscribe success"),i.getMediaStatus.next(!0),"video"===B){const _t=_.videoTrack;i.playerContainer=document.getElementById("remote-player"),i.playerContainer.id=_.uid.toString(),i.playerContainer.style.margin="25px",document.body.append(i.playerContainer),console.log(i.playerContainer),_t.play(i.playerContainer),i.rtc.localAudioTrack=yield F5().createMicrophoneAudioTrack(),i.rtc.localVideoTrack=yield F5().createCameraVideoTrack({encoderConfig:"720p"}),i.rtc.localVideoTrack.play("local-player"),yield i.rtc.client.publish([i.rtc.localAudioTrack,i.rtc.localVideoTrack])}"audio"===B&&(_.audioTrack.play(),i.rtc.localAudioTrack=yield F5().createMicrophoneAudioTrack(),yield i.rtc.client.publish([i.rtc.localAudioTrack]))});return function(_,B){return d.apply(this,arguments)}}()),this.rtc.client.on("user-unpublished",d=>{console.log(d,"user-unpublished")}),this.rtc.client.on("connection-state-change",(d,_)=>{console.log("current",d,"prev",_,"event")}),this.rtc.client.on("user-Joined",d=>{let _=d.id;this.remoteUsers.push({uid:+_}),this.updateUserInfo.next(_),console.log("user-Joined",d,this.remoteUsers,"event1")}),this.rtc.client.on("channel-media-relay-event",d=>{console.log("channel-media-relay-event",d,"event2")}),this.rtc.client.on("user-left",d=>{console.log("user-left",d,"event3"),this.toastr.error("user-left","",{timeOut:3e3}),this.leaveCall()}),this.rtc.client.on("channel-media-relay-state",d=>{console.log("channel-media-relay-state",d,"event4")}),this.rtc.client.on("crypt-error",d=>{console.log("crypt-error",d,"event5")}),this.rtc.client.on("exception",d=>{console.log("exception",d,"event6")}),this.rtc.client.on("live-streamig-error",d=>{console.log("live-streamig-error",d,"event7")}),this.rtc.client.on("live-streamig-warning",d=>{console.log("live-streamig-warning",d,"event8")}),this.rtc.client.on("exception",d=>{console.log("exception",d,"event9")}),this.rtc.client.on("media-reconnect-end",d=>{console.log("media-reconnect-end",d,"event10")}),this.rtc.client.on("network-quality",d=>{}),this.rtc.client.on("stream-fallback",d=>{console.log("stream-fallback",d,"event12")}),this.rtc.client.on("stream-type-changed",d=>{console.log("stream-type-changed",d,"event13")}),this.rtc.client.on("token-privilage-did-expire",d=>{console.log("token-privilage-did-expire",d,"event14")}),this.rtc.client.on("token-privilage-will-expire",d=>{console.log("token-privilage-will-expire",d,"event15")}),this.rtc.client.on("volume-indicator",d=>{console.log("volume-indicator",d,"event16")}),this.rtc.client.on("trace-ended",d=>{console.log("trace-ended",d,"event17")})}leaveCall(){var i=this;return(0,b0.Z)(function*(){"audio"==i.media&&i.rtc&&i.rtc.localAudioTrack&&(i.rtc.localAudioTrack.close(),yield i.rtc.client.leave(function(){console.log("Leave channel successfully")},function(d){console.log("Leave channel failed")})),"video"==i.media&&i.rtc&&i.rtc.localAudioTrack&&i.rtc.localVideoTrack&&(console.log("history"),i.rtc.localAudioTrack.close(),i.rtc.localVideoTrack.close(),i.playerContainer.remove(),yield i.rtc.client.leave(function(){console.log("Leave channel successfully")},function(d){console.log("Leave channel failed")})),i.media="",i.getMediaStatus.next(!1),i.router.navigate(["/user"])})()}handleEvents(){this.rtc.client.on("error",i=>{console.log(i)}),this.rtc.client.on("peer-leave",i=>{console.log("peer-leave",i.uid)}),this.rtc.client.on("stream-published",i=>{console.log("stream-published")}),this.rtc.client.on("stream-added",i=>{var _=i.stream.getId();console.log("remoteStream",_),console.log("stream-added remote-uid: ")}),this.rtc.client.on("stream-subscribed",i=>{const d=i.stream,_=d.getId();d.play("remote_video_"+_,{fit:"cover"}),console.log("stream-subscribed remote-uid: ",_)}),this.rtc.client.on("stream-removed",i=>{const d=i.stream,_=d.getId();d.stop("remote_video_"+_),console.log("stream-removed remote-uid: ",_)}),this.rtc.client.on("onTokenPrivilegeWillExpire",()=>{console.log("onTokenPrivilegeWillExpire")}),this.rtc.client.on("onTokenPrivilegeDidExpire",()=>{console.log("onTokenPrivilegeDidExpire")}),this.rtc.client.on("liveStreamingStarted",i=>{console.log("liveStreamingStarted",i)}),this.rtc.client.on("liveStreamingFailed",i=>{console.log("liveStreamingFailed",i)}),this.rtc.client.on("liveStreamingStopped",i=>{console.log("liveStreamingStopped",i)}),this.rtc.client.on("liveTranscodingUpdated",i=>{console.log("liveTranscodingUpdated",i)})}join(i){var d=this;return(0,b0.Z)(function*(){d.createRTCClient(),yield d.rtc.client.join(d.options.appId,i,null,1234),d.agoraServerEvents()})()}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(lS),f.LFG(XY))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),QX=(()=>{class o{constructor(i){this.http=i}getRequest(i,d={}){return this.http.get(i,{params:d}).pipe((0,RI.U)(_=>_),cR(_=>this.handleError(_)))}handleError(i){return yP(i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(t1))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var lde=g(3528),qie=g.n(lde);let bH=(()=>{class o{constructor(i,d,_){this.router=i,this.streamService=d,this.toastr=_,this._invitation=null,this._token=void 0,this.getStatus=new KR(null),this.getRoomCode=(B,_t)=>{let ga="";return ga=B+_t,ga}}createRTMClient(){return this.rtmclient=qie().createInstance("65cfadb6ee9d42f4977b6eafb18b3d71"),this.rtmclient}signalLogin(i){return this.rtmclient.login({token:this._token,uid:i}).then(()=>{console.log("status online")})}SignalLogout(i){return(0,b0.Z)(function*(){yield i.logout()})()}inquire(i){return this.rtmclient.queryPeersOnlineStatus(i)}RTMevents(i){i.on("ConnectionStateChanged",(d,_)=>{console.log("on connection state changed to"+d+"reason: "+_)}),i.on("MessageFromPeer",(d,_)=>{this.receivedMessage(d,_)}),i.on("PeersOnlineStatusChanged",d=>{console.log("PeersOnlineStatusChanged",d)})}receivedMessage(i,d){console.log(i,d,"MessageFromPeer"),"TEXT"===i.messageType&&this.setCurrentMessage({message:i.text,user:d})}receiveChannelMessage(i,d){i.on("ChannelMessage",(_,B,_t)=>{this.handleMessageReceived(_,B,_t,d)}),i.on("MemberJoined",_=>{console.log(_,"MemberJoined")}),i.on("MemberLeft",_=>{console.log("MemberLeft",_)})}handleMessageReceived(i,d,_,B){var _t=this;return(0,b0.Z)(function*(){const ga=yield B.getUserAttributes(d);console.log(i,d,_,ga,"channelmsg"),"TEXT"===i.messageType&&_t.setCurrentMessage({user:ga,message:i.text})})()}setCurrentMessage(i){console.log(i,"setCuurentMessage"),alert(i.message)}localInvitation(i,d){this._invitation=this.rtmclient.createLocalInvitation(i),this._invitation.on("LocalInvitationReceivedByPeer",()=>{console.log("Peers receive calls")}),this._invitation.on("LocalInvitationCanceled",()=>{console.log("Cancel call invitation")}),this._invitation.on("LocalInvitationAccepted",()=>{console.log("Peers accept invitations to call"),this.getStatus.next(!0),this.streamService.join(d)}),this._invitation.on("LocalInvitationRefused",()=>{console.log("Peers refuse to call invitations"),this.toastr.error("Peer refused to call invitations","",{timeOut:3e3}),this.getStatus.next(!1),this.router.navigate(["/user"])}),this._invitation.on("LocalInvitationFailure",()=>{console.log("Call process failed"),this.getStatus.next(!1)}),this._invitation.content=d,this._invitation.send()}createRtmChannel(i){return i.createChannel("test")}joinChannel(i){return(0,b0.Z)(function*(){yield i.join()})()}setLocalAttributes(i,d){return(0,b0.Z)(function*(){yield i.setLocalUserAttributes({name:d})})()}sendMessageChannel(i){i.sendMessage({text:"test channel message"}).then(()=>{console.log("test")})}leaveChannel(i,d){return(0,b0.Z)(function*(){d&&(yield d.leave()),i&&(yield i.logout())})()}sentOneToOneMessage(i,d){i.sendMessageToPeer({text:"test peer message"},d).then(_=>{_.hasPeerReceived&&console.log(_,"sendMessageToPeer")})}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(lS),f.LFG(IH),f.LFG(XY))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function dde(o,e){1&o&&(f.TgZ(0,"div"),f._uU(1,"Calling..."),f.qZA())}let Wie=(()=>{class o{constructor(i,d,_,B,_t){var ga=this;this.stream=i,this.api=d,this.message=_,this.router=B,this.route=_t,this.userName="",this.hideBtns=!0,this.callingStatus=!1,this.stream.updateUserInfo.subscribe(function(){var _h=(0,b0.Z)(function*(_g){if(_g){const l_=yield ga.message.rtmclient.getUserAttributes(_g.toString());for(let f_=0;f_<ga.stream.remoteUsers.length;f_++){const R_=ga.stream.remoteUsers[f_];R_.uid==_g&&(R_.name=l_.name)}}});return function(_g){return _h.apply(this,arguments)}}())}ngOnInit(){var i=this;this.id=this.route.snapshot.paramMap.get("id"),this.userName=this.route.snapshot.paramMap.get("username"),console.log("routeid",this.id),console.log("username",this.userName),this.startCall(),this.route.params.subscribe(d=>{console.log("value ",d)}),this.message.getStatus.subscribe(function(){var d=(0,b0.Z)(function*(_){i.callingStatus=_});return function(_){return d.apply(this,arguments)}}()),this.stream.getMediaStatus.subscribe(function(){var d=(0,b0.Z)(function*(_){i.callingStatus=_});return function(_){return d.apply(this,arguments)}}())}startCall(){var i=this;return(0,b0.Z)(function*(){i.myId=1234,yield i.generateTokenAndUid(i.myId),yield i.rtmUserLogin(i.myId),i.hideBtns=!1,i.callPeer()})()}generateTokenAndUid(i){var d=this;return(0,b0.Z)(function*(){const B={params:new PP({fromString:"channel=test&uid="+i})},_t=yield d.api.getRequest("https://test-agora.herokuapp.com/access_token?",B.params).toPromise();return{uid:i,token:_t.token}})()}generateRtmTokenAndUid(i){var d=this;return(0,b0.Z)(function*(){const B={params:new PP({fromString:"account="+i})},_t=yield d.api.getRequest("https://sharp-pouncing-grass.glitch.me/rtmToken?",B.params).toPromise();return{uid:i,token:_t.key}})()}generateUid(){return Math.floor(Math.pow(10,3)+9*Math.random()*Math.pow(10,3))}rtmUserLogin(i){var d=this;return(0,b0.Z)(function*(){d.message.rtmclient=d.message.createRTMClient(),yield d.message.signalLogin(i.toString()),d.message.RTMevents(d.message.rtmclient)})()}callPeer(){const i=this.id;this.message.inquire([i]).then(d=>{if(d[i]){console.log("peer",i,"is online");let _=this.message.getRoomCode(this.myId,i);console.log("room",_+"Audio"),this.message.localInvitation(i,_+"Audio[Front Door]DoorID943")}}).catch(()=>{console.log("The query failed")})}leaveCall(){this.stream.leaveCall()}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(IH),f.Y36(QX),f.Y36(bH),f.Y36(lS),f.Y36(sN))},o.\u0275cmp=f.Xpm({type:o,selectors:[["app-audio"]],decls:20,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[2,"margin-left","24px","margin-top","20px"],[2,"display","flex","align-items","center"],["type","button",1,"btn",2,"color","#0f1012","background-color","rgb(130, 154, 169)",3,"click"],[1,"container-fluid",2,"text-align","center","margin-top","200px"],[1,"fa-regular","fa-user",2,"font-size","19rem","color","#183153","box-shadow","0 5px 10px 0 #B0C1D9"],[2,"margin-top","20px","font-weight","bolder"],[4,"ngIf"],["id","local-player",1,"player",2,"height","200px","width","200px"]],template:function(i,d){1&i&&(f.TgZ(0,"html",0)(1,"head"),f._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),f.TgZ(5,"title"),f._uU(6,"POC Audio"),f.qZA()(),f.TgZ(7,"body")(8,"div",4)(9,"div",5)(10,"button",6),f.NdJ("click",function(){return d.leaveCall()}),f._uU(11," Leave "),f.qZA()(),f.TgZ(12,"div",7),f._UZ(13,"i",8),f.TgZ(14,"h3",9),f._uU(15,"Visitor"),f.qZA(),f.YNc(16,dde,2,0,"div",10),f._UZ(17,"div",11),f.TgZ(18,"p"),f._uU(19),f.qZA()()()()()),2&i&&(f.xp6(16),f.Q6J("ngIf",!d.callingStatus),f.xp6(3),f.Oqu(d.userName))},directives:[WT],styles:[".avatar[_ngcontent-%COMP%]{vertical-align:middle;width:115px;height:115px;border-radius:50%}"]}),o})();var xP=g(4986),qN=g(6451),tJ=g(3099);function nJ(o,e=rN.y){return o=null!=o?o:Kie,(0,aS.e)((i,d)=>{let _,B=!0;i.subscribe((0,sS.x)(d,_t=>{const ga=e(_t);(B||!o(_,ga))&&(B=!1,_=ga,d.next(_t))}))})}function Kie(o,e){return o===e}var HX=g(5032),aT=g(5813),bR=g(2011),yV=(g(7092),g(3942)),LP=g(4859),dS=g(9681),M_=g(2090),SL=g(1877);const qX="@firebase/database";let CH="";function WX(o){CH=o}class $ie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){null==i?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,M_.Pz)(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return null==i?null:(0,M_.cI)(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class EV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){null==i?delete this.cache_[e]:this.cache_[e]=i}get(e){return(0,M_.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const IV=function(o){try{if("undefined"!=typeof window&&void 0!==window[o]){const e=window[o];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $ie(e)}}catch(e){}return new EV},bV=IV("localStorage"),rJ=IV("sessionStorage"),vU=new SL.Yd("@firebase/database"),wH=function(){let o=1;return function(){return o++}}(),KX=function(o){const e=(0,M_.dS)(o),i=new M_.gQ;i.update(e);const d=i.digest();return M_.US.encodeByteArray(d)},MP=function(...o){let e="";for(let i=0;i<o.length;i++){const d=o[i];Array.isArray(d)||d&&"object"==typeof d&&"number"==typeof d.length?e+=MP.apply(null,d):e+="object"==typeof d?(0,M_.Pz)(d):d,e+=" "}return e};let yU=null,V3=!0;const zX=function(o,e){(0,M_.hu)(!e||!0===o||!1===o,"Can't turn on custom loggers persistently."),!0===o?(vU.logLevel=SL.in.VERBOSE,yU=vU.log.bind(vU),e&&rJ.set("logging_enabled",!0)):"function"==typeof o?yU=o:(yU=null,rJ.remove("logging_enabled"))},yO=function(...o){if(!0===V3&&(V3=!1,null===yU&&!0===rJ.get("logging_enabled")&&zX(!0)),yU){const e=MP.apply(null,o);yU(e)}},zT=function(o){return function(...e){yO(o,...e)}},YX=function(...o){const e="FIREBASE INTERNAL ERROR: "+MP(...o);vU.error(e)},AM=function(...o){const e=`FIREBASE FATAL ERROR: ${MP(...o)}`;throw vU.error(e),new Error(e)},CR=function(...o){const e="FIREBASE WARNING: "+MP(...o);vU.warn(e)},pQ=function(o){return"number"==typeof o&&(o!=o||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)},XR="[MIN_NAME]",eO="[MAX_NAME]",_M=function(o,e){if(o===e)return 0;if(o===XR||e===eO)return-1;if(e===XR||o===eO)return 1;{const i=RL(o),d=RL(e);return null!==i?null!==d?i-d==0?o.length-e.length:i-d:-1:null!==d?1:o<e?-1:1}},Zie=function(o,e){return o===e?0:o<e?-1:1},gQ=function(o,e){if(e&&o in e)return e[o];throw new Error("Missing required key ("+o+") in object: "+(0,M_.Pz)(e))},ZX=function(o){if("object"!=typeof o||null===o)return(0,M_.Pz)(o);const e=[];for(const d in o)e.push(d);e.sort();let i="{";for(let d=0;d<e.length;d++)0!==d&&(i+=","),i+=(0,M_.Pz)(e[d]),i+=":",i+=ZX(o[e[d]]);return i+="}",i},mQ=function(o,e){const i=o.length;if(i<=e)return[o];const d=[];for(let _=0;_<i;_+=e)d.push(o.substring(_,_+e>i?i:_+e));return d};function wR(o,e){for(const i in o)o.hasOwnProperty(i)&&e(i,o[i])}const TH=function(o){(0,M_.hu)(!pQ(o),"Invalid JSON number");const d=1023;let _,B,_t,ga,_h;0===o?(B=0,_t=0,_=1/o==-1/0?1:0):(_=o<0,(o=Math.abs(o))>=Math.pow(2,1-d)?(ga=Math.min(Math.floor(Math.log(o)/Math.LN2),d),B=ga+d,_t=Math.round(o*Math.pow(2,52-ga)-Math.pow(2,52))):(B=0,_t=Math.round(o/Math.pow(2,-1074))));const _g=[];for(_h=52;_h;_h-=1)_g.push(_t%2?1:0),_t=Math.floor(_t/2);for(_h=11;_h;_h-=1)_g.push(B%2?1:0),B=Math.floor(B/2);_g.push(_?1:0),_g.reverse();const l_=_g.join("");let f_="";for(_h=0;_h<64;_h+=8){let R_=parseInt(l_.substr(_h,8),2).toString(16);1===R_.length&&(R_="0"+R_),f_+=R_}return f_.toLowerCase()},oJ=new RegExp("^-?(0*)\\d{1,10}$"),sJ=-2147483648,RH=2147483647,RL=function(o){if(oJ.test(o)){const e=Number(o);if(e>=sJ&&e<=RH)return e}return null},G3=function(o){try{o()}catch(e){setTimeout(()=>{throw CR("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},AQ=function(o,e){const i=setTimeout(o,e);return"object"==typeof i&&i.unref&&i.unref(),i};class OH{constructor(e,i){this.appName_=e,this.appCheckProvider=i,this.appCheck=null==i?void 0:i.getImmediate({optional:!0}),this.appCheck||null==i||i.get().then(d=>this.appCheck=d)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((i,d)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,d):i(null)},0)})}addTokenChangeListener(e){var i;null===(i=this.appCheckProvider)||void 0===i||i.get().then(d=>d.addTokenListener(e))}notifyForInvalidToken(){CR(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wV{constructor(e,i,d){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=d,this.auth_=null,this.auth_=d.getImmediate({optional:!0}),this.auth_||d.onInit(_=>this.auth_=_)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&"auth/token-not-initialized"===i.code?(yO("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,d)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,d):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',CR(e)}}let BP=(()=>{class o{constructor(i){this.accessToken=i}getToken(i){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(i){i(this.accessToken)}removeTokenChangeListener(i){}notifyForInvalidToken(){}}return o.OWNER="owner",o})();const NH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PH="websocket",vQ="long_polling";class xH{constructor(e,i,d,_,B=!1,_t="",ga=!1){this.secure=i,this.namespace=d,this.webSocketOnly=_,this.nodeAdmin=B,this.persistenceKey=_t,this.includeNamespaceInQueryParams=ga,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bV.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bV.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nee(o,e,i){let d;if((0,M_.hu)("string"==typeof e,"typeof type must == string"),(0,M_.hu)("object"==typeof i,"typeof params must == object"),e===PH)d=(o.secure?"wss://":"ws://")+o.internalHost+"/.ws?";else{if(e!==vQ)throw new Error("Unknown connection type: "+e);d=(o.secure?"https://":"http://")+o.internalHost+"/.lp?"}(function tee(o){return o.host!==o.internalHost||o.isCustomHost()||o.includeNamespaceInQueryParams})(o)&&(i.ns=o.namespace);const _=[];return wR(i,(B,_t)=>{_.push(B+"="+_t)}),d+_.join("&")}class eoe{constructor(){this.counters_={}}incrementCounter(e,i=1){(0,M_.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return(0,M_.p$)(this.counters_)}}const cJ={},uJ={};function LH(o){const e=o.toString();return cJ[e]||(cJ[e]=new eoe),cJ[e]}class ree{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const d=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<d.length;++_)d[_]&&G3(()=>{this.onMessage_(d[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class EU{constructor(e,i,d,_,B,_t,ga){this.connId=e,this.repoInfo=i,this.applicationId=d,this.appCheckToken=_,this.authToken=B,this.transportSessionId=_t,this.lastSessionId=ga,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zT(e),this.stats_=LH(i),this.urlFn=_h=>(this.appCheckToken&&(_h.ac=this.appCheckToken),nee(i,vQ,_h))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new ree(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(o){if((0,M_.Yr)()||"complete"===document.readyState)o();else{let e=!1;const i=function(){document.body?e||(e=!0,o()):setTimeout(i,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&i()}),window.attachEvent("onload",i))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new H5((...B)=>{const[_t,ga,_h,_g,l_]=B;if(this.incrementIncomingBytes_(B),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===_t)this.id=ga,this.password=_h;else{if("close"!==_t)throw new Error("Unrecognized command received: "+_t);ga?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ga,()=>{this.onClosed_()})):this.onClosed_()}},(...B)=>{const[_t,ga]=B;this.incrementIncomingBytes_(B),this.myPacketOrderer.handleResponse(_t,ga)},()=>{this.onClosed_()},this.urlFn);const d={start:"t"};d.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(d.cb=this.scriptTagHolder.uniqueCallbackIdentifier),d.v="5",this.transportSessionId&&(d.s=this.transportSessionId),this.lastSessionId&&(d.ls=this.lastSessionId),this.applicationId&&(d.p=this.applicationId),this.appCheckToken&&(d.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&NH.test(location.hostname)&&(d.r="f");const _=this.urlFn(d);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){EU.forceAllow_=!0}static forceDisallow(){EU.forceDisallow_=!0}static isAvailable(){return!((0,M_.Yr)()||!EU.forceAllow_&&(EU.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=(0,M_.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const d=(0,M_.h$)(i),_=mQ(d,1840);for(let B=0;B<_.length;B++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[B]),this.curSegmentNum++}addDisconnectPingFrame(e,i){if((0,M_.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const d={dframe:"t"};d.id=e,d.pw=i,this.myDisconnFrame.src=this.urlFn(d),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=(0,M_.Pz)(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class H5{constructor(e,i,d,_){if(this.onDisconnect=d,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,M_.Yr)())this.commandCB=e,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=wH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=i,this.myIFrame=H5.createIFrame_();let B="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(B='<script>document.domain="'+document.domain+'";<\/script>');const _t="<html><body>"+B+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(_t),this.myIFrame.doc.close()}catch(ga){yO("frame writing exception"),ga.stack&&yO(ga.stack),yO(ga)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||yO("No IE domain setting required")}catch(i){const d=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+d+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let i=this.urlFn(e),d="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+d.length<=1870;){const _t=this.pendingSegs.shift();d=d+"&seg"+_+"="+_t.seg+"&ts"+_+"="+_t.ts+"&d"+_+"="+_t.d,_++}return i+=d,this.addLongPollTag_(i,this.currentSerial),!0}return!1}enqueueSegment(e,i,d){this.pendingSegs.push({seg:e,ts:i,d}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const d=()=>{this.outstandingRequests.delete(i),this.newRequest_()},_=setTimeout(d,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(_),d()})}addTag(e,i){(0,M_.Yr)()?this.doNodeLongPoll(e,i):setTimeout(()=>{try{if(!this.sendNewPolls)return;const d=this.myIFrame.doc.createElement("script");d.type="text/javascript",d.async=!0,d.src=e,d.onload=d.onreadystatechange=function(){const _=d.readyState;(!_||"loaded"===_||"complete"===_)&&(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),i())},d.onerror=()=>{yO("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(d)}catch(d){}},Math.floor(1))}}let BH=null;"undefined"!=typeof MozWebSocket?BH=MozWebSocket:"undefined"!=typeof WebSocket&&(BH=WebSocket);let K5=(()=>{class o{constructor(i,d,_,B,_t,ga,_h){this.connId=i,this.applicationId=_,this.appCheckToken=B,this.authToken=_t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zT(this.connId),this.stats_=LH(d),this.connURL=o.connectionURL_(d,ga,_h,B,_),this.nodeAdmin=d.nodeAdmin}static connectionURL_(i,d,_,B,_t){const ga={v:"5"};return!(0,M_.Yr)()&&"undefined"!=typeof location&&location.hostname&&NH.test(location.hostname)&&(ga.r="f"),d&&(ga.s=d),_&&(ga.ls=_),B&&(ga.ac=B),_t&&(ga.p=_t),nee(i,PH,ga)}open(i,d){this.onDisconnect=d,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bV.set("previous_websocket_failure",!0);try{let _;if((0,M_.Yr)()){const _t={headers:{"User-Agent":`Firebase/5/${CH}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(_t.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(_t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const ga=process.env,_h=0===this.connURL.indexOf("wss://")?ga.HTTPS_PROXY||ga.https_proxy:ga.HTTP_PROXY||ga.http_proxy;_h&&(_t.proxy={origin:_h})}this.mySock=new BH(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const B=_.message||_.data;return B&&this.log_(B),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const B=_.message||_.data;B&&this.log_(B),this.onClosed_()}}start(){}static forceDisallow(){o.forceDisallow_=!0}static isAvailable(){let i=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(i=!0)}return!i&&null!==BH&&!o.forceDisallow_}static previouslyFailed(){return bV.isInMemoryStorage||!0===bV.get("previous_websocket_failure")}markConnectionHealthy(){bV.remove("previous_websocket_failure")}appendFrame_(i){if(this.frames.push(i),this.frames.length===this.totalFrames){const d=this.frames.join("");this.frames=null;const _=(0,M_.cI)(d);this.onMessage(_)}}handleNewFrameCount_(i){this.totalFrames=i,this.frames=[]}extractFrameCount_(i){if((0,M_.hu)(null===this.frames,"We already have a frame buffer"),i.length<=6){const d=Number(i);if(!isNaN(d))return this.handleNewFrameCount_(d),null}return this.handleNewFrameCount_(1),i}handleIncomingFrame(i){if(null===this.mySock)return;const d=i.data;if(this.bytesReceived+=d.length,this.stats_.incrementCounter("bytes_received",d.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(d);else{const _=this.extractFrameCount_(d);null!==_&&this.appendFrame_(_)}}send(i){this.resetKeepAlive();const d=(0,M_.Pz)(i);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const _=mQ(d,16384);_.length>1&&this.sendString_(String(_.length));for(let B=0;B<_.length;B++)this.sendString_(_[B])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(i){try{this.mySock.send(i)}catch(d){this.log_("Exception thrown from WebSocket.send():",d.message||d.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return o.responsesRequiredToBeHealthy=2,o.healthyTimeout=3e4,o})(),aee=(()=>{class o{constructor(i){this.initTransports_(i)}static get ALL_TRANSPORTS(){return[EU,K5]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(i){const d=K5&&K5.isAvailable();let _=d&&!K5.previouslyFailed();if(i.webSocketOnly&&(d||CR("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[K5];else{const B=this.transports_=[];for(const _t of o.ALL_TRANSPORTS)_t&&_t.isAvailable()&&B.push(_t);o.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return o.globalTransportInitialized_=!1,o})();class TV{constructor(e,i,d,_,B,_t,ga,_h,_g,l_){this.id=e,this.repoInfo_=i,this.applicationId_=d,this.appCheckToken_=_,this.authToken_=B,this.onMessage_=_t,this.onReady_=ga,this.onDisconnect_=_h,this.onKill_=_g,this.lastSessionId=l_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zT("c:"+this.id+":"),this.transportManager_=new aee(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),d=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,d)},Math.floor(0));const _=e.healthyTimeout||0;_>0&&(this.healthyTimeout_=AQ(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const i=e.t;"a"===i?this.upgradeIfSecondaryHealthy_():"r"===i?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===i&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=gQ("t",e),d=gQ("d",e);if("c"===i)this.onSecondaryControl_(d);else{if("d"!==i)throw new Error("Unknown protocol layer: "+i);this.pendingDataMessages.push(d)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=gQ("t",e),d=gQ("d",e);"c"===i?this.onControl_(d):"d"===i&&this.onDataMessage_(d)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=gQ("t",e);if("d"in e){const d=e.d;if("h"===i)this.onHandshake_(d);else if("n"===i){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===i?this.onConnectionShutdown_(d):"r"===i?this.onReset_(d):"e"===i?YX("Server Error: "+d):"o"===i?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):YX("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,d=e.v,_=e.h;this.sessionId=e.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),"5"!==d&&CR("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),d=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,d),AQ(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):AQ(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bV.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jO{put(e,i,d,_){}merge(e,i,d,_){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,d){}onDisconnectMerge(e,i,d){}onDisconnectCancel(e,i){}reportStats(e){}}class VH{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,M_.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const d=[...this.listeners_[e]];for(let _=0;_<d.length;_++)d[_].callback.apply(d[_].context,i)}}on(e,i,d){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:d});const _=this.getInitialEvent(e);_&&i.apply(d,_)}off(e,i,d){this.validateEventType_(e);const _=this.listeners_[e]||[];for(let B=0;B<_.length;B++)if(_[B].callback===i&&(!d||d===_[B].context))return void _.splice(B,1)}validateEventType_(e){(0,M_.hu)(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}class IU extends VH{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,M_.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new IU}getInitialEvent(e){return(0,M_.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class w1{constructor(e,i){if(void 0===i){this.pieces_=e.split("/");let d=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[d]=this.pieces_[_],d++);this.pieces_.length=d,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(e+="/"+this.pieces_[i]);return e||"/"}}function F1(){return new w1("")}function p1(o){return o.pieceNum_>=o.pieces_.length?null:o.pieces_[o.pieceNum_]}function M2(o){return o.pieces_.length-o.pieceNum_}function cT(o){let e=o.pieceNum_;return e<o.pieces_.length&&e++,new w1(o.pieces_,e)}function z3(o){return o.pieceNum_<o.pieces_.length?o.pieces_[o.pieces_.length-1]:null}function z5(o,e=0){return o.pieces_.slice(o.pieceNum_+e)}function gJ(o){if(o.pieceNum_>=o.pieces_.length)return null;const e=[];for(let i=o.pieceNum_;i<o.pieces_.length-1;i++)e.push(o.pieces_[i]);return new w1(e,0)}function jT(o,e){const i=[];for(let d=o.pieceNum_;d<o.pieces_.length;d++)i.push(o.pieces_[d]);if(e instanceof w1)for(let d=e.pieceNum_;d<e.pieces_.length;d++)i.push(e.pieces_[d]);else{const d=e.split("/");for(let _=0;_<d.length;_++)d[_].length>0&&i.push(d[_])}return new w1(i,0)}function I1(o){return o.pieceNum_>=o.pieces_.length}function VO(o,e){const i=p1(o),d=p1(e);if(null===i)return e;if(i===d)return VO(cT(o),cT(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+o+")")}function EQ(o,e){const i=z5(o,0),d=z5(e,0);for(let _=0;_<i.length&&_<d.length;_++){const B=_M(i[_],d[_]);if(0!==B)return B}return i.length===d.length?0:i.length<d.length?-1:1}function GH(o,e){if(M2(o)!==M2(e))return!1;for(let i=o.pieceNum_,d=e.pieceNum_;i<=o.pieces_.length;i++,d++)if(o.pieces_[i]!==e.pieces_[d])return!1;return!0}function B2(o,e){let i=o.pieceNum_,d=e.pieceNum_;if(M2(o)>M2(e))return!1;for(;i<o.pieces_.length;){if(o.pieces_[i]!==e.pieces_[d])return!1;++i,++d}return!0}class lee{constructor(e,i){this.errorPrefix_=i,this.parts_=z5(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let d=0;d<this.parts_.length;d++)this.byteLength_+=(0,M_.ug)(this.parts_[d]);AJ(this)}}function AJ(o){if(o.byteLength_>768)throw new Error(o.errorPrefix_+"has a key path longer than 768 bytes ("+o.byteLength_+").");if(o.parts_.length>32)throw new Error(o.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vM(o))}function vM(o){return 0===o.parts_.length?"":"in property '"+o.parts_.join(".")+"'"}class _J extends VH{constructor(){let e,i;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(i="visibilitychange",e="hidden"):void 0!==document.mozHidden?(i="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(i="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const d=!document[e];d!==this.visible_&&(this.visible_=d,this.trigger("visible",d))},!1)}static getInstance(){return new _J}getInitialEvent(e){return(0,M_.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const IQ=1e3;let QH,wU=(()=>{class o extends jO{constructor(i,d,_,B,_t,ga,_h,_g){if(super(),this.repoInfo_=i,this.applicationId_=d,this.onDataUpdate_=_,this.onConnectStatus_=B,this.onServerInfoUpdate_=_t,this.authTokenProvider_=ga,this.appCheckTokenProvider_=_h,this.authOverride_=_g,this.id=o.nextPersistentConnectionId_++,this.log_=zT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=IQ,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_g&&!(0,M_.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_J.getInstance().on("visible",this.onVisible_,this),-1===i.host.indexOf("fblocal")&&IU.getInstance().on("online",this.onOnline_,this)}sendRequest(i,d,_){const B=++this.requestNumber_,_t={r:B,a:i,b:d};this.log_((0,M_.Pz)(_t)),(0,M_.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(_t),_&&(this.requestCBHash_[B]=_)}get(i){this.initConnection_();const d=new M_.BH,_={p:i._path.toString(),q:i._queryObject},B={action:"g",request:_,onComplete:ga=>{const _h=ga.d;"ok"===ga.s?(this.onDataUpdate_(_.p,_h,!1,null),d.resolve(_h)):d.reject(_h)}};this.outstandingGets_.push(B),this.outstandingGetCount_++;const _t=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const ga=this.outstandingGets_[_t];void 0===ga||B!==ga||(delete this.outstandingGets_[_t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+_t+" timed out on connection"),d.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(_t),d.promise}listen(i,d,_,B){this.initConnection_();const _t=i._queryIdentifier,ga=i._path.toString();this.log_("Listen called for "+ga+" "+_t),this.listens.has(ga)||this.listens.set(ga,new Map),(0,M_.hu)(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,M_.hu)(!this.listens.get(ga).has(_t),"listen() called twice for same path/queryId.");const _h={onComplete:B,hashFn:d,query:i,tag:_};this.listens.get(ga).set(_t,_h),this.connected_&&this.sendListen_(_h)}sendGet_(i){const d=this.outstandingGets_[i];this.sendRequest("g",d.request,_=>{delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),d.onComplete&&d.onComplete(_)})}sendListen_(i){const d=i.query,_=d._path.toString(),B=d._queryIdentifier;this.log_("Listen on "+_+" for "+B);const _t={p:_};i.tag&&(_t.q=d._queryObject,_t.t=i.tag),_t.h=i.hashFn(),this.sendRequest("q",_t,_h=>{const _g=_h.d,l_=_h.s;o.warnOnListenWarnings_(_g,d),(this.listens.get(_)&&this.listens.get(_).get(B))===i&&(this.log_("listen response",_h),"ok"!==l_&&this.removeListen_(_,B),i.onComplete&&i.onComplete(l_,_g))})}static warnOnListenWarnings_(i,d){if(i&&"object"==typeof i&&(0,M_.r3)(i,"w")){const _=(0,M_.DV)(i,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const B='".indexOn": "'+d._queryParams.getIndex().toString()+'"',_t=d._path.toString();CR(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${B} at ${_t} to your security rules for better performance.`)}}}refreshAuthToken(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(i)}reduceReconnectDelayIfAdminCredential_(i){(i&&40===i.length||(0,M_.GJ)(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const i=this.authToken_,d=(0,M_.w9)(i)?"auth":"gauth",_={cred:i};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(d,_,B=>{const _t=B.s,ga=B.d||"error";this.authToken_===i&&("ok"===_t?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(_t,ga))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},i=>{const d=i.s,_=i.d||"error";"ok"===d?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(d,_)})}unlisten(i,d){const _=i._path.toString(),B=i._queryIdentifier;this.log_("Unlisten called for "+_+" "+B),(0,M_.hu)(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,B)&&this.connected_&&this.sendUnlisten_(_,B,i._queryObject,d)}sendUnlisten_(i,d,_,B){this.log_("Unlisten on "+i+" for "+d);const _t={p:i};B&&(_t.q=_,_t.t=B),this.sendRequest("n",_t)}onDisconnectPut(i,d,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,d,_):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:d,onComplete:_})}onDisconnectMerge(i,d,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,d,_):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:d,onComplete:_})}onDisconnectCancel(i,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,d):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:d})}sendOnDisconnect_(i,d,_,B){const _t={p:d,d:_};this.log_("onDisconnect "+i,_t),this.sendRequest(i,_t,ga=>{B&&setTimeout(()=>{B(ga.s,ga.d)},Math.floor(0))})}put(i,d,_,B){this.putInternal("p",i,d,_,B)}merge(i,d,_,B){this.putInternal("m",i,d,_,B)}putInternal(i,d,_,B,_t){this.initConnection_();const ga={p:d,d:_};void 0!==_t&&(ga.h=_t),this.outstandingPuts_.push({action:i,request:ga,onComplete:B}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+d)}sendPut_(i){const d=this.outstandingPuts_[i].action,_=this.outstandingPuts_[i].request,B=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(d,_,_t=>{this.log_(d+" response",_t),delete this.outstandingPuts_[i],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),B&&B(_t.s,_t.d)})}reportStats(i){if(this.connected_){const d={c:i};this.log_("reportStats",d),this.sendRequest("s",d,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(i){if("r"in i){this.log_("from server: "+(0,M_.Pz)(i));const d=i.r,_=this.requestCBHash_[d];_&&(delete this.requestCBHash_[d],_(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}}onDataPush_(i,d){this.log_("handleServerMessage",i,d),"d"===i?this.onDataUpdate_(d.p,d.d,!1,d.t):"m"===i?this.onDataUpdate_(d.p,d.d,!0,d.t):"c"===i?this.onListenRevoked_(d.p,d.q):"ac"===i?this.onAuthRevoked_(d.s,d.d):"apc"===i?this.onAppCheckRevoked_(d.s,d.d):"sd"===i?this.onSecurityDebugPacket_(d):YX("Unrecognized action received from server: "+(0,M_.Pz)(i)+"\nAre you using the latest client?")}onReady_(i,d){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(i),this.lastSessionId=d,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(i){(0,M_.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(i))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=IQ,this.realtime_||this.scheduleConnect_(0)),this.visible_=i}onOnline_(i){i?(this.log_("Browser went online."),this.reconnectDelay_=IQ,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=IQ),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const i=(new Date).getTime()-this.lastConnectionAttemptTime_;let d=Math.max(0,this.reconnectDelay_-i);d=Math.random()*d,this.log_("Trying to reconnect in "+d+"ms"),this.scheduleConnect_(d),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var i=this;return(0,b0.Z)(function*(){if(i.shouldReconnect_()){i.log_("Making a connection attempt"),i.lastConnectionAttemptTime_=(new Date).getTime(),i.lastConnectionEstablishedTime_=null;const d=i.onDataMessage_.bind(i),_=i.onReady_.bind(i),B=i.onRealtimeDisconnect_.bind(i),_t=i.id+":"+o.nextConnectionId_++,ga=i.lastSessionId;let _h=!1,_g=null;const l_=function(){_g?_g.close():(_h=!0,B())};i.realtime_={close:l_,sendRequest:function(V_){(0,M_.hu)(_g,"sendRequest call when we're not connected not allowed."),_g.sendRequest(V_)}};const R_=i.forceTokenRefresh_;i.forceTokenRefresh_=!1;try{const[V_,Y_]=yield Promise.all([i.authTokenProvider_.getToken(R_),i.appCheckTokenProvider_.getToken(R_)]);_h?yO("getToken() completed but was canceled"):(yO("getToken() completed. Creating connection."),i.authToken_=V_&&V_.accessToken,i.appCheckToken_=Y_&&Y_.token,_g=new TV(_t,i.repoInfo_,i.applicationId_,i.appCheckToken_,i.authToken_,d,_,B,R0=>{CR(R0+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")},ga))}catch(V_){i.log_("Failed to get token: "+V_),_h||(i.repoInfo_.nodeAdmin&&CR(V_),l_())}}})()}interrupt(i){yO("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(i){yO("Resuming connection for reason: "+i),delete this.interruptReasons_[i],(0,M_.xb)(this.interruptReasons_)&&(this.reconnectDelay_=IQ,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(i){const d=i-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:d})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){const d=this.outstandingPuts_[i];d&&"h"in d.request&&d.queued&&(d.onComplete&&d.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(i,d){let _;_=d?d.map(_t=>ZX(_t)).join("$"):"default";const B=this.removeListen_(i,_);B&&B.onComplete&&B.onComplete("permission_denied")}removeListen_(i,d){const _=new w1(i).toString();let B;if(this.listens.has(_)){const _t=this.listens.get(_);B=_t.get(d),_t.delete(d),0===_t.size&&this.listens.delete(_)}else B=void 0;return B}onAuthRevoked_(i,d){yO("Auth token revoked: "+i+"/"+d),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===i||"permission_denied"===i)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(i,d){yO("App check token revoked: "+i+"/"+d),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===i||"permission_denied"===i)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const i of this.listens.values())for(const d of i.values())this.sendListen_(d);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){const i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){const i={};let d="js";(0,M_.Yr)()&&(d=this.repoInfo_.nodeAdmin?"admin_node":"node"),i["sdk."+d+"."+CH.replace(/\./g,"-")]=1,(0,M_.uI)()?i["framework.cordova"]=1:(0,M_.b$)()&&(i["framework.reactnative"]=1),this.reportStats(i)}shouldReconnect_(){const i=IU.getInstance().currentlyOnline();return(0,M_.xb)(this.interruptReasons_)&&i}}return o.nextPersistentConnectionId_=0,o.nextConnectionId_=0,o})();class O1{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new O1(e,i)}}class bQ{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const d=new O1(XR,e),_=new O1(XR,i);return 0!==this.compare(d,_)}minPost(){return O1.MIN}}class doe extends bQ{static get __EMPTY_NODE(){return QH}static set __EMPTY_NODE(e){QH=e}compare(e,i){return _M(e.name,i.name)}isDefinedOn(e){throw(0,M_.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return O1.MIN}maxPost(){return new O1(eO,QH)}makePost(e,i){return(0,M_.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new O1(e,QH)}toString(){return".key"}}const TU=new doe;class Y5{constructor(e,i,d,_,B=null){this.isReverse_=_,this.resultGenerator_=B,this.nodeStack_=[];let _t=1;for(;!e.isEmpty();)if(e=e,_t=i?d(e.key,i):1,_&&(_t*=-1),_t<0)e=this.isReverse_?e.left:e.right;else{if(0===_t){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let i,e=this.nodeStack_.pop();if(i=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Y3,jP=(()=>{class o{constructor(i,d,_,B,_t){this.key=i,this.value=d,this.color=null!=_?_:o.RED,this.left=null!=B?B:KN.EMPTY_NODE,this.right=null!=_t?_t:KN.EMPTY_NODE}copy(i,d,_,B,_t){return new o(null!=i?i:this.key,null!=d?d:this.value,null!=_?_:this.color,null!=B?B:this.left,null!=_t?_t:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,d,_){let B=this;const _t=_(i,B.key);return B=_t<0?B.copy(null,null,null,B.left.insert(i,d,_),null):0===_t?B.copy(null,d,null,null,null):B.copy(null,null,null,null,B.right.insert(i,d,_)),B.fixUp_()}removeMin_(){if(this.left.isEmpty())return KN.EMPTY_NODE;let i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.removeMin_(),null),i.fixUp_()}remove(i,d){let _,B;if(_=this,d(i,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(i,d),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===d(i,_.key)){if(_.right.isEmpty())return KN.EMPTY_NODE;B=_.right.min_(),_=_.copy(B.key,B.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(i,d))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i}moveRedLeft_(){let i=this.colorFlip_();return i.right.left.isRed_()&&(i=i.copy(null,null,null,null,i.right.rotateRight_()),i=i.rotateLeft_(),i=i.colorFlip_()),i}moveRedRight_(){let i=this.colorFlip_();return i.left.left.isRed_()&&(i=i.rotateRight_(),i=i.colorFlip_()),i}rotateLeft_(){const i=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight_(){const i=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip_(){const i=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,d)}checkMaxDepth_(){const i=this.check_();return Math.pow(2,i)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)}}return o.RED=!0,o.BLACK=!1,o})();class KN{constructor(e,i=KN.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new KN(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,jP.BLACK,null,null))}remove(e){return new KN(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jP.BLACK,null,null))}get(e){let i,d=this.root_;for(;!d.isEmpty();){if(i=this.comparator_(e,d.key),0===i)return d.value;i<0?d=d.left:i>0&&(d=d.right)}return null}getPredecessorKey(e){let i,d=this.root_,_=null;for(;!d.isEmpty();){if(i=this.comparator_(e,d.key),0===i){if(d.left.isEmpty())return _?_.key:null;for(d=d.left;!d.right.isEmpty();)d=d.right;return d.key}i<0?d=d.left:i>0&&(_=d,d=d.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Y5(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new Y5(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new Y5(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new Y5(this.root_,null,this.comparator_,!0,e)}}function SV(o,e){return _M(o.name,e.name)}function J5(o,e){return _M(o,e)}KN.EMPTY_NODE=new class mde{copy(e,i,d,_,B){return this}insert(e,i,d){return new jP(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const RV=function(o){return"number"==typeof o?"number:"+TH(o):"string:"+o},$5=function(o){if(o.isLeafNode()){const e=o.val();(0,M_.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,M_.r3)(e,".sv"),"Priority must be a string or number.")}else(0,M_.hu)(o===Y3||o.isEmpty(),"priority of unexpected type.");(0,M_.hu)(o===Y3||o.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pee,HH,EJ,OV=(()=>{class o{constructor(i,d=o.__childrenNodeConstructor.EMPTY_NODE){this.value_=i,this.priorityNode_=d,this.lazyHash_=null,(0,M_.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$5(this.priorityNode_)}static set __childrenNodeConstructor(i){pee=i}static get __childrenNodeConstructor(){return pee}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(i){return new o(this.value_,i)}getImmediateChild(i){return".priority"===i?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE}getChild(i){return I1(i)?this:".priority"===p1(i)?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(i,d){return null}updateImmediateChild(i,d){return".priority"===i?this.updatePriority(d):d.isEmpty()&&".priority"!==i?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,d).updatePriority(this.priorityNode_)}updateChild(i,d){const _=p1(i);return null===_?d:d.isEmpty()&&".priority"!==_?this:((0,M_.hu)(".priority"!==_||1===M2(i),".priority must be the last token in a path"),this.updateImmediateChild(_,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(cT(i),d)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(i,d){return!1}val(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let i="";this.priorityNode_.isEmpty()||(i+="priority:"+RV(this.priorityNode_.val())+":");const d=typeof this.value_;i+=d+":",i+="number"===d?TH(this.value_):this.value_,this.lazyHash_=KX(i)}return this.lazyHash_}getValue(){return this.value_}compareTo(i){return i===o.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof o.__childrenNodeConstructor?-1:((0,M_.hu)(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))}compareToLeafNode_(i){const d=typeof i.value_,_=typeof this.value_,B=o.VALUE_TYPE_ORDER.indexOf(d),_t=o.VALUE_TYPE_ORDER.indexOf(_);return(0,M_.hu)(B>=0,"Unknown leaf type: "+d),(0,M_.hu)(_t>=0,"Unknown leaf type: "+_),B===_t?"object"===_?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:_t-B}withIndex(){return this}isIndexed(){return!0}equals(i){if(i===this)return!0;if(i.isLeafNode()){const d=i;return this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_)}return!1}}return o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o})();const DT=new class foe extends bQ{compare(e,i){const d=e.node.getPriority(),_=i.node.getPriority(),B=d.compareTo(_);return 0===B?_M(e.name,i.name):B}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return O1.MIN}maxPost(){return new O1(eO,new OV("[PRIORITY-POST]",EJ))}makePost(e,i){const d=HH(e);return new O1(i,new OV("[PRIORITY-POST]",d))}toString(){return".priority"}},mee=Math.log(2);class Aee{constructor(e){this.count=parseInt(Math.log(e+1)/mee,10),this.current_=this.count-1;const _=(B=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&_}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const CQ=function(o,e,i,d){o.sort(e);const _=function(_h,_g){const l_=_g-_h;let f_,R_;if(0===l_)return null;if(1===l_)return f_=o[_h],R_=i?i(f_):f_,new jP(R_,f_.node,jP.BLACK,null,null);{const V_=parseInt(l_/2,10)+_h,Y_=_(_h,V_),R0=_(V_+1,_g);return f_=o[V_],R_=i?i(f_):f_,new jP(R_,f_.node,jP.BLACK,Y_,R0)}},ga=function(_h){let _g=null,l_=null,f_=o.length;const R_=function(Y_,R0){const V0=f_-Y_,J0=f_;f_-=Y_;const MI=_(V0+1,J0),LI=o[V0],DI=i?i(LI):LI;V_(new jP(DI,LI.node,R0,null,MI))},V_=function(Y_){_g?(_g.left=Y_,_g=Y_):(l_=Y_,_g=Y_)};for(let Y_=0;Y_<_h.count;++Y_){const R0=_h.nextBitIsOne(),V0=Math.pow(2,_h.count-(Y_+1));R0?R_(V0,jP.BLACK):(R_(V0,jP.BLACK),R_(V0,jP.RED))}return l_}(new Aee(o.length));return new KN(d||e,ga)};let wQ;const Z5={};class U2{constructor(e,i){this.indexes_=e,this.indexSet_=i}static get Default(){return(0,M_.hu)(Z5&&DT,"ChildrenNode.ts has not been loaded"),wQ=wQ||new U2({".priority":Z5},{".priority":DT}),wQ}get(e){const i=(0,M_.DV)(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof KN?i:null}hasIndex(e){return(0,M_.r3)(this.indexSet_,e.toString())}addIndex(e,i){(0,M_.hu)(e!==TU,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const d=[];let _=!1;const B=i.getIterator(O1.Wrap);let ga,_t=B.getNext();for(;_t;)_=_||e.isDefinedOn(_t.node),d.push(_t),_t=B.getNext();ga=_?CQ(d,e.getCompare()):Z5;const _h=e.toString(),_g=Object.assign({},this.indexSet_);_g[_h]=e;const l_=Object.assign({},this.indexes_);return l_[_h]=ga,new U2(l_,_g)}addToIndexes(e,i){const d=(0,M_.UI)(this.indexes_,(_,B)=>{const _t=(0,M_.DV)(this.indexSet_,B);if((0,M_.hu)(_t,"Missing index implementation for "+B),_===Z5){if(_t.isDefinedOn(e.node)){const ga=[],_h=i.getIterator(O1.Wrap);let _g=_h.getNext();for(;_g;)_g.name!==e.name&&ga.push(_g),_g=_h.getNext();return ga.push(e),CQ(ga,_t.getCompare())}return Z5}{const ga=i.get(e.name);let _h=_;return ga&&(_h=_h.remove(new O1(e.name,ga))),_h.insert(e,e.node)}});return new U2(d,this.indexSet_)}removeFromIndexes(e,i){const d=(0,M_.UI)(this.indexes_,_=>{if(_===Z5)return _;{const B=i.get(e.name);return B?_.remove(new O1(e.name,B)):_}});return new U2(d,this.indexSet_)}}let X5,b1=(()=>{class o{constructor(i,d,_){this.children_=i,this.priorityNode_=d,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&$5(this.priorityNode_),this.children_.isEmpty()&&(0,M_.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return X5||(X5=new o(new KN(J5),null,U2.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||X5}updatePriority(i){return this.children_.isEmpty()?this:new o(this.children_,i,this.indexMap_)}getImmediateChild(i){if(".priority"===i)return this.getPriority();{const d=this.children_.get(i);return null===d?X5:d}}getChild(i){const d=p1(i);return null===d?this:this.getImmediateChild(d).getChild(cT(i))}hasChild(i){return null!==this.children_.get(i)}updateImmediateChild(i,d){if((0,M_.hu)(d,"We should always be passing snapshot nodes"),".priority"===i)return this.updatePriority(d);{const _=new O1(i,d);let B,_t;d.isEmpty()?(B=this.children_.remove(i),_t=this.indexMap_.removeFromIndexes(_,this.children_)):(B=this.children_.insert(i,d),_t=this.indexMap_.addToIndexes(_,this.children_));const ga=B.isEmpty()?X5:this.priorityNode_;return new o(B,ga,_t)}}updateChild(i,d){const _=p1(i);if(null===_)return d;{(0,M_.hu)(".priority"!==p1(i)||1===M2(i),".priority must be the last token in a path");const B=this.getImmediateChild(_).updateChild(cT(i),d);return this.updateImmediateChild(_,B)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(i){if(this.isEmpty())return null;const d={};let _=0,B=0,_t=!0;if(this.forEachChild(DT,(ga,_h)=>{d[ga]=_h.val(i),_++,_t&&o.INTEGER_REGEXP_.test(ga)?B=Math.max(B,Number(ga)):_t=!1}),!i&&_t&&B<2*_){const ga=[];for(const _h in d)ga[_h]=d[_h];return ga}return i&&!this.getPriority().isEmpty()&&(d[".priority"]=this.getPriority().val()),d}hash(){if(null===this.lazyHash_){let i="";this.getPriority().isEmpty()||(i+="priority:"+RV(this.getPriority().val())+":"),this.forEachChild(DT,(d,_)=>{const B=_.hash();""!==B&&(i+=":"+d+":"+B)}),this.lazyHash_=""===i?"":KX(i)}return this.lazyHash_}getPredecessorChildName(i,d,_){const B=this.resolveIndex_(_);if(B){const _t=B.getPredecessorKey(new O1(i,d));return _t?_t.name:null}return this.children_.getPredecessorKey(i)}getFirstChildName(i){const d=this.resolveIndex_(i);if(d){const _=d.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(i){const d=this.getFirstChildName(i);return d?new O1(d,this.children_.get(d)):null}getLastChildName(i){const d=this.resolveIndex_(i);if(d){const _=d.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(i){const d=this.getLastChildName(i);return d?new O1(d,this.children_.get(d)):null}forEachChild(i,d){const _=this.resolveIndex_(i);return _?_.inorderTraversal(B=>d(B.name,B.node)):this.children_.inorderTraversal(d)}getIterator(i){return this.getIteratorFrom(i.minPost(),i)}getIteratorFrom(i,d){const _=this.resolveIndex_(d);if(_)return _.getIteratorFrom(i,B=>B);{const B=this.children_.getIteratorFrom(i.name,O1.Wrap);let _t=B.peek();for(;null!=_t&&d.compare(_t,i)<0;)B.getNext(),_t=B.peek();return B}}getReverseIterator(i){return this.getReverseIteratorFrom(i.maxPost(),i)}getReverseIteratorFrom(i,d){const _=this.resolveIndex_(d);if(_)return _.getReverseIteratorFrom(i,B=>B);{const B=this.children_.getReverseIteratorFrom(i.name,O1.Wrap);let _t=B.peek();for(;null!=_t&&d.compare(_t,i)>0;)B.getNext(),_t=B.peek();return B}}compareTo(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===DV?-1:0}withIndex(i){if(i===TU||this.indexMap_.hasIndex(i))return this;{const d=this.indexMap_.addIndex(i,this.children_);return new o(this.children_,this.priorityNode_,d)}}isIndexed(i){return i===TU||this.indexMap_.hasIndex(i)}equals(i){if(i===this)return!0;if(i.isLeafNode())return!1;{const d=i;if(this.getPriority().equals(d.getPriority())){if(this.children_.count()===d.children_.count()){const _=this.getIterator(DT),B=d.getIterator(DT);let _t=_.getNext(),ga=B.getNext();for(;_t&&ga;){if(_t.name!==ga.name||!_t.node.equals(ga.node))return!1;_t=_.getNext(),ga=B.getNext()}return null===_t&&null===ga}return!1}return!1}}resolveIndex_(i){return i===TU?null:this.indexMap_.get(i.toString())}}return o.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,o})();const DV=new class e8 extends b1{constructor(){super(new KN(J5),b1.EMPTY_NODE,U2.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return b1.EMPTY_NODE}isEmpty(){return!1}};function _T(o,e=null){if(null===o)return b1.EMPTY_NODE;if("object"==typeof o&&".priority"in o&&(e=o[".priority"]),(0,M_.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof o&&".value"in o&&null!==o[".value"]&&(o=o[".value"]),"object"!=typeof o||".sv"in o)return new OV(o,_T(e));if(o instanceof Array){let i=b1.EMPTY_NODE;return wR(o,(d,_)=>{if((0,M_.r3)(o,d)&&"."!==d.substring(0,1)){const B=_T(_);(B.isLeafNode()||!B.isEmpty())&&(i=i.updateImmediateChild(d,B))}}),i.updatePriority(_T(e))}{const i=[];let d=!1;if(wR(o,(_t,ga)=>{if("."!==_t.substring(0,1)){const _h=_T(ga);_h.isEmpty()||(d=d||!_h.getPriority().isEmpty(),i.push(new O1(_t,_h)))}}),0===i.length)return b1.EMPTY_NODE;const B=CQ(i,SV,_t=>_t.name,J5);if(d){const _t=CQ(i,DT.getCompare());return new b1(B,_T(e),new U2({".priority":_t},{".priority":DT}))}return new b1(B,_T(e),U2.Default)}}Object.defineProperties(O1,{MIN:{value:new O1(XR,b1.EMPTY_NODE)},MAX:{value:new O1(eO,DV)}}),doe.__EMPTY_NODE=b1.EMPTY_NODE,OV.__childrenNodeConstructor=b1,function fee(o){Y3=o}(DV),function hoe(o){EJ=o}(DV),function gee(o){HH=o}(_T);class TQ extends bQ{constructor(e){super(),this.indexPath_=e,(0,M_.hu)(!I1(e)&&".priority"!==p1(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const d=this.extractChild(e.node),_=this.extractChild(i.node),B=d.compareTo(_);return 0===B?_M(e.name,i.name):B}makePost(e,i){const d=_T(e),_=b1.EMPTY_NODE.updateChild(this.indexPath_,d);return new O1(i,_)}maxPost(){const e=b1.EMPTY_NODE.updateChild(this.indexPath_,DV);return new O1(eO,e)}toString(){return z5(this.indexPath_,0).join("/")}}const J3=new class SQ extends bQ{compare(e,i){const d=e.node.compareTo(i.node);return 0===d?_M(e.name,i.name):d}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return O1.MIN}maxPost(){return O1.MAX}makePost(e,i){const d=_T(e);return new O1(i,d)}toString(){return".value"}},SU="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",WH=function(){let o=0;const e=[];return function(i){const d=i===o;let _;o=i;const B=new Array(8);for(_=7;_>=0;_--)B[_]=SU.charAt(i%64),i=Math.floor(i/64);(0,M_.hu)(0===i,"Cannot push at time == 0");let _t=B.join("");if(d){for(_=11;_>=0&&63===e[_];_--)e[_]=0;e[_]++}else for(_=0;_<12;_++)e[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)_t+=SU.charAt(e[_]);return(0,M_.hu)(20===_t.length,"nextPushId: Length should be 20."),_t}}(),CJ=function(o){if(o===""+RH)return"-";const e=RL(o);if(null!=e)return""+(e+1);const i=new Array(o.length);for(let _t=0;_t<i.length;_t++)i[_t]=o.charAt(_t);if(i.length<786)return i.push("-"),i.join("");let d=i.length-1;for(;d>=0&&"z"===i[d];)d--;if(-1===d)return eO;const B=SU.charAt(SU.indexOf(i[d])+1);return i[d]=B,i.slice(0,d+1).join("")},KH=function(o){if(o===""+sJ)return XR;const e=RL(o);if(null!=e)return""+(e-1);const i=new Array(o.length);for(let d=0;d<i.length;d++)i[d]=o.charAt(d);return"-"===i[i.length-1]?1===i.length?""+RH:(delete i[i.length-1],i.join("")):(i[i.length-1]=SU.charAt(SU.indexOf(i[i.length-1])-1),i.join("")+"z".repeat(786-i.length))};function kV(o){return{type:"value",snapshotNode:o}}function PV(o,e){return{type:"child_added",snapshotNode:e,childName:o}}function RU(o,e){return{type:"child_removed",snapshotNode:e,childName:o}}function xV(o,e,i){return{type:"child_changed",snapshotNode:e,childName:o,oldSnap:i}}class wJ{constructor(e){this.index_=e}updateChild(e,i,d,_,B,_t){(0,M_.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ga=e.getImmediateChild(i);return ga.getChild(_).equals(d.getChild(_))&&ga.isEmpty()===d.isEmpty()||(null!=_t&&(d.isEmpty()?e.hasChild(i)?_t.trackChildChange(RU(i,ga)):(0,M_.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ga.isEmpty()?_t.trackChildChange(PV(i,d)):_t.trackChildChange(xV(i,d,ga))),e.isLeafNode()&&d.isEmpty())?e:e.updateImmediateChild(i,d).withIndex(this.index_)}updateFullNode(e,i,d){return null!=d&&(e.isLeafNode()||e.forEachChild(DT,(_,B)=>{i.hasChild(_)||d.trackChildChange(RU(_,B))}),i.isLeafNode()||i.forEachChild(DT,(_,B)=>{if(e.hasChild(_)){const _t=e.getImmediateChild(_);_t.equals(B)||d.trackChildChange(xV(_,B,_t))}else d.trackChildChange(PV(_,B))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?b1.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class t8{constructor(e){this.indexedFilter_=new wJ(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t8.getStartPost_(e),this.endPost_=t8.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,i,d,_,B,_t){return this.matches(new O1(i,d))||(d=b1.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,d,_,B,_t)}updateFullNode(e,i,d){i.isLeafNode()&&(i=b1.EMPTY_NODE);let _=i.withIndex(this.index_);_=_.updatePriority(b1.EMPTY_NODE);const B=this;return i.forEachChild(DT,(_t,ga)=>{B.matches(new O1(_t,ga))||(_=_.updateImmediateChild(_t,b1.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,_,d)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}return e.getIndex().maxPost()}}class TJ{constructor(e){this.rangedFilter_=new t8(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,i,d,_,B,_t){return this.rangedFilter_.matches(new O1(i,d))||(d=b1.EMPTY_NODE),e.getImmediateChild(i).equals(d)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,d,_,B,_t):this.fullLimitUpdateChild_(e,i,d,B,_t)}updateFullNode(e,i,d){let _;if(i.isLeafNode()||i.isEmpty())_=b1.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<i.numChildren()&&i.isIndexed(this.index_)){let B;_=b1.EMPTY_NODE.withIndex(this.index_),B=this.reverse_?i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let _t=0;for(;B.hasNext()&&_t<this.limit_;){const ga=B.getNext();let _h;if(_h=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ga)<=0:this.index_.compare(ga,this.rangedFilter_.getEndPost())<=0,!_h)break;_=_.updateImmediateChild(ga.name,ga.node),_t++}}else{let B,_t,ga,_h;if(_=i.withIndex(this.index_),_=_.updatePriority(b1.EMPTY_NODE),this.reverse_){_h=_.getReverseIterator(this.index_),B=this.rangedFilter_.getEndPost(),_t=this.rangedFilter_.getStartPost();const f_=this.index_.getCompare();ga=(R_,V_)=>f_(V_,R_)}else _h=_.getIterator(this.index_),B=this.rangedFilter_.getStartPost(),_t=this.rangedFilter_.getEndPost(),ga=this.index_.getCompare();let _g=0,l_=!1;for(;_h.hasNext();){const f_=_h.getNext();!l_&&ga(B,f_)<=0&&(l_=!0),l_&&_g<this.limit_&&ga(f_,_t)<=0?_g++:_=_.updateImmediateChild(f_.name,b1.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,_,d)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,d,_,B){let _t;if(this.reverse_){const f_=this.index_.getCompare();_t=(R_,V_)=>f_(V_,R_)}else _t=this.index_.getCompare();const ga=e;(0,M_.hu)(ga.numChildren()===this.limit_,"");const _h=new O1(i,d),_g=this.reverse_?ga.getFirstChild(this.index_):ga.getLastChild(this.index_),l_=this.rangedFilter_.matches(_h);if(ga.hasChild(i)){const f_=ga.getImmediateChild(i);let R_=_.getChildAfterChild(this.index_,_g,this.reverse_);for(;null!=R_&&(R_.name===i||ga.hasChild(R_.name));)R_=_.getChildAfterChild(this.index_,R_,this.reverse_);const V_=null==R_?1:_t(R_,_h);if(l_&&!d.isEmpty()&&V_>=0)return null!=B&&B.trackChildChange(xV(i,d,f_)),ga.updateImmediateChild(i,d);{null!=B&&B.trackChildChange(RU(i,f_));const R0=ga.updateImmediateChild(i,b1.EMPTY_NODE);return null!=R_&&this.rangedFilter_.matches(R_)?(null!=B&&B.trackChildChange(PV(R_.name,R_.node)),R0.updateImmediateChild(R_.name,R_.node)):R0}}return d.isEmpty()?e:l_&&_t(_g,_h)>=0?(null!=B&&(B.trackChildChange(RU(_g.name,_g.node)),B.trackChildChange(PV(i,d))),ga.updateImmediateChild(i,d).updateImmediateChild(_g.name,b1.EMPTY_NODE)):e}}class n8{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=DT}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,M_.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,M_.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:XR}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,M_.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,M_.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:eO}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,M_.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===DT}copy(){const e=new n8;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YH(o,e,i){const d=o.copy();return d.startSet_=!0,void 0===e&&(e=null),d.indexStartValue_=e,null!=i?(d.startNameSet_=!0,d.indexStartName_=i):(d.startNameSet_=!1,d.indexStartName_=""),d}function LV(o,e,i){const d=o.copy();return d.endSet_=!0,void 0===e&&(e=null),d.indexEndValue_=e,void 0!==i?(d.endNameSet_=!0,d.indexEndName_=i):(d.endNameSet_=!1,d.indexEndName_=""),d}function r8(o,e){const i=o.copy();return i.index_=e,i}function JH(o){const e={};if(o.isDefault())return e;let i;return o.index_===DT?i="$priority":o.index_===J3?i="$value":o.index_===TU?i="$key":((0,M_.hu)(o.index_ instanceof TQ,"Unrecognized index type!"),i=o.index_.toString()),e.orderBy=(0,M_.Pz)(i),o.startSet_&&(e.startAt=(0,M_.Pz)(o.indexStartValue_),o.startNameSet_&&(e.startAt+=","+(0,M_.Pz)(o.indexStartName_))),o.endSet_&&(e.endAt=(0,M_.Pz)(o.indexEndValue_),o.endNameSet_&&(e.endAt+=","+(0,M_.Pz)(o.indexEndName_))),o.limitSet_&&(o.isViewFromLeft()?e.limitToFirst=o.limit_:e.limitToLast=o.limit_),e}function SJ(o){const e={};if(o.startSet_&&(e.sp=o.indexStartValue_,o.startNameSet_&&(e.sn=o.indexStartName_)),o.endSet_&&(e.ep=o.indexEndValue_,o.endNameSet_&&(e.en=o.indexEndName_)),o.limitSet_){e.l=o.limit_;let i=o.viewFrom_;""===i&&(i=o.isViewFromLeft()?"l":"r"),e.vf=i}return o.index_!==DT&&(e.i=o.index_.toString()),e}class RQ extends jO{constructor(e,i,d,_){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=d,this.appCheckTokenProvider_=_,this.log_=zT("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return void 0!==i?"tag$"+i:((0,M_.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,i,d,_){const B=e._path.toString();this.log_("Listen called for "+B+" "+e._queryIdentifier);const _t=RQ.getListenId_(e,d),ga={};this.listens_[_t]=ga;const _h=JH(e._queryParams);this.restRequest_(B+".json",_h,(_g,l_)=>{let f_=l_;if(404===_g&&(f_=null,_g=null),null===_g&&this.onDataUpdate_(B,f_,!1,d),(0,M_.DV)(this.listens_,_t)===ga){let R_;R_=_g?401===_g?"permission_denied":"rest_error:"+_g:"ok",_(R_,null)}})}unlisten(e,i){const d=RQ.getListenId_(e,i);delete this.listens_[d]}get(e){const i=JH(e._queryParams),d=e._path.toString(),_=new M_.BH;return this.restRequest_(d+".json",i,(B,_t)=>{let ga=_t;404===B&&(ga=null,B=null),null===B?(this.onDataUpdate_(d,ga,!1,null),_.resolve(ga)):_.reject(new Error(ga))}),_.promise}refreshAuthToken(e){}restRequest_(e,i={},d){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,B])=>{_&&_.accessToken&&(i.auth=_.accessToken),B&&B.token&&(i.ac=B.token);const _t=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,M_.xO)(i);this.log_("Sending REST request for "+_t);const ga=new XMLHttpRequest;ga.onreadystatechange=()=>{if(d&&4===ga.readyState){this.log_("REST Response for "+_t+" received. status:",ga.status,"response:",ga.responseText);let _h=null;if(ga.status>=200&&ga.status<300){try{_h=(0,M_.cI)(ga.responseText)}catch(_g){CR("Failed to parse JSON response for "+_t+": "+ga.responseText)}d(null,_h)}else 401!==ga.status&&404!==ga.status&&CR("Got unsuccessful REST response for "+_t+" Status: "+ga.status),d(ga.status);d=null}},ga.open("GET",_t,!0),ga.send()})}}class Eee{constructor(){this.rootNode_=b1.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}function OQ(){return{value:null,children:new Map}}function MV(o,e,i){if(I1(e))o.value=i,o.children.clear();else if(null!==o.value)o.value=o.value.updateChild(e,i);else{const d=p1(e);o.children.has(d)||o.children.set(d,OQ()),MV(o.children.get(d),e=cT(e),i)}}function RJ(o,e){if(I1(e))return o.value=null,o.children.clear(),!0;if(null!==o.value){if(o.value.isLeafNode())return!1;{const i=o.value;return o.value=null,i.forEachChild(DT,(d,_)=>{MV(o,new w1(d),_)}),RJ(o,e)}}if(o.children.size>0){const i=p1(e);return e=cT(e),o.children.has(i)&&RJ(o.children.get(i),e)&&o.children.delete(i),0===o.children.size}return!0}function VP(o,e,i){null!==o.value?i(e,o.value):function Iee(o,e){o.children.forEach((i,d)=>{e(d,i)})}(o,(d,_)=>{VP(_,new w1(e.toString()+"/"+d),i)})}class bee{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i=Object.assign({},e);return this.last_&&wR(this.last_,(d,_)=>{i[d]=i[d]-_}),this.last_=e,i}}class DJ{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new bee(e);const d=1e4+2e4*Math.random();AQ(this.reportStats_.bind(this),Math.floor(d))}reportStats_(){const e=this.statsListener_.get(),i={};let d=!1;wR(e,(_,B)=>{B>0&&(0,M_.r3)(this.statsToReport_,_)&&(i[_]=B,d=!0)}),d&&this.server_.reportStats(i),AQ(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var F2=(()=>{return(o=F2||(F2={}))[o.OVERWRITE=0]="OVERWRITE",o[o.MERGE=1]="MERGE",o[o.ACK_USER_WRITE=2]="ACK_USER_WRITE",o[o.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",F2;var o})();function OU(o){return{fromUser:!1,fromServer:!0,queryId:o,tagged:!0}}class NQ{constructor(e,i,d){this.path=e,this.affectedTree=i,this.revert=d,this.type=F2.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(I1(this.path)){if(null!=this.affectedTree.value)return(0,M_.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new w1(e));return new NQ(F1(),i,this.revert)}}return(0,M_.hu)(p1(this.path)===e,"operationForChild called for unrelated child."),new NQ(cT(this.path),this.affectedTree,this.revert)}}class yM{constructor(e,i){this.source=e,this.path=i,this.type=F2.LISTEN_COMPLETE}operationForChild(e){return I1(this.path)?new yM(this.source,F1()):new yM(this.source,cT(this.path))}}class DU{constructor(e,i,d){this.source=e,this.path=i,this.snap=d,this.type=F2.OVERWRITE}operationForChild(e){return I1(this.path)?new DU(this.source,F1(),this.snap.getImmediateChild(e)):new DU(this.source,cT(this.path),this.snap)}}class NU{constructor(e,i,d){this.source=e,this.path=i,this.children=d,this.type=F2.MERGE}operationForChild(e){if(I1(this.path)){const i=this.children.subtree(new w1(e));return i.isEmpty()?null:i.value?new DU(this.source,F1(),i.value):new NU(this.source,F1(),i)}return(0,M_.hu)(p1(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new NU(this.source,cT(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kU{constructor(e,i,d){this.node_=e,this.fullyInitialized_=i,this.filtered_=d}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(I1(e))return this.isFullyInitialized()&&!this.filtered_;const i=p1(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Cee{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kQ(o,e,i,d,_,B){const _t=d.filter(ga=>ga.type===i);_t.sort((ga,_h)=>function PJ(o,e,i){if(null==e.childName||null==i.childName)throw(0,M_.g5)("Should only compare child_ events.");const d=new O1(e.childName,e.snapshotNode),_=new O1(i.childName,i.snapshotNode);return o.index_.compare(d,_)}(o,ga,_h)),_t.forEach(ga=>{const _h=function kJ(o,e,i){return"value"===e.type||"child_removed"===e.type||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,o.index_)),e}(o,ga,B);_.forEach(_g=>{_g.respondsTo(ga.type)&&e.push(_g.createEvent(_h,o.query_))})})}function zN(o,e){return{eventCache:o,serverCache:e}}function Z3(o,e,i,d){return zN(new kU(e,i,d),o.serverCache)}function xJ(o,e,i,d){return zN(o.eventCache,new kU(e,i,d))}function j2(o){return o.eventCache.isFullyInitialized()?o.eventCache.getNode():null}function EO(o){return o.serverCache.isFullyInitialized()?o.serverCache.getNode():null}let V2;class NT{constructor(e,i=(()=>(V2||(V2=new KN(Zie)),V2))()){this.value=e,this.children=i}static fromObject(e){let i=new NT(null);return wR(e,(d,_)=>{i=i.set(new w1(d),_)}),i}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(null!=this.value&&i(this.value))return{path:F1(),value:this.value};if(I1(e))return null;{const d=p1(e),_=this.children.get(d);if(null!==_){const B=_.findRootMostMatchingPathAndValue(cT(e),i);return null!=B?{path:jT(new w1(d),B.path),value:B.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(I1(e))return this;{const i=p1(e),d=this.children.get(i);return null!==d?d.subtree(cT(e)):new NT(null)}}set(e,i){if(I1(e))return new NT(i,this.children);{const d=p1(e),B=(this.children.get(d)||new NT(null)).set(cT(e),i),_t=this.children.insert(d,B);return new NT(this.value,_t)}}remove(e){if(I1(e))return this.children.isEmpty()?new NT(null):new NT(null,this.children);{const i=p1(e),d=this.children.get(i);if(d){const _=d.remove(cT(e));let B;return B=_.isEmpty()?this.children.remove(i):this.children.insert(i,_),null===this.value&&B.isEmpty()?new NT(null):new NT(this.value,B)}return this}}get(e){if(I1(e))return this.value;{const i=p1(e),d=this.children.get(i);return d?d.get(cT(e)):null}}setTree(e,i){if(I1(e))return i;{const d=p1(e),B=(this.children.get(d)||new NT(null)).setTree(cT(e),i);let _t;return _t=B.isEmpty()?this.children.remove(d):this.children.insert(d,B),new NT(this.value,_t)}}fold(e){return this.fold_(F1(),e)}fold_(e,i){const d={};return this.children.inorderTraversal((_,B)=>{d[_]=B.fold_(jT(e,_),i)}),i(e,this.value,d)}findOnPath(e,i){return this.findOnPath_(e,F1(),i)}findOnPath_(e,i,d){const _=!!this.value&&d(i,this.value);if(_)return _;if(I1(e))return null;{const B=p1(e),_t=this.children.get(B);return _t?_t.findOnPath_(cT(e),jT(i,B),d):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,F1(),i)}foreachOnPath_(e,i,d){if(I1(e))return this;{this.value&&d(i,this.value);const _=p1(e),B=this.children.get(_);return B?B.foreachOnPath_(cT(e),jT(i,_),d):new NT(null)}}foreach(e){this.foreach_(F1(),e)}foreach_(e,i){this.children.inorderTraversal((d,_)=>{_.foreach_(jT(e,d),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,d)=>{d.value&&e(i,d.value)})}}class GP{constructor(e){this.writeTree_=e}static empty(){return new GP(new NT(null))}}function UV(o,e,i){if(I1(e))return new GP(new NT(i));{const d=o.writeTree_.findRootMostValueAndPath(e);if(null!=d){const _=d.path;let B=d.value;const _t=VO(_,e);return B=B.updateChild(_t,i),new GP(o.writeTree_.set(_,B))}{const _=new NT(i),B=o.writeTree_.setTree(e,_);return new GP(B)}}}function LJ(o,e,i){let d=o;return wR(i,(_,B)=>{d=UV(d,jT(e,_),B)}),d}function $H(o,e){if(I1(e))return GP.empty();{const i=o.writeTree_.setTree(e,new NT(null));return new GP(i)}}function i8(o,e){return null!=DL(o,e)}function DL(o,e){const i=o.writeTree_.findRootMostValueAndPath(e);return null!=i?o.writeTree_.get(i.path).getChild(VO(i.path,e)):null}function Tee(o){const e=[],i=o.writeTree_.value;return null!=i?i.isLeafNode()||i.forEachChild(DT,(d,_)=>{e.push(new O1(d,_))}):o.writeTree_.children.inorderTraversal((d,_)=>{null!=_.value&&e.push(new O1(d,_.value))}),e}function PU(o,e){if(I1(e))return o;{const i=DL(o,e);return new GP(null!=i?new NT(i):o.writeTree_.subtree(e))}}function MJ(o){return o.writeTree_.isEmpty()}function FV(o,e){return BJ(F1(),o.writeTree_,e)}function BJ(o,e,i){if(null!=e.value)return i.updateChild(o,e.value);{let d=null;return e.children.inorderTraversal((_,B)=>{".priority"===_?((0,M_.hu)(null!==B.value,"Priority writes must always be leaf nodes"),d=B.value):i=BJ(jT(o,_),B,i)}),!i.getChild(o).isEmpty()&&null!==d&&(i=i.updateChild(jT(o,".priority"),d)),i}}function jV(o,e){return xee(e,o)}function o8(o,e){if(o.snap)return B2(o.path,e);for(const i in o.children)if(o.children.hasOwnProperty(i)&&B2(jT(o.path,i),e))return!0;return!1}function Dee(o){return o.visible}function FJ(o,e,i){let d=GP.empty();for(let _=0;_<o.length;++_){const B=o[_];if(e(B)){const _t=B.path;let ga;if(B.snap)B2(i,_t)?(ga=VO(i,_t),d=UV(d,ga,B.snap)):B2(_t,i)&&(ga=VO(_t,i),d=UV(d,F1(),B.snap.getChild(ga)));else{if(!B.children)throw(0,M_.g5)("WriteRecord should have .snap or .children");if(B2(i,_t))ga=VO(i,_t),d=LJ(d,ga,B.children);else if(B2(_t,i))if(ga=VO(_t,i),I1(ga))d=LJ(d,F1(),B.children);else{const _h=(0,M_.DV)(B.children,p1(ga));if(_h){const _g=_h.getChild(cT(ga));d=UV(d,F1(),_g)}}}}}return d}function XH(o,e,i,d,_){if(d||_){const B=PU(o.visibleWrites,e);return!_&&MJ(B)?i:_||null!=i||i8(B,F1())?FV(FJ(o.allWrites,function(_g){return(_g.visible||_)&&(!d||!~d.indexOf(_g.writeId))&&(B2(_g.path,e)||B2(e,_g.path))},e),i||b1.EMPTY_NODE):null}{const B=DL(o.visibleWrites,e);if(null!=B)return B;{const _t=PU(o.visibleWrites,e);return MJ(_t)?i:null!=i||i8(_t,F1())?FV(_t,i||b1.EMPTY_NODE):null}}}function xQ(o,e,i,d){return XH(o.writeTree,o.treePath,e,i,d)}function eW(o,e){return function Nee(o,e,i){let d=b1.EMPTY_NODE;const _=DL(o.visibleWrites,e);if(_)return _.isLeafNode()||_.forEachChild(DT,(B,_t)=>{d=d.updateImmediateChild(B,_t)}),d;if(i){const B=PU(o.visibleWrites,e);return i.forEachChild(DT,(_t,ga)=>{const _h=FV(PU(B,new w1(_t)),ga);d=d.updateImmediateChild(_t,_h)}),Tee(B).forEach(_t=>{d=d.updateImmediateChild(_t.name,_t.node)}),d}return Tee(PU(o.visibleWrites,e)).forEach(_t=>{d=d.updateImmediateChild(_t.name,_t.node)}),d}(o.writeTree,o.treePath,e)}function tW(o,e,i,d){return function PQ(o,e,i,d,_){(0,M_.hu)(d||_,"Either existingEventSnap or existingServerSnap must exist");const B=jT(e,i);if(i8(o.visibleWrites,B))return null;{const _t=PU(o.visibleWrites,B);return MJ(_t)?_.getChild(i):FV(_t,_.getChild(i))}}(o.writeTree,o.treePath,e,i,d)}function nW(o,e){return function kee(o,e){return DL(o.visibleWrites,e)}(o.writeTree,jT(o.treePath,e))}function s8(o,e,i){return function _q(o,e,i,d){const _=jT(e,i),B=DL(o.visibleWrites,_);return null!=B?B:d.isCompleteForChild(i)?FV(PU(o.visibleWrites,_),d.getNode().getImmediateChild(i)):null}(o.writeTree,o.treePath,e,i)}function Pee(o,e){return xee(jT(o.treePath,e),o.writeTree)}function xee(o,e){return{treePath:o,writeTree:e}}class voe{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,d=e.childName;(0,M_.hu)("child_added"===i||"child_changed"===i||"child_removed"===i,"Only child changes supported for tracking"),(0,M_.hu)(".priority"!==d,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(d);if(_){const B=_.type;if("child_added"===i&&"child_removed"===B)this.changeMap.set(d,xV(d,e.snapshotNode,_.snapshotNode));else if("child_removed"===i&&"child_added"===B)this.changeMap.delete(d);else if("child_removed"===i&&"child_changed"===B)this.changeMap.set(d,RU(d,_.oldSnap));else if("child_changed"===i&&"child_added"===B)this.changeMap.set(d,PV(d,e.snapshotNode));else{if("child_changed"!==i||"child_changed"!==B)throw(0,M_.g5)("Illegal combination of changes: "+e+" occurred after "+_);this.changeMap.set(d,xV(d,e.snapshotNode,_.oldSnap))}}else this.changeMap.set(d,e)}getChanges(){return Array.from(this.changeMap.values())}}const Lee=new class yoe{getCompleteChild(e){return null}getChildAfterChild(e,i,d){return null}};class jJ{constructor(e,i,d=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=d}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const d=null!=this.optCompleteServerCache_?new kU(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return s8(this.writes_,e,d)}}getChildAfterChild(e,i,d){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:EO(this.viewCache_),B=function _oe(o,e,i,d,_,B){return function moe(o,e,i,d,_,B,_t){let ga;const _h=PU(o.visibleWrites,e),_g=DL(_h,F1());if(null!=_g)ga=_g;else{if(null==i)return[];ga=FV(_h,i)}if(ga=ga.withIndex(_t),ga.isEmpty()||ga.isLeafNode())return[];{const l_=[],f_=_t.getCompare(),R_=B?ga.getReverseIteratorFrom(d,_t):ga.getIteratorFrom(d,_t);let V_=R_.getNext();for(;V_&&l_.length<_;)0!==f_(V_,d)&&l_.push(V_),V_=R_.getNext();return l_}}(o.writeTree,o.treePath,e,i,d,_,B)}(this.writes_,_,i,1,d,e);return 0===B.length?null:B[0]}}function a8(o,e,i,d,_,B){const _t=e.eventCache;if(null!=nW(d,i))return e;{let ga,_h;if(I1(i))if((0,M_.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _g=EO(e),f_=eW(d,_g instanceof b1?_g:b1.EMPTY_NODE);ga=o.filter.updateFullNode(e.eventCache.getNode(),f_,B)}else{const _g=xQ(d,EO(e));ga=o.filter.updateFullNode(e.eventCache.getNode(),_g,B)}else{const _g=p1(i);if(".priority"===_g){(0,M_.hu)(1===M2(i),"Can't have a priority with additional path components");const l_=_t.getNode();_h=e.serverCache.getNode();const f_=tW(d,i,l_,_h);ga=null!=f_?o.filter.updatePriority(l_,f_):_t.getNode()}else{const l_=cT(i);let f_;if(_t.isCompleteForChild(_g)){_h=e.serverCache.getNode();const R_=tW(d,i,_t.getNode(),_h);f_=null!=R_?_t.getNode().getImmediateChild(_g).updateChild(l_,R_):_t.getNode().getImmediateChild(_g)}else f_=s8(d,_g,e.serverCache);ga=null!=f_?o.filter.updateChild(_t.getNode(),_g,f_,l_,_,B):_t.getNode()}}return Z3(e,ga,_t.isFullyInitialized()||I1(i),o.filter.filtersNodes())}}function LQ(o,e,i,d,_,B,_t,ga){const _h=e.serverCache;let _g;const l_=_t?o.filter:o.filter.getIndexedFilter();if(I1(i))_g=l_.updateFullNode(_h.getNode(),d,null);else if(l_.filtersNodes()&&!_h.isFiltered()){const V_=_h.getNode().updateChild(i,d);_g=l_.updateFullNode(_h.getNode(),V_,null)}else{const V_=p1(i);if(!_h.isCompleteForPath(i)&&M2(i)>1)return e;const Y_=cT(i),V0=_h.getNode().getImmediateChild(V_).updateChild(Y_,d);_g=".priority"===V_?l_.updatePriority(_h.getNode(),V0):l_.updateChild(_h.getNode(),V_,V0,Y_,Lee,null)}const f_=xJ(e,_g,_h.isFullyInitialized()||I1(i),l_.filtersNodes());return a8(o,f_,i,_,new jJ(_,f_,B),ga)}function rW(o,e,i,d,_,B,_t){const ga=e.eventCache;let _h,_g;const l_=new jJ(_,e,B);if(I1(i))_g=o.filter.updateFullNode(e.eventCache.getNode(),d,_t),_h=Z3(e,_g,!0,o.filter.filtersNodes());else{const f_=p1(i);if(".priority"===f_)_g=o.filter.updatePriority(e.eventCache.getNode(),d),_h=Z3(e,_g,ga.isFullyInitialized(),ga.isFiltered());else{const R_=cT(i),V_=ga.getNode().getImmediateChild(f_);let Y_;if(I1(R_))Y_=d;else{const R0=l_.getCompleteChild(f_);Y_=null!=R0?".priority"===z3(R_)&&R0.getChild(gJ(R_)).isEmpty()?R0:R0.updateChild(R_,d):b1.EMPTY_NODE}_h=V_.equals(Y_)?e:Z3(e,o.filter.updateChild(ga.getNode(),f_,Y_,R_,l_,_t),ga.isFullyInitialized(),o.filter.filtersNodes())}}return _h}function c8(o,e){return o.eventCache.isCompleteForChild(e)}function VJ(o,e,i){return i.foreach((d,_)=>{e=e.updateChild(d,_)}),e}function iW(o,e,i,d,_,B,_t,ga){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _g,_h=e;_g=I1(i)?d:new NT(null).setTree(i,d);const l_=e.serverCache.getNode();return _g.children.inorderTraversal((f_,R_)=>{if(l_.hasChild(f_)){const Y_=VJ(0,e.serverCache.getNode().getImmediateChild(f_),R_);_h=LQ(o,_h,new w1(f_),Y_,_,B,_t,ga)}}),_g.children.inorderTraversal((f_,R_)=>{const V_=!e.serverCache.isCompleteForChild(f_)&&void 0===R_.value;if(!l_.hasChild(f_)&&!V_){const R0=VJ(0,e.serverCache.getNode().getImmediateChild(f_),R_);_h=LQ(o,_h,new w1(f_),R0,_,B,_t,ga)}}),_h}class u8{constructor(e,i){this.query_=e,this.eventRegistrations_=[];const d=this.query_._queryParams,_=new wJ(d.getIndex()),B=function zH(o){return o.loadsAllData()?new wJ(o.getIndex()):o.hasLimit()?new TJ(o):new t8(o)}(d);this.processor_=function Mee(o){return{filter:o}}(B);const _t=i.serverCache,ga=i.eventCache,_h=_.updateFullNode(b1.EMPTY_NODE,_t.getNode(),null),_g=B.updateFullNode(b1.EMPTY_NODE,ga.getNode(),null),l_=new kU(_h,_t.isFullyInitialized(),_.filtersNodes()),f_=new kU(_g,ga.isFullyInitialized(),B.filtersNodes());this.viewCache_=zN(f_,l_),this.eventGenerator_=new Cee(this.query_)}get query(){return this.query_}}function woe(o,e){const i=EO(o.viewCache_);return i&&(o.query._queryParams.loadsAllData()||!I1(e)&&!i.getImmediateChild(p1(e)).isEmpty())?i.getChild(e):null}function e4(o){return 0===o.eventRegistrations_.length}function oW(o,e,i){const d=[];if(i){(0,M_.hu)(null==e,"A cancel should cancel all event registrations.");const _=o.query._path;o.eventRegistrations_.forEach(B=>{const _t=B.createCancelEvent(i,_);_t&&d.push(_t)})}if(e){let _=[];for(let B=0;B<o.eventRegistrations_.length;++B){const _t=o.eventRegistrations_[B];if(_t.matches(e)){if(e.hasAnyCallback()){_=_.concat(o.eventRegistrations_.slice(B+1));break}}else _.push(_t)}o.eventRegistrations_=_}else o.eventRegistrations_=[];return d}function Toe(o,e,i,d){e.type===F2.MERGE&&null!==e.source.queryId&&((0,M_.hu)(EO(o.viewCache_),"We should always have a full cache before handling merges"),(0,M_.hu)(j2(o.viewCache_),"Missing event cache, even though we have a server cache"));const _=o.viewCache_,B=function Ioe(o,e,i,d,_){const B=new voe;let _t,ga;if(i.type===F2.OVERWRITE){const _g=i;_g.source.fromUser?_t=rW(o,e,_g.path,_g.snap,d,_,B):((0,M_.hu)(_g.source.fromServer,"Unknown source."),ga=_g.source.tagged||e.serverCache.isFiltered()&&!I1(_g.path),_t=LQ(o,e,_g.path,_g.snap,d,_,ga,B))}else if(i.type===F2.MERGE){const _g=i;_g.source.fromUser?_t=function Bee(o,e,i,d,_,B,_t){let ga=e;return d.foreach((_h,_g)=>{const l_=jT(i,_h);c8(e,p1(l_))&&(ga=rW(o,ga,l_,_g,_,B,_t))}),d.foreach((_h,_g)=>{const l_=jT(i,_h);c8(e,p1(l_))||(ga=rW(o,ga,l_,_g,_,B,_t))}),ga}(o,e,_g.path,_g.children,d,_,B):((0,M_.hu)(_g.source.fromServer,"Unknown source."),ga=_g.source.tagged||e.serverCache.isFiltered(),_t=iW(o,e,_g.path,_g.children,d,_,ga,B))}else if(i.type===F2.ACK_USER_WRITE){const _g=i;_t=_g.revert?function jee(o,e,i,d,_,B){let _t;if(null!=nW(d,i))return e;{const ga=new jJ(d,e,_),_h=e.eventCache.getNode();let _g;if(I1(i)||".priority"===p1(i)){let l_;if(e.serverCache.isFullyInitialized())l_=xQ(d,EO(e));else{const f_=e.serverCache.getNode();(0,M_.hu)(f_ instanceof b1,"serverChildren would be complete if leaf node"),l_=eW(d,f_)}l_=l_,_g=o.filter.updateFullNode(_h,l_,B)}else{const l_=p1(i);let f_=s8(d,l_,e.serverCache);null==f_&&e.serverCache.isCompleteForChild(l_)&&(f_=_h.getImmediateChild(l_)),_g=null!=f_?o.filter.updateChild(_h,l_,f_,cT(i),ga,B):e.eventCache.getNode().hasChild(l_)?o.filter.updateChild(_h,l_,b1.EMPTY_NODE,cT(i),ga,B):_h,_g.isEmpty()&&e.serverCache.isFullyInitialized()&&(_t=xQ(d,EO(e)),_t.isLeafNode()&&(_g=o.filter.updateFullNode(_g,_t,B)))}return _t=e.serverCache.isFullyInitialized()||null!=nW(d,F1()),Z3(e,_g,_t,o.filter.filtersNodes())}}(o,e,_g.path,d,_,B):function Uee(o,e,i,d,_,B,_t){if(null!=nW(_,i))return e;const ga=e.serverCache.isFiltered(),_h=e.serverCache;if(null!=d.value){if(I1(i)&&_h.isFullyInitialized()||_h.isCompleteForPath(i))return LQ(o,e,i,_h.getNode().getChild(i),_,B,ga,_t);if(I1(i)){let _g=new NT(null);return _h.getNode().forEachChild(TU,(l_,f_)=>{_g=_g.set(new w1(l_),f_)}),iW(o,e,i,_g,_,B,ga,_t)}return e}{let _g=new NT(null);return d.foreach((l_,f_)=>{const R_=jT(i,l_);_h.isCompleteForPath(R_)&&(_g=_g.set(l_,_h.getNode().getChild(R_)))}),iW(o,e,i,_g,_,B,ga,_t)}}(o,e,_g.path,_g.affectedTree,d,_,B)}else{if(i.type!==F2.LISTEN_COMPLETE)throw(0,M_.g5)("Unknown operation type: "+i.type);_t=function Fee(o,e,i,d,_){const B=e.serverCache;return a8(o,xJ(e,B.getNode(),B.isFullyInitialized()||I1(i),B.isFiltered()),i,d,Lee,_)}(o,e,i.path,d,B)}const _h=B.getChanges();return function boe(o,e,i){const d=e.eventCache;if(d.isFullyInitialized()){const _=d.getNode().isLeafNode()||d.getNode().isEmpty(),B=j2(o);(i.length>0||!o.eventCache.isFullyInitialized()||_&&!d.getNode().equals(B)||!d.getNode().getPriority().equals(B.getPriority()))&&i.push(kV(j2(e)))}}(e,_t,_h),{viewCache:_t,changes:_h}}(o.processor_,_,e,i,d);return function Eoe(o,e){(0,M_.hu)(e.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,M_.hu)(e.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed")}(o.processor_,B.viewCache),(0,M_.hu)(B.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),o.viewCache_=B.viewCache,MQ(o,B.changes,B.viewCache.eventCache.getNode(),null)}function MQ(o,e,i,d){return function NJ(o,e,i,d){const _=[],B=[];return e.forEach(_t=>{"child_changed"===_t.type&&o.index_.indexedValueChanged(_t.oldSnap,_t.snapshotNode)&&B.push(function _ee(o,e){return{type:"child_moved",snapshotNode:e,childName:o}}(_t.childName,_t.snapshotNode))}),kQ(o,_,"child_removed",e,d,i),kQ(o,_,"child_added",e,d,i),kQ(o,_,"child_moved",B,d,i),kQ(o,_,"child_changed",e,d,i),kQ(o,_,"value",e,d,i),_}(o.eventGenerator_,e,i,d?[d]:o.eventRegistrations_)}let sW,h8;class $I{constructor(){this.views=new Map}}function l8(o,e,i,d){const _=e.source.queryId;if(null!==_){const B=o.views.get(_);return(0,M_.hu)(null!=B,"SyncTree gave us an op for an invalid query."),Toe(B,e,i,d)}{let B=[];for(const _t of o.views.values())B=B.concat(Toe(_t,e,i,d));return B}}function QJ(o,e,i,d,_){const _t=o.views.get(e._queryIdentifier);if(!_t){let ga=xQ(i,_?d:null),_h=!1;ga?_h=!0:d instanceof b1?(ga=eW(i,d),_h=!1):(ga=b1.EMPTY_NODE,_h=!1);const _g=zN(new kU(ga,_h,!1),new kU(d,_,!1));return new u8(e,_g)}return _t}function yS(o){const e=[];for(const i of o.views.values())i.query._queryParams.loadsAllData()||e.push(i);return e}function QP(o,e){let i=null;for(const d of o.views.values())i=i||woe(d,e);return i}function HJ(o,e){return e._queryParams.loadsAllData()?d8(o):o.views.get(e._queryIdentifier)}function Vee(o,e){return null!=HJ(o,e)}function t4(o){return null!=d8(o)}function d8(o){for(const e of o.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Roe=1;class Qee{constructor(e){this.listenProvider_=e,this.syncPointTree_=new NT(null),this.pendingWriteTree_=function Aoe(){return{visibleWrites:GP.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function f8(o,e,i,d,_){return function ZH(o,e,i,d,_){(0,M_.hu)(d>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),o.allWrites.push({path:e,snap:i,writeId:d,visible:_}),_&&(o.visibleWrites=UV(o.visibleWrites,e,i)),o.lastWriteId=d}(o.pendingWriteTree_,e,i,d,_),_?g8(o,new DU({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i)):[]}function n4(o,e,i=!1){const d=function Ree(o,e){for(let i=0;i<o.allWrites.length;i++){const d=o.allWrites[i];if(d.writeId===e)return d}return null}(o.pendingWriteTree_,e);if(function UJ(o,e){const i=o.allWrites.findIndex(ga=>ga.writeId===e);(0,M_.hu)(i>=0,"removeWrite called with nonexistent writeId.");const d=o.allWrites[i];o.allWrites.splice(i,1);let _=d.visible,B=!1,_t=o.allWrites.length-1;for(;_&&_t>=0;){const ga=o.allWrites[_t];ga.visible&&(_t>=i&&o8(ga,d.path)?_=!1:B2(d.path,ga.path)&&(B=!0)),_t--}return!!_&&(B?(function Oee(o){o.visibleWrites=FJ(o.allWrites,Dee,F1()),o.lastWriteId=o.allWrites.length>0?o.allWrites[o.allWrites.length-1].writeId:-1}(o),!0):(d.snap?o.visibleWrites=$H(o.visibleWrites,d.path):wR(d.children,_h=>{o.visibleWrites=$H(o.visibleWrites,jT(d.path,_h))}),!0))}(o.pendingWriteTree_,e)){let B=new NT(null);return null!=d.snap?B=B.set(F1(),!0):wR(d.children,_t=>{B=B.set(new w1(_t),!0)}),g8(o,new NQ(d.path,B,i))}return[]}function FQ(o,e,i){return g8(o,new DU({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}function hW(o,e,i,d){const _=e._path,B=o.syncPointTree_.get(_);let _t=[];if(B&&("default"===e._queryIdentifier||Vee(B,e))){const ga=function uW(o,e,i,d){const _=e._queryIdentifier,B=[];let _t=[];const ga=t4(o);if("default"===_)for(const[_h,_g]of o.views.entries())_t=_t.concat(oW(_g,i,d)),e4(_g)&&(o.views.delete(_h),_g.query._queryParams.loadsAllData()||B.push(_g.query));else{const _h=o.views.get(_);_h&&(_t=_t.concat(oW(_h,i,d)),e4(_h)&&(o.views.delete(_),_h.query._queryParams.loadsAllData()||B.push(_h.query)))}return ga&&!t4(o)&&B.push(new(function BQ(){return(0,M_.hu)(sW,"Reference.ts has not been loaded"),sW}())(e._repo,e._path)),{removed:B,events:_t}}(B,e,i,d);(function Soe(o){return 0===o.views.size})(B)&&(o.syncPointTree_=o.syncPointTree_.remove(_));const _h=ga.removed;_t=ga.events;const _g=-1!==_h.findIndex(f_=>f_._queryParams.loadsAllData()),l_=o.syncPointTree_.findOnPath(_,(f_,R_)=>t4(R_));if(_g&&!l_){const f_=o.syncPointTree_.subtree(_);if(!f_.isEmpty()){const R_=function _de(o){return o.fold((e,i,d)=>{if(i&&t4(i))return[d8(i)];{let _=[];return i&&(_=yS(i)),wR(d,(B,_t)=>{_=_.concat(_t)}),_}})}(f_);for(let V_=0;V_<R_.length;++V_){const Y_=R_[V_],R0=Y_.query,V0=jQ(o,Y_);o.listenProvider_.startListening(mW(R0),VQ(o,R0),V0.hashFn,V0.onComplete)}}}!l_&&_h.length>0&&!d&&(_g?o.listenProvider_.stopListening(mW(e),null):_h.forEach(f_=>{const R_=o.queryToTagMap.get(GQ(f_));o.listenProvider_.stopListening(mW(f_),R_)})),function vde(o,e){for(let i=0;i<e.length;++i){const d=e[i];if(!d._queryParams.loadsAllData()){const _=GQ(d),B=o.queryToTagMap.get(_);o.queryToTagMap.delete(_),o.tagToQueryMap.delete(B)}}}(o,_h)}return _t}function p8(o,e,i){const d=e._path;let _=null,B=!1;o.syncPointTree_.foreachOnPath(d,(f_,R_)=>{const V_=VO(f_,d);_=_||QP(R_,V_),B=B||t4(R_)});let ga,_t=o.syncPointTree_.get(d);_t?(B=B||t4(_t),_=_||QP(_t,F1())):(_t=new $I,o.syncPointTree_=o.syncPointTree_.set(d,_t)),null!=_?ga=!0:(ga=!1,_=b1.EMPTY_NODE,o.syncPointTree_.subtree(d).foreachChild((R_,V_)=>{const Y_=QP(V_,F1());Y_&&(_=_.updateImmediateChild(R_,Y_))}));const _h=Vee(_t,e);if(!_h&&!e._queryParams.loadsAllData()){const f_=GQ(e);(0,M_.hu)(!o.queryToTagMap.has(f_),"View does not exist, but we have a tag");const R_=function yde(){return Roe++}();o.queryToTagMap.set(f_,R_),o.tagToQueryMap.set(R_,f_)}let l_=function cW(o,e,i,d,_,B){const _t=QJ(o,e,d,_,B);return o.views.has(e._queryIdentifier)||o.views.set(e._queryIdentifier,_t),function Ade(o,e){o.eventRegistrations_.push(e)}(_t,i),function GJ(o,e){const i=o.viewCache_.eventCache,d=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(DT,(B,_t)=>{d.push(PV(B,_t))}),i.isFullyInitialized()&&d.push(kV(i.getNode())),MQ(o,d,i.getNode(),e)}(_t,i)}(_t,e,i,jV(o.pendingWriteTree_,d),_,ga);if(!_h&&!B){const f_=HJ(_t,e);l_=l_.concat(function Wee(o,e,i){const d=e._path,_=VQ(o,e),B=jQ(o,i),_t=o.listenProvider_.startListening(mW(e),_,B.hashFn,B.onComplete),ga=o.syncPointTree_.subtree(d);if(_)(0,M_.hu)(!t4(ga.value),"If we're adding a query, it shouldn't be shadowed");else{const _h=ga.fold((_g,l_,f_)=>{if(!I1(_g)&&l_&&t4(l_))return[d8(l_).query];{let R_=[];return l_&&(R_=R_.concat(yS(l_).map(V_=>V_.query))),wR(f_,(V_,Y_)=>{R_=R_.concat(Y_)}),R_}});for(let _g=0;_g<_h.length;++_g){const l_=_h[_g];o.listenProvider_.stopListening(mW(l_),VQ(o,l_))}}return _t}(o,e,f_))}return l_}function r4(o,e,i){const _=o.pendingWriteTree_,B=o.syncPointTree_.findOnPath(e,(_t,ga)=>{const _g=QP(ga,VO(_t,e));if(_g)return _g});return XH(_,e,B,i,!0)}function g8(o,e){return qee(e,o.syncPointTree_,null,jV(o.pendingWriteTree_,F1()))}function qee(o,e,i,d){if(I1(o.path))return WJ(o,e,i,d);{const _=e.get(F1());null==i&&null!=_&&(i=QP(_,F1()));let B=[];const _t=p1(o.path),ga=o.operationForChild(_t),_h=e.children.get(_t);if(_h&&ga){const _g=i?i.getImmediateChild(_t):null,l_=Pee(d,_t);B=B.concat(qee(ga,_h,_g,l_))}return _&&(B=B.concat(l8(_,o,d,i))),B}}function WJ(o,e,i,d){const _=e.get(F1());null==i&&null!=_&&(i=QP(_,F1()));let B=[];return e.children.inorderTraversal((_t,ga)=>{const _h=i?i.getImmediateChild(_t):null,_g=Pee(d,_t),l_=o.operationForChild(_t);l_&&(B=B.concat(WJ(l_,ga,_h,_g)))}),_&&(B=B.concat(l8(_,o,d,i))),B}function jQ(o,e){const i=e.query,d=VQ(o,i);return{hashFn:()=>(function X3(o){return o.viewCache_.serverCache.getNode()}(e)||b1.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return d?function qJ(o,e,i){const d=pW(o,i);if(d){const _=gW(d),B=_.path,_t=_.queryId,ga=VO(B,e);return KJ(o,B,new yM(OU(_t),ga))}return[]}(o,i._path,d):function dW(o,e){return g8(o,new yM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(o,i._path);{const B=function iJ(o,e){let i="Unknown Error";"too_big"===o?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===o?i="Client doesn't have permission to access the desired data.":"unavailable"===o&&(i="The service is unavailable");const d=new Error(o+" at "+e._path.toString()+": "+i);return d.code=o.toUpperCase(),d}(_,i);return hW(o,i,null,B)}}}}function VQ(o,e){const i=GQ(e);return o.queryToTagMap.get(i)}function GQ(o){return o._path.toString()+"$"+o._queryIdentifier}function pW(o,e){return o.tagToQueryMap.get(e)}function gW(o){const e=o.indexOf("$");return(0,M_.hu)(-1!==e&&e<o.length-1,"Bad queryKey."),{queryId:o.substr(e+1),path:new w1(o.substr(0,e))}}function KJ(o,e,i){const d=o.syncPointTree_.get(e);return(0,M_.hu)(d,"Missing sync point for query tag that we're tracking"),l8(d,i,jV(o.pendingWriteTree_,e),null)}function mW(o){return o._queryParams.loadsAllData()&&!o._queryParams.isDefault()?new(function Gee(){return(0,M_.hu)(h8,"Reference.ts has not been loaded"),h8}())(o._repo,o._path):o}class VV{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new VV(i)}node(){return this.node_}}class zJ{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=jT(this.path_,e);return new zJ(this.syncTree_,i)}node(){return r4(this.syncTree_,this.path_)}}const AW=function(o,e,i){return o&&"object"==typeof o?((0,M_.hu)(".sv"in o,"Unexpected leaf node or priority contents"),"string"==typeof o[".sv"]?QQ(o[".sv"],e,i):"object"==typeof o[".sv"]?_W(o[".sv"],e):void(0,M_.hu)(!1,"Unexpected server value: "+JSON.stringify(o,null,2))):o},QQ=function(o,e,i){if("timestamp"===o)return i.timestamp;(0,M_.hu)(!1,"Unexpected server value: "+o)},_W=function(o,e,i){o.hasOwnProperty("increment")||(0,M_.hu)(!1,"Unexpected server value: "+JSON.stringify(o,null,2));const d=o.increment;"number"!=typeof d&&(0,M_.hu)(!1,"Unexpected increment value: "+d);const _=e.node();if((0,M_.hu)(null!=_,"Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return d;const _t=_.getValue();return"number"!=typeof _t?d:_t+d},YJ=function(o,e,i,d){return JJ(e,new zJ(i,o),d)},m8=function(o,e,i){return JJ(o,new VV(e),i)};function JJ(o,e,i){const d=o.getPriority().val(),_=AW(d,e.getImmediateChild(".priority"),i);let B;if(o.isLeafNode()){const _t=o,ga=AW(_t.getValue(),e,i);return ga!==_t.getValue()||_!==_t.getPriority().val()?new OV(ga,_T(_)):o}{const _t=o;return B=_t,_!==_t.getPriority().val()&&(B=B.updatePriority(new OV(_))),_t.forEachChild(DT,(ga,_h)=>{const _g=JJ(_h,e.getImmediateChild(ga),i);_g!==_h&&(B=B.updateImmediateChild(ga,_g))}),B}}class $J{constructor(e="",i=null,d={children:{},childCount:0}){this.name=e,this.parent=i,this.node=d}}function HP(o,e){let i=e instanceof w1?e:new w1(e),d=o,_=p1(i);for(;null!==_;){const B=(0,M_.DV)(d.node.children,_)||{children:{},childCount:0};d=new $J(_,d,B),i=cT(i),_=p1(i)}return d}function GV(o){return o.node.value}function ZJ(o,e){o.node.value=e,vW(o)}function QV(o){return o.node.childCount>0}function HQ(o,e){wR(o.node.children,(i,d)=>{e(new $J(i,o,d))})}function Kee(o,e,i,d){i&&!d&&e(o),HQ(o,_=>{Kee(_,e,!0,d)}),i&&d&&e(o)}function i4(o){return new w1(null===o.parent?o.name:i4(o.parent)+"/"+o.name)}function vW(o){null!==o.parent&&function Yee(o,e,i){const d=function Noe(o){return void 0===GV(o)&&!QV(o)}(i),_=(0,M_.r3)(o.node.children,e);d&&_?(delete o.node.children[e],o.node.childCount--,vW(o)):!d&&!_&&(o.node.children[e]=i.node,o.node.childCount++,vW(o))}(o.parent,o.name,o)}const A8=/[\[\].#$\/\u0000-\u001F\u007F]/,XJ=/[\[\].#$\u0000-\u001F\u007F]/,yW=10485760,qQ=function(o){return"string"==typeof o&&0!==o.length&&!A8.test(o)},Jee=function(o){return"string"==typeof o&&0!==o.length&&!XJ.test(o)},WQ=function(o){return null===o||"string"==typeof o||"number"==typeof o&&!pQ(o)||o&&"object"==typeof o&&(0,M_.r3)(o,".sv")},qP=function(o,e,i,d){d&&void 0===e||o4((0,M_.gK)(o,"value"),e,i)},o4=function(o,e,i){const d=i instanceof w1?new lee(i,o):i;if(void 0===e)throw new Error(o+"contains undefined "+vM(d));if("function"==typeof e)throw new Error(o+"contains a function "+vM(d)+" with contents = "+e.toString());if(pQ(e))throw new Error(o+"contains "+e.toString()+" "+vM(d));if("string"==typeof e&&e.length>yW/3&&(0,M_.ug)(e)>yW)throw new Error(o+"contains a string greater than "+yW+" utf8 bytes "+vM(d)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let _=!1,B=!1;if(wR(e,(_t,ga)=>{if(".value"===_t)_=!0;else if(".priority"!==_t&&".sv"!==_t&&(B=!0,!qQ(_t)))throw new Error(o+" contains an invalid key ("+_t+") "+vM(d)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dee(o,e){o.parts_.length>0&&(o.byteLength_+=1),o.parts_.push(e),o.byteLength_+=(0,M_.ug)(e),AJ(o)})(d,_t),o4(o,ga,d),function mJ(o){const e=o.parts_.pop();o.byteLength_-=(0,M_.ug)(e),o.parts_.length>0&&(o.byteLength_-=1)}(d)}),_&&B)throw new Error(o+' contains ".value" child '+vM(d)+" in addition to actual children.")}},_8=function(o,e,i,d){if(d&&void 0===e)return;const _=(0,M_.gK)(o,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(_+" must be an object containing the children to replace.");const B=[];wR(e,(_t,ga)=>{const _h=new w1(_t);if(o4(_,ga,jT(i,_h)),".priority"===z3(_h)&&!WQ(ga))throw new Error(_+"contains an invalid value for '"+_h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");B.push(_h)}),function(o,e){let i,d;for(i=0;i<e.length;i++){d=e[i];const B=z5(d);for(let _t=0;_t<B.length;_t++)if((".priority"!==B[_t]||_t!==B.length-1)&&!qQ(B[_t]))throw new Error(o+"contains an invalid key ("+B[_t]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(EQ);let _=null;for(i=0;i<e.length;i++){if(d=e[i],null!==_&&B2(_,d))throw new Error(o+"contains a path "+_.toString()+" that is ancestor of another path "+d.toString());_=d}}(_,B)},KQ=function(o,e,i){if(!i||void 0!==e){if(pQ(e))throw new Error((0,M_.gK)(o,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!WQ(e))throw new Error((0,M_.gK)(o,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zQ=function(o,e,i,d){if(!(d&&void 0===i||qQ(i)))throw new Error((0,M_.gK)(o,e)+'was an invalid key = "'+i+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},HV=function(o,e,i,d){if(!(d&&void 0===i||Jee(i)))throw new Error((0,M_.gK)(o,e)+'was an invalid path = "'+i+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dN=function(o,e){if(".info"===p1(e))throw new Error(o+" failed = Can't modify data under /.info/")},v8=function(o,e){const i=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!qQ(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==i.length&&!function(o){return o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Jee(o)}(i))throw new Error((0,M_.gK)(o,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class EW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qV(o,e){let i=null;for(let d=0;d<e.length;d++){const _=e[d],B=_.getPath();null!==i&&!GH(B,i.path)&&(o.eventLists_.push(i),i=null),null===i&&(i={events:[],path:B}),i.events.push(_)}i&&o.eventLists_.push(i)}function IW(o,e,i){qV(o,i),e$(o,d=>GH(d,e))}function WP(o,e,i){qV(o,i),e$(o,d=>B2(d,e)||B2(e,d))}function e$(o,e){o.recursionDepth_++;let i=!0;for(let d=0;d<o.eventLists_.length;d++){const _=o.eventLists_[d];_&&(e(_.path)?(Zee(o.eventLists_[d]),o.eventLists_[d]=null):i=!1)}i&&(o.eventLists_=[]),o.recursionDepth_--}function Zee(o){for(let e=0;e<o.events.length;e++){const i=o.events[e];if(null!==i){o.events[e]=null;const d=i.getEventRunner();yU&&yO("event: "+i.toString()),G3(d)}}}const t$="repo_interrupt";class xoe{constructor(e,i,d,_){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=d,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=OQ(),this.transactionQueueTree_=new $J,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function y8(o){const i=o.infoData_.getNode(new w1(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+i}function s4(o){return function(o){return(o=o||{}).timestamp=o.timestamp||(new Date).getTime(),o}({timestamp:y8(o)})}function bW(o,e,i,d,_){o.dataUpdateCount++;const B=new w1(e);i=o.interceptServerDataCallback_?o.interceptServerDataCallback_(e,i):i;let _t=[];if(_)if(d){const _h=(0,M_.UI)(i,_g=>_T(_g));_t=function fW(o,e,i,d){const _=pW(o,d);if(_){const B=gW(_),_t=B.path,ga=B.queryId,_h=VO(_t,e),_g=NT.fromObject(i);return KJ(o,_t,new NU(OU(ga),_h,_g))}return[]}(o.serverSyncTree_,B,_h,_)}else{const _h=_T(i);_t=function Hee(o,e,i,d){const _=pW(o,d);if(null!=_){const B=gW(_),_t=B.path,ga=B.queryId,_h=VO(_t,e);return KJ(o,_t,new DU(OU(ga),_h,i))}return[]}(o.serverSyncTree_,B,_h,_)}else if(d){const _h=(0,M_.UI)(i,_g=>_T(_g));_t=function xU(o,e,i){const d=NT.fromObject(i);return g8(o,new NU({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,d))}(o.serverSyncTree_,B,_h)}else{const _h=_T(i);_t=FQ(o.serverSyncTree_,B,_h)}let ga=B;_t.length>0&&(ga=YV(o,B)),WP(o.eventQueue_,ga,_t)}function Xee(o,e){WV(o,"connected",e),!1===e&&function Loe(o){JQ(o,"onDisconnectEvents");const e=s4(o),i=OQ();VP(o.onDisconnect_,F1(),(_,B)=>{const _t=YJ(_,B,o.serverSyncTree_,e);MV(i,_,_t)});let d=[];VP(i,F1(),(_,B)=>{d=d.concat(FQ(o.serverSyncTree_,_,B));const _t=wW(o,_);YV(o,_t)}),o.onDisconnect_=OQ(),WP(o.eventQueue_,F1(),d)}(o)}function WV(o,e,i){const d=new w1("/.info/"+e),_=_T(i);o.infoData_.updateSnapshot(d,_);const B=FQ(o.infoSyncTree_,d,_);WP(o.eventQueue_,d,B)}function CW(o){return o.nextWriteId_++}function i$(o,e,i,d,_){JQ(o,"set",{path:e.toString(),value:i,priority:d});const B=s4(o),_t=_T(i,d),ga=r4(o.serverSyncTree_,e),_h=m8(_t,ga,B),_g=CW(o),l_=f8(o.serverSyncTree_,e,_h,_g,!0);qV(o.eventQueue_,l_),o.server_.put(e.toString(),_t.val(!0),(R_,V_)=>{const Y_="ok"===R_;Y_||CR("set at "+e+" failed: "+R_);const R0=n4(o.serverSyncTree_,_g,!Y_);WP(o.eventQueue_,e,R0),NL(0,_,R_,V_)});const f_=wW(o,e);YV(o,f_),WP(o.eventQueue_,f_,[])}function KV(o,e,i){o.server_.onDisconnectCancel(e.toString(),(d,_)=>{"ok"===d&&RJ(o.onDisconnect_,e),NL(0,i,d,_)})}function zV(o,e,i,d){const _=_T(i);o.server_.onDisconnectPut(e.toString(),_.val(!0),(B,_t)=>{"ok"===B&&MV(o.onDisconnect_,e,_),NL(0,d,B,_t)})}function EM(o,e,i){let d;d=".info"===p1(e._path)?hW(o.infoSyncTree_,e,i):hW(o.serverSyncTree_,e,i),IW(o.eventQueue_,e._path,d)}function I8(o){o.persistentConnection_&&o.persistentConnection_.interrupt(t$)}function JQ(o,...e){let i="";o.persistentConnection_&&(i=o.persistentConnection_.id+":"),yO(i,...e)}function NL(o,e,i,d){e&&G3(()=>{if("ok"===i)e(null);else{const _=(i||"error").toUpperCase();let B=_;d&&(B+=": "+d);const _t=new Error(B);_t.code=_,e(_t)}})}function s$(o,e,i){return r4(o.serverSyncTree_,e,i)||b1.EMPTY_NODE}function LU(o,e=o.transactionQueueTree_){if(e||XQ(o,e),GV(e)){const i=ZQ(o,e);(0,M_.hu)(i.length>0,"Sending zero length transaction queue"),i.every(_=>0===_.status)&&function Moe(o,e,i){const d=i.map(_g=>_g.currentWriteId),_=s$(o,e,d);let B=_;const _t=_.hash();for(let _g=0;_g<i.length;_g++){const l_=i[_g];(0,M_.hu)(0===l_.status,"tryToSendTransactionQueue_: items in queue should all be run."),l_.status=1,l_.retryCount++;const f_=VO(e,l_.path);B=B.updateChild(f_,l_.currentOutputSnapshotRaw)}const ga=B.val(!0),_h=e;o.server_.put(_h.toString(),ga,_g=>{JQ(o,"transaction put response",{path:_h.toString(),status:_g});let l_=[];if("ok"===_g){const f_=[];for(let R_=0;R_<i.length;R_++)i[R_].status=2,l_=l_.concat(n4(o.serverSyncTree_,i[R_].currentWriteId)),i[R_].onComplete&&f_.push(()=>i[R_].onComplete(null,!0,i[R_].currentOutputSnapshotResolved)),i[R_].unwatcher();XQ(o,HP(o.transactionQueueTree_,e)),LU(o,o.transactionQueueTree_),WP(o.eventQueue_,e,l_);for(let R_=0;R_<f_.length;R_++)G3(f_[R_])}else{if("datastale"===_g)for(let f_=0;f_<i.length;f_++)i[f_].status=3===i[f_].status?4:0;else{CR("transaction at "+_h.toString()+" failed: "+_g);for(let f_=0;f_<i.length;f_++)i[f_].status=4,i[f_].abortReason=_g}YV(o,e)}},_t)}(o,i4(e),i)}else QV(e)&&HQ(e,i=>{LU(o,i)})}function YV(o,e){const i=$Q(o,e),d=i4(i);return function ite(o,e,i){if(0===e.length)return;const d=[];let _=[];const _t=e.filter(ga=>0===ga.status).map(ga=>ga.currentWriteId);for(let ga=0;ga<e.length;ga++){const _h=e[ga],_g=VO(i,_h.path);let f_,l_=!1;if((0,M_.hu)(null!==_g,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_h.status)l_=!0,f_=_h.abortReason,_=_.concat(n4(o.serverSyncTree_,_h.currentWriteId,!0));else if(0===_h.status)if(_h.retryCount>=25)l_=!0,f_="maxretry",_=_.concat(n4(o.serverSyncTree_,_h.currentWriteId,!0));else{const R_=s$(o,_h.path,_t);_h.currentInputSnapshot=R_;const V_=e[ga].update(R_.val());if(void 0!==V_){o4("transaction failed: Data returned ",V_,_h.path);let Y_=_T(V_);"object"==typeof V_&&null!=V_&&(0,M_.r3)(V_,".priority")||(Y_=Y_.updatePriority(R_.getPriority()));const V0=_h.currentWriteId,J0=s4(o),MI=m8(Y_,R_,J0);_h.currentOutputSnapshotRaw=Y_,_h.currentOutputSnapshotResolved=MI,_h.currentWriteId=CW(o),_t.splice(_t.indexOf(V0),1),_=_.concat(f8(o.serverSyncTree_,_h.path,MI,_h.currentWriteId,_h.applyLocally)),_=_.concat(n4(o.serverSyncTree_,V0,!0))}else l_=!0,f_="nodata",_=_.concat(n4(o.serverSyncTree_,_h.currentWriteId,!0))}WP(o.eventQueue_,i,_),_=[],l_&&(e[ga].status=2,setTimeout(e[ga].unwatcher,Math.floor(0)),e[ga].onComplete&&d.push("nodata"===f_?()=>e[ga].onComplete(null,!1,e[ga].currentInputSnapshot):()=>e[ga].onComplete(new Error(f_),!1,null)))}XQ(o,o.transactionQueueTree_);for(let ga=0;ga<d.length;ga++)G3(d[ga]);LU(o,o.transactionQueueTree_)}(o,ZQ(o,i),d),d}function $Q(o,e){let i,d=o.transactionQueueTree_;for(i=p1(e);null!==i&&void 0===GV(d);)d=HP(d,i),i=p1(e=cT(e));return d}function ZQ(o,e){const i=[];return c4(o,e,i),i.sort((d,_)=>d.order-_.order),i}function c4(o,e,i){const d=GV(e);if(d)for(let _=0;_<d.length;_++)i.push(d[_]);HQ(e,_=>{c4(o,_,i)})}function XQ(o,e){const i=GV(e);if(i){let d=0;for(let _=0;_<i.length;_++)2!==i[_].status&&(i[d]=i[_],d++);i.length=d,ZJ(e,i.length>0?i:void 0)}HQ(e,d=>{XQ(o,d)})}function wW(o,e){const i=i4($Q(o,e)),d=HP(o.transactionQueueTree_,e);return function zee(o,e,i){let d=i?o:o.parent;for(;null!==d;){if(e(d))return!0;d=d.parent}}(d,_=>{e7(o,_)}),e7(o,d),Kee(d,_=>{e7(o,_)}),i}function e7(o,e){const i=GV(e);if(i){const d=[];let _=[],B=-1;for(let _t=0;_t<i.length;_t++)3===i[_t].status||(1===i[_t].status?((0,M_.hu)(B===_t-1,"All SENT items should be at beginning of queue."),B=_t,i[_t].status=3,i[_t].abortReason="set"):((0,M_.hu)(0===i[_t].status,"Unexpected transaction status in abort"),i[_t].unwatcher(),_=_.concat(n4(o.serverSyncTree_,i[_t].currentWriteId,!0)),i[_t].onComplete&&d.push(i[_t].onComplete.bind(null,new Error("set"),!1,null))));-1===B?ZJ(e,void 0):i.length=B+1,WP(o.eventQueue_,i4(e),_);for(let _t=0;_t<d.length;_t++)G3(d[_t])}}const t7=function(o,e){const i=Foe(o),d=i.namespace;return"firebase.com"===i.domain&&AM(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!d||"undefined"===d)&&"localhost"!==i.domain&&AM("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&CR("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xH(i.host,i.secure,d,"ws"===i.scheme||"wss"===i.scheme,e,"",d!==i.subdomain),path:new w1(i.pathString)}},Foe=function(o){let e="",i="",d="",_="",B="",_t=!0,ga="https",_h=443;if("string"==typeof o){let _g=o.indexOf("//");_g>=0&&(ga=o.substring(0,_g-1),o=o.substring(_g+2));let l_=o.indexOf("/");-1===l_&&(l_=o.length);let f_=o.indexOf("?");-1===f_&&(f_=o.length),e=o.substring(0,Math.min(l_,f_)),l_<f_&&(_=function Boe(o){let e="";const i=o.split("/");for(let d=0;d<i.length;d++)if(i[d].length>0){let _=i[d];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch(B){}e+="/"+_}return e}(o.substring(l_,f_)));const R_=function Uoe(o){const e={};"?"===o.charAt(0)&&(o=o.substring(1));for(const i of o.split("&")){if(0===i.length)continue;const d=i.split("=");2===d.length?e[decodeURIComponent(d[0])]=decodeURIComponent(d[1]):CR(`Invalid query segment '${i}' in query '${o}'`)}return e}(o.substring(Math.min(o.length,f_)));_g=e.indexOf(":"),_g>=0?(_t="https"===ga||"wss"===ga,_h=parseInt(e.substring(_g+1),10)):_g=e.length;const V_=e.slice(0,_g);if("localhost"===V_.toLowerCase())i="localhost";else if(V_.split(".").length<=2)i=V_;else{const Y_=e.indexOf(".");d=e.substring(0,Y_).toLowerCase(),i=e.substring(Y_+1),B=d}"ns"in R_&&(B=R_.ns)}return{host:e,port:_h,domain:i,subdomain:d,secure:_t,scheme:ga,pathString:_,namespace:B}};class joe{constructor(e,i,d,_){this.eventType=e,this.eventRegistration=i,this.snapshot=d,this.prevName=_}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,M_.Pz)(this.snapshot.exportVal())}}class ote{constructor(e,i,d){this.eventRegistration=e,this.error=i,this.path=d}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ste{constructor(e,i){this.snapshotCallback=e,this.cancelCallback=i}onValue(e,i){this.snapshotCallback.call(null,e,i)}onCancel(e){return(0,M_.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class u4{constructor(e,i){this._repo=e,this._path=i}cancel(){const e=new M_.BH;return KV(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){dN("OnDisconnect.remove",this._path);const e=new M_.BH;return zV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){dN("OnDisconnect.set",this._path),qP("OnDisconnect.set",e,this._path,!1);const i=new M_.BH;return zV(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}setWithPriority(e,i){dN("OnDisconnect.setWithPriority",this._path),qP("OnDisconnect.setWithPriority",e,this._path,!1),KQ("OnDisconnect.setWithPriority",i,!1);const d=new M_.BH;return function tte(o,e,i,d,_){const B=_T(i,d);o.server_.onDisconnectPut(e.toString(),B.val(!0),(_t,ga)=>{"ok"===_t&&MV(o.onDisconnect_,e,B),NL(0,_,_t,ga)})}(this._repo,this._path,e,i,d.wrapCallback(()=>{})),d.promise}update(e){dN("OnDisconnect.update",this._path),_8("OnDisconnect.update",e,this._path,!1);const i=new M_.BH;return function YQ(o,e,i,d){if((0,M_.xb)(i))return yO("onDisconnect().update() called with empty data.  Don't do anything."),void NL(0,d,"ok",void 0);o.server_.onDisconnectMerge(e.toString(),i,(_,B)=>{"ok"===_&&wR(i,(_t,ga)=>{const _h=_T(ga);MV(o.onDisconnect_,jT(e,_t),_h)}),NL(0,d,_,B)})}(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}}class JS{constructor(e,i,d,_){this._repo=e,this._path=i,this._queryParams=d,this._orderByCalled=_}get key(){return I1(this._path)?null:z3(this._path)}get ref(){return new KP(this._repo,this._path)}get _queryIdentifier(){const e=SJ(this._queryParams),i=ZX(e);return"{}"===i?"default":i}get _queryObject(){return SJ(this._queryParams)}isEqual(e){if(!((e=(0,M_.m9)(e))instanceof JS))return!1;const i=this._repo===e._repo,d=GH(this._path,e._path);return i&&d&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function uee(o){let e="";for(let i=o.pieceNum_;i<o.pieces_.length;i++)""!==o.pieces_[i]&&(e+="/"+encodeURIComponent(String(o.pieces_[i])));return e||"/"}(this._path)}}function MU(o,e){if(!0===o._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function JV(o){let e=null,i=null;if(o.hasStart()&&(e=o.getIndexStartValue()),o.hasEnd()&&(i=o.getIndexEndValue()),o.getIndex()===TU){const d="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(o.hasStart()){if(o.getIndexStartName()!==XR)throw new Error(d);if("string"!=typeof e)throw new Error(_)}if(o.hasEnd()){if(o.getIndexEndName()!==eO)throw new Error(d);if("string"!=typeof i)throw new Error(_)}}else if(o.getIndex()===DT){if(null!=e&&!WQ(e)||null!=i&&!WQ(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,M_.hu)(o.getIndex()instanceof TQ||o.getIndex()===J3,"unknown index type."),null!=e&&"object"==typeof e||null!=i&&"object"==typeof i)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function n7(o){if(o.hasStart()&&o.hasEnd()&&o.hasLimit()&&!o.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class KP extends JS{constructor(e,i){super(e,i,new n8,!1)}get parent(){const e=gJ(this._path);return null===e?null:new KP(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class b8{constructor(e,i,d){this._node=e,this.ref=i,this._index=d}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const i=new w1(e),d=l4(this.ref,e);return new b8(this._node.getChild(i),d,DT)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(d,_)=>e(new b8(_,l4(this.ref,d),DT)))}hasChild(e){const i=new w1(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function a$(o,e){return(o=(0,M_.m9)(o))._checkNotDeleted("ref"),void 0!==e?l4(o._root,e):o._root}function ate(o,e){(o=(0,M_.m9)(o))._checkNotDeleted("refFromURL");const i=t7(e,o._repo.repoInfo_.nodeAdmin);v8("refFromURL",i);const d=i.repoInfo;return!o._repo.repoInfo_.isCustomHost()&&d.host!==o._repo.repoInfo_.host&&AM("refFromURL: Host name does not match the current database: (found "+d.host+" but expected "+o._repo.repoInfo_.host+")"),a$(o,i.path.toString())}function l4(o,e){return null===p1((o=(0,M_.m9)(o))._path)?(i=e,i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),HV("child","path",i,!1)):HV("child","path",e,!1),new KP(o._repo,jT(o._path,e));var i}function TW(o,e){o=(0,M_.m9)(o),dN("set",o._path),qP("set",e,o._path,!1);const i=new M_.BH;return i$(o._repo,o._path,e,null,i.wrapCallback(()=>{})),i.promise}function Qoe(o,e){_8("update",e,o._path,!1);const i=new M_.BH;return function o$(o,e,i,d){JQ(o,"update",{path:e.toString(),value:i});let _=!0;const B=s4(o),_t={};if(wR(i,(ga,_h)=>{_=!1,_t[ga]=YJ(jT(e,ga),_T(_h),o.serverSyncTree_,B)}),_)yO("update() called with empty data.  Don't do anything."),NL(0,d,"ok",void 0);else{const ga=CW(o),_h=function UQ(o,e,i,d){!function See(o,e,i,d){(0,M_.hu)(d>o.lastWriteId,"Stacking an older merge on top of newer ones"),o.allWrites.push({path:e,children:i,writeId:d,visible:!0}),o.visibleWrites=LJ(o.visibleWrites,e,i),o.lastWriteId=d}(o.pendingWriteTree_,e,i,d);const _=NT.fromObject(i);return g8(o,new NU({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,_))}(o.serverSyncTree_,e,_t,ga);qV(o.eventQueue_,_h),o.server_.merge(e.toString(),i,(_g,l_)=>{const f_="ok"===_g;f_||CR("update at "+e+" failed: "+_g);const R_=n4(o.serverSyncTree_,ga,!f_),V_=R_.length>0?YV(o,e):e;WP(o.eventQueue_,V_,R_),NL(0,d,_g,l_)}),wR(i,_g=>{const l_=wW(o,jT(e,_g));YV(o,l_)}),WP(o.eventQueue_,e,[])}}(o._repo,o._path,e,i.wrapCallback(()=>{})),i.promise}function SW(o){return function a4(o,e){const i=function Ooe(o,e){const i=e._path;let d=null;o.syncPointTree_.foreachOnPath(i,(_g,l_)=>{const f_=VO(_g,i);d=d||QP(l_,f_)});let _=o.syncPointTree_.get(i);_?d=d||QP(_,F1()):(_=new $I,o.syncPointTree_=o.syncPointTree_.set(i,_));const B=null!=d,_t=B?new kU(d,!0,!1):null;return function Coe(o){return j2(o.viewCache_)}(QJ(_,e,jV(o.pendingWriteTree_,e._path),B?_t.getNode():b1.EMPTY_NODE,B))}(o.serverSyncTree_,e);return null!=i?Promise.resolve(i):o.server_.get(e).then(d=>{const _=_T(d).withIndex(e._queryParams.getIndex()),B=FQ(o.serverSyncTree_,e._path,_);return IW(o.eventQueue_,e._path,B),Promise.resolve(_)},d=>(JQ(o,"get for query "+(0,M_.Pz)(e)+" failed: "+d),Promise.reject(new Error(d))))}((o=(0,M_.m9)(o))._repo,o).then(e=>new b8(e,new KP(o._repo,o._path),o._queryParams.getIndex()))}class C8{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,i){const d=i._queryParams.getIndex();return new joe("value",this,new b8(e.snapshotNode,new KP(i._repo,i._path),d))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new ote(this,e,i):null}matches(e){return e instanceof C8&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class r7{constructor(e,i){this.eventType=e,this.callbackContext=i}respondsTo(e){let i="children_added"===e?"child_added":e;return i="children_removed"===i?"child_removed":i,this.eventType===i}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new ote(this,e,i):null}createEvent(e,i){(0,M_.hu)(null!=e.childName,"Child events should have a childName.");const d=l4(new KP(i._repo,i._path),e.childName),_=i._queryParams.getIndex();return new joe(e.type,this,new b8(e.snapshotNode,d,_),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof r7&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function d4(o,e,i,d,_){let B;if("object"==typeof d&&(B=void 0,_=d),"function"==typeof d&&(B=d),_&&_.onlyOnce){const _h=i,_g=(l_,f_)=>{EM(o._repo,o,ga),_h(l_,f_)};_g.userCallback=i.userCallback,_g.context=i.context,i=_g}const _t=new ste(i,B||void 0),ga="value"===e?new C8(_t):new r7(e,_t);return function E8(o,e,i){let d;d=".info"===p1(e._path)?p8(o.infoSyncTree_,e,i):p8(o.serverSyncTree_,e,i),IW(o.eventQueue_,e._path,d)}(o._repo,o,ga),()=>EM(o._repo,o,ga)}function h4(o,e,i,d){return d4(o,"value",e,i,d)}function c$(o,e,i,d){return d4(o,"child_added",e,i,d)}function RW(o,e,i,d){return d4(o,"child_changed",e,i,d)}function u$(o,e,i,d){return d4(o,"child_moved",e,i,d)}function OW(o,e,i,d){return d4(o,"child_removed",e,i,d)}function DW(o,e,i){let d=null;const _=i?new ste(i):null;"value"===e?d=new C8(_):e&&(d=new r7(e,_)),EM(o._repo,o,d)}class kL{}class l$ extends kL{constructor(e,i){super(),this._value=e,this._key=i}_apply(e){qP("endAt",this._value,e._path,!0);const i=LV(e._queryParams,this._value,this._key);if(n7(i),JV(i),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new JS(e._repo,e._path,i,e._orderByCalled)}}class qoe extends kL{constructor(e,i){super(),this._value=e,this._key=i}_apply(e){qP("endBefore",this._value,e._path,!1);const i=function yee(o,e,i){let d,_;return o.index_===TU?("string"==typeof e&&(e=KH(e)),_=LV(o,e,i)):(d=null==i?XR:KH(i),_=LV(o,e,d)),_.endBeforeSet_=!0,_}(e._queryParams,this._value,this._key);if(n7(i),JV(i),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new JS(e._repo,e._path,i,e._orderByCalled)}}class hte extends kL{constructor(e,i){super(),this._value=e,this._key=i}_apply(e){qP("startAt",this._value,e._path,!0);const i=YH(e._queryParams,this._value,this._key);if(n7(i),JV(i),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new JS(e._repo,e._path,i,e._orderByCalled)}}class i7 extends kL{constructor(e,i){super(),this._value=e,this._key=i}_apply(e){qP("startAfter",this._value,e._path,!1);const i=function vee(o,e,i){let d;if(o.index_===TU)"string"==typeof e&&(e=CJ(e)),d=YH(o,e,i);else{let _;_=null==i?eO:CJ(i),d=YH(o,e,_)}return d.startAfterSet_=!0,d}(e._queryParams,this._value,this._key);if(n7(i),JV(i),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new JS(e._repo,e._path,i,e._orderByCalled)}}class d$ extends kL{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new JS(e._repo,e._path,function poe(o,e){const i=o.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="l",i}(e._queryParams,this._limit),e._orderByCalled)}}class Koe extends kL{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new JS(e._repo,e._path,function goe(o,e){const i=o.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="r",i}(e._queryParams,this._limit),e._orderByCalled)}}class $V extends kL{constructor(e){super(),this._path=e}_apply(e){MU(e,"orderByChild");const i=new w1(this._path);if(I1(i))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const d=new TQ(i),_=r8(e._queryParams,d);return JV(_),new JS(e._repo,e._path,_,!0)}}class gte extends kL{_apply(e){MU(e,"orderByKey");const i=r8(e._queryParams,TU);return JV(i),new JS(e._repo,e._path,i,!0)}}class o7 extends kL{_apply(e){MU(e,"orderByPriority");const i=r8(e._queryParams,DT);return JV(i),new JS(e._repo,e._path,i,!0)}}class Yoe extends kL{_apply(e){MU(e,"orderByValue");const i=r8(e._queryParams,J3);return JV(i),new JS(e._repo,e._path,i,!0)}}class Ate extends kL{constructor(e,i){super(),this._value=e,this._key=i}_apply(e){if(qP("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new l$(this._value,this._key)._apply(new hte(this._value,this._key)._apply(e))}}function YN(o,...e){let i=(0,M_.m9)(o);for(const d of e)i=d._apply(i);return i}(function aW(o){(0,M_.hu)(!sW,"__referenceConstructor has already been defined"),sW=o})(KP),function lW(o){(0,M_.hu)(!h8,"__referenceConstructor has already been defined"),h8=o}(KP);const kW={};function xW(o,e,i,d,_){let B=d||o.options.databaseURL;void 0===B&&(o.options.projectId||AM("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yO("Using default host for project ",o.options.projectId),B=`${o.options.projectId}-default-rtdb.firebaseio.com`);let _h,_g,_t=t7(B,_),ga=_t.repoInfo;"undefined"!=typeof process&&process.env&&(_g=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_g?(_h=!0,B=`http://${_g}?ns=${ga.namespace}`,_t=t7(B,_),ga=_t.repoInfo):_h=!_t.repoInfo.secure;const l_=_&&_h?new BP(BP.OWNER):new wV(o.name,o.options,e);v8("Invalid Firebase Database URL",_t),I1(_t.path)||AM("Database URL must point to the root of a Firebase Database (not including a child path).");const f_=function f$(o,e,i,d){let _=kW[e.name];_||(_={},kW[e.name]=_);let B=_[o.toURLString()];return B&&AM("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),B=new xoe(o,false,i,d),_[o.toURLString()]=B,B}(ga,o,l_,new OH(o.name,i));return new f4(f_,o)}class f4{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function r$(o,e,i){if(o.stats_=LH(o.repoInfo_),o.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)o.server_=new RQ(o.repoInfo_,(d,_,B,_t)=>{bW(o,d,_,B,_t)},o.authTokenProvider_,o.appCheckProvider_),setTimeout(()=>Xee(o,!0),0);else{if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,M_.Pz)(i)}catch(d){throw new Error("Invalid authOverride provided: "+d)}}o.persistentConnection_=new wU(o.repoInfo_,e,(d,_,B,_t)=>{bW(o,d,_,B,_t)},d=>{Xee(o,d)},d=>{!function ete(o,e){wR(e,(i,d)=>{WV(o,i,d)})}(o,d)},o.authTokenProvider_,o.appCheckProvider_,i),o.server_=o.persistentConnection_}o.authTokenProvider_.addTokenChangeListener(d=>{o.server_.refreshAuthToken(d)}),o.appCheckProvider_.addTokenChangeListener(d=>{o.server_.refreshAppCheckToken(d.token)}),o.statsReporter_=function hde(o,e){const i=o.toString();return uJ[i]||(uJ[i]=e()),uJ[i]}(o.repoInfo_,()=>new DJ(o.stats_,o.server_)),o.infoData_=new Eee,o.infoSyncTree_=new Qee({startListening:(d,_,B,_t)=>{let ga=[];const _h=o.infoData_.getNode(d._path);return _h.isEmpty()||(ga=FQ(o.infoSyncTree_,d._path,_h),setTimeout(()=>{_t("ok")},0)),ga},stopListening:()=>{}}),WV(o,"connected",!1),o.serverSyncTree_=new Qee({startListening:(d,_,B,_t)=>(o.server_.listen(d,B,_,(ga,_h)=>{const _g=_t(ga,_h);WP(o.eventQueue_,d._path,_g)}),[]),stopListening:(d,_)=>{o.server_.unlisten(d,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new KP(this._repo,F1())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ZV(o,e){const i=kW[e];(!i||i[o.key]!==o)&&AM(`Database ${e}(${o.repoInfo_}) has already been deleted.`),I8(o),delete i[o.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&AM("Cannot call "+e+" on a deleted database.")}}function p$(){aee.IS_TRANSPORT_INITIALIZED&&CR("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function g$(){p$(),EU.forceDisallow()}function LW(){p$(),K5.forceDisallow(),EU.forceAllow()}function Joe(o,e){zX(o,e)}const _$={".sv":"timestamp"};class JN{constructor(e,i){this.committed=e,this.snapshot=i}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wU.prototype.simpleListen=function(o,e){this.sendRequest("q",{p:o},e)},wU.prototype.echo=function(o,e){this.sendRequest("echo",{d:o},e)},function Ete(o){WX(dS.SDK_VERSION),(0,dS._registerComponent)(new LP.wA("database",(e,{instanceIdentifier:i})=>xW(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),i),"PUBLIC").setMultipleInstances(!0)),(0,dS.registerVersion)(qX,"0.13.0",o),(0,dS.registerVersion)(qX,"0.13.0","esm2017")}();const Ite=new SL.Yd("@firebase/database-compat"),bte=function(o){Ite.warn("FIREBASE WARNING: "+o)};class tse{constructor(e){this._delegate=e}cancel(e){(0,M_.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,M_.Wj)("OnDisconnect.cancel","onComplete",e,!0);const i=this._delegate.cancel();return e&&i.then(()=>e(null),d=>e(d)),i}remove(e){(0,M_.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,M_.Wj)("OnDisconnect.remove","onComplete",e,!0);const i=this._delegate.remove();return e&&i.then(()=>e(null),d=>e(d)),i}set(e,i){(0,M_.Dv)("OnDisconnect.set",1,2,arguments.length),(0,M_.Wj)("OnDisconnect.set","onComplete",i,!0);const d=this._delegate.set(e);return i&&d.then(()=>i(null),_=>i(_)),d}setWithPriority(e,i,d){(0,M_.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,M_.Wj)("OnDisconnect.setWithPriority","onComplete",d,!0);const _=this._delegate.setWithPriority(e,i);return d&&_.then(()=>d(null),B=>d(B)),_}update(e,i){if((0,M_.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const _={};for(let B=0;B<e.length;++B)_[""+B]=e[B];e=_,bte("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,M_.Wj)("OnDisconnect.update","onComplete",i,!0);const d=this._delegate.update(e);return i&&d.then(()=>i(null),_=>i(_)),d}}class a7{constructor(e,i){this.committed=e,this.snapshot=i}toJSON(){return(0,M_.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class IM{constructor(e,i){this._database=e,this._delegate=i}val(){return(0,M_.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,M_.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,M_.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,M_.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,M_.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),HV("DataSnapshot.child","path",e,!1),new IM(this._database,this._delegate.child(e))}hasChild(e){return(0,M_.Dv)("DataSnapshot.hasChild",1,1,arguments.length),HV("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,M_.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,M_.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,M_.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(i=>e(new IM(this._database,i)))}hasChildren(){return(0,M_.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,M_.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,M_.Dv)("DataSnapshot.ref",0,0,arguments.length),new fN(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class tO{constructor(e,i){this.database=e,this._delegate=i}on(e,i,d,_){var B;(0,M_.Dv)("Query.on",2,4,arguments.length),(0,M_.Wj)("Query.on","callback",i,!1);const _t=tO.getCancelAndContextArgs_("Query.on",d,_),ga=(_g,l_)=>{i.call(_t.context,new IM(this.database,_g),l_)};ga.userCallback=i,ga.context=_t.context;const _h=null===(B=_t.cancel)||void 0===B?void 0:B.bind(_t.context);switch(e){case"value":return h4(this._delegate,ga,_h),i;case"child_added":return c$(this._delegate,ga,_h),i;case"child_removed":return OW(this._delegate,ga,_h),i;case"child_changed":return RW(this._delegate,ga,_h),i;case"child_moved":return u$(this._delegate,ga,_h),i;default:throw new Error((0,M_.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,i,d){if((0,M_.Dv)("Query.off",0,3,arguments.length),function(o,e,i){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,M_.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,M_.Wj)("Query.off","callback",i,!0),(0,M_.lb)("Query.off","context",d,!0),i){const _=()=>{};_.userCallback=i,_.context=d,DW(this._delegate,e,_)}else DW(this._delegate,e)}get(){return SW(this._delegate).then(e=>new IM(this.database,e))}once(e,i,d,_){(0,M_.Dv)("Query.once",1,4,arguments.length),(0,M_.Wj)("Query.once","callback",i,!0);const B=tO.getCancelAndContextArgs_("Query.once",d,_),_t=new M_.BH,ga=(_g,l_)=>{const f_=new IM(this.database,_g);i&&i.call(B.context,f_,l_),_t.resolve(f_)};ga.userCallback=i,ga.context=B.context;const _h=_g=>{B.cancel&&B.cancel.call(B.context,_g),_t.reject(_g)};switch(e){case"value":h4(this._delegate,ga,_h,{onlyOnce:!0});break;case"child_added":c$(this._delegate,ga,_h,{onlyOnce:!0});break;case"child_removed":OW(this._delegate,ga,_h,{onlyOnce:!0});break;case"child_changed":RW(this._delegate,ga,_h,{onlyOnce:!0});break;case"child_moved":u$(this._delegate,ga,_h,{onlyOnce:!0});break;default:throw new Error((0,M_.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return _t.promise}limitToFirst(e){return(0,M_.Dv)("Query.limitToFirst",1,1,arguments.length),new tO(this.database,YN(this._delegate,function PL(o){if("number"!=typeof o||Math.floor(o)!==o||o<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new d$(o)}(e)))}limitToLast(e){return(0,M_.Dv)("Query.limitToLast",1,1,arguments.length),new tO(this.database,YN(this._delegate,function h$(o){if("number"!=typeof o||Math.floor(o)!==o||o<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Koe(o)}(e)))}orderByChild(e){return(0,M_.Dv)("Query.orderByChild",1,1,arguments.length),new tO(this.database,YN(this._delegate,function pte(o){if("$key"===o)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===o)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===o)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return HV("orderByChild","path",o,!1),new $V(o)}(e)))}orderByKey(){return(0,M_.Dv)("Query.orderByKey",0,0,arguments.length),new tO(this.database,YN(this._delegate,function zoe(){return new gte}()))}orderByPriority(){return(0,M_.Dv)("Query.orderByPriority",0,0,arguments.length),new tO(this.database,YN(this._delegate,function NW(){return new o7}()))}orderByValue(){return(0,M_.Dv)("Query.orderByValue",0,0,arguments.length),new tO(this.database,YN(this._delegate,function mte(){return new Yoe}()))}startAt(e=null,i){return(0,M_.Dv)("Query.startAt",0,2,arguments.length),new tO(this.database,YN(this._delegate,function fte(o=null,e){return zQ("startAt","key",e,!0),new hte(o,e)}(e,i)))}startAfter(e=null,i){return(0,M_.Dv)("Query.startAfter",0,2,arguments.length),new tO(this.database,YN(this._delegate,function Woe(o,e){return zQ("startAfter","key",e,!0),new i7(o,e)}(e,i)))}endAt(e=null,i){return(0,M_.Dv)("Query.endAt",0,2,arguments.length),new tO(this.database,YN(this._delegate,function Hoe(o,e){return zQ("endAt","key",e,!0),new l$(o,e)}(e,i)))}endBefore(e=null,i){return(0,M_.Dv)("Query.endBefore",0,2,arguments.length),new tO(this.database,YN(this._delegate,function dte(o,e){return zQ("endBefore","key",e,!0),new qoe(o,e)}(e,i)))}equalTo(e,i){return(0,M_.Dv)("Query.equalTo",1,2,arguments.length),new tO(this.database,YN(this._delegate,function _te(o,e){return zQ("equalTo","key",e,!0),new Ate(o,e)}(e,i)))}toString(){return(0,M_.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,M_.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,M_.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof tO))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,i,d){const _={cancel:void 0,context:void 0};if(i&&d)_.cancel=i,(0,M_.Wj)(e,"cancel",_.cancel,!0),_.context=d,(0,M_.lb)(e,"context",_.context,!0);else if(i)if("object"==typeof i&&null!==i)_.context=i;else{if("function"!=typeof i)throw new Error((0,M_.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=i}return _}get ref(){return new fN(this.database,new KP(this._delegate._repo,this._delegate._path))}}class fN extends tO{constructor(e,i){super(e,new JS(i._repo,i._path,new n8,!1)),this.database=e,this._delegate=i}getKey(){return(0,M_.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,M_.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new fN(this.database,l4(this._delegate,e))}getParent(){(0,M_.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new fN(this.database,e):null}getRoot(){return(0,M_.Dv)("Reference.root",0,0,arguments.length),new fN(this.database,this._delegate.root)}set(e,i){(0,M_.Dv)("Reference.set",1,2,arguments.length),(0,M_.Wj)("Reference.set","onComplete",i,!0);const d=TW(this._delegate,e);return i&&d.then(()=>i(null),_=>i(_)),d}update(e,i){if((0,M_.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const _={};for(let B=0;B<e.length;++B)_[""+B]=e[B];e=_,bte("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dN("Reference.update",this._delegate._path),(0,M_.Wj)("Reference.update","onComplete",i,!0);const d=Qoe(this._delegate,e);return i&&d.then(()=>i(null),_=>i(_)),d}setWithPriority(e,i,d){(0,M_.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,M_.Wj)("Reference.setWithPriority","onComplete",d,!0);const _=function lte(o,e,i){if(dN("setWithPriority",o._path),qP("setWithPriority",e,o._path,!1),KQ("setWithPriority",i,!1),".length"===o.key||".keys"===o.key)throw"setWithPriority failed: "+o.key+" is a read-only object.";const d=new M_.BH;return i$(o._repo,o._path,e,i,d.wrapCallback(()=>{})),d.promise}(this._delegate,e,i);return d&&_.then(()=>d(null),B=>d(B)),_}remove(e){(0,M_.Dv)("Reference.remove",0,1,arguments.length),(0,M_.Wj)("Reference.remove","onComplete",e,!0);const i=function Goe(o){return dN("remove",o._path),TW(o,null)}(this._delegate);return e&&i.then(()=>e(null),d=>e(d)),i}transaction(e,i,d){(0,M_.Dv)("Reference.transaction",1,3,arguments.length),(0,M_.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,M_.Wj)("Reference.transaction","onComplete",i,!0),function(o,e,i,d){if(void 0!==i&&"boolean"!=typeof i)throw new Error((0,M_.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,d);const _=function $oe(o,e,i){var d;if(o=(0,M_.m9)(o),dN("Reference.transaction",o._path),".length"===o.key||".keys"===o.key)throw"Reference.transaction failed: "+o.key+" is a read-only object.";const _=null===(d=null==i?void 0:i.applyLocally)||void 0===d||d,B=new M_.BH,ga=h4(o,()=>{});return function rte(o,e,i,d,_,B){JQ(o,"transaction on "+e);const _t={path:e,update:i,onComplete:d,status:null,order:wH(),applyLocally:B,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ga=s$(o,e,void 0);_t.currentInputSnapshot=ga;const _h=_t.update(ga.val());if(void 0===_h)_t.unwatcher(),_t.currentOutputSnapshotRaw=null,_t.currentOutputSnapshotResolved=null,_t.onComplete&&_t.onComplete(null,!1,_t.currentInputSnapshot);else{o4("transaction failed: Data returned ",_h,_t.path),_t.status=0;const _g=HP(o.transactionQueueTree_,e),l_=GV(_g)||[];let f_;l_.push(_t),ZJ(_g,l_),"object"==typeof _h&&null!==_h&&(0,M_.r3)(_h,".priority")?(f_=(0,M_.DV)(_h,".priority"),(0,M_.hu)(WQ(f_),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f_=(r4(o.serverSyncTree_,e)||b1.EMPTY_NODE).getPriority().val();const R_=s4(o),V_=_T(_h,f_),Y_=m8(V_,ga,R_);_t.currentOutputSnapshotRaw=V_,_t.currentOutputSnapshotResolved=Y_,_t.currentWriteId=CW(o);const R0=f8(o.serverSyncTree_,e,Y_,_t.currentWriteId,_t.applyLocally);WP(o.eventQueue_,e,R0),LU(o,o.transactionQueueTree_)}}(o._repo,o._path,e,(_h,_g,l_)=>{let f_=null;_h?B.reject(_h):(f_=new b8(l_,new KP(o._repo,o._path),DT),B.resolve(new JN(_g,f_)))},ga,_),B.promise}(this._delegate,e,{applyLocally:d}).then(B=>new a7(B.committed,new IM(this.database,B.snapshot)));return i&&_.then(B=>i(null,B.committed,B.snapshot),B=>i(B,!1,null)),_}setPriority(e,i){(0,M_.Dv)("Reference.setPriority",1,2,arguments.length),(0,M_.Wj)("Reference.setPriority","onComplete",i,!0);const d=function ute(o,e){o=(0,M_.m9)(o),dN("setPriority",o._path),KQ("setPriority",e,!1);const i=new M_.BH;return i$(o._repo,jT(o._path,".priority"),e,null,i.wrapCallback(()=>{})),i.promise}(this._delegate,e);return i&&d.then(()=>i(null),_=>i(_)),d}push(e,i){(0,M_.Dv)("Reference.push",0,2,arguments.length),(0,M_.Wj)("Reference.push","onComplete",i,!0);const d=function Voe(o,e){o=(0,M_.m9)(o),dN("push",o._path),qP("push",e,o._path,!0);const i=y8(o._repo),d=WH(i),_=l4(o,d),B=l4(o,d);let _t;return _t=null!=e?TW(B,e).then(()=>B):Promise.resolve(B),_.then=_t.then.bind(_t),_.catch=_t.then.bind(_t,void 0),_}(this._delegate,e),_=d.then(_t=>new fN(this.database,_t));i&&_.then(()=>i(null),_t=>i(_t));const B=new fN(this.database,d);return B.then=_.then.bind(_),B.catch=_.catch.bind(_,void 0),B}onDisconnect(){return dN("Reference.onDisconnect",this._delegate._path),new tse(new u4(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class c7{constructor(e,i){this._delegate=e,this.app=i,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:g$,forceLongPolling:LW}}useEmulator(e,i,d={}){!function yte(o,e,i,d={}){(o=(0,M_.m9)(o))._checkNotDeleted("useEmulator"),o._instanceStarted&&AM("Cannot call useEmulator() after instance has already been initialized.");const _=o._repoInternal;let B;if(_.repoInfo_.nodeAdmin)d.mockUserToken&&AM('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),B=new BP(BP.OWNER);else if(d.mockUserToken){const _t="string"==typeof d.mockUserToken?d.mockUserToken:(0,M_.Sg)(d.mockUserToken,o.app.options.projectId);B=new BP(_t)}!function Ede(o,e,i,d){o.repoInfo_=new xH(`${e}:${i}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams),d&&(o.authTokenProvider_=d)}(_,e,i,B)}(this._delegate,e,i,d)}ref(e){if((0,M_.Dv)("database.ref",0,1,arguments.length),e instanceof fN){const i=ate(this._delegate,e.toString());return new fN(this,i)}{const i=a$(this._delegate,e);return new fN(this,i)}}refFromURL(e){(0,M_.Dv)("database.refFromURL",1,1,arguments.length);const d=ate(this._delegate,e);return new fN(this,d)}goOffline(){return(0,M_.Dv)("database.goOffline",0,0,arguments.length),function m$(o){(o=(0,M_.m9)(o))._checkNotDeleted("goOffline"),I8(o._repo)}(this._delegate)}goOnline(){return(0,M_.Dv)("database.goOnline",0,0,arguments.length),function A$(o){(o=(0,M_.m9)(o))._checkNotDeleted("goOnline"),function nte(o){o.persistentConnection_&&o.persistentConnection_.resume(t$)}(o._repo)}(this._delegate)}}c7.ServerValue={TIMESTAMP:function v$(){return _$}(),increment:o=>function y$(o){return{".sv":{increment:o}}}(o)};var Cte=Object.freeze({__proto__:null,initStandalone:function MW({app:o,url:e,version:i,customAuthImpl:d,namespace:_,nodeAdmin:B=!1}){WX(i);const _t=new LP.zt("auth-internal",new LP.H0("database-standalone"));return _t.setComponent(new LP.wA("auth-internal",()=>d,"PRIVATE")),{instance:new c7(xW(o,_t,void 0,e,B),o),namespace:_}}});const BW=c7.ServerValue;!function p4(o){o.INTERNAL.registerComponent(new LP.wA("database-compat",(e,{instanceIdentifier:i})=>{const d=e.getProvider("app-compat").getImmediate(),_=e.getProvider("database").getImmediate({identifier:i});return new c7(_,d)},"PUBLIC").setServiceProps({Reference:fN,Query:tO,Database:c7,DataSnapshot:IM,enableLogging:Joe,INTERNAL:Cte,ServerValue:BW}).setMultipleInstances(!0)),o.registerVersion("@firebase/database-compat","0.2.0")}(yV.Z);var T8=g(5363),wte=g(6063);class UW extends BT.x{constructor(e=1/0,i=1/0,d=wte.l){super(),this._bufferSize=e,this._windowTime=i,this._timestampProvider=d,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=i===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,i)}next(e){const{isStopped:i,_buffer:d,_infiniteTimeWindow:_,_timestampProvider:B,_windowTime:_t}=this;i||(d.push(e),!_&&d.push(B.now()+_t)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const i=this._innerSubscribe(e),{_infiniteTimeWindow:d,_buffer:_}=this,B=_.slice();for(let _t=0;_t<B.length&&!e.closed;_t+=d?1:2)e.next(B[_t]);return this._checkFinalizedStatuses(e),i}_trimBuffer(){const{_bufferSize:e,_timestampProvider:i,_buffer:d,_infiniteTimeWindow:_}=this,B=(_?1:2)*e;if(e<1/0&&B<d.length&&d.splice(0,d.length-B),!_){const _t=i.now();let ga=0;for(let _h=1;_h<d.length&&d[_h]<=_t;_h+=2)ga=_h;ga&&d.splice(0,ga+1)}}}function E$(o,e,i){let d,_=!1;return o&&"object"==typeof o?({bufferSize:d=1/0,windowTime:e=1/0,refCount:_=!1,scheduler:i}=o):d=null!=o?o:1/0,(0,tJ.B)({connector:()=>new UW(d,e,i),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:_})}function FW(o,e){return(0,pL.m)(e)?KT(()=>o,e):KT(()=>o)}var bM=g(9468);g(5867);const l7=new Map,b$={activated:!1,tokenObservers:[]},Ote={initialized:!1,enabled:!1};function SR(o){return l7.get(o)||b$}function G2(o,e){l7.set(o,e)}function S8(){return Ote}class Sde{constructor(e,i,d,_,B){if(this.operation=e,this.retryPolicy=i,this.getWaitDuration=d,this.lowerBound=_,this.upperBound=B,this.pending=null,this.nextErrorWaitInterval=_,_>B)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var i=this;return(0,b0.Z)(function*(){i.stop();try{i.pending=new M_.BH,yield function Rde(o){return new Promise(e=>{setTimeout(e,o)})}(i.getNextRun(e)),i.pending.resolve(),yield i.pending.promise,i.pending=new M_.BH,yield i.operation(),i.pending.resolve(),yield i.pending.promise,i.process(!0).catch(()=>{})}catch(d){i.retryPolicy(d)?i.process(!1).catch(()=>{}):i.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}}const $N=new M_.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function f7(o){if(!SR(o).activated)throw $N.create("use-before-activation",{appName:o.name})}function m7(o,e){return t6.apply(this,arguments)}function t6(){return(t6=(0,b0.Z)(function*({url:o,body:e},i){const d={"Content-Type":"application/json"},_=i.getImmediate({optional:!0});if(_){const f_=yield _.getHeartbeatsHeader();f_&&(d["X-Firebase-Client"]=f_)}const B={method:"POST",body:JSON.stringify(e),headers:d};let _t,ga;try{_t=yield fetch(o,B)}catch(f_){throw $N.create("fetch-network-error",{originalErrorMessage:f_.message})}if(200!==_t.status)throw $N.create("fetch-status-error",{httpStatus:_t.status});try{ga=yield _t.json()}catch(f_){throw $N.create("fetch-parse-error",{originalErrorMessage:f_.message})}const _h=ga.ttl.match(/^([\d.]+)(s)$/);if(!_h||!_h[2]||isNaN(Number(_h[1])))throw $N.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ga.ttl}`});const _g=1e3*Number(_h[1]),l_=Date.now();return{token:ga.token,expireTimeMillis:l_+_g,issuedAtTimeMillis:l_}})).apply(this,arguments)}function n6(o,e){const{projectId:i,appId:d,apiKey:_}=o.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${i}/apps/${d}:exchangeDebugToken?key=${_}`,body:{debug_token:e}}}const r6="firebase-app-check-store";let A7=null;function GW(){return A7||(A7=new Promise((o,e)=>{try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=d=>{o(d.target.result)},i.onerror=d=>{var _;e($N.create("storage-open",{originalErrorMessage:null===(_=d.target.error)||void 0===_?void 0:_.message}))},i.onupgradeneeded=d=>{0===d.oldVersion&&d.target.result.createObjectStore(r6,{keyPath:"compositeKey"})}}catch(i){e($N.create("storage-open",{originalErrorMessage:i.message}))}}),A7)}function T$(){return(T$=(0,b0.Z)(function*(o,e){const d=(yield GW()).transaction(r6,"readwrite"),B=d.objectStore(r6).put({compositeKey:o,value:e});return new Promise((_t,ga)=>{B.onsuccess=_h=>{_t()},d.onerror=_h=>{var _g;ga($N.create("storage-set",{originalErrorMessage:null===(_g=_h.target.error)||void 0===_g?void 0:_g.message}))}})})).apply(this,arguments)}const y7=new SL.Yd("@firebase/app-check");function Pte(o,e){return(0,M_.hl)()?function dse(o,e){return function fse(o,e){return T$.apply(this,arguments)}(function zP(o){return`${o.options.appId}-${o.name}`}(o),e)}(o,e).catch(i=>{y7.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}function S$(){return S8().enabled}function b7(){return C7.apply(this,arguments)}function C7(){return(C7=(0,b0.Z)(function*(){const o=S8();if(o.enabled&&o.token)return o.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const CM={error:"UNKNOWN_ERROR"};function xte(o){return M_.US.encodeString(JSON.stringify(o),!1)}function R8(o){return FU.apply(this,arguments)}function FU(){return(FU=(0,b0.Z)(function*(o,e=!1){const i=o.app;f7(i);const d=SR(i);let B,_=d.token;if(!_){const _h=yield d.cachedTokenPromise;_h&&O8(_h)&&(_=_h)}if(!e&&_&&O8(_))return{token:_.token};let ga,_t=!1;if(S$()){d.exchangeTokenPromise||(d.exchangeTokenPromise=m7(n6(i,yield b7()),o.heartbeatServiceProvider).then(_g=>(d.exchangeTokenPromise=void 0,_g)),_t=!0);const _h=yield d.exchangeTokenPromise;return yield Pte(i,_h),G2(i,Object.assign(Object.assign({},d),{token:_h})),{token:_h.token}}try{d.exchangeTokenPromise||(d.exchangeTokenPromise=d.provider.getToken().then(_h=>(d.exchangeTokenPromise=void 0,_h)),_t=!0),_=yield d.exchangeTokenPromise}catch(_h){"appCheck/throttled"===_h.code?y7.warn(_h.message):y7.error(_h),B=_h}return _?(ga={token:_.token},G2(i,Object.assign(Object.assign({},d),{token:_})),yield Pte(i,_)):ga=D8(B),_t&&WW(i,ga),ga})).apply(this,arguments)}function Q2(o,e){const i=SR(o),d=i.tokenObservers.filter(_=>_.next!==e);0===d.length&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),G2(o,Object.assign(Object.assign({},i),{tokenObservers:d}))}function w7(o){const{app:e}=o,i=SR(e);let d=i.tokenRefresher;d||(d=function gse(o){const{app:e}=o;return new Sde((0,b0.Z)(function*(){let d;if(d=SR(e).token?yield R8(o,!0):yield R8(o),d.error)throw d.error}),()=>!0,()=>{const i=SR(e);if(i.token){let d=i.token.issuedAtTimeMillis+.5*(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)+3e5;return d=Math.min(d,i.token.expireTimeMillis-3e5),Math.max(0,d-Date.now())}return 0},3e4,96e4)}(o),G2(e,Object.assign(Object.assign({},i),{tokenRefresher:d}))),!d.isRunning()&&i.isTokenAutoRefreshEnabled&&d.start()}function WW(o,e){const i=SR(o).tokenObservers;for(const d of i)try{"EXTERNAL"===d.type&&null!=e.error?d.error(e.error):d.next(e)}catch(_){}}function O8(o){return o.expireTimeMillis-Date.now()>0}function D8(o){return{token:xte(CM),error:o}}class Lte{constructor(e,i){this.app=e,this.heartbeatServiceProvider=i}_delete(){const{tokenObservers:e}=SR(this.app);for(const i of e)Q2(this.app,i.next);return Promise.resolve()}}const k$="app-check-internal";!function YW(){(0,dS._registerComponent)(new LP.wA("app-check",o=>function mse(o,e){return new Lte(o,e)}(o.getProvider("app").getImmediate(),o.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((o,e,i)=>{o.getProvider(k$).initialize()})),(0,dS._registerComponent)(new LP.wA(k$,o=>function Mte(o){return{getToken:e=>R8(o,e),addTokenListener:e=>function qW(o,e,i,d){const{app:_}=o,B=SR(_),_t={next:i,error:d,type:e};if(G2(_,Object.assign(Object.assign({},B),{tokenObservers:[...B.tokenObservers,_t]})),B.token&&O8(B.token)){const ga=B.token;Promise.resolve().then(()=>{i({token:ga.token}),w7(o)}).catch(()=>{})}B.cachedTokenPromise.then(()=>w7(o))}(o,"INTERNAL",e),removeTokenListener:e=>Q2(o.app,e)}}(o.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,dS.registerVersion)("@firebase/app-check","0.5.8")}();class a6{constructor(){return(0,aT.vb)("app-check")}}"undefined"!=typeof window&&window;var XW=g(127);const eK=new f.OlP("angularfire2.auth.use-emulator"),tK=new f.OlP("angularfire2.auth.settings"),nK=new f.OlP("angularfire2.auth.tenant-id"),M$=new f.OlP("angularfire2.auth.langugage-code"),rK=new f.OlP("angularfire2.auth.use-device-language"),T7=new f.OlP("angularfire.auth.persistence"),c6=(o,e,i,d,_,B,_t,ga)=>(0,bR.cc)(`${o.name}.auth`,"AngularFireAuth",o.name,()=>{const _h=e.runOutsideAngular(()=>o.auth());if(i&&_h.useEmulator(...i),d&&(_h.tenantId=d),_h.languageCode=_,B&&_h.useDeviceLanguage(),_t)for(const[_g,l_]of Object.entries(_t))_h.settings[_g]=l_;return ga&&_h.setPersistence(ga),_h},[i,d,_,B,_t,ga]);let iK=(()=>{class o{constructor(i,d,_,B,_t,ga,_h,_g,l_,f_,R_,V_){const Y_=new BT.x,R0=mI(void 0).pipe((0,T8.Q)(_t.outsideAngular),KT(()=>B.runOutsideAngular(()=>Promise.resolve().then(g.bind(g,7092)))),(0,RI.U)(()=>(0,bR.on)(i,B,d)),(0,RI.U)(V0=>c6(V0,B,ga,_g,l_,f_,_h,R_)),E$({bufferSize:1,refCount:!1}));if(aL(_))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mI(null);else{R0.pipe(iM()).subscribe();const J0=R0.pipe(KT(DI=>DI.getRedirectResult().then(y1=>y1,()=>null)),aT.iC,E$({bufferSize:1,refCount:!1})),MI=R0.pipe(KT(DI=>new UT.y(y1=>({unsubscribe:B.runOutsideAngular(()=>DI.onAuthStateChanged(H1=>y1.next(H1),H1=>y1.error(H1),()=>y1.complete()))})))),LI=R0.pipe(KT(DI=>new UT.y(y1=>({unsubscribe:B.runOutsideAngular(()=>DI.onIdTokenChanged(H1=>y1.next(H1),H1=>y1.error(H1),()=>y1.complete()))}))));this.authState=J0.pipe(FW(MI),(0,bM.R)(_t.outsideAngular),(0,T8.Q)(_t.insideAngular)),this.user=J0.pipe(FW(LI),(0,bM.R)(_t.outsideAngular),(0,T8.Q)(_t.insideAngular)),this.idToken=this.user.pipe(KT(DI=>DI?(0,fT.D)(DI.getIdToken()):mI(null))),this.idTokenResult=this.user.pipe(KT(DI=>DI?(0,fT.D)(DI.getIdTokenResult()):mI(null))),this.credential=(0,qN.T)(J0,Y_,this.authState.pipe(zS(DI=>!DI))).pipe((0,RI.U)(DI=>(null==DI?void 0:DI.user)?DI:null),(0,bM.R)(_t.outsideAngular),(0,T8.Q)(_t.insideAngular))}return(0,bR.pX)(this,R0,B,{spy:{apply:(V0,J0,MI)=>{(V0.startsWith("signIn")||V0.startsWith("createUser"))&&MI.then(LI=>Y_.next(LI))}}})}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(bR.Dh),f.LFG(bR.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(aT.HU),f.LFG(eK,8),f.LFG(tK,8),f.LFG(nK,8),f.LFG(M$,8),f.LFG(rK,8),f.LFG(T7,8),f.LFG(a6,8))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),oK=(()=>{class o{constructor(){XW.Z.registerVersion("angularfire",aT.q4.full,"auth-compat")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:[iK]}),o})();function qte(o){return null==o}function wse(o){return"function"==typeof o.set}function Tse(o,e){return wse(e)?e:o.ref(e)}function Wte(o,e){if(function sK(o){return"string"==typeof o}(o))return e.stringCase();if(wse(o))return e.firebaseCase();if(function sI(o){return"function"==typeof o.exportVal}(o))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof o)}function S7(o,e,i="on",d=xP.z){return new UT.y(_=>{let B=null;return B=o[i](e,(_t,ga)=>{d.schedule(()=>{_.next({snapshot:_t,prevKey:ga})}),"once"===i&&d.schedule(()=>_.complete())},_t=>{d.schedule(()=>_.error(_t))}),"on"===i?{unsubscribe(){null!=B&&o.off(e,B)}}:{unsubscribe(){}}}).pipe((0,RI.U)(_=>{const{snapshot:B,prevKey:_t}=_;let ga=null;return B.exists()&&(ga=B.key),{type:e,payload:B,prevKey:_t,key:ga}}),(0,tJ.B)())}function aK(o,e){const i=o.length;for(let d=0;d<i;d++)if(o[d].payload.key===e)return d;return-1}function Rse(o,e){const{payload:i,prevKey:d,key:_}=e,B=aK(o,_),_t=function Mde(o,e){if(qte(e))return 0;{const i=aK(o,e);return-1===i?o.length:i+1}}(o,d);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let ga=null;e.payload.forEach(_h=>{const _g={payload:_h,type:"value",prevKey:ga,key:_h.key};return ga=_h.key,o=[...o,_g],!1})}return o;case"child_added":if(B>-1){const ga=o[B-1];(ga&&ga.key||null)!==d&&(o=o.filter(_h=>_h.payload.key!==i.key)).splice(_t,0,e)}else{if(null==d)return[e,...o];(o=o.slice()).splice(_t,0,e)}return o;case"child_removed":return o.filter(ga=>ga.payload.key!==i.key);case"child_changed":return o.map(ga=>ga.payload.key===_?e:ga);case"child_moved":if(B>-1){const ga=o.splice(B,1)[0];return(o=o.slice()).splice(_t,0,ga),o}return o;default:return o}}function Ose(o){return(qte(o)||0===o.length)&&(o=["child_added","child_removed","child_changed","child_moved"]),o}function Kte(o,e,i){return function Sse(o,e,i){return S7(o,"value","once",i).pipe(KT(d=>{const _=[mI(d)];return e.forEach(B=>_.push(S7(o,B,"on",i))),(0,qN.T)(..._).pipe(xO(Rse,[]))}),nJ())}(o,e=Ose(e),i)}function cK(o,e,i){const d=(e=Ose(e)).map(_=>S7(o,_,"on",i));return(0,qN.T)(...d)}function I(o,e){return function(d,_){return Wte(d,{stringCase:()=>o.child(d)[e](_),firebaseCase:()=>d[e](_),snapshotCase:()=>d.ref[e](_)})}}function b(o){return function(i){return i?Wte(i,{stringCase:()=>o.child(i).remove(),firebaseCase:()=>i.remove(),snapshotCase:()=>i.ref.remove()}):o.remove()}}function _n(o,e){return function(){return S7(o,"value","on",e)}}const _d=new f.OlP("angularfire2.realtimeDatabaseURL"),_p=new f.OlP("angularfire2.database.use-emulator");let t_=(()=>{class o{constructor(i,d,_,B,_t,ga,_h,_g,l_,f_,R_,V_,Y_,R0,V0){this.schedulers=ga;const J0=_h,MI=(0,bR.on)(i,_t,d);_g&&c6(MI,_t,l_,R_,V_,Y_,f_,R0),this.database=(0,bR.cc)(`${MI.name}.database.${_}`,"AngularFireDatabase",MI.name,()=>{const LI=_t.runOutsideAngular(()=>MI.database(_||void 0));return J0&&LI.useEmulator(...J0),LI},[J0])}list(i,d){const _=this.schedulers.ngZone.runOutsideAngular(()=>Tse(this.database,i));let B=_;return d&&(B=d(_)),function F(o,e){const i=e.schedulers.outsideAngular,d=e.schedulers.ngZone.run(()=>o.ref);return{query:o,update:I(d,"update"),set:I(d,"set"),push:_=>d.push(_),remove:b(d),snapshotChanges:_=>Kte(o,_,i).pipe(aT.iC),stateChanges:_=>cK(o,_,i).pipe(aT.iC),auditTrail:_=>function zte(o,e,i){return function Yte(o,e,i){return function Bde(o,e){return S7(o,"value","on",e).pipe((0,RI.U)(i=>{let d;return i.payload.forEach(_=>(d=_.key,!1)),{data:i,lastKeyToLoad:d}}))}(o,i).pipe(function zie(...o){const e=(0,XL.jO)(o);return(0,aS.e)((i,d)=>{const _=o.length,B=new Array(_);let _t=o.map(()=>!1),ga=!1;for(let _h=0;_h<_;_h++)(0,bP.Xf)(o[_h]).subscribe((0,sS.x)(d,_g=>{B[_h]=_g,!ga&&!_t[_h]&&(_t[_h]=!0,(ga=_t.every(rN.y))&&(_t=null))},HX.Z));i.subscribe((0,sS.x)(d,_h=>{if(ga){const _g=[_h,...B];d.next(e?e(..._g):_g)}}))})}(e),(0,RI.U)(([_,B])=>{const _t=_.lastKeyToLoad,ga=B.map(_h=>_h.key);return{actions:B,lastKeyToLoad:_t,loadedKeys:ga}}),function WN(o){return(0,aS.e)((e,i)=>{let d=!1,_=0;e.subscribe((0,sS.x)(i,B=>(d||(d=!o(B,_++)))&&i.next(B)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,RI.U)(_=>_.actions))}(o,cK(o,e).pipe(xO((_,B)=>[..._,B],[])),i)}(o,_,i).pipe(aT.iC),valueChanges:(_,B)=>Kte(o,_,i).pipe((0,RI.U)(ga=>ga.map(_h=>B&&B.idField?Object.assign(Object.assign({},_h.payload.val()),{[B.idField]:_h.key}):_h.payload.val())),aT.iC)}}(B,this)}object(i){return function ca(o,e){return{query:o,snapshotChanges:()=>_n(o,e.schedulers.outsideAngular)().pipe(aT.iC),update:i=>o.ref.update(i),set:i=>o.ref.set(i),remove:()=>o.ref.remove(),valueChanges:()=>_n(o,e.schedulers.outsideAngular)().pipe(aT.iC,(0,RI.U)(d=>d.payload.exists()?d.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Tse(this.database,i)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(bR.Dh),f.LFG(bR.xv,8),f.LFG(_d,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(aT.HU),f.LFG(_p,8),f.LFG(iK,8),f.LFG(eK,8),f.LFG(tK,8),f.LFG(nK,8),f.LFG(M$,8),f.LFG(rK,8),f.LFG(T7,8),f.LFG(a6,8))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),s_=(()=>{class o{constructor(){XW.Z.registerVersion("angularfire",aT.q4.full,"rtdb-compat")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:[t_]}),o})(),C_=(()=>{class o{constructor(i,d){this._renderer=i,this._elementRef=d,this.onChange=_=>{},this.onTouched=()=>{}}setProperty(i,d){this._renderer.setProperty(this._elementRef.nativeElement,i,d)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(f.Qsj),f.Y36(f.SBq))},o.\u0275dir=f.lG2({type:o}),o})(),G_=(()=>{class o extends C_{}return o.\u0275fac=function(){let e;return function(d){return(e||(e=f.n5z(o)))(d||o)}}(),o.\u0275dir=f.lG2({type:o,features:[f.qOj]}),o})();const X_=new f.OlP("NgValueAccessor"),Y0={provide:X_,useExisting:(0,f.Gpc)(()=>F0),multi:!0},TI=new f.OlP("CompositionEventMode");let F0=(()=>{class o extends C_{constructor(i,d,_){super(i,d),this._compositionMode=_,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fI(){const o=q()?q().getUserAgent():"";return/android (\d+)/.test(o.toLowerCase())}())}writeValue(i){this.setProperty("value",null==i?"":i)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(TI,8))},o.\u0275dir=f.lG2({type:o,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,d){1&i&&f.NdJ("input",function(B){return d._handleInput(B.target.value)})("blur",function(){return d.onTouched()})("compositionstart",function(){return d._compositionStart()})("compositionend",function(B){return d._compositionEnd(B.target.value)})},features:[f._Bn([Y0]),f.qOj]}),o})();const d1=new f.OlP("NgValidators"),BS=new f.OlP("NgAsyncValidators");function Dse(o){return null!=o}function Ude(o){const e=(0,f.QGY)(o)?(0,fT.D)(o):o;return(0,f.CqO)(e),e}function Jte(o){let e={};return o.forEach(i=>{e=null!=i?Object.assign(Object.assign({},e),i):e}),0===Object.keys(e).length?null:e}function $te(o,e){return e.map(i=>i(o))}function kse(o){return o.map(e=>function Nse(o){return!o.validate}(e)?e:i=>e.validate(i))}function Pse(o){return null!=o?function Fde(o){if(!o)return null;const e=o.filter(Dse);return 0==e.length?null:function(i){return Jte($te(i,e))}}(kse(o)):null}function U$(o){return null!=o?function xse(o){if(!o)return null;const e=o.filter(Dse);return 0==e.length?null:function(i){return function A_(...o){const e=(0,XL.jO)(o),{args:i,keys:d}=oS(o),_=new UT.y(B=>{const{length:_t}=i;if(!_t)return void B.complete();const ga=new Array(_t);let _h=_t,_g=_t;for(let l_=0;l_<_t;l_++){let f_=!1;(0,bP.Xf)(i[l_]).subscribe((0,sS.x)(B,R_=>{f_||(f_=!0,_g--),ga[l_]=R_},()=>_h--,void 0,()=>{(!_h||!f_)&&(_g||B.next(d?fL(d,ga):ga),B.complete())}))}});return e?_.pipe(v3(e)):_}($te(i,e).map(Ude)).pipe((0,RI.U)(Jte))}}(kse(o)):null}function jde(o,e){return null===o?[e]:Array.isArray(o)?[...o,e]:[o,e]}function dK(o){return o?Array.isArray(o)?o:[o]:[]}function hK(o,e){return Array.isArray(o)?o.includes(e):o===e}function Vde(o,e){const i=dK(e);return dK(o).forEach(_=>{hK(i,_)||i.push(_)}),i}function Gde(o,e){return dK(e).filter(i=>!hK(o,i))}class Qde{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Pse(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=U$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,i){return!!this.control&&this.control.hasError(e,i)}getError(e,i){return this.control?this.control.getError(e,i):null}}class l6 extends Qde{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class IO extends Qde{get formDirective(){return null}get path(){return null}}let Bse=(()=>{class o extends class Mse{constructor(e){this._cd=e}is(e){var i,d,_;return"submitted"===e?!!(null===(i=this._cd)||void 0===i?void 0:i.submitted):!!(null===(_=null===(d=this._cd)||void 0===d?void 0:d.control)||void 0===_?void 0:_[e])}}{constructor(i){super(i)}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(l6,2))},o.\u0275dir=f.lG2({type:o,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,d){2&i&&f.ekj("ng-untouched",d.is("untouched"))("ng-touched",d.is("touched"))("ng-pristine",d.is("pristine"))("ng-dirty",d.is("dirty"))("ng-valid",d.is("valid"))("ng-invalid",d.is("invalid"))("ng-pending",d.is("pending"))},features:[f.qOj]}),o})();function N7(o,e){(function Fse(o,e){const i=function F$(o){return o._rawValidators}(o);null!==e.validator?o.setValidators(jde(i,e.validator)):"function"==typeof i&&o.setValidators([i]);const d=function Lse(o){return o._rawAsyncValidators}(o);null!==e.asyncValidator?o.setAsyncValidators(jde(d,e.asyncValidator)):"function"==typeof d&&o.setAsyncValidators([d]);const _=()=>o.updateValueAndValidity();nne(e._rawValidators,_),nne(e._rawAsyncValidators,_)})(o,e),e.valueAccessor.writeValue(o.value),function vAe(o,e){e.valueAccessor.registerOnChange(i=>{o._pendingValue=i,o._pendingChange=!0,o._pendingDirty=!0,"change"===o.updateOn&&jse(o,e)})}(o,e),function EAe(o,e){const i=(d,_)=>{e.valueAccessor.writeValue(d),_&&e.viewToModelUpdate(d)};o.registerOnChange(i),e._registerOnDestroy(()=>{o._unregisterOnChange(i)})}(o,e),function yAe(o,e){e.valueAccessor.registerOnTouched(()=>{o._pendingTouched=!0,"blur"===o.updateOn&&o._pendingChange&&jse(o,e),"submit"!==o.updateOn&&o.markAsTouched()})}(o,e),function Use(o,e){if(e.valueAccessor.setDisabledState){const i=d=>{e.valueAccessor.setDisabledState(d)};o.registerOnDisabledChange(i),e._registerOnDestroy(()=>{o._unregisterOnDisabledChange(i)})}}(o,e)}function nne(o,e){o.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function jse(o,e){o._pendingDirty&&o.markAsDirty(),o.setValue(o._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1}function Gse(o,e){const i=o.indexOf(e);i>-1&&o.splice(i,1)}const E4="VALID",rne="INVALID",gK="PENDING",V$="DISABLED";function Hse(o){return(one(o)?o.validators:o)||null}function ine(o){return Array.isArray(o)?Pse(o):o||null}function qse(o,e){return(one(e)?e.asyncValidators:o)||null}function ehe(o){return Array.isArray(o)?U$(o):o||null}function one(o){return null!=o&&!Array.isArray(o)&&"object"==typeof o}const ane=o=>o instanceof zse;function nhe(o){return(o=>o instanceof ihe)(o)?o.value:o.getRawValue()}function Wse(o,e){const i=ane(o),d=o.controls;if(!(i?Object.keys(d):d).length)throw new f.vHH(1e3,"");if(!d[e])throw new f.vHH(1001,"")}function rhe(o,e){ane(o),o._forEachChild((d,_)=>{if(void 0===e[_])throw new f.vHH(1002,"")})}class Kse{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=i,this._composedValidatorFn=ine(this._rawValidators),this._composedAsyncValidatorFn=ehe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===E4}get invalid(){return this.status===rne}get pending(){return this.status==gK}get disabled(){return this.status===V$}get enabled(){return this.status!==V$}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ine(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ehe(e)}addValidators(e){this.setValidators(Vde(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vde(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Gde(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Gde(e,this._rawAsyncValidators))}hasValidator(e){return hK(this._rawValidators,e)}hasAsyncValidator(e){return hK(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gK,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const i=this._parentMarkedDirty(e.onlySelf);this.status=V$,this.errors=null,this._forEachChild(d=>{d.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(d=>d(!0))}enable(e={}){const i=this._parentMarkedDirty(e.onlySelf);this.status=E4,this._forEachChild(d=>{d.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(d=>d(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===E4||this.status===gK)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?V$:E4}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gK,this._hasOwnPendingAsyncValidator=!0;const i=Ude(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(d=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(d,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(!1!==i.emitEvent)}get(e){return function TAe(o,e,i){if(null==e||(Array.isArray(e)||(e=e.split(i)),Array.isArray(e)&&0===e.length))return null;let d=o;return e.forEach(_=>{d=ane(d)?d.controls.hasOwnProperty(_)?d.controls[_]:null:(o=>o instanceof Yse)(d)&&d.at(_)||null}),d}(this,e,".")}getError(e,i){const d=i?this.get(i):this;return d&&d.errors?d.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?V$:this.errors?rne:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gK)?gK:this._anyControlsHaveStatus(rne)?rne:E4}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){one(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ihe extends Kse{constructor(e=null,i,d){super(Hse(i),qse(d,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),one(i)&&i.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==i.emitModelToViewChange&&this._onChange.forEach(d=>d(this.value,!1!==i.emitViewToModelChange)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Gse(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Gse(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class zse extends Kse{constructor(e,i,d){super(Hse(i),qse(d,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,d={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,d={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){rhe(this,e),Object.keys(e).forEach(d=>{Wse(this,d),this.controls[d].setValue(e[d],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){null!=e&&(Object.keys(e).forEach(d=>{this.controls[d]&&this.controls[d].patchValue(e[d],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((d,_)=>{d.reset(e[_],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,d)=>(e[d]=nhe(i),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,d)=>!!d._syncPendingControls()||i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(i=>{const d=this.controls[i];d&&e(d,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const i of Object.keys(this.controls)){const d=this.controls[i];if(this.contains(i)&&e(d))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,i,d)=>((i.enabled||this.disabled)&&(e[d]=i.value),e))}_reduceChildren(e,i){let d=e;return this._forEachChild((_,B)=>{d=i(d,_,B)}),d}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Yse extends Kse{constructor(e,i,d){super(Hse(i),qse(d,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,i={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(e,i,d={}){this.controls.splice(e,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:d.emitEvent})}removeAt(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(e,i,d={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),i&&(this.controls.splice(e,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,i={}){rhe(this,e),e.forEach((d,_)=>{Wse(this,_),this.at(_).setValue(d,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){null!=e&&(e.forEach((d,_)=>{this.at(_)&&this.at(_).patchValue(d,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e=[],i={}){this._forEachChild((d,_)=>{d.reset(e[_],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(e=>nhe(e))}clear(e={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((i,d)=>!!d._syncPendingControls()||i,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((i,d)=>{e(i,d)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(i=>i.enabled&&e(i))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const che={provide:l6,useExisting:(0,f.Gpc)(()=>$se)},uhe=(()=>Promise.resolve(null))();let $se=(()=>{class o extends l6{constructor(i,d,_,B,_t){super(),this._changeDetectorRef=_t,this.control=new ihe,this._registered=!1,this.update=new f.vpe,this._parent=i,this._setValidators(d),this._setAsyncValidators(_),this.valueAccessor=function Vse(o,e){if(!e)return null;let i,d,_;return Array.isArray(e),e.forEach(B=>{B.constructor===F0?i=B:function wAe(o){return Object.getPrototypeOf(o.constructor)===G_}(B)?d=B:_=B}),_||d||i||null}(0,B)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){const d=i.name.previousValue;this.formDirective.removeControl({name:d,path:this._getPath(d)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),function pK(o,e){if(!o.hasOwnProperty("model"))return!1;const i=o.model;return!!i.isFirstChange()||!Object.is(e,i.currentValue)}(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){N7(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(i){uhe.then(()=>{var d;this.control.setValue(i,{emitViewToModelChange:!1}),null===(d=this._changeDetectorRef)||void 0===d||d.markForCheck()})}_updateDisabled(i){const d=i.isDisabled.currentValue,_=""===d||d&&"false"!==d;uhe.then(()=>{var B;_&&!this.control.disabled?this.control.disable():!_&&this.control.disabled&&this.control.enable(),null===(B=this._changeDetectorRef)||void 0===B||B.markForCheck()})}_getPath(i){return this._parent?function ene(o,e){return[...e.path,o]}(i,this._parent):[i]}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(IO,9),f.Y36(d1,10),f.Y36(BS,10),f.Y36(X_,10),f.Y36(f.sBO,8))},o.\u0275dir=f.lG2({type:o,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([che]),f.qOj,f.TTD]}),o})(),hhe=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({}),o})(),hae=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({imports:[[hhe]]}),o})(),Rhe=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({imports:[hae]}),o})();const Ohe=function(o,e){return["/audio",o,e]},Dhe=function(o,e){return["/video",o,e]};function jAe(o,e){if(1&o&&(f.TgZ(0,"div",12)(1,"blockquote",13)(2,"div",14),f._UZ(3,"i",15),f.TgZ(4,"p",16),f._uU(5),f.qZA(),f._UZ(6,"div",8)(7,"i",17)(8,"i",18),f.qZA()()()),2&o){const i=e.$implicit;f.xp6(5),f.Oqu(i.TenantName),f.xp6(2),f.Q6J("routerLink",f.WLB(3,Ohe,i.TenantPin,i.TenantName)),f.xp6(1),f.Q6J("routerLink",f.WLB(6,Dhe,i.TenantPin,i.TenantName))}}let Nhe=(()=>{class o{constructor(i,d,_){this.db=i,this.route=d,this.activatedRoute=_,this.userCopy=[]}ngOnInit(){let d=atob("MjE0NjYzMTY2MDA0MzQ0Ng==");console.log(d);var _=Math.round((new Date).getTime()/1e3);console.log(_),this.db.list("TenantList").snapshotChanges().subscribe(B=>{this.getUsers=[],B.forEach(_t=>{let ga=_t.payload.toJSON();ga.id=_t.key,this.getUsers.push(ga),this.userCopy.push(ga)}),this.filterByID(),console.log(this.getUsers)})}filterByID(){const d=window.location.href.toString().replace(/\//g,"&"),_=new URLSearchParams(d),B=_.get("id"),_t=_.get("stmp");console.log(_t);var _h=new Date(1e3*+_t),_g=_h.getHours(),l_="0"+_h.getMinutes(),f_="0"+_h.getSeconds(),R_=_g+":"+l_.substr(-2)+":"+f_.substr(-2);console.log(R_),console.log(B);const V_=this.getUsers.find(Y_=>Y_.id===B);if((null==V_?void 0:V_.id)&&(null==V_?void 0:V_.ListFBTenantIdModel)){"object"==typeof V_.ListFBTenantIdModel&&(V_.ListFBTenantIdModel=Object.values(V_.ListFBTenantIdModel)),this.userCopy=V_.ListFBTenantIdModel;const Y_=this.userCopy;Y_.sort((R0,V0)=>null==R0?void 0:R0.TenantName.localeCompare(null==V0?void 0:V0.TenantName)),console.log(Y_),this.getUsers=this.userCopy}console.log(this.getUsers)}searchUser(){console.log("serch ",this.searchText),this.searchText?(this.userCopy=this.getUsers.filter(i=>-1!==i.TenantName.toLowerCase().indexOf(this.searchText.toLowerCase())),console.log(this.userCopy)):this.userCopy=this.getUsers}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(t_),f.Y36(lS),f.Y36(sN))},o.\u0275cmp=f.Xpm({type:o,selectors:[["app-sdk"]],decls:18,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"navbar","navbar-default",2,"background-color","#00679A"],[1,"text",2,"font-style","normal"],[1,"search-hero",2,"padding-bottom","20px","padding-right","15px","padding-left","15px"],["type","text","name","search","autocomplete","off","placeholder","\uf002  Resident's name",1,"form-control",2,"font-family","Arial, FontAwesome","font-style","normal","color","#73767D","letter-spacing","0.125px",3,"ngModel","keyup","ngModelChange"],[1,"container-fluid"],[2,"font-size","unset","padding-left","10px","font-style","normal"],[1,"card"],["class","card-body","style","background: #F0F3F6;box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);border-radius: 4px;",4,"ngFor","ngForOf"],[1,"card-body",2,"background","#F0F3F6","box-shadow","0px 2px 2px rgba(0, 0, 0, 0.1)","border-radius","4px"],[1,"conatiner-fluid",2,"background-color","#F0F3F6","display","-webkit-box","border","none","border-radius","5px"],[1,"row",2,"display","contents"],[1,"fa-regular","fa-user",2,"font-size","2.4rem","color","#183153","padding-top","10px"],[2,"padding-left","1rem","padding-top","1rem"],[1,"fa-solid","fa-square-phone",2,"font-size","2.6rem","color","#183153","padding-top","10px","padding-right","15px",3,"routerLink"],[1,"fa-solid","fa-video",2,"font-size","2.6rem","color","#183153","padding-top","10px","padding-right","15px",3,"routerLink"]],template:function(i,d){1&i&&(f.TgZ(0,"html",0)(1,"head"),f._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),f.TgZ(5,"title"),f._uU(6,"Document"),f.qZA()(),f.TgZ(7,"body")(8,"div",4)(9,"div",5),f._uU(10,"Welcome guest!"),f.qZA(),f.TgZ(11,"div",6)(12,"input",7),f.NdJ("keyup",function(){return d.searchUser()})("ngModelChange",function(B){return d.searchText=B}),f.qZA()()(),f.TgZ(13,"div",8)(14,"p",9),f._uU(15,"Voice/video call a resident to request access "),f.qZA(),f.TgZ(16,"div",10),f.YNc(17,jAe,9,9,"div",11),f.qZA()()()()),2&i&&(f.xp6(12),f.Q6J("ngModel",d.searchText),f.xp6(5),f.Q6J("ngForOf",d.userCopy))},directives:[F0,Bse,$se,HS,B3],styles:[".avatar[_ngcontent-%COMP%]{vertical-align:middle;width:35px;height:35px;border-radius:50%}.text[_ngcontent-%COMP%]{font-weight:500;font-size:x-large;padding:20px;color:#f5f5f5}.search[_ngcontent-%COMP%]{overflow:auto;padding-bottom:15px;border:none}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:0}@media only screen and (min-width: 150px) and (max-width: 1080px){.search[_ngcontent-%COMP%]{margin:0 auto;width:100%}}.form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.conatiner-fluid[_ngcontent-%COMP%]{display:flex}"]}),o})();function VAe(o,e){1&o&&(f.TgZ(0,"div",13),f._uU(1," Calling... "),f.qZA())}const khe=[{path:"",redirectTo:"user",pathMatch:"full"},{path:"user",component:Nhe},{path:"video/:id/:username",component:(()=>{class o{constructor(i,d,_,B,_t){var ga=this;this.stream=i,this.api=d,this.message=_,this.router=B,this.route=_t,this.userName="",this.hideBtns=!0,this.callingStatus=!1,this.stream.updateUserInfo.subscribe(function(){var _h=(0,b0.Z)(function*(_g){if(_g){const l_=yield ga.message.rtmclient.getUserAttributes(_g.toString());for(let f_=0;f_<ga.stream.remoteUsers.length;f_++){const R_=ga.stream.remoteUsers[f_];R_.uid==_g&&(R_.name=l_.name)}}});return function(_g){return _h.apply(this,arguments)}}())}ngOnInit(){var i=this;this.remoteId=this.route.snapshot.paramMap.get("id"),this.userName=this.route.snapshot.paramMap.get("username"),console.log("routeid",this.remoteId),this.startCall(),this.route.params.subscribe(d=>{console.log("value ",d)}),this.message.getStatus.subscribe(function(){var d=(0,b0.Z)(function*(_){i.callingStatus=_});return function(_){return d.apply(this,arguments)}}()),this.stream.getMediaStatus.subscribe(function(){var d=(0,b0.Z)(function*(_){i.callingStatus=_});return function(_){return d.apply(this,arguments)}}())}startCall(){var i=this;return(0,b0.Z)(function*(){i.myId=1234,yield i.generateTokenAndUid(i.myId),yield i.rtmUserLogin(i.myId),i.hideBtns=!1,i.callPeer()})()}generateTokenAndUid(i){var d=this;return(0,b0.Z)(function*(){const B={params:new PP({fromString:"channel=test&uid="+i})},_t=yield d.api.getRequest("https://test-agora.herokuapp.com/access_token?",B.params).toPromise();return{uid:i,token:_t.token}})()}generateRtmTokenAndUid(i){var d=this;return(0,b0.Z)(function*(){const B={params:new PP({fromString:"account="+i})},_t=yield d.api.getRequest("https://sharp-pouncing-grass.glitch.me/rtmToken?",B.params).toPromise();return{uid:i,token:_t.key}})()}generateUid(){return Math.floor(Math.pow(10,3)+9*Math.random()*Math.pow(10,3))}rtmUserLogin(i){var d=this;return(0,b0.Z)(function*(){d.message.rtmclient=d.message.createRTMClient(),yield d.message.signalLogin(i.toString()),d.message.RTMevents(d.message.rtmclient)})()}callPeer(){const i=this.remoteId;this.message.inquire([i]).then(d=>{d[i]&&(console.log("peer",i,"is online"),this.roomCode=this.message.getRoomCode(this.myId,i),console.log("room",this.roomCode+"Video"),this.message.localInvitation(i,this.roomCode+"Video[Front Door]DoorID943"))}).catch(()=>{console.log("The query failed")})}leaveCall(){this.stream.leaveCall()}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(IH),f.Y36(QX),f.Y36(bH),f.Y36(lS),f.Y36(sN))},o.\u0275cmp=f.Xpm({type:o,selectors:[["app-video"]],decls:20,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[2,"margin-left","24px","margin-top","20px"],[2,"display","flex","align-items","center"],["type","button",1,"btn",2,"color","#0f1012","background-color","rgb(130, 154, 169)",3,"click"],["style","padding-left: 20px;",4,"ngIf"],[1,"container-fluid",2,"padding-left","0px"],[2,"text-align","left","margin-top","20px","font-weight","bolder","padding-bottom","15px"],["id","local-player",1,"player",2,"height","250px","width","250px","border","1px solid","box-shadow","0 5px 10px 0 #B0C1D9"],[2,"padding-top","50px","padding-bottom","20px","font-weight","bolder"],["id","remote-player",1,"player",2,"height","250px","width","250px","border","1px solid","box-shadow","0 5px 10px 0 #B0C1D9"],[2,"padding-left","20px"]],template:function(i,d){1&i&&(f.TgZ(0,"html",0)(1,"head"),f._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),f.TgZ(5,"title"),f._uU(6,"POC Video"),f.qZA()(),f.TgZ(7,"body")(8,"div",4)(9,"div",5)(10,"button",6),f.NdJ("click",function(){return d.leaveCall()}),f._uU(11," Leave "),f.qZA(),f.YNc(12,VAe,2,0,"div",7),f.qZA(),f.TgZ(13,"div",8)(14,"h3",9),f._uU(15,"Visitor"),f.qZA(),f._UZ(16,"div",10),f.TgZ(17,"h3",11),f._uU(18),f.qZA(),f._UZ(19,"div",12),f.qZA()()()()),2&i&&(f.xp6(12),f.Q6J("ngIf",!d.callingStatus),f.xp6(6),f.Oqu(d.userName))},directives:[WT],styles:[""]}),o})()},{path:"audio/:id/:username",component:Wie}];let Phe=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({imports:[[ZG.forRoot(khe)],ZG]}),o})(),Lhe=(()=>{class o{constructor(i,d){this.datePipe=i,this.http=d,this.endPoint={url:"https://demo.kantech.com:8801/smartservice/Login",path_variables:"username=#username&password=#password&encrypted=#encrypted&SourceID=#SourceID&DateFormat=#DateFormat&TimeFormat=#TimeFormat&LocalDateTime=#LocalDateTime&ConnectedProgram=#ConnectedProgram"},this.loginDetail={username:"entrapassdemo",password:"entrapassdemo",SourceID:"MOBILEAPP",encrypted:1,LocalDateTime:"",ConnectedProgram:"",DateFormat:"yyyy-MM-dd",TimeFormat:"HH:mm:ss"}}ngOnInit(){const i=window.location.href;console.log(i)}}return o.\u0275fac=function(i){return new(i||o)(f.Y36(YM),f.Y36(t1))},o.\u0275cmp=f.Xpm({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(i,d){1&i&&f._UZ(0,"router-outlet")},directives:[oV],styles:[""]}),o})();const fae_firebaseConfig={apiKey:"AIzaSyBoIJc-e2mqec731UkkLJ7H3-t_kCzU_FA",authDomain:"videodemo-6010f.firebaseapp.com",databaseURL:"https://videodemo-6010f-default-rtdb.firebaseio.com",projectId:"videodemo-6010f",storageBucket:"videodemo-6010f.appspot.com",messagingSenderId:"430546386749",appId:"1:430546386749:web:68ff0a4bd21ae8514d8f54"},pae="firebasestorage.googleapis.com",gae="storageBucket";class $S extends M_.ZR{constructor(e,i){super(hne(e),`Firebase Storage: ${i} (${hne(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$S.prototype)}_codeEquals(e){return hne(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function hne(o){return"storage/"+o}function fne(){return new $S("unknown","An unknown error occurred, please check the error payload for server response.")}function mae(){return new $S("canceled","User canceled the upload/download.")}function Aae(){return new $S("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function AK(o){return new $S("invalid-argument",o)}function gne(){return new $S("app-deleted","The Firebase app was deleted.")}function qhe(o){return new $S("invalid-root-operation","The operation '"+o+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function H$(o,e){return new $S("invalid-format","String does not match format '"+o+"': "+e)}function q$(o){throw new $S("internal-error","Internal error: "+o)}class gN{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let d;try{d=gN.makeFromUrl(e,i)}catch(_){return new gN(e,"")}if(""===d.path)return d;throw function WAe(o){return new $S("invalid-default-bucket","Invalid default bucket '"+o+"'.")}(e)}static makeFromUrl(e,i){let d=null;const _="([A-Za-z0-9.\\-_]+)",ga=new RegExp("^gs://"+_+"(/(.*))?$","i");function _g(DI){DI.path_=decodeURIComponent(DI.path)}const f_=i.replace(/[.]/g,"\\."),LI=[{regex:ga,indices:{bucket:1,path:3},postModify:function B(DI){"/"===DI.path.charAt(DI.path.length-1)&&(DI.path_=DI.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${f_}/v[A-Za-z0-9_]+/b/${_}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_g},{regex:new RegExp(`^https?://${i===pae?"(?:storage.googleapis.com|storage.cloud.google.com)":i}/${_}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_g}];for(let DI=0;DI<LI.length;DI++){const y1=LI[DI],H1=y1.regex.exec(e);if(H1){let dO=H1[y1.indices.path];dO||(dO=""),d=new gN(H1[y1.indices.bucket],dO),y1.postModify(d);break}}if(null==d)throw function qAe(o){return new $S("invalid-url","Invalid URL '"+o+"'.")}(e);return d}}class YAe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function mne(o){return"string"==typeof o||o instanceof String}function vae(o){return _K()&&o instanceof Blob}function _K(){return"undefined"!=typeof Blob}function vK(o,e,i,d){if(d<e)throw AK(`Invalid value for '${o}'. Expected ${e} or greater.`);if(d>i)throw AK(`Invalid value for '${o}'. Expected ${i} or less.`)}function xL(o,e,i){let d=e;return null==i&&(d=`https://${e}`),`${i}://${d}/v0${o}`}function yK(o){const e=encodeURIComponent;let i="?";for(const d in o)o.hasOwnProperty(d)&&(i=i+(e(d)+"=")+e(o[d])+"&");return i=i.slice(0,-1),i}var I4=(()=>{return(o=I4||(I4={}))[o.NO_ERROR=0]="NO_ERROR",o[o.NETWORK_ERROR=1]="NETWORK_ERROR",o[o.ABORT=2]="ABORT",I4;var o})();class yae{constructor(e,i,d,_,B,_t,ga,_h,_g,l_,f_){this.url_=e,this.method_=i,this.headers_=d,this.body_=_,this.successCodes_=B,this.additionalRetryCodes_=_t,this.callback_=ga,this.errorCallback_=_h,this.timeout_=_g,this.progressCallback_=l_,this.connectionFactory_=f_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R_,V_)=>{this.resolve_=R_,this.reject_=V_,this.start_()})}start_(){const i=(d,_)=>{const B=this.resolve_,_t=this.reject_,ga=_.connection;if(_.wasSuccessCode)try{const _h=this.callback_(ga,ga.getResponse());!function ZAe(o){return void 0!==o}(_h)?B():B(_h)}catch(_h){_t(_h)}else if(null!==ga){const _h=fne();_h.serverResponse=ga.getErrorText(),_t(this.errorCallback_?this.errorCallback_(ga,_h):_h)}else _t(_.canceled?this.appDelete_?gne():mae():function Hhe(){return new $S("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?i(0,new x7(!1,null,!0)):this.backoffId_=function JAe(o,e,i){let d=1,_=null,B=null,_t=!1,ga=0;function _h(){return 2===ga}let _g=!1;function l_(...V0){_g||(_g=!0,e.apply(null,V0))}function f_(V0){_=setTimeout(()=>{_=null,o(V_,_h())},V0)}function R_(){B&&clearTimeout(B)}function V_(V0,...J0){if(_g)return void R_();if(V0)return R_(),void l_.call(null,V0,...J0);if(_h()||_t)return R_(),void l_.call(null,V0,...J0);let LI;d<64&&(d*=2),1===ga?(ga=2,LI=0):LI=1e3*(d+Math.random()),f_(LI)}let Y_=!1;function R0(V0){Y_||(Y_=!0,R_(),!_g&&(null!==_?(V0||(ga=2),clearTimeout(_),f_(0)):V0||(ga=1)))}return f_(0),B=setTimeout(()=>{_t=!0,R0(!0)},i),R0}((d,_)=>{if(_)return void d(!1,new x7(!1,null,!0));const B=this.connectionFactory_();this.pendingConnection_=B;const _t=ga=>{null!==this.progressCallback_&&this.progressCallback_(ga.loaded,ga.lengthComputable?ga.total:-1)};null!==this.progressCallback_&&B.addUploadProgressListener(_t),B.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&B.removeUploadProgressListener(_t),this.pendingConnection_=null;const ga=B.getErrorCode()===I4.NO_ERROR,_h=B.getStatus();if(!ga||this.isRetryStatusCode_(_h)){const l_=B.getErrorCode()===I4.ABORT;return void d(!1,new x7(!1,null,l_))}const _g=-1!==this.successCodes_.indexOf(_h);d(!0,new x7(_g,B))})},i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function $Ae(o){o(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const i=e>=500&&e<600,_=-1!==[408,429].indexOf(e),B=-1!==this.additionalRetryCodes_.indexOf(e);return i||_||B}}class x7{constructor(e,i,d){this.wasSuccessCode=e,this.connection=i,this.canceled=!!d}}function J1(...o){const e=function f6(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const i=new e;for(let d=0;d<o.length;d++)i.append(o[d]);return i.getBlob()}if(_K())return new Blob(o);throw new $S("unsupported-environment","This browser doesn't seem to support creating Blobs")}const LL={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ane{constructor(e,i){this.data=e,this.contentType=i||null}}function EK(o,e){switch(o){case LL.RAW:return new Ane(Whe(e));case LL.BASE64:case LL.BASE64URL:return new Ane(_ne(o,e));case LL.DATA_URL:return new Ane(function q2(o){const e=new H2(o);return e.base64?_ne(LL.BASE64,e.rest):function n_e(o){let e;try{e=decodeURIComponent(o)}catch(i){throw H$(LL.DATA_URL,"Malformed data URL.")}return Whe(e)}(e.rest)}(e),function W2(o){return new H2(o).contentType}(e))}throw fne()}function Whe(o){const e=[];for(let i=0;i<o.length;i++){let d=o.charCodeAt(i);d<=127?e.push(d):d<=2047?e.push(192|d>>6,128|63&d):55296==(64512&d)?i<o.length-1&&56320==(64512&o.charCodeAt(i+1))?(d=65536|(1023&d)<<10|1023&o.charCodeAt(++i),e.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d)):e.push(239,191,189):56320==(64512&d)?e.push(239,191,189):e.push(224|d>>12,128|d>>6&63,128|63&d)}return new Uint8Array(e)}function _ne(o,e){switch(o){case LL.BASE64:{const _=-1!==e.indexOf("-"),B=-1!==e.indexOf("_");if(_||B)throw H$(o,"Invalid character '"+(_?"-":"_")+"' found: is it base64url encoded?");break}case LL.BASE64URL:{const _=-1!==e.indexOf("+"),B=-1!==e.indexOf("/");if(_||B)throw H$(o,"Invalid character '"+(_?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=function t_e(o){return atob(o)}(e)}catch(_){throw H$(o,"Invalid character found")}const d=new Uint8Array(i.length);for(let _=0;_<i.length;_++)d[_]=i.charCodeAt(_);return d}class H2{constructor(e){this.base64=!1,this.contentType=null;const i=e.match(/^data:([^,]+)?,/);if(null===i)throw H$(LL.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const d=i[1]||null;null!=d&&(this.base64=function Khe(o,e){return o.length>=e.length&&o.substring(o.length-e.length)===e}(d,";base64"),this.contentType=this.base64?d.substring(0,d.length-7):d),this.rest=e.substring(e.indexOf(",")+1)}}class K2{constructor(e,i){let d=0,_="";vae(e)?(this.data_=e,d=e.size,_=e.type):e instanceof ArrayBuffer?(i?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),d=this.data_.length):e instanceof Uint8Array&&(i?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),d=e.length),this.size_=d,this.type_=_}size(){return this.size_}type(){return this.type_}slice(e,i){if(vae(this.data_)){const _=function e_e(o,e,i){return o.webkitSlice?o.webkitSlice(e,i):o.mozSlice?o.mozSlice(e,i):o.slice?o.slice(e,i):null}(this.data_,e,i);return null===_?null:new K2(_)}{const d=new Uint8Array(this.data_.buffer,e,i-e);return new K2(d,!0)}}static getBlob(...e){if(_K()){const i=e.map(d=>d instanceof K2?d.data_:d);return new K2(J1.apply(null,i))}{const i=e.map(_t=>mne(_t)?EK(LL.RAW,_t).data:_t.data_);let d=0;i.forEach(_t=>{d+=_t.byteLength});const _=new Uint8Array(d);let B=0;return i.forEach(_t=>{for(let ga=0;ga<_t.length;ga++)_[B++]=_t[ga]}),new K2(_,!0)}}uploadData(){return this.data_}}function vne(o){let e;try{e=JSON.parse(o)}catch(i){return null}return function P7(o){return"object"==typeof o&&!Array.isArray(o)}(e)?e:null}function b4(o){const e=o.lastIndexOf("/",o.length-2);return-1===e?o:o.slice(e+1)}function Yhe(o,e){return e}class ZN{constructor(e,i,d,_){this.server=e,this.local=i||e,this.writable=!!d,this.xform=_||Yhe}}let p6=null;function IK(){if(p6)return p6;const o=[];o.push(new ZN("bucket")),o.push(new ZN("generation")),o.push(new ZN("metageneration")),o.push(new ZN("name","fullPath",!0));const i=new ZN("name");i.xform=function e(B,_t){return function Jhe(o){return!mne(o)||o.length<2?o:b4(o)}(_t)},o.push(i);const _=new ZN("size");return _.xform=function d(B,_t){return void 0!==_t?Number(_t):_t},o.push(_),o.push(new ZN("timeCreated")),o.push(new ZN("updated")),o.push(new ZN("md5Hash",null,!0)),o.push(new ZN("cacheControl",null,!0)),o.push(new ZN("contentDisposition",null,!0)),o.push(new ZN("contentEncoding",null,!0)),o.push(new ZN("contentLanguage",null,!0)),o.push(new ZN("contentType",null,!0)),o.push(new ZN("metadata","customMetadata",!0)),p6=o,p6}function Cae(o,e,i){const d=vne(e);return null===d?null:function i_e(o,e,i){const d={type:"file"},_=i.length;for(let B=0;B<_;B++){const _t=i[B];d[_t.local]=_t.xform(d,e[_t.server])}return function r_e(o,e){Object.defineProperty(o,"ref",{get:function i(){const B=new gN(o.bucket,o.fullPath);return e._makeStorageReference(B)}})}(d,o),d}(o,d,i)}function wae(o,e){const i={},d=e.length;for(let _=0;_<d;_++){const B=e[_];B.writable&&(i[B.server]=o[B.local])}return JSON.stringify(i)}class C4{constructor(e,i,d,_){this.url=e,this.method=i,this.handler=d,this.timeout=_,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function w4(o){if(!o)throw fne()}function g6(o,e){return function i(d,_){const B=Cae(o,_,e);return w4(null!==B),B}}function L7(o){return function e(i,d){let _;return _=401===i.getStatus()?i.getErrorText().includes("Firebase App Check token is invalid")?function Ghe(){return new $S("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Vhe(){return new $S("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===i.getStatus()?function jhe(o){return new $S("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(o.bucket):403===i.getStatus()?function Qhe(o){return new $S("unauthorized","User does not have permission to access '"+o+"'.")}(o.path):d,_.serverResponse=d.serverResponse,_}}function L8(o){const e=L7(o);return function i(d,_){let B=e(d,_);return 404===d.getStatus()&&(B=function Fhe(o){return new $S("object-not-found","Object '"+o+"' does not exist.")}(o.path)),B.serverResponse=_.serverResponse,B}}function YP(o,e,i){const _=xL(e.fullServerUrl(),o.host,o._protocol),_t=o.maxOperationRetryTime,ga=new C4(_,"GET",g6(o,i),_t);return ga.errorHandler=L8(e),ga}function bK(o,e,i,d,_){const B={};B.prefix=e.isRoot?"":e.path+"/",i&&i.length>0&&(B.delimiter=i),d&&(B.pageToken=d),_&&(B.maxResults=_);const ga=xL(e.bucketOnlyServerUrl(),o.host,o._protocol),_g=o.maxOperationRetryTime,l_=new C4(ga,"GET",function Xhe(o,e){return function i(d,_){const B=function Zhe(o,e,i){const d=vne(i);return null===d?null:function Sae(o,e,i){const d={prefixes:[],items:[],nextPageToken:i.nextPageToken};if(i.prefixes)for(const _ of i.prefixes){const B=_.replace(/\/$/,""),_t=o._makeStorageReference(new gN(e,B));d.prefixes.push(_t)}if(i.items)for(const _ of i.items){const B=o._makeStorageReference(new gN(e,_.name));d.items.push(B)}return d}(o,e,d)}(o,e,_);return w4(null!==B),B}}(o,e.bucket),_g);return l_.urlParams=B,l_.errorHandler=L7(e),l_}function nfe(o,e,i){const d=Object.assign({},i);return d.fullPath=o.path,d.size=e.size(),d.contentType||(d.contentType=function s_e(o,e){return o&&o.contentType||e&&e.type()||"application/octet-stream"}(null,e)),d}class Ene{constructor(e,i,d,_){this.current=e,this.total=i,this.finalized=!!d,this.metadata=_||null}}function Dae(o,e){let i=null;try{i=o.getResponseHeader("X-Goog-Upload-Status")}catch(_){w4(!1)}return w4(!!i&&-1!==(e||["active"]).indexOf(i)),i}const ife={STATE_CHANGED:"state_changed"},z2={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function CK(o){switch(o){case"running":case"pausing":case"canceling":return z2.RUNNING;case"paused":return z2.PAUSED;case"success":return z2.SUCCESS;case"canceled":return z2.CANCELED;default:return z2.ERROR}}class u_e{constructor(e,i,d){if(function _ae(o){return"function"==typeof o}(e)||null!=i||null!=d)this.next=e,this.error=null!=i?i:void 0,this.complete=null!=d?d:void 0;else{const B=e;this.next=B.next,this.error=B.error,this.complete=B.complete}}}function M8(o){return(...e)=>{Promise.resolve().then(()=>o(...e))}}class d_e extends class l_e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=I4.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=I4.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=I4.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,i,d,_){if(this.sent_)throw q$("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(i,e,!0),void 0!==_)for(const B in _)_.hasOwnProperty(B)&&this.xhr_.setRequestHeader(B,_[B].toString());return void 0!==d?this.xhr_.send(d):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw q$("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw q$("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw q$("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw q$("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function VU(){return new d_e}class afe{constructor(e,i,d=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=i,this._metadata=d,this._mappings=IK(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=_=>{this._request=void 0,this._chunkMultiplier=1,_._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=_,this._transition("error"))},this._metadataErrorHandler=_=>{this._request=void 0,_._codeEquals("canceled")?this.completeTransitions_():(this._error=_,this._transition("error"))},this._promise=new Promise((_,B)=>{this._resolve=_,this._reject=B,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return i=>this._updateProgress(e+i)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([i,d])=>{switch(this._state){case"running":e(i,d);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,i)=>{const d=function rfe(o,e,i,d,_){const B=e.bucketOnlyServerUrl(),_t=nfe(e,d,_),ga={name:_t.fullPath},_h=xL(B,o.host,o._protocol),l_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${d.size()}`,"X-Goog-Upload-Header-Content-Type":_t.contentType,"Content-Type":"application/json; charset=utf-8"},f_=wae(_t,i),Y_=new C4(_h,"POST",function V_(R0){let V0;Dae(R0);try{V0=R0.getResponseHeader("X-Goog-Upload-URL")}catch(J0){w4(!1)}return w4(mne(V0)),V0},o.maxUploadRetryTime);return Y_.urlParams=ga,Y_.headers=l_,Y_.body=f_,Y_.errorHandler=L7(e),Y_}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(d,VU,e,i);this._request=_,_.getPromise().then(B=>{this._request=void 0,this._uploadUrl=B,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((i,d)=>{const _=function a_e(o,e,i,d){const _h=new C4(i,"POST",function B(_g){const l_=Dae(_g,["active","final"]);let f_=null;try{f_=_g.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V_){w4(!1)}f_||w4(!1);const R_=Number(f_);return w4(!isNaN(R_)),new Ene(R_,d.size(),"final"===l_)},o.maxUploadRetryTime);return _h.headers={"X-Goog-Upload-Command":"query"},_h.errorHandler=L7(e),_h}(this._ref.storage,this._ref._location,e,this._blob),B=this._ref.storage._makeRequest(_,VU,i,d);this._request=B,B.getPromise().then(_t=>{_t=_t,this._request=void 0,this._updateProgress(_t.current),this._needToFetchStatus=!1,_t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,i=new Ene(this._transferred,this._blob.size()),d=this._uploadUrl;this._resolveToken((_,B)=>{let _t;try{_t=function c_e(o,e,i,d,_,B,_t,ga){const _h=new Ene(0,0);if(_t?(_h.current=_t.current,_h.total=_t.total):(_h.current=0,_h.total=d.size()),d.size()!==_h.total)throw function pne(){return new $S("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _g=_h.total-_h.current;let l_=_g;_>0&&(l_=Math.min(l_,_));const f_=_h.current,Y_={"X-Goog-Upload-Command":l_===_g?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_h.current}`},R0=d.slice(f_,f_+l_);if(null===R0)throw Aae();const LI=new C4(i,"POST",function V0(DI,y1){const H1=Dae(DI,["active","final"]),BR=_h.current+l_,dO=d.size();let Eie;return Eie="final"===H1?g6(e,B)(DI,y1):null,new Ene(BR,dO,"final"===H1,Eie)},e.maxUploadRetryTime);return LI.headers=Y_,LI.body=R0.uploadData(),LI.progressCallback=ga||null,LI.errorHandler=L7(o),LI}(this._ref._location,this._ref.storage,d,this._blob,e,this._mappings,i,this._makeProgressCallback())}catch(_h){return this._error=_h,void this._transition("error")}const ga=this._ref.storage._makeRequest(_t,VU,_,B);this._request=ga,ga.getPromise().then(_h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_h.current),_h.finalized?(this._metadata=_h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,i)=>{const d=YP(this._ref.storage,this._ref._location,this._mappings),_=this._ref.storage._makeRequest(d,VU,e,i);this._request=_,_.getPromise().then(B=>{this._request=void 0,this._metadata=B,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,i)=>{const d=function Oae(o,e,i,d,_){const B=e.bucketOnlyServerUrl(),_t={"X-Goog-Upload-Protocol":"multipart"},_h=function ga(){let LI="";for(let DI=0;DI<2;DI++)LI+=Math.random().toString().slice(2);return LI}();_t["Content-Type"]="multipart/related; boundary="+_h;const _g=nfe(e,d,_),l_=wae(_g,i),V_=K2.getBlob("--"+_h+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l_+"\r\n--"+_h+"\r\nContent-Type: "+_g.contentType+"\r\n\r\n",d,"\r\n--"+_h+"--");if(null===V_)throw Aae();const Y_={name:_g.fullPath},R0=xL(B,o.host,o._protocol),J0=o.maxUploadRetryTime,MI=new C4(R0,"POST",g6(o,i),J0);return MI.urlParams=Y_,MI.headers=_t,MI.body=V_.uploadData(),MI.errorHandler=L7(e),MI}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(d,VU,e,i);this._request=_,_.getPromise().then(B=>{this._request=void 0,this._metadata=B,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const i=this._transferred;this._transferred=e,this._transferred!==i&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const i="paused"===this._state;this._state=e,i&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mae(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=CK(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,i,d,_){const B=new u_e(i||void 0,d||void 0,_||void 0);return this._addObserver(B),()=>{this._removeObserver(B)}}then(e,i){return this._promise.then(e,i)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const i=this._observers.indexOf(e);-1!==i&&this._observers.splice(i,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(i=>{this._notifyObserver(i)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(CK(this._state)){case z2.SUCCESS:M8(this._resolve.bind(null,this.snapshot))();break;case z2.CANCELED:case z2.ERROR:M8(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(CK(this._state)){case z2.RUNNING:case z2.PAUSED:e.next&&M8(e.next.bind(e,this.snapshot))();break;case z2.SUCCESS:e.complete&&M8(e.complete.bind(e))();break;default:e.error&&M8(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class B8{constructor(e,i){this._service=e,this._location=i instanceof gN?i:gN.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new B8(e,i)}get root(){const e=new gN(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b4(this._location.path)}get storage(){return this._service}get parent(){const e=function zhe(o){if(0===o.length)return null;const e=o.lastIndexOf("/");return-1===e?"":o.slice(0,e)}(this._location.path);if(null===e)return null;const i=new gN(this._location.bucket,e);return new B8(this._service,i)}_throwIfRoot(e){if(""===this._location.path)throw qhe(e)}}function lfe(o,e,i){return xae.apply(this,arguments)}function xae(){return(xae=(0,b0.Z)(function*(o,e,i){const _=yield dfe(o,{pageToken:i});e.prefixes.push(..._.prefixes),e.items.push(..._.items),null!=_.nextPageToken&&(yield lfe(o,e,_.nextPageToken))})).apply(this,arguments)}function dfe(o,e){null!=e&&"number"==typeof e.maxResults&&vK("options.maxResults",1,1e3,e.maxResults);const i=e||{},d=bK(o.storage,o._location,"/",i.pageToken,i.maxResults);return o.storage.makeRequestWithTokens(d,VU)}function hfe(o){o._throwIfRoot("getDownloadURL");const e=function tfe(o,e,i){const _=xL(e.fullServerUrl(),o.host,o._protocol),_t=o.maxOperationRetryTime,ga=new C4(_,"GET",function efe(o,e){return function i(d,_){const B=Cae(o,_,e);return w4(null!==B),function $he(o,e,i,d){const _=vne(e);if(null===_||!mne(_.downloadTokens))return null;const B=_.downloadTokens;if(0===B.length)return null;const _t=encodeURIComponent;return B.split(",").map(_g=>{const f_=o.fullPath;return xL("/b/"+_t(o.bucket)+"/o/"+_t(f_),i,d)+yK({alt:"media",token:_g})})[0]}(B,_,o.host,o._protocol)}}(o,i),_t);return ga.errorHandler=L8(e),ga}(o.storage,o._location,IK());return o.storage.makeRequestWithTokens(e,VU).then(i=>{if(null===i)throw function zAe(){return new $S("no-download-url","The given file does not have any download URLs.")}();return i})}function ffe(o,e){const i=function bae(o,e){const i=e.split("/").filter(d=>d.length>0).join("/");return 0===o.length?i:o+"/"+i}(o._location.path,e),d=new gN(o._location.bucket,i);return new B8(o.storage,d)}function Mae(o,e){if(o instanceof wne){const i=o;if(null==i._bucket)throw function KAe(){return new $S("no-default-bucket","No default bucket found. Did you set the '"+gae+"' property when initializing the app?")}();const d=new B8(i,i._bucket);return null!=e?Mae(d,e):d}return void 0!==e?ffe(o,e):o}function W$(o,e){if(e&&function pfe(o){return/^[A-Za-z]+:\/\//.test(o)}(e)){if(o instanceof wne)return function p_e(o,e){return new B8(o,e)}(o,e);throw AK("To use ref(service, url), the first argument must be a Storage instance.")}return Mae(o,e)}function gfe(o,e){const i=null==e?void 0:e[gae];return null==i?null:gN.makeFromBucketSpec(i,o)}class wne{constructor(e,i,d,_,B){this.app=e,this._authProvider=i,this._appCheckProvider=d,this._url=_,this._firebaseVersion=B,this._bucket=null,this._host=pae,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=_?gN.makeFromBucketSpec(_,this._host):gfe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?gN.makeFromBucketSpec(this._url,e):gfe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vK("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vK("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,b0.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const i=e._authProvider.getImmediate({optional:!0});if(i){const d=yield i.getToken();if(null!==d)return d.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,b0.Z)(function*(){const i=e._appCheckProvider.getImmediate({optional:!0});return i?(yield i.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new B8(this,e)}_makeRequest(e,i,d,_){if(this._deleted)return new YAe(gne());{const B=function Iae(o,e,i,d,_,B){const _t=yK(o.urlParams),ga=o.url+_t,_h=Object.assign({},o.headers);return function V1(o,e){e&&(o["X-Firebase-GMPID"]=e)}(_h,e),function XAe(o,e){null!==e&&e.length>0&&(o.Authorization="Firebase "+e)}(_h,i),function RR(o,e){o["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_h,B),function Eae(o,e){null!==e&&(o["X-Firebase-AppCheck"]=e)}(_h,d),new yae(ga,o.method,_h,o.body,o.successCodes,o.additionalRetryCodes,o.handler,o.errorHandler,o.timeout,o.progressCallback,_)}(e,this._appId,d,_,i,this._firebaseVersion);return this._requests.add(B),B.getPromise().then(()=>this._requests.delete(B),()=>this._requests.delete(B)),B}}makeRequestWithTokens(e,i){var d=this;return(0,b0.Z)(function*(){const[_,B]=yield Promise.all([d._getAuthToken(),d._getAppCheckToken()]);return d._makeRequest(e,i,_,B).getPromise()})()}}const mfe="@firebase/storage";function D_(o,e){return W$(o=(0,M_.m9)(o),e)}function ML(o,{instanceIdentifier:e}){const i=o.getProvider("app").getImmediate(),d=o.getProvider("auth-internal"),_=o.getProvider("app-check-internal");return new wne(i,d,_,e,dS.SDK_VERSION)}!function Sne(){(0,dS._registerComponent)(new LP.wA("storage",ML,"PUBLIC").setMultipleInstances(!0)),(0,dS.registerVersion)(mfe,"0.9.6",""),(0,dS.registerVersion)(mfe,"0.9.6","esm2017")}();class wK{constructor(e,i,d){this._delegate=e,this.task=i,this.ref=d}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class h_{constructor(e,i){this._delegate=e,this._ref=i,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wK(this._delegate.snapshot,this,this._ref)}then(e,i){return this._delegate.then(d=>{if(e)return e(new wK(d,this,this._ref))},i)}on(e,i,d,_){let B;return i&&(B="function"==typeof i?_t=>i(new wK(_t,this,this._ref)):{next:i.next?_t=>i.next(new wK(_t,this,this._ref)):void 0,complete:i.complete||void 0,error:i.error||void 0}),this._delegate.on(e,B,d||void 0,_||void 0)}}class z${constructor(e,i){this._delegate=e,this._service=i}get prefixes(){return this._delegate.prefixes.map(e=>new TM(e,this._service))}get items(){return this._delegate.items.map(e=>new TM(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class TM{constructor(e,i){this._delegate=e,this.storage=i}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const i=function U_(o,e){return ffe(o,e)}(this._delegate,e);return new TM(i,this.storage)}get root(){return new TM(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new TM(e,this.storage)}put(e,i){return this._throwIfRoot("put"),new h_(function m_e(o,e,i){return function ufe(o,e,i){return o._throwIfRoot("uploadBytesResumable"),new afe(o,new K2(e),i)}(o=(0,M_.m9)(o),e,i)}(this._delegate,e,i),this)}putString(e,i=LL.RAW,d){this._throwIfRoot("putString");const _=EK(i,e),B=Object.assign({},d);return null==B.contentType&&null!=_.contentType&&(B.contentType=_.contentType),new h_(new afe(this._delegate,new K2(_.data,!0),B),this)}listAll(){return function A_e(o){return function f_e(o){const e={prefixes:[],items:[]};return lfe(o,e).then(()=>e)}(o=(0,M_.m9)(o))}(this._delegate).then(e=>new z$(e,this.storage))}list(e){return function GU(o,e){return dfe(o=(0,M_.m9)(o),e)}(this._delegate,e||void 0).then(i=>new z$(i,this.storage))}getMetadata(){return function _fe(o){return function Lae(o){o._throwIfRoot("getMetadata");const e=YP(o.storage,o._location,IK());return o.storage.makeRequestWithTokens(e,VU)}(o=(0,M_.m9)(o))}(this._delegate)}updateMetadata(e){return function T4(o,e){return function M7(o,e){o._throwIfRoot("updateMetadata");const i=function o_e(o,e,i,d){const B=xL(e.fullServerUrl(),o.host,o._protocol),ga=wae(i,d),_g=o.maxOperationRetryTime,l_=new C4(B,"PATCH",g6(o,d),_g);return l_.headers={"Content-Type":"application/json; charset=utf-8"},l_.body=ga,l_.errorHandler=L8(e),l_}(o.storage,o._location,e,IK());return o.storage.makeRequestWithTokens(i,VU)}(o=(0,M_.m9)(o),e)}(this._delegate,e)}getDownloadURL(){return function hS(o){return hfe(o=(0,M_.m9)(o))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Tne(o){return function Cne(o){o._throwIfRoot("deleteObject");const e=function yne(o,e){const d=xL(e.fullServerUrl(),o.host,o._protocol),ga=new C4(d,"DELETE",function _t(_h,_g){},o.maxOperationRetryTime);return ga.successCodes=[200,204],ga.errorHandler=L8(e),ga}(o.storage,o._location);return o.storage.makeRequestWithTokens(e,VU)}(o=(0,M_.m9)(o))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw qhe(e)}}class yfe{constructor(e,i){this.app=e,this._delegate=i}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Y$(e))throw AK("ref() expected a child path but got a URL, use refFromURL instead.");return new TM(D_(this._delegate,e),this)}refFromURL(e){if(!Y$(e))throw AK("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gN.makeFromUrl(e,this._delegate.host)}catch(i){throw AK("refFromUrl() expected a valid full URL but got an invalid one.")}return new TM(D_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,i,d={}){!function Fae(o,e,i,d={}){!function Bae(o,e,i,d={}){o.host=`${e}:${i}`,o._protocol="http";const{mockUserToken:_}=d;_&&(o._overrideAuthToken="string"==typeof _?_:(0,M_.Sg)(_,o.app.options.projectId))}(o,e,i,d)}(this._delegate,e,i,d)}}function Y$(o){return/^[A-Za-z]+:\/\//.test(o)}function bfe(o,{instanceIdentifier:e}){const i=o.getProvider("app-compat").getImmediate(),d=o.getProvider("storage").getImmediate({identifier:e});return new yfe(i,d)}function Vae(o){const e=function One(o){return new UT.y(e=>{const i=_t=>e.next(_t);i(o.snapshot);const B=o.on("state_changed",i);return o.then(_t=>{i(_t),e.complete()},_t=>{i(o.snapshot),(_t=>{e.error(_t)})(_t)}),function(){B()}}).pipe(function Mhe(o,e=xP.z){return(0,aS.e)((i,d)=>{let _=null,B=null,_t=null;const ga=()=>{if(_){_.unsubscribe(),_=null;const _g=B;B=null,d.next(_g)}};function _h(){const _g=_t+o,l_=e.now();if(l_<_g)return _=this.schedule(void 0,_g-l_),void d.add(_);ga()}i.subscribe((0,sS.x)(d,_g=>{B=_g,_t=e.now(),_||(_=e.schedule(_h,o),d.add(_))},()=>{ga(),d.complete()},void 0,()=>{B=_=null}))})}(0))}(o);return{task:o,then:o.then.bind(o),catch:o.catch.bind(o),pause:o.pause.bind(o),cancel:o.cancel.bind(o),resume:o.resume.bind(o),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,RI.U)(i=>i.bytesTransferred/i.totalBytes*100))}}function TK(o){return{getDownloadURL:()=>mI(void 0).pipe(aT.fc,KT(()=>o.getDownloadURL()),aT.iC),getMetadata:()=>mI(void 0).pipe(aT.fc,KT(()=>o.getMetadata()),aT.iC),delete:()=>(0,fT.D)(o.delete()),child:e=>TK(o.child(e)),updateMetadata:e=>(0,fT.D)(o.updateMetadata(e)),put:(e,i)=>Vae(o.put(e,i)),putString:(e,i,d)=>Vae(o.putString(e,i,d)),list:e=>(0,fT.D)(o.list(e)),listAll:()=>(0,fT.D)(o.listAll())}}!function Rne(o){const e={TaskState:z2,TaskEvent:ife,StringFormat:LL,Storage:yfe,Reference:TM};o.INTERNAL.registerComponent(new LP.wA("storage-compat",bfe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),o.registerVersion("@firebase/storage-compat","0.1.14")}(yV.Z);const Dne=new f.OlP("angularfire2.storageBucket"),Gae=new f.OlP("angularfire2.storage.maxUploadRetryTime"),Qae=new f.OlP("angularfire2.storage.maxOperationRetryTime"),B7=new f.OlP("angularfire2.storage.use-emulator");let aI=(()=>{class o{constructor(i,d,_,B,_t,ga,_h,_g,l_,f_){const R_=(0,bR.on)(i,_t,d);this.storage=(0,bR.cc)(`${R_.name}.storage.${_}`,"AngularFireStorage",R_.name,()=>{const V_=_t.runOutsideAngular(()=>R_.storage(_||void 0)),Y_=l_;return Y_&&V_.useEmulator(...Y_),_h&&V_.setMaxUploadRetryTime(_h),_g&&V_.setMaxOperationRetryTime(_g),V_},[_h,_g])}ref(i){return TK(this.storage.ref(i))}refFromURL(i){return TK(this.storage.refFromURL(i))}upload(i,d,_){return TK(this.storage.ref(i)).put(d,_)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(bR.Dh),f.LFG(bR.xv,8),f.LFG(Dne,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(aT.HU),f.LFG(Gae,8),f.LFG(Qae,8),f.LFG(B7,8),f.LFG(a6,8))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),BL=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({}),o})(),m6=(()=>{class o{constructor(){XW.Z.registerVersion("angularfire",aT.q4.full,"gcs-compat")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:[aI],imports:[BL]}),o})();function T0(){return(0,aS.e)((o,e)=>{let i,d=!1;o.subscribe((0,sS.x)(e,_=>{const B=i;i=_,d&&e.next([B,_]),d=!0}))})}var dI,SK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pI={},RK=RK||{},g1=SK||self;function U7(){}function GO(o){var e=typeof o;return"array"==(e="object"!=e?e:o?Array.isArray(o)?"array":e:"null")||"object"==e&&"number"==typeof o.length}function F7(o){var e=typeof o;return"object"==e&&null!=o||"function"==e}var Hae="closure_uid_"+(1e9*Math.random()>>>0),__e=0;function v_e(o,e,i){return o.call.apply(o.bind,arguments)}function OK(o,e,i){if(!o)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var _=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_,d),o.apply(e,_)}}return function(){return o.apply(e,arguments)}}function bO(o,e,i){return(bO=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v_e:OK).apply(null,arguments)}function j7(o,e){var i=Array.prototype.slice.call(arguments,1);return function(){var d=i.slice();return d.push.apply(d,arguments),o.apply(this,d)}}function mN(o,e){function i(){}i.prototype=e.prototype,o.Z=e.prototype,o.prototype=new i,o.prototype.constructor=o,o.Vb=function(d,_,B){for(var _t=Array(arguments.length-2),ga=2;ga<arguments.length;ga++)_t[ga-2]=arguments[ga];return e.prototype[_].apply(d,_t)}}function QU(){this.s=this.s,this.o=this.o}var S0={};QU.prototype.s=!1,QU.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function ZS(o){return Object.prototype.hasOwnProperty.call(o,Hae)&&o[Hae]||(o[Hae]=++__e)}(this);delete S0[o]}},QU.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const AN=Array.prototype.indexOf?function(o,e){return Array.prototype.indexOf.call(o,e,void 0)}:function(o,e){if("string"==typeof o)return"string"!=typeof e||1!=e.length?-1:o.indexOf(e,0);for(let i=0;i<o.length;i++)if(i in o&&o[i]===e)return i;return-1},Nne=Array.prototype.forEach?function(o,e,i){Array.prototype.forEach.call(o,e,i)}:function(o,e,i){const d=o.length,_="string"==typeof o?o.split(""):o;for(let B=0;B<d;B++)B in _&&e.call(i,_[B],B,o)};function i1(o){return Array.prototype.concat.apply([],arguments)}function $P(o){const e=o.length;if(0<e){const i=Array(e);for(let d=0;d<e;d++)i[d]=o[d];return i}return[]}function NK(o){return/^[\s\xa0]*$/.test(o)}var Y2,Cfe=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function nO(o,e){return-1!=o.indexOf(e)}function V7(o,e){return o<e?-1:o>e?1:0}e:{var wfe=g1.navigator;if(wfe){var Tfe=wfe.userAgent;if(Tfe){Y2=Tfe;break e}}Y2=""}function kK(o,e,i){for(const d in o)e.call(i,o[d],d,o)}function qae(o){const e={};for(const i in o)e[i]=o[i];return e}var Sfe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rfe(o,e){let i,d;for(let _=1;_<arguments.length;_++){for(i in d=arguments[_],d)o[i]=d[i];for(let B=0;B<Sfe.length;B++)i=Sfe[B],Object.prototype.hasOwnProperty.call(d,i)&&(o[i]=d[i])}}function Wae(o){return Wae[" "](o),o}Wae[" "]=U7;var $$,o,Kae=nO(Y2,"Opera"),G7=nO(Y2,"Trident")||nO(Y2,"MSIE"),Ofe=nO(Y2,"Edge"),J$=Ofe||G7,Dfe=nO(Y2,"Gecko")&&!(nO(Y2.toLowerCase(),"webkit")&&!nO(Y2,"Edge"))&&!(nO(Y2,"Trident")||nO(Y2,"MSIE"))&&!nO(Y2,"Edge"),E_e=nO(Y2.toLowerCase(),"webkit")&&!nO(Y2,"Edge");function zae(){var o=g1.document;return o?o.documentMode:void 0}e:{var Yae="",Jae=(o=Y2,Dfe?/rv:([^\);]+)(\)|;)/.exec(o):Ofe?/Edge\/([\d\.]+)/.exec(o):G7?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):E_e?/WebKit\/(\S+)/.exec(o):Kae?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(Jae&&(Yae=Jae?Jae[1]:""),G7){var kne=zae();if(null!=kne&&kne>parseFloat(Yae)){$$=String(kne);break e}}$$=Yae}var I_e={};var C_e=g1.document&&G7&&(zae()||parseInt($$,10))||void 0,w_e=function(){if(!g1.addEventListener||!Object.defineProperty)return!1;var o=!1,e=Object.defineProperty({},"passive",{get:function(){o=!0}});try{g1.addEventListener("test",U7,e),g1.removeEventListener("test",U7,e)}catch(i){}return o}();function _N(o,e){this.type=o,this.g=this.target=e,this.defaultPrevented=!1}function Q7(o,e){if(_N.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var i=this.type=o.type,d=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=e,e=o.relatedTarget){if(Dfe){e:{try{Wae(e.nodeName);var _=!0;break e}catch(B){}_=!1}_||(e=null)}}else"mouseover"==i?e=o.fromElement:"mouseout"==i&&(e=o.toElement);this.relatedTarget=e,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:T_e[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Q7.Z.h.call(this)}}_N.prototype.h=function(){this.defaultPrevented=!0},mN(Q7,_N);var T_e={2:"touch",3:"pen",4:"mouse"};Q7.prototype.h=function(){Q7.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Z$="closure_listenable_"+(1e6*Math.random()|0),kfe=0;function S_e(o,e,i,d,_){this.listener=o,this.proxy=null,this.src=e,this.type=i,this.capture=!!d,this.ia=_,this.key=++kfe,this.ca=this.fa=!1}function X$(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function eZ(o){this.src=o,this.g={},this.h=0}function S4(o,e){var i=e.type;if(i in o.g){var B,d=o.g[i],_=AN(d,e);(B=0<=_)&&Array.prototype.splice.call(d,_,1),B&&(X$(e),0==o.g[i].length&&(delete o.g[i],o.h--))}}function xne(o,e,i,d){for(var _=0;_<o.length;++_){var B=o[_];if(!B.ca&&B.listener==e&&B.capture==!!i&&B.ia==d)return _}return-1}eZ.prototype.add=function(o,e,i,d,_){var B=o.toString();(o=this.g[B])||(o=this.g[B]=[],this.h++);var _t=xne(o,e,d,_);return-1<_t?(e=o[_t],i||(e.fa=!1)):((e=new S_e(e,this.src,B,!!d,_)).fa=i,o.push(e)),e};var $ae="closure_lm_"+(1e6*Math.random()|0),Zae={};function Pfe(o,e,i,d,_){if(d&&d.once)return Mfe(o,e,i,d,_);if(Array.isArray(e)){for(var B=0;B<e.length;B++)Pfe(o,e[B],i,d,_);return null}return i=$1(i),o&&o[Z$]?o.N(e,i,F7(d)?!!d.capture:!!d,_):xfe(o,e,i,!1,d,_)}function xfe(o,e,i,d,_,B){if(!e)throw Error("Invalid event type");var _t=F7(_)?!!_.capture:!!_,ga=PK(o);if(ga||(o[$ae]=ga=new eZ(o)),(i=ga.add(e,i,d,_t,B)).proxy)return i;if(d=function Lfe(){var e=ece;return function o(i){return e.call(o.src,o.listener,i)}}(),i.proxy=d,d.src=o,d.listener=i,o.addEventListener)w_e||(_=_t),void 0===_&&(_=!1),o.addEventListener(e.toString(),d,_);else if(o.attachEvent)o.attachEvent(Lne(e.toString()),d);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(d)}return i}function Mfe(o,e,i,d,_){if(Array.isArray(e)){for(var B=0;B<e.length;B++)Mfe(o,e[B],i,d,_);return null}return i=$1(i),o&&o[Z$]?o.O(e,i,F7(d)?!!d.capture:!!d,_):xfe(o,e,i,!0,d,_)}function Bfe(o,e,i,d,_){if(Array.isArray(e))for(var B=0;B<e.length;B++)Bfe(o,e[B],i,d,_);else d=F7(d)?!!d.capture:!!d,i=$1(i),o&&o[Z$]?(o=o.i,(e=String(e).toString())in o.g&&-1<(i=xne(B=o.g[e],i,d,_))&&(X$(B[i]),Array.prototype.splice.call(B,i,1),0==B.length&&(delete o.g[e],o.h--))):o&&(o=PK(o))&&(e=o.g[e.toString()],o=-1,e&&(o=xne(e,i,d,_)),(i=-1<o?e[o]:null)&&Xae(i))}function Xae(o){if("number"!=typeof o&&o&&!o.ca){var e=o.src;if(e&&e[Z$])S4(e.i,o);else{var i=o.type,d=o.proxy;e.removeEventListener?e.removeEventListener(i,d,o.capture):e.detachEvent?e.detachEvent(Lne(i),d):e.addListener&&e.removeListener&&e.removeListener(d),(i=PK(e))?(S4(i,o),0==i.h&&(i.src=null,e[$ae]=null)):X$(o)}}}function Lne(o){return o in Zae?Zae[o]:Zae[o]="on"+o}function ece(o,e){if(o.ca)o=!0;else{e=new Q7(e,this);var i=o.listener,d=o.ia||o.src;o.fa&&Xae(o),o=i.call(d,e)}return o}function PK(o){return(o=o[$ae])instanceof eZ?o:null}var dR="__closure_events_fn_"+(1e9*Math.random()>>>0);function $1(o){return"function"==typeof o?o:(o[dR]||(o[dR]=function(e){return o.handleEvent(e)}),o[dR])}function rT(){QU.call(this),this.i=new eZ(this),this.P=this,this.I=null}function OR(o,e){var i,d=o.I;if(d)for(i=[];d;d=d.I)i.push(d);if(o=o.P,d=e.type||e,"string"==typeof e)e=new _N(e,o);else if(e instanceof _N)e.target=e.target||o;else{var _=e;Rfe(e=new _N(d,o),_)}if(_=!0,i)for(var B=i.length-1;0<=B;B--){var _t=e.g=i[B];_=xK(_t,d,!0,e)&&_}if(_=xK(_t=e.g=o,d,!0,e)&&_,_=xK(_t,d,!1,e)&&_,i)for(B=0;B<i.length;B++)_=xK(_t=e.g=i[B],d,!1,e)&&_}function xK(o,e,i,d){if(!(e=o.i.g[String(e)]))return!0;e=e.concat();for(var _=!0,B=0;B<e.length;++B){var _t=e[B];if(_t&&!_t.ca&&_t.capture==i){var ga=_t.listener,_h=_t.ia||_t.src;_t.fa&&S4(o.i,_t),_=!1!==ga.call(_h,d)&&_}}return _&&!d.defaultPrevented}mN(rT,QU),rT.prototype[Z$]=!0,rT.prototype.removeEventListener=function(o,e,i,d){Bfe(this,o,e,i,d)},rT.prototype.M=function(){if(rT.Z.M.call(this),this.i){var e,o=this.i;for(e in o.g){for(var i=o.g[e],d=0;d<i.length;d++)X$(i[d]);delete o.g[e],o.h--}}this.I=null},rT.prototype.N=function(o,e,i,d){return this.i.add(String(o),e,!1,i,d)},rT.prototype.O=function(o,e,i,d){return this.i.add(String(o),e,!0,i,d)};var tZ=g1.JSON.stringify;function lT(){var o=Vfe;let e=null;return o.g&&(e=o.g,o.g=o.g.next,o.g||(o.h=null),e.next=null),e}var DR,Ffe=new class{constructor(o,e){this.i=o,this.j=e,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new R_e,o=>o.reset());class R_e{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function jfe(o){g1.setTimeout(()=>{throw o},0)}function W1(o,e){DR||function tce(){var o=g1.Promise.resolve(void 0);DR=function(){o.then(rO)}}(),nce||(DR(),nce=!0),Vfe.add(o,e)}var nce=!1,Vfe=new class Ufe{constructor(){this.h=this.g=null}add(e,i){const d=Ffe.get();d.set(e,i),this.h?this.h.next=d:this.g=d,this.h=d}};function rO(){for(var o;o=lT();){try{o.h.call(o.g)}catch(i){jfe(i)}var e=Ffe;e.j(o),100>e.h&&(e.h++,o.next=e.g,e.g=o)}nce=!1}function pT(o,e){rT.call(this),this.h=o||1,this.g=e||g1,this.j=bO(this.kb,this),this.l=Date.now()}function Mne(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function bI(o,e,i){if("function"==typeof o)i&&(o=bO(o,i));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=bO(o.handleEvent,o)}return 2147483647<Number(e)?-1:g1.setTimeout(o,e||0)}function AI(o){o.g=bI(()=>{o.g=null,o.i&&(o.i=!1,AI(o))},o.j);const e=o.h;o.h=null,o.m.apply(null,e)}mN(pT,rT),(dI=pT.prototype).da=!1,dI.S=null,dI.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),OR(this,"tick"),this.da&&(Mne(this),this.start()))}},dI.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dI.M=function(){pT.Z.M.call(this),Mne(this),delete this.g};class H7 extends QU{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AI(this)}M(){super.M(),this.g&&(g1.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function UL(o){QU.call(this),this.h=o,this.g={}}mN(UL,QU);var q7=[];function LK(o,e,i,d){Array.isArray(i)||(i&&(q7[0]=i.toString()),i=q7);for(var _=0;_<i.length;_++){var B=Pfe(e,i[_],d||o.handleEvent,!1,o.h||o);if(!B)break;o.g[B.key]=B}}function J2(o){kK(o.g,function(e,i){this.g.hasOwnProperty(i)&&Xae(e)},o),o.g={}}function XS(){this.g=!0}function YT(o,e,i,d){o.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vN(o,e){if(!o.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(o=0;o<i.length;o++)if(Array.isArray(i[o])){var d=i[o];if(!(2>d.length)){var _=d[1];if(Array.isArray(_)&&!(1>_.length)){var B=_[0];if("noop"!=B&&"stop"!=B&&"close"!=B)for(var _t=1;_t<_.length;_t++)_[_t]=""}}}return tZ(i)}catch(ga){return e}}(o,i)+(d?" "+d:"")})}UL.prototype.M=function(){UL.Z.M.call(this),J2(this)},UL.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},XS.prototype.Aa=function(){this.g=!1},XS.prototype.info=function(){};var VT={},n1=null;function r1(){return n1=n1||new rT}function yN(o){_N.call(this,VT.Ma,o)}function D1(o){const e=r1();OR(e,new yN(e,o))}function ice(o,e){_N.call(this,VT.STAT_EVENT,o),this.stat=e}function kT(o){const e=r1();OR(e,new ice(e,o))}function oce(o,e){_N.call(this,VT.Na,o),this.size=e}function nZ(o,e){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return g1.setTimeout(function(){o()},e)}VT.Ma="serverreachability",mN(yN,_N),VT.STAT_EVENT="statevent",mN(ice,_N),VT.Na="timingevent",mN(oce,_N);var MK={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},sce={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bne(){}function Fne(){}Bne.prototype.h=null;var v1,BK={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ace(){_N.call(this,"d")}function jne(){_N.call(this,"c")}function PT(){}function SM(o,e,i,d){this.l=o,this.j=e,this.m=i,this.X=d||1,this.V=new UL(this),this.P=cce,this.W=new pT(o=J$?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gfe}function Gfe(){this.i=null,this.g="",this.h=!1}mN(ace,_N),mN(jne,_N),mN(PT,Bne),PT.prototype.g=function(){return new XMLHttpRequest},PT.prototype.i=function(){return{}},v1=new PT;var cce=45e3,rZ={},Vne={};function uce(o,e,i){o.K=1,o.v=sZ(R4(e)),o.s=i,o.U=!0,FL(o,null)}function FL(o,e){o.F=Date.now(),hR(o),o.A=R4(o.v);var i=o.A,d=o.X;Array.isArray(d)||(d=[String(d)]),Wfe(i.h,"t",d),o.C=0,i=o.l.H,o.h=new Gfe,o.g=Cce(o.l,i?e:null,!o.s),0<o.O&&(o.L=new H7(bO(o.Ia,o,o.g),o.O)),LK(o.V,o.g,"readystatechange",o.gb),e=o.H?qae(o.H):{},o.s?(o.u||(o.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,e)):(o.u="GET",o.g.ea(o.A,o.u,null,e)),D1(1),function OI(o,e,i,d,_,B){o.info(function(){if(o.g)if(B)for(var _t="",ga=B.split("&"),_h=0;_h<ga.length;_h++){var _g=ga[_h].split("=");if(1<_g.length){var l_=_g[0];_g=_g[1];var f_=l_.split("_");_t=2<=f_.length&&"type"==f_[1]?_t+(l_+"=")+_g+"&":_t+(l_+"=redacted&")}}else _t=null;else _t=B;return"XMLHTTP REQ ("+d+") [attempt "+_+"]: "+e+"\n"+i+"\n"+_t})}(o.j,o.u,o.A,o.m,o.X,o.s)}function W7(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function CT(o,e,i){let _,d=!0;for(;!o.I&&o.C<i.length;){if(_=Qfe(o,i),_==Vne){4==e&&(o.o=4,kT(14),d=!1),YT(o.j,o.m,null,"[Incomplete Response]");break}if(_==rZ){o.o=4,kT(15),YT(o.j,o.m,i,"[Invalid Chunk]"),d=!1;break}YT(o.j,o.m,_,null),JT(o,_)}W7(o)&&_!=Vne&&_!=rZ&&(o.h.g="",o.C=0),4!=e||0!=i.length||o.h.h||(o.o=1,kT(16),d=!1),o.i=o.i&&d,d?0<i.length&&!o.aa&&(o.aa=!0,(e=o.l).g==o&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),HU(e),e.L=!0,kT(11))):(YT(o.j,o.m,i,"[Invalid Chunked Response]"),gT(o),OM(o))}function Qfe(o,e){var i=o.C,d=e.indexOf("\n",i);return-1==d?Vne:(i=Number(e.substring(i,d)),isNaN(i)?rZ:(d+=1)+i>e.length?Vne:(e=e.substr(d,i),o.C=d+i,e))}function hR(o){o.Y=Date.now()+o.P,RM(o,o.P)}function RM(o,e){if(null!=o.B)throw Error("WatchDog timer not null");o.B=nZ(bO(o.eb,o),e)}function iO(o){o.B&&(g1.clearTimeout(o.B),o.B=null)}function OM(o){0==o.l.G||o.I||ape(o.l,o)}function gT(o){iO(o);var e=o.L;e&&"function"==typeof e.na&&e.na(),o.L=null,Mne(o.W),J2(o.V),o.g&&(e=o.g,o.g=null,e.abort(),e.na())}function JT(o,e){try{var i=o.l;if(0!=i.G&&(i.g==o||dce(i.i,o)))if(i.I=o.N,!o.J&&dce(i.i,o)&&3==i.G){try{var d=i.Ca.g.parse(e)}catch(_g){d=null}if(Array.isArray(d)&&3==d.length){var _=d;if(0==_[0])e:if(i.u)i.ta=_[1],0<i.ta-i.U&&37500>_[2]&&i.N&&0==i.A&&!i.v&&(i.v=nZ(bO(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<o.F))break e;hZ(i),Wne(i)}V8(i),kT(18)}if(1>=Jfe(i.i)&&i.ka){try{i.ka()}catch(_g){}i.ka=void 0}}else z7(i,11)}else if((o.J||i.g==o)&&hZ(i),!NK(e))for(_=i.Ca.g.parse(e),e=0;e<_.length;e++){let _g=_[e];if(i.U=_g[0],_g=_g[1],2==i.G)if("c"==_g[0]){i.J=_g[1],i.la=_g[2];const l_=_g[3];null!=l_&&(i.ma=l_,i.h.info("VER="+i.ma));const f_=_g[4];null!=f_&&(i.za=f_,i.h.info("SVER="+i.za));const R_=_g[5];null!=R_&&"number"==typeof R_&&0<R_&&(i.K=d=1.5*R_,i.h.info("backChannelRequestTimeoutMs_="+d)),d=i;const V_=o.g;if(V_){const Y_=V_.g?V_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y_){var B=d.i;!B.g&&(nO(Y_,"spdy")||nO(Y_,"quic")||nO(Y_,"h2"))&&(B.j=B.l,B.g=new Set,B.h&&(hce(B,B.h),B.h=null))}if(d.D){const R0=V_.g?V_.g.getResponseHeader("X-HTTP-Session-Id"):null;R0&&(d.sa=R0,QT(d.F,d.D,R0))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-o.F,i.h.info("Handshake RTT: "+i.O+"ms"));var _t=o;if((d=i).oa=bce(d,d.H?d.la:null,d.W),_t.J){$fe(d.i,_t);var ga=_t,_h=d.K;_h&&ga.setTimeout(_h),ga.B&&(iO(ga),hR(ga)),d.g=_t}else NM(d);0<i.l.length&&dZ(i)}else"stop"!=_g[0]&&"close"!=_g[0]||z7(i,7);else 3==i.G&&("stop"==_g[0]||"close"==_g[0]?"stop"==_g[0]?z7(i,7):qne(i):"noop"!=_g[0]&&i.j&&i.j.wa(_g),i.A=0)}D1(4)}catch(_g){}}function wI(o,e){if(o.forEach&&"function"==typeof o.forEach)o.forEach(e,void 0);else if(GO(o)||"string"==typeof o)Nne(o,e,void 0);else{if(o.T&&"function"==typeof o.T)var i=o.T();else if(o.R&&"function"==typeof o.R)i=void 0;else if(GO(o)||"string"==typeof o){i=[];for(var d=o.length,_=0;_<d;_++)i.push(_)}else for(_ in i=[],d=0,o)i[d++]=_;d=function GT(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(GO(o)){for(var e=[],i=o.length,d=0;d<i;d++)e.push(o[d]);return e}for(d in e=[],i=0,o)e[i++]=o[d];return e}(o),_=d.length;for(var B=0;B<_;B++)e.call(void 0,d[B],i&&i[B],o)}}function FS(o,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var d=0;d<i;d+=2)this.set(arguments[d],arguments[d+1])}else if(o)if(o instanceof FS)for(i=o.T(),d=0;d<i.length;d++)this.set(i[d],o.get(i[d]));else for(d in o)this.set(d,o[d])}function iZ(o){if(o.i!=o.g.length){for(var e=0,i=0;e<o.g.length;){var d=o.g[e];A6(o.h,d)&&(o.g[i++]=d),e++}o.g.length=i}if(o.i!=o.g.length){var _={};for(i=e=0;e<o.g.length;)A6(_,d=o.g[e])||(o.g[i++]=d,_[d]=1),e++;o.g.length=i}}function A6(o,e){return Object.prototype.hasOwnProperty.call(o,e)}(dI=SM.prototype).setTimeout=function(o){this.P=o},dI.gb=function(o){o=o.target;const e=this.L;e&&3==y6(o)?e.l():this.Ia(o)},dI.Ia=function(o){try{if(o==this.g)e:{const l_=y6(this.g);var e=this.g.Da();const f_=this.g.ba();if(!(3>l_)&&(3!=l_||J$||this.g&&(this.h.h||this.g.ga()||vce(this.g)))){this.I||4!=l_||7==e||D1(8==e||0>=f_?3:2),iO(this);var i=this.g.ba();this.N=i;t:if(W7(this)){var d=vce(this.g);o="";var _=d.length,B=4==y6(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){gT(this),OM(this);var _t="";break t}this.h.i=new g1.TextDecoder}for(e=0;e<_;e++)this.h.h=!0,o+=this.h.i.decode(d[e],{stream:B&&e==_-1});d.splice(0,_),this.h.g+=o,this.C=0,_t=this.h.g}else _t=this.g.ga();if(this.i=200==i,function rce(o,e,i,d,_,B,_t){o.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+_+"]: "+e+"\n"+i+"\n"+B+" "+_t})}(this.j,this.u,this.A,this.m,this.X,l_,i),this.i){if(this.$&&!this.J){t:{if(this.g){var ga,_h=this.g;if((ga=_h.g?_h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!NK(ga)){var _g=ga;break t}}_g=null}if(!(i=_g)){this.i=!1,this.o=3,kT(12),gT(this),OM(this);break e}YT(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,JT(this,i)}this.U?(CT(this,l_,_t),J$&&this.i&&3==l_&&(LK(this.V,this.W,"tick",this.fb),this.W.start())):(YT(this.j,this.m,_t,null),JT(this,_t)),4==l_&&gT(this),this.i&&!this.I&&(4==l_?ape(this.l,this):(this.i=!1,hR(this)))}else 400==i&&0<_t.indexOf("Unknown SID")?(this.o=3,kT(12)):(this.o=0,kT(13)),gT(this),OM(this)}}}catch(l_){}},dI.fb=function(){if(this.g){var o=y6(this.g),e=this.g.ga();this.C<e.length&&(iO(this),CT(this,o,e),this.i&&4!=o&&hR(this))}},dI.cancel=function(){this.I=!0,gT(this)},dI.eb=function(){this.B=null;const o=Date.now();0<=o-this.Y?(function u1(o,e){o.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(D1(3),kT(17)),gT(this),this.o=2,OM(this)):RM(this,this.Y-o)},(dI=FS.prototype).R=function(){iZ(this);for(var o=[],e=0;e<this.g.length;e++)o.push(this.h[this.g[e]]);return o},dI.T=function(){return iZ(this),this.g.concat()},dI.get=function(o,e){return A6(this.h,o)?this.h[o]:e},dI.set=function(o,e){A6(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=e},dI.forEach=function(o,e){for(var i=this.T(),d=0;d<i.length;d++){var _=i[d],B=this.get(_);o.call(e,B,_,this)}};var _6=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function a1(o,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof a1){this.g=void 0!==e?e:o.g,oZ(this,o.j),this.s=o.s,Gne(this,o.i),fS(this,o.m),this.l=o.l,e=o.h;var i=new NR;i.i=e.i,e.g&&(i.g=new FS(e.g),i.h=e.h),Qne(this,i),this.o=o.o}else o&&(i=String(o).match(_6))?(this.g=!!e,oZ(this,i[1]||"",!0),this.s=HO(i[2]||""),Gne(this,i[3]||"",!0),fS(this,i[4]),this.l=HO(i[5]||"",!0),Qne(this,i[6]||"",!0),this.o=HO(i[7]||"")):(this.g=!!e,this.h=new NR(null,this.g))}function R4(o){return new a1(o)}function oZ(o,e,i){o.j=i?HO(e,!0):e,o.j&&(o.j=o.j.replace(/:$/,""))}function Gne(o,e,i){o.i=i?HO(e,!0):e}function fS(o,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);o.m=e}else o.m=null}function Qne(o,e,i){e instanceof NR?(o.h=e,function Kfe(o,e){e&&!o.j&&(jS(o),o.i=null,o.g.forEach(function(i,d){var _=d.toLowerCase();d!=_&&(lce(this,d),Wfe(this,_,i))},o)),o.j=e}(o.h,o.g)):(i||(e=h1(e,ZP)),o.h=new NR(e,o.g))}function QT(o,e,i){o.h.set(e,i)}function sZ(o){return QT(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function HO(o,e){return o?e?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function h1(o,e,i){return"string"==typeof o?(o=encodeURI(o).replace(e,$2),i&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function $2(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}a1.prototype.toString=function(){var o=[],e=this.j;e&&o.push(h1(e,U8,!0),":");var i=this.i;return(i||"file"==e)&&(o.push("//"),(e=this.s)&&o.push(h1(e,U8,!0),"@"),o.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&o.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&o.push("/"),o.push(h1(i,"/"==i.charAt(0)?O_e:Hfe,!0))),(i=this.h.toString())&&o.push("?",i),(i=this.o)&&o.push("#",h1(i,XN)),o.join("")};var U8=/[#\/\?@]/g,Hfe=/[#\?:]/g,O_e=/[#\?]/g,ZP=/[#\?@]/g,XN=/#/g;function NR(o,e){this.h=this.g=null,this.i=o||null,this.j=!!e}function jS(o){o.g||(o.g=new FS,o.h=0,o.i&&function UK(o,e){if(o){o=o.split("&");for(var i=0;i<o.length;i++){var d=o[i].indexOf("="),_=null;if(0<=d){var B=o[i].substring(0,d);_=o[i].substring(d+1)}else B=o[i];e(B,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}(o.i,function(e,i){o.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function lce(o,e){jS(o),e=FK(o,e),A6(o.g.h,e)&&(o.i=null,o.h-=o.g.get(e).length,A6((o=o.g).h,e)&&(delete o.h[e],o.i--,o.g.length>2*o.i&&iZ(o)))}function qfe(o,e){return jS(o),e=FK(o,e),A6(o.g.h,e)}function Wfe(o,e,i){lce(o,e),0<i.length&&(o.i=null,o.g.set(FK(o,e),$P(i)),o.h+=i.length)}function FK(o,e){return e=String(e),o.j&&(e=e.toLowerCase()),e}function zfe(o){this.l=o||v6,o=g1.PerformanceNavigationTiming?0<(o=g1.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(g1.g&&g1.g.Ea&&g1.g.Ea()&&g1.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dI=NR.prototype).add=function(o,e){jS(this),this.i=null,o=FK(this,o);var i=this.g.get(o);return i||this.g.set(o,i=[]),i.push(e),this.h+=1,this},dI.forEach=function(o,e){jS(this),this.g.forEach(function(i,d){Nne(i,function(_){o.call(e,_,d,this)},this)},this)},dI.T=function(){jS(this);for(var o=this.g.R(),e=this.g.T(),i=[],d=0;d<e.length;d++)for(var _=o[d],B=0;B<_.length;B++)i.push(e[d]);return i},dI.R=function(o){jS(this);var e=[];if("string"==typeof o)qfe(this,o)&&(e=i1(e,this.g.get(FK(this,o))));else{o=this.g.R();for(var i=0;i<o.length;i++)e=i1(e,o[i])}return e},dI.set=function(o,e){return jS(this),this.i=null,qfe(this,o=FK(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[e]),this.h+=1,this},dI.get=function(o,e){return o&&0<(o=this.R(o)).length?String(o[0]):e},dI.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],e=this.g.T(),i=0;i<e.length;i++){var d=e[i],_=encodeURIComponent(String(d));d=this.R(d);for(var B=0;B<d.length;B++){var _t=_;""!==d[B]&&(_t+="="+encodeURIComponent(String(d[B]))),o.push(_t)}}return this.i=o.join("&")};var v6=10;function Yfe(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Jfe(o){return o.h?1:o.g?o.g.size:0}function dce(o,e){return o.h?o.h==e:!!o.g&&o.g.has(e)}function hce(o,e){o.g?o.g.add(e):o.h=e}function $fe(o,e){o.h&&o.h==e?o.h=null:o.g&&o.g.has(e)&&o.g.delete(e)}function fce(o){if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){let e=o.i;for(const i of o.g.values())e=e.concat(i.D);return e}return $P(o.i)}function pce(){}function N_e(){this.g=new pce}function k_e(o,e,i){const d=i||"";try{wI(o,function(_,B){let _t=_;F7(_)&&(_t=tZ(_)),e.push(d+B+"="+encodeURIComponent(_t))})}catch(_){throw e.push(d+"type="+encodeURIComponent("_badmap")),_}}function aZ(o,e,i,d,_){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,_(d)}catch(B){}}function cZ(o){this.l=o.$b||null,this.j=o.ib||!1}function Hne(o,e){rT.call(this),this.D=o,this.u=e,this.m=void 0,this.readyState=gce,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zfe.prototype.cancel=function(){if(this.i=fce(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}},pce.prototype.stringify=function(o){return g1.JSON.stringify(o,void 0)},pce.prototype.parse=function(o){return g1.JSON.parse(o,void 0)},mN(cZ,Bne),cZ.prototype.g=function(){return new Hne(this.l,this.j)},cZ.prototype.i=function(o){return function(){return o}}({}),mN(Hne,rT);var gce=0;function Zfe(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function jK(o){o.readyState=4,o.l=null,o.j=null,o.A=null,F8(o)}function F8(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(dI=Hne.prototype).open=function(o,e){if(this.readyState!=gce)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=e,this.readyState=1,F8(this)},dI.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(e.body=o),(this.D||g1).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},dI.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jK(this)),this.readyState=gce},dI.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,F8(this)),this.g&&(this.readyState=3,F8(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==g1.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zfe(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},dI.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var e=o.value?o.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!o.done}))&&(this.response=this.responseText+=e)}o.done?jK(this):F8(this),3==this.readyState&&Zfe(this)}},dI.Ua=function(o){this.g&&(this.response=this.responseText=o,jK(this))},dI.Ta=function(o){this.g&&(this.response=o,jK(this))},dI.ha=function(){this.g&&jK(this)},dI.setRequestHeader=function(o,e){this.v.append(o,e)},dI.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},dI.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],e=this.h.entries();for(var i=e.next();!i.done;)o.push((i=i.value)[0]+": "+i[1]),i=e.next();return o.join("\r\n")},Object.defineProperty(Hne.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var mce=g1.JSON.parse;function fR(o){rT.call(this),this.headers=new FS,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xfe,this.K=this.L=!1}mN(fR,rT);var Xfe="",epe=/^https?$/i,tpe=["POST","PUT"];function Ace(o){return"content-type"==o.toLowerCase()}function uZ(o,e){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=e,o.m=5,rpe(o),K7(o)}function rpe(o){o.D||(o.D=!0,OR(o,"complete"),OR(o,"error"))}function ipe(o){if(o.h&&void 0!==RK&&(!o.C[1]||4!=y6(o)||2!=o.ba()))if(o.v&&4==y6(o))bI(o.Fa,0,o);else if(OR(o,"readystatechange"),4==y6(o)){o.h=!1;try{const ga=o.ba();e:switch(ga){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var d;if(d=0===ga){var _=String(o.H).match(_6)[1]||null;if(!_&&g1.self&&g1.self.location){var B=g1.self.location.protocol;_=B.substr(0,B.length-1)}d=!epe.test(_?_.toLowerCase():"")}i=d}if(i)OR(o,"complete"),OR(o,"success");else{o.m=6;try{var _t=2<y6(o)?o.g.statusText:""}catch(_h){_t=""}o.j=_t+" ["+o.ba()+"]",rpe(o)}}finally{K7(o)}}}function K7(o,e){if(o.g){_ce(o);const i=o.g,d=o.C[0]?U7:null;o.g=null,o.C=null,e||OR(o,"ready");try{i.onreadystatechange=d}catch(_){}}}function _ce(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(g1.clearTimeout(o.A),o.A=null)}function y6(o){return o.g?o.g.readyState:0}function vce(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case Xfe:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yce(o,e,i){e:{for(d in i){var d=!1;break e}d=!0}d||(i=function x_e(o){let e="";return kK(o,function(i,d){e+=d,e+=":",e+=i,e+="\r\n"}),e}(i),"string"==typeof o?null!=i&&encodeURIComponent(String(i)):QT(o,e,i))}function lZ(o,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[o]||e}function ope(o){this.za=0,this.l=[],this.h=new XS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=lZ("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=lZ("baseRetryDelayMs",5e3,o),this.$a=lZ("retryDelaySeedMs",1e4,o),this.Ya=lZ("forwardChannelMaxRetries",2,o),this.ra=lZ("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new zfe(o&&o.concurrentRequestLimit),this.Ca=new N_e,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function qne(o){if(Ece(o),3==o.G){var e=o.V++,i=R4(o.F);QT(i,"SID",o.J),QT(i,"RID",e),QT(i,"TYPE","terminate"),VK(o,i),(e=new SM(o,o.h,e,void 0)).K=2,e.v=sZ(R4(i)),i=!1,g1.navigator&&g1.navigator.sendBeacon&&(i=g1.navigator.sendBeacon(e.v.toString(),"")),!i&&g1.Image&&((new Image).src=e.v,i=!0),i||(e.g=Cce(e.l,null),e.g.ea(e.v)),e.F=Date.now(),hR(e)}cpe(o)}function Wne(o){o.g&&(HU(o),o.g.cancel(),o.g=null)}function Ece(o){Wne(o),o.u&&(g1.clearTimeout(o.u),o.u=null),hZ(o),o.i.cancel(),o.m&&("number"==typeof o.m&&g1.clearTimeout(o.m),o.m=null)}function j8(o,e){o.l.push(new class{constructor(o,e){this.h=o,this.g=e}}(o.Za++,e)),3==o.G&&dZ(o)}function dZ(o){Yfe(o.i)||o.m||(o.m=!0,W1(o.Ha,o),o.C=0)}function spe(o,e){var i;i=e?e.m:o.V++;const d=R4(o.F);QT(d,"SID",o.J),QT(d,"RID",i),QT(d,"AID",o.U),VK(o,d),o.o&&o.s&&yce(d,o.o,o.s),i=new SM(o,o.h,i,o.C+1),null===o.o&&(i.H=o.s),e&&(o.l=e.D.concat(o.l)),e=DM(o,i,1e3),i.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),hce(o.i,i),uce(i,d,e)}function VK(o,e){o.j&&wI({},function(i,d){QT(e,d,i)})}function DM(o,e,i){i=Math.min(o.l.length,i);var d=o.j?bO(o.j.Oa,o.j,o):null;e:{var _=o.l;let B=-1;for(;;){const _t=["count="+i];-1==B?0<i?(B=_[0].h,_t.push("ofs="+B)):B=0:_t.push("ofs="+B);let ga=!0;for(let _h=0;_h<i;_h++){let _g=_[_h].h;const l_=_[_h].g;if(_g-=B,0>_g)B=Math.max(0,_[_h].h-100),ga=!1;else try{k_e(l_,_t,"req"+_g+"_")}catch(f_){d&&d(l_)}}if(ga){d=_t.join("&");break e}}}return o=o.l.splice(0,i),e.D=o,d}function NM(o){o.g||o.u||(o.Y=1,W1(o.Ga,o),o.A=0)}function V8(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=nZ(bO(o.Ga,o),fZ(o,o.A)),o.A++,0))}function HU(o){null!=o.B&&(g1.clearTimeout(o.B),o.B=null)}function G8(o){o.g=new SM(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var e=R4(o.oa);QT(e,"RID","rpc"),QT(e,"SID",o.J),QT(e,"CI",o.N?"0":"1"),QT(e,"AID",o.U),VK(o,e),QT(e,"TYPE","xmlhttp"),o.o&&o.s&&yce(e,o.o,o.s),o.K&&o.g.setTimeout(o.K);var i=o.g;o=o.la,i.K=1,i.v=sZ(R4(e)),i.s=null,i.U=!0,FL(i,o)}function hZ(o){null!=o.v&&(g1.clearTimeout(o.v),o.v=null)}function ape(o,e){var i=null;if(o.g==e){hZ(o),HU(o),o.g=null;var d=2}else{if(!dce(o.i,e))return;i=e.D,$fe(o.i,e),d=1}if(o.I=e.N,0!=o.G)if(e.i)if(1==d){i=e.s?e.s.length:0,e=Date.now()-e.F;var _=o.C;OR(d=r1(),new oce(d,i,e,_)),dZ(o)}else NM(o);else if(3==(_=e.o)||0==_&&0<o.I||!(1==d&&function Ice(o,e){return!(Jfe(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=e.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=nZ(bO(o.Ha,o,e),fZ(o,o.C)),o.C++,0)))}(o,e)||2==d&&V8(o)))switch(i&&0<i.length&&(e=o.i,e.i=e.i.concat(i)),_){case 1:z7(o,5);break;case 4:z7(o,10);break;case 3:z7(o,6);break;default:z7(o,2)}}function fZ(o,e){let i=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(i*=2),i*e}function z7(o,e){if(o.h.info("Error code "+e),2==e){var i=null;o.j&&(i=null);var d=bO(o.jb,o);i||(i=new a1("//www.google.com/images/cleardot.gif"),g1.location&&"http"==g1.location.protocol||oZ(i,"https"),sZ(i)),function P_e(o,e){const i=new XS;if(g1.Image){const d=new Image;d.onload=j7(aZ,i,d,"TestLoadImage: loaded",!0,e),d.onerror=j7(aZ,i,d,"TestLoadImage: error",!1,e),d.onabort=j7(aZ,i,d,"TestLoadImage: abort",!1,e),d.ontimeout=j7(aZ,i,d,"TestLoadImage: timeout",!1,e),g1.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=o}else e(!1)}(i.toString(),d)}else kT(2);o.G=0,o.j&&o.j.va(e),cpe(o),Ece(o)}function cpe(o){o.G=0,o.I=-1,o.j&&((0!=fce(o.i).length||0!=o.l.length)&&(o.i.i.length=0,$P(o.l),o.l.length=0),o.j.ua())}function bce(o,e,i){let d=function o1(o){return o instanceof a1?R4(o):new a1(o,void 0)}(i);if(""!=d.i)e&&Gne(d,e+"."+d.i),fS(d,d.m);else{const _=g1.location;d=function eI(o,e,i,d){var _=new a1(null,void 0);return o&&oZ(_,o),e&&Gne(_,e),i&&fS(_,i),d&&(_.l=d),_}(_.protocol,e?e+"."+_.hostname:_.hostname,+_.port,i)}return o.aa&&kK(o.aa,function(_,B){QT(d,B,_)}),i=o.sa,(e=o.D)&&i&&QT(d,e,i),QT(d,"VER",o.ma),VK(o,d),d}function Cce(o,e,i){if(e&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fR(i&&o.Ba&&!o.qa?new cZ({ib:!0}):o.qa)).L=o.H,e}function wce(){}function pZ(){if(G7&&!(10<=Number(C_e)))throw Error("Environmental error: no available transport.")}function XP(o,e){rT.call(this),this.g=new ope(e),this.l=o,this.h=e&&e.messageUrlParams||null,o=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(o?o["X-WebChannel-Content-Type"]=e.messageContentType:o={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(o?o["X-WebChannel-Client-Profile"]=e.ya:o={"X-WebChannel-Client-Profile":e.ya}),this.g.P=o,(o=e&&e.httpHeadersOverwriteParam)&&!NK(o)&&(this.g.o=o),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!NK(e)&&(this.g.D=e,null!==(o=this.h)&&e in o&&e in(o=this.h)&&delete o[e]),this.j=new GK(this)}function Tce(o){ace.call(this);var e=o.__sm__;if(e){e:{for(const i in e){o=i;break e}o=void 0}(this.i=o)&&(o=this.i,e=null!==e&&o in e?e[o]:void 0),this.data=e}else this.data=o}function upe(){jne.call(this),this.status=1}function GK(o){this.g=o}(dI=fR.prototype).ea=function(o,e,i,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);e=e?e.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():v1.g(),this.C=function Une(o){return o.h||(o.h=o.i())}(this.u?this.u:v1),this.g.onreadystatechange=bO(this.Fa,this);try{this.F=!0,this.g.open(e,String(o),!0),this.F=!1}catch(B){return void uZ(this,B)}o=i||"";const _=new FS(this.headers);d&&wI(d,function(B,_t){_.set(_t,B)}),d=function DK(o){e:{var e=Ace;const i=o.length,d="string"==typeof o?o.split(""):o;for(let _=0;_<i;_++)if(_ in d&&e.call(void 0,d[_],_,o)){e=_;break e}e=-1}return 0>e?null:"string"==typeof o?o.charAt(e):o[e]}(_.T()),i=g1.FormData&&o instanceof g1.FormData,!(0<=AN(tpe,e))||d||i||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(B,_t){this.g.setRequestHeader(_t,B)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_ce(this),0<this.B&&((this.K=function npe(o){return G7&&function b_e(){return function y_e(o){var e=I_e;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=o(9)}(function(){let o=0;const e=Cfe(String($$)).split("."),i=Cfe("9").split("."),d=Math.max(e.length,i.length);for(let _t=0;0==o&&_t<d;_t++){var _=e[_t]||"",B=i[_t]||"";do{if(_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],B=/(\d*)(\D*)(.*)/.exec(B)||["","","",""],0==_[0].length&&0==B[0].length)break;o=V7(0==_[1].length?0:parseInt(_[1],10),0==B[1].length?0:parseInt(B[1],10))||V7(0==_[2].length,0==B[2].length)||V7(_[2],B[2]),_=_[3],B=B[3]}while(0==o)}return 0<=o})}()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bO(this.pa,this)):this.A=bI(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(B){uZ(this,B)}},dI.pa=function(){void 0!==RK&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,OR(this,"timeout"),this.abort(8))},dI.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,OR(this,"complete"),OR(this,"abort"),K7(this))},dI.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),K7(this,!0)),fR.Z.M.call(this)},dI.Fa=function(){this.s||(this.F||this.v||this.l?ipe(this):this.cb())},dI.cb=function(){ipe(this)},dI.ba=function(){try{return 2<y6(this)?this.g.status:-1}catch(o){return-1}},dI.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},dI.Qa=function(o){if(this.g){var e=this.g.responseText;return o&&0==e.indexOf(o)&&(e=e.substring(o.length)),mce(e)}},dI.Da=function(){return this.m},dI.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(dI=ope.prototype).ma=8,dI.G=1,dI.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(e){}},dI.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;const _=new SM(this,this.h,o,void 0);let B=this.s;if(this.P&&(B?(B=qae(B),Rfe(B,this.P)):B=this.P),null===this.o&&(_.H=B),this.ja)e:{for(var e=0,i=0;i<this.l.length;i++){var d=this.l[i];if(void 0===(d="__data__"in d.g&&"string"==typeof(d=d.g.__data__)?d.length:void 0))break;if(4096<(e+=d)){e=i;break e}if(4096===e||i===this.l.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=DM(this,_,e),QT(i=R4(this.F),"RID",o),QT(i,"CVER",22),this.D&&QT(i,"X-HTTP-Session-Id",this.D),VK(this,i),this.o&&B&&yce(i,this.o,B),hce(this.i,_),this.Ra&&QT(i,"TYPE","init"),this.ja?(QT(i,"$req",e),QT(i,"SID","null"),_.$=!0,uce(_,i,null)):uce(_,i,e),this.G=2}}else 3==this.G&&(o?spe(this,o):0==this.l.length||Yfe(this.i)||spe(this))},dI.Ga=function(){if(this.u=null,G8(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=nZ(bO(this.bb,this),o)}},dI.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,kT(10),Wne(this),G8(this))},dI.ab=function(){null!=this.v&&(this.v=null,Wne(this),V8(this),kT(19))},dI.jb=function(o){o?(this.h.info("Successfully pinged google.com"),kT(2)):(this.h.info("Failed to ping google.com"),kT(1))},(dI=wce.prototype).xa=function(){},dI.wa=function(){},dI.va=function(){},dI.ua=function(){},dI.Oa=function(){},pZ.prototype.g=function(o,e){return new XP(o,e)},mN(XP,rT),XP.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,e=this.l,i=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),W1(bO(o.hb,o,e))),kT(0),o.W=e,o.aa=i||{},o.N=o.X,o.F=bce(o,null,o.W),dZ(o)},XP.prototype.close=function(){qne(this.g)},XP.prototype.u=function(o){if("string"==typeof o){var e={};e.__data__=o,j8(this.g,e)}else this.v?((e={}).__data__=tZ(o),j8(this.g,e)):j8(this.g,o)},XP.prototype.M=function(){this.g.j=null,delete this.j,qne(this.g),delete this.g,XP.Z.M.call(this)},mN(Tce,ace),mN(upe,jne),mN(GK,wce),GK.prototype.xa=function(){OR(this.g,"a")},GK.prototype.wa=function(o){OR(this.g,new Tce(o))},GK.prototype.va=function(o){OR(this.g,new upe(o))},GK.prototype.ua=function(){OR(this.g,"b")},pZ.prototype.createWebChannel=pZ.prototype.g,XP.prototype.send=XP.prototype.u,XP.prototype.open=XP.prototype.m,XP.prototype.close=XP.prototype.close,MK.NO_ERROR=0,MK.TIMEOUT=8,MK.HTTP_ERROR=6,sce.COMPLETE="complete",Fne.EventType=BK,BK.OPEN="a",BK.CLOSE="b",BK.ERROR="c",BK.MESSAGE="d",rT.prototype.listen=rT.prototype.N,fR.prototype.listenOnce=fR.prototype.O,fR.prototype.getLastError=fR.prototype.La,fR.prototype.getLastErrorCode=fR.prototype.Da,fR.prototype.getStatus=fR.prototype.ba,fR.prototype.getResponseJson=fR.prototype.Qa,fR.prototype.getResponseText=fR.prototype.ga,fR.prototype.send=fR.prototype.ea;var Kne=pI.createWebChannelTransport=function(){return new pZ},Q8=pI.getStatEventTarget=function(){return r1()},O4=pI.ErrorCode=MK,lpe=pI.EventType=sce,Sce=pI.Event=VT,Rce=pI.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dpe=pI.FetchXmlHttpFactory=cZ,Y7=pI.WebChannel=Fne,hpe=pI.XhrIo=fR;const gZ="@firebase/firestore";class EN{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}EN.UNAUTHENTICATED=new EN(null),EN.GOOGLE_CREDENTIALS=new EN("google-credentials-uid"),EN.FIRST_PARTY=new EN("first-party-uid"),EN.MOCK_USER=new EN("mock-user");let H8="9.8.0";const q8=new SL.Yd("@firebase/firestore");function zne(){return q8.logLevel}function rI(o,...e){if(q8.logLevel<=SL.in.DEBUG){const i=e.map(mZ);q8.debug(`Firestore (${H8}): ${o}`,...i)}}function oO(o,...e){if(q8.logLevel<=SL.in.ERROR){const i=e.map(mZ);q8.error(`Firestore (${H8}): ${o}`,...i)}}function J7(o,...e){if(q8.logLevel<=SL.in.WARN){const i=e.map(mZ);q8.warn(`Firestore (${H8}): ${o}`,...i)}}function mZ(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(i){return o}}function kI(o="Unexpected state"){const e=`FIRESTORE (${H8}) INTERNAL ASSERTION FAILED: `+o;throw oO(e),new Error(e)}function f1(o,e){o||kI()}function EI(o,e){return o}const C0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q0 extends M_.ZR{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kR{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}class qU{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M_e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(EN.UNAUTHENTICATED))}shutdown(){}}class Oce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=EN.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){var d=this;let _=this.i;const B=_g=>this.i!==_?(_=this.i,i(_g)):Promise.resolve();let _t=new kR;this.o=()=>{this.i++,this.currentUser=this.u(),_t.resolve(),_t=new kR,e.enqueueRetryable(()=>B(this.currentUser))};const ga=()=>{const _g=_t;e.enqueueRetryable((0,b0.Z)(function*(){yield _g.promise,yield B(d.currentUser)}))},_h=_g=>{rI("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_g,this.auth.addAuthTokenListener(this.o),ga()};this.t.onInit(_g=>_h(_g)),setTimeout(()=>{if(!this.auth){const _g=this.t.getImmediate({optional:!0});_g?_h(_g):(rI("FirebaseAuthCredentialsProvider","Auth not yet detected"),_t.resolve(),_t=new kR)}},0),ga()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(d=>this.i!==e?(rI("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):d?(f1("string"==typeof d.accessToken),new qU(d.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return f1(null===e||"string"==typeof e),new EN(e)}}class ppe{constructor(e,i,d){this.type="FirstParty",this.user=EN.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",i);const _=e.auth.getAuthHeaderValueForFirstParty([]);_&&this.headers.set("Authorization",_),d&&this.headers.set("X-Goog-Iam-Authorization-Token",d)}}class Dce{constructor(e,i,d){this.h=e,this.l=i,this.m=d}getToken(){return Promise.resolve(new ppe(this.h,this.l,this.m))}start(e,i){e.enqueueRetryable(()=>i(EN.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nce{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,i){const d=B=>{null!=B.error&&rI("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${B.error.message}`);const _t=B.token!==this.p;return this.p=B.token,rI("FirebaseAppCheckTokenProvider",`Received ${_t?"new":"existing"} token.`),_t?i(B.token):Promise.resolve()};this.o=B=>{e.enqueueRetryable(()=>d(B))};const _=B=>{rI("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=B,this.appCheck.addTokenListener(this.o)};this.g.onInit(B=>_(B)),setTimeout(()=>{if(!this.appCheck){const B=this.g.getImmediate({optional:!0});B?_(B):rI("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(f1("string"==typeof i.token),this.p=i.token,new W8(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class X2{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=d=>this.I(d),this.T=d=>i.writeSequenceNumber(d))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function kce(o){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(o);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let d=0;d<o;d++)i[d]=Math.floor(256*Math.random());return i}X2.A=-1;class gpe{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let d="";for(;d.length<20;){const _=kce(40);for(let B=0;B<_.length;++B)d.length<20&&_[B]<i&&(d+=e.charAt(_[B]%e.length))}return d}}function N1(o,e){return o<e?-1:o>e?1:0}function K8(o,e,i){return o.length===e.length&&o.every((d,_)=>i(d,e[_]))}function $7(o){return o+"\0"}class PR{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new Q0(C0.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Q0(C0.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new Q0(C0.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q0(C0.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return PR.fromMillis(Date.now())}static fromDate(e){return PR.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),d=Math.floor(1e6*(e-1e3*i));return new PR(i,d)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?N1(this.nanoseconds,e.nanoseconds):N1(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class s1{constructor(e){this.timestamp=e}static fromTimestamp(e){return new s1(e)}static min(){return new s1(new PR(0,0))}static max(){return new s1(new PR(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function AZ(o){let e=0;for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&e++;return e}function E6(o,e){for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&e(i,o[i])}function Pce(o){for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e))return!1;return!0}class QK{constructor(e,i,d){void 0===i?i=0:i>e.length&&kI(),void 0===d?d=e.length-i:d>e.length-i&&kI(),this.segments=e,this.offset=i,this.len=d}get length(){return this.len}isEqual(e){return 0===QK.comparator(this,e)}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof QK?e.forEach(d=>{i.push(d)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,d=this.limit();i<d;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const d=Math.min(e.length,i.length);for(let _=0;_<d;_++){const B=e.get(_),_t=i.get(_);if(B<_t)return-1;if(B>_t)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class T1 extends QK{construct(e,i,d){return new T1(e,i,d)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const d of e){if(d.indexOf("//")>=0)throw new Q0(C0.INVALID_ARGUMENT,`Invalid segment (${d}). Paths must not contain // in them.`);i.push(...d.split("/").filter(_=>_.length>0))}return new T1(i)}static emptyPath(){return new T1([])}}const WU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class CO extends QK{construct(e,i,d){return new CO(e,i,d)}static isValidIdentifier(e){return WU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),CO.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new CO(["__name__"])}static fromServerFormat(e){const i=[];let d="",_=0;const B=()=>{if(0===d.length)throw new Q0(C0.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(d),d=""};let _t=!1;for(;_<e.length;){const ga=e[_];if("\\"===ga){if(_+1===e.length)throw new Q0(C0.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _h=e[_+1];if("\\"!==_h&&"."!==_h&&"`"!==_h)throw new Q0(C0.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);d+=_h,_+=2}else"`"===ga?(_t=!_t,_++):"."!==ga||_t?(d+=ga,_++):(B(),_++)}if(B(),_t)throw new Q0(C0.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new CO(i)}static emptyPath(){return new CO([])}}class z8{constructor(e){this.fields=e,e.sort(CO.comparator)}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return K8(this.fields,e.fields,(i,d)=>i.isEqual(d))}}class xR{constructor(e){this.binaryString=e}static fromBase64String(e){const i=atob(e);return new xR(i)}static fromUint8Array(e){const i=function(d){let _="";for(let B=0;B<d.length;++B)_+=String.fromCharCode(d[B]);return _}(e);return new xR(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let d=0;d<e.length;d++)i[d]=e.charCodeAt(d);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return N1(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xR.EMPTY_BYTE_STRING=new xR("");const xce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function e2(o){if(f1(!!o),"string"==typeof o){let e=0;const i=xce.exec(o);if(f1(!!i),i[1]){let _=i[1];_=(_+"000000000").substr(0,9),e=Number(_)}const d=new Date(o);return{seconds:Math.floor(d.getTime()/1e3),nanos:e}}return{seconds:eR(o.seconds),nanos:eR(o.nanos)}}function eR(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function _k(o){return"string"==typeof o?xR.fromBase64String(o):xR.fromUint8Array(o)}function _Z(o){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==o?void 0:o.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Lce(o){const e=o.mapValue.fields.__previous_value__;return _Z(e)?Lce(e):e}function KU(o){const e=e2(o.mapValue.fields.__local_write_time__.timestampValue);return new PR(e.seconds,e.nanos)}class Ape{constructor(e,i,d,_,B,_t,ga,_h){this.databaseId=e,this.appId=i,this.persistenceKey=d,this.host=_,this.ssl=B,this.forceLongPolling=_t,this.autoDetectLongPolling=ga,this.useFetchStreams=_h}}class zU{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new zU("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zU&&e.projectId===this.projectId&&e.database===this.database}}function vZ(o){return null==o}function yZ(o){return 0===o&&1/o==-1/0}function _pe(o){return"number"==typeof o&&Number.isInteger(o)&&!yZ(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}class uI{constructor(e){this.path=e}static fromPath(e){return new uI(T1.fromString(e))}static fromName(e){return new uI(T1.fromString(e).popFirst(5))}static empty(){return new uI(T1.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===T1.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return T1.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new uI(new T1(e.slice()))}}const Y8={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yne={nullValue:"NULL_VALUE"};function Z7(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?_Z(o)?4:Ipe(o)?9007199254740991:10:kI()}function D4(o,e){if(o===e)return!0;const i=Z7(o);if(i!==Z7(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===e.booleanValue;case 4:return KU(o).isEqual(KU(e));case 3:return function(d,_){if("string"==typeof d.timestampValue&&"string"==typeof _.timestampValue&&d.timestampValue.length===_.timestampValue.length)return d.timestampValue===_.timestampValue;const B=e2(d.timestampValue),_t=e2(_.timestampValue);return B.seconds===_t.seconds&&B.nanos===_t.nanos}(o,e);case 5:return o.stringValue===e.stringValue;case 6:return _=e,_k(o.bytesValue).isEqual(_k(_.bytesValue));case 7:return o.referenceValue===e.referenceValue;case 8:return function(d,_){return eR(d.geoPointValue.latitude)===eR(_.geoPointValue.latitude)&&eR(d.geoPointValue.longitude)===eR(_.geoPointValue.longitude)}(o,e);case 2:return function(d,_){if("integerValue"in d&&"integerValue"in _)return eR(d.integerValue)===eR(_.integerValue);if("doubleValue"in d&&"doubleValue"in _){const B=eR(d.doubleValue),_t=eR(_.doubleValue);return B===_t?yZ(B)===yZ(_t):isNaN(B)&&isNaN(_t)}return!1}(o,e);case 9:return K8(o.arrayValue.values||[],e.arrayValue.values||[],D4);case 10:return function(d,_){const B=d.mapValue.fields||{},_t=_.mapValue.fields||{};if(AZ(B)!==AZ(_t))return!1;for(const ga in B)if(B.hasOwnProperty(ga)&&(void 0===_t[ga]||!D4(B[ga],_t[ga])))return!1;return!0}(o,e);default:return kI()}var _}function EZ(o,e){return void 0!==(o.values||[]).find(i=>D4(i,e))}function J8(o,e){if(o===e)return 0;const i=Z7(o),d=Z7(e);if(i!==d)return N1(i,d);switch(i){case 0:case 9007199254740991:return 0;case 1:return N1(o.booleanValue,e.booleanValue);case 2:return function(_,B){const _t=eR(_.integerValue||_.doubleValue),ga=eR(B.integerValue||B.doubleValue);return _t<ga?-1:_t>ga?1:_t===ga?0:isNaN(_t)?isNaN(ga)?0:-1:1}(o,e);case 3:return vpe(o.timestampValue,e.timestampValue);case 4:return vpe(KU(o),KU(e));case 5:return N1(o.stringValue,e.stringValue);case 6:return function(_,B){const _t=_k(_),ga=_k(B);return _t.compareTo(ga)}(o.bytesValue,e.bytesValue);case 7:return function(_,B){const _t=_.split("/"),ga=B.split("/");for(let _h=0;_h<_t.length&&_h<ga.length;_h++){const _g=N1(_t[_h],ga[_h]);if(0!==_g)return _g}return N1(_t.length,ga.length)}(o.referenceValue,e.referenceValue);case 8:return function(_,B){const _t=N1(eR(_.latitude),eR(B.latitude));return 0!==_t?_t:N1(eR(_.longitude),eR(B.longitude))}(o.geoPointValue,e.geoPointValue);case 9:return function(_,B){const _t=_.values||[],ga=B.values||[];for(let _h=0;_h<_t.length&&_h<ga.length;++_h){const _g=J8(_t[_h],ga[_h]);if(_g)return _g}return N1(_t.length,ga.length)}(o.arrayValue,e.arrayValue);case 10:return function(_,B){if(_===Y8.mapValue&&B===Y8.mapValue)return 0;if(_===Y8.mapValue)return 1;if(B===Y8.mapValue)return-1;const _t=_.fields||{},ga=Object.keys(_t),_h=B.fields||{},_g=Object.keys(_h);ga.sort(),_g.sort();for(let l_=0;l_<ga.length&&l_<_g.length;++l_){const f_=N1(ga[l_],_g[l_]);if(0!==f_)return f_;const R_=J8(_t[ga[l_]],_h[_g[l_]]);if(0!==R_)return R_}return N1(ga.length,_g.length)}(o.mapValue,e.mapValue);default:throw kI()}}function vpe(o,e){if("string"==typeof o&&"string"==typeof e&&o.length===e.length)return N1(o,e);const i=e2(o),d=e2(e),_=N1(i.seconds,d.seconds);return 0!==_?_:N1(i.nanos,d.nanos)}function HK(o){return Jne(o)}function Jne(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(d){const _=e2(d);return`time(${_.seconds},${_.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?_k(o.bytesValue).toBase64():"referenceValue"in o?uI.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(e=o.geoPointValue).latitude},${e.longitude})`:"arrayValue"in o?function(d){let _="[",B=!0;for(const _t of d.values||[])B?B=!1:_+=",",_+=Jne(_t);return _+"]"}(o.arrayValue):"mapValue"in o?function(d){const _=Object.keys(d.fields||{}).sort();let B="{",_t=!0;for(const ga of _)_t?_t=!1:B+=",",B+=`${ga}:${Jne(d.fields[ga])}`;return B+"}"}(o.mapValue):kI();var e}function X7(o,e){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${e.path.canonicalString()}`}}function Mce(o){return!!o&&"integerValue"in o}function IZ(o){return!!o&&"arrayValue"in o}function ype(o){return!!o&&"nullValue"in o}function Epe(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function $ne(o){return!!o&&"mapValue"in o}function bZ(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const e={mapValue:{fields:{}}};return E6(o.mapValue.fields,(i,d)=>e.mapValue.fields[i]=bZ(d)),e}if(o.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(o.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=bZ(o.arrayValue.values[i]);return e}return Object.assign({},o)}function Ipe(o){return"__max__"===(((o.mapValue||{}).fields||{}).__type__||{}).stringValue}function B_e(o){return"nullValue"in o?Yne:"booleanValue"in o?{booleanValue:!1}:"integerValue"in o||"doubleValue"in o?{doubleValue:NaN}:"timestampValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in o?{stringValue:""}:"bytesValue"in o?{bytesValue:""}:"referenceValue"in o?X7(zU.empty(),uI.empty()):"geoPointValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in o?{arrayValue:{}}:"mapValue"in o?{mapValue:{}}:kI()}function U_e(o){return"nullValue"in o?{booleanValue:!1}:"booleanValue"in o?{doubleValue:NaN}:"integerValue"in o||"doubleValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in o?{stringValue:""}:"stringValue"in o?{bytesValue:""}:"bytesValue"in o?X7(zU.empty(),uI.empty()):"referenceValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in o?{arrayValue:{}}:"arrayValue"in o?{mapValue:{}}:"mapValue"in o?Y8:kI()}function bpe(o,e){const i=J8(o.value,e.value);return 0!==i?i:o.inclusive&&!e.inclusive?-1:!o.inclusive&&e.inclusive?1:0}function Bce(o,e){const i=J8(o.value,e.value);return 0!==i?i:o.inclusive&&!e.inclusive?1:!o.inclusive&&e.inclusive?-1:0}class t2{constructor(e){this.value=e}static empty(){return new t2({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let d=0;d<e.length-1;++d)if(i=(i.mapValue.fields||{})[e.get(d)],!$ne(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=bZ(i)}setAll(e){let i=CO.emptyPath(),d={},_=[];e.forEach((_t,ga)=>{if(!i.isImmediateParentOf(ga)){const _h=this.getFieldsMap(i);this.applyChanges(_h,d,_),d={},_=[],i=ga.popLast()}_t?d[ga.lastSegment()]=bZ(_t):_.push(ga.lastSegment())});const B=this.getFieldsMap(i);this.applyChanges(B,d,_)}delete(e){const i=this.field(e.popLast());$ne(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return D4(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let d=0;d<e.length;++d){let _=i.mapValue.fields[e.get(d)];$ne(_)&&_.mapValue.fields||(_={mapValue:{fields:{}}},i.mapValue.fields[e.get(d)]=_),i=_}return i.mapValue.fields}applyChanges(e,i,d){E6(i,(_,B)=>e[_]=B);for(const _ of d)delete e[_]}clone(){return new t2(bZ(this.value))}}function Cpe(o){const e=[];return E6(o.fields,(i,d)=>{const _=new CO([i]);if($ne(d)){const B=Cpe(d.mapValue).fields;if(0===B.length)e.push(_);else for(const _t of B)e.push(_.child(_t))}else e.push(_)}),new z8(e)}class ES{constructor(e,i,d,_,B,_t){this.key=e,this.documentType=i,this.version=d,this.readTime=_,this.data=B,this.documentState=_t}static newInvalidDocument(e){return new ES(e,0,s1.min(),s1.min(),t2.empty(),0)}static newFoundDocument(e,i,d){return new ES(e,1,i,s1.min(),d,0)}static newNoDocument(e,i){return new ES(e,2,i,s1.min(),t2.empty(),0)}static newUnknownDocument(e,i){return new ES(e,3,i,s1.min(),t2.empty(),2)}convertToFoundDocument(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=t2.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=t2.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ES&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ES(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CZ{constructor(e,i,d,_){this.indexId=e,this.collectionGroup=i,this.fields=d,this.indexState=_}}function Uce(o){return o.fields.find(e=>2===e.kind)}function e9(o){return o.fields.filter(e=>2!==e.kind)}CZ.UNKNOWN_ID=-1;class Zne{constructor(e,i){this.fieldPath=e,this.kind=i}}class wZ{constructor(e,i){this.sequenceNumber=e,this.offset=i}static empty(){return new wZ(0,kM.min())}}function wpe(o,e){const i=o.toTimestamp().seconds,d=o.toTimestamp().nanoseconds+1,_=s1.fromTimestamp(1e9===d?new PR(i+1,0):new PR(i,d));return new kM(_,uI.empty(),e)}function F_e(o){return new kM(o.readTime,o.key,-1)}class kM{constructor(e,i,d){this.readTime=e,this.documentKey=i,this.largestBatchId=d}static min(){return new kM(s1.min(),uI.empty(),-1)}static max(){return new kM(s1.max(),uI.empty(),-1)}}function I6(o,e){let i=o.readTime.compareTo(e.readTime);return 0!==i?i:(i=uI.comparator(o.documentKey,e.documentKey),0!==i?i:N1(o.largestBatchId,e.largestBatchId))}class LR{constructor(e,i){this.comparator=e,this.root=i||qO.EMPTY}insert(e,i){return new LR(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,qO.BLACK,null,null))}remove(e){return new LR(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qO.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const d=this.comparator(e,i.key);if(0===d)return i.value;d<0?i=i.left:d>0&&(i=i.right)}return null}indexOf(e){let i=0,d=this.root;for(;!d.isEmpty();){const _=this.comparator(e,d.key);if(0===_)return i+d.left.size;_<0?d=d.left:(i+=d.left.size+1,d=d.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,d)=>(e(i,d),!1))}toString(){const e=[];return this.inorderTraversal((i,d)=>(e.push(`${i}:${d}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new TZ(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new TZ(this.root,e,this.comparator,!1)}getReverseIterator(){return new TZ(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new TZ(this.root,e,this.comparator,!0)}}class TZ{constructor(e,i,d,_){this.isReverse=_,this.nodeStack=[];let B=1;for(;!e.isEmpty();)if(B=i?d(e.key,i):1,i&&_&&(B*=-1),B<0)e=this.isReverse?e.left:e.right;else{if(0===B){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qO{constructor(e,i,d,_,B){this.key=e,this.value=i,this.color=null!=d?d:qO.RED,this.left=null!=_?_:qO.EMPTY,this.right=null!=B?B:qO.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,d,_,B){return new qO(null!=e?e:this.key,null!=i?i:this.value,null!=d?d:this.color,null!=_?_:this.left,null!=B?B:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,d){let _=this;const B=d(e,_.key);return _=B<0?_.copy(null,null,null,_.left.insert(e,i,d),null):0===B?_.copy(null,i,null,null,null):_.copy(null,null,null,null,_.right.insert(e,i,d)),_.fixUp()}removeMin(){if(this.left.isEmpty())return qO.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let d,_=this;if(i(e,_.key)<0)_.left.isEmpty()||_.left.isRed()||_.left.left.isRed()||(_=_.moveRedLeft()),_=_.copy(null,null,null,_.left.remove(e,i),null);else{if(_.left.isRed()&&(_=_.rotateRight()),_.right.isEmpty()||_.right.isRed()||_.right.left.isRed()||(_=_.moveRedRight()),0===i(e,_.key)){if(_.right.isEmpty())return qO.EMPTY;d=_.right.min(),_=_.copy(d.key,d.value,null,null,_.right.removeMin())}_=_.copy(null,null,null,null,_.right.remove(e,i))}return _.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qO.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qO.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kI();const e=this.left.check();if(e!==this.right.check())throw kI();return e+(this.isRed()?0:1)}}qO.EMPTY=null,qO.RED=!0,qO.BLACK=!1,qO.EMPTY=new class{constructor(){this.size=0}get key(){throw kI()}get value(){throw kI()}get color(){throw kI()}get left(){throw kI()}get right(){throw kI()}copy(o,e,i,d,_){return this}insert(o,e,i){return new qO(o,e)}remove(o,e){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $T{constructor(e){this.comparator=e,this.data=new LR(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,d)=>(e(i),!1))}forEachInRange(e,i){const d=this.data.getIteratorFrom(e[0]);for(;d.hasNext();){const _=d.getNext();if(this.comparator(_.key,e[1])>=0)return;i(_.key)}}forEachWhile(e,i){let d;for(d=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();d.hasNext();)if(!e(d.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Tpe(this.data.getIterator())}getIteratorFrom(e){return new Tpe(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(d=>{i=i.add(d)}),i}isEqual(e){if(!(e instanceof $T)||this.size!==e.size)return!1;const i=this.data.getIterator(),d=e.data.getIterator();for(;i.hasNext();){const _=i.getNext().key,B=d.getNext().key;if(0!==this.comparator(_,B))return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new $T(this.comparator);return i.data=e,i}}class Tpe{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qK(o){return o.hasNext()?o.getNext():void 0}class t9{constructor(e,i=null,d=[],_=[],B=null,_t=null,ga=null){this.path=e,this.collectionGroup=i,this.orderBy=d,this.filters=_,this.limit=B,this.startAt=_t,this.endAt=ga,this.P=null}}function Fce(o,e=null,i=[],d=[],_=null,B=null,_t=null){return new t9(o,e,i,d,_,B,_t)}function $8(o){const e=EI(o);if(null===e.P){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(d=>{return(_=d).field.canonicalString()+_.op.toString()+HK(_.value);var _}).join(","),i+="|ob:",i+=e.orderBy.map(d=>{return(_=d).field.canonicalString()+_.dir;var _}).join(","),vZ(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(d=>HK(d)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(d=>HK(d)).join(",")),e.P=i}return e.P}function N4(o,e){if(o.limit!==e.limit||o.orderBy.length!==e.orderBy.length)return!1;for(let _=0;_<o.orderBy.length;_++)if(!q_e(o.orderBy[_],e.orderBy[_]))return!1;if(o.filters.length!==e.filters.length)return!1;for(let _=0;_<o.filters.length;_++)if((i=o.filters[_]).op!==(d=e.filters[_]).op||!i.field.isEqual(d.field)||!D4(i.value,d.value))return!1;var i,d;return o.collectionGroup===e.collectionGroup&&!!o.path.isEqual(e.path)&&!!Qce(o.startAt,e.startAt)&&Qce(o.endAt,e.endAt)}function Xne(o){return uI.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}function ere(o,e){return o.filters.filter(i=>i instanceof WO&&i.field.isEqual(e))}function jce(o,e,i){let d=Yne,_=!0;for(const B of ere(o,e)){let _t=Yne,ga=!0;switch(B.op){case"<":case"<=":_t=B_e(B.value);break;case"==":case"in":case">=":_t=B.value;break;case">":_t=B.value,ga=!1;break;case"!=":case"not-in":_t=Yne}bpe({value:d,inclusive:_},{value:_t,inclusive:ga})<0&&(d=_t,_=ga)}if(null!==i)for(let B=0;B<o.orderBy.length;++B)if(o.orderBy[B].field.isEqual(e)){const _t=i.position[B];bpe({value:d,inclusive:_},{value:_t,inclusive:i.inclusive})<0&&(d=_t,_=i.inclusive);break}return{value:d,inclusive:_}}function tre(o,e,i){let d=Y8,_=!0;for(const B of ere(o,e)){let _t=Y8,ga=!0;switch(B.op){case">=":case">":_t=U_e(B.value),ga=!1;break;case"==":case"in":case"<=":_t=B.value;break;case"<":_t=B.value,ga=!1;break;case"!=":case"not-in":_t=Y8}Bce({value:d,inclusive:_},{value:_t,inclusive:ga})>0&&(d=_t,_=ga)}if(null!==i)for(let B=0;B<o.orderBy.length;++B)if(o.orderBy[B].field.isEqual(e)){const _t=i.position[B];Bce({value:d,inclusive:_},{value:_t,inclusive:i.inclusive})>0&&(d=_t,_=i.inclusive);break}return{value:d,inclusive:_}}class WO extends class{}{constructor(e,i,d){super(),this.field=e,this.op=i,this.value=d}static create(e,i,d){return e.isKeyField()?"in"===i||"not-in"===i?this.V(e,i,d):new SZ(e,i,d):"array-contains"===i?new G_e(e,d):"in"===i?new Q_e(e,d):"not-in"===i?new nre(e,d):"array-contains-any"===i?new H_e(e,d):new WO(e,i,d)}static V(e,i,d){return"in"===i?new V_e(e,d):new Vce(e,d)}matches(e){const i=e.data.field(this.field);return"!="===this.op?null!==i&&this.v(J8(i,this.value)):null!==i&&Z7(this.value)===Z7(i)&&this.v(J8(i,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return kI()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class SZ extends WO{constructor(e,i,d){super(e,i,d),this.key=uI.fromName(d.referenceValue)}matches(e){const i=uI.comparator(e.key,this.key);return this.v(i)}}class V_e extends WO{constructor(e,i){super(e,"in",i),this.keys=Spe(0,i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Vce extends WO{constructor(e,i){super(e,"not-in",i),this.keys=Spe(0,i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function Spe(o,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(d=>uI.fromName(d.referenceValue))}class G_e extends WO{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return IZ(i)&&EZ(i.arrayValue,this.value)}}class Q_e extends WO{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return null!==i&&EZ(this.value.arrayValue,i)}}class nre extends WO{constructor(e,i){super(e,"not-in",i)}matches(e){if(EZ(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return null!==i&&!EZ(this.value.arrayValue,i)}}class H_e extends WO{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!IZ(i)||!i.arrayValue.values)&&i.arrayValue.values.some(d=>EZ(this.value.arrayValue,d))}}class b6{constructor(e,i){this.position=e,this.inclusive=i}}class WK{constructor(e,i="asc"){this.field=e,this.dir=i}}function q_e(o,e){return o.dir===e.dir&&o.field.isEqual(e.field)}function Gce(o,e,i){let d=0;for(let _=0;_<o.position.length;_++){const B=e[_],_t=o.position[_];if(d=B.field.isKeyField()?uI.comparator(uI.fromName(_t.referenceValue),i.key):J8(_t,i.data.field(B.field)),"desc"===B.dir&&(d*=-1),0!==d)break}return d}function Qce(o,e){if(null===o)return null===e;if(null===e||o.inclusive!==e.inclusive||o.position.length!==e.position.length)return!1;for(let i=0;i<o.position.length;i++)if(!D4(o.position[i],e.position[i]))return!1;return!0}class C6{constructor(e,i=null,d=[],_=[],B=null,_t="F",ga=null,_h=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=d,this.filters=_,this.limit=B,this.limitType=_t,this.startAt=ga,this.endAt=_h,this.D=null,this.C=null}}function rre(o,e,i,d,_,B,_t,ga){return new C6(o,e,i,d,_,B,_t,ga)}function KK(o){return new C6(o)}function qce(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function Wce(o){for(const e of o.filters)if(e.S())return e.field;return null}function RZ(o){return null!==o.collectionGroup}function n9(o){const e=EI(o);if(null===e.D){e.D=[];const i=Wce(e),d=qce(e);if(null!==i&&null===d)i.isKeyField()||e.D.push(new WK(i)),e.D.push(new WK(CO.keyField(),"asc"));else{let _=!1;for(const B of e.explicitOrderBy)e.D.push(B),B.field.isKeyField()&&(_=!0);if(!_){const B=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new WK(CO.keyField(),B))}}}return e.D}function PM(o){const e=EI(o);if(!e.C)if("F"===e.limitType)e.C=Fce(e.path,e.collectionGroup,n9(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const B of n9(e))i.push(new WK(B.field,"desc"===B.dir?"asc":"desc"));const d=e.endAt?new b6(e.endAt.position,e.endAt.inclusive):null,_=e.startAt?new b6(e.startAt.position,e.startAt.inclusive):null;e.C=Fce(e.path,e.collectionGroup,i,e.filters,e.limit,d,_)}return e.C}function Rpe(o,e,i){return new C6(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),e,i,o.startAt,o.endAt)}function Z8(o,e){return N4(PM(o),PM(e))&&o.limitType===e.limitType}function Ope(o){return`${$8(PM(o))}|lt:${o.limitType}`}function ire(o){return`Query(target=${function j_e(o){let e=o.path.canonicalString();return null!==o.collectionGroup&&(e+=" collectionGroup="+o.collectionGroup),o.filters.length>0&&(e+=`, filters: [${o.filters.map(i=>{return`${(d=i).field.canonicalString()} ${d.op} ${HK(d.value)}`;var d}).join(", ")}]`),vZ(o.limit)||(e+=", limit: "+o.limit),o.orderBy.length>0&&(e+=`, orderBy: [${o.orderBy.map(i=>{return`${(d=i).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),o.startAt&&(e+=", startAt: ",e+=o.startAt.inclusive?"b:":"a:",e+=o.startAt.position.map(i=>HK(i)).join(",")),o.endAt&&(e+=", endAt: ",e+=o.endAt.inclusive?"a:":"b:",e+=o.endAt.position.map(i=>HK(i)).join(",")),`Target(${e})`}(PM(o))}; limitType=${o.limitType})`}function ore(o,e){return e.isFoundDocument()&&function(i,d){const _=d.key.path;return null!==i.collectionGroup?d.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(_):uI.isDocumentKey(i.path)?i.path.isEqual(_):i.path.isImmediateParentOf(_)}(o,e)&&function(i,d){for(const _ of i.explicitOrderBy)if(!_.field.isKeyField()&&null===d.data.field(_.field))return!1;return!0}(o,e)&&function(i,d){for(const _ of i.filters)if(!_.matches(d))return!1;return!0}(o,e)&&(d=e,!((i=o).startAt&&!function(_,B,_t){const ga=Gce(_,B,_t);return _.inclusive?ga<=0:ga<0}(i.startAt,n9(i),d)||i.endAt&&!function(_,B,_t){const ga=Gce(_,B,_t);return _.inclusive?ga>=0:ga>0}(i.endAt,n9(i),d)));var i,d}function zK(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function Dpe(o){return(e,i)=>{let d=!1;for(const _ of n9(o)){const B=Kce(_,e,i);if(0!==B)return B;d=d||_.field.isKeyField()}return 0}}function Kce(o,e,i){const d=o.field.isKeyField()?uI.comparator(e.key,i.key):function(_,B,_t){const ga=B.data.field(_),_h=_t.data.field(_);return null!==ga&&null!==_h?J8(ga,_h):kI()}(o.field,e,i);switch(o.dir){case"asc":return d;case"desc":return-1*d;default:return kI()}}function OZ(o,e){if(o.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yZ(e)?"-0":e}}function sre(o){return{integerValue:""+o}}function zce(o,e){return _pe(e)?sre(e):OZ(o,e)}class r9{constructor(){this._=void 0}}function Npe(o,e,i){return o instanceof i9?function(d,_){const B={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return _&&(B.fields.__previous_value__=_),{mapValue:B}}(i,e):o instanceof o9?Ppe(o,e):o instanceof s9?Jce(o,e):function(d,_){const B=Yce(d,_),_t=are(B)+are(d.k);return Mce(B)&&Mce(d.k)?sre(_t):OZ(d.M,_t)}(o,e)}function kpe(o,e,i){return o instanceof o9?Ppe(o,e):o instanceof s9?Jce(o,e):i}function Yce(o,e){return o instanceof a9?Mce(i=e)||(d=i)&&"doubleValue"in d?e:{integerValue:0}:null;var d,i}class i9 extends r9{}class o9 extends r9{constructor(e){super(),this.elements=e}}function Ppe(o,e){const i=xpe(e);for(const d of o.elements)i.some(_=>D4(_,d))||i.push(d);return{arrayValue:{values:i}}}class s9 extends r9{constructor(e){super(),this.elements=e}}function Jce(o,e){let i=xpe(e);for(const d of o.elements)i=i.filter(_=>!D4(_,d));return{arrayValue:{values:i}}}class a9 extends r9{constructor(e,i){super(),this.M=e,this.k=i}}function are(o){return eR(o.integerValue||o.doubleValue)}function xpe(o){return IZ(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class DZ{constructor(e,i){this.field=e,this.transform=i}}class Lpe{constructor(e,i){this.version=e,this.transformResults=i}}class sO{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new sO}static exists(e){return new sO(void 0,e)}static updateTime(e){return new sO(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function YK(o,e){return void 0!==o.updateTime?e.isFoundDocument()&&e.version.isEqual(o.updateTime):void 0===o.exists||o.exists===e.isFoundDocument()}class NZ{}function Mpe(o,e,i){o instanceof JK?function(d,_,B){const _t=d.value.clone(),ga=Upe(d.fieldTransforms,_,B.transformResults);_t.setAll(ga),_.convertToFoundDocument(B.version,_t).setHasCommittedMutations()}(o,e,i):o instanceof c9?function(d,_,B){if(!YK(d.precondition,_))return void _.convertToUnknownDocument(B.version);const _t=Upe(d.fieldTransforms,_,B.transformResults),ga=_.data;ga.setAll(ure(d)),ga.setAll(_t),_.convertToFoundDocument(B.version,ga).setHasCommittedMutations()}(o,e,i):e.convertToNoDocument(i.version).setHasCommittedMutations()}function $ce(o,e,i){var _;o instanceof JK?function(d,_,B){if(!YK(d.precondition,_))return;const _t=d.value.clone(),ga=Fpe(d.fieldTransforms,B,_);_t.setAll(ga),_.convertToFoundDocument(Bpe(_),_t).setHasLocalMutations()}(o,e,i):o instanceof c9?function(d,_,B){if(!YK(d.precondition,_))return;const _t=Fpe(d.fieldTransforms,B,_),ga=_.data;ga.setAll(ure(d)),ga.setAll(_t),_.convertToFoundDocument(Bpe(_),ga).setHasLocalMutations()}(o,e,i):YK(o.precondition,_=e)&&_.convertToNoDocument(s1.min())}function K_e(o,e){let i=null;for(const d of o.fieldTransforms){const _=e.data.field(d.field),B=Yce(d.transform,_||null);null!=B&&(null==i&&(i=t2.empty()),i.set(d.field,B))}return i||null}function cre(o,e){return o.type===e.type&&!!o.key.isEqual(e.key)&&!!o.precondition.isEqual(e.precondition)&&(d=e.fieldTransforms,!!(void 0===(i=o.fieldTransforms)&&void 0===d||i&&d&&K8(i,d,(_,B)=>function W_e(o,e){return o.field.isEqual(e.field)&&(d=e.transform,(i=o.transform)instanceof o9&&d instanceof o9||i instanceof s9&&d instanceof s9?K8(i.elements,d.elements,D4):i instanceof a9&&d instanceof a9?D4(i.k,d.k):i instanceof i9&&d instanceof i9);var i,d}(_,B))))&&(0===o.type?o.value.isEqual(e.value):1!==o.type||o.data.isEqual(e.data)&&o.fieldMask.isEqual(e.fieldMask));var i,d}function Bpe(o){return o.isFoundDocument()?o.version:s1.min()}class JK extends NZ{constructor(e,i,d,_=[]){super(),this.key=e,this.value=i,this.precondition=d,this.fieldTransforms=_,this.type=0}}class c9 extends NZ{constructor(e,i,d,_,B=[]){super(),this.key=e,this.data=i,this.fieldMask=d,this.precondition=_,this.fieldTransforms=B,this.type=1}}function ure(o){const e=new Map;return o.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const d=o.data.field(i);e.set(i,d)}}),e}function Upe(o,e,i){const d=new Map;f1(o.length===i.length);for(let _=0;_<i.length;_++){const B=o[_],_t=B.transform,ga=e.data.field(B.field);d.set(B.field,kpe(_t,ga,i[_]))}return d}function Fpe(o,e,i){const d=new Map;for(const _ of o){const B=_.transform,_t=i.data.field(_.field);d.set(_.field,Npe(B,_t,e))}return d}class kZ extends NZ{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}}class lre extends NZ{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}}class z_e{constructor(e){this.count=e}}var aO,iT;function jpe(o){switch(o){default:return kI();case C0.CANCELLED:case C0.UNKNOWN:case C0.DEADLINE_EXCEEDED:case C0.RESOURCE_EXHAUSTED:case C0.INTERNAL:case C0.UNAVAILABLE:case C0.UNAUTHENTICATED:return!1;case C0.INVALID_ARGUMENT:case C0.NOT_FOUND:case C0.ALREADY_EXISTS:case C0.PERMISSION_DENIED:case C0.FAILED_PRECONDITION:case C0.ABORTED:case C0.OUT_OF_RANGE:case C0.UNIMPLEMENTED:case C0.DATA_LOSS:return!0}}function Zce(o){if(void 0===o)return oO("GRPC error has no .code"),C0.UNKNOWN;switch(o){case aO.OK:return C0.OK;case aO.CANCELLED:return C0.CANCELLED;case aO.UNKNOWN:return C0.UNKNOWN;case aO.DEADLINE_EXCEEDED:return C0.DEADLINE_EXCEEDED;case aO.RESOURCE_EXHAUSTED:return C0.RESOURCE_EXHAUSTED;case aO.INTERNAL:return C0.INTERNAL;case aO.UNAVAILABLE:return C0.UNAVAILABLE;case aO.UNAUTHENTICATED:return C0.UNAUTHENTICATED;case aO.INVALID_ARGUMENT:return C0.INVALID_ARGUMENT;case aO.NOT_FOUND:return C0.NOT_FOUND;case aO.ALREADY_EXISTS:return C0.ALREADY_EXISTS;case aO.PERMISSION_DENIED:return C0.PERMISSION_DENIED;case aO.FAILED_PRECONDITION:return C0.FAILED_PRECONDITION;case aO.ABORTED:return C0.ABORTED;case aO.OUT_OF_RANGE:return C0.OUT_OF_RANGE;case aO.UNIMPLEMENTED:return C0.UNIMPLEMENTED;case aO.DATA_LOSS:return C0.DATA_LOSS;default:return kI()}}(iT=aO||(aO={}))[iT.OK=0]="OK",iT[iT.CANCELLED=1]="CANCELLED",iT[iT.UNKNOWN=2]="UNKNOWN",iT[iT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",iT[iT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",iT[iT.NOT_FOUND=5]="NOT_FOUND",iT[iT.ALREADY_EXISTS=6]="ALREADY_EXISTS",iT[iT.PERMISSION_DENIED=7]="PERMISSION_DENIED",iT[iT.UNAUTHENTICATED=16]="UNAUTHENTICATED",iT[iT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",iT[iT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",iT[iT.ABORTED=10]="ABORTED",iT[iT.OUT_OF_RANGE=11]="OUT_OF_RANGE",iT[iT.UNIMPLEMENTED=12]="UNIMPLEMENTED",iT[iT.INTERNAL=13]="INTERNAL",iT[iT.UNAVAILABLE=14]="UNAVAILABLE",iT[iT.DATA_LOSS=15]="DATA_LOSS";class X8{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),d=this.inner[i];if(void 0!==d)for(const[_,B]of d)if(this.equalsFn(_,e))return B}has(e){return void 0!==this.get(e)}set(e,i){const d=this.mapKeyFn(e),_=this.inner[d];if(void 0===_)return this.inner[d]=[[e,i]],void this.innerSize++;for(let B=0;B<_.length;B++)if(this.equalsFn(_[B][0],e))return void(_[B]=[e,i]);_.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),d=this.inner[i];if(void 0===d)return!1;for(let _=0;_<d.length;_++)if(this.equalsFn(d[_][0],e))return 1===d.length?delete this.inner[i]:d.splice(_,1),this.innerSize--,!0;return!1}forEach(e){E6(this.inner,(i,d)=>{for(const[_,B]of d)e(_,B)})}isEmpty(){return Pce(this.inner)}size(){return this.innerSize}}const Xce=new LR(uI.comparator);function xM(){return Xce}const Y_e=new LR(uI.comparator);function dre(...o){let e=Y_e;for(const i of o)e=e.insert(i.key,i);return e}function $K(){return new X8(o=>o.toString(),(o,e)=>o.isEqual(e))}const J_e=new LR(uI.comparator),Vpe=new $T(uI.comparator);function yT(...o){let e=Vpe;for(const i of o)e=e.add(i);return e}const $_e=new $T(N1);function hre(){return $_e}class PZ{constructor(e,i,d,_,B){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=d,this.documentUpdates=_,this.resolvedLimboDocuments=B}static createSynthesizedRemoteEventForCurrentChange(e,i){const d=new Map;return d.set(e,w6.createSynthesizedTargetChangeForCurrentChange(e,i)),new PZ(s1.min(),d,hre(),xM(),yT())}}class w6{constructor(e,i,d,_,B){this.resumeToken=e,this.current=i,this.addedDocuments=d,this.modifiedDocuments=_,this.removedDocuments=B}static createSynthesizedTargetChangeForCurrentChange(e,i){return new w6(xR.EMPTY_BYTE_STRING,i,yT(),yT(),yT())}}class T6{constructor(e,i,d,_){this.O=e,this.removedTargetIds=i,this.key=d,this.F=_}}class Gpe{constructor(e,i){this.targetId=e,this.$=i}}class eue{constructor(e,i,d=xR.EMPTY_BYTE_STRING,_=null){this.state=e,this.targetIds=i,this.resumeToken=d,this.cause=_}}class Qpe{constructor(){this.B=0,this.L=IS(),this.U=xR.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=yT(),i=yT(),d=yT();return this.L.forEach((_,B)=>{switch(B){case 0:e=e.add(_);break;case 2:i=i.add(_);break;case 1:d=d.add(_);break;default:kI()}}),new w6(this.U,this.q,e,i,d)}J(){this.K=!1,this.L=IS()}Y(e,i){this.K=!0,this.L=this.L.insert(e,i)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Z_e{constructor(e){this.nt=e,this.st=new Map,this.it=xM(),this.rt=tue(),this.ot=new $T(N1)}ut(e){for(const i of e.O)e.F&&e.F.isFoundDocument()?this.at(i,e.F):this.ct(i,e.key,e.F);for(const i of e.removedTargetIds)this.ct(i,e.key,e.F)}ht(e){this.forEachTarget(e,i=>{const d=this.lt(i);switch(e.state){case 0:this.ft(i)&&d.W(e.resumeToken);break;case 1:d.tt(),d.G||d.J(),d.W(e.resumeToken);break;case 2:d.tt(),d.G||this.removeTarget(i);break;case 3:this.ft(i)&&(d.et(),d.W(e.resumeToken));break;case 4:this.ft(i)&&(this.dt(i),d.W(e.resumeToken));break;default:kI()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.st.forEach((d,_)=>{this.ft(_)&&i(_)})}_t(e){const i=e.targetId,d=e.$.count,_=this.wt(i);if(_){const B=_.target;if(Xne(B))if(0===d){const _t=new uI(B.path);this.ct(i,_t,ES.newNoDocument(_t,s1.min()))}else f1(1===d);else this.gt(i)!==d&&(this.dt(i),this.ot=this.ot.add(i))}}yt(e){const i=new Map;this.st.forEach((B,_t)=>{const ga=this.wt(_t);if(ga){if(B.current&&Xne(ga.target)){const _h=new uI(ga.target.path);null!==this.it.get(_h)||this.It(_t,_h)||this.ct(_t,_h,ES.newNoDocument(_h,e))}B.j&&(i.set(_t,B.H()),B.J())}});let d=yT();this.rt.forEach((B,_t)=>{let ga=!0;_t.forEachWhile(_h=>{const _g=this.wt(_h);return!_g||2===_g.purpose||(ga=!1,!1)}),ga&&(d=d.add(B))}),this.it.forEach((B,_t)=>_t.setReadTime(e));const _=new PZ(e,i,this.ot,this.it,d);return this.it=xM(),this.rt=tue(),this.ot=new $T(N1),_}at(e,i){if(!this.ft(e))return;const d=this.It(e,i.key)?2:0;this.lt(e).Y(i.key,d),this.it=this.it.insert(i.key,i),this.rt=this.rt.insert(i.key,this.Tt(i.key).add(e))}ct(e,i,d){if(!this.ft(e))return;const _=this.lt(e);this.It(e,i)?_.Y(i,1):_.X(i),this.rt=this.rt.insert(i,this.Tt(i).delete(e)),d&&(this.it=this.it.insert(i,d))}removeTarget(e){this.st.delete(e)}gt(e){const i=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let i=this.st.get(e);return i||(i=new Qpe,this.st.set(e,i)),i}Tt(e){let i=this.rt.get(e);return i||(i=new $T(N1),this.rt=this.rt.insert(e,i)),i}ft(e){const i=null!==this.wt(e);return i||rI("WatchChangeAggregator","Detected inactive target",e),i}wt(e){const i=this.st.get(e);return i&&i.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Qpe),this.nt.getRemoteKeysForTarget(e).forEach(i=>{this.ct(e,i,null)})}It(e,i){return this.nt.getRemoteKeysForTarget(e).has(i)}}function tue(){return new LR(uI.comparator)}function IS(){return new LR(uI.comparator)}const X_e={asc:"ASCENDING",desc:"DESCENDING"},xZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class eve{constructor(e,i){this.databaseId=e,this.N=i}}function ZK(o,e){return o.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hpe(o,e){return o.N?e.toBase64():e.toUint8Array()}function tve(o,e){return ZK(o,e.toTimestamp())}function KO(o){return f1(!!o),s1.fromTimestamp(function(e){const i=e2(e);return new PR(i.seconds,i.nanos)}(o))}function fre(o,e){return(i=o,new T1(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function qpe(o){const e=T1.fromString(o);return f1(Xpe(e)),e}function XK(o,e){return fre(o.databaseId,e.path)}function k4(o,e){const i=qpe(e);if(i.get(1)!==o.databaseId.projectId)throw new Q0(C0.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+o.databaseId.projectId);if(i.get(3)!==o.databaseId.database)throw new Q0(C0.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+o.databaseId.database);return new uI(Kpe(i))}function nue(o,e){return fre(o.databaseId,e)}function Wpe(o){const e=qpe(o);return 4===e.length?T1.emptyPath():Kpe(e)}function LZ(o){return new T1(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Kpe(o){return f1(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function rue(o,e,i){return{name:XK(o,e),fields:i.value.mapValue.fields}}function S6(o,e,i){const d=k4(o,e.name),_=KO(e.updateTime),B=new t2({mapValue:{fields:e.fields}}),_t=ES.newFoundDocument(d,_,B);return i&&_t.setHasCommittedMutations(),i?_t.setHasCommittedMutations():_t}function _z(o,e){let i;if(e instanceof JK)i={update:rue(o,e.key,e.value)};else if(e instanceof kZ)i={delete:XK(o,e.key)};else if(e instanceof c9)i={update:rue(o,e.key,e.data),updateMask:cve(e.fieldMask)};else{if(!(e instanceof lre))return kI();i={verify:XK(o,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(d=>function(_,B){const _t=B.transform;if(_t instanceof i9)return{fieldPath:B.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_t instanceof o9)return{fieldPath:B.field.canonicalString(),appendMissingElements:{values:_t.elements}};if(_t instanceof s9)return{fieldPath:B.field.canonicalString(),removeAllFromArray:{values:_t.elements}};if(_t instanceof a9)return{fieldPath:B.field.canonicalString(),increment:_t.k};throw kI()}(0,d))),e.precondition.isNone||(i.currentDocument=void 0!==(_=e.precondition).updateTime?{updateTime:tve(o,_.updateTime)}:void 0!==_.exists?{exists:_.exists}:kI()),i;var _}function iue(o,e){const i=e.currentDocument?void 0!==(_=e.currentDocument).updateTime?sO.updateTime(KO(_.updateTime)):void 0!==_.exists?sO.exists(_.exists):sO.none():sO.none(),d=e.updateTransforms?e.updateTransforms.map(_=>function(B,_t){let ga=null;"setToServerValue"in _t?(f1("REQUEST_TIME"===_t.setToServerValue),ga=new i9):"appendMissingElements"in _t?ga=new o9(_t.appendMissingElements.values||[]):"removeAllFromArray"in _t?ga=new s9(_t.removeAllFromArray.values||[]):"increment"in _t?ga=new a9(B,_t.increment):kI();const _h=CO.fromServerFormat(_t.fieldPath);return new DZ(_h,ga)}(o,_)):[];var _;if(e.update){const _=k4(o,e.update.name),B=new t2({mapValue:{fields:e.update.fields}});if(e.updateMask){const _t=new z8((e.updateMask.fieldPaths||[]).map(_g=>CO.fromServerFormat(_g)));return new c9(_,B,_t,i,d)}return new JK(_,B,i,d)}if(e.delete){const _=k4(o,e.delete);return new kZ(_,i)}if(e.verify){const _=k4(o,e.verify);return new lre(_,i)}return kI()}function Ype(o,e){return{documents:[nue(o,e.path)]}}function Jpe(o,e){const i={structuredQuery:{}},d=e.path;null!==e.collectionGroup?(i.parent=nue(o,d),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=nue(o,d.popLast()),i.structuredQuery.from=[{collectionId:d.lastSegment()}]);const _=function(_h){if(0===_h.length)return;const _g=_h.map(l_=>function(f_){if("=="===f_.op){if(Epe(f_.value))return{unaryFilter:{field:u9(f_.field),op:"IS_NAN"}};if(ype(f_.value))return{unaryFilter:{field:u9(f_.field),op:"IS_NULL"}}}else if("!="===f_.op){if(Epe(f_.value))return{unaryFilter:{field:u9(f_.field),op:"IS_NOT_NAN"}};if(ype(f_.value))return{unaryFilter:{field:u9(f_.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:u9(f_.field),op:ove(f_.op),value:f_.value}}}(l_));return 1===_g.length?_g[0]:{compositeFilter:{op:"AND",filters:_g}}}(e.filters);_&&(i.structuredQuery.where=_);const B=function(_h){if(0!==_h.length)return _h.map(_g=>{return{field:u9((l_=_g).field),direction:ive(l_.dir)};var l_})}(e.orderBy);B&&(i.structuredQuery.orderBy=B);const _t=(_g=e.limit,o.N||vZ(_g)?_g:{value:_g});var _g,ga,_h;return null!==_t&&(i.structuredQuery.limit=_t),e.startAt&&(i.structuredQuery.startAt={before:(ga=e.startAt).inclusive,values:ga.position}),e.endAt&&(i.structuredQuery.endAt={before:!(_h=e.endAt).inclusive,values:_h.position}),i}function $pe(o){let e=Wpe(o.parent);const i=o.structuredQuery,d=i.from?i.from.length:0;let _=null;if(d>0){f1(1===d);const l_=i.from[0];l_.allDescendants?_=l_.collectionId:e=e.child(l_.collectionId)}let B=[];i.where&&(B=Zpe(i.where));let _t=[];i.orderBy&&(_t=i.orderBy.map(l_=>{return new WK(eY((f_=l_).field),function(R_){switch(R_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f_.direction));var f_}));let ga=null;i.limit&&(ga=function(l_){let f_;return f_="object"==typeof l_?l_.value:l_,vZ(f_)?null:f_}(i.limit));let _h=null;var l_;i.startAt&&(_h=new b6((l_=i.startAt).values||[],!!l_.before));let _g=null;return i.endAt&&(_g=function(l_){return new b6(l_.values||[],!l_.before)}(i.endAt)),rre(e,_,_t,B,ga,"F",_h,_g)}function Zpe(o){return o?void 0!==o.unaryFilter?[ave(o)]:void 0!==o.fieldFilter?[sve(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(e=>Zpe(e)).reduce((e,i)=>e.concat(i)):kI():[]}function ive(o){return X_e[o]}function ove(o){return xZ[o]}function u9(o){return{fieldPath:o.canonicalString()}}function eY(o){return CO.fromServerFormat(o.fieldPath)}function sve(o){return WO.create(eY(o.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kI()}}(o.fieldFilter.op),o.fieldFilter.value)}function ave(o){switch(o.unaryFilter.op){case"IS_NAN":const e=eY(o.unaryFilter.field);return WO.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=eY(o.unaryFilter.field);return WO.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=eY(o.unaryFilter.field);return WO.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=eY(o.unaryFilter.field);return WO.create(_,"!=",{nullValue:"NULL_VALUE"});default:return kI()}}function cve(o){const e=[];return o.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function Xpe(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function n2(o){let e="";for(let i=0;i<o.length;i++)e.length>0&&(e=ege(e)),e=uve(o.get(i),e);return ege(e)}function uve(o,e){let i=e;const d=o.length;for(let _=0;_<d;_++){const B=o.charAt(_);switch(B){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=B}}return i}function ege(o){return o+"\x01\x01"}function P4(o){const e=o.length;if(f1(e>=2),2===e)return f1("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),T1.emptyPath();const i=e-2,d=[];let _="";for(let B=0;B<e;){const _t=o.indexOf("\x01",B);switch((_t<0||_t>i)&&kI(),o.charAt(_t+1)){case"\x01":const ga=o.substring(B,_t);let _h;0===_.length?_h=ga:(_+=ga,_h=_,_=""),d.push(_h);break;case"\x10":_+=o.substring(B,_t),_+="\0";break;case"\x11":_+=o.substring(B,_t+1);break;default:kI()}B=_t+2}return new T1(d)}const pre=["userId","batchId"];function gre(o,e){return[o,n2(e)]}function tge(o,e,i){return[o,n2(e),i]}const lve={},dve=["prefixPath","collectionGroup","readTime","documentId"],nge=["prefixPath","collectionGroup","documentId"],hve=["collectionGroup","readTime","prefixPath","documentId"],fve=["canonicalId","targetId"],rge=["targetId","path"],pve=["path","targetId"],gve=["collectionId","parent"],ige=["indexId","uid"],mve=["uid","sequenceNumber"],Ave=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_ve=["indexId","uid","orderedDocumentKey"],vve=["userId","collectionPath","documentId"],yve=["userId","collectionPath","largestBatchId"],Eve=["userId","collectionGroup","largestBatchId"],oge=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sue=[...oge,"documentOverlays"],sge=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ive=[...sge,"indexConfiguration","indexState","indexEntries"],age="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cge{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class k0{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&kI(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new k0((d,_)=>{this.nextCallback=B=>{this.wrapSuccess(e,B).next(d,_)},this.catchCallback=B=>{this.wrapFailure(i,B).next(d,_)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof k0?i:k0.resolve(i)}catch(i){return k0.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):k0.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):k0.reject(i)}static resolve(e){return new k0((i,d)=>{i(e)})}static reject(e){return new k0((i,d)=>{d(e)})}static waitFor(e){return new k0((i,d)=>{let _=0,B=0,_t=!1;e.forEach(ga=>{++_,ga.next(()=>{++B,_t&&B===_&&i()},_h=>d(_h))}),_t=!0,B===_&&i()})}static or(e){let i=k0.resolve(!1);for(const d of e)i=i.next(_=>_?k0.resolve(_):d());return i}static forEach(e,i){const d=[];return e.forEach((_,B)=>{d.push(i.call(this,_,B))}),this.waitFor(d)}}class mre{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.At=new kR,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{i.error?this.At.reject(new MZ(e,i.error)):this.At.resolve()},this.transaction.onerror=d=>{const _=aue(d.target.error);this.At.reject(new MZ(e,_))}}static open(e,i,d,_){try{return new mre(i,e.transaction(_,d))}catch(B){throw new MZ(i,B)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(rI("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const i=this.transaction.objectStore(e);return new Cve(i)}}class cI{constructor(e,i,d){this.name=e,this.version=i,this.Pt=d,12.2===cI.Vt((0,M_.z$)())&&oO("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rI("SimpleDb","Removing database:",e),d9(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,M_.hl)())return!1;if(cI.St())return!0;const e=(0,M_.z$)(),i=cI.Vt(e),d=0<i&&i<10,_=cI.Dt(e),B=0<_&&_<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||d||B)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,i){return e.store(i)}static Vt(e){const i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),d=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(d)}static Dt(e){const i=e.match(/Android ([\d.]+)/i),d=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(d)}Nt(e){var i=this;return(0,b0.Z)(function*(){return i.db||(rI("SimpleDb","Opening database:",i.name),i.db=yield new Promise((d,_)=>{const B=indexedDB.open(i.name,i.version);B.onsuccess=_t=>{d(_t.target.result)},B.onblocked=()=>{_(new MZ(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},B.onerror=_t=>{const ga=_t.target.error;_("VersionError"===ga.name?new Q0(C0.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===ga.name?new Q0(C0.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+ga):new MZ(e,ga))},B.onupgradeneeded=_t=>{rI("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',_t.oldVersion),i.Pt.kt(_t.target.result,B.transaction,_t.oldVersion,i.version).next(()=>{rI("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.Mt&&(i.db.onversionchange=d=>i.Mt(d)),i.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,d,_){var B=this;return(0,b0.Z)(function*(){const _t="readonly"===i;let ga=0;for(;;){++ga;try{B.db=yield B.Nt(e);const _h=mre.open(B.db,e,_t?"readonly":"readwrite",d),_g=_(_h).next(l_=>(_h.bt(),l_)).catch(l_=>(_h.abort(l_),k0.reject(l_))).toPromise();return _g.catch(()=>{}),yield _h.Rt,_g}catch(_h){const _g="FirebaseError"!==_h.name&&ga<3;if(rI("SimpleDb","Transaction failed with error:",_h.message,"Retrying:",_g),B.close(),!_g)return Promise.reject(_h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class bve{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return d9(this.Ft.delete())}}class MZ extends Q0{constructor(e,i){super(C0.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function l9(o){return"IndexedDbTransactionError"===o.name}class Cve{constructor(e){this.store=e}put(e,i){let d;return void 0!==i?(rI("SimpleDb","PUT",this.store.name,e,i),d=this.store.put(i,e)):(rI("SimpleDb","PUT",this.store.name,"<auto-key>",e),d=this.store.put(e)),d9(d)}add(e){return rI("SimpleDb","ADD",this.store.name,e,e),d9(this.store.add(e))}get(e){return d9(this.store.get(e)).next(i=>(void 0===i&&(i=null),rI("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return rI("SimpleDb","DELETE",this.store.name,e),d9(this.store.delete(e))}count(){return rI("SimpleDb","COUNT",this.store.name),d9(this.store.count())}qt(e,i){const d=this.options(e,i);if(d.index||"function"!=typeof this.store.getAll){const _=this.cursor(d),B=[];return this.Kt(_,(_t,ga)=>{B.push(ga)}).next(()=>B)}{const _=this.store.getAll(d.range);return new k0((B,_t)=>{_.onerror=ga=>{_t(ga.target.error)},_.onsuccess=ga=>{B(ga.target.result)}})}}Gt(e,i){const d=this.store.getAll(e,null===i?void 0:i);return new k0((_,B)=>{d.onerror=_t=>{B(_t.target.error)},d.onsuccess=_t=>{_(_t.target.result)}})}Qt(e,i){rI("SimpleDb","DELETE ALL",this.store.name);const d=this.options(e,i);d.jt=!1;const _=this.cursor(d);return this.Kt(_,(B,_t,ga)=>ga.delete())}Wt(e,i){let d;i?d=e:(d={},i=e);const _=this.cursor(d);return this.Kt(_,i)}zt(e){const i=this.cursor({});return new k0((d,_)=>{i.onerror=B=>{const _t=aue(B.target.error);_(_t)},i.onsuccess=B=>{const _t=B.target.result;_t?e(_t.primaryKey,_t.value).next(ga=>{ga?_t.continue():d()}):d()}})}Kt(e,i){const d=[];return new k0((_,B)=>{e.onerror=_t=>{B(_t.target.error)},e.onsuccess=_t=>{const ga=_t.target.result;if(!ga)return void _();const _h=new bve(ga),_g=i(ga.primaryKey,ga.value,_h);if(_g instanceof k0){const l_=_g.catch(f_=>(_h.done(),k0.reject(f_)));d.push(l_)}_h.isDone?_():null===_h.Lt?ga.continue():ga.continue(_h.Lt)}}).next(()=>k0.waitFor(d))}options(e,i){let d;return void 0!==e&&("string"==typeof e?d=e:i=e),{index:d,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){const d=this.store.index(e.index);return e.jt?d.openKeyCursor(e.range,i):d.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}function d9(o){return new k0((e,i)=>{o.onsuccess=d=>{e(d.target.result)},o.onerror=d=>{const _=aue(d.target.error);i(_)}})}let Are=!1;function aue(o){const e=cI.Vt((0,M_.z$)());if(e>=12.2&&e<13){const i="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(i)>=0){const d=new Q0("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Are||(Are=!0,setTimeout(()=>{throw d},0)),d}}return o}class x4 extends cge{constructor(e,i){super(),this.Ht=e,this.currentSequenceNumber=i}}function zO(o,e){const i=EI(o);return cI.xt(i.Ht,e)}class cue{constructor(e,i,d,_){this.batchId=e,this.localWriteTime=i,this.baseMutations=d,this.mutations=_}applyToRemoteDocument(e,i){const d=i.mutationResults;for(let _=0;_<this.mutations.length;_++){const B=this.mutations[_];B.key.isEqual(e.key)&&Mpe(B,e,d[_])}}applyToLocalView(e){for(const i of this.baseMutations)i.key.isEqual(e.key)&&$ce(i,e,this.localWriteTime);for(const i of this.mutations)i.key.isEqual(e.key)&&$ce(i,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(i=>{const d=e.get(i.key),_=d;this.applyToLocalView(_),d.isValidDocument()||_.convertToNoDocument(s1.min())})}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),yT())}isEqual(e){return this.batchId===e.batchId&&K8(this.mutations,e.mutations,(i,d)=>cre(i,d))&&K8(this.baseMutations,e.baseMutations,(i,d)=>cre(i,d))}}class uue{constructor(e,i,d,_){this.batch=e,this.commitVersion=i,this.mutationResults=d,this.docVersions=_}static from(e,i,d){f1(e.mutations.length===d.length);let _=J_e;const B=e.mutations;for(let _t=0;_t<B.length;_t++)_=_.insert(B[_t].key,d[_t].version);return new uue(e,i,d,_)}}class lue{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eG{constructor(e,i,d,_,B=s1.min(),_t=s1.min(),ga=xR.EMPTY_BYTE_STRING){this.target=e,this.targetId=i,this.purpose=d,this.sequenceNumber=_,this.snapshotVersion=B,this.lastLimboFreeSnapshotVersion=_t,this.resumeToken=ga}withSequenceNumber(e){return new eG(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,i){return new eG(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new eG(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _re{constructor(e){this.Jt=e}}function tG(o,e){const i=e.key,d={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:BZ(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())d.document={name:XK(_=o.Jt,(B=e).key),fields:B.data.value.mapValue.fields,updateTime:ZK(_,B.version.toTimestamp())};else if(e.isNoDocument())d.noDocument={path:i.path.toArray(),readTime:nG(e.version)};else{if(!e.isUnknownDocument())return kI();d.unknownDocument={path:i.path.toArray(),version:nG(e.version)}}var _,B;return d}function BZ(o){const e=o.toTimestamp();return[e.seconds,e.nanoseconds]}function nG(o){const e=o.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function L4(o){const e=new PR(o.seconds,o.nanoseconds);return s1.fromTimestamp(e)}function rG(o,e){const i=(e.baseMutations||[]).map(B=>iue(o.Jt,B));for(let B=0;B<e.mutations.length-1;++B){const _t=e.mutations[B];B+1<e.mutations.length&&void 0!==e.mutations[B+1].transform&&(_t.updateTransforms=e.mutations[B+1].transform.fieldTransforms,e.mutations.splice(B+1,1),++B)}const d=e.mutations.map(B=>iue(o.Jt,B)),_=PR.fromMillis(e.localWriteTimeMs);return new cue(e.batchId,_,i,d)}function r2(o){const e=L4(o.readTime),i=void 0!==o.lastLimboFreeSnapshotVersion?L4(o.lastLimboFreeSnapshotVersion):s1.min();let d;var _;return void 0!==o.query.documents?(f1(1===(_=o.query).documents.length),d=PM(KK(Wpe(_.documents[0])))):d=PM($pe(o.query)),new eG(d,o.targetId,0,o.lastListenSequenceNumber,e,i,xR.fromBase64String(o.resumeToken))}function uge(o,e){const i=nG(e.snapshotVersion),d=nG(e.lastLimboFreeSnapshotVersion);let _;_=Xne(e.target)?Ype(o.Jt,e.target):Jpe(o.Jt,e.target);const B=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$8(e.target),readTime:i,resumeToken:B,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:d,query:_}}function UZ(o){const e=$pe({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?Rpe(e,e.limit,"L"):e}function tR(o,e){return new lue(e.largestBatchId,iue(o.Jt,e.overlayMutation))}function vre(o,e){const i=e.path.lastSegment();return[o,n2(e.path.popLast()),i]}class _x{getBundleMetadata(e,i){return due(e).get(i).next(d=>{if(d)return{id:(_=d).bundleId,createTime:L4(_.createTime),version:_.version};var _})}saveBundleMetadata(e,i){return due(e).put({bundleId:(d=i).id,createTime:nG(KO(d.createTime)),version:d.version});var d}getNamedQuery(e,i){return hue(e).get(i).next(d=>{if(d)return{name:(_=d).name,query:UZ(_.bundledQuery),readTime:L4(_.readTime)};var _})}saveNamedQuery(e,i){return hue(e).put({name:(d=i).name,readTime:nG(KO(d.readTime)),bundledQuery:d.bundledQuery});var d}}function due(o){return zO(o,"bundles")}function hue(o){return zO(o,"namedQueries")}class yre{constructor(e,i){this.M=e,this.userId=i}static Yt(e,i){return new yre(e,i.uid||"")}getOverlay(e,i){return YI(e).get(vre(this.userId,i)).next(d=>d?tR(this.M,d):null)}saveOverlays(e,i,d){const _=[];return d.forEach((B,_t)=>{const ga=new lue(i,_t);_.push(this.Xt(e,ga))}),k0.waitFor(_)}removeOverlaysForBatchId(e,i,d){const _=new Set;i.forEach(_t=>_.add(n2(_t.getCollectionPath())));const B=[];return _.forEach(_t=>{const ga=IDBKeyRange.bound([this.userId,_t,d],[this.userId,_t,d+1],!1,!0);B.push(YI(e).Qt("collectionPathOverlayIndex",ga))}),k0.waitFor(B)}getOverlaysForCollection(e,i,d){const _=$K(),B=n2(i),_t=IDBKeyRange.bound([this.userId,B,d],[this.userId,B,Number.POSITIVE_INFINITY],!0);return YI(e).qt("collectionPathOverlayIndex",_t).next(ga=>{for(const _h of ga){const _g=tR(this.M,_h);_.set(_g.getKey(),_g)}return _})}getOverlaysForCollectionGroup(e,i,d,_){const B=$K();let _t;const ga=IDBKeyRange.bound([this.userId,i,d],[this.userId,i,Number.POSITIVE_INFINITY],!0);return YI(e).Wt({index:"collectionGroupOverlayIndex",range:ga},(_h,_g,l_)=>{const f_=tR(this.M,_g);B.size()<_||f_.largestBatchId===_t?(B.set(f_.getKey(),f_),_t=f_.largestBatchId):l_.done()}).next(()=>B)}Xt(e,i){return YI(e).put(function(d,_,B){const[_t,ga,_h]=vre(_,B.mutation.key);return{userId:_,collectionPath:ga,documentId:_h,collectionGroup:B.mutation.key.getCollectionGroup(),largestBatchId:B.largestBatchId,overlayMutation:_z(d.Jt,B.mutation)}}(this.M,this.userId,i))}}function YI(o){return zO(o,"documentOverlays")}class LM{constructor(){}Zt(e,i){this.te(e,i),i.ee()}te(e,i){if("nullValue"in e)this.ne(i,5);else if("booleanValue"in e)this.ne(i,10),i.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(i,15),i.se(eR(e.integerValue));else if("doubleValue"in e){const d=eR(e.doubleValue);isNaN(d)?this.ne(i,13):(this.ne(i,15),yZ(d)?i.se(0):i.se(d))}else if("timestampValue"in e){const d=e.timestampValue;this.ne(i,20),"string"==typeof d?i.ie(d):(i.ie(`${d.seconds||""}`),i.se(d.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,i),this.oe(i);else if("bytesValue"in e)this.ne(i,30),i.ue(_k(e.bytesValue)),this.oe(i);else if("referenceValue"in e)this.ae(e.referenceValue,i);else if("geoPointValue"in e){const d=e.geoPointValue;this.ne(i,45),i.se(d.latitude||0),i.se(d.longitude||0)}else"mapValue"in e?Ipe(e)?this.ne(i,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,i),this.oe(i)):"arrayValue"in e?(this.he(e.arrayValue,i),this.oe(i)):kI()}re(e,i){this.ne(i,25),this.le(e,i)}le(e,i){i.ie(e)}ce(e,i){const d=e.fields||{};this.ne(i,55);for(const _ of Object.keys(d))this.re(_,i),this.te(d[_],i)}he(e,i){const d=e.values||[];this.ne(i,50);for(const _ of d)this.te(_,i)}ae(e,i){this.ne(i,37),uI.fromName(e).path.forEach(d=>{this.ne(i,60),this.le(d,i)})}ne(e,i){e.se(i)}oe(e){e.se(2)}}function Ere(o){if(0===o)return 8;let e=0;return o>>4==0&&(e+=4,o<<=4),o>>6==0&&(e+=2,o<<=2),o>>7==0&&(e+=1),e}function w0(o){const e=64-function(i){let d=0;for(let _=0;_<8;++_){const B=Ere(255&i[_]);if(d+=B,8!==B)break}return d}(o);return Math.ceil(e/8)}LM.fe=new LM;class lge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const i=e[Symbol.iterator]();let d=i.next();for(;!d.done;)this._e(d.value),d=i.next();this.we()}me(e){const i=e[Symbol.iterator]();let d=i.next();for(;!d.done;)this.ge(d.value),d=i.next();this.ye()}pe(e){for(const i of e){const d=i.charCodeAt(0);if(d<128)this._e(d);else if(d<2048)this._e(960|d>>>6),this._e(128|63&d);else if(i<"\ud800"||"\udbff"<i)this._e(480|d>>>12),this._e(128|63&d>>>6),this._e(128|63&d);else{const _=i.codePointAt(0);this._e(240|_>>>18),this._e(128|63&_>>>12),this._e(128|63&_>>>6),this._e(128|63&_)}}this.we()}Ie(e){for(const i of e){const d=i.charCodeAt(0);if(d<128)this.ge(d);else if(d<2048)this.ge(960|d>>>6),this.ge(128|63&d);else if(i<"\ud800"||"\udbff"<i)this.ge(480|d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d);else{const _=i.codePointAt(0);this.ge(240|_>>>18),this.ge(128|63&_>>>12),this.ge(128|63&_>>>6),this.ge(128|63&_)}}this.ye()}Te(e){const i=this.Ee(e),d=w0(i);this.Ae(1+d),this.buffer[this.position++]=255&d;for(let _=i.length-d;_<i.length;++_)this.buffer[this.position++]=255&i[_]}Re(e){const i=this.Ee(e),d=w0(i);this.Ae(1+d),this.buffer[this.position++]=~(255&d);for(let _=i.length-d;_<i.length;++_)this.buffer[this.position++]=~(255&i[_])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const i=function(_){const B=new DataView(new ArrayBuffer(8));return B.setFloat64(0,_,!1),new Uint8Array(B.buffer)}(e),d=0!=(128&i[0]);i[0]^=d?255:128;for(let _=1;_<i.length;++_)i[_]^=d?255:0;return i}_e(e){const i=255&e;0===i?(this.Pe(0),this.Pe(255)):255===i?(this.Pe(255),this.Pe(0)):this.Pe(i)}ge(e){const i=255&e;0===i?(this.ve(0),this.ve(255)):255===i?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const i=e+this.position;if(i<=this.buffer.length)return;let d=2*this.buffer.length;d<i&&(d=i);const _=new Uint8Array(d);_.set(this.buffer),this.buffer=_}}class VS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class fue{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class tY{constructor(){this.De=new lge,this.Ce=new VS(this.De),this.xe=new fue(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class h9{constructor(e,i,d,_){this.indexId=e,this.documentKey=i,this.arrayValue=d,this.directionalValue=_}ke(){const e=this.directionalValue.length,i=0===e||255===this.directionalValue[e-1]?e+1:e,d=new Uint8Array(i);return d.set(this.directionalValue,0),i!==e?d.set([0],this.directionalValue.length):++d[d.length-1],new h9(this.indexId,this.documentKey,this.arrayValue,d)}}function MR(o,e){let i=o.indexId-e.indexId;return 0!==i?i:(i=f9(o.arrayValue,e.arrayValue),0!==i?i:(i=f9(o.directionalValue,e.directionalValue),0!==i?i:uI.comparator(o.documentKey,e.documentKey)))}function f9(o,e){for(let i=0;i<o.length&&i<e.length;++i){const d=o[i]-e[i];if(0!==d)return d}return o.length-e.length}class pue{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const i of e.filters){const d=i;d.S()?this.Fe=d:this.Oe.push(d)}}$e(e){const i=Uce(e);if(void 0!==i&&!this.Be(i))return!1;const d=e9(e);let _=0,B=0;for(;_<d.length&&this.Be(d[_]);++_);if(_===d.length)return!0;if(void 0!==this.Fe){const _t=d[_];if(!this.Le(this.Fe,_t)||!this.Ue(this.Me[B++],_t))return!1;++_}for(;_<d.length;++_){const _t=d[_];if(B>=this.Me.length||!this.Ue(this.Me[B++],_t))return!1}return!0}Be(e){for(const i of this.Oe)if(this.Le(i,e))return!0;return!1}Le(e,i){return!(void 0===e||!e.field.isEqual(i.fieldPath))&&2===i.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,i){return!!e.field.isEqual(i.fieldPath)&&(0===i.kind&&"asc"===e.dir||1===i.kind&&"desc"===e.dir)}}class gue{constructor(){this.qe=new nY}addToCollectionParentIndex(e,i){return this.qe.add(i),k0.resolve()}getCollectionParents(e,i){return k0.resolve(this.qe.getEntries(i))}addFieldIndex(e,i){return k0.resolve()}deleteFieldIndex(e,i){return k0.resolve()}getDocumentsMatchingTarget(e,i){return k0.resolve(null)}getIndexType(e,i){return k0.resolve(0)}getFieldIndexes(e,i){return k0.resolve([])}getNextCollectionGroupToUpdate(e){return k0.resolve(null)}getMinOffset(e,i){return k0.resolve(kM.min())}updateCollectionGroup(e,i,d){return k0.resolve()}updateIndexEntries(e,i){return k0.resolve()}}class nY{constructor(){this.index={}}add(e){const i=e.lastSegment(),d=e.popLast(),_=this.index[i]||new $T(T1.comparator),B=!_.has(d);return this.index[i]=_.add(d),B}has(e){const i=e.lastSegment(),d=e.popLast(),_=this.index[i];return _&&_.has(d)}getEntries(e){return(this.index[e]||new $T(T1.comparator)).toArray()}}const FZ=new Uint8Array(0);class jL{constructor(e,i){this.user=e,this.databaseId=i,this.Ke=new nY,this.Ge=new X8(d=>$8(d),(d,_)=>N4(d,_)),this.uid=e.uid||""}addToCollectionParentIndex(e,i){if(!this.Ke.has(i)){const d=i.lastSegment(),_=i.popLast();e.addOnCommittedListener(()=>{this.Ke.add(i)});const B={collectionId:d,parent:n2(_)};return m1(e).put(B)}return k0.resolve()}getCollectionParents(e,i){const d=[],_=IDBKeyRange.bound([i,""],[$7(i),""],!1,!0);return m1(e).qt(_).next(B=>{for(const _t of B){if(_t.collectionId!==i)break;d.push(P4(_t.parent))}return d})}addFieldIndex(e,i){const d=iG(e),_={indexId:(B=i).indexId,collectionGroup:B.collectionGroup,fields:B.fields.map(_t=>[_t.fieldPath.canonicalString(),_t.kind])};var B;return delete _.indexId,d.add(_).next()}deleteFieldIndex(e,i){const d=iG(e),_=oG(e),B=jZ(e);return d.delete(i.indexId).next(()=>_.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>B.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,i){const d=jZ(e);let _=!0;const B=new Map;return k0.forEach(this.Qe(i),_t=>this.je(e,_t).next(ga=>{_&&(_=!!ga),B.set(_t,ga)})).next(()=>{if(_){let _t=yT();const ga=[];return k0.forEach(B,(_h,_g)=>{var l_;rI("IndexedDbIndexManager",`Using index ${l_=_h,`id=${l_.indexId}|cg=${l_.collectionGroup}|f=${l_.fields.map(LI=>`${LI.fieldPath}:${LI.kind}`).join(",")}`} to execute ${$8(i)}`);const f_=function(LI,DI){const y1=Uce(DI);if(void 0===y1)return null;for(const H1 of ere(LI,y1.fieldPath))switch(H1.op){case"array-contains-any":return H1.value.arrayValue.values||[];case"array-contains":return[H1.value]}return null}(_g,_h),R_=function(LI,DI){const y1=new Map;for(const H1 of e9(DI))for(const BR of ere(LI,H1.fieldPath))switch(BR.op){case"==":case"in":y1.set(H1.fieldPath.canonicalString(),BR.value);break;case"not-in":case"!=":return y1.set(H1.fieldPath.canonicalString(),BR.value),Array.from(y1.values())}return null}(_g,_h),V_=function(LI,DI){const y1=[];let H1=!0;for(const BR of e9(DI)){const dO=0===BR.kind?jce(LI,BR.fieldPath,LI.startAt):tre(LI,BR.fieldPath,LI.startAt);y1.push(dO.value),H1&&(H1=dO.inclusive)}return new b6(y1,H1)}(_g,_h),Y_=function(LI,DI){const y1=[];let H1=!0;for(const BR of e9(DI)){const dO=0===BR.kind?tre(LI,BR.fieldPath,LI.endAt):jce(LI,BR.fieldPath,LI.endAt);y1.push(dO.value),H1&&(H1=dO.inclusive)}return new b6(y1,H1)}(_g,_h),R0=this.We(_h,_g,V_),V0=this.We(_h,_g,Y_),J0=this.ze(_h,_g,R_),MI=this.He(_h.indexId,f_,R0,V_.inclusive,V0,Y_.inclusive,J0);return k0.forEach(MI,LI=>d.Gt(LI,i.limit).next(DI=>{DI.forEach(y1=>{const H1=uI.fromSegments(y1.documentKey);_t.has(H1)||(_t=_t.add(H1),ga.push(H1))})}))}).next(()=>ga)}return k0.resolve(null)})}Qe(e){let i=this.Ge.get(e);return i||(i=[e],this.Ge.set(e,i),i)}He(e,i,d,_,B,_t,ga){const _h=(null!=i?i.length:1)*Math.max(d.length,B.length),_g=_h/(null!=i?i.length:1),l_=[];for(let f_=0;f_<_h;++f_){const R_=i?this.Je(i[f_/_g]):FZ,V_=this.Ye(e,R_,d[f_%_g],_),Y_=this.Xe(e,R_,B[f_%_g],_t),R0=ga.map(V0=>this.Ye(e,R_,V0,!0));l_.push(...this.createRange(V_,Y_,R0))}return l_}Ye(e,i,d,_){const B=new h9(e,uI.empty(),i,d);return _?B:B.ke()}Xe(e,i,d,_){const B=new h9(e,uI.empty(),i,d);return _?B.ke():B}je(e,i){const d=new pue(i),_=null!=i.collectionGroup?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(e,_).next(B=>{let _t=null;for(const ga of B)d.$e(ga)&&(!_t||ga.fields.length>_t.fields.length)&&(_t=ga);return _t})}getIndexType(e,i){let d=2;return k0.forEach(this.Qe(i),_=>this.je(e,_).next(B=>{B?0!==d&&B.fields.length<function(_t){let ga=new $T(CO.comparator),_h=!1;for(const _g of _t.filters){const l_=_g;l_.field.isKeyField()||("array-contains"===l_.op||"array-contains-any"===l_.op?_h=!0:ga=ga.add(l_.field))}for(const _g of _t.orderBy)_g.field.isKeyField()||(ga=ga.add(_g.field));return ga.size+(_h?1:0)}(_)&&(d=1):d=0})).next(()=>d)}Ze(e,i){const d=new tY;for(const _ of e9(e)){const B=i.data.field(_.fieldPath);if(null==B)return null;const _t=d.Ne(_.kind);LM.fe.Zt(B,_t)}return d.Se()}Je(e){const i=new tY;return LM.fe.Zt(e,i.Ne(0)),i.Se()}tn(e,i){const d=new tY;return LM.fe.Zt(X7(this.databaseId,i),d.Ne(function(_){const B=e9(_);return 0===B.length?0:B[B.length-1].kind}(e))),d.Se()}ze(e,i,d){if(null===d)return[];let _=[];_.push(new tY);let B=0;for(const _t of e9(e)){const ga=d[B++];for(const _h of _)if(this.en(i,_t.fieldPath)&&IZ(ga))_=this.nn(_,_t,ga);else{const _g=_h.Ne(_t.kind);LM.fe.Zt(ga,_g)}}return this.sn(_)}We(e,i,d){return this.ze(e,i,d.position)}sn(e){const i=[];for(let d=0;d<e.length;++d)i[d]=e[d].Se();return i}nn(e,i,d){const _=[...e],B=[];for(const _t of d.arrayValue.values||[])for(const ga of _){const _h=new tY;_h.seed(ga.Se()),LM.fe.Zt(_t,_h.Ne(i.kind)),B.push(_h)}return B}en(e,i){return!!e.filters.find(d=>d instanceof WO&&d.field.isEqual(i)&&("in"===d.op||"not-in"===d.op))}getFieldIndexes(e,i){const d=iG(e),_=oG(e);return(i?d.qt("collectionGroupIndex",IDBKeyRange.bound(i,i)):d.qt()).next(B=>{const _t=[];return k0.forEach(B,ga=>_.get([ga.indexId,this.uid]).next(_h=>{_t.push(function(_g,l_){const f_=l_?new wZ(l_.sequenceNumber,new kM(L4(l_.readTime),new uI(P4(l_.documentKey)),l_.largestBatchId)):wZ.empty(),R_=_g.fields.map(([V_,Y_])=>new Zne(CO.fromServerFormat(V_),Y_));return new CZ(_g.indexId,_g.collectionGroup,R_,f_)}(ga,_h))})).next(()=>_t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(i=>0===i.length?null:(i.sort((d,_)=>{const B=d.indexState.sequenceNumber-_.indexState.sequenceNumber;return 0!==B?B:N1(d.collectionGroup,_.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(e,i,d){const _=iG(e),B=oG(e);return this.rn(e).next(_t=>_.qt("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(ga=>k0.forEach(ga,_h=>{return B.put({indexId:_h.indexId,uid:this.user.uid||"",sequenceNumber:_t,readTime:nG((R_=d).readTime),documentKey:n2(R_.documentKey.path),largestBatchId:R_.largestBatchId});var R_})))}updateIndexEntries(e,i){const d=new Map;return k0.forEach(i,(_,B)=>{const _t=d.get(_.collectionGroup);return(_t?k0.resolve(_t):this.getFieldIndexes(e,_.collectionGroup)).next(ga=>(d.set(_.collectionGroup,ga),k0.forEach(ga,_h=>this.on(e,_,_h).next(_g=>{const l_=this.un(B,_h);return _g.isEqual(l_)?k0.resolve():this.an(e,B,_h,_g,l_)}))))})}cn(e,i,d,_){return jZ(e).put({indexId:_.indexId,uid:this.uid,arrayValue:_.arrayValue,directionalValue:_.directionalValue,orderedDocumentKey:this.tn(d,i.key),documentKey:i.key.path.toArray()})}hn(e,i,d,_){return jZ(e).delete([_.indexId,this.uid,_.arrayValue,_.directionalValue,this.tn(d,i.key),i.key.path.toArray()])}on(e,i,d){const _=jZ(e);let B=new $T(MR);return _.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([d.indexId,this.uid,this.tn(d,i)])},(_t,ga)=>{B=B.add(new h9(d.indexId,i,ga.arrayValue,ga.directionalValue))}).next(()=>B)}un(e,i){let d=new $T(MR);const _=this.Ze(i,e);if(null==_)return d;const B=Uce(i);if(null!=B){const _t=e.data.field(B.fieldPath);if(IZ(_t))for(const ga of _t.arrayValue.values||[])d=d.add(new h9(i.indexId,e.key,this.Je(ga),_))}else d=d.add(new h9(i.indexId,e.key,FZ,_));return d}an(e,i,d,_,B){rI("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);const _t=[];return function(ga,_h,_g,l_,f_){const R_=ga.getIterator(),V_=_h.getIterator();let Y_=qK(R_),R0=qK(V_);for(;Y_||R0;){let V0=!1,J0=!1;if(Y_&&R0){const MI=_g(Y_,R0);MI<0?J0=!0:MI>0&&(V0=!0)}else null!=Y_?J0=!0:V0=!0;V0?(l_(R0),R0=qK(V_)):J0?(f_(Y_),Y_=qK(R_)):(Y_=qK(R_),R0=qK(V_))}}(_,B,MR,ga=>{_t.push(this.cn(e,i,d,ga))},ga=>{_t.push(this.hn(e,i,d,ga))}),k0.waitFor(_t)}rn(e){let i=1;return oG(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(d,_,B)=>{B.done(),i=_.sequenceNumber+1}).next(()=>i)}createRange(e,i,d){d=d.sort((_t,ga)=>MR(_t,ga)).filter((_t,ga,_h)=>!ga||0!==MR(_t,_h[ga-1]));const _=[];_.push(e);for(const _t of d){const ga=MR(_t,e),_h=MR(_t,i);if(0===ga)_[0]=e.ke();else if(ga>0&&_h<0)_.push(_t),_.push(_t.ke());else if(_h>0)break}_.push(i);const B=[];for(let _t=0;_t<_.length;_t+=2)B.push(IDBKeyRange.bound([_[_t].indexId,this.uid,_[_t].arrayValue,_[_t].directionalValue,FZ,[]],[_[_t+1].indexId,this.uid,_[_t+1].arrayValue,_[_t+1].directionalValue,FZ,[]]));return B}getMinOffset(e,i){let d;return k0.forEach(this.Qe(i),_=>this.je(e,_).next(B=>{B?(!d||I6(B.indexState.offset,d)<0)&&(d=B.indexState.offset):d=kM.min()})).next(()=>d)}}function m1(o){return zO(o,"collectionParents")}function jZ(o){return zO(o,"indexEntries")}function iG(o){return zO(o,"indexConfiguration")}function oG(o){return zO(o,"indexState")}const Ire={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class i2{constructor(e,i,d){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=d}static withCacheSize(e){return new i2(e,i2.DEFAULT_COLLECTION_PERCENTILE,i2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function R6(o,e,i){const d=o.store("mutations"),_=o.store("documentMutations"),B=[],_t=IDBKeyRange.only(i.batchId);let ga=0;const _h=d.Wt({range:_t},(l_,f_,R_)=>(ga++,R_.delete()));B.push(_h.next(()=>{f1(1===ga)}));const _g=[];for(const l_ of i.mutations){const f_=tge(e,l_.key.path,i.batchId);B.push(_.delete(f_)),_g.push(l_.key)}return k0.waitFor(B).next(()=>_g)}function bre(o){if(!o)return 0;let e;if(o.document)e=o.document;else if(o.unknownDocument)e=o.unknownDocument;else{if(!o.noDocument)throw kI();e=o.noDocument}return JSON.stringify(e).length}i2.DEFAULT_COLLECTION_PERCENTILE=10,i2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,i2.DEFAULT=new i2(41943040,i2.DEFAULT_COLLECTION_PERCENTILE,i2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),i2.DISABLED=new i2(-1,0,0);class Cre{constructor(e,i,d,_){this.userId=e,this.M=i,this.indexManager=d,this.referenceDelegate=_,this.ln={}}static Yt(e,i,d,_){f1(""!==e.uid);const B=e.isAuthenticated()?e.uid:"";return new Cre(B,i,d,_)}checkEmpty(e){let i=!0;const d=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return O6(e).Wt({index:"userMutationsIndex",range:d},(_,B,_t)=>{i=!1,_t.done()}).next(()=>i)}addMutationBatch(e,i,d,_){const B=sG(e),_t=O6(e);return _t.add({}).next(ga=>{f1("number"==typeof ga);const _h=new cue(ga,i,d,_),_g=function(R_,V_,Y_){const R0=Y_.baseMutations.map(J0=>_z(R_.Jt,J0)),V0=Y_.mutations.map(J0=>_z(R_.Jt,J0));return{userId:V_,batchId:Y_.batchId,localWriteTimeMs:Y_.localWriteTime.toMillis(),baseMutations:R0,mutations:V0}}(this.M,this.userId,_h),l_=[];let f_=new $T((R_,V_)=>N1(R_.canonicalString(),V_.canonicalString()));for(const R_ of _){const V_=tge(this.userId,R_.key.path,ga);f_=f_.add(R_.key.path.popLast()),l_.push(_t.put(_g)),l_.push(B.put(V_,lve))}return f_.forEach(R_=>{l_.push(this.indexManager.addToCollectionParentIndex(e,R_))}),e.addOnCommittedListener(()=>{this.ln[ga]=_h.keys()}),k0.waitFor(l_).next(()=>_h)})}lookupMutationBatch(e,i){return O6(e).get(i).next(d=>d?(f1(d.userId===this.userId),rG(this.M,d)):null)}fn(e,i){return this.ln[i]?k0.resolve(this.ln[i]):this.lookupMutationBatch(e,i).next(d=>{if(d){const _=d.keys();return this.ln[i]=_,_}return null})}getNextMutationBatchAfterBatchId(e,i){const d=i+1,_=IDBKeyRange.lowerBound([this.userId,d]);let B=null;return O6(e).Wt({index:"userMutationsIndex",range:_},(_t,ga,_h)=>{ga.userId===this.userId&&(f1(ga.batchId>=d),B=rG(this.M,ga)),_h.done()}).next(()=>B)}getHighestUnacknowledgedBatchId(e){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let d=-1;return O6(e).Wt({index:"userMutationsIndex",range:i,reverse:!0},(_,B,_t)=>{d=B.batchId,_t.done()}).next(()=>d)}getAllMutationBatches(e){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return O6(e).qt("userMutationsIndex",i).next(d=>d.map(_=>rG(this.M,_)))}getAllMutationBatchesAffectingDocumentKey(e,i){const d=gre(this.userId,i.path),_=IDBKeyRange.lowerBound(d),B=[];return sG(e).Wt({range:_},(_t,ga,_h)=>{const[_g,l_,f_]=_t,R_=P4(l_);if(_g===this.userId&&i.path.isEqual(R_))return O6(e).get(f_).next(V_=>{if(!V_)throw kI();f1(V_.userId===this.userId),B.push(rG(this.M,V_))});_h.done()}).next(()=>B)}getAllMutationBatchesAffectingDocumentKeys(e,i){let d=new $T(N1);const _=[];return i.forEach(B=>{const _t=gre(this.userId,B.path),ga=IDBKeyRange.lowerBound(_t),_h=sG(e).Wt({range:ga},(_g,l_,f_)=>{const[R_,V_,Y_]=_g,R0=P4(V_);R_===this.userId&&B.path.isEqual(R0)?d=d.add(Y_):f_.done()});_.push(_h)}),k0.waitFor(_).next(()=>this.dn(e,d))}getAllMutationBatchesAffectingQuery(e,i){const d=i.path,_=d.length+1,B=gre(this.userId,d),_t=IDBKeyRange.lowerBound(B);let ga=new $T(N1);return sG(e).Wt({range:_t},(_h,_g,l_)=>{const[f_,R_,V_]=_h,Y_=P4(R_);f_===this.userId&&d.isPrefixOf(Y_)?Y_.length===_&&(ga=ga.add(V_)):l_.done()}).next(()=>this.dn(e,ga))}dn(e,i){const d=[],_=[];return i.forEach(B=>{_.push(O6(e).get(B).next(_t=>{if(null===_t)throw kI();f1(_t.userId===this.userId),d.push(rG(this.M,_t))}))}),k0.waitFor(_).next(()=>d)}removeMutationBatch(e,i){return R6(e.Ht,this.userId,i).next(d=>(e.addOnCommittedListener(()=>{this._n(i.batchId)}),k0.forEach(d,_=>this.referenceDelegate.markPotentiallyOrphaned(e,_))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return k0.resolve();const d=IDBKeyRange.lowerBound([this.userId]),_=[];return sG(e).Wt({range:d},(B,_t,ga)=>{if(B[0]===this.userId){const _h=P4(B[1]);_.push(_h)}else ga.done()}).next(()=>{f1(0===_.length)})})}containsKey(e,i){return mue(e,this.userId,i)}wn(e){return dge(e).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mue(o,e,i){const d=gre(e,i.path),_=d[1],B=IDBKeyRange.lowerBound(d);let _t=!1;return sG(o).Wt({range:B,jt:!0},(ga,_h,_g)=>{const[l_,f_,R_]=ga;l_===e&&f_===_&&(_t=!0),_g.done()}).next(()=>_t)}function O6(o){return zO(o,"mutations")}function sG(o){return zO(o,"documentMutations")}function dge(o){return zO(o,"mutationQueues")}class D6{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new D6(0)}static yn(){return new D6(-1)}}class hge{constructor(e,i){this.referenceDelegate=e,this.M=i}allocateTargetId(e){return this.pn(e).next(i=>{const d=new D6(i.highestTargetId);return i.highestTargetId=d.next(),this.In(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(i=>s1.fromTimestamp(new PR(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,d){return this.pn(e).next(_=>(_.highestListenSequenceNumber=i,d&&(_.lastRemoteSnapshotVersion=d.toTimestamp()),i>_.highestListenSequenceNumber&&(_.highestListenSequenceNumber=i),this.In(e,_)))}addTargetData(e,i){return this.Tn(e,i).next(()=>this.pn(e).next(d=>(d.targetCount+=1,this.En(i,d),this.In(e,d))))}updateTargetData(e,i){return this.Tn(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>cG(e).delete(i.targetId)).next(()=>this.pn(e)).next(d=>(f1(d.targetCount>0),d.targetCount-=1,this.In(e,d)))}removeTargets(e,i,d){let _=0;const B=[];return cG(e).Wt((_t,ga)=>{const _h=r2(ga);_h.sequenceNumber<=i&&null===d.get(_h.targetId)&&(_++,B.push(this.removeTargetData(e,_h)))}).next(()=>k0.waitFor(B)).next(()=>_)}forEachTarget(e,i){return cG(e).Wt((d,_)=>{const B=r2(_);i(B)})}pn(e){return VZ(e).get("targetGlobalKey").next(i=>(f1(null!==i),i))}In(e,i){return VZ(e).put("targetGlobalKey",i)}Tn(e,i){return cG(e).put(uge(this.M,i))}En(e,i){let d=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,d=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,d=!0),d}getTargetCount(e){return this.pn(e).next(i=>i.targetCount)}getTargetData(e,i){const d=$8(i),_=IDBKeyRange.bound([d,Number.NEGATIVE_INFINITY],[d,Number.POSITIVE_INFINITY]);let B=null;return cG(e).Wt({range:_,index:"queryTargetsIndex"},(_t,ga,_h)=>{const _g=r2(ga);N4(i,_g.target)&&(B=_g,_h.done())}).next(()=>B)}addMatchingKeys(e,i,d){const _=[],B=N6(e);return i.forEach(_t=>{const ga=n2(_t.path);_.push(B.put({targetId:d,path:ga})),_.push(this.referenceDelegate.addReference(e,d,_t))}),k0.waitFor(_)}removeMatchingKeys(e,i,d){const _=N6(e);return k0.forEach(i,B=>{const _t=n2(B.path);return k0.waitFor([_.delete([d,_t]),this.referenceDelegate.removeReference(e,d,B)])})}removeMatchingKeysForTargetId(e,i){const d=N6(e),_=IDBKeyRange.bound([i],[i+1],!1,!0);return d.delete(_)}getMatchingKeysForTargetId(e,i){const d=IDBKeyRange.bound([i],[i+1],!1,!0),_=N6(e);let B=yT();return _.Wt({range:d,jt:!0},(_t,ga,_h)=>{const _g=P4(_t[1]),l_=new uI(_g);B=B.add(l_)}).next(()=>B)}containsKey(e,i){const d=n2(i.path),_=IDBKeyRange.bound([d],[$7(d)],!1,!0);let B=0;return N6(e).Wt({index:"documentTargetsIndex",jt:!0,range:_},([_t,ga],_h,_g)=>{0!==_t&&(B++,_g.done())}).next(()=>B>0)}Et(e,i){return cG(e).get(i).next(d=>d?r2(d):null)}}function cG(o){return zO(o,"targets")}function VZ(o){return zO(o,"targetGlobal")}function N6(o){return zO(o,"targetDocuments")}function k6(o){return wre.apply(this,arguments)}function wre(){return wre=(0,b0.Z)(function*(o){if(o.code!==C0.FAILED_PRECONDITION||o.message!==age)throw o;rI("LocalStore","Unexpectedly lost primary lease")}),wre.apply(this,arguments)}function Aue([o,e],[i,d]){const _=N1(o,i);return 0===_?N1(e,d):_}class MM{constructor(e){this.An=e,this.buffer=new $T(Aue),this.Rn=0}bn(){return++this.Rn}Pn(e){const i=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(i);else{const d=this.buffer.last();Aue(i,d)<0&&(this.buffer=this.buffer.delete(d).add(i))}}get maxValue(){return this.buffer.last()[0]}}class _ue{constructor(e,i){this.garbageCollector=e,this.asyncQueue=i,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var i=this;const d=this.Vn?3e5:6e4;rI("LruGarbageCollector",`Garbage collection scheduled in ${d}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",d,(0,b0.Z)(function*(){i.vn=null,i.Vn=!0;try{yield e.collectGarbage(i.garbageCollector)}catch(_){l9(_)?rI("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",_):yield k6(_)}yield i.Sn(e)}))}}class Tve{constructor(e,i){this.Dn=e,this.params=i}calculateTargetCount(e,i){return this.Dn.Cn(e).next(d=>Math.floor(i/100*d))}nthSequenceNumber(e,i){if(0===i)return k0.resolve(X2.A);const d=new MM(i);return this.Dn.forEachTarget(e,_=>d.Pn(_.sequenceNumber)).next(()=>this.Dn.xn(e,_=>d.Pn(_))).next(()=>d.maxValue)}removeTargets(e,i,d){return this.Dn.removeTargets(e,i,d)}removeOrphanedDocuments(e,i){return this.Dn.removeOrphanedDocuments(e,i)}collect(e,i){return-1===this.params.cacheSizeCollectionThreshold?(rI("LruGarbageCollector","Garbage collection skipped; disabled"),k0.resolve(Ire)):this.getCacheSize(e).next(d=>d<this.params.cacheSizeCollectionThreshold?(rI("LruGarbageCollector",`Garbage collection skipped; Cache size ${d} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ire):this.Nn(e,i))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,i){let d,_,B,_t,ga,_h,_g;const l_=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f_=>(f_>this.params.maximumSequenceNumbersToCollect?(rI("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f_}`),_=this.params.maximumSequenceNumbersToCollect):_=f_,_t=Date.now(),this.nthSequenceNumber(e,_))).next(f_=>(d=f_,ga=Date.now(),this.removeTargets(e,d,i))).next(f_=>(B=f_,_h=Date.now(),this.removeOrphanedDocuments(e,d))).next(f_=>(_g=Date.now(),zne()<=SL.in.DEBUG&&rI("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${_t-l_}ms\n\tDetermined least recently used ${_} in `+(ga-_t)+`ms\n\tRemoved ${B} targets in `+(_h-ga)+`ms\n\tRemoved ${f_} documents in `+(_g-_h)+`ms\nTotal Duration: ${_g-l_}ms`),k0.resolve({didRun:!0,sequenceNumbersCollected:_,targetsRemoved:B,documentsRemoved:f_})))}}class vue{constructor(e,i){this.db=e,this.garbageCollector=new Tve(this,i)}Cn(e){const i=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(d=>i.next(_=>d+_))}kn(e){let i=0;return this.xn(e,d=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}xn(e,i){return this.Mn(e,(d,_)=>i(_))}addReference(e,i,d){return p9(e,d)}removeReference(e,i,d){return p9(e,d)}removeTargets(e,i,d){return this.db.getTargetCache().removeTargets(e,i,d)}markPotentiallyOrphaned(e,i){return p9(e,i)}On(e,i){return function(d,_){let B=!1;return dge(d).zt(_t=>mue(d,_t,_).next(ga=>(ga&&(B=!0),k0.resolve(!ga)))).next(()=>B)}(e,i)}removeOrphanedDocuments(e,i){const d=this.db.getRemoteDocumentCache().newChangeBuffer(),_=[];let B=0;return this.Mn(e,(_t,ga)=>{if(ga<=i){const _h=this.On(e,_t).next(_g=>{if(!_g)return B++,d.getEntry(e,_t).next(()=>(d.removeEntry(_t,s1.min()),N6(e).delete([0,n2(_t.path)])))});_.push(_h)}}).next(()=>k0.waitFor(_)).next(()=>d.apply(e)).next(()=>B)}removeTarget(e,i){const d=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,d)}updateLimboDocument(e,i){return p9(e,i)}Mn(e,i){const d=N6(e);let _,B=X2.A;return d.Wt({index:"documentTargetsIndex"},([_t,ga],{path:_h,sequenceNumber:_g})=>{0===_t?(B!==X2.A&&i(new uI(P4(_)),B),B=_g,_=_h):B=X2.A}).next(()=>{B!==X2.A&&i(new uI(P4(_)),B)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function p9(o,e){return N6(o).put((d=o.currentSequenceNumber,{targetId:0,path:n2(e.path),sequenceNumber:d}));var d}class g9{constructor(){this.changes=new X8(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,ES.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const d=this.changes.get(i);return void 0!==d?k0.resolve(d):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eP{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,i,d){return m9(e).put(d)}removeEntry(e,i,d){return m9(e).delete(function(_,B){const _t=_.path.toArray();return[_t.slice(0,_t.length-2),_t[_t.length-2],BZ(B),_t[_t.length-1]]}(i,d))}updateMetadata(e,i){return this.getMetadata(e).next(d=>(d.byteSize+=i,this.Fn(e,d)))}getEntry(e,i){let d=ES.newInvalidDocument(i);return m9(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(wO(i))},(_,B)=>{d=this.$n(i,B)}).next(()=>d)}Bn(e,i){let d={size:0,document:ES.newInvalidDocument(i)};return m9(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(wO(i))},(_,B)=>{d={document:this.$n(i,B),size:bre(B)}}).next(()=>d)}getEntries(e,i){let d=xM();return this.Ln(e,i,(_,B)=>{const _t=this.$n(_,B);d=d.insert(_,_t)}).next(()=>d)}Un(e,i){let d=xM(),_=new LR(uI.comparator);return this.Ln(e,i,(B,_t)=>{const ga=this.$n(B,_t);d=d.insert(B,ga),_=_.insert(B,bre(_t))}).next(()=>({documents:d,qn:_}))}Ln(e,i,d){if(i.isEmpty())return k0.resolve();let _=new $T(yue);i.forEach(_h=>_=_.add(_h));const B=IDBKeyRange.bound(wO(_.first()),wO(_.last())),_t=_.getIterator();let ga=_t.getNext();return m9(e).Wt({index:"documentKeyIndex",range:B},(_h,_g,l_)=>{const f_=uI.fromSegments([..._g.prefixPath,_g.collectionGroup,_g.documentId]);for(;ga&&yue(ga,f_)<0;)d(ga,null),ga=_t.getNext();ga&&ga.isEqual(f_)&&(d(ga,_g),ga=_t.hasNext()?_t.getNext():null),ga?l_.Ut(wO(ga)):l_.done()}).next(()=>{for(;ga;)d(ga,null),ga=_t.hasNext()?_t.getNext():null})}getAllFromCollection(e,i,d){const _=[i.popLast().toArray(),i.lastSegment(),BZ(d.readTime),d.documentKey.path.isEmpty()?"":d.documentKey.path.lastSegment()],B=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return m9(e).qt(IDBKeyRange.bound(_,B,!0)).next(_t=>{let ga=xM();for(const _h of _t){const _g=this.$n(uI.fromSegments(_h.prefixPath.concat(_h.collectionGroup,_h.documentId)),_h);ga=ga.insert(_g.key,_g)}return ga})}getAllFromCollectionGroup(e,i,d,_){let B=xM();const _t=HT(i,d),ga=HT(i,kM.max());return m9(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(_t,ga,!0)},(_h,_g,l_)=>{const f_=this.$n(uI.fromSegments(_g.prefixPath.concat(_g.collectionGroup,_g.documentId)),_g);B=B.insert(f_.key,f_),B.size===_&&l_.done()}).next(()=>B)}newChangeBuffer(e){return new fge(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return pge(e).get("remoteDocumentGlobalKey").next(i=>(f1(!!i),i))}Fn(e,i){return pge(e).put("remoteDocumentGlobalKey",i)}$n(e,i){if(i){const d=function wve(o,e){let i;if(e.document)i=S6(o.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const d=uI.fromSegments(e.noDocument.path),_=L4(e.noDocument.readTime);i=ES.newNoDocument(d,_),e.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!e.unknownDocument)return kI();{const d=uI.fromSegments(e.unknownDocument.path),_=L4(e.unknownDocument.version);i=ES.newUnknownDocument(d,_)}}return e.readTime&&i.setReadTime(function(d){const _=new PR(d[0],d[1]);return s1.fromTimestamp(_)}(e.readTime)),i}(this.M,i);if(!d.isNoDocument()||!d.version.isEqual(s1.min()))return d}return ES.newInvalidDocument(e)}}class fge extends g9{constructor(e,i){super(),this.Kn=e,this.trackRemovals=i,this.Gn=new X8(d=>d.toString(),(d,_)=>d.isEqual(_))}applyChanges(e){const i=[];let d=0,_=new $T((B,_t)=>N1(B.canonicalString(),_t.canonicalString()));return this.changes.forEach((B,_t)=>{const ga=this.Gn.get(B);if(i.push(this.Kn.removeEntry(e,B,ga.readTime)),_t.isValidDocument()){const _h=tG(this.Kn.M,_t);_=_.add(B.path.popLast()),d+=bre(_h)-ga.size,i.push(this.Kn.addEntry(e,B,_h))}else if(d-=ga.size,this.trackRemovals){const _h=tG(this.Kn.M,_t.convertToNoDocument(s1.min()));i.push(this.Kn.addEntry(e,B,_h))}}),_.forEach(B=>{i.push(this.Kn.indexManager.addToCollectionParentIndex(e,B))}),i.push(this.Kn.updateMetadata(e,d)),k0.waitFor(i)}getFromCache(e,i){return this.Kn.Bn(e,i).next(d=>(this.Gn.set(i,{size:d.size,readTime:d.document.readTime}),d.document))}getAllFromCache(e,i){return this.Kn.Un(e,i).next(({documents:d,qn:_})=>(_.forEach((B,_t)=>{this.Gn.set(B,{size:_t,readTime:d.get(B).readTime})}),d))}}function pge(o){return zO(o,"remoteDocumentGlobal")}function m9(o){return zO(o,"remoteDocumentsV14")}function wO(o){const e=o.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HT(o,e){const i=e.documentKey.path.toArray();return[o,BZ(e.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function yue(o,e){const i=o.path.toArray(),d=e.path.toArray();let _=0;for(let B=0;B<i.length-2&&B<d.length-2;++B)if(_=N1(i[B],d[B]),_)return _;return _=N1(i.length,d.length),_||(_=N1(i[i.length-2],d[d.length-2]),_||N1(i[i.length-1],d[d.length-1]))}class gge{constructor(e){this.M=e}kt(e,i,d,_){const B=new mre("createOrUpgrade",i);var ga;d<1&&_>=1&&(e.createObjectStore("owner"),(ga=e).createObjectStore("mutationQueues",{keyPath:"userId"}),ga.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pre,{unique:!0}),ga.createObjectStore("documentMutations"),Eue(e),function(ga){ga.createObjectStore("remoteDocuments")}(e));let _t=k0.resolve();return d<3&&_>=3&&(0!==d&&(function(ga){ga.deleteObjectStore("targetDocuments"),ga.deleteObjectStore("targets"),ga.deleteObjectStore("targetGlobal")}(e),Eue(e)),_t=_t.next(()=>function(ga){const _h=ga.store("targetGlobal"),_g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:s1.min().toTimestamp(),targetCount:0};return _h.put("targetGlobalKey",_g)}(B))),d<4&&_>=4&&(0!==d&&(_t=_t.next(()=>function(ga,_h){return _h.store("mutations").qt().next(_g=>{ga.deleteObjectStore("mutations"),ga.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pre,{unique:!0});const l_=_h.store("mutations"),f_=_g.map(R_=>l_.put(R_));return k0.waitFor(f_)})}(e,B))),_t=_t.next(()=>{!function(ga){ga.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),d<5&&_>=5&&(_t=_t.next(()=>this.Qn(B))),d<6&&_>=6&&(_t=_t.next(()=>(function(ga){ga.createObjectStore("remoteDocumentGlobal")}(e),this.jn(B)))),d<7&&_>=7&&(_t=_t.next(()=>this.Wn(B))),d<8&&_>=8&&(_t=_t.next(()=>this.zn(e,B))),d<9&&_>=9&&(_t=_t.next(()=>{!function(ga){ga.objectStoreNames.contains("remoteDocumentChanges")&&ga.deleteObjectStore("remoteDocumentChanges")}(e)})),d<10&&_>=10&&(_t=_t.next(()=>this.Hn(B))),d<11&&_>=11&&(_t=_t.next(()=>{(function(ga){ga.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(ga){ga.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),d<12&&_>=12&&(_t=_t.next(()=>{!function(ga){const _h=ga.createObjectStore("documentOverlays",{keyPath:vve});_h.createIndex("collectionPathOverlayIndex",yve,{unique:!1}),_h.createIndex("collectionGroupOverlayIndex",Eve,{unique:!1})}(e)})),d<13&&_>=13&&(_t=_t.next(()=>function(ga){const _h=ga.createObjectStore("remoteDocumentsV14",{keyPath:dve});_h.createIndex("documentKeyIndex",nge),_h.createIndex("collectionGroupIndex",hve)}(e)).next(()=>this.Jn(e,B)).next(()=>e.deleteObjectStore("remoteDocuments"))),d<14&&_>=14&&(_t=_t.next(()=>{!function(ga){ga.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),ga.createObjectStore("indexState",{keyPath:ige}).createIndex("sequenceNumberIndex",mve,{unique:!1}),ga.createObjectStore("indexEntries",{keyPath:Ave}).createIndex("documentKeyIndex",_ve,{unique:!1})}(e)})),_t}jn(e){let i=0;return e.store("remoteDocuments").Wt((d,_)=>{i+=bre(_)}).next(()=>{const d={byteSize:i};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",d)})}Qn(e){const i=e.store("mutationQueues"),d=e.store("mutations");return i.qt().next(_=>k0.forEach(_,B=>{const _t=IDBKeyRange.bound([B.userId,-1],[B.userId,B.lastAcknowledgedBatchId]);return d.qt("userMutationsIndex",_t).next(ga=>k0.forEach(ga,_h=>{f1(_h.userId===B.userId);const _g=rG(this.M,_h);return R6(e,B.userId,_g).next(()=>{})}))}))}Wn(e){const i=e.store("targetDocuments"),d=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(_=>{const B=[];return d.Wt((_t,ga)=>{const _h=new T1(_t),_g=[0,n2(_h)];B.push(i.get(_g).next(l_=>l_?k0.resolve():i.put({targetId:0,path:n2(_h),sequenceNumber:_.highestListenSequenceNumber})))}).next(()=>k0.waitFor(B))})}zn(e,i){e.createObjectStore("collectionParents",{keyPath:gve});const d=i.store("collectionParents"),_=new nY,B=_t=>{if(_.add(_t)){const ga=_t.lastSegment(),_h=_t.popLast();return d.put({collectionId:ga,parent:n2(_h)})}};return i.store("remoteDocuments").Wt({jt:!0},(_t,ga)=>{const _h=new T1(_t);return B(_h.popLast())}).next(()=>i.store("documentMutations").Wt({jt:!0},([_t,ga,_h],_g)=>{const l_=P4(ga);return B(l_.popLast())}))}Hn(e){const i=e.store("targets");return i.Wt((d,_)=>{const B=r2(_),_t=uge(this.M,B);return i.put(_t)})}Jn(e,i){const d=i.store("remoteDocuments"),_=[];return d.Wt((B,_t)=>{const ga=i.store("remoteDocumentsV14"),_h=(_g=_t,_g.document?new uI(T1.fromString(_g.document.name).popFirst(5)):_g.noDocument?uI.fromSegments(_g.noDocument.path):_g.unknownDocument?uI.fromSegments(_g.unknownDocument.path):kI()).path.toArray();var _g;const l_={prefixPath:_h.slice(0,_h.length-2),collectionGroup:_h[_h.length-2],documentId:_h[_h.length-1],readTime:_t.readTime||[0,0],unknownDocument:_t.unknownDocument,noDocument:_t.noDocument,document:_t.document,hasCommittedMutations:!!_t.hasCommittedMutations};_.push(ga.put(l_))}).next(()=>k0.waitFor(_))}}function Eue(o){o.createObjectStore("targetDocuments",{keyPath:rge}).createIndex("documentTargetsIndex",pve,{unique:!0}),o.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fve,{unique:!0}),o.createObjectStore("targetGlobal")}const Tre="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sre{constructor(e,i,d,_,B,_t,ga,_h,_g,l_,f_=13){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=d,this.Yn=B,this.window=_t,this.document=ga,this.Xn=_g,this.Zn=l_,this.ts=f_,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=R_=>Promise.resolve(),!Sre.vt())throw new Q0(C0.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vue(this,_),this.hs=i+"main",this.M=new _re(_h),this.ls=new cI(this.hs,this.ts,new gge(this.M)),this.fs=new hge(this.referenceDelegate,this.M),this.ds=new eP(this.M),this._s=new _x,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l_&&oO("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q0(C0.FAILED_PRECONDITION,Tre);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new X2(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var i=this;return this.cs=function(){var d=(0,b0.Z)(function*(_){if(i.started)return e(_)});return function(_){return d.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var i=(0,b0.Z)(function*(d){null===d.newVersion&&(yield e())});return function(d){return i.apply(this,arguments)}}())}setNetworkEnabled(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,b0.Z)(function*(){i.started&&(yield i.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>GZ(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(i=>{i||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(i=>this.isPrimary&&!i?this.Rs(e).next(()=>!1):!!i&&this.bs(e).next(()=>!0))).catch(e=>{if(l9(e))return rI("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rI("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return rY(e).get("owner").next(i=>k0.resolve(this.Ps(i)))}Vs(e){return GZ(e).delete(this.clientId)}vs(){var e=this;return(0,b0.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const i=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",d=>{const _=zO(d,"clientMetadata");return _.qt().next(B=>{const _t=e.Ds(B,18e5),ga=B.filter(_h=>-1===_t.indexOf(_h));return k0.forEach(ga,_h=>_.delete(_h.clientId)).next(()=>ga)})}).catch(()=>[]);if(e.ws)for(const d of i)e.ws.removeItem(e.Cs(d.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?k0.resolve(!0):rY(e).get("owner").next(i=>{if(null!==i&&this.Ss(i.leaseTimestampMs,5e3)&&!this.xs(i.ownerId)){if(this.Ps(i)&&this.networkEnabled)return!0;if(!this.Ps(i)){if(!i.allowTabSynchronization)throw new Q0(C0.FAILED_PRECONDITION,Tre);return!1}}return!(!this.networkEnabled||!this.inForeground)||GZ(e).qt().next(d=>void 0===this.Ds(d,5e3).find(_=>{if(this.clientId!==_.clientId){const _t=!this.inForeground&&_.inForeground,ga=this.networkEnabled===_.networkEnabled;if(!this.networkEnabled&&_.networkEnabled||_t&&ga)return!0}return!1}))}).next(i=>(this.isPrimary!==i&&rI("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var e=this;return(0,b0.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],i=>{const d=new x4(i,X2.A);return e.Rs(d).next(()=>e.Vs(d))}),e.ls.close(),e.Os()})()}Ds(e,i){return e.filter(d=>this.Ss(d.updateTimeMs,i)&&!this.xs(d.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>GZ(e).qt().next(i=>this.Ds(i,18e5).map(d=>d.clientId)))}get started(){return this.ns}getMutationQueue(e,i){return Cre.Yt(e,this.M,i,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new jL(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return yre.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,i,d){rI("IndexedDbPersistence","Starting transaction:",e);const _="readonly"===i?"readonly":"readwrite",B=14===(_t=this.ts)?Ive:13===_t?sge:12===_t?sue:11===_t?oge:void kI();var _t;let ga;return this.ls.runTransaction(e,_,B,_h=>(ga=new x4(_h,this.es?this.es.next():X2.A),"readwrite-primary"===i?this.Es(ga).next(_g=>!!_g||this.As(ga)).next(_g=>{if(!_g)throw oO(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Q0(C0.FAILED_PRECONDITION,age);return d(ga)}).next(_g=>this.bs(ga).next(()=>_g)):this.$s(ga).next(()=>d(ga)))).then(_h=>(ga.raiseOnCommittedEvent(),_h))}$s(e){return rY(e).get("owner").next(i=>{if(null!==i&&this.Ss(i.leaseTimestampMs,5e3)&&!this.xs(i.ownerId)&&!this.Ps(i)&&!(this.Zn||this.allowTabSynchronization&&i.allowTabSynchronization))throw new Q0(C0.FAILED_PRECONDITION,Tre)})}bs(e){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rY(e).put("owner",i)}static vt(){return cI.vt()}Rs(e){const i=rY(e);return i.get("owner").next(d=>this.Ps(d)?(rI("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):k0.resolve())}Ss(e,i){const d=Date.now();return!(e<d-i||e>d&&(oO(`Detected an update time that is in the future: ${e} > ${d}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,M_.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var i;try{const d=null!==(null===(i=this.ws)||void 0===i?void 0:i.getItem(this.Cs(e)));return rI("IndexedDbPersistence",`Client '${e}' ${d?"is":"is not"} zombied in LocalStorage`),d}catch(d){return oO("IndexedDbPersistence","Failed to get zombied client id.",d),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){oO("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rY(o){return zO(o,"owner")}function GZ(o){return zO(o,"clientMetadata")}function Rre(o,e){let i=o.projectId;return o.isDefaultDatabase||(i+="."+o.database),"firestore/"+e+"/"+i+"/"}class mge{constructor(e,i,d){this.ds=e,this.Bs=i,this.indexManager=d}Ls(e,i){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,i).next(d=>this.Us(e,i,d))}Us(e,i,d){return this.ds.getEntry(e,i).next(_=>{for(const B of d)B.applyToLocalView(_);return _})}qs(e,i){e.forEach((d,_)=>{for(const B of i)B.applyToLocalView(_)})}Ks(e,i){return this.ds.getEntries(e,i).next(d=>this.Gs(e,d).next(()=>d))}Gs(e,i){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,i).next(d=>this.qs(i,d))}Qs(e,i,d){return uI.isDocumentKey((_=i).path)&&null===_.collectionGroup&&0===_.filters.length?this.js(e,i.path):RZ(i)?this.Ws(e,i,d):this.zs(e,i,d);var _}js(e,i){return this.Ls(e,new uI(i)).next(d=>{let _=dre();return d.isFoundDocument()&&(_=_.insert(d.key,d)),_})}Ws(e,i,d){const _=i.collectionGroup;let B=dre();return this.indexManager.getCollectionParents(e,_).next(_t=>k0.forEach(_t,ga=>{const _h=(_g=i,l_=ga.child(_),new C6(l_,null,_g.explicitOrderBy.slice(),_g.filters.slice(),_g.limit,_g.limitType,_g.startAt,_g.endAt));var _g,l_;return this.zs(e,_h,d).next(_g=>{_g.forEach((l_,f_)=>{B=B.insert(l_,f_)})})}).next(()=>B))}zs(e,i,d){let _;return this.ds.getAllFromCollection(e,i.path,d).next(B=>(_=B,this.Bs.getAllMutationBatchesAffectingQuery(e,i))).next(B=>{for(const _t of B)for(const ga of _t.mutations){const _h=ga.key;let _g=_.get(_h);null==_g&&(_g=ES.newInvalidDocument(_h),_=_.insert(_h,_g)),$ce(ga,_g,_t.localWriteTime),_g.isFoundDocument()||(_=_.remove(_h))}}).next(()=>(_.forEach((B,_t)=>{ore(i,_t)||(_=_.remove(B))}),_))}}class Ore{constructor(e,i,d,_){this.targetId=e,this.fromCache=i,this.Hs=d,this.Js=_}static Ys(e,i){let d=yT(),_=yT();for(const B of i.docChanges)switch(B.type){case 0:d=d.add(B.doc.key);break;case 1:_=_.add(B.doc.key)}return new Ore(e,i.fromCache,d,_)}}class Iue{constructor(){this.Xs=!1}initialize(e,i){this.Zs=e,this.indexManager=i,this.Xs=!0}Qs(e,i,d,_){return this.ti(e,i).next(B=>B||this.ei(e,i,_,d)).next(B=>B||this.ni(e,i))}ti(e,i){return k0.resolve(null)}ei(e,i,d,_){return function Hce(o){return 0===o.filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())}(i)||_.isEqual(s1.min())?this.ni(e,i):this.Zs.Ks(e,d).next(B=>{const _t=this.si(i,B);return this.ii(i,_t,d,_)?this.ni(e,i):(zne()<=SL.in.DEBUG&&rI("QueryEngine","Re-using previous result from %s to execute query: %s",_.toString(),ire(i)),this.ri(e,_t,i,wpe(_,-1)))})}si(e,i){let d=new $T(Dpe(e));return i.forEach((_,B)=>{ore(e,B)&&(d=d.add(B))}),d}ii(e,i,d,_){if(null===e.limit)return!1;if(d.size!==i.size)return!0;const B="F"===e.limitType?i.last():i.first();return!!B&&(B.hasPendingWrites||B.version.compareTo(_)>0)}ni(e,i){return zne()<=SL.in.DEBUG&&rI("QueryEngine","Using full collection scan to execute query:",ire(i)),this.Zs.Qs(e,i,kM.min())}ri(e,i,d,_){return this.Zs.Qs(e,d,_).next(B=>(i.forEach(_t=>{B=B.insert(_t.key,_t)}),B))}}class Age{constructor(e,i,d,_){this.persistence=e,this.oi=i,this.M=_,this.ui=new LR(N1),this.ai=new X8(B=>$8(B),N4),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(d)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new mge(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.ui))}}function nR(o,e,i,d){return new Age(o,e,i,d)}function bue(o,e){return Dre.apply(this,arguments)}function Dre(){return Dre=(0,b0.Z)(function*(o,e){const i=EI(o);return yield i.persistence.runTransaction("Handle user change","readonly",d=>{let _;return i.Bs.getAllMutationBatches(d).next(B=>(_=B,i.li(e),i.Bs.getAllMutationBatches(d))).next(B=>{const _t=[],ga=[];let _h=yT();for(const _g of _){_t.push(_g.batchId);for(const l_ of _g.mutations)_h=_h.add(l_.key)}for(const _g of B){ga.push(_g.batchId);for(const l_ of _g.mutations)_h=_h.add(l_.key)}return i.fi.Ks(d,_h).next(_g=>({di:_g,removedBatchIds:_t,addedBatchIds:ga}))})})}),Dre.apply(this,arguments)}function _ge(o,e){const i=EI(o);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",d=>{const _=e.batch.keys(),B=i.hi.newChangeBuffer({trackRemovals:!0});return function(_t,ga,_h,_g){const l_=_h.batch,f_=l_.keys();let R_=k0.resolve();return f_.forEach(V_=>{R_=R_.next(()=>_g.getEntry(ga,V_)).next(Y_=>{const R0=_h.docVersions.get(V_);f1(null!==R0),Y_.version.compareTo(R0)<0&&(l_.applyToRemoteDocument(Y_,_h),Y_.isValidDocument()&&(Y_.setReadTime(_h.commitVersion),_g.addEntry(Y_)))})}),R_.next(()=>_t.Bs.removeMutationBatch(ga,l_))}(i,d,e,B).next(()=>B.apply(d)).next(()=>i.Bs.performConsistencyCheck(d)).next(()=>i.fi.Ks(d,_))})}function Cue(o){const e=EI(o);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.fs.getLastRemoteSnapshotVersion(i))}function vge(o,e){const i=EI(o),d=e.snapshotVersion;let _=i.ui;return i.persistence.runTransaction("Apply remote event","readwrite-primary",B=>{const _t=i.hi.newChangeBuffer({trackRemovals:!0});_=i.ui;const ga=[];e.targetChanges.forEach((_g,l_)=>{const f_=_.get(l_);if(!f_)return;ga.push(i.fs.removeMatchingKeys(B,_g.removedDocuments,l_).next(()=>i.fs.addMatchingKeys(B,_g.addedDocuments,l_)));let R_=f_.withSequenceNumber(B.currentSequenceNumber);var V_,Y_,R0;e.targetMismatches.has(l_)?R_=R_.withResumeToken(xR.EMPTY_BYTE_STRING,s1.min()).withLastLimboFreeSnapshotVersion(s1.min()):_g.resumeToken.approximateByteSize()>0&&(R_=R_.withResumeToken(_g.resumeToken,d)),_=_.insert(l_,R_),Y_=R_,R0=_g,(0===(V_=f_).resumeToken.approximateByteSize()||Y_.snapshotVersion.toMicroseconds()-V_.snapshotVersion.toMicroseconds()>=3e8||R0.addedDocuments.size+R0.modifiedDocuments.size+R0.removedDocuments.size>0)&&ga.push(i.fs.updateTargetData(B,R_))});let _h=xM();if(e.documentUpdates.forEach(_g=>{e.resolvedLimboDocuments.has(_g)&&ga.push(i.persistence.referenceDelegate.updateLimboDocument(B,_g))}),ga.push(uG(B,_t,e.documentUpdates).next(_g=>{_h=_g})),!d.isEqual(s1.min())){const _g=i.fs.getLastRemoteSnapshotVersion(B).next(l_=>i.fs.setTargetsMetadata(B,B.currentSequenceNumber,d));ga.push(_g)}return k0.waitFor(ga).next(()=>_t.apply(B)).next(()=>i.fi.Gs(B,_h)).next(()=>_h)}).then(B=>(i.ui=_,B))}function uG(o,e,i){let d=yT();return i.forEach(_=>d=d.add(_)),e.getEntries(o,d).next(_=>{let B=xM();return i.forEach((_t,ga)=>{const _h=_.get(_t);ga.isNoDocument()&&ga.version.isEqual(s1.min())?(e.removeEntry(_t,ga.readTime),B=B.insert(_t,ga)):!_h.isValidDocument()||ga.version.compareTo(_h.version)>0||0===ga.version.compareTo(_h.version)&&_h.hasPendingWrites?(e.addEntry(ga),B=B.insert(_t,ga)):rI("LocalStore","Ignoring outdated watch update for ",_t,". Current version:",_h.version," Watch version:",ga.version)}),B})}function yge(o,e){const i=EI(o);return i.persistence.runTransaction("Get next mutation batch","readonly",d=>(void 0===e&&(e=-1),i.Bs.getNextMutationBatchAfterBatchId(d,e)))}function A9(o,e){const i=EI(o);return i.persistence.runTransaction("Allocate target","readwrite",d=>{let _;return i.fs.getTargetData(d,e).next(B=>B?(_=B,k0.resolve(_)):i.fs.allocateTargetId(d).next(_t=>(_=new eG(e,_t,0,d.currentSequenceNumber),i.fs.addTargetData(d,_).next(()=>_))))}).then(d=>{const _=i.ui.get(d.targetId);return(null===_||d.snapshotVersion.compareTo(_.snapshotVersion)>0)&&(i.ui=i.ui.insert(d.targetId,d),i.ai.set(e,d.targetId)),d})}function _9(o,e,i){return Nre.apply(this,arguments)}function Nre(){return Nre=(0,b0.Z)(function*(o,e,i){const d=EI(o),_=d.ui.get(e),B=i?"readwrite":"readwrite-primary";try{i||(yield d.persistence.runTransaction("Release target",B,_t=>d.persistence.referenceDelegate.removeTarget(_t,_)))}catch(_t){if(!l9(_t))throw _t;rI("LocalStore",`Failed to update sequence numbers for target ${e}: ${_t}`)}d.ui=d.ui.remove(e),d.ai.delete(_.target)}),Nre.apply(this,arguments)}function QZ(o,e,i){const d=EI(o);let _=s1.min(),B=yT();return d.persistence.runTransaction("Execute query","readonly",_t=>function(ga,_h,_g){const l_=EI(ga),f_=l_.ai.get(_g);return void 0!==f_?k0.resolve(l_.ui.get(f_)):l_.fs.getTargetData(_h,_g)}(d,_t,PM(e)).next(ga=>{if(ga)return _=ga.lastLimboFreeSnapshotVersion,d.fs.getMatchingKeysForTargetId(_t,ga.targetId).next(_h=>{B=_h})}).next(()=>d.oi.Qs(_t,e,i?_:s1.min(),i?B:yT())).next(ga=>(IN(d,zK(e),ga),{documents:ga,_i:B})))}function wue(o,e){const i=EI(o),d=EI(i.fs),_=i.ui.get(e);return _?Promise.resolve(_.target):i.persistence.runTransaction("Get target data","readonly",B=>d.Et(B,e).next(_t=>_t?_t.target:null))}function Tue(o,e){const i=EI(o),d=i.ci.get(e)||s1.min();return i.persistence.runTransaction("Get new document changes","readonly",_=>i.hi.getAllFromCollectionGroup(_,e,wpe(d,-1),Number.MAX_SAFE_INTEGER)).then(_=>(IN(i,e,_),_))}function IN(o,e,i){let d=s1.min();i.forEach((_,B)=>{B.readTime.compareTo(d)>0&&(d=B.readTime)}),o.ci.set(e,d)}function kre(){return kre=(0,b0.Z)(function*(o,e,i,d){const _=EI(o);let B=yT(),_t=xM();for(const _g of i){const l_=e.wi(_g.metadata.name);_g.document&&(B=B.add(l_));const f_=e.mi(_g);f_.setReadTime(e.gi(_g.metadata.readTime)),_t=_t.insert(l_,f_)}const ga=_.hi.newChangeBuffer({trackRemovals:!0}),_h=yield A9(_,(_g=d,PM(KK(T1.fromString(`__bundle__/docs/${_g}`)))));var _g;return _.persistence.runTransaction("Apply bundle documents","readwrite",_g=>uG(_g,ga,_t).next(l_=>(ga.apply(_g),l_)).next(l_=>_.fs.removeMatchingKeysForTargetId(_g,_h.targetId).next(()=>_.fs.addMatchingKeys(_g,B,_h.targetId)).next(()=>_.fi.Gs(_g,l_)).next(()=>l_)))}),kre.apply(this,arguments)}function Sue(o,e){return pR.apply(this,arguments)}function pR(){return pR=(0,b0.Z)(function*(o,e,i=yT()){const d=yield A9(o,PM(UZ(e.bundledQuery))),_=EI(o);return _.persistence.runTransaction("Save named query","readwrite",B=>{const _t=KO(e.readTime);if(d.snapshotVersion.compareTo(_t)>=0)return _._s.saveNamedQuery(B,e);const ga=d.withResumeToken(xR.EMPTY_BYTE_STRING,_t);return _.ui=_.ui.insert(ga.targetId,ga),_.fs.updateTargetData(B,ga).next(()=>_.fs.removeMatchingKeysForTargetId(B,d.targetId)).next(()=>_.fs.addMatchingKeys(B,i,d.targetId)).next(()=>_._s.saveNamedQuery(B,e))})}),pR.apply(this,arguments)}class HZ{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,i){return k0.resolve(this.yi.get(i))}saveBundleMetadata(e,i){var d;return this.yi.set(i.id,{id:(d=i).id,version:d.version,createTime:KO(d.createTime)}),k0.resolve()}getNamedQuery(e,i){return k0.resolve(this.pi.get(i))}saveNamedQuery(e,i){return this.pi.set(i.name,{name:(d=i).name,query:UZ(d.bundledQuery),readTime:KO(d.readTime)}),k0.resolve();var d}}class Sve{constructor(){this.overlays=new LR(uI.comparator),this.Ii=new Map}getOverlay(e,i){return k0.resolve(this.overlays.get(i))}saveOverlays(e,i,d){return d.forEach((_,B)=>{this.Xt(e,i,B)}),k0.resolve()}removeOverlaysForBatchId(e,i,d){const _=this.Ii.get(d);return void 0!==_&&(_.forEach(B=>this.overlays=this.overlays.remove(B)),this.Ii.delete(d)),k0.resolve()}getOverlaysForCollection(e,i,d){const _=$K(),B=i.length+1,_t=new uI(i.child("")),ga=this.overlays.getIteratorFrom(_t);for(;ga.hasNext();){const _h=ga.getNext().value,_g=_h.getKey();if(!i.isPrefixOf(_g.path))break;_g.path.length===B&&_h.largestBatchId>d&&_.set(_h.getKey(),_h)}return k0.resolve(_)}getOverlaysForCollectionGroup(e,i,d,_){let B=new LR((_g,l_)=>_g-l_);const _t=this.overlays.getIterator();for(;_t.hasNext();){const _g=_t.getNext().value;if(_g.getKey().getCollectionGroup()===i&&_g.largestBatchId>d){let l_=B.get(_g.largestBatchId);null===l_&&(l_=$K(),B=B.insert(_g.largestBatchId,l_)),l_.set(_g.getKey(),_g)}}const ga=$K(),_h=B.getIterator();for(;_h.hasNext()&&(_h.getNext().value.forEach((_g,l_)=>ga.set(_g,l_)),!(ga.size()>=_)););return k0.resolve(ga)}Xt(e,i,d){if(null===d)return;const _=this.overlays.get(d.key);if(null!==_){const _t=this.Ii.get(_.largestBatchId).delete(d.key);this.Ii.set(_.largestBatchId,_t)}this.overlays=this.overlays.insert(d.key,new lue(i,d));let B=this.Ii.get(i);void 0===B&&(B=yT(),this.Ii.set(i,B)),this.Ii.set(i,B.add(d.key))}}class tP{constructor(){this.Ti=new $T(YO.Ei),this.Ai=new $T(YO.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,i){const d=new YO(e,i);this.Ti=this.Ti.add(d),this.Ai=this.Ai.add(d)}bi(e,i){e.forEach(d=>this.addReference(d,i))}removeReference(e,i){this.Pi(new YO(e,i))}Vi(e,i){e.forEach(d=>this.removeReference(d,i))}vi(e){const i=new uI(new T1([])),d=new YO(i,e),_=new YO(i,e+1),B=[];return this.Ai.forEachInRange([d,_],_t=>{this.Pi(_t),B.push(_t.key)}),B}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const i=new uI(new T1([])),d=new YO(i,e),_=new YO(i,e+1);let B=yT();return this.Ai.forEachInRange([d,_],_t=>{B=B.add(_t.key)}),B}containsKey(e){const i=new YO(e,0),d=this.Ti.firstAfterOrEqual(i);return null!==d&&e.isEqual(d.key)}}class YO{constructor(e,i){this.key=e,this.Ci=i}static Ei(e,i){return uI.comparator(e.key,i.key)||N1(e.Ci,i.Ci)}static Ri(e,i){return N1(e.Ci,i.Ci)||uI.comparator(e.key,i.key)}}class Rve{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.Bs=[],this.xi=1,this.Ni=new $T(YO.Ei)}checkEmpty(e){return k0.resolve(0===this.Bs.length)}addMutationBatch(e,i,d,_){const B=this.xi;this.xi++;const _t=new cue(B,i,d,_);this.Bs.push(_t);for(const ga of _)this.Ni=this.Ni.add(new YO(ga.key,B)),this.indexManager.addToCollectionParentIndex(e,ga.key.path.popLast());return k0.resolve(_t)}lookupMutationBatch(e,i){return k0.resolve(this.ki(i))}getNextMutationBatchAfterBatchId(e,i){const _=this.Mi(i+1),B=_<0?0:_;return k0.resolve(this.Bs.length>B?this.Bs[B]:null)}getHighestUnacknowledgedBatchId(){return k0.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return k0.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const d=new YO(i,0),_=new YO(i,Number.POSITIVE_INFINITY),B=[];return this.Ni.forEachInRange([d,_],_t=>{const ga=this.ki(_t.Ci);B.push(ga)}),k0.resolve(B)}getAllMutationBatchesAffectingDocumentKeys(e,i){let d=new $T(N1);return i.forEach(_=>{const B=new YO(_,0),_t=new YO(_,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([B,_t],ga=>{d=d.add(ga.Ci)})}),k0.resolve(this.Oi(d))}getAllMutationBatchesAffectingQuery(e,i){const d=i.path,_=d.length+1;let B=d;uI.isDocumentKey(B)||(B=B.child(""));const _t=new YO(new uI(B),0);let ga=new $T(N1);return this.Ni.forEachWhile(_h=>{const _g=_h.key.path;return!!d.isPrefixOf(_g)&&(_g.length===_&&(ga=ga.add(_h.Ci)),!0)},_t),k0.resolve(this.Oi(ga))}Oi(e){const i=[];return e.forEach(d=>{const _=this.ki(d);null!==_&&i.push(_)}),i}removeMutationBatch(e,i){f1(0===this.Fi(i.batchId,"removed")),this.Bs.shift();let d=this.Ni;return k0.forEach(i.mutations,_=>{const B=new YO(_.key,i.batchId);return d=d.delete(B),this.referenceDelegate.markPotentiallyOrphaned(e,_.key)}).next(()=>{this.Ni=d})}_n(e){}containsKey(e,i){const d=new YO(i,0),_=this.Ni.firstAfterOrEqual(d);return k0.resolve(i.isEqual(_&&_.key))}performConsistencyCheck(e){return k0.resolve()}Fi(e,i){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const i=this.Mi(e);return i<0||i>=this.Bs.length?null:this.Bs[i]}}class Ove{constructor(e){this.$i=e,this.docs=new LR(uI.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const d=i.key,_=this.docs.get(d),B=_?_.size:0,_t=this.$i(i);return this.docs=this.docs.insert(d,{document:i.mutableCopy(),size:_t}),this.size+=_t-B,this.indexManager.addToCollectionParentIndex(e,d.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const d=this.docs.get(i);return k0.resolve(d?d.document.mutableCopy():ES.newInvalidDocument(i))}getEntries(e,i){let d=xM();return i.forEach(_=>{const B=this.docs.get(_);d=d.insert(_,B?B.document.mutableCopy():ES.newInvalidDocument(_))}),k0.resolve(d)}getAllFromCollection(e,i,d){let _=xM();const B=new uI(i.child("")),_t=this.docs.getIteratorFrom(B);for(;_t.hasNext();){const{key:ga,value:{document:_h}}=_t.getNext();if(!i.isPrefixOf(ga.path))break;ga.path.length>i.length+1||I6(F_e(_h),d)<=0||(_=_.insert(_h.key,_h.mutableCopy()))}return k0.resolve(_)}getAllFromCollectionGroup(e,i,d,_){kI()}Bi(e,i){return k0.forEach(this.docs,d=>i(d))}newChangeBuffer(e){return new Ige(this)}getSize(e){return k0.resolve(this.size)}}class Ige extends g9{constructor(e){super(),this.Kn=e}applyChanges(e){const i=[];return this.changes.forEach((d,_)=>{_.isValidDocument()?i.push(this.Kn.addEntry(e,_)):this.Kn.removeEntry(d)}),k0.waitFor(i)}getFromCache(e,i){return this.Kn.getEntry(e,i)}getAllFromCache(e,i){return this.Kn.getEntries(e,i)}}class VL{constructor(e){this.persistence=e,this.Li=new X8(i=>$8(i),N4),this.lastRemoteSnapshotVersion=s1.min(),this.highestTargetId=0,this.Ui=0,this.qi=new tP,this.targetCount=0,this.Ki=D6.gn()}forEachTarget(e,i){return this.Li.forEach((d,_)=>i(_)),k0.resolve()}getLastRemoteSnapshotVersion(e){return k0.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k0.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),k0.resolve(this.highestTargetId)}setTargetsMetadata(e,i,d){return d&&(this.lastRemoteSnapshotVersion=d),i>this.Ui&&(this.Ui=i),k0.resolve()}Tn(e){this.Li.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Ki=new D6(i),this.highestTargetId=i),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,i){return this.Tn(i),this.targetCount+=1,k0.resolve()}updateTargetData(e,i){return this.Tn(i),k0.resolve()}removeTargetData(e,i){return this.Li.delete(i.target),this.qi.vi(i.targetId),this.targetCount-=1,k0.resolve()}removeTargets(e,i,d){let _=0;const B=[];return this.Li.forEach((_t,ga)=>{ga.sequenceNumber<=i&&null===d.get(ga.targetId)&&(this.Li.delete(_t),B.push(this.removeMatchingKeysForTargetId(e,ga.targetId)),_++)}),k0.waitFor(B).next(()=>_)}getTargetCount(e){return k0.resolve(this.targetCount)}getTargetData(e,i){const d=this.Li.get(i)||null;return k0.resolve(d)}addMatchingKeys(e,i,d){return this.qi.bi(i,d),k0.resolve()}removeMatchingKeys(e,i,d){this.qi.Vi(i,d);const _=this.persistence.referenceDelegate,B=[];return _&&i.forEach(_t=>{B.push(_.markPotentiallyOrphaned(e,_t))}),k0.waitFor(B)}removeMatchingKeysForTargetId(e,i){return this.qi.vi(i),k0.resolve()}getMatchingKeysForTargetId(e,i){const d=this.qi.Di(i);return k0.resolve(d)}containsKey(e,i){return k0.resolve(this.qi.containsKey(i))}}class bge{constructor(e,i){this.Gi={},this.overlays={},this.es=new X2(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new VL(this),this.indexManager=new gue,this.ds=new Ove(d=>this.referenceDelegate.Qi(d)),this.M=new _re(i),this._s=new HZ(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new Sve,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let d=this.Gi[e.toKey()];return d||(d=new Rve(i,this.referenceDelegate),this.Gi[e.toKey()]=d),d}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,i,d){rI("MemoryPersistence","Starting transaction:",e);const _=new v9(this.es.next());return this.referenceDelegate.ji(),d(_).next(B=>this.referenceDelegate.Wi(_).next(()=>B)).toPromise().then(B=>(_.raiseOnCommittedEvent(),B))}zi(e,i){return k0.or(Object.values(this.Gi).map(d=>()=>d.containsKey(e,i)))}}class v9 extends cge{constructor(e){super(),this.currentSequenceNumber=e}}class lG{constructor(e){this.persistence=e,this.Hi=new tP,this.Ji=null}static Yi(e){return new lG(e)}get Xi(){if(this.Ji)return this.Ji;throw kI()}addReference(e,i,d){return this.Hi.addReference(d,i),this.Xi.delete(d.toString()),k0.resolve()}removeReference(e,i,d){return this.Hi.removeReference(d,i),this.Xi.add(d.toString()),k0.resolve()}markPotentiallyOrphaned(e,i){return this.Xi.add(i.toString()),k0.resolve()}removeTarget(e,i){this.Hi.vi(i.targetId).forEach(_=>this.Xi.add(_.toString()));const d=this.persistence.getTargetCache();return d.getMatchingKeysForTargetId(e,i.targetId).next(_=>{_.forEach(B=>this.Xi.add(B.toString()))}).next(()=>d.removeTargetData(e,i))}ji(){this.Ji=new Set}Wi(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k0.forEach(this.Xi,d=>{const _=uI.fromPath(d);return this.Zi(e,_).next(B=>{B||i.removeEntry(_,s1.min())})}).next(()=>(this.Ji=null,i.apply(e)))}updateLimboDocument(e,i){return this.Zi(e,i).next(d=>{d?this.Xi.delete(i.toString()):this.Xi.add(i.toString())})}Qi(e){return 0}Zi(e,i){return k0.or([()=>k0.resolve(this.Hi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.zi(e,i)])}}function Rue(o,e){return`firestore_clients_${o}_${e}`}function Cge(o,e,i){let d=`firestore_mutations_${o}_${i}`;return e.isAuthenticated()&&(d+=`_${e.uid}`),d}function Pre(o,e){return`firestore_targets_${o}_${e}`}class y9{constructor(e,i,d,_){this.user=e,this.batchId=i,this.state=d,this.error=_}static tr(e,i,d){const _=JSON.parse(d);let B,_t="object"==typeof _&&-1!==["pending","acknowledged","rejected"].indexOf(_.state)&&(void 0===_.error||"object"==typeof _.error);return _t&&_.error&&(_t="string"==typeof _.error.message&&"string"==typeof _.error.code,_t&&(B=new Q0(_.error.code,_.error.message))),_t?new y9(e,i,_.state,B):(oO("SharedClientState",`Failed to parse mutation state for ID '${i}': ${d}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qZ{constructor(e,i,d){this.targetId=e,this.state=i,this.error=d}static tr(e,i){const d=JSON.parse(i);let _,B="object"==typeof d&&-1!==["not-current","current","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return B&&d.error&&(B="string"==typeof d.error.message&&"string"==typeof d.error.code,B&&(_=new Q0(d.error.code,d.error.message))),B?new qZ(e,d.state,_):(oO("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iY{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static tr(e,i){const d=JSON.parse(i);let _="object"==typeof d&&d.activeTargetIds instanceof Array,B=hre();for(let _t=0;_&&_t<d.activeTargetIds.length;++_t)_=_pe(d.activeTargetIds[_t]),B=B.add(d.activeTargetIds[_t]);return _?new iY(e,B):(oO("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}}class xre{constructor(e,i){this.clientId=e,this.onlineState=i}static tr(e){const i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new xre(i.clientId,i.onlineState):(oO("SharedClientState",`Failed to parse online state: ${e}`),null)}}class M4{constructor(){this.activeTargetIds=hre()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lre{constructor(e,i,d,_,B){this.window=e,this.Yn=i,this.persistenceKey=d,this.ir=_,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new LR(N1),this.started=!1,this.cr=[];const _t=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=B,this.hr=Rue(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new M4),this.dr=new RegExp(`^firestore_clients_${_t}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${_t}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${_t}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(ga){return`firestore_bundle_loaded_v2_${ga}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,b0.Z)(function*(){const i=yield e.syncEngine.Fs();for(const _ of i){if(_===e.ir)continue;const B=e.getItem(Rue(e.persistenceKey,_));if(B){const _t=iY.tr(_,B);_t&&(e.ar=e.ar.insert(_t.clientId,_t))}}e.yr();const d=e.storage.getItem(e.mr);if(d){const _=e.pr(d);_&&e.Ir(_)}for(const _ of e.cr)e.ur(_);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let i=!1;return this.ar.forEach((d,_)=>{_.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,i,d){this.Er(e,i,d),this.Ar(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){const d=this.storage.getItem(Pre(this.persistenceKey,e));if(d){const _=qZ.tr(e,d);_&&(i=_.state)}}return this.Rr.nr(e),this.yr(),i}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pre(this.persistenceKey,e))}updateQueryState(e,i,d){this.br(e,i,d)}handleUserChange(e,i,d){i.forEach(_=>{this.Ar(_)}),this.currentUser=e,d.forEach(_=>{this.addPendingMutation(_)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const i=this.storage.getItem(e);return rI("SharedClientState","READ",e,i),i}setItem(e,i){rI("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){rI("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var i=this;const d=e;if(d.storageArea===this.storage){if(rI("SharedClientState","EVENT",d.key,d.newValue),d.key===this.hr)return void oO("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,b0.Z)(function*(){if(i.started){if(null!==d.key)if(i.dr.test(d.key)){if(null==d.newValue){const _=i.vr(d.key);return i.Sr(_,null)}{const _=i.Dr(d.key,d.newValue);if(_)return i.Sr(_.clientId,_)}}else if(i._r.test(d.key)){if(null!==d.newValue){const _=i.Cr(d.key,d.newValue);if(_)return i.Nr(_)}}else if(i.wr.test(d.key)){if(null!==d.newValue){const _=i.kr(d.key,d.newValue);if(_)return i.Mr(_)}}else if(d.key===i.mr){if(null!==d.newValue){const _=i.pr(d.newValue);if(_)return i.Ir(_)}}else if(d.key===i.lr){const _=function(B){let _t=X2.A;if(null!=B)try{const ga=JSON.parse(B);f1("number"==typeof ga),_t=ga}catch(ga){oO("SharedClientState","Failed to read sequence number from WebStorage",ga)}return _t}(d.newValue);_!==X2.A&&i.sequenceNumberHandler(_)}else if(d.key===i.gr){const _=i.Or(d.newValue);yield Promise.all(_.map(B=>i.syncEngine.Fr(B)))}}else i.cr.push(d)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,i,d){const _=new y9(this.currentUser,e,i,d),B=Cge(this.persistenceKey,this.currentUser,e);this.setItem(B,_.er())}Ar(e){const i=Cge(this.persistenceKey,this.currentUser,e);this.removeItem(i)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,i,d){const _=Pre(this.persistenceKey,e),B=new qZ(e,i,d);this.setItem(_,B.er())}Vr(e){const i=JSON.stringify(Array.from(e));this.setItem(this.gr,i)}vr(e){const i=this.dr.exec(e);return i?i[1]:null}Dr(e,i){const d=this.vr(e);return iY.tr(d,i)}Cr(e,i){const d=this._r.exec(e),_=Number(d[1]);return y9.tr(new EN(void 0!==d[2]?d[2]:null),_,i)}kr(e,i){const d=this.wr.exec(e),_=Number(d[1]);return qZ.tr(_,i)}pr(e){return xre.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var i=this;return(0,b0.Z)(function*(){if(e.user.uid===i.currentUser.uid)return i.syncEngine.$r(e.batchId,e.state,e.error);rI("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,i){const d=i?this.ar.insert(e,i):this.ar.remove(e),_=this.Tr(this.ar),B=this.Tr(d),_t=[],ga=[];return B.forEach(_h=>{_.has(_h)||_t.push(_h)}),_.forEach(_h=>{B.has(_h)||ga.push(_h)}),this.syncEngine.Lr(_t,ga).then(()=>{this.ar=d})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let i=hre();return e.forEach((d,_)=>{i=i.unionWith(_.activeTargetIds)}),i}}class Oue{constructor(){this.Ur=new M4,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,d){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,i,d){this.qr[e]=i}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new M4,Promise.resolve()}handleUserChange(e,i,d){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wge{Kr(e){}shutdown(){}}class Mre{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){rI("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){rI("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Dve={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Due{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Nve extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,i,d,_,B){const _t=this.ho(e,i);rI("RestConnection","Sending: ",_t,d);const ga={};return this.lo(ga,_,B),this.fo(e,_t,ga,d).then(_h=>(rI("RestConnection","Received: ",_h),_h),_h=>{throw J7("RestConnection",`${e} failed with error: `,_h,"url: ",_t,"request:",d),_h})}_o(e,i,d,_,B){return this.co(e,i,d,_,B)}lo(e,i,d){e["X-Goog-Api-Client"]="gl-js/ fire/"+H8,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((_,B)=>e[B]=_),d&&d.headers.forEach((_,B)=>e[B]=_)}ho(e,i){return`${this.uo}/v1/${i}:${Dve[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,i,d,_){return new Promise((B,_t)=>{const ga=new hpe;ga.listenOnce(lpe.COMPLETE,()=>{try{switch(ga.getLastErrorCode()){case O4.NO_ERROR:const _g=ga.getResponseJson();rI("Connection","XHR received:",JSON.stringify(_g)),B(_g);break;case O4.TIMEOUT:rI("Connection",'RPC "'+e+'" timed out'),_t(new Q0(C0.DEADLINE_EXCEEDED,"Request time out"));break;case O4.HTTP_ERROR:const l_=ga.getStatus();if(rI("Connection",'RPC "'+e+'" failed with status:',l_,"response text:",ga.getResponseText()),l_>0){const f_=ga.getResponseJson().error;if(f_&&f_.status&&f_.message){const R_=function(V_){const Y_=V_.toLowerCase().replace(/_/g,"-");return Object.values(C0).indexOf(Y_)>=0?Y_:C0.UNKNOWN}(f_.status);_t(new Q0(R_,f_.message))}else _t(new Q0(C0.UNKNOWN,"Server responded with status "+ga.getStatus()))}else _t(new Q0(C0.UNAVAILABLE,"Connection failed."));break;default:kI()}}finally{rI("Connection",'RPC "'+e+'" completed.')}});const _h=JSON.stringify(_);ga.send(i,"POST",_h,d,15)})}wo(e,i,d){const _=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],B=Kne(),_t=Q8(),ga={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(ga.xmlHttpFactory=new dpe({})),this.lo(ga.initMessageHeaders,i,d),(0,M_.uI)()||(0,M_.b$)()||(0,M_.d)()||(0,M_.w1)()||(0,M_.Mn)()||(0,M_.ru)()||(ga.httpHeadersOverwriteParam="$httpHeaders");const _h=_.join("");rI("Connection","Creating WebChannel: "+_h,ga);const _g=B.createWebChannel(_h,ga);let l_=!1,f_=!1;const R_=new Due({Jr:Y_=>{f_?rI("Connection","Not sending because WebChannel is closed:",Y_):(l_||(rI("Connection","Opening WebChannel transport."),_g.open(),l_=!0),rI("Connection","WebChannel sending:",Y_),_g.send(Y_))},Yr:()=>_g.close()}),V_=(Y_,R0,V0)=>{Y_.listen(R0,J0=>{try{V0(J0)}catch(MI){setTimeout(()=>{throw MI},0)}})};return V_(_g,Y7.EventType.OPEN,()=>{f_||rI("Connection","WebChannel transport opened.")}),V_(_g,Y7.EventType.CLOSE,()=>{f_||(f_=!0,rI("Connection","WebChannel transport closed"),R_.ro())}),V_(_g,Y7.EventType.ERROR,Y_=>{f_||(f_=!0,J7("Connection","WebChannel transport errored:",Y_),R_.ro(new Q0(C0.UNAVAILABLE,"The operation could not be completed")))}),V_(_g,Y7.EventType.MESSAGE,Y_=>{var R0;if(!f_){const V0=Y_.data[0];f1(!!V0);const J0=V0,MI=J0.error||(null===(R0=J0[0])||void 0===R0?void 0:R0.error);if(MI){rI("Connection","WebChannel received error:",MI);const LI=MI.status;let DI=function(H1){const BR=aO[H1];if(void 0!==BR)return Zce(BR)}(LI),y1=MI.message;void 0===DI&&(DI=C0.INTERNAL,y1="Unknown error status: "+LI+" with message "+MI.message),f_=!0,R_.ro(new Q0(DI,y1)),_g.close()}else rI("Connection","WebChannel received:",V0),R_.oo(V0)}}),V_(_t,Sce.STAT_EVENT,Y_=>{Y_.stat===Rce.PROXY?rI("Connection","Detected buffering proxy"):Y_.stat===Rce.NOPROXY&&rI("Connection","Detected no buffering proxy")}),setTimeout(()=>{R_.io()},0),R_}}function P6(){return"undefined"!=typeof window?window:null}function WZ(){return"undefined"!=typeof document?document:null}function YU(o){return new eve(o,!0)}class dG{constructor(e,i,d=1e3,_=1.5,B=6e4){this.Yn=e,this.timerId=i,this.mo=d,this.yo=_,this.po=B,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const i=Math.floor(this.Io+this.bo()),d=Math.max(0,Date.now()-this.Eo),_=Math.max(0,i-d);_>0&&rI("ExponentialBackoff",`Backing off for ${_} ms (base delay: ${this.Io} ms, delay with jitter: ${i} ms, last attempt: ${d} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,_,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class cO{constructor(e,i,d,_,B,_t,ga,_h){this.Yn=e,this.Vo=d,this.vo=_,this.So=B,this.authCredentialsProvider=_t,this.appCheckCredentialsProvider=ga,this.listener=_h,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new dG(e,i)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,b0.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,b0.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,i){var d=this;return(0,b0.Z)(function*(){d.Uo(),d.qo(),d.No.cancel(),d.Do++,4!==e?d.No.reset():i&&i.code===C0.RESOURCE_EXHAUSTED?(oO(i.toString()),oO("Using maximum backoff delay to prevent overloading the backend."),d.No.Ao()):i&&i.code===C0.UNAUTHENTICATED&&3!==d.state&&(d.authCredentialsProvider.invalidateToken(),d.appCheckCredentialsProvider.invalidateToken()),null!==d.stream&&(d.Ko(),d.stream.close(),d.stream=null),d.state=e,yield d.listener.eo(i)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),i=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([d,_])=>{this.Do===i&&this.Qo(d,_)},d=>{e(()=>{const _=new Q0(C0.UNKNOWN,"Fetching auth token failed: "+d.message);return this.jo(_)})})}Qo(e,i){const d=this.Go(this.Do);this.stream=this.Wo(e,i),this.stream.Xr(()=>{d(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(_=>{d(()=>this.jo(_))}),this.stream.onMessage(_=>{d(()=>this.onMessage(_))})}Oo(){var e=this;this.state=5,this.No.Ro((0,b0.Z)(function*(){e.state=0,e.start()}))}jo(e){return rI("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return i=>{this.Yn.enqueueAndForget(()=>this.Do===e?i():(rI("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kve extends cO{constructor(e,i,d,_,B,_t){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,d,_,_t),this.M=B}Wo(e,i){return this.So.wo("Listen",e,i)}onMessage(e){this.No.reset();const i=function nve(o,e){let i;if("targetChange"in e){const d="NO_CHANGE"===(_h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_h?1:"REMOVE"===_h?2:"CURRENT"===_h?3:"RESET"===_h?4:kI(),_=e.targetChange.targetIds||[],B=function(_h,_g){return _h.N?(f1(void 0===_g||"string"==typeof _g),xR.fromBase64String(_g||"")):(f1(void 0===_g||_g instanceof Uint8Array),xR.fromUint8Array(_g||new Uint8Array))}(o,e.targetChange.resumeToken),_t=e.targetChange.cause,ga=_t&&function(_h){const _g=void 0===_h.code?C0.UNKNOWN:Zce(_h.code);return new Q0(_g,_h.message||"")}(_t);i=new eue(d,_,B,ga||null)}else if("documentChange"in e){const d=e.documentChange,_=k4(o,d.document.name),B=KO(d.document.updateTime),_t=new t2({mapValue:{fields:d.document.fields}}),ga=ES.newFoundDocument(_,B,_t);i=new T6(d.targetIds||[],d.removedTargetIds||[],ga.key,ga)}else if("documentDelete"in e){const d=e.documentDelete,_=k4(o,d.document),B=d.readTime?KO(d.readTime):s1.min(),_t=ES.newNoDocument(_,B);i=new T6([],d.removedTargetIds||[],_t.key,_t)}else if("documentRemove"in e){const d=e.documentRemove,_=k4(o,d.document);i=new T6([],d.removedTargetIds||[],_,null)}else{if(!("filter"in e))return kI();{const d=e.filter,B=new z_e(d.count||0);i=new Gpe(d.targetId,B)}}var _h;return i}(this.M,e),d=function(_){if(!("targetChange"in _))return s1.min();const B=_.targetChange;return B.targetIds&&B.targetIds.length?s1.min():B.readTime?KO(B.readTime):s1.min()}(e);return this.listener.zo(i,d)}Ho(e){const i={};i.database=LZ(this.M),i.addTarget=function(_,B){let _t;const ga=B.target;return _t=Xne(ga)?{documents:Ype(_,ga)}:{query:Jpe(_,ga)},_t.targetId=B.targetId,B.resumeToken.approximateByteSize()>0?_t.resumeToken=Hpe(_,B.resumeToken):B.snapshotVersion.compareTo(s1.min())>0&&(_t.readTime=ZK(_,B.snapshotVersion.toTimestamp())),_t}(this.M,e);const d=function oue(o,e){const i=function(d,_){switch(_){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kI()}}(0,e.purpose);return null==i?null:{"goog-listen-tags":i}}(0,e);d&&(i.labels=d),this.Lo(i)}Jo(e){const i={};i.database=LZ(this.M),i.removeTarget=e,this.Lo(i)}}class pS extends cO{constructor(e,i,d,_,B,_t){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,d,_,_t),this.M=B,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,i){return this.So.wo("Write",e,i)}onMessage(e){if(f1(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const i=function rve(o,e){return o&&o.length>0?(f1(void 0!==e),o.map(i=>function(d,_){let B=KO(d.updateTime?d.updateTime:_);return B.isEqual(s1.min())&&(B=KO(_)),new Lpe(B,d.transformResults||[])}(i,e))):[]}(e.writeResults,e.commitTime),d=KO(e.commitTime);return this.listener.tu(d,i)}return f1(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=LZ(this.M),this.Lo(e)}Zo(e){const i={streamToken:this.lastStreamToken,writes:e.map(d=>_z(this.M,d))};this.Lo(i)}}class Tge extends class{}{constructor(e,i,d,_){super(),this.authCredentials=e,this.appCheckCredentials=i,this.So=d,this.M=_,this.su=!1}iu(){if(this.su)throw new Q0(C0.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,i,d){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,B])=>this.So.co(e,i,d,_,B)).catch(_=>{throw"FirebaseError"===_.name?(_.code===C0.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Q0(C0.UNKNOWN,_.toString())})}_o(e,i,d){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,B])=>this.So._o(e,i,d,_,B)).catch(_=>{throw"FirebaseError"===_.name?(_.code===C0.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Q0(C0.UNKNOWN,_.toString())})}terminate(){this.su=!0}}class Bre{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const i=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(oO(i),this.uu=!1):rI("OnlineStateTracker",i)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Sge{constructor(e,i,d,_,B){var _t=this;this.localStore=e,this.datastore=i,this.asyncQueue=d,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=B,this.gu.Kr(ga=>{d.enqueueAndForget((0,b0.Z)(function*(){var _h;BM(_t)&&(rI("RemoteStore","Restarting streams for network reachability change."),yield(_h=(0,b0.Z)(function*(_g){const l_=EI(_g);l_.wu.add(4),yield oT(l_),l_.yu.set("Unknown"),l_.wu.delete(4),yield JU(l_)}),function(_g){return _h.apply(this,arguments)})(_t))}))}),this.yu=new Bre(d,_)}}function JU(o){return o2.apply(this,arguments)}function o2(){return o2=(0,b0.Z)(function*(o){if(BM(o))for(const e of o.mu)yield e(!0)}),o2.apply(this,arguments)}function oT(o){return x6.apply(this,arguments)}function x6(){return x6=(0,b0.Z)(function*(o){for(const e of o.mu)yield e(!1)}),x6.apply(this,arguments)}function E9(o,e){const i=EI(o);i._u.has(e.targetId)||(i._u.set(e.targetId,e),Fre(i)?gR(i):aY(i).Mo()&&Ure(i,e))}function I9(o,e){const i=EI(o),d=aY(i);i._u.delete(e),d.Mo()&&eL(i,e),0===i._u.size&&(d.Mo()?d.$o():BM(i)&&i.yu.set("Unknown"))}function Ure(o,e){o.pu.Z(e.targetId),aY(o).Ho(e)}function eL(o,e){o.pu.Z(e),aY(o).Jo(e)}function gR(o){o.pu=new Z_e({getRemoteKeysForTarget:e=>o.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>o._u.get(e)||null}),aY(o).start(),o.yu.au()}function Fre(o){return BM(o)&&!aY(o).ko()&&o._u.size>0}function BM(o){return 0===EI(o).wu.size}function jre(o){o.pu=void 0}function Vre(o){return Gre.apply(this,arguments)}function Gre(){return Gre=(0,b0.Z)(function*(o){o._u.forEach((e,i)=>{Ure(o,e)})}),Gre.apply(this,arguments)}function Rge(o,e){return L6.apply(this,arguments)}function L6(){return L6=(0,b0.Z)(function*(o,e){jre(o),Fre(o)?(o.yu.lu(e),gR(o)):o.yu.set("Unknown")}),L6.apply(this,arguments)}function Oge(o,e,i){return Nue.apply(this,arguments)}function Nue(){return Nue=(0,b0.Z)(function*(o,e,i){if(o.yu.set("Online"),e instanceof eue&&2===e.state&&e.cause)try{yield(d=(0,b0.Z)(function*(_,B){const _t=B.cause;for(const ga of B.targetIds)_._u.has(ga)&&(yield _.remoteSyncer.rejectListen(ga,_t),_._u.delete(ga),_.pu.removeTarget(ga))}),function(_,B){return d.apply(this,arguments)})(o,e)}catch(d){rI("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),d),yield Qre(o,d)}else if(e instanceof T6?o.pu.ut(e):e instanceof Gpe?o.pu._t(e):o.pu.ht(e),!i.isEqual(s1.min()))try{const d=yield Cue(o.localStore);i.compareTo(d)>=0&&(yield function(_,B){const _t=_.pu.yt(B);return _t.targetChanges.forEach((ga,_h)=>{if(ga.resumeToken.approximateByteSize()>0){const _g=_._u.get(_h);_g&&_._u.set(_h,_g.withResumeToken(ga.resumeToken,B))}}),_t.targetMismatches.forEach(ga=>{const _h=_._u.get(ga);if(!_h)return;_._u.set(ga,_h.withResumeToken(xR.EMPTY_BYTE_STRING,_h.snapshotVersion)),eL(_,ga);const _g=new eG(_h.target,ga,1,_h.sequenceNumber);Ure(_,_g)}),_.remoteSyncer.applyRemoteEvent(_t)}(o,i))}catch(d){rI("RemoteStore","Failed to raise snapshot:",d),yield Qre(o,d)}var d}),Nue.apply(this,arguments)}function Qre(o,e,i){return Hre.apply(this,arguments)}function Hre(){return Hre=(0,b0.Z)(function*(o,e,i){if(!l9(e))throw e;o.wu.add(1),yield oT(o),o.yu.set("Offline"),i||(i=()=>Cue(o.localStore)),o.asyncQueue.enqueueRetryable((0,b0.Z)(function*(){rI("RemoteStore","Retrying IndexedDB access"),yield i(),o.wu.delete(1),yield JU(o)}))}),Hre.apply(this,arguments)}function kue(o,e){return e().catch(i=>Qre(o,i,e))}function oY(o){return Pue.apply(this,arguments)}function Pue(){return Pue=(0,b0.Z)(function*(o){const e=EI(o),i=hG(e);let d=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Pve(e);)try{const _=yield yge(e.localStore,d);if(null===_){0===e.du.length&&i.$o();break}d=_.batchId,xue(e,_)}catch(_){yield Qre(e,_)}Dge(e)&&Nge(e)}),Pue.apply(this,arguments)}function Pve(o){return BM(o)&&o.du.length<10}function xue(o,e){o.du.push(e);const i=hG(o);i.Mo()&&i.Xo&&i.Zo(e.mutations)}function Dge(o){return BM(o)&&!hG(o).ko()&&o.du.length>0}function Nge(o){hG(o).start()}function xve(o){return Lue.apply(this,arguments)}function Lue(){return Lue=(0,b0.Z)(function*(o){hG(o).nu()}),Lue.apply(this,arguments)}function sY(o){return qre.apply(this,arguments)}function qre(){return qre=(0,b0.Z)(function*(o){const e=hG(o);for(const i of o.du)e.Zo(i.mutations)}),qre.apply(this,arguments)}function Lve(o,e,i){return Mue.apply(this,arguments)}function Mue(){return Mue=(0,b0.Z)(function*(o,e,i){const d=o.du.shift(),_=uue.from(d,e,i);yield kue(o,()=>o.remoteSyncer.applySuccessfulWrite(_)),yield oY(o)}),Mue.apply(this,arguments)}function Mve(o,e){return Bue.apply(this,arguments)}function Bue(){return Bue=(0,b0.Z)(function*(o,e){var i;e&&hG(o).Xo&&(yield(i=(0,b0.Z)(function*(d,_){if(jpe(B=_.code)&&B!==C0.ABORTED){const _t=d.du.shift();hG(d).Fo(),yield kue(d,()=>d.remoteSyncer.rejectFailedWrite(_t.batchId,_)),yield oY(d)}var B}),function(d,_){return i.apply(this,arguments)})(o,e)),Dge(o)&&Nge(o)}),Bue.apply(this,arguments)}function kge(o,e){return Uue.apply(this,arguments)}function Uue(){return Uue=(0,b0.Z)(function*(o,e){const i=EI(o);i.asyncQueue.verifyOperationInProgress(),rI("RemoteStore","RemoteStore received new credentials");const d=BM(i);i.wu.add(3),yield oT(i),d&&i.yu.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(e),i.wu.delete(3),yield JU(i)}),Uue.apply(this,arguments)}function Fue(o,e){return jue.apply(this,arguments)}function jue(){return jue=(0,b0.Z)(function*(o,e){const i=EI(o);e?(i.wu.delete(2),yield JU(i)):e||(i.wu.add(2),yield oT(i),i.yu.set("Unknown"))}),jue.apply(this,arguments)}function aY(o){return o.Iu||(o.Iu=function(e,i,d){const _=EI(e);return _.iu(),new kve(i,_.So,_.authCredentials,_.appCheckCredentials,_.M,d)}(o.datastore,o.asyncQueue,{Xr:Vre.bind(null,o),eo:Rge.bind(null,o),zo:Oge.bind(null,o)}),o.mu.push(function(){var e=(0,b0.Z)(function*(i){i?(o.Iu.Fo(),Fre(o)?gR(o):o.yu.set("Unknown")):(yield o.Iu.stop(),jre(o))});return function(i){return e.apply(this,arguments)}}())),o.Iu}function hG(o){return o.Tu||(o.Tu=function(e,i,d){const _=EI(e);return _.iu(),new pS(i,_.So,_.authCredentials,_.appCheckCredentials,_.M,d)}(o.datastore,o.asyncQueue,{Xr:xve.bind(null,o),eo:Mve.bind(null,o),eu:sY.bind(null,o),tu:Lve.bind(null,o)}),o.mu.push(function(){var e=(0,b0.Z)(function*(i){i?(o.Tu.Fo(),yield oY(o)):(yield o.Tu.stop(),o.du.length>0&&(rI("RemoteStore",`Stopping write stream with ${o.du.length} pending writes`),o.du=[]))});return function(i){return e.apply(this,arguments)}}())),o.Tu}class Vue{constructor(e,i,d,_,B){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=d,this.op=_,this.removalCallback=B,this.deferred=new kR,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(_t=>{})}static createAndSchedule(e,i,d,_,B){const _t=Date.now()+d,ga=new Vue(e,i,_t,_,B);return ga.start(d),ga}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Q0(C0.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b9(o,e){if(oO("AsyncQueue",`${e}: ${o}`),l9(o))return new Q0(C0.UNAVAILABLE,`${e}: ${o}`);throw o}class cY{constructor(e){this.comparator=e?(i,d)=>e(i,d)||uI.comparator(i.key,d.key):(i,d)=>uI.comparator(i.key,d.key),this.keyedMap=dre(),this.sortedSet=new LR(this.comparator)}static emptySet(e){return new cY(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,d)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof cY)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),d=e.sortedSet.getIterator();for(;i.hasNext();){const _=i.getNext().key,B=d.getNext().key;if(!_.isEqual(B))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){const d=new cY;return d.comparator=this.comparator,d.keyedMap=e,d.sortedSet=i,d}}class Pge{constructor(){this.Eu=new LR(uI.comparator)}track(e){const i=e.doc.key,d=this.Eu.get(i);d?0!==e.type&&3===d.type?this.Eu=this.Eu.insert(i,e):3===e.type&&1!==d.type?this.Eu=this.Eu.insert(i,{type:d.type,doc:e.doc}):2===e.type&&2===d.type?this.Eu=this.Eu.insert(i,{type:2,doc:e.doc}):2===e.type&&0===d.type?this.Eu=this.Eu.insert(i,{type:0,doc:e.doc}):1===e.type&&0===d.type?this.Eu=this.Eu.remove(i):1===e.type&&2===d.type?this.Eu=this.Eu.insert(i,{type:1,doc:d.doc}):0===e.type&&1===d.type?this.Eu=this.Eu.insert(i,{type:2,doc:e.doc}):kI():this.Eu=this.Eu.insert(i,e)}Au(){const e=[];return this.Eu.inorderTraversal((i,d)=>{e.push(d)}),e}}class C9{constructor(e,i,d,_,B,_t,ga,_h){this.query=e,this.docs=i,this.oldDocs=d,this.docChanges=_,this.mutatedKeys=B,this.fromCache=_t,this.syncStateChanged=ga,this.excludesMetadataChanges=_h}static fromInitialDocuments(e,i,d,_){const B=[];return i.forEach(_t=>{B.push({type:0,doc:_t})}),new C9(e,i,cY.emptySet(i),B,d,_,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Z8(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,d=e.docChanges;if(i.length!==d.length)return!1;for(let _=0;_<i.length;_++)if(i[_].type!==d[_].type||!i[_].doc.isEqual(d[_].doc))return!1;return!0}}class w9{constructor(){this.Ru=void 0,this.listeners=[]}}class Gue{constructor(){this.queries=new X8(e=>Ope(e),Z8),this.onlineState="Unknown",this.bu=new Set}}function Que(o,e){return Wre.apply(this,arguments)}function Wre(){return Wre=(0,b0.Z)(function*(o,e){const i=EI(o),d=e.query;let _=!1,B=i.queries.get(d);if(B||(_=!0,B=new w9),_)try{B.Ru=yield i.onListen(d)}catch(_t){const ga=b9(_t,`Initialization of query '${ire(e.query)}' failed`);return void e.onError(ga)}i.queries.set(d,B),B.listeners.push(e),e.Pu(i.onlineState),B.Ru&&e.Vu(B.Ru)&&KZ(i)}),Wre.apply(this,arguments)}function Kre(o,e){return zre.apply(this,arguments)}function zre(){return zre=(0,b0.Z)(function*(o,e){const i=EI(o),d=e.query;let _=!1;const B=i.queries.get(d);if(B){const _t=B.listeners.indexOf(e);_t>=0&&(B.listeners.splice(_t,1),_=0===B.listeners.length)}if(_)return i.queries.delete(d),i.onUnlisten(d)}),zre.apply(this,arguments)}function Bve(o,e){const i=EI(o);let d=!1;for(const _ of e){const _t=i.queries.get(_.query);if(_t){for(const ga of _t.listeners)ga.Vu(_)&&(d=!0);_t.Ru=_}}d&&KZ(i)}function uY(o,e,i){const d=EI(o),_=d.queries.get(e);if(_)for(const B of _.listeners)B.onError(i);d.queries.delete(e)}function KZ(o){o.bu.forEach(e=>{e.next()})}class Yre{constructor(e,i,d){this.query=e,this.vu=i,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=d||{}}Vu(e){if(!this.options.includeMetadataChanges){const d=[];for(const _ of e.docChanges)3!==_.type&&d.push(_);e=new C9(e.query,e.docs,e.oldDocs,d,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let i=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),i=!0):this.xu(e,this.onlineState)&&(this.Nu(e),i=!0),this.Du=e,i}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let i=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),i=!0),i}xu(e,i){return!e.fromCache||!(this.options.ku&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=C9.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class xge{constructor(e,i){this.payload=e,this.byteLength=i}Mu(){return"metadata"in this.payload}}class M6{constructor(e){this.M=e}wi(e){return k4(this.M,e)}mi(e){return e.metadata.exists?S6(this.M,e.document,!1):ES.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return KO(e)}}class Uve{constructor(e,i,d){this.Ou=e,this.localStore=i,this.M=d,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lge(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i;const d=T1.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(d.get(d.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}$u(e){const i=new Map,d=new M6(this.M);for(const _ of e)if(_.metadata.queries){const B=d.wi(_.metadata.name);for(const _t of _.metadata.queries){const ga=(i.get(_t)||yT()).add(B);i.set(_t,ga)}}return i}complete(){var e=this;return(0,b0.Z)(function*(){const i=yield function Ege(o,e,i,d){return kre.apply(this,arguments)}(e.localStore,new M6(e.M),e.documents,e.Ou.id),d=e.$u(e.documents);for(const _ of e.queries)yield Sue(e.localStore,_,d.get(_.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:i}})()}}function Lge(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class Mge{constructor(e){this.key=e}}class Hue{constructor(e){this.key=e}}class Bge{constructor(e,i){this.query=e,this.Uu=i,this.qu=null,this.current=!1,this.Ku=yT(),this.mutatedKeys=yT(),this.Gu=Dpe(e),this.Qu=new cY(this.Gu)}get ju(){return this.Uu}Wu(e,i){const d=i?i.zu:new Pge,_=i?i.Qu:this.Qu;let B=i?i.mutatedKeys:this.mutatedKeys,_t=_,ga=!1;const _h="F"===this.query.limitType&&_.size===this.query.limit?_.last():null,_g="L"===this.query.limitType&&_.size===this.query.limit?_.first():null;if(e.inorderTraversal((l_,f_)=>{const R_=_.get(l_),V_=ore(this.query,f_)?f_:null,Y_=!!R_&&this.mutatedKeys.has(R_.key),R0=!!V_&&(V_.hasLocalMutations||this.mutatedKeys.has(V_.key)&&V_.hasCommittedMutations);let V0=!1;R_&&V_?R_.data.isEqual(V_.data)?Y_!==R0&&(d.track({type:3,doc:V_}),V0=!0):this.Hu(R_,V_)||(d.track({type:2,doc:V_}),V0=!0,(_h&&this.Gu(V_,_h)>0||_g&&this.Gu(V_,_g)<0)&&(ga=!0)):!R_&&V_?(d.track({type:0,doc:V_}),V0=!0):R_&&!V_&&(d.track({type:1,doc:R_}),V0=!0,(_h||_g)&&(ga=!0)),V0&&(V_?(_t=_t.add(V_),B=R0?B.add(l_):B.delete(l_)):(_t=_t.delete(l_),B=B.delete(l_)))}),null!==this.query.limit)for(;_t.size>this.query.limit;){const l_="F"===this.query.limitType?_t.last():_t.first();_t=_t.delete(l_.key),B=B.delete(l_.key),d.track({type:1,doc:l_})}return{Qu:_t,zu:d,ii:ga,mutatedKeys:B}}Hu(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,d){const _=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const B=e.zu.Au();B.sort((_g,l_)=>function(f_,R_){const V_=Y_=>{switch(Y_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kI()}};return V_(f_)-V_(R_)}(_g.type,l_.type)||this.Gu(_g.doc,l_.doc)),this.Ju(d);const _t=i?this.Yu():[],ga=0===this.Ku.size&&this.current?1:0,_h=ga!==this.qu;return this.qu=ga,0!==B.length||_h?{snapshot:new C9(this.query,e.Qu,_,B,e.mutatedKeys,0===ga,_h,!1),Xu:_t}:{Xu:_t}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Pge,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(i=>this.Uu=this.Uu.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Uu=this.Uu.delete(i)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=yT(),this.Qu.forEach(d=>{this.Zu(d.key)&&(this.Ku=this.Ku.add(d.key))});const i=[];return e.forEach(d=>{this.Ku.has(d)||i.push(new Hue(d))}),this.Ku.forEach(d=>{e.has(d)||i.push(new Mge(d))}),i}ta(e){this.Uu=e._i,this.Ku=yT();const i=this.Wu(e.documents);return this.applyChanges(i,!0)}ea(){return C9.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Fve{constructor(e,i,d){this.query=e,this.targetId=i,this.view=d}}class jve{constructor(e){this.key=e,this.na=!1}}class que{constructor(e,i,d,_,B,_t){this.localStore=e,this.remoteStore=i,this.eventManager=d,this.sharedClientState=_,this.currentUser=B,this.maxConcurrentLimboResolutions=_t,this.sa={},this.ia=new X8(ga=>Ope(ga),Z8),this.ra=new Map,this.oa=new Set,this.ua=new LR(uI.comparator),this.aa=new Map,this.ca=new tP,this.ha={},this.la=new Map,this.fa=D6.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Jre(o,e){return zZ.apply(this,arguments)}function zZ(){return zZ=(0,b0.Z)(function*(o,e){const i=ole(o);let d,_;const B=i.ia.get(e);if(B)d=B.targetId,i.sharedClientState.addLocalQueryTarget(d),_=B.view.ea();else{const _t=yield A9(i.localStore,PM(e));i.isPrimaryClient&&E9(i.remoteStore,_t);const ga=i.sharedClientState.addLocalQueryTarget(_t.targetId);d=_t.targetId,_=yield lY(i,e,d,"current"===ga)}return _}),zZ.apply(this,arguments)}function lY(o,e,i,d){return UM.apply(this,arguments)}function UM(){return UM=(0,b0.Z)(function*(o,e,i,d){o._a=(l_,f_,R_)=>{return(V_=(0,b0.Z)(function*(Y_,R0,V0,J0){let MI=R0.view.Wu(V0);MI.ii&&(MI=yield QZ(Y_.localStore,R0.query,!1).then(({documents:y1})=>R0.view.Wu(y1,MI)));const LI=J0&&J0.targetChanges.get(R0.targetId),DI=R0.view.applyChanges(MI,Y_.isPrimaryClient,LI);return Zue(Y_,R0.targetId,DI.Xu),DI.snapshot}),function(Y_,R0,V0,J0){return V_.apply(this,arguments)})(o,l_,f_,R_);var V_};const _=yield QZ(o.localStore,e,!0),B=new Bge(e,_._i),_t=B.Wu(_.documents),ga=w6.createSynthesizedTargetChangeForCurrentChange(i,d&&"Offline"!==o.onlineState),_h=B.applyChanges(_t,o.isPrimaryClient,ga);Zue(o,i,_h.Xu);const _g=new Fve(e,i,B);return o.ia.set(e,_g),o.ra.has(i)?o.ra.get(i).push(e):o.ra.set(i,[e]),_h.snapshot}),UM.apply(this,arguments)}function Uge(o,e){return $re.apply(this,arguments)}function $re(){return $re=(0,b0.Z)(function*(o,e){const i=EI(o),d=i.ia.get(e),_=i.ra.get(d.targetId);if(_.length>1)return i.ra.set(d.targetId,_.filter(B=>!Z8(B,e))),void i.ia.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(d.targetId),i.sharedClientState.isActiveQueryTarget(d.targetId)||(yield _9(i.localStore,d.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(d.targetId),I9(i.remoteStore,d.targetId),dY(i,d.targetId)}).catch(k6))):(dY(i,d.targetId),yield _9(i.localStore,d.targetId,!0))}),$re.apply(this,arguments)}function Wue(){return Wue=(0,b0.Z)(function*(o,e,i){const d=oie(o);try{const _=yield function(B,_t){const ga=EI(B),_h=PR.now(),_g=_t.reduce((f_,R_)=>f_.add(R_.key),yT());let l_;return ga.persistence.runTransaction("Locally write mutations","readwrite",f_=>ga.fi.Ks(f_,_g).next(R_=>{l_=R_;const V_=[];for(const Y_ of _t){const R0=K_e(Y_,l_.get(Y_.key));null!=R0&&V_.push(new c9(Y_.key,R0,Cpe(R0.value.mapValue),sO.exists(!0)))}return ga.Bs.addMutationBatch(f_,_h,V_,_t)})).then(f_=>(f_.applyToLocalDocumentSet(l_),{batchId:f_.batchId,changes:l_}))}(d.localStore,e);d.sharedClientState.addPendingMutation(_.batchId),function(B,_t,ga){let _h=B.ha[B.currentUser.toKey()];_h||(_h=new LR(N1)),_h=_h.insert(_t,ga),B.ha[B.currentUser.toKey()]=_h}(d,_.batchId,i),yield B4(d,_.changes),yield oY(d.remoteStore)}catch(_){const B=b9(_,"Failed to persist write");i.reject(B)}}),Wue.apply(this,arguments)}function Fge(o,e){return YZ.apply(this,arguments)}function YZ(){return YZ=(0,b0.Z)(function*(o,e){const i=EI(o);try{const d=yield vge(i.localStore,e);e.targetChanges.forEach((_,B)=>{const _t=i.aa.get(B);_t&&(f1(_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size<=1),_.addedDocuments.size>0?_t.na=!0:_.modifiedDocuments.size>0?f1(_t.na):_.removedDocuments.size>0&&(f1(_t.na),_t.na=!1))}),yield B4(i,d,e)}catch(d){yield k6(d)}}),YZ.apply(this,arguments)}function Kue(o,e,i){const d=EI(o);if(d.isPrimaryClient&&0===i||!d.isPrimaryClient&&1===i){const _=[];d.ia.forEach((B,_t)=>{const ga=_t.view.Pu(e);ga.snapshot&&_.push(ga.snapshot)}),function(B,_t){const ga=EI(B);ga.onlineState=_t;let _h=!1;ga.queries.forEach((_g,l_)=>{for(const f_ of l_.listeners)f_.Pu(_t)&&(_h=!0)}),_h&&KZ(ga)}(d.eventManager,e),_.length&&d.sa.zo(_),d.onlineState=e,d.isPrimaryClient&&d.sharedClientState.setOnlineState(e)}}function zue(o,e,i){return Yue.apply(this,arguments)}function Yue(){return Yue=(0,b0.Z)(function*(o,e,i){const d=EI(o);d.sharedClientState.updateQueryState(e,"rejected",i);const _=d.aa.get(e),B=_&&_.key;if(B){let _t=new LR(uI.comparator);_t=_t.insert(B,ES.newNoDocument(B,s1.min()));const ga=yT().add(B),_h=new PZ(s1.min(),new Map,new $T(N1),_t,ga);yield Fge(d,_h),d.ua=d.ua.remove(B),d.aa.delete(e),hY(d)}else yield _9(d.localStore,e,!1).then(()=>dY(d,e,i)).catch(k6)}),Yue.apply(this,arguments)}function Gve(o,e){return Jue.apply(this,arguments)}function Jue(){return Jue=(0,b0.Z)(function*(o,e){const i=EI(o),d=e.batch.batchId;try{const _=yield _ge(i.localStore,e);JZ(i,d,null),Xre(i,d),i.sharedClientState.updateMutationState(d,"acknowledged"),yield B4(i,_)}catch(_){yield k6(_)}}),Jue.apply(this,arguments)}function Qve(o,e,i){return Zre.apply(this,arguments)}function Zre(){return Zre=(0,b0.Z)(function*(o,e,i){const d=EI(o);try{const _=yield function(B,_t){const ga=EI(B);return ga.persistence.runTransaction("Reject batch","readwrite-primary",_h=>{let _g;return ga.Bs.lookupMutationBatch(_h,_t).next(l_=>(f1(null!==l_),_g=l_.keys(),ga.Bs.removeMutationBatch(_h,l_))).next(()=>ga.Bs.performConsistencyCheck(_h)).next(()=>ga.fi.Ks(_h,_g))})}(d.localStore,e);JZ(d,e,i),Xre(d,e),d.sharedClientState.updateMutationState(e,"rejected",i),yield B4(d,_)}catch(_){yield k6(_)}}),Zre.apply(this,arguments)}function $ue(){return $ue=(0,b0.Z)(function*(o,e){const i=EI(o);BM(i.remoteStore)||rI("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const d=yield function(B){const _t=EI(B);return _t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",ga=>_t.Bs.getHighestUnacknowledgedBatchId(ga))}(i.localStore);if(-1===d)return void e.resolve();const _=i.la.get(d)||[];_.push(e),i.la.set(d,_)}catch(d){const _=b9(d,"Initialization of waitForPendingWrites() operation failed");e.reject(_)}}),$ue.apply(this,arguments)}function Xre(o,e){(o.la.get(e)||[]).forEach(i=>{i.resolve()}),o.la.delete(e)}function JZ(o,e,i){const d=EI(o);let _=d.ha[d.currentUser.toKey()];if(_){const B=_.get(e);B&&(i?B.reject(i):B.resolve(),_=_.remove(e)),d.ha[d.currentUser.toKey()]=_}}function dY(o,e,i=null){o.sharedClientState.removeLocalQueryTarget(e);for(const d of o.ra.get(e))o.ia.delete(d),i&&o.sa.wa(d,i);o.ra.delete(e),o.isPrimaryClient&&o.ca.vi(e).forEach(d=>{o.ca.containsKey(d)||T9(o,d)})}function T9(o,e){o.oa.delete(e.path.canonicalString());const i=o.ua.get(e);null!==i&&(I9(o.remoteStore,i),o.ua=o.ua.remove(e),o.aa.delete(i),hY(o))}function Zue(o,e,i){for(const d of i)d instanceof Mge?(o.ca.addReference(d.key,e),Hve(o,d)):d instanceof Hue?(rI("SyncEngine","Document no longer in limbo: "+d.key),o.ca.removeReference(d.key,e),o.ca.containsKey(d.key)||T9(o,d.key)):kI()}function Hve(o,e){const i=e.key,d=i.path.canonicalString();o.ua.get(i)||o.oa.has(d)||(rI("SyncEngine","New document in limbo: "+i),o.oa.add(d),hY(o))}function hY(o){for(;o.oa.size>0&&o.ua.size<o.maxConcurrentLimboResolutions;){const e=o.oa.values().next().value;o.oa.delete(e);const i=new uI(T1.fromString(e)),d=o.fa.next();o.aa.set(d,new jve(i)),o.ua=o.ua.insert(i,d),E9(o.remoteStore,new eG(PM(KK(i.path)),d,2,X2.A))}}function B4(o,e,i){return eie.apply(this,arguments)}function eie(){return eie=(0,b0.Z)(function*(o,e,i){const d=EI(o),_=[],B=[],_t=[];var ga;d.ia.isEmpty()||(d.ia.forEach((ga,_h)=>{_t.push(d._a(_h,e,i).then(_g=>{if(_g){d.isPrimaryClient&&d.sharedClientState.updateQueryState(_h.targetId,_g.fromCache?"not-current":"current"),_.push(_g);const l_=Ore.Ys(_h.targetId,_g);B.push(l_)}}))}),yield Promise.all(_t),d.sa.zo(_),yield(ga=(0,b0.Z)(function*(_h,_g){const l_=EI(_h);try{yield l_.persistence.runTransaction("notifyLocalViewChanges","readwrite",f_=>k0.forEach(_g,R_=>k0.forEach(R_.Hs,V_=>l_.persistence.referenceDelegate.addReference(f_,R_.targetId,V_)).next(()=>k0.forEach(R_.Js,V_=>l_.persistence.referenceDelegate.removeReference(f_,R_.targetId,V_)))))}catch(f_){if(!l9(f_))throw f_;rI("LocalStore","Failed to update sequence numbers: "+f_)}for(const f_ of _g){const R_=f_.targetId;if(!f_.fromCache){const V_=l_.ui.get(R_),R0=V_.withLastLimboFreeSnapshotVersion(V_.snapshotVersion);l_.ui=l_.ui.insert(R_,R0)}}}),function(_h,_g){return ga.apply(this,arguments)})(d.localStore,B))}),eie.apply(this,arguments)}function $U(o,e){return Xue.apply(this,arguments)}function Xue(){return Xue=(0,b0.Z)(function*(o,e){const i=EI(o);if(!i.currentUser.isEqual(e)){rI("SyncEngine","User change. New user:",e.toKey());const d=yield bue(i.localStore,e);i.currentUser=e,(_=i).la.forEach(_t=>{_t.forEach(ga=>{ga.reject(new Q0(C0.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),_.la.clear(),i.sharedClientState.handleUserChange(e,d.removedBatchIds,d.addedBatchIds),yield B4(i,d.di)}var _}),Xue.apply(this,arguments)}function jge(o,e){const i=EI(o),d=i.aa.get(e);if(d&&d.na)return yT().add(d.key);{let _=yT();const B=i.ra.get(e);if(!B)return _;for(const _t of B){const ga=i.ia.get(_t);_=_.unionWith(ga.view.ju)}return _}}function tie(o,e){return S9.apply(this,arguments)}function S9(){return S9=(0,b0.Z)(function*(o,e){const i=EI(o),d=yield QZ(i.localStore,e.query,!0),_=e.view.ta(d);return i.isPrimaryClient&&Zue(i,e.targetId,_.Xu),_}),S9.apply(this,arguments)}function ele(o,e){return nie.apply(this,arguments)}function nie(){return nie=(0,b0.Z)(function*(o,e){const i=EI(o);return Tue(i.localStore,e).then(d=>B4(i,d))}),nie.apply(this,arguments)}function qve(o,e,i,d){return tle.apply(this,arguments)}function tle(){return tle=(0,b0.Z)(function*(o,e,i,d){const _=EI(o),B=yield function(_t,ga){const _h=EI(_t),_g=EI(_h.Bs);return _h.persistence.runTransaction("Lookup mutation documents","readonly",l_=>_g.fn(l_,ga).next(f_=>f_?_h.fi.Ks(l_,f_):k0.resolve(null)))}(_.localStore,e);var ga;null!==B?("pending"===i?yield oY(_.remoteStore):"acknowledged"===i||"rejected"===i?(JZ(_,e,d||null),Xre(_,e),ga=e,EI(EI(_.localStore).Bs)._n(ga)):kI(),yield B4(_,B)):rI("SyncEngine","Cannot apply mutation batch with id: "+e)}),tle.apply(this,arguments)}function nle(){return nle=(0,b0.Z)(function*(o,e){const i=EI(o);if(ole(i),oie(i),!0===e&&!0!==i.da){const d=i.sharedClientState.getAllActiveQueryTargets(),_=yield Gge(i,d.toArray());i.da=!0,yield Fue(i.remoteStore,!0);for(const B of _)E9(i.remoteStore,B)}else if(!1===e&&!1!==i.da){const d=[];let _=Promise.resolve();i.ra.forEach((B,_t)=>{i.sharedClientState.isLocalQueryTarget(_t)?d.push(_t):_=_.then(()=>(dY(i,_t),_9(i.localStore,_t,!0))),I9(i.remoteStore,_t)}),yield _,yield Gge(i,d),function(B){const _t=EI(B);_t.aa.forEach((ga,_h)=>{I9(_t.remoteStore,_h)}),_t.ca.Si(),_t.aa=new Map,_t.ua=new LR(uI.comparator)}(i),i.da=!1,yield Fue(i.remoteStore,!1)}}),nle.apply(this,arguments)}function Gge(o,e,i){return rie.apply(this,arguments)}function rie(){return rie=(0,b0.Z)(function*(o,e,i){const d=EI(o),_=[],B=[];for(const _t of e){let ga;const _h=d.ra.get(_t);if(_h&&0!==_h.length){ga=yield A9(d.localStore,PM(_h[0]));for(const _g of _h){const l_=d.ia.get(_g),f_=yield tie(d,l_);f_.snapshot&&B.push(f_.snapshot)}}else{const _g=yield wue(d.localStore,_t);ga=yield A9(d.localStore,_g),yield lY(d,fG(_g),_t,!1)}_.push(ga)}return d.sa.zo(B),_}),rie.apply(this,arguments)}function fG(o){return rre(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function rle(o){const e=EI(o);return EI(EI(e.localStore).persistence).Fs()}function Wve(o,e,i,d){return iie.apply(this,arguments)}function iie(){return iie=(0,b0.Z)(function*(o,e,i,d){const _=EI(o);if(_.da)return void rI("SyncEngine","Ignoring unexpected query state notification.");const B=_.ra.get(e);if(B&&B.length>0)switch(i){case"current":case"not-current":{const _t=yield Tue(_.localStore,zK(B[0])),ga=PZ.createSynthesizedRemoteEventForCurrentChange(e,"current"===i);yield B4(_,_t,ga);break}case"rejected":yield _9(_.localStore,e,!0),dY(_,e,d);break;default:kI()}}),iie.apply(this,arguments)}function Qge(o,e,i){return ile.apply(this,arguments)}function ile(){return ile=(0,b0.Z)(function*(o,e,i){const d=ole(o);if(d.da){for(const _ of e){if(d.ra.has(_)){rI("SyncEngine","Adding an already active target "+_);continue}const B=yield wue(d.localStore,_),_t=yield A9(d.localStore,B);yield lY(d,fG(B),_t.targetId,!1),E9(d.remoteStore,_t)}for(const _ of i)d.ra.has(_)&&(yield _9(d.localStore,_,!1).then(()=>{I9(d.remoteStore,_),dY(d,_)}).catch(k6))}}),ile.apply(this,arguments)}function ole(o){const e=EI(o);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fge.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jge.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zue.bind(null,e),e.sa.zo=Bve.bind(null,e.eventManager),e.sa.wa=uY.bind(null,e.eventManager),e}function oie(o){const e=EI(o);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qve.bind(null,e),e}class Hge{constructor(){this.synchronizeTabs=!1}initialize(e){var i=this;return(0,b0.Z)(function*(){i.M=YU(e.databaseInfo.databaseId),i.sharedClientState=i.ga(e),i.persistence=i.ya(e),yield i.persistence.start(),i.gcScheduler=i.pa(e),i.localStore=i.Ia(e)})()}pa(e){return null}Ia(e){return nR(this.persistence,new Iue,e.initialUser,this.M)}ya(e){return new bge(lG.Yi,this.M)}ga(e){return new Oue}terminate(){var e=this;return(0,b0.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sle extends Hge{constructor(e,i,d){super(),this.Ta=e,this.cacheSizeBytes=i,this.forceOwnership=d,this.synchronizeTabs=!1}initialize(e){var i=()=>super.initialize,d=this;return(0,b0.Z)(function*(){yield i().call(d,e),yield d.Ta.initialize(d,e),yield oie(d.Ta.syncEngine),yield oY(d.Ta.remoteStore),yield d.persistence.Ts(()=>(d.gcScheduler&&!d.gcScheduler.started&&d.gcScheduler.start(d.localStore),Promise.resolve()))})()}Ia(e){return nR(this.persistence,new Iue,e.initialUser,this.M)}pa(e){return new _ue(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const i=Rre(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),d=void 0!==this.cacheSizeBytes?i2.withCacheSize(this.cacheSizeBytes):i2.DEFAULT;return new Sre(this.synchronizeTabs,i,e.clientId,d,e.asyncQueue,P6(),WZ(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Oue}}class zve extends sle{constructor(e,i){super(e,i,!1),this.Ta=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){var i=()=>super.initialize,d=this;return(0,b0.Z)(function*(){yield i().call(d,e);const _=d.Ta.syncEngine;d.sharedClientState instanceof Lre&&(d.sharedClientState.syncEngine={$r:qve.bind(null,_),Br:Wve.bind(null,_),Lr:Qge.bind(null,_),Fs:rle.bind(null,_),Fr:ele.bind(null,_)},yield d.sharedClientState.start()),yield d.persistence.Ts(function(){var B=(0,b0.Z)(function*(_t){yield function Vge(o,e){return nle.apply(this,arguments)}(d.Ta.syncEngine,_t),d.gcScheduler&&(_t&&!d.gcScheduler.started?d.gcScheduler.start(d.localStore):_t||d.gcScheduler.stop())});return function(_t){return B.apply(this,arguments)}}())})()}ga(e){const i=P6();if(!Lre.vt(i))throw new Q0(C0.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const d=Rre(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lre(i,e.asyncQueue,d,e.clientId,e.initialUser)}}class ale{initialize(e,i){var d=this;return(0,b0.Z)(function*(){d.localStore||(d.localStore=e.localStore,d.sharedClientState=e.sharedClientState,d.datastore=d.createDatastore(i),d.remoteStore=d.createRemoteStore(i),d.eventManager=d.createEventManager(i),d.syncEngine=d.createSyncEngine(i,!e.synchronizeTabs),d.sharedClientState.onlineStateHandler=_=>Kue(d.syncEngine,_,1),d.remoteStore.remoteSyncer.handleCredentialChange=$U.bind(null,d.syncEngine),yield Fue(d.remoteStore,d.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Gue}createDatastore(e){const i=YU(e.databaseInfo.databaseId),d=new Nve(e.databaseInfo);return new Tge(e.authCredentials,e.appCheckCredentials,d,i)}createRemoteStore(e){return i=this.localStore,d=this.datastore,_=e.asyncQueue,B=ga=>Kue(this.syncEngine,ga,0),_t=Mre.vt()?new Mre:new wge,new Sge(i,d,_,B,_t);var i,d,_,B,_t}createSyncEngine(e,i){return function(d,_,B,_t,ga,_h,_g){const l_=new que(d,_,B,_t,ga,_h);return _g&&(l_.da=!0),l_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return(e=(0,b0.Z)(function*(i){const d=EI(i);rI("RemoteStore","RemoteStore shutting down."),d.wu.add(5),yield oT(d),d.gu.shutdown(),d.yu.set("Unknown")}),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function qge(o,e=10240){let i=0;return{read:()=>(0,b0.Z)(function*(){if(i<o.byteLength){const d={value:o.slice(i,i+e),done:!1};return i+=e,d}return{done:!0}})(),cancel:()=>(0,b0.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $Z{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}class cle{constructor(e,i){this.Ra=e,this.M=i,this.metadata=new kR,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(d=>{d&&d.Mu()?this.metadata.resolve(d.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==d?void 0:d.payload)}`))},d=>this.metadata.reject(d))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,b0.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,b0.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,b0.Z)(function*(){const i=yield e.Va();if(null===i)return null;const d=e.ba.decode(i),_=Number(d);isNaN(_)&&e.va(`length string (${d}) is not valid number`);const B=yield e.Sa(_);return new xge(JSON.parse(B),i.length+_)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,b0.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const i=e.Da();i<0&&e.va("Reached the end of bundle when a length string is expected.");const d=e.buffer.slice(0,i);return e.buffer=e.buffer.slice(i),d})()}Sa(e){var i=this;return(0,b0.Z)(function*(){for(;i.buffer.length<e;)(yield i.Ca())&&i.va("Reached the end of bundle when more is expected.");const d=i.ba.decode(i.buffer.slice(0,e));return i.buffer=i.buffer.slice(e),d})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,b0.Z)(function*(){const i=yield e.Ra.read();if(!i.done){const d=new Uint8Array(e.buffer.length+i.value.length);d.set(e.buffer),d.set(i.value,e.buffer.length),e.buffer=d}return i.done})()}}class Wge{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var i=this;return(0,b0.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new Q0(C0.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const d=yield(_=(0,b0.Z)(function*(B,_t){const ga=EI(B),_h=LZ(ga.M)+"/documents",_g={documents:_t.map(V_=>XK(ga.M,V_))},l_=yield ga._o("BatchGetDocuments",_h,_g),f_=new Map;l_.forEach(V_=>{const Y_=function zpe(o,e){return"found"in e?function(i,d){f1(!!d.found);const _=k4(i,d.found.name),B=KO(d.found.updateTime),_t=new t2({mapValue:{fields:d.found.fields}});return ES.newFoundDocument(_,B,_t)}(o,e):"missing"in e?function(i,d){f1(!!d.missing),f1(!!d.readTime);const _=k4(i,d.missing),B=KO(d.readTime);return ES.newNoDocument(_,B)}(o,e):kI()}(ga.M,V_);f_.set(Y_.key.toString(),Y_)});const R_=[];return _t.forEach(V_=>{const Y_=f_.get(V_.toString());f1(!!Y_),R_.push(Y_)}),R_}),function(B,_t){return _.apply(this,arguments)})(i.datastore,e);var _;return d.forEach(_=>i.recordVersion(_)),d})()}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(d){this.lastWriteError=d}this.writtenDocs.add(e.toString())}delete(e){this.write(new kZ(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,b0.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;var d;e.mutations.forEach(d=>{i.delete(d.key.toString())}),i.forEach((d,_)=>{const B=uI.fromPath(_);e.mutations.push(new lre(B,e.precondition(B)))}),yield(d=(0,b0.Z)(function*(_,B){const _t=EI(_),ga=LZ(_t.M)+"/documents",_h={writes:B.map(_g=>_z(_t.M,_g))};yield _t.co("Commit",ga,_h)}),function(_,B){return d.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw kI();i=s1.min()}const d=this.readVersions.get(e.key.toString());if(d){if(!i.isEqual(d))throw new Q0(C0.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){const i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?sO.updateTime(i):sO.none()}preconditionForUpdate(e){const i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(s1.min()))throw new Q0(C0.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sO.updateTime(i)}return sO.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sie{constructor(e,i,d,_,B){this.asyncQueue=e,this.datastore=i,this.options=d,this.updateFunction=_,this.deferred=B,this.xa=d.maxAttempts,this.No=new dG(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,b0.Z)(function*(){const i=new Wge(e.datastore),d=e.ka(i);d&&d.then(_=>{e.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{e.deferred.resolve(_)}).catch(B=>{e.Ma(B)}))}).catch(_=>{e.Ma(_)})}))}ka(e){try{const i=this.updateFunction(e);return!vZ(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const i=e.code;return"aborted"===i||"failed-precondition"===i||!jpe(i)}return!1}}class ZZ{constructor(e,i,d,_){var B=this;this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=d,this.databaseInfo=_,this.user=EN.UNAUTHENTICATED,this.clientId=gpe.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(d,function(){var _t=(0,b0.Z)(function*(ga){rI("FirestoreClient","Received user=",ga.uid),yield B.authCredentialListener(ga),B.user=ga});return function(ga){return _t.apply(this,arguments)}}()),this.appCheckCredentials.start(d,_t=>(rI("FirestoreClient","Received new app check token=",_t),this.appCheckCredentialListener(_t,this.user)))}getConfiguration(){var e=this;return(0,b0.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q0(C0.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const i=new kR;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,b0.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),i.resolve()}catch(d){const _=b9(d,"Failed to shutdown persistence");i.reject(_)}})),i.promise}}function Kge(o,e){return ule.apply(this,arguments)}function ule(){return ule=(0,b0.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress(),rI("FirestoreClient","Initializing OfflineComponentProvider");const i=yield o.getConfiguration();yield e.initialize(i);let d=i.initialUser;o.setCredentialChangeListener(function(){var _=(0,b0.Z)(function*(B){d.isEqual(B)||(yield bue(e.localStore,B),d=B)});return function(B){return _.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>o.terminate()),o.offlineComponents=e}),ule.apply(this,arguments)}function lle(o,e){return XZ.apply(this,arguments)}function XZ(){return XZ=(0,b0.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress();const i=yield tL(o);rI("FirestoreClient","Initializing OnlineComponentProvider");const d=yield o.getConfiguration();yield e.initialize(i,d),o.setCredentialChangeListener(_=>kge(e.remoteStore,_)),o.setAppCheckTokenChangeListener((_,B)=>kge(e.remoteStore,B)),o.onlineComponents=e}),XZ.apply(this,arguments)}function tL(o){return dle.apply(this,arguments)}function dle(){return dle=(0,b0.Z)(function*(o){return o.offlineComponents||(rI("FirestoreClient","Using default OfflineComponentProvider"),yield Kge(o,new Hge)),o.offlineComponents}),dle.apply(this,arguments)}function aie(o){return eX.apply(this,arguments)}function eX(){return eX=(0,b0.Z)(function*(o){return o.onlineComponents||(rI("FirestoreClient","Using default OnlineComponentProvider"),yield lle(o,new ale)),o.onlineComponents}),eX.apply(this,arguments)}function zge(o){return tL(o).then(e=>e.persistence)}function tX(o){return tL(o).then(e=>e.localStore)}function hle(o){return aie(o).then(e=>e.remoteStore)}function nL(o){return aie(o).then(e=>e.syncEngine)}function fY(o){return pY.apply(this,arguments)}function pY(){return pY=(0,b0.Z)(function*(o){const e=yield aie(o),i=e.eventManager;return i.onListen=Jre.bind(null,e.syncEngine),i.onUnlisten=Uge.bind(null,e.syncEngine),i}),pY.apply(this,arguments)}function R9(o,e,i={}){const d=new kR;return o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return function(_,B,_t,ga,_h){const _g=new $Z({next:f_=>{B.enqueueAndForget(()=>Kre(_,l_));const R_=f_.docs.has(_t);!R_&&f_.fromCache?_h.reject(new Q0(C0.UNAVAILABLE,"Failed to get document because the client is offline.")):R_&&f_.fromCache&&ga&&"server"===ga.source?_h.reject(new Q0(C0.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_h.resolve(f_)},error:f_=>_h.reject(f_)}),l_=new Yre(KK(_t.path),_g,{includeMetadataChanges:!0,ku:!0});return Que(_,l_)}(yield fY(o),o.asyncQueue,e,i,d)})),d.promise}function Yge(o,e,i={}){const d=new kR;return o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return function(_,B,_t,ga,_h){const _g=new $Z({next:f_=>{B.enqueueAndForget(()=>Kre(_,l_)),f_.fromCache&&"server"===ga.source?_h.reject(new Q0(C0.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_h.resolve(f_)},error:f_=>_h.reject(f_)}),l_=new Yre(_t,_g,{includeMetadataChanges:!0,ku:!0});return Que(_,l_)}(yield fY(o),o.asyncQueue,e,i,d)})),d.promise}const gle=new Map;function mle(o,e,i){if(!i)throw new Q0(C0.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${e}.`)}function nX(o,e,i,d){if(!0===e&&!0===d)throw new Q0(C0.INVALID_ARGUMENT,`${o} and ${i} cannot be used together.`)}function $ge(o){if(!uI.isDocumentKey(o))throw new Q0(C0.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function Zge(o){if(uI.isDocumentKey(o))throw new Q0(C0.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function pG(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const e=(i=o).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof o?"a function":kI()}function Z1(o,e){if("_delegate"in o&&(o=o._delegate),!(o instanceof e)){if(e.name===o.constructor.name)throw new Q0(C0.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=pG(o);throw new Q0(C0.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return o}function rX(o,e){if(e<=0)throw new Q0(C0.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${e}.`)}class Xge{constructor(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new Q0(C0.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Q0(C0.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,nX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gY{constructor(e,i,d){this._authCredentials=i,this._appCheckCredentials=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xge({}),this._settingsFrozen=!1,e instanceof zU?this._databaseId=e:(this._app=e,this._databaseId=function(_){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Q0(C0.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zU(_.options.projectId)}(e))}get app(){if(!this._app)throw new Q0(C0.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Q0(C0.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xge(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new M_e;switch(i.type){case"gapi":const d=i.client;return f1(!("object"!=typeof d||null===d||!d.auth||!d.auth.getAuthHeaderValueForFirstParty)),new Dce(d,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new Q0(C0.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=gle.get(e);i&&(rI("ComponentProvider","Removing Datastore"),gle.delete(e),i.terminate())}(this),Promise.resolve()}}class sT{constructor(e,i,d){this.converter=i,this._key=d,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new U4(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sT(this.firestore,e,this._key)}}class uO{constructor(e,i,d){this.converter=i,this._query=d,this.type="query",this.firestore=e}withConverter(e){return new uO(this.firestore,e,this._query)}}class U4 extends uO{constructor(e,i,d){super(e,i,KK(d)),this._path=d,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sT(this.firestore,null,new uI(e))}withConverter(e){return new U4(this.firestore,e,this._path)}}function eme(o,e,...i){if(o=(0,M_.m9)(o),mle("collection","path",e),o instanceof gY){const d=T1.fromString(e,...i);return Zge(d),new U4(o,null,d)}{if(!(o instanceof sT||o instanceof U4))throw new Q0(C0.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=o._path.child(T1.fromString(e,...i));return Zge(d),new U4(o.firestore,null,d)}}function iX(o,e,...i){if(o=(0,M_.m9)(o),1===arguments.length&&(e=gpe.R()),mle("doc","path",e),o instanceof gY){const d=T1.fromString(e,...i);return $ge(d),new sT(o,null,new uI(d))}{if(!(o instanceof sT||o instanceof U4))throw new Q0(C0.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=o._path.child(T1.fromString(e,...i));return $ge(d),new sT(o.firestore,o instanceof U4?o.converter:null,new uI(d))}}function tme(o,e){return o=(0,M_.m9)(o),e=(0,M_.m9)(e),(o instanceof sT||o instanceof U4)&&(e instanceof sT||e instanceof U4)&&o.firestore===e.firestore&&o.path===e.path&&o.converter===e.converter}function nme(o,e){return o=(0,M_.m9)(o),e=(0,M_.m9)(e),o instanceof uO&&e instanceof uO&&o.firestore===e.firestore&&Z8(o._query,e._query)&&o.converter===e.converter}class oX{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new dG(this,"async_queue_retry"),this.Qa=()=>{const i=WZ();i&&rI("AsyncQueue","Visibility state changed to "+i.visibilityState),this.No.Po()};const e=WZ();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const i=WZ();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const i=new kR;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,b0.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(i){if(!l9(i))throw i;rI("AsyncQueue","Operation failed with retryable error: "+i)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const i=this.Fa.then(()=>(this.qa=!0,e().catch(d=>{throw this.Ua=d,this.qa=!1,oO("INTERNAL UNHANDLED ERROR: ",function(B){let _t=B.message||"";return B.stack&&(_t=B.stack.includes(B.message)?B.stack:B.message+"\n"+B.stack),_t}(d)),d}).then(d=>(this.qa=!1,d))));return this.Fa=i,i}enqueueAfterDelay(e,i,d){this.ja(),this.Ga.indexOf(e)>-1&&(i=0);const _=Vue.createAndSchedule(this,e,i,d,B=>this.Ha(B));return this.La.push(_),_}ja(){this.Ua&&kI()}verifyOperationInProgress(){}Ja(){var e=this;return(0,b0.Z)(function*(){let i;do{i=e.Fa,yield i}while(i!==e.Fa)})()}Ya(e){for(const i of this.La)if(i.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((i,d)=>i.targetTimeMs-d.targetTimeMs);for(const i of this.La)if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const i=this.La.indexOf(e);this.La.splice(i,1)}}function AY(o){return function(e,i){if("object"!=typeof e||null===e)return!1;const d=e;for(const _ of["next","error","complete"])if(_ in d&&"function"==typeof d[_])return!0;return!1}(o)}class Zve{constructor(){this._progressObserver={},this._taskCompletionResolver=new kR,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,d){this._progressObserver={next:e,error:i,complete:d}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wT extends gY{constructor(e,i,d){super(e,i,d),this.type="firestore",this._queue=new oX,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cie(this),this._firestoreClient.terminate()}}function lO(o){return o._firestoreClient||cie(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function cie(o){var e;const i=o._freezeSettings(),d=(B=(null===(e=o._app)||void 0===e?void 0:e.options.appId)||"",new Ape(o._databaseId,B,o._persistenceKey,(ga=i).host,ga.ssl,ga.experimentalForceLongPolling,ga.experimentalAutoDetectLongPolling,ga.useFetchStreams));var B,ga;o._firestoreClient=new ZZ(o._authCredentials,o._appCheckCredentials,o._queue,d)}function rme(o,e,i){const d=new kR;return o.asyncQueue.enqueue((0,b0.Z)(function*(){try{yield Kge(o,i),yield lle(o,e),d.resolve()}catch(_){if(!("FirebaseError"===(B=_).name?B.code===C0.FAILED_PRECONDITION||B.code===C0.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&B instanceof DOMException)||22===B.code||20===B.code||11===B.code))throw _;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+_),d.reject(_)}var B})).then(()=>d.promise)}function _le(o){if(o._initialized||o._terminated)throw new Q0(C0.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class F4{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new Q0(C0.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new CO(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bN{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bN(xR.fromBase64String(e))}catch(i){throw new Q0(C0.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new bN(xR.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class j4{constructor(e){this._methodName=e}}class gG{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new Q0(C0.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new Q0(C0.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return N1(this._lat,e._lat)||N1(this._long,e._long)}}const sme=/^__.*__$/;class sye{constructor(e,i,d){this.data=e,this.fieldMask=i,this.fieldTransforms=d}toMutation(e,i){return null!==this.fieldMask?new c9(e,this.data,this.fieldMask,i,this.fieldTransforms):new JK(e,this.data,i,this.fieldTransforms)}}class lie{constructor(e,i,d){this.data=e,this.fieldMask=i,this.fieldTransforms=d}toMutation(e,i){return new c9(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function vle(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kI()}}class _Y{constructor(e,i,d,_,B,_t){this.settings=e,this.databaseId=i,this.M=d,this.ignoreUndefinedProperties=_,void 0===B&&this.tc(),this.fieldTransforms=B||[],this.fieldMask=_t||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new _Y(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var i;const d=null===(i=this.path)||void 0===i?void 0:i.child(e),_=this.nc({path:d,ic:!1});return _.rc(e),_}oc(e){var i;const d=null===(i=this.path)||void 0===i?void 0:i.child(e),_=this.nc({path:d,ic:!1});return _.tc(),_}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return V6(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(vle(this.ec)&&sme.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class ame{constructor(e,i,d){this.databaseId=e,this.ignoreUndefinedProperties=i,this.M=d||YU(e)}lc(e,i,d,_=!1){return new _Y({ec:e,methodName:i,hc:d,path:CO.emptyPath(),ic:!1,cc:_},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function mG(o){const e=o._freezeSettings(),i=YU(o._databaseId);return new ame(o._databaseId,!!e.ignoreUndefinedProperties,i)}function vY(o,e,i,d,_,B={}){const _t=o.lc(B.merge||B.mergeFields?2:0,e,i,_);hie("Data must be an object, but it was:",_t,d);const ga=O9(d,_t);let _h,_g;if(B.merge)_h=new z8(_t.fieldMask),_g=_t.fieldTransforms;else if(B.mergeFields){const l_=[];for(const f_ of B.mergeFields){const R_=F6(e,f_,i);if(!_t.contains(R_))throw new Q0(C0.INVALID_ARGUMENT,`Field '${R_}' is specified in your field mask but missing from your input data.`);uX(l_,R_)||l_.push(R_)}_h=new z8(l_),_g=_t.fieldTransforms.filter(f_=>_h.covers(f_.field))}else _h=null,_g=_t.fieldTransforms;return new sye(new t2(ga),_h,_g)}class yY extends j4{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yY}}function yle(o,e,i){return new _Y({ec:3,hc:e.settings.hc,methodName:o._methodName,ic:i},e.databaseId,e.M,e.ignoreUndefinedProperties)}class EY extends j4{_toFieldTransform(e){return new DZ(e.path,new i9)}isEqual(e){return e instanceof EY}}class die extends j4{constructor(e,i){super(e),this.fc=i}_toFieldTransform(e){const i=yle(this,e,!0),d=this.fc.map(B=>U6(B,i)),_=new o9(d);return new DZ(e.path,_)}isEqual(e){return this===e}}class Ele extends j4{constructor(e,i){super(e),this.fc=i}_toFieldTransform(e){const i=yle(this,e,!0),d=this.fc.map(B=>U6(B,i)),_=new s9(d);return new DZ(e.path,_)}isEqual(e){return this===e}}class Ile extends j4{constructor(e,i){super(e),this.dc=i}_toFieldTransform(e){const i=new a9(e.M,zce(e.M,this.dc));return new DZ(e.path,i)}isEqual(e){return this===e}}function aX(o,e,i,d){const _=o.lc(1,e,i);hie("Data must be an object, but it was:",_,d);const B=[],_t=t2.empty();E6(d,(_h,_g)=>{const l_=IY(e,_h,i);_g=(0,M_.m9)(_g);const f_=_.oc(l_);if(_g instanceof yY)B.push(l_);else{const R_=U6(_g,f_);null!=R_&&(B.push(l_),_t.set(l_,R_))}});const ga=new z8(B);return new lie(_t,ga,_.fieldTransforms)}function cX(o,e,i,d,_,B){const _t=o.lc(1,e,i),ga=[F6(e,d,i)],_h=[_];if(B.length%2!=0)throw new Q0(C0.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R_=0;R_<B.length;R_+=2)ga.push(F6(e,B[R_])),_h.push(B[R_+1]);const _g=[],l_=t2.empty();for(let R_=ga.length-1;R_>=0;--R_)if(!uX(_g,ga[R_])){const V_=ga[R_];let Y_=_h[R_];Y_=(0,M_.m9)(Y_);const R0=_t.oc(V_);if(Y_ instanceof yY)_g.push(V_);else{const V0=U6(Y_,R0);null!=V0&&(_g.push(V_),l_.set(V_,V0))}}const f_=new z8(_g);return new lie(l_,f_,_t.fieldTransforms)}function ble(o,e,i,d=!1){return U6(i,o.lc(d?4:3,e))}function U6(o,e){if(XU(o=(0,M_.m9)(o)))return hie("Unsupported field value:",e,o),O9(o,e);if(o instanceof j4)return function(i,d){if(!vle(d.ec))throw d.ac(`${i._methodName}() can only be used with update() and set()`);if(!d.path)throw d.ac(`${i._methodName}() is not currently supported inside arrays`);const _=i._toFieldTransform(d);_&&d.fieldTransforms.push(_)}(o,e),null;if(void 0===o&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),o instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(i,d){const _=[];let B=0;for(const _t of i){let ga=U6(_t,d.uc(B));null==ga&&(ga={nullValue:"NULL_VALUE"}),_.push(ga),B++}return{arrayValue:{values:_}}}(o,e)}return function(i,d){if(null===(i=(0,M_.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return zce(d.M,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const _=PR.fromDate(i);return{timestampValue:ZK(d.M,_)}}if(i instanceof PR){const _=new PR(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ZK(d.M,_)}}if(i instanceof gG)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof bN)return{bytesValue:Hpe(d.M,i._byteString)};if(i instanceof sT){const _=d.databaseId,B=i.firestore._databaseId;if(!B.isEqual(_))throw d.ac(`Document reference is for database ${B.projectId}/${B.database} but should be for database ${_.projectId}/${_.database}`);return{referenceValue:fre(i.firestore._databaseId||d.databaseId,i._key.path)}}throw d.ac(`Unsupported field value: ${pG(i)}`)}(o,e)}function O9(o,e){const i={};return Pce(o)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):E6(o,(d,_)=>{const B=U6(_,e.sc(d));null!=B&&(i[d]=B)}),{mapValue:{fields:i}}}function XU(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof PR||o instanceof gG||o instanceof bN||o instanceof sT||o instanceof j4)}function hie(o,e,i){if(!XU(i)||"object"!=typeof(d=i)||null===d||Object.getPrototypeOf(d)!==Object.prototype&&null!==Object.getPrototypeOf(d)){const d=pG(i);throw e.ac("an object"===d?o+" a custom object":o+" "+d)}var d}function F6(o,e,i){if((e=(0,M_.m9)(e))instanceof F4)return e._internalPath;if("string"==typeof e)return IY(o,e);throw V6("Field path arguments must be of type string or ",o,!1,void 0,i)}const j6=new RegExp("[~\\*/\\[\\]]");function IY(o,e,i){if(e.search(j6)>=0)throw V6(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,i);try{return new F4(...e.split("."))._internalPath}catch(d){throw V6(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,i)}}function V6(o,e,i,d,_){const B=d&&!d.isEmpty(),_t=void 0!==_;let ga=`Function ${e}() called with invalid data`;i&&(ga+=" (via `toFirestore()`)"),ga+=". ";let _h="";return(B||_t)&&(_h+=" (found",B&&(_h+=` in field ${d}`),_t&&(_h+=` in document ${_}`),_h+=")"),new Q0(C0.INVALID_ARGUMENT,ga+o+_h)}function uX(o,e){return o.some(i=>i.isEqual(e))}class s2{constructor(e,i,d,_,B){this._firestore=e,this._userDataWriter=i,this._key=d,this._document=_,this._converter=B}get id(){return this._key.path.lastSegment()}get ref(){return new sT(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cme(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(lX("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class cme extends s2{data(){return super.data()}}function lX(o,e){return"string"==typeof e?IY(o,e):e instanceof F4?e._internalPath:e._delegate._internalPath}class AG{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G6 extends s2{constructor(e,i,d,_,B,_t){super(e,i,d,_,_t),this._firestore=e,this._firestoreImpl=e,this.metadata=B}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Q6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const d=this._document.data.field(lX("DocumentSnapshot.get",e));if(null!==d)return this._userDataWriter.convertValue(d,i.serverTimestamps)}}}class Q6 extends G6{data(e={}){return super.data(e)}}class _G{constructor(e,i,d,_){this._firestore=e,this._userDataWriter=i,this._snapshot=_,this.metadata=new AG(_.hasPendingWrites,_.fromCache),this.query=d}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(d=>{e.call(i,new Q6(this._firestore,this._userDataWriter,d.key,d,new AG(this._snapshot.mutatedKeys.has(d.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Q0(C0.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(d,_){if(d._snapshot.oldDocs.isEmpty()){let B=0;return d._snapshot.docChanges.map(_t=>({type:"added",doc:new Q6(d._firestore,d._userDataWriter,_t.doc.key,_t.doc,new AG(d._snapshot.mutatedKeys.has(_t.doc.key),d._snapshot.fromCache),d.query.converter),oldIndex:-1,newIndex:B++}))}{let B=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(_t=>_||3!==_t.type).map(_t=>{const ga=new Q6(d._firestore,d._userDataWriter,_t.doc.key,_t.doc,new AG(d._snapshot.mutatedKeys.has(_t.doc.key),d._snapshot.fromCache),d.query.converter);let _h=-1,_g=-1;return 0!==_t.type&&(_h=B.indexOf(_t.doc.key),B=B.delete(_t.doc.key)),1!==_t.type&&(B=B.add(_t.doc),_g=B.indexOf(_t.doc.key)),{type:Cle(_t.type),doc:ga,oldIndex:_h,newIndex:_g}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function Cle(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kI()}}function wle(o,e){return o instanceof G6&&e instanceof G6?o._firestore===e._firestore&&o._key.isEqual(e._key)&&(null===o._document?null===e._document:o._document.isEqual(e._document))&&o._converter===e._converter:o instanceof _G&&e instanceof _G&&o._firestore===e._firestore&&nme(o.query,e.query)&&o.metadata.isEqual(e.metadata)&&o._snapshot.isEqual(e._snapshot)}function ume(o){if("L"===o.limitType&&0===o.explicitOrderBy.length)throw new Q0(C0.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D9{}function a2(o,...e){for(const i of e)o=i._apply(o);return o}class aye extends D9{constructor(e,i,d){super(),this._c=e,this.wc=i,this.mc=d,this.type="where"}_apply(e){const i=mG(e.firestore),d=function(_,B,_t,ga,_h,_g,l_){let f_;if(_h.isKeyField()){if("array-contains"===_g||"array-contains-any"===_g)throw new Q0(C0.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_g}' queries on documentId().`);if("in"===_g||"not-in"===_g){pme(l_,_g);const V_=[];for(const Y_ of l_)V_.push(Rle(ga,_,Y_));f_={arrayValue:{values:V_}}}else f_=Rle(ga,_,l_)}else"in"!==_g&&"not-in"!==_g&&"array-contains-any"!==_g||pme(l_,_g),f_=ble(_t,"where",l_,"in"===_g||"not-in"===_g);const R_=WO.create(_h,_g,f_);return function(V_,Y_){if(Y_.S()){const V0=Wce(V_);if(null!==V0&&!V0.isEqual(Y_.field))throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${V0.toString()}' and '${Y_.field.toString()}'`);const J0=qce(V_);null!==J0&&Ole(0,Y_.field,J0)}const R0=function(V0,J0){for(const MI of V0.filters)if(J0.indexOf(MI.op)>=0)return MI.op;return null}(V_,function(V0){switch(V0){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y_.op));if(null!==R0)throw new Q0(C0.INVALID_ARGUMENT,R0===Y_.op?`Invalid query. You cannot use more than one '${Y_.op.toString()}' filter.`:`Invalid query. You cannot use '${Y_.op.toString()}' filters with '${R0.toString()}' filters.`)}(_,R_),R_}(e._query,0,i,e.firestore._databaseId,this._c,this.wc,this.mc);return new uO(e.firestore,e.converter,function(_,B){const _t=_.filters.concat([B]);return new C6(_.path,_.collectionGroup,_.explicitOrderBy.slice(),_t,_.limit,_.limitType,_.startAt,_.endAt)}(e._query,d))}}class lme extends D9{constructor(e,i){super(),this._c=e,this.gc=i,this.type="orderBy"}_apply(e){const i=function(d,_,B){if(null!==d.startAt)throw new Q0(C0.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==d.endAt)throw new Q0(C0.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const _t=new WK(_,B);return function(ga,_h){if(null===qce(ga)){const _g=Wce(ga);null!==_g&&Ole(0,_g,_h.field)}}(d,_t),_t}(e._query,this._c,this.gc);return new uO(e.firestore,e.converter,function(d,_){const B=d.explicitOrderBy.concat([_]);return new C6(d.path,d.collectionGroup,B,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e._query,i))}}class dme extends D9{constructor(e,i,d){super(),this.type=e,this.yc=i,this.Ic=d}_apply(e){return new uO(e.firestore,e.converter,Rpe(e._query,this.yc,this.Ic))}}class fie extends D9{constructor(e,i,d){super(),this.type=e,this.Tc=i,this.Ec=d}_apply(e){const i=fme(e,this.type,this.Tc,this.Ec);return new uO(e.firestore,e.converter,(_=i,new C6((d=e._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,_,d.endAt)));var d,_}}class Sle extends D9{constructor(e,i,d){super(),this.type=e,this.Tc=i,this.Ec=d}_apply(e){const i=fme(e,this.type,this.Tc,this.Ec);return new uO(e.firestore,e.converter,(_=i,new C6((d=e._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,_)));var d,_}}function fme(o,e,i,d){if(i[0]=(0,M_.m9)(i[0]),i[0]instanceof s2)return function(_,B,_t,ga,_h){if(!ga)throw new Q0(C0.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${_t}().`);const _g=[];for(const l_ of n9(_))if(l_.field.isKeyField())_g.push(X7(B,ga.key));else{const f_=ga.data.field(l_.field);if(_Z(f_))throw new Q0(C0.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===f_){const R_=l_.field.canonicalString();throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R_}' (used as the orderBy) does not exist.`)}_g.push(f_)}return new b6(_g,_h)}(o._query,o.firestore._databaseId,e,i[0]._document,d);{const _=mG(o.firestore);return function(B,_t,ga,_h,_g,l_){const f_=B.explicitOrderBy;if(_g.length>f_.length)throw new Q0(C0.INVALID_ARGUMENT,`Too many arguments provided to ${_h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R_=[];for(let V_=0;V_<_g.length;V_++){const Y_=_g[V_];if(f_[V_].field.isKeyField()){if("string"!=typeof Y_)throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_h}(), but got a ${typeof Y_}`);if(!RZ(B)&&-1!==Y_.indexOf("/"))throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_h}() must be a plain document ID, but '${Y_}' contains a slash.`);const R0=B.path.child(T1.fromString(Y_));if(!uI.isDocumentKey(R0))throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_h}() must result in a valid document path, but '${R0}' is not because it contains an odd number of segments.`);const V0=new uI(R0);R_.push(X7(_t,V0))}else{const R0=ble(ga,_h,Y_);R_.push(R0)}}return new b6(R_,l_)}(o._query,o.firestore._databaseId,_,e,i,d)}}function Rle(o,e,i){if("string"==typeof(i=(0,M_.m9)(i))){if(""===i)throw new Q0(C0.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RZ(e)&&-1!==i.indexOf("/"))throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const d=e.path.child(T1.fromString(i));if(!uI.isDocumentKey(d))throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${d}' is not because it has an odd number of segments (${d.length}).`);return X7(o,new uI(d))}if(i instanceof sT)return X7(o,i._key);throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pG(i)}.`)}function pme(o,e){if(!Array.isArray(o)||0===o.length)throw new Q0(C0.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(o.length>10)throw new Q0(C0.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ole(o,e,i){if(!i.isEqual(e))throw new Q0(C0.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}const gme={maxAttempts:5};class vG{convertValue(e,i="none"){switch(Z7(e)){case 0:return null;case 1:return e.booleanValue;case 2:return eR(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(_k(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw kI()}}convertObject(e,i){const d={};return E6(e.fields,(_,B)=>{d[_]=this.convertValue(B,i)}),d}convertGeoPoint(e){return new gG(eR(e.latitude),eR(e.longitude))}convertArray(e,i){return(e.values||[]).map(d=>this.convertValue(d,i))}convertServerTimestamp(e,i){switch(i){case"previous":const d=Lce(e);return null==d?null:this.convertValue(d,i);case"estimate":return this.convertTimestamp(KU(e));default:return null}}convertTimestamp(e){const i=e2(e);return new PR(i.seconds,i.nanos)}convertDocumentKey(e,i){const d=T1.fromString(e);f1(Xpe(d));const _=new zU(d.get(1),d.get(3)),B=new uI(d.popFirst(5));return _.isEqual(i)||oO(`Document ${B} contains a document reference within a different database (${_.projectId}/${_.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),B}}function bY(o,e,i){let d;return d=o?i&&(i.merge||i.mergeFields)?o.toFirestore(e,i):o.toFirestore(e):e,d}class fye extends vG{constructor(e){super(),this.firestore=e}convertBytes(e){return new bN(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new sT(this.firestore,null,i)}}class Dle{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=mG(e)}set(e,i,d){this._verifyNotCommitted();const _=H6(e,this._firestore),B=bY(_.converter,i,d),_t=vY(this._dataReader,"WriteBatch.set",_._key,B,null!==_.converter,d);return this._mutations.push(_t.toMutation(_._key,sO.none())),this}update(e,i,d,..._){this._verifyNotCommitted();const B=H6(e,this._firestore);let _t;return _t="string"==typeof(i=(0,M_.m9)(i))||i instanceof F4?cX(this._dataReader,"WriteBatch.update",B._key,i,d,_):aX(this._dataReader,"WriteBatch.update",B._key,i),this._mutations.push(_t.toMutation(B._key,sO.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=H6(e,this._firestore);return this._mutations=this._mutations.concat(new kZ(i._key,sO.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q0(C0.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function H6(o,e){if((o=(0,M_.m9)(o)).firestore!==e)throw new Q0(C0.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class N9 extends vG{constructor(e){super(),this.firestore=e}convertBytes(e){return new bN(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new sT(this.firestore,null,i)}}function yme(o,e,i){o=Z1(o,sT);const d=Z1(o.firestore,wT),_=bY(o.converter,e,i);return yG(d,[vY(mG(d),"setDoc",o._key,_,null!==o.converter,i).toMutation(o._key,sO.none())])}function Ple(o,e,i,...d){o=Z1(o,sT);const _=Z1(o.firestore,wT),B=mG(_);let _t;return _t="string"==typeof(e=(0,M_.m9)(e))||e instanceof F4?cX(B,"updateDoc",o._key,e,i,d):aX(B,"updateDoc",o._key,e),yG(_,[_t.toMutation(o._key,sO.exists(!0))])}function Eme(o,...e){var i,d,_;o=(0,M_.m9)(o);let B={includeMetadataChanges:!1},_t=0;"object"!=typeof e[_t]||AY(e[_t])||(B=e[_t],_t++);const ga={includeMetadataChanges:B.includeMetadataChanges};if(AY(e[_t])){const f_=e[_t];e[_t]=null===(i=f_.next)||void 0===i?void 0:i.bind(f_),e[_t+1]=null===(d=f_.error)||void 0===d?void 0:d.bind(f_),e[_t+2]=null===(_=f_.complete)||void 0===_?void 0:_.bind(f_)}let _h,_g,l_;if(o instanceof sT)_g=Z1(o.firestore,wT),l_=KK(o._key.path),_h={next:f_=>{e[_t]&&e[_t](mie(_g,o,f_))},error:e[_t+1],complete:e[_t+2]};else{const f_=Z1(o,uO);_g=Z1(f_.firestore,wT),l_=f_._query;const R_=new N9(_g);_h={next:V_=>{e[_t]&&e[_t](new _G(_g,R_,f_,V_))},error:e[_t+1],complete:e[_t+2]},ume(o._query)}return function(f_,R_,V_,Y_){const R0=new $Z(Y_),V0=new Yre(R_,R0,V_);return f_.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return Que(yield fY(f_),V0)})),()=>{R0.Aa(),f_.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return Kre(yield fY(f_),V0)}))}}(lO(_g),l_,ga,_h)}function yG(o,e){return function(i,d){const _=new kR;return i.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return function Vve(o,e,i){return Wue.apply(this,arguments)}(yield nL(i),d,_)})),_.promise}(lO(o),e)}function mie(o,e,i){const d=i.docs.get(e._key),_=new N9(o);return new G6(o,_,e._key,d,new AG(i.hasPendingWrites,i.fromCache),e.converter)}class gye extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=mG(e)}get(e){const i=H6(e,this._firestore),d=new fye(this._firestore);return this._transaction.lookup([i._key]).then(_=>{if(!_||1!==_.length)return kI();const B=_[0];if(B.isFoundDocument())return new s2(this._firestore,d,B.key,B,i.converter);if(B.isNoDocument())return new s2(this._firestore,d,i._key,null,i.converter);throw kI()})}set(e,i,d){const _=H6(e,this._firestore),B=bY(_.converter,i,d),_t=vY(this._dataReader,"Transaction.set",_._key,B,null!==_.converter,d);return this._transaction.set(_._key,_t),this}update(e,i,d,..._){const B=H6(e,this._firestore);let _t;return _t="string"==typeof(i=(0,M_.m9)(i))||i instanceof F4?cX(this._dataReader,"Transaction.update",B._key,i,d,_):aX(this._dataReader,"Transaction.update",B._key,i),this._transaction.update(B._key,_t),this}delete(e){const i=H6(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){const i=H6(e,this._firestore),d=new N9(this._firestore);return super.get(e).then(_=>new G6(this._firestore,d,i._key,_._document,new AG(!1,!1),i.converter))}}function hX(o,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Q0("invalid-argument",`Invalid options passed to function ${o}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vle(){if("undefined"==typeof Uint8Array)throw new Q0("unimplemented","Uint8Arrays are not available in this environment.")}function Aie(){if(!function mpe(){return"undefined"!=typeof atob}())throw new Q0("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(o,e=!0){H8=dS.SDK_VERSION,(0,dS._registerComponent)(new LP.wA("firestore",(i,{options:d})=>{const _=i.getProvider("app").getImmediate(),B=new wT(_,new Z2(i.getProvider("auth-internal")),new Nce(i.getProvider("app-check-internal")));return d=Object.assign({useFetchStreams:e},d),B._setSettings(d),B},"PUBLIC")),(0,dS.registerVersion)(gZ,"3.4.9",o),(0,dS.registerVersion)(gZ,"3.4.9","esm2017")}();class fX{constructor(e){this._delegate=e}static fromBase64String(e){return Aie(),new fX(bN.fromBase64String(e))}static fromUint8Array(e){return Vle(),new fX(bN.fromUint8Array(e))}toBase64(){return Aie(),this._delegate.toBase64()}toUint8Array(){return Vle(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pX(o){return function mye(o,e){if("object"!=typeof o||null===o)return!1;const i=o;for(const d of e)if(d in i&&"function"==typeof i[d])return!0;return!1}(o,["next","error","complete"])}class Gle{enableIndexedDbPersistence(e,i){return function tye(o,e){_le(o=Z1(o,wT));const i=lO(o),d=o._freezeSettings(),_=new ale;return rme(i,_,new sle(_,d.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return function nye(o){_le(o=Z1(o,wT));const e=lO(o),i=o._freezeSettings(),d=new ale;return rme(e,d,new zve(d,i.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ime(o){if(o._initialized&&!o._terminated)throw new Q0(C0.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kR;return o._queue.enqueueAndForgetEvenWhileRestricted((0,b0.Z)(function*(){try{yield(i=(0,b0.Z)(function*(d){if(!cI.vt())return Promise.resolve();const _=d+"main";yield cI.delete(_)}),function(d){return i.apply(this,arguments)})(Rre(o._databaseId,o._persistenceKey)),e.resolve()}catch(i){e.reject(i)}var i})),e.promise}(e._delegate)}}class Qle{constructor(e,i,d){this._delegate=i,this._persistenceProvider=d,this.INTERNAL={delete:()=>this.terminate()},e instanceof zU||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&J7("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}useEmulator(e,i,d={}){!function FM(o,e,i,d={}){var _;const B=(o=Z1(o,gY))._getSettings();if("firestore.googleapis.com"!==B.host&&B.host!==e&&J7("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},B),{host:`${e}:${i}`,ssl:!1})),d.mockUserToken){let _t,ga;if("string"==typeof d.mockUserToken)_t=d.mockUserToken,ga=EN.MOCK_USER;else{_t=(0,M_.Sg)(d.mockUserToken,null===(_=o._app)||void 0===_?void 0:_.options.projectId);const _h=d.mockUserToken.sub||d.mockUserToken.user_id;if(!_h)throw new Q0(C0.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ga=new EN(_h)}o._authCredentials=new Oce(new qU(_t,ga))}}(this._delegate,e,i,d)}enableNetwork(){return function iye(o){return function Yve(o){return o.asyncQueue.enqueue((0,b0.Z)(function*(){const e=yield zge(o),i=yield hle(o);return e.setNetworkEnabled(!0),function(d){const _=EI(d);return _.wu.delete(0),JU(_)}(i)}))}(lO(o=Z1(o,wT)))}(this._delegate)}disableNetwork(){return function oye(o){return function fle(o){return o.asyncQueue.enqueue((0,b0.Z)(function*(){const e=yield zge(o),i=yield hle(o);return e.setNetworkEnabled(!1),(d=(0,b0.Z)(function*(_){const B=EI(_);B.wu.add(0),yield oT(B),B.yu.set("Offline")}),function(_){return d.apply(this,arguments)})(i);var d}))}(lO(o=Z1(o,wT)))}(this._delegate)}enablePersistence(e){let i=!1,d=!1;return e&&(i=!!e.synchronizeTabs,d=!!e.experimentalForceOwningTab,nX("synchronizeTabs",i,"experimentalForceOwningTab",d)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,d)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rye(o){return function(e){const i=new kR;return e.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return function GL(o,e){return $ue.apply(this,arguments)}(yield nL(e),i)})),i.promise}(lO(o=Z1(o,wT)))}(this._delegate)}onSnapshotsInSync(e){return function gie(o,e){return function Jve(o,e){const i=new $Z(e);return o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return d=yield fY(o),_=i,EI(d).bu.add(_),void _.next();var d,_})),()=>{i.Aa(),o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return d=yield fY(o),_=i,void EI(d).bu.delete(_);var d,_}))}}(lO(o=Z1(o,wT)),AY(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Q0("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new k9(this,eme(this._delegate,e))}catch(i){throw c2(i,"collection()","Firestore.collection()")}}doc(e){try{return new jM(this,iX(this._delegate,e))}catch(i){throw c2(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new nP(this,function mY(o,e){if(o=Z1(o,gY),mle("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q0(C0.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new uO(o,null,(i=e,new C6(T1.emptyPath(),i)));var i}(this._delegate,e))}catch(i){throw c2(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function CY(o,e,i){o=Z1(o,wT);const d=Object.assign(Object.assign({},gme),i);return function(_){if(_.maxAttempts<1)throw new Q0(C0.INVALID_ARGUMENT,"Max attempts must be at least 1")}(d),function B6(o,e,i){const d=new kR;return o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){const _=yield(B=o,aie(B).then(_t=>_t.datastore));var B;new sie(o.asyncQueue,_,i,e,d).run()})),d.promise}(lO(o),_=>e(new gye(o,_)),d)}(this._delegate,i=>e(new Tme(this,i)))}batch(){return lO(this._delegate),new Hle(new Dle(this._delegate,e=>yG(this._delegate,e)))}loadBundle(e){return function sX(o,e){const i=lO(o=Z1(o,wT)),d=new Zve;return function $ve(o,e,i,d){const _=function(B,_t){let ga;return ga="string"==typeof B?(new TextEncoder).encode(B):B,_h=function(_h,_g){if(_h instanceof Uint8Array)return qge(_h,void 0);if(_h instanceof ArrayBuffer)return qge(new Uint8Array(_h),void 0);if(_h instanceof ReadableStream)return _h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(ga),new cle(_h,_t);var _h}(i,YU(e));o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){!function Kve(o,e,i){const d=EI(o);var _;(_=(0,b0.Z)(function*(B,_t,ga){try{const _h=yield _t.getMetadata();if(yield function(R_,V_){const Y_=EI(R_),R0=KO(V_.createTime);return Y_.persistence.runTransaction("hasNewerBundle","readonly",V0=>Y_._s.getBundleMetadata(V0,V_.id)).then(V0=>!!V0&&V0.createTime.compareTo(R0)>=0)}(B.localStore,_h))return yield _t.close(),ga._completeWith({taskState:"Success",documentsLoaded:(R_=_h).totalDocuments,bytesLoaded:R_.totalBytes,totalDocuments:R_.totalDocuments,totalBytes:R_.totalBytes}),Promise.resolve(new Set);ga._updateProgress(Lge(_h));const _g=new Uve(_h,B.localStore,_t.M);let l_=yield _t.ma();for(;l_;){const R_=yield _g.Fu(l_);R_&&ga._updateProgress(R_),l_=yield _t.ma()}const f_=yield _g.complete();return yield B4(B,f_.Lu,void 0),yield function(R_,V_){const Y_=EI(R_);return Y_.persistence.runTransaction("Save bundle","readwrite",R0=>Y_._s.saveBundleMetadata(R0,V_))}(B.localStore,_h),ga._completeWith(f_.progress),Promise.resolve(f_.Bu)}catch(_h){return J7("SyncEngine",`Loading bundle failed with ${_h}`),ga._failWith(_h),Promise.resolve(new Set)}var R_}),function(B,_t,ga){return _.apply(this,arguments)})(d,e,i).then(_=>{d.sharedClientState.notifyBundleLoaded(_)})}(yield nL(o),_,d)}))}(i,o._databaseId,e,d),d}(this._delegate,e)}namedQuery(e){return function uie(o,e){return function Jge(o,e){return o.asyncQueue.enqueue((0,b0.Z)(function*(){return function(i,d){const _=EI(i);return _.persistence.runTransaction("Get named query","readonly",B=>_._s.getNamedQuery(B,d))}(yield tX(o),e)}))}(lO(o=Z1(o,wT)),e).then(i=>i?new uO(o,null,i.query):null)}(this._delegate,e).then(i=>i?new nP(this,i):null)}}class gX extends vG{constructor(e){super(),this.firestore=e}convertBytes(e){return new fX(new bN(e))}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return jM.forKey(i,this.firestore,null)}}class Tme{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new gX(e)}get(e){const i=EG(e);return this._delegate.get(i).then(d=>new wY(this._firestore,new G6(this._firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,i.converter)))}set(e,i,d){const _=EG(e);return d?(hX("Transaction.set",d),this._delegate.set(_,i,d)):this._delegate.set(_,i),this}update(e,i,d,..._){const B=EG(e);return 2===arguments.length?this._delegate.update(B,i):this._delegate.update(B,i,d,..._),this}delete(e){const i=EG(e);return this._delegate.delete(i),this}}class Hle{constructor(e){this._delegate=e}set(e,i,d){const _=EG(e);return d?(hX("WriteBatch.set",d),this._delegate.set(_,i,d)):this._delegate.set(_,i),this}update(e,i,d,..._){const B=EG(e);return 2===arguments.length?this._delegate.update(B,i):this._delegate.update(B,i,d,..._),this}delete(e){const i=EG(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class _F{constructor(e,i,d){this._firestore=e,this._userDataWriter=i,this._delegate=d}fromFirestore(e,i){const d=new Q6(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TY(this._firestore,d),null!=i?i:{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){const d=_F.INSTANCES;let _=d.get(e);_||(_=new WeakMap,d.set(e,_));let B=_.get(i);return B||(B=new _F(e,new gX(e),i),_.set(i,B)),B}}_F.INSTANCES=new WeakMap;class jM{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new gX(e)}static forPath(e,i,d){if(e.length%2!=0)throw new Q0("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new jM(i,new sT(i._delegate,d,new uI(e)))}static forKey(e,i,d){return new jM(i,new sT(i._delegate,d,e))}get id(){return this._delegate.id}get parent(){return new k9(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new k9(this.firestore,eme(this._delegate,e))}catch(i){throw c2(i,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,M_.m9)(e))instanceof sT&&tme(this._delegate,e)}set(e,i){i=hX("DocumentReference.set",i);try{return i?yme(this._delegate,e,i):yme(this._delegate,e)}catch(d){throw c2(d,"setDoc()","DocumentReference.set()")}}update(e,i,...d){try{return 1===arguments.length?Ple(this._delegate,e):Ple(this._delegate,e,i,...d)}catch(_){throw c2(_,"updateDoc()","DocumentReference.update()")}}delete(){return function pye(o){return yG(Z1(o.firestore,wT),[new kZ(o._key,sO.none())])}(this._delegate)}onSnapshot(...e){const i=JO(e),d=Sme(e,_=>new wY(this.firestore,new G6(this.firestore._delegate,this._userDataWriter,_._key,_._document,_.metadata,this._delegate.converter)));return Eme(this._delegate,i,d)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function kle(o){o=Z1(o,sT);const e=Z1(o.firestore,wT),i=lO(e),d=new N9(e);return function ple(o,e){const i=new kR;return o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return(d=(0,b0.Z)(function*(_,B,_t){try{const ga=yield function(_h,_g){const l_=EI(_h);return l_.persistence.runTransaction("read document","readonly",f_=>l_.fi.Ls(f_,_g))}(_,B);ga.isFoundDocument()?_t.resolve(ga):ga.isNoDocument()?_t.resolve(null):_t.reject(new Q0(C0.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(ga){const _h=b9(ga,`Failed to get document '${B} from cache`);_t.reject(_h)}}),function(_,B,_t){return d.apply(this,arguments)})(yield tX(o),e,i);var d})),i.promise}(i,o._key).then(_=>new G6(e,d,o._key,_,new AG(null!==_&&_.hasLocalMutations,!0),o.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function mme(o){o=Z1(o,sT);const e=Z1(o.firestore,wT);return R9(lO(e),o._key,{source:"server"}).then(i=>mie(e,o,i))}(this._delegate):function Nle(o){o=Z1(o,sT);const e=Z1(o.firestore,wT);return R9(lO(e),o._key).then(i=>mie(e,o,i))}(this._delegate),i.then(d=>new wY(this.firestore,new G6(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)))}withConverter(e){return new jM(this.firestore,this._delegate.withConverter(e?_F.getInstance(this.firestore,e):null))}}function c2(o,e,i){return o.message=o.message.replace(e,i),o}function JO(o){for(const e of o)if("object"==typeof e&&!pX(e))return e;return{}}function Sme(o,e){var i,d;let _;return _=pX(o[0])?o[0]:pX(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]},{next:B=>{_.next&&_.next(e(B))},error:null===(i=_.error)||void 0===i?void 0:i.bind(_),complete:null===(d=_.complete)||void 0===d?void 0:d.bind(_)}}class wY{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new jM(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return wle(this._delegate,e._delegate)}}class TY extends wY{data(e){const i=this._delegate.data(e);return function L_e(o,e){o||kI()}(void 0!==i),i}}class nP{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new gX(e)}where(e,i,d){try{return new nP(this.firestore,a2(this._delegate,function Tle(o,e,i){const d=e,_=lX("where",o);return new aye(_,d,i)}(e,i,d)))}catch(_){throw c2(_,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new nP(this.firestore,a2(this._delegate,function cye(o,e="asc"){const i=e,d=lX("orderBy",o);return new lme(d,i)}(e,i)))}catch(d){throw c2(d,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new nP(this.firestore,a2(this._delegate,function uye(o){return rX("limit",o),new dme("limit",o,"F")}(e)))}catch(i){throw c2(i,"limit()","Query.limit()")}}limitToLast(e){try{return new nP(this.firestore,a2(this._delegate,function lye(o){return rX("limitToLast",o),new dme("limitToLast",o,"L")}(e)))}catch(i){throw c2(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new nP(this.firestore,a2(this._delegate,function dye(...o){return new fie("startAt",o,!0)}(...e)))}catch(i){throw c2(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new nP(this.firestore,a2(this._delegate,function hye(...o){return new fie("startAfter",o,!1)}(...e)))}catch(i){throw c2(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new nP(this.firestore,a2(this._delegate,function hme(...o){return new Sle("endBefore",o,!1)}(...e)))}catch(i){throw c2(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new nP(this.firestore,a2(this._delegate,function pie(...o){return new Sle("endAt",o,!0)}(...e)))}catch(i){throw c2(i,"endAt()","Query.endAt()")}}isEqual(e){return nme(this._delegate,e._delegate)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function _me(o){o=Z1(o,uO);const e=Z1(o.firestore,wT),i=lO(e),d=new N9(e);return function ZU(o,e){const i=new kR;return o.asyncQueue.enqueueAndForget((0,b0.Z)(function*(){return(d=(0,b0.Z)(function*(_,B,_t){try{const ga=yield QZ(_,B,!0),_h=new Bge(B,ga._i),_g=_h.Wu(ga.documents),l_=_h.applyChanges(_g,!1);_t.resolve(l_.snapshot)}catch(ga){const _h=b9(ga,`Failed to execute query '${B} against cache`);_t.reject(_h)}}),function(_,B,_t){return d.apply(this,arguments)})(yield tX(o),e,i);var d})),i.promise}(i,o._query).then(_=>new _G(e,d,o,_))}(this._delegate):"server"===(null==e?void 0:e.source)?function vme(o){o=Z1(o,uO);const e=Z1(o.firestore,wT),i=lO(e),d=new N9(e);return Yge(i,o._query,{source:"server"}).then(_=>new _G(e,d,o,_))}(this._delegate):function Ame(o){o=Z1(o,uO);const e=Z1(o.firestore,wT),i=lO(e),d=new N9(e);return ume(o._query),Yge(i,o._query).then(_=>new _G(e,d,o,_))}(this._delegate),i.then(d=>new _ie(this.firestore,new _G(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)))}onSnapshot(...e){const i=JO(e),d=Sme(e,_=>new _ie(this.firestore,new _G(this.firestore._delegate,this._userDataWriter,this._delegate,_._snapshot)));return Eme(this._delegate,i,d)}withConverter(e){return new nP(this.firestore,this._delegate.withConverter(e?_F.getInstance(this.firestore,e):null))}}class Aye{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new TY(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _ie{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new nP(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new TY(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new Aye(this._firestore,i))}forEach(e,i){this._delegate.forEach(d=>{e.call(i,new TY(this._firestore,d))})}isEqual(e){return wle(this._delegate,e._delegate)}}class k9 extends nP{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new jM(this.firestore,e):null}doc(e){try{return new jM(this.firestore,void 0===e?iX(this._delegate):iX(this._delegate,e))}catch(i){throw c2(i,"doc()","CollectionReference.doc()")}}add(e){return function dX(o,e){const i=Z1(o.firestore,wT),d=iX(o),_=bY(o.converter,e);return yG(i,[vY(mG(o.firestore),"addDoc",d._key,_,null!==o.converter,{}).toMutation(d._key,sO.exists(!1))]).then(()=>d)}(this._delegate,e).then(i=>new jM(this.firestore,i))}isEqual(e){return tme(this._delegate,e._delegate)}withConverter(e){return new k9(this.firestore,this._delegate.withConverter(e?_F.getInstance(this.firestore,e):null))}}function EG(o){return Z1(o,sT)}class vie{constructor(...e){this._delegate=new F4(...e)}static documentId(){return new vie(CO.keyField().canonicalString())}isEqual(e){return(e=(0,M_.m9)(e))instanceof F4&&this._delegate._internalPath.isEqual(e._internalPath)}}class P9{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Lle(){return new EY("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new P9(e)}static delete(){const e=function xle(){return new yY("deleteField")}();return e._methodName="FieldValue.delete",new P9(e)}static arrayUnion(...e){const i=function Mle(...o){return new die("arrayUnion",o)}(...e);return i._methodName="FieldValue.arrayUnion",new P9(i)}static arrayRemove(...e){const i=function Ble(...o){return new Ele("arrayRemove",o)}(...e);return i._methodName="FieldValue.arrayRemove",new P9(i)}static increment(e){const i=function Ule(o){return new Ile("increment",o)}(e);return i._methodName="FieldValue.increment",new P9(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _ye={Firestore:Qle,GeoPoint:gG,Timestamp:PR,Blob:fX,Transaction:Tme,WriteBatch:Hle,DocumentReference:jM,DocumentSnapshot:wY,Query:nP,QueryDocumentSnapshot:TY,QuerySnapshot:_ie,CollectionReference:k9,FieldPath:vie,FieldValue:P9,setLogLevel:function wme(o){!function fpe(o){q8.setLogLevel(o)}(o)},CACHE_SIZE_UNLIMITED:-1};function Dme(o,e){return function Ome(o,e=xP.z){return new UT.y(i=>{let d;return null!=e?e.schedule(()=>{d=o.onSnapshot({includeMetadataChanges:!0},i)}):d=o.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=d&&d()}})}(o,e)}function e3(o,e){return Dme(o,e).pipe((0,RI.U)(i=>({payload:i,type:"query"})))}function yie(o,e){return e3(o,e).pipe(jN(void 0),T0(),(0,RI.U)(([i,d])=>{const _=d.payload.docChanges(),B=_.map(_t=>({type:_t.type,payload:_t}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(d.payload.metadata)&&d.payload.docs.forEach((_t,ga)=>{const _h=_.find(l_=>l_.doc.ref.isEqual(_t.ref)),_g=null==i?void 0:i.payload.docs.find(l_=>l_.ref.isEqual(_t.ref));_h&&JSON.stringify(_h.doc.metadata)===JSON.stringify(_t.metadata)||!_h&&_g&&JSON.stringify(_g.metadata)===JSON.stringify(_t.metadata)||B.push({type:"modified",payload:{oldIndex:ga,newIndex:ga,type:"modified",doc:_t}})}),B}))}function kme(o,e,i){return yie(o,i).pipe(xO((d,_)=>function yye(o,e,i){return e.forEach(d=>{i.indexOf(d.type)>-1&&(o=function Eye(o,e){switch(e.type){case"added":if(!o[e.newIndex]||!o[e.newIndex].doc.ref.isEqual(e.doc.ref))return qle(o,e.newIndex,0,e);break;case"modified":if(null==o[e.oldIndex]||o[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=o.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return qle(o,e.newIndex,1,e)}break;case"removed":if(o[e.oldIndex]&&o[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qle(o,e.oldIndex,1)}return o}(o,d))}),o}(d,_.map(B=>B.payload),e),[]),nJ(),(0,RI.U)(d=>d.map(_=>({type:_.type,payload:_}))))}function qle(o,e,i,...d){const _=o.slice();return _.splice(e,i,...d),_}function Pme(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}!function vye(o){(function Rme(o,e){o.INTERNAL.registerComponent(new LP.wA("firestore-compat",i=>{const d=i.getProvider("app-compat").getImmediate(),_=i.getProvider("firestore").getImmediate();return e(d,_)},"PUBLIC").setServiceProps(Object.assign({},_ye)))})(o,(e,i)=>new Qle(e,i,new Gle)),o.registerVersion("@firebase/firestore-compat","0.1.18")}(yV.Z);class xme{constructor(e,i,d){this.ref=e,this.query=i,this.afs=d}stateChanges(e){let i=yie(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,RI.U)(d=>d.filter(_=>e.indexOf(_.type)>-1)))),i.pipe(jN(void 0),T0(),zS(([d,_])=>_.length>0||!d),(0,RI.U)(([d,_])=>_),aT.iC)}auditTrail(e){return this.stateChanges(e).pipe(xO((i,d)=>[...i,...d],[]))}snapshotChanges(e){const i=Pme(e);return kme(this.query,i,this.afs.schedulers.outsideAngular).pipe(aT.iC)}valueChanges(e={}){return e3(this.query,this.afs.schedulers.outsideAngular).pipe((0,RI.U)(i=>i.payload.docs.map(d=>e.idField?Object.assign(Object.assign({},d.data()),{[e.idField]:d.id}):d.data())),aT.iC)}get(e){return(0,fT.D)(this.query.get(e)).pipe(aT.iC)}add(e){return this.ref.add(e)}doc(e){return new Lme(this.ref.doc(e),this.afs)}}class Lme{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const d=this.ref.collection(e),{ref:_,query:B}=Fme(d,i);return new xme(_,B,this.afs)}snapshotChanges(){return function Nme(o,e){return Dme(o,e).pipe(jN(void 0),T0(),(0,RI.U)(([i,d])=>d.exists?(null==i?void 0:i.exists)?{payload:d,type:"modified"}:{payload:d,type:"added"}:{payload:d,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(aT.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,RI.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,fT.D)(this.ref.get(e)).pipe(aT.iC)}}class Mme{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?yie(this.query,this.afs.schedulers.outsideAngular).pipe((0,RI.U)(i=>i.filter(d=>e.indexOf(d.type)>-1)),zS(i=>i.length>0),aT.iC):yie(this.query,this.afs.schedulers.outsideAngular).pipe(aT.iC)}auditTrail(e){return this.stateChanges(e).pipe(xO((i,d)=>[...i,...d],[]))}snapshotChanges(e){const i=Pme(e);return kme(this.query,i,this.afs.schedulers.outsideAngular).pipe(aT.iC)}valueChanges(e={}){return e3(this.query,this.afs.schedulers.outsideAngular).pipe((0,RI.U)(d=>d.payload.docs.map(_=>e.idField?Object.assign({[e.idField]:_.id},_.data()):_.data())),aT.iC)}get(e){return(0,fT.D)(this.query.get(e)).pipe(aT.iC)}}const Bme=new f.OlP("angularfire2.enableFirestorePersistence"),Ume=new f.OlP("angularfire2.firestore.persistenceSettings"),Iye=new f.OlP("angularfire2.firestore.settings"),bye=new f.OlP("angularfire2.firestore.use-emulator");function Fme(o,e=(i=>i)){return{query:e(o),ref:o}}let Wle=(()=>{class o{constructor(i,d,_,B,_t,ga,_h,_g,l_,f_,R_,V_,Y_,R0,V0,J0,MI){this.schedulers=_h;const LI=(0,bR.on)(i,ga,d),DI=l_;f_&&c6(LI,ga,R_,Y_,R0,V0,V_,J0),[this.firestore,this.persistenceEnabled$]=(0,bR.cc)(`${LI.name}.firestore`,"AngularFirestore",LI.name,()=>{const y1=ga.runOutsideAngular(()=>LI.firestore());if(B&&y1.settings(B),DI&&y1.useEmulator(...DI),_&&!aL(_t)){const H1=()=>{try{return(0,fT.D)(y1.enablePersistence(_g||void 0).then(()=>!0,()=>!1))}catch(BR){return"undefined"!=typeof console&&console.warn(BR),mI(!1)}};return[y1,ga.runOutsideAngular(H1)]}return[y1,mI(!1)]},[B,DI,_])}collection(i,d){let _;_="string"==typeof i?this.firestore.collection(i):i;const{ref:B,query:_t}=Fme(_,d),ga=this.schedulers.ngZone.run(()=>B);return new xme(ga,_t,this)}collectionGroup(i,d){const _=d||(_t=>_t),B=this.firestore.collectionGroup(i);return new Mme(_(B),this)}doc(i){let d;d="string"==typeof i?this.firestore.doc(i):i;const _=this.schedulers.ngZone.run(()=>d);return new Lme(_,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(bR.Dh),f.LFG(bR.xv,8),f.LFG(Bme,8),f.LFG(Iye,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(aT.HU),f.LFG(Ume,8),f.LFG(bye,8),f.LFG(iK,8),f.LFG(eK,8),f.LFG(tK,8),f.LFG(nK,8),f.LFG(M$,8),f.LFG(rK,8),f.LFG(T7,8),f.LFG(a6,8))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),Cye=(()=>{class o{constructor(){XW.Z.registerVersion("angularfire",aT.q4.full,"fst-compat")}static enablePersistence(i){return{ngModule:o,providers:[{provide:Bme,useValue:!0},{provide:Ume,useValue:i}]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({providers:[Wle]}),o})(),jme=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=f.oAB({type:o,bootstrap:[Lhe]}),o.\u0275inj=f.cJS({providers:[bH,IH,YM],imports:[[tU,Phe,LX,Rhe,bR.hO.initializeApp(fae_firebaseConfig),oK,Cye,m6,s_,Gie.forRoot(),x2.forRoot()]]}),o})();(0,f.G48)(),g3().bootstrapModule(jme).catch(o=>console.error(o))},3890:function(h,l,g){var f=g(8926).default;h.exports=function(){"use strict";var k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},q=function(s){return s&&s.Math==Math&&s},_r=q("object"==typeof globalThis&&globalThis)||q("object"==typeof window&&window)||q("object"==typeof self&&self)||q("object"==typeof k&&k)||function(){return this}()||Function("return this")(),_s={},_a=function(s){try{return!!s()}catch(p){return!0}},_l=!_a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),bh=!_a(function(){var s=function(){}.bind();return"function"!=typeof s||s.hasOwnProperty("prototype")}),_A=Function.prototype.call,r_=bh?_A.bind(_A):function(){return _A.apply(_A,arguments)},p_={},I_={}.propertyIsEnumerable,v_=Object.getOwnPropertyDescriptor,S_=v_&&!I_.call({1:2},1);p_.f=S_?function(s){var p=v_(this,s);return!!p&&p.enumerable}:I_;var x_,B_,Q_=function(s,p){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:p}},_0=bh,c0=Function.prototype,h0=c0.call,E0=_0&&c0.bind.bind(h0,h0),H_=_0?function(s){return s&&E0(s)}:function(s){return s&&function(){return h0.apply(s,arguments)}},e0=H_,P_=e0({}.toString),Rv=e0("".slice),E_=function(s){return Rv(P_(s),8,-1)},F_=_a,J_=E_,z_=_r.Object,D0=H_("".split),O0=F_(function(){return!z_("z").propertyIsEnumerable(0)})?function(s){return"String"==J_(s)?D0(s,""):z_(s)}:z_,CI=_r.TypeError,tI=function(s){if(null==s)throw CI("Can't call method on "+s);return s},K0=O0,B1=tI,A1=function(s){return K0(B1(s))},FI=function(s){return"function"==typeof s},_w=FI,uT=function(s){return"object"==typeof s?null!==s:_w(s)},U1=_r,S1=FI,wN=function(s){return S1(s)?s:void 0},ET=function(s,p){return arguments.length<2?wN(U1[s]):U1[s]&&U1[s][p]},xT=H_({}.isPrototypeOf),XT=ET("navigator","userAgent")||"",TN=XT,VR=_r.process,_D=_r.Deno,KI=VR&&VR.versions||_D&&_D.version,fO=KI&&KI.v8;fO&&(B_=(x_=fO.split("."))[0]>0&&x_[0]<4?1:+(x_[0]+x_[1])),!B_&&TN&&(!(x_=TN.match(/Edge\/(\d+)/))||x_[1]>=74)&&(x_=TN.match(/Chrome\/(\d+)/))&&(B_=+x_[1]);var TT=B_,qT=TT,GR=!!Object.getOwnPropertySymbols&&!_a(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&qT&&qT<41}),CS=GR&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,eS=ET,SO=FI,rL=xT,PI=_r.Object,JI=CS?function(s){return"symbol"==typeof s}:function(s){var p=eS("Symbol");return SO(p)&&rL(p.prototype,PI(s))},mR=_r.String,iR=function(s){try{return mR(s)}catch(p){return"Object"}},P1=FI,iL=iR,AR=_r.TypeError,tS=function(s){if(P1(s))return s;throw AR(iL(s)+" is not a function")},$_=tS,_E=function(s,p){var A=s[p];return null==A?void 0:$_(A)},r0=r_,M0=FI,_y=uT,m0=_r.TypeError,G0={exports:{}},II=_r,qI=Object.defineProperty,XI=function(s,p){try{qI(II,s,{value:p,configurable:!0,writable:!0})}catch(A){II[s]=p}return p},_b="__core-js_shared__",nS=_r[_b]||XI(_b,{}),_R=nS;(G0.exports=function(s,p){return _R[s]||(_R[s]=void 0!==p?p:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var i3=tI,qM=_r.Object,SN=function(s){return qM(i3(s))},WM=SN,wS=H_({}.hasOwnProperty),eT=Object.hasOwn||function(s,p){return wS(WM(s),p)},u2=H_,TS=0,pO=Math.random(),W6=u2(1..toString),l2=function(s){return"Symbol("+(void 0===s?"":s)+")_"+W6(++TS+pO,36)},KM=_r,QS=eT,HL=l2,QR=GR,gI=CS,NI=(0,G0.exports)("wks"),Q1=KM.Symbol,HR=Q1&&Q1.for,RN=gI?Q1:Q1&&Q1.withoutSetter||HL,E1=function(s){if(!QS(NI,s)||!QR&&"string"!=typeof NI[s]){var p="Symbol."+s;NI[s]=QR&&QS(Q1,s)?Q1[s]:gI&&HR?HR(p):RN(p)}return NI[s]},ON=r_,mT=uT,RO=JI,rS=_E,oP=_r.TypeError,o3=E1("toPrimitive"),sP=function(s,p){if(!mT(s)||RO(s))return s;var A,y=rS(s,o3);if(y){if(void 0===p&&(p="default"),A=ON(y,s,p),!mT(A)||RO(A))return A;throw oP("Can't convert object to primitive value")}return void 0===p&&(p="number"),function(s,p){var A,y;if("string"===p&&M0(A=s.toString)&&!_y(y=r0(A,s))||M0(A=s.valueOf)&&!_y(y=r0(A,s))||"string"!==p&&M0(A=s.toString)&&!_y(y=r0(A,s)))return y;throw m0("Can't convert object to primitive value")}(s,p)},HS=JI,DN=function(s){var p=sP(s,"string");return HS(p)?p:p+""},d2=uT,WT=_r.document,hT=d2(WT)&&d2(WT.createElement),oL=function(s){return hT?WT.createElement(s):{}},zM=oL,qR=!_l&&!_a(function(){return 7!=Object.defineProperty(zM("div"),"a",{get:function(){return 7}}).a}),s3=r_,K6=p_,kN=Q_,PN=A1,H4=DN,B9=eT,z6=qR,oR=Object.getOwnPropertyDescriptor;_s.f=_l?oR:function(s,p){if(s=PN(s),p=H4(p),z6)try{return oR(s,p)}catch(A){}if(B9(s,p))return kN(!s3(K6.f,s,p),s[p])};var bT={},q4=_l&&_a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),h2=uT,U9=_r.String,Y6=_r.TypeError,SS=function(s){if(h2(s))return s;throw Y6(U9(s)+" is not an object")},F9=qR,YM=SS,wG=DN,$6=_r.TypeError,cP=Object.defineProperty,TG=Object.getOwnPropertyDescriptor;bT.f=_l?q4?function(s,p,A){if(YM(s),p=wG(p),YM(A),"function"==typeof s&&"prototype"===p&&"value"in A&&"writable"in A&&!A.writable){var y=TG(s,p);y&&y.writable&&(s[p]=A.value,A={configurable:"configurable"in A?A.configurable:y.configurable,enumerable:"enumerable"in A?A.enumerable:y.enumerable,writable:!1})}return cP(s,p,A)}:cP:function(s,p,A){if(YM(s),p=wG(p),YM(A),F9)try{return cP(s,p,A)}catch(y){}if("get"in A||"set"in A)throw $6("Accessors not supported");return"value"in A&&(s[p]=A.value),s};var X6=bT,vR=Q_,RS=_l?function(s,p,A){return X6.f(s,p,vR(1,A))}:function(s,p,A){return s[p]=A,s},iS={exports:{}},WL=FI,c3=nS,SG=H_(Function.toString);WL(c3.inspectSource)||(c3.inspectSource=function(s){return SG(s)});var sL,eN,f2,qS=c3.inspectSource,WR=qS,aL=_r.WeakMap,OO=FI(aL)&&/native code/.test(WR(aL)),t5=l2,u3=(0,G0.exports)("keys"),uP=function(s){return u3[s]||(u3[s]=t5(s))},$M={},tT=H_,ZM=uT,cL=RS,Y1=eT,l3=uP,lP=$M,WS="Object already initialized",XM=_r.TypeError;if(OO||nS.state){var sR=nS.state||(nS.state=new(0,_r.WeakMap)),aR=tT(sR.get),dP=tT(sR.has),p2=tT(sR.set);sL=function(s,p){if(dP(sR,s))throw new XM(WS);return p.facade=s,p2(sR,s,p),p},eN=function(s){return aR(sR,s)||{}},f2=function(s){return dP(sR,s)}}else{var LN=l3("state");lP[LN]=!0,sL=function(s,p){if(Y1(s,LN))throw new XM(WS);return p.facade=s,cL(s,LN,p),p},eN=function(s){return Y1(s,LN)?s[LN]:{}},f2=function(s){return Y1(s,LN)}}var MT={set:sL,get:eN,has:f2,enforce:function(s){return f2(s)?eN(s):sL(s,{})},getterFor:function(s){return function(p){var A;if(!ZM(p)||(A=eN(p)).type!==s)throw XM("Incompatible receiver, "+s+" required");return A}}},DO=_l,zI=Function.prototype,hP=DO&&Object.getOwnPropertyDescriptor,_B=eT(zI,"name"),lL={EXISTS:_B,PROPER:_B&&"something"===function(){}.name,CONFIGURABLE:_B&&(!DO||DO&&hP(zI,"name").configurable)},K4=_r,eU=FI,d3=eT,h3=RS,zL=XI,j0=qS,R1=lL.CONFIGURABLE,YL=MT.get,ST=MT.enforce,f3=String(String).split("String");(iS.exports=function(s,p,A,y){var w,$=!!y&&!!y.unsafe,j=!!y&&!!y.enumerable,_e=!!y&&!!y.noTargetGet,K=y&&void 0!==y.name?y.name:p;eU(A)&&("Symbol("===String(K).slice(0,7)&&(K="["+String(K).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!d3(A,"name")||R1&&A.name!==K)&&h3(A,"name",K),(w=ST(A)).source||(w.source=f3.join("string"==typeof K?K:""))),s!==K4?($?!_e&&s[p]&&(j=!0):delete s[p],j?s[p]=A:h3(s,p,A)):j?s[p]=A:zL(p,A)})(Function.prototype,"toString",function(){return eU(this)&&YL(this).source||j0(this)});var tN={},NO=Math.ceil,z4=Math.floor,MN=function(s){var p=+s;return p!=p||0===p?0:(p>0?z4:NO)(p)},Y4=MN,r5=Math.max,j9=Math.min,kO=function(s,p){var A=Y4(s);return A<0?r5(A+p,0):j9(A,p)},yR=MN,PO=Math.min,g2=function(s){return s>0?PO(yR(s),9007199254740991):0},fP=g2,OS=function(s){return fP(s.length)},J4=A1,p3=kO,g3=OS,m3=function(s){return function(p,A,y){var w,$=J4(p),j=g3($),_e=p3(y,j);if(s&&A!=A){for(;j>_e;)if((w=$[_e++])!=w)return!0}else for(;j>_e;_e++)if((s||_e in $)&&$[_e]===A)return s||_e||0;return!s&&-1}},tU={includes:m3(!0),indexOf:m3(!1)},JL=eT,A3=A1,i5=tU.indexOf,o5=$M,nU=H_([].push),pP=function(s,p){var A,y=A3(s),w=0,$=[];for(A in y)!JL(o5,A)&&JL(y,A)&&nU($,A);for(;p.length>w;)JL(y,A=p[w++])&&(~i5($,A)||nU($,A));return $},_3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$L=pP,s5=_3.concat("length","prototype");tN.f=Object.getOwnPropertyNames||function(s){return $L(s,s5)};var rU={};rU.f=Object.getOwnPropertySymbols;var gO=ET,RG=tN,$4=rU,KS=SS,dL=H_([].concat),gS=gO("Reflect","ownKeys")||function(s){var p=RG.f(KS(s)),A=$4.f;return A?dL(p,A(s)):p},a5=eT,EX=gS,kY=_s,c5=bT,u5=function(s,p,A){for(var y=EX(p),w=c5.f,$=kY.f,j=0;j<y.length;j++){var _e=y[j];a5(s,_e)||A&&a5(A,_e)||w(s,_e,$(p,_e))}},PY=_a,iU=FI,m2=/#|\.prototype\./,nN=function(s,p){var A=l5[DS(s)];return A==hL||A!=V9&&(iU(p)?PY(p):!!p)},DS=nN.normalize=function(s){return String(s).replace(m2,".").toLowerCase()},l5=nN.data={},V9=nN.NATIVE="N",hL=nN.POLYFILL="P",gP=nN,ZL=_r,d5=_s.f,BN=RS,oU=iS.exports,G9=XI,fT=u5,XL=gP,mI=function(s,p){var A,y,w,$,j,_e=s.target,K=s.global,_i=s.stat;if(A=K?ZL:_i?ZL[_e]||G9(_e,{}):(ZL[_e]||{}).prototype)for(y in p){if($=p[y],w=s.noTargetGet?(j=d5(A,y))&&j.value:A[y],!XL(K?y:_e+(_i?".":"#")+y,s.forced)&&void 0!==w){if(typeof $==typeof w)continue;fT($,w)}(s.sham||w&&w.sham)&&BN($,"sham",!0),oU(A,y,$,s)}},BT=_r.Promise,KR=iS.exports,UT=function(s,p,A){for(var y in p)KR(s,y,p[y],A);return s},h5=FI,tM=_r.String,mP=_r.TypeError,oS=H_,AP=SS,RI=Object.setPrototypeOf||("__proto__"in{}?function(){var s,p=!1,A={};try{(s=oS(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(A,[]),p=A instanceof Array}catch(y){}return function(y,w){return AP(y),function(s){if("object"==typeof s||h5(s))return s;throw mP("Can't set "+tM(s)+" as a prototype")}(w),p?s(y,w):y.__proto__=w,y}}():void 0),f5=bT.f,p5=eT,v3=E1("toStringTag"),fL=function(s,p,A){s&&!A&&(s=s.prototype),s&&!p5(s,v3)&&f5(s,v3,{configurable:!0,value:p})},sS=ET,_P=bT,nM=_l,vP=E1("species"),mS=function(s){var p=sS(s);nM&&p&&!p[vP]&&(0,_P.f)(p,vP,{configurable:!0,get:function(){return this}})},pL=xT,yP=_r.TypeError,UN=function(s,p){if(pL(p,s))return s;throw yP("Incorrect invocation")},EP=tS,rM=bh,IP=H_(H_.bind),FN=function(s,p){return EP(s),void 0===p?s:rM?IP(s,p):function(){return s.apply(p,arguments)}},bP={},sU=bP,A2=E1("iterator"),gL=Array.prototype,aS=function(s){return void 0!==s&&(sU.Array===s||gL[A2]===s)},y3={};y3[E1("toStringTag")]="z";var CP=_r,KT="[object z]"===String(y3),mL=FI,jN=E_,_2=E1("toStringTag"),xO=CP.Object,zS="Arguments"==jN(function(){return arguments}()),cR=KT?jN:function(s){var p,A,y;return void 0===s?"Undefined":null===s?"Null":"string"==typeof(A=function(w,$){try{return w[$]}catch(j){}}(p=xO(s),_2))?A:zS?jN(p):"Object"==(y=jN(p))&&mL(p.callee)?"Arguments":y},NS=cR,LO=_E,E3=bP,Z4=E1("iterator"),RT=function(s){if(null!=s)return LO(s,Z4)||LO(s,"@@iterator")||E3[NS(s)]},OG=r_,xY=tS,iM=SS,mO=iR,g5=RT,wP=_r.TypeError,X4=function(s,p){var A=arguments.length<2?g5(s):p;if(xY(A))return iM(OG(A,s));throw wP(mO(s)+" is not iterable")},v2=r_,I3=SS,AS=_E,aU=FN,b3=r_,m5=SS,DG=iR,ER=aS,zR=OS,oM=xT,sM=X4,y2=RT,E2=function(s,p,A){var y,w;I3(s);try{if(!(y=AS(s,"return"))){if("throw"===p)throw A;return A}y=v2(y,s)}catch($){w=!0,y=$}if("throw"===p)throw A;if(w)throw y;return I3(y),A},I2=_r.TypeError,b2=function(s,p){this.stopped=s,this.result=p},_1=b2.prototype,lj=E1("iterator"),AL=!1;try{var IR=0,aM={next:function(){return{done:!!IR++}},return:function(){AL=!0}};aM[lj]=function(){return this},Array.from(aM,function(){throw 2})}catch(s){}var _L=function(s,p){if(!p&&!AL)return!1;var A=!1;try{var y={};y[lj]=function(){return{next:function(){return{done:A=!0}}}},s(y)}catch(w){}return A},Q9=H_,C2=_a,MO=FI,C3=cR,A5=qS,iN=function(){},_5=[],AT=ET("Reflect","construct"),kS=/^\s*(?:class|function)\b/,mj=Q9(kS.exec),NG=!kS.exec(iN),BO=function(s){if(!MO(s))return!1;try{return AT(iN,_5,s),!0}catch(p){return!1}},vL=function(s){if(!MO(s))return!1;switch(C3(s)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return NG||!!mj(kS,A5(s))}catch(p){return!0}};vL.sham=!0;var w2,c_,d_,T_,W_=!AT||C2(function(){var s;return BO(BO.call)||!BO(Object)||!BO(function(){s=!0})||s})?vL:BO,p0=W_,y0=iR,P0=_r.TypeError,yI=function(s){if(p0(s))return s;throw P0(y0(s)+" is not a constructor")},SI=SS,VI=yI,q1=E1("species"),_C=function(s,p){var A,y=SI(s).constructor;return void 0===y||null==(A=SI(y)[q1])?p:VI(A)},PS=Function.prototype,VN=PS.apply,oN=PS.call,YR="object"==typeof Reflect&&Reflect.apply||(bh?oN.bind(VN):function(){return oN.apply(VN,arguments)}),uR=ET("document","documentElement"),T2=H_([].slice),S2=/(?:ipad|iphone|ipod).*applewebkit/i.test(XT),cM="process"==E_(_r.process),JR=_r,_j=YR,v5=FN,y5=FI,kG=eT,E5=_a,cU=uR,kj=T2,I5=oL,IX=S2,H9=cM,jj=JR.setImmediate,b5=JR.clearImmediate,w3=JR.process,R2=JR.Dispatch,T3=JR.Function,S3=JR.MessageChannel,C5=JR.String,uM=0,sN={};try{w2=JR.location}catch(s){}var W9=function(s){if(kG(sN,s)){var p=sN[s];delete sN[s],p()}},O2=function(s){return function(){W9(s)}},$j=function(s){W9(s.data)},eV=function(s){JR.postMessage(C5(s),w2.protocol+"//"+w2.host)};jj&&b5||(jj=function(s){var p=kj(arguments,1);return sN[++uM]=function(){_j(y5(s)?s:T3(s),void 0,p)},c_(uM),uM},b5=function(s){delete sN[s]},H9?c_=function(s){w3.nextTick(O2(s))}:R2&&R2.now?c_=function(s){R2.now(O2(s))}:S3&&!IX?(T_=(d_=new S3).port2,d_.port1.onmessage=$j,c_=v5(T_.postMessage,T_)):JR.addEventListener&&y5(JR.postMessage)&&!JR.importScripts&&w2&&"file:"!==w2.protocol&&!E5(eV)?(c_=eV,JR.addEventListener("message",$j,!1)):c_="onreadystatechange"in I5("script")?function(s){cU.appendChild(I5("script")).onreadystatechange=function(){cU.removeChild(this),W9(s)}}:function(s){setTimeout(O2(s),0)});var uU,TP,aN,lU,dU,PG,xG,K9,AO={set:jj,clear:b5},SP=_r,R3=/ipad|iphone|ipod/i.test(XT)&&void 0!==SP.Pebble,z9=/web0s(?!.*chrome)/i.test(XT),yL=_r,Y9=FN,LG=AO.set,MG=S2,J9=R3,$9=z9,O3=cM,Z9=yL.MutationObserver||yL.WebKitMutationObserver,X9=yL.document,lM=yL.process,EL=yL.Promise,w5=(0,_s.f)(yL,"queueMicrotask"),cN=w5&&w5.value;cN||(uU=function(){var s,p;for(O3&&(s=lM.domain)&&s.exit();TP;){p=TP.fn,TP=TP.next;try{p()}catch(A){throw TP?lU():aN=void 0,A}}aN=void 0,s&&s.enter()},MG||O3||$9||!Z9||!X9?!J9&&EL&&EL.resolve?((xG=EL.resolve(void 0)).constructor=EL,K9=Y9(xG.then,xG),lU=function(){K9(uU)}):O3?lU=function(){lM.nextTick(uU)}:(LG=Y9(LG,yL),lU=function(){LG(uU)}):(dU=!0,PG=X9.createTextNode(""),new Z9(uU).observe(PG,{characterData:!0}),lU=function(){PG.data=dU=!dU}));var nV=cN||function(s){var p={fn:s,next:void 0};aN&&(aN.next=p),TP||(TP=p,lU()),aN=p},D3={},rV=tS,IL=function(s){var p,A;this.promise=new s(function(y,w){if(void 0!==p||void 0!==A)throw TypeError("Bad Promise constructor");p=y,A=w}),this.resolve=rV(p),this.reject=rV(A)};D3.f=function(s){return new IL(s)};var eH=SS,N3=uT,bX=D3,k3=function(s,p){if(eH(s),N3(p)&&p.constructor===s)return p;var A=bX.f(s);return(0,A.resolve)(p),A.promise},BG=_r,T5=function(){this.head=null,this.tail=null};T5.prototype={add:function(s){var p={item:s,next:null};this.head?this.tail.next=p:this.head=p,this.tail=p},get:function(){var s=this.head;if(s)return this.head=s.next,this.tail===s&&(this.tail=null),s.item}};var P3,iV,UG,hU,LY="object"==typeof window,sV=mI,uN=_r,x3=ET,RP=r_,dM=BT,$R=iS.exports,cS=UT,S5=RI,R5=fL,fU=mS,O5=tS,aV=FI,MY=uT,BY=UN,pU=qS,FG=function(s,p,A){var y,w,$,j,_e,K,_i,_u=!(!A||!A.AS_ENTRIES),ch=!(!A||!A.IS_ITERATOR),_f=!(!A||!A.INTERRUPTED),o_=aU(p,A&&A.that),i_=function(g_){return y&&E2(y,"normal",g_),new b2(!0,g_)},u_=function(g_){return _u?(m5(g_),_f?o_(g_[0],g_[1],i_):o_(g_[0],g_[1])):_f?o_(g_,i_):o_(g_)};if(ch)y=s;else{if(!(w=y2(s)))throw I2(DG(s)+" is not iterable");if(ER(w)){for($=0,j=zR(s);j>$;$++)if((_e=u_(s[$]))&&oM(_1,_e))return _e;return new b2(!1)}y=sM(s,w)}for(K=y.next;!(_i=b3(K,y)).done;){try{_e=u_(_i.value)}catch(g_){E2(y,"throw",g_)}if("object"==typeof _e&&_e&&oM(_1,_e))return _e}return new b2(!1)},tH=_L,jG=_C,gU=AO.set,vS=nV,D5=k3,cV=D3,xS=function(s){try{return{error:!1,value:s()}}catch(p){return{error:!0,value:p}}},L3=T5,uV=MT,lV=gP,UY=LY,lR=cM,bL=TT,GG=E1("species"),OP="Promise",hM=uV.getterFor(OP),QG=uV.set,dV=uV.getterFor(OP),DP=dM&&dM.prototype,NP=dM,ZR=DP,hV=uN.TypeError,HG=uN.document,qG=uN.process,CL=cV.f,nH=CL,UO=!!(HG&&HG.createEvent&&uN.dispatchEvent),N5=aV(uN.PromiseRejectionEvent),k5="unhandledrejection",rH=!1,_O=lV(OP,function(){var s=pU(NP),p=s!==String(NP);if(!p&&66===bL)return!0;if(bL>=51&&/native code/.test(s))return!1;var A=new NP(function(w){w(1)}),y=function(w){w(function(){},function(){})};return(A.constructor={})[GG]=y,!(rH=A.then(function(){})instanceof y)||!p&&UY&&!N5}),fV=_O||!tH(function(s){NP.all(s).catch(function(){})}),WG=function(s){var p;return!(!MY(s)||!aV(p=s.then))&&p},KG=function(s,p){var A,y,w,$=p.value,j=1==p.state,_e=j?s.ok:s.fail,K=s.resolve,_i=s.reject,_o=s.domain;try{_e?(j||(2===p.rejection&&sH(p),p.rejection=1),!0===_e?A=$:(_o&&_o.enter(),A=_e($),_o&&(_o.exit(),w=!0)),A===s.promise?_i(hV("Promise-chain cycle")):(y=WG(A))?RP(y,A,K,_i):K(A)):_i($)}catch(_u){_o&&!w&&_o.exit(),_i(_u)}},iH=function(s,p){s.notified||(s.notified=!0,vS(function(){for(var A,y=s.reactions;A=y.get();)KG(A,s);s.notified=!1,p&&!s.rejection&&oH(s)}))},P5=function(s,p,A){var y,w;UO?((y=HG.createEvent("Event")).promise=p,y.reason=A,y.initEvent(s,!1,!0),uN.dispatchEvent(y)):y={promise:p,reason:A},!N5&&(w=uN["on"+s])?w(y):s===k5&&function(s,p){var A=BG.console;A&&A.error&&(1==arguments.length?A.error(s):A.error(s,p))}("Unhandled promise rejection",A)},oH=function(s){RP(gU,uN,function(){var p,A=s.facade,y=s.value;if(FY(s)&&(p=xS(function(){lR?qG.emit("unhandledRejection",y,A):P5(k5,A,y)}),s.rejection=lR||FY(s)?2:1,p.error))throw p.value})},FY=function(s){return 1!==s.rejection&&!s.parent},sH=function(s){RP(gU,uN,function(){var p=s.facade;lR?qG.emit("rejectionHandled",p):P5("rejectionhandled",p,s.value)})},GN=function(s,p,A){return function(y){s(p,y,A)}},Nf=function(s,p,A){s.done||(s.done=!0,A&&(s=A),s.value=p,s.state=2,iH(s,!0))},_c=function(s,p,A){if(!s.done){s.done=!0,A&&(s=A);try{if(s.facade===p)throw hV("Promise can't be resolved itself");var y=WG(p);y?vS(function(){var w={done:!1};try{RP(y,p,GN(_c,w,s),GN(Nf,w,s))}catch($){Nf(w,$,s)}}):(s.value=p,s.state=1,iH(s,!1))}catch(w){Nf({done:!1},w,s)}}};if(_O&&(ZR=(NP=function(s){BY(this,ZR),O5(s),RP(P3,this);var p=hM(this);try{s(GN(_c,p),GN(Nf,p))}catch(A){Nf(p,A)}}).prototype,(P3=function(s){QG(this,{type:OP,done:!1,notified:!1,parent:!1,reactions:new L3,rejection:!1,state:0,value:void 0})}).prototype=cS(ZR,{then:function(s,p){var A=dV(this),y=CL(jG(this,NP));return A.parent=!0,y.ok=!aV(s)||s,y.fail=aV(p)&&p,y.domain=lR?qG.domain:void 0,0==A.state?A.reactions.add(y):vS(function(){KG(y,A)}),y.promise},catch:function(s){return this.then(void 0,s)}}),iV=function(){var s=new P3,p=hM(s);this.promise=s,this.resolve=GN(_c,p),this.reject=GN(Nf,p)},cV.f=CL=function(s){return s===NP||s===UG?new iV(s):nH(s)},aV(dM)&&DP!==Object.prototype)){hU=DP.then,rH||($R(DP,"then",function(s,p){var A=this;return new NP(function(y,w){RP(hU,A,y,w)}).then(s,p)},{unsafe:!0}),$R(DP,"catch",ZR.catch,{unsafe:!0}));try{delete DP.constructor}catch(s){}S5&&S5(DP,ZR)}sV({global:!0,wrap:!0,forced:_O},{Promise:NP}),R5(NP,OP,!1),fU(OP),UG=x3(OP),sV({target:OP,stat:!0,forced:_O},{reject:function(s){var p=CL(this);return RP(p.reject,void 0,s),p.promise}}),sV({target:OP,stat:!0,forced:_O},{resolve:function(s){return D5(this,s)}}),sV({target:OP,stat:!0,forced:fV},{all:function(s){var p=this,A=CL(p),y=A.resolve,w=A.reject,$=xS(function(){var j=O5(p.resolve),_e=[],K=0,_i=1;FG(s,function(_o){var _u=K++,ch=!1;_i++,RP(j,p,_o).then(function(_f){ch||(ch=!0,_e[_u]=_f,--_i||y(_e))},w)}),--_i||y(_e)});return $.error&&w($.value),A.promise},race:function(s){var p=this,A=CL(p),y=A.reject,w=xS(function(){var $=O5(p.resolve);FG(s,function(j){RP($,p,j).then(A.resolve,y)})});return w.error&&y(w.value),A.promise}});var ah=mI,m_=YR,O_=H_,s0=_a,N0=_r.Array,nI=ET("JSON","stringify"),_I=O_(/./.exec),GI=O_("".charAt),QI=O_("".charCodeAt),uS=O_("".replace),FO=O_(1..toString),M3=/[\uD800-\uDFFF]/g,x5=/^[\uD800-\uDBFF]$/,zG=/^[\uDC00-\uDFFF]$/,mU=function(s,p,A){var y=GI(A,p-1),w=GI(A,p+1);return _I(x5,s)&&!_I(zG,w)||_I(zG,s)&&!_I(x5,y)?"\\u"+FO(QI(s,0),16):s},pV=s0(function(){return'"\\udf06\\ud834"'!==nI("\udf06\ud834")||'"\\udead"'!==nI("\udead")});nI&&ah({target:"JSON",stat:!0,forced:pV},{stringify:function(s,p,A){for(var y=0,w=arguments.length,$=N0(w);y<w;y++)$[y]=arguments[y];var j=m_(nI,null,$);return"string"==typeof j?uS(j,M3,mU):j}});var OT=function(s){try{return!!s()}catch(p){return!0}},gV=!OT(function(){var s=function(){}.bind();return"function"!=typeof s||s.hasOwnProperty("prototype")}),lS=gV,L5=Function.prototype,B3=L5.call,mV=lS&&L5.bind.bind(B3,B3),nT=lS?function(s){return s&&mV(s)}:function(s){return s&&function(){return B3.apply(s,arguments)}},D2=nT({}.isPrototypeOf),JG=function(s){return s&&s.Math==Math&&s},e1=JG("object"==typeof globalThis&&globalThis)||JG("object"==typeof window&&window)||JG("object"==typeof self&&self)||JG("object"==typeof k&&k)||function(){return this}()||Function("return this")(),$G=Function.prototype,jY=$G.apply,aH=$G.call,VY="object"==typeof Reflect&&Reflect.apply||(gV?aH.bind(jY):function(){return aH.apply(jY,arguments)}),FT=function(s){return"function"==typeof s},kP={},N2=!OT(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ZG=Function.prototype.call,vO=gV?ZG.bind(ZG):function(){return ZG.apply(ZG,arguments)},cH={},GY={}.propertyIsEnumerable,uH=Object.getOwnPropertyDescriptor,TX=uH&&!GY.call({1:2},1);cH.f=TX?function(s){var p=uH(this,s);return!!p&&p.enumerable}:GY;var fM,XG,k2=function(s,p){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:p}},eQ=nT,SX=eQ({}.toString),lH=eQ("".slice),M5=function(s){return lH(SX(s),8,-1)},b0=OT,OX=M5,tQ=e1.Object,AU=nT("".split),dH=b0(function(){return!tQ("z").propertyIsEnumerable(0)})?function(s){return"String"==OX(s)?AU(s,""):tQ(s)}:tQ,DX=e1.TypeError,B5=function(s){if(null==s)throw DX("Can't call method on "+s);return s},NX=dH,Sie=B5,pM=function(s){return NX(Sie(s))},PP=FT,P2=function(s){return"object"==typeof s?null!==s:PP(s)},_U={},QY=_U,QN=e1,kX=FT,hH=function(s){return kX(s)?s:void 0},wL=function(s,p){return arguments.length<2?hH(QY[s])||hH(QN[s]):QY[s]&&QY[s][p]||QN[s]&&QN[s][p]},TL=wL("navigator","userAgent")||"",nQ=TL,rQ=e1.process,iQ=e1.Deno,HY=rQ&&rQ.versions||iQ&&iQ.version,fH=HY&&HY.v8;fH&&(XG=(fM=fH.split("."))[0]>0&&fM[0]<4?1:+(fM[0]+fM[1])),!XG&&nQ&&(!(fM=nQ.match(/Edge\/(\d+)/))||fM[1]>=74)&&(fM=nQ.match(/Chrome\/(\d+)/))&&(XG=+fM[1]);var t1=XG,pH=t1,gH=!!Object.getOwnPropertySymbols&&!OT(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&pH&&pH<41}),mH=gH&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,gM=wL,Rie=FT,ide=D2,U3=e1.Object,AH=mH?function(s){return"symbol"==typeof s}:function(s){var p=gM("Symbol");return Rie(p)&&ide(p.prototype,U3(s))},Oie=e1.String,U5=function(s){try{return Oie(s)}catch(p){return"Object"}},ode=FT,WY=U5,xX=e1.TypeError,HN=function(s){if(ode(s))return s;throw xX(WY(s)+" is not a function")},oQ=HN,sQ=function(s,p){var A=s[p];return null==A?void 0:oQ(A)},AV=vO,aQ=FT,Die=P2,sde=e1.TypeError,_H={exports:{}},LX=e1,ade=Object.defineProperty,kie="__core-js_shared__",F5=e1[kie]||function(s,p){try{ade(LX,s,{value:p,configurable:!0,writable:!0})}catch(A){LX[s]=p}return p}(kie,{}),cde=F5;(_H.exports=function(s,p){return cde[s]||(cde[s]=void 0!==p?p:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var Pie=B5,xie=e1.Object,mM=function(s){return xie(Pie(s))},vH=mM,sAe=nT({}.hasOwnProperty),lN=Object.hasOwn||function(s,p){return sAe(vH(s),p)},MX=nT,BX=0,aAe=Math.random(),Lie=MX(1..toString),Mie=function(s){return"Symbol("+(void 0===s?"":s)+")_"+Lie(++BX+aAe,36)},cAe=e1,ude=lN,_V=Mie,cQ=gH,Bie=mH,uQ=(0,_H.exports)("wks"),F3=cAe.Symbol,yH=F3&&F3.for,KY=Bie?F3:F3&&F3.withoutSetter||_V,LS=function(s){if(!ude(uQ,s)||!cQ&&"string"!=typeof uQ[s]){var p="Symbol."+s;uQ[s]=cQ&&ude(F3,s)?F3[s]:Bie&&yH?yH(p):KY(p)}return uQ[s]},j3=vO,zY=P2,UX=AH,YY=sQ,Fie=e1.TypeError,jie=LS("toPrimitive"),lQ=function(s,p){if(!zY(s)||UX(s))return s;var A,y=YY(s,jie);if(y){if(void 0===p&&(p="default"),A=j3(y,s,p),!zY(A)||UX(A))return A;throw Fie("Can't convert object to primitive value")}return void 0===p&&(p="number"),function(s,p){var A,y;if("string"===p&&aQ(A=s.toString)&&!Die(y=AV(A,s))||aQ(A=s.valueOf)&&!Die(y=AV(A,s))||"string"!==p&&aQ(A=s.toString)&&!Die(y=AV(A,s)))return y;throw sde("Can't convert object to primitive value")}(s,p)},j5=AH,dQ=function(s){var p=lQ(s,"string");return j5(p)?p:p+""},V5=P2,vV=e1.document,G5=V5(vV)&&V5(vV.createElement),Q5=function(s){return G5?vV.createElement(s):{}},JY=Q5,hQ=!N2&&!OT(function(){return 7!=Object.defineProperty(JY("div"),"a",{get:function(){return 7}}).a}),ZY=vO,jX=cH,EH=k2,Vie=pM,VX=dQ,XY=lN,GX=hQ,eJ=Object.getOwnPropertyDescriptor;kP.f=N2?eJ:function(s,p){if(s=Vie(s),p=VX(p),GX)try{return eJ(s,p)}catch(A){}if(XY(s,p))return EH(!ZY(jX.f,s,p),s[p])};var Gie=OT,Qie=FT,Hie=/#|\.prototype\./,fQ=function(s,p){var A=IH[x2(s)];return A==lde||A!=QX&&(Qie(p)?Gie(p):!!p)},x2=fQ.normalize=function(s){return String(s).replace(Hie,".").toLowerCase()},IH=fQ.data={},QX=fQ.NATIVE="N",lde=fQ.POLYFILL="P",qie=fQ,bH=HN,dde=gV,Wie=nT(nT.bind),xP=function(s,p){return bH(s),void 0===p?s:dde?Wie(s,p):function(){return s.apply(p,arguments)}},qN={},tJ=N2&&OT(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Kie=P2,HX=e1.String,zie=e1.TypeError,WN=function(s){if(Kie(s))return s;throw zie(HX(s)+" is not an object")},bR=hQ,yV=WN,LP=dQ,dS=e1.TypeError,M_=Object.defineProperty,SL=Object.getOwnPropertyDescriptor;qN.f=N2?tJ?function(s,p,A){if(yV(s),p=LP(p),yV(A),"function"==typeof s&&"prototype"===p&&"value"in A&&"writable"in A&&!A.writable){var y=SL(s,p);y&&y.writable&&(s[p]=A.value,A={configurable:"configurable"in A?A.configurable:y.configurable,enumerable:"enumerable"in A?A.enumerable:y.enumerable,writable:!1})}return M_(s,p,A)}:M_:function(s,p,A){if(yV(s),p=LP(p),yV(A),bR)try{return M_(s,p,A)}catch(y){}if("get"in A||"set"in A)throw dS("Accessors not supported");return"value"in A&&(s[p]=A.value),s};var WX=qN,$ie=k2,EV=N2?function(s,p,A){return WX.f(s,p,$ie(1,A))}:function(s,p,A){return s[p]=A,s},IV=e1,bV=VY,rJ=nT,vU=FT,wH=kP.f,KX=qie,MP=_U,yU=xP,V3=EV,zX=lN,yO=function(s){var p=function(A,y,w){if(this instanceof p){switch(arguments.length){case 0:return new s;case 1:return new s(A);case 2:return new s(A,y)}return new s(A,y,w)}return bV(s,this,arguments)};return p.prototype=s.prototype,p},zT=function(s,p){var A,y,w,$,j,_e,K,_i,_o=s.target,_u=s.global,ch=s.stat,_f=s.proto,o_=_u?IV:ch?IV[_o]:(IV[_o]||{}).prototype,i_=_u?MP:MP[_o]||V3(MP,_o,{})[_o],u_=i_.prototype;for(w in p)A=!KX(_u?w:_o+(ch?".":"#")+w,s.forced)&&o_&&zX(o_,w),j=i_[w],A&&(_e=s.noTargetGet?(_i=wH(o_,w))&&_i.value:o_[w]),$=A&&_e?_e:p[w],A&&typeof j==typeof $||(K=s.bind&&A?yU($,IV):s.wrap&&A?yO($):_f&&vU($)?rJ($):$,(s.sham||$&&$.sham||j&&j.sham)&&V3(K,"sham",!0),V3(i_,w,K),_f&&(zX(MP,y=_o+"Prototype")||V3(MP,y,{}),V3(MP[y],w,$),s.real&&u_&&!u_[w]&&V3(u_,w,$)))},YX=Math.ceil,AM=Math.floor,CR=function(s){var p=+s;return p!=p||0===p?0:(p>0?AM:YX)(p)},JX=CR,pQ=Math.min,XR=function(s){return function(s){return s>0?pQ(JX(s),9007199254740991):0}(s.length)},eO=HN,_M=mM,Zie=dH,gQ=XR,ZX=e1.TypeError,mQ=function(s){return function(p,A,y,w){eO(A);var $=_M(p),j=Zie($),_e=gQ($),K=s?_e-1:0,_i=s?-1:1;if(y<2)for(;;){if(K in j){w=j[K],K+=_i;break}if(K+=_i,s?K<0:_e<=K)throw ZX("Reduce of empty array with no initial value")}for(;s?K>=0:_e>K;K+=_i)K in j&&(w=A(w,j[K],K,$));return w}},wR={left:mQ(!1),right:mQ(!0)},TH=OT,CV=function(s,p){var A=[][s];return!!A&&TH(function(){A.call(null,p||function(){throw 1},1)})},SH="process"==M5(e1.process),iJ=wR.left,oJ=t1,sJ=SH;zT({target:"Array",proto:!0,forced:!CV("reduce")||!sJ&&oJ>79&&oJ<83},{reduce:function(s){var p=arguments.length;return iJ(this,s,p,p>1?arguments[1]:void 0)}});var RH=_U,RL=function(s){return RH[s+"Prototype"]},G3=RL("Array").reduce,Xie=D2,AQ=G3,OH=Array.prototype,wV=function(s){var p=s.reduce;return s===OH||Xie(OH,s)&&p===OH.reduce?AQ:p},BP=wV,DH=cR,XX=_r.String,UP=function(s){if("Symbol"===DH(s))throw TypeError("Cannot convert a Symbol value to a string");return XX(s)},eee=SS,aJ=function(){var s=eee(this),p="";return s.global&&(p+="g"),s.ignoreCase&&(p+="i"),s.multiline&&(p+="m"),s.dotAll&&(p+="s"),s.unicode&&(p+="u"),s.sticky&&(p+="y"),p},NH=_a,kH=_r.RegExp,L2=NH(function(){var s=kH("a","y");return s.lastIndex=2,null!=s.exec("abcd")}),_Q=L2||NH(function(){return!kH("a","y").sticky}),PH={BROKEN_CARET:L2||NH(function(){var s=kH("^r","gy");return s.lastIndex=2,null!=s.exec("str")}),MISSED_STICKY:_Q,UNSUPPORTED_Y:L2},vQ={},xH=pP,tee=_3,uJ=bT,LH=SS,hde=A1,ree=Object.keys||function(s){return xH(s,tee)};vQ.f=_l&&!q4?Object.defineProperties:function(s,p){LH(s);for(var A,y=hde(p),w=ree(p),$=w.length,j=0;$>j;)uJ.f(s,A=w[j++],y[A]);return s};var yQ,toe=SS,fde=vQ,noe=_3,MH=$M,iee=uR,lJ=oL,dJ=uP("IE_PROTO"),oee=function(){},FP=function(s){return"<script>"+s+"<\/script>"},roe=function(s){s.write(FP("")),s.close();var p=s.parentWindow.Object;return s=null,p},hJ=function(){try{yQ=new ActiveXObject("htmlfile")}catch(y){}var s,p;hJ="undefined"!=typeof document?document.domain&&yQ?roe(yQ):((p=lJ("iframe")).style.display="none",iee.appendChild(p),p.src=String("javascript:"),(s=p.contentWindow.document).open(),s.write(FP("document.F=Object")),s.close(),s.F):roe(yQ);for(var A=noe.length;A--;)delete hJ.prototype[noe[A]];return hJ()};MH[dJ]=!0;var s,p,Q3=Object.create||function(s,p){var A;return null!==s?(oee.prototype=toe(s),A=new oee,oee.prototype=null,A[dJ]=s):A=hJ(),void 0===p?A:fde.f(A,p)},see=_r.RegExp,pJ=_a(function(){var s=see(".","s");return!(s.dotAll&&s.exec("\n")&&"s"===s.flags)}),EU=_r.RegExp,H5=_a(function(){var s=EU("(?<a>b)","g");return"b"!==s.exec("b").groups.a||"bc"!=="b".replace(s,"$<a>c")}),q5=r_,W5=H_,BH=UP,K5=aJ,aee=PH,ooe=Q3,soe=MT.get,UH=pJ,H3=H5,cee=(0,G0.exports)("native-string-replace",String.prototype.replace),q3=RegExp.prototype.exec,FH=q3,aoe=W5("".charAt),jH=W5("".indexOf),OL=W5("".replace),W3=W5("".slice),TR=(p=/b*/g,q5(q3,s=/a/,"a"),q5(q3,p,"a"),0!==s.lastIndex||0!==p.lastIndex),K3=aee.BROKEN_CARET,TV=void 0!==/()??/.exec("")[1];(TR||TV||K3||UH||H3)&&(FH=function(s){var p,A,y,w,$,j,_e,K=this,_i=soe(K),_o=BH(s),_u=_i.raw;if(_u)return _u.lastIndex=K.lastIndex,p=q5(FH,_u,_o),K.lastIndex=_u.lastIndex,p;var ch=_i.groups,_f=K3&&K.sticky,o_=q5(K5,K),i_=K.source,u_=0,g_=_o;if(_f&&(o_=OL(o_,"y",""),-1===jH(o_,"g")&&(o_+="g"),g_=W3(_o,K.lastIndex),K.lastIndex>0&&(!K.multiline||K.multiline&&"\n"!==aoe(_o,K.lastIndex-1))&&(i_="(?: "+i_+")",g_=" "+g_,u_++),A=new RegExp("^(?:"+i_+")",o_)),TV&&(A=new RegExp("^"+i_+"$(?!\\s)",o_)),TR&&(y=K.lastIndex),w=q5(q3,_f?A:K,g_),_f?w?(w.input=W3(w.input,u_),w[0]=W3(w[0],u_),w.index=K.lastIndex,K.lastIndex+=w[0].length):K.lastIndex=0:TR&&w&&(K.lastIndex=K.global?w.index+w[0].length:y),TV&&w&&w.length>1&&q5(cee,w[0],A,function(){for($=1;$<arguments.length-2;$++)void 0===arguments[$]&&(w[$]=void 0)}),w&&ch)for(w.groups=j=ooe(null),$=0;$<ch.length;$++)j[(_e=ch[$])[0]]=w[_e[1]];return w});var jO=FH;mI({target:"RegExp",proto:!0,forced:/./.exec!==jO},{exec:jO});var VH=Q3,IU=bT,bU=E1("unscopables"),CU=Array.prototype;null==CU[bU]&&IU.f(CU,bU,{configurable:!0,value:VH(null)});var w1,F1,p1,M2=!_a(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}),cT=_r,z3=eT,uee=FI,z5=SN,gJ=M2,jT=uP("IE_PROTO"),I1=cT.Object,VO=I1.prototype,EQ=gJ?I1.getPrototypeOf:function(s){var p=z5(s);if(z3(p,jT))return p[jT];var A=p.constructor;return uee(A)&&p instanceof A?A.prototype:p instanceof I1?VO:null},GH=_a,B2=FI,lee=EQ,dee=iS.exports,mJ=E1("iterator"),AJ=!1;[].keys&&("next"in(p1=[].keys())?(F1=lee(lee(p1)))!==Object.prototype&&(w1=F1):AJ=!0),(null==w1||GH(function(){var s={};return w1[mJ].call(s)!==s}))&&(w1={}),B2(w1[mJ])||dee(w1,mJ,function(){return this});var vM={IteratorPrototype:w1,BUGGY_SAFARI_ITERATORS:AJ},_J=vM.IteratorPrototype,IQ=Q3,hee=Q_,coe=fL,vJ=bP,uoe=function(){return this},loe=mI,gde=r_,wU=FI,bQ=EQ,QH=RI,doe=fL,TU=RS,Y5=iS.exports,jP=bP,mde=lL.PROPER,KN=lL.CONFIGURABLE,SV=vM.IteratorPrototype,J5=vM.BUGGY_SAFARI_ITERATORS,Y3=E1("iterator"),RV="values",$5="entries",pee=function(){return this},OV=A1,HH=function(s){CU[bU][s]=!0},EJ=bP,hoe=bT.f,DT=_l,mee="Array Iterator",Aee=MT.set,CQ=MT.getterFor(mee),wQ=function(s,p,A,y,w,$,j){!function(s,p,A,y){var w=p+" Iterator";s.prototype=IQ(_J,{next:hee(+!y,A)}),coe(s,w,!1),vJ[w]=uoe}(A,p,y);var _e,K,_i,_o=function(g_){if(g_===w&&i_)return i_;if(!J5&&g_ in _f)return _f[g_];switch(g_){case"keys":case RV:case $5:return function(){return new A(this,g_)}}return function(){return new A(this)}},_u=p+" Iterator",ch=!1,_f=s.prototype,o_=_f[Y3]||_f["@@iterator"]||w&&_f[w],i_=!J5&&o_||_o(w),u_="Array"==p&&_f.entries||o_;if(u_&&(_e=bQ(u_.call(new s)))!==Object.prototype&&_e.next&&(bQ(_e)!==SV&&(QH?QH(_e,SV):wU(_e[Y3])||Y5(_e,Y3,pee)),doe(_e,_u,!0)),mde&&w==RV&&o_&&o_.name!==RV&&(KN?TU(_f,"name",RV):(ch=!0,i_=function(){return gde(o_,this)})),w)if(K={values:_o(RV),keys:$?i_:_o("keys"),entries:_o($5)},j)for(_i in K)(J5||ch||!(_i in _f))&&Y5(_f,_i,K[_i]);else loe({target:p,proto:!0,forced:J5||ch},K);return _f[Y3]!==i_&&Y5(_f,Y3,i_,{name:w}),jP[p]=i_,K}(Array,"Array",function(s,p){Aee(this,{type:mee,target:OV(s),index:0,kind:p})},function(){var s=CQ(this),p=s.target,A=s.kind,y=s.index++;return!p||y>=p.length?(s.target=void 0,{value:void 0,done:!0}):"keys"==A?{value:y,done:!1}:"values"==A?{value:p[y],done:!1}:{value:[y,p[y]],done:!1}},"values"),Z5=EJ.Arguments=EJ.Array;if(HH("keys"),HH("values"),HH("entries"),DT&&"values"!==Z5.name)try{hoe(Z5,"name",{value:"values"})}catch(s){}var U2=oL("span").classList,X5=U2&&U2.constructor&&U2.constructor.prototype,e8=_r,DV={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},IJ=X5===Object.prototype?void 0:X5,_T=wQ,TQ=RS,SQ=E1,J3=SQ("iterator"),SU=SQ("toStringTag"),qH=_T.values,bJ=function(s,p){if(s){if(s[J3]!==qH)try{TQ(s,J3,qH)}catch(y){s[J3]=qH}if(s[SU]||TQ(s,SU,p),DV[p])for(var A in _T)if(s[A]!==_T[A])try{TQ(s,A,_T[A])}catch(y){s[A]=_T[A]}}};for(var NV in DV)bJ(e8[NV]&&e8[NV].prototype,NV);bJ(IJ,"DOMTokenList");var WH=FI,CJ=uT,KH=RI,kV=function(s,p,A){var y,w;return KH&&WH(y=p.constructor)&&y!==A&&CJ(w=y.prototype)&&w!==A.prototype&&KH(s,w),s},PV=UP,RU=function(s,p){return void 0===s?arguments.length<2?"":p:PV(s)},xV=uT,_ee=RS,wJ=H_("".replace),t8=String(Error("zxcasd").stack),TJ=/\n\s*at [^:]*:[^\n]*/,n8=TJ.test(t8),zH=function(s,p){if(n8&&"string"==typeof s)for(;p--;)s=wJ(s,TJ,"");return s},poe=Q_,goe=!_a(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",poe(1,7)),7!==s.stack)}),YH=ET,vee=eT,LV=RS,yee=xT,r8=RI,JH=u5,SJ=kV,RQ=RU,Eee=function(s,p){xV(p)&&"cause"in p&&_ee(s,"cause",p.cause)},OQ=zH,MV=goe,RJ=mI,VP=YR,Iee=function(s,p,A,y){var w=y?2:1,$=s.split("."),j=$[$.length-1],_e=YH.apply(null,$);if(_e){var K=_e.prototype;if(vee(K,"cause")&&delete K.cause,!A)return _e;var _i=YH("Error"),_o=p(function(_u,ch){var _f=RQ(y?ch:_u,void 0),o_=y?new _e(_u):new _e;return void 0!==_f&&LV(o_,"message",_f),MV&&LV(o_,"stack",OQ(o_.stack,2)),this&&yee(K,this)&&SJ(o_,this,_o),arguments.length>w&&Eee(o_,arguments[w]),o_});_o.prototype=K,"Error"!==j&&(r8?r8(_o,_i):JH(_o,_i,{name:!0})),JH(_o,_e);try{K.name!==j&&LV(K,"name",j),K.constructor=_o}catch(_u){}return _o}},OJ=_r.WebAssembly,MS=7!==Error("e",{cause:7}).cause,$3=function(s,p){var A={};A[s]=Iee(s,p,MS),RJ({global:!0,forced:MS},A)},DJ=function(s,p){if(OJ&&OJ[s]){var A={};A[s]=Iee("WebAssembly."+s,p,MS),RJ({target:"WebAssembly",stat:!0,forced:MS},A)}};$3("Error",function(s){return function(p){return VP(s,this,arguments)}}),$3("EvalError",function(s){return function(p){return VP(s,this,arguments)}}),$3("RangeError",function(s){return function(p){return VP(s,this,arguments)}}),$3("ReferenceError",function(s){return function(p){return VP(s,this,arguments)}}),$3("SyntaxError",function(s){return function(p){return VP(s,this,arguments)}}),$3("TypeError",function(s){return function(p){return VP(s,this,arguments)}}),$3("URIError",function(s){return function(p){return VP(s,this,arguments)}}),DJ("CompileError",function(s){return function(p){return VP(s,this,arguments)}}),DJ("LinkError",function(s){return function(p){return VP(s,this,arguments)}}),DJ("RuntimeError",function(s){return function(p){return VP(s,this,arguments)}});let F2=!0,DQ=!0;function BV(s,p,A){const y=s.match(p);return y&&y.length>=A&&parseInt(y[A],10)}function OU(s,p,A){if(!s.RTCPeerConnection)return;const y=s.RTCPeerConnection.prototype,w=y.addEventListener;y.addEventListener=function(j,_e){if(j!==p)return w.apply(this,arguments);const K=_i=>{const _o=A(_i);_o&&(_e.handleEvent?_e.handleEvent(_o):_e(_o))};return this._eventMap=this._eventMap||{},this._eventMap[p]||(this._eventMap[p]=new Map),this._eventMap[p].set(_e,K),w.apply(this,[j,K])};const $=y.removeEventListener;y.removeEventListener=function(j,_e){if(j!==p||!this._eventMap||!this._eventMap[p])return $.apply(this,arguments);if(!this._eventMap[p].has(_e))return $.apply(this,arguments);const K=this._eventMap[p].get(_e);return this._eventMap[p].delete(_e),0===this._eventMap[p].size&&delete this._eventMap[p],0===Object.keys(this._eventMap).length&&delete this._eventMap,$.apply(this,[j,K])},Object.defineProperty(y,"on"+p,{get(){return this["_on"+p]},set(j){this["_on"+p]&&(this.removeEventListener(p,this["_on"+p]),delete this["_on"+p]),j&&this.addEventListener(p,this["_on"+p]=j)},enumerable:!0,configurable:!0})}function NQ(s){return"boolean"!=typeof s?new Error("Argument type: "+typeof s+". Please use a boolean."):(F2=s,s?"adapter.js logging disabled":"adapter.js logging enabled")}function yM(s){return"boolean"!=typeof s?new Error("Argument type: "+typeof s+". Please use a boolean."):(DQ=!s,"adapter.js deprecation warnings "+(s?"disabled":"enabled"))}function DU(){if("object"==typeof window){if(F2)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function NU(s,p){DQ&&console.warn(s+" is deprecated, please use "+p+" instead.")}function kU(s){const p={browser:null,version:null};if(void 0===s||!s.navigator)return p.browser="Not a browser.",p;const{navigator:A}=s;if(A.mozGetUserMedia)p.browser="firefox",p.version=BV(A.userAgent,/Firefox\/(\d+)\./,1);else if(A.webkitGetUserMedia||!1===s.isSecureContext&&s.webkitRTCPeerConnection&&!s.RTCIceGatherer)p.browser="chrome",p.version=BV(A.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(A.mediaDevices&&A.userAgent.match(/Edge\/(\d+).(\d+)$/))p.browser="edge",p.version=BV(A.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!s.RTCPeerConnection||!A.userAgent.match(/AppleWebKit\/(\d+)\./))return p.browser="Not a supported browser.",p;p.browser="safari",p.version=BV(A.userAgent,/AppleWebKit\/(\d+)\./,1),p.supportsUnifiedPlan=s.RTCRtpTransceiver&&"currentDirection"in s.RTCRtpTransceiver.prototype}return p}function Cee(s){return"[object Object]"===Object.prototype.toString.call(s)}function NJ(s){var p;return Cee(s)?BP(p=Object.keys(s)).call(p,function(A,y){const w=Cee(s[y]),$=w?NJ(s[y]):s[y],j=w&&!Object.keys($).length;return void 0===$||j?A:Object.assign(A,{[y]:$})},{}):s}function kQ(s,p,A){const y=A?"outbound-rtp":"inbound-rtp",w=new Map;if(null===p)return w;const $=[];return s.forEach(j=>{"track"===j.type&&j.trackIdentifier===p.id&&$.push(j)}),$.forEach(j=>{s.forEach(_e=>{_e.type===y&&_e.trackId===j.id&&function K(_i,_o,_u){_o&&!_u.has(_o.id)&&(_u.set(_o.id,_o),Object.keys(_o).forEach(ch=>{ch.endsWith("Id")?K(_i,_i.get(_o[ch]),_u):ch.endsWith("Ids")&&_o[ch].forEach(_f=>{K(_i,_i.get(_f),_u)})}))}(s,_e,w)})}),w}var PJ=Mie,zN=(0,_H.exports)("keys"),Z3=function(s){return zN[s]||(zN[s]=PJ(s))},xJ=!OT(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}),j2=e1,EO=lN,V2=FT,wee=mM,NT=xJ,GP=Z3("IE_PROTO"),UV=j2.Object,LJ=UV.prototype,$H=NT?UV.getPrototypeOf:function(s){var p=wee(s);if(EO(p,GP))return p[GP];var A=p.constructor;return V2(A)&&p instanceof A?A.prototype:p instanceof UV?LJ:null},DL=FT,Tee=e1.String,PU=e1.TypeError,MJ=nT,FV=WN,jV=Object.setPrototypeOf||("__proto__"in{}?function(){var s,p=!1,A={};try{(s=MJ(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(A,[]),p=A instanceof Array}catch(y){}return function(y,w){return FV(y),function(s){if("object"==typeof s||DL(s))return s;throw PU("Can't set "+Tee(s)+" as a prototype")}(w),p?s(y,w):y.__proto__=w,y}}():void 0),ZH={},See=CR,Ree=Math.max,UJ=Math.min,o8=function(s,p){var A=See(s);return A<0?Ree(A+p,0):UJ(A,p)},Oee=pM,Dee=o8,FJ=XR,XH=function(s){return function(p,A,y){var w,$=Oee(p),j=FJ($),_e=Dee(y,j);if(s&&A!=A){for(;j>_e;)if((w=$[_e++])!=w)return!0}else for(;j>_e;_e++)if((s||_e in $)&&$[_e]===A)return s||_e||0;return!s&&-1}},Nee={includes:XH(!0),indexOf:XH(!1)},PQ={},_q=lN,kee=pM,moe=Nee.indexOf,Aoe=PQ,xQ=nT([].push),eW=function(s,p){var A,y=kee(s),w=0,$=[];for(A in y)!_q(Aoe,A)&&_q(y,A)&&xQ($,A);for(;p.length>w;)_q(y,A=p[w++])&&(~moe($,A)||xQ($,A));return $},tW=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],nW=eW,_oe=tW.concat("length","prototype");ZH.f=Object.getOwnPropertyNames||function(s){return nW(s,_oe)};var s8={};s8.f=Object.getOwnPropertySymbols;var Pee=wL,xee=ZH,voe=s8,yoe=WN,Lee=nT([].concat),jJ=Pee("Reflect","ownKeys")||function(s){var p=xee.f(yoe(s)),A=voe.f;return A?Lee(p,A(s)):p},Mee=lN,Eoe=jJ,Ioe=kP,boe=qN,a8={},LQ=eW,rW=tW,c8=Object.keys||function(s){return LQ(s,rW)},iW=qN,Uee=WN,Fee=pM,jee=c8;a8.f=N2&&!tJ?Object.defineProperties:function(s,p){Uee(s);for(var A,y=Fee(p),w=jee(p),$=w.length,j=0;$>j;)iW.f(s,A=w[j++],y[A]);return s};var u8,X3=wL("document","documentElement"),Coe=WN,woe=a8,e4=tW,Ade=PQ,oW=X3,Toe=Q5,GJ=Z3("IE_PROTO"),MQ=function(){},sW=function(s){return"<script>"+s+"<\/script>"},$I=function(s){s.write(sW("")),s.close();var p=s.parentWindow.Object;return s=null,p},aW=function(){try{u8=new ActiveXObject("htmlfile")}catch(y){}var s,p;aW="undefined"!=typeof document?document.domain&&u8?$I(u8):((p=Toe("iframe")).style.display="none",oW.appendChild(p),p.src=String("javascript:"),(s=p.contentWindow.document).open(),s.write(sW("document.F=Object")),s.close(),s.F):$I(u8);for(var A=e4.length;A--;)delete aW.prototype[e4[A]];return aW()};Ade[GJ]=!0;var BQ=Object.create||function(s,p){var A;return null!==s?(MQ.prototype=Coe(s),A=new MQ,MQ.prototype=null,A[GJ]=s):A=aW(),void 0===p?A:woe.f(A,p)},Soe=nT("".replace),l8=String(Error("zxcasd").stack),QJ=/\n\s*at [^:]*:[^\n]*/,cW=QJ.test(l8),uW=P2,yS=EV,QP={},HJ=QP,Vee=LS("iterator"),t4=Array.prototype,d8=function(s){return void 0!==s&&(HJ.Array===s||t4[Vee]===s)},h8={};h8[LS("toStringTag")]="z";var lW="[object z]"===String(h8),Gee=e1,Roe=lW,Qee=FT,f8=M5,UQ=LS("toStringTag"),n4=Gee.Object,FQ="Arguments"==f8(function(){return arguments}()),xU=Roe?f8:function(s){var p,A,y;return void 0===s?"Undefined":null===s?"Null":"string"==typeof(A=function(w,$){try{return w[$]}catch(j){}}(p=n4(s),UQ))?A:FQ?f8(p):"Object"==(y=f8(p))&&Qee(p.callee)?"Arguments":y},dW=xU,qJ=sQ,hW=QP,Hee=LS("iterator"),fW=function(s){if(null!=s)return qJ(s,Hee)||qJ(s,"@@iterator")||hW[dW(s)]},p8=vO,r4=HN,Ooe=WN,g8=U5,qee=fW,WJ=e1.TypeError,jQ=function(s,p){var A=arguments.length<2?qee(s):p;if(r4(A))return Ooe(p8(A,s));throw WJ(g8(s)+" is not iterable")},VQ=vO,GQ=WN,pW=sQ,gW=function(s,p,A){var y,w;GQ(s);try{if(!(y=pW(s,"return"))){if("throw"===p)throw A;return A}y=VQ(y,s)}catch($){w=!0,y=$}if("throw"===p)throw A;if(w)throw y;return GQ(y),A},KJ=xP,_de=vO,mW=WN,vde=U5,yde=d8,Wee=XR,VV=D2,zJ=jQ,Doe=fW,AW=gW,QQ=e1.TypeError,_W=function(s,p){this.stopped=s,this.result=p},YJ=_W.prototype,m8=function(s,p,A){var y,w,$,j,_e,K,_i,_u=!(!A||!A.AS_ENTRIES),ch=!(!A||!A.IS_ITERATOR),_f=!(!A||!A.INTERRUPTED),o_=KJ(p,A&&A.that),i_=function(g_){return y&&AW(y,"normal",g_),new _W(!0,g_)},u_=function(g_){return _u?(mW(g_),_f?o_(g_[0],g_[1],i_):o_(g_[0],g_[1])):_f?o_(g_,i_):o_(g_)};if(ch)y=s;else{if(!(w=Doe(s)))throw QQ(vde(s)+" is not iterable");if(yde(w)){for($=0,j=Wee(s);j>$;$++)if((_e=u_(s[$]))&&VV(YJ,_e))return _e;return new _W(!1)}y=zJ(s,w)}for(K=y.next;!(_i=_de(K,y)).done;){try{_e=u_(_i.value)}catch(g_){AW(y,"throw",g_)}if("object"==typeof _e&&_e&&VV(YJ,_e))return _e}return new _W(!1)},JJ=xU,$J=e1.String,HP=function(s){if("Symbol"===JJ(s))throw TypeError("Cannot convert a Symbol value to a string");return $J(s)},GV=HP,ZJ=k2,QV=!OT(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",ZJ(1,7)),7!==s.stack)}),Noe=zT,HQ=e1,Kee=D2,zee=$H,i4=jV,Yee=BQ,A8=EV,XJ=k2,yW=function(s,p){if(cW&&"string"==typeof s)for(;p--;)s=Soe(s,QJ,"");return s},qQ=function(s,p){uW(p)&&"cause"in p&&yS(s,"cause",p.cause)},Jee=m8,koe=function(s,p){return void 0===s?arguments.length<2?"":p:GV(s)},WQ=QV,qP=LS("toStringTag"),o4=HQ.Error,$ee=[].push,_8=function(s,p){var A,y=arguments.length>2?arguments[2]:void 0,w=Kee(KQ,this);i4?A=i4(new o4,w?zee(this):KQ):(A=w?this:Yee(KQ),A8(A,qP,"Error")),void 0!==p&&A8(A,"message",koe(p)),WQ&&A8(A,"stack",yW(A.stack,1)),qQ(A,y);var $=[];return Jee(s,$ee,{that:$}),A8(A,"errors",$),A};i4?i4(_8,o4):function(s,p,A){for(var y=Eoe(p),w=boe.f,$=Ioe.f,j=0;j<y.length;j++){var _e=y[j];Mee(s,_e)||A&&Mee(A,_e)||w(s,_e,$(p,_e))}}(_8,o4,{name:!0});var KQ=_8.prototype=Yee(o4.prototype,{constructor:XJ(1,_8),message:XJ(1,""),name:XJ(1,"AggregateError")});Noe({global:!0},{AggregateError:_8});var zQ=FT,HV=F5,Poe=nT(Function.toString);zQ(HV.inspectSource)||(HV.inspectSource=function(s){return Poe(s)});var dN,v8,EW,qV=HV.inspectSource,WP=qV,e$=e1.WeakMap,Zee=FT(e$)&&/native code/.test(WP(e$)),n$=nT,xoe=P2,r$=EV,y8=lN,bW=Z3,Xee=PQ,ete="Object already initialized",WV=e1.TypeError;if(Zee||F5.state){var a4=F5.state||(F5.state=new(0,e1.WeakMap)),i$=n$(a4.get),o$=n$(a4.has),Loe=n$(a4.set);dN=function(s,p){if(o$(a4,s))throw new WV(ete);return p.facade=s,Loe(a4,s,p),p},v8=function(s){return i$(a4,s)||{}},EW=function(s){return o$(a4,s)}}else{var KV=bW("state");Xee[KV]=!0,dN=function(s,p){if(y8(s,KV))throw new WV(ete);return p.facade=s,r$(s,KV,p),p},v8=function(s){return y8(s,KV)?s[KV]:{}},EW=function(s){return y8(s,KV)}}var zV,tte,YQ,E8={set:dN,get:v8,has:EW,enforce:function(s){return EW(s)?v8(s):dN(s,{})},getterFor:function(s){return function(p){var A;if(!xoe(p)||(A=v8(p)).type!==s)throw WV("Incompatible receiver, "+s+" required");return A}}},EM=N2,nte=Function.prototype,JQ=EM&&Object.getOwnPropertyDescriptor,NL=lN(nte,"name"),rte={EXISTS:NL,PROPER:NL&&"something"===function(){}.name,CONFIGURABLE:NL&&(!EM||EM&&JQ(nte,"name").configurable)},s$=EV,LU=function(s,p,A,y){y&&y.enumerable?s[p]=A:s$(s,p,A)},Moe=OT,YV=FT,ite=BQ,$Q=$H,ZQ=LU,c4=LS("iterator"),XQ=!1;[].keys&&("next"in(YQ=[].keys())?(tte=$Q($Q(YQ)))!==Object.prototype&&(zV=tte):XQ=!0);var wW=null==zV||Moe(function(){var s={};return zV[c4].call(s)!==s});YV((zV=wW?{}:ite(zV))[c4])||ZQ(zV,c4,function(){return this});var e7={IteratorPrototype:zV,BUGGY_SAFARI_ITERATORS:XQ},Boe=xU,t7=lW,Foe=qN.f,joe=EV,ote=lN,ste=lW?{}.toString:function(){return"[object "+Boe(this)+"]"},u4=LS("toStringTag"),JS=function(s,p,A,y){if(s){var w=A?s:s.prototype;ote(w,u4)||Foe(w,u4,{configurable:!0,value:p}),y&&!t7&&joe(w,"toString",ste)}},MU=e7.IteratorPrototype,JV=BQ,n7=k2,KP=JS,b8=QP,a$=function(){return this},ate=function(s,p,A,y){var w=p+" Iterator";return s.prototype=JV(MU,{next:n7(+!y,A)}),KP(s,w,!1,!0),b8[w]=a$,s},l4=zT,cte=vO,Voe=ate,Goe=$H,TW=JS,ute=LU,lte=QP,Qoe=rte.PROPER,SW=e7.BUGGY_SAFARI_ITERATORS,C8=LS("iterator"),d4="values",h4="entries",c$=function(){return this},RW=function(s,p,A,y,w,$,j){Voe(A,p,y);var _e,K,_i,_o=function(g_){if(g_===w&&i_)return i_;if(!SW&&g_ in _f)return _f[g_];switch(g_){case"keys":case d4:case h4:return function(){return new A(this,g_)}}return function(){return new A(this)}},_u=p+" Iterator",ch=!1,_f=s.prototype,o_=_f[C8]||_f["@@iterator"]||w&&_f[w],i_=!SW&&o_||_o(w),u_="Array"==p&&_f.entries||o_;if(u_&&(_e=Goe(u_.call(new s)))!==Object.prototype&&_e.next&&(TW(_e,_u,!0,!0),lte[_u]=c$),Qoe&&w==d4&&o_&&o_.name!==d4&&(ch=!0,i_=function(){return cte(o_,this)}),w)if(K={values:_o(d4),keys:$?i_:_o("keys"),entries:_o(h4)},j)for(_i in K)(SW||ch||!(_i in _f))&&ute(_f,_i,K[_i]);else l4({target:p,proto:!0,forced:SW||ch},K);return j&&_f[C8]!==i_&&ute(_f,C8,i_,{name:w}),lte[p]=i_,K},u$=pM,OW=QP,kL=RW,l$="Array Iterator",Hoe=E8.set,qoe=E8.getterFor(l$);kL(Array,"Array",function(s,p){Hoe(this,{type:l$,target:u$(s),index:0,kind:p})},function(){var s=qoe(this),p=s.target,A=s.kind,y=s.index++;return!p||y>=p.length?(s.target=void 0,{value:void 0,done:!0}):"keys"==A?{value:y,done:!1}:"values"==A?{value:p[y],done:!1}:{value:[y,p[y]],done:!1}},"values"),OW.Arguments=OW.Array;var dte=e1.Promise,hte=LU,fte=function(s,p,A){for(var y in p)A&&A.unsafe&&s[y]?s[y]=p[y]:hte(s,y,p[y],A);return s},i7=wL,Woe=qN,d$=N2,PL=LS("species"),Koe=D2,h$=e1.TypeError,$V=function(s,p){if(Koe(p,s))return s;throw h$("Incorrect invocation")},pte=LS("iterator"),gte=!1;try{var zoe=0,o7={next:function(){return{done:!!zoe++}},return:function(){gte=!0}};o7[pte]=function(){return this},Array.from(o7,function(){throw 2})}catch(s){}var NW=nT,Yoe=OT,mte=FT,Ate=xU,_te=qV,YN=function(){},vte=[],kW=wL("Reflect","construct"),PW=/^\s*(?:class|function)\b/,Ede=NW(PW.exec),xW=!PW.exec(YN),ZV=function(s){if(!mte(s))return!1;try{return kW(YN,vte,s),!0}catch(p){return!1}},f$=function(s){if(!mte(s))return!1;switch(Ate(s)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return xW||!!Ede(PW,_te(s))}catch(p){return!0}};f$.sham=!0;var XV,f4,p$,g$,LW=!kW||Yoe(function(){var s;return ZV(ZV.call)||!ZV(Object)||!ZV(function(){s=!0})||s})?f$:ZV,Ide=LW,yte=U5,m$=e1.TypeError,A$=WN,Ete=LS("species"),_$=function(s,p){var A,y=A$(s).constructor;return void 0===y||null==(A=A$(y)[Ete])?p:function(s){if(Ide(s))return s;throw m$(yte(s)+" is not a constructor")}(A)},v$=nT([].slice),y$=/(?:ipad|iphone|ipod).*applewebkit/i.test(TL),JN=e1,$oe=VY,Zoe=xP,Xoe=FT,hN=lN,w8=OT,Ite=X3,bte=v$,ese=Q5,s7=y$,tse=SH,a7=JN.setImmediate,IM=JN.clearImmediate,tO=JN.process,fN=JN.Dispatch,c7=JN.Function,MW=JN.MessageChannel,Cte=JN.String,BW=0,p4={};try{XV=JN.location}catch(s){}var wte=function(s){if(hN(p4,s)){var p=p4[s];delete p4[s],p()}},UW=function(s){return function(){wte(s)}},E$=function(s){wte(s.data)},FW=function(s){JN.postMessage(Cte(s),XV.protocol+"//"+XV.host)};a7&&IM||(a7=function(s){var p=bte(arguments,1);return p4[++BW]=function(){$oe(Xoe(s)?s:c7(s),void 0,p)},f4(BW),BW},IM=function(s){delete p4[s]},tse?f4=function(s){tO.nextTick(UW(s))}:fN&&fN.now?f4=function(s){fN.now(UW(s))}:MW&&!s7?(g$=(p$=new MW).port2,p$.port1.onmessage=E$,f4=Zoe(g$.postMessage,g$)):JN.addEventListener&&Xoe(JN.postMessage)&&!JN.importScripts&&XV&&"file:"!==XV.protocol&&!w8(FW)?(f4=FW,JN.addEventListener("message",E$,!1)):f4="onreadystatechange"in ese("script")?function(s){Ite.appendChild(ese("script")).onreadystatechange=function(){Ite.removeChild(this),wte(s)}}:function(s){setTimeout(UW(s),0)});var bM,BU,g4,m4,jW,Tte,u7,nse,Ste={set:a7,clear:IM},Rte=e1,rse=/ipad|iphone|ipod/i.test(TL)&&void 0!==Rte.Pebble,ise=/web0s(?!.*chrome)/i.test(TL),e6=e1,ose=xP,I$=Ste.set,Cde=y$,sse=rse,ase=ise,l7=SH,b$=e6.MutationObserver||e6.WebKitMutationObserver,Ote=e6.document,SR=e6.process,G2=e6.Promise,S8=(0,kP.f)(e6,"queueMicrotask"),C$=S8&&S8.value;C$||(bM=function(){var s,p;for(l7&&(s=SR.domain)&&s.exit();BU;){p=BU.fn,BU=BU.next;try{p()}catch(A){throw BU?m4():g4=void 0,A}}g4=void 0,s&&s.enter()},Cde||l7||ase||!b$||!Ote?!sse&&G2&&G2.resolve?((u7=G2.resolve(void 0)).constructor=G2,nse=ose(u7.then,u7),m4=function(){nse(bM)}):l7?m4=function(){SR.nextTick(bM)}:(I$=ose(I$,e6),m4=function(){I$(bM)}):(jW=!0,Tte=Ote.createTextNode(""),new b$(bM).observe(Tte,{characterData:!0}),m4=function(){Tte.data=jW=!jW}));var wde=C$||function(s){var p={fn:s,next:void 0};g4&&(g4.next=p),BU||(BU=p,m4()),g4=p},d7={},cse=HN,use=function(s){var p,A;this.promise=new s(function(y,w){if(void 0!==p||void 0!==A)throw TypeError("Bad Promise constructor");p=y,A=w}),this.resolve=cse(p),this.reject=cse(A)};d7.f=function(s){return new use(s)};var Tde=WN,Sde=P2,Rde=d7,h7=function(s,p){if(Tde(s),Sde(p)&&p.constructor===s)return p;var A=Rde.f(s);return(0,A.resolve)(p),A.promise},$N=e1,A4=function(s){try{return{error:!1,value:s()}}catch(p){return{error:!0,value:p}}},f7=function(){this.head=null,this.tail=null};f7.prototype={add:function(s){var p={item:s,next:null};this.head?this.tail.next=p:this.head=p,this.tail=p},get:function(){var s=this.head;if(s)return this.head=s.next,this.tail===s&&(this.tail=null),s.item}};var VW,p7,g7,m7="object"==typeof window,t6=zT,UU=e1,Dte=wL,n6=vO,w$=dte,lse=fte,r6=JS,A7=HN,GW=FT,Ode=P2,dse=$V,hse=qV,kte=m8,T$=_$,_7=Ste.set,v7=wde,zP=h7,QW=d7,E7=A4,Pte=f7,I7=E8,HW=qie,S$=m7,b7=SH,C7=t1,pse=LS("species"),CM="Promise",xte=I7.getterFor(CM),R8=I7.set,FU=I7.getterFor(CM),Q2=w$,w7=w$&&w$.prototype,gse=UU.TypeError,WW=UU.document,O8=UU.process,D8=QW.f,Lte=D8,mse=!!(WW&&WW.createEvent&&UU.dispatchEvent),Mte=GW(UU.PromiseRejectionEvent),Ase="unhandledrejection",N8=HW(CM,function(){var s=hse(Q2),p=s!==String(Q2);if(!p&&66===C7||!w7.finally)return!0;if(C7>=51&&/native code/.test(s))return!1;var A=new Q2(function(w){w(1)}),y=function(w){w(function(){},function(){})};return(A.constructor={})[pse]=y,!(A.then(function(){})instanceof y)||!p&&S$&&!Mte}),Bte=N8||!function(s,p){if(!p&&!gte)return!1;var A=!1;try{var y={};y[pte]=function(){return{next:function(){return{done:A=!0}}}},s(y)}catch(w){}return A}(function(s){Q2.all(s).catch(function(){})}),Ute=function(s){var p;return!(!Ode(s)||!GW(p=s.then))&&p},Fte=function(s,p){var A,y,w,$=p.value,j=1==p.state,_e=j?s.ok:s.fail,K=s.resolve,_i=s.reject,_o=s.domain;try{_e?(j||(2===p.rejection&&O$(p),p.rejection=1),!0===_e?A=$:(_o&&_o.enter(),A=_e($),_o&&(_o.exit(),w=!0)),A===s.promise?_i(gse("Promise-chain cycle")):(y=Ute(A))?n6(y,A,K,_i):K(A)):_i($)}catch(_u){_o&&!w&&_o.exit(),_i(_u)}},R$=function(s,p){s.notified||(s.notified=!0,v7(function(){for(var A,y=s.reactions;A=y.get();)Fte(A,s);s.notified=!1,p&&!s.rejection&&KW(s)}))},i6=function(s,p,A){var y,w;mse?((y=WW.createEvent("Event")).promise=p,y.reason=A,y.initEvent(s,!1,!0),UU.dispatchEvent(y)):y={promise:p,reason:A},!Mte&&(w=UU["on"+s])?w(y):s===Ase&&function(s,p){var A=$N.console;A&&A.error&&(1==arguments.length?A.error(s):A.error(s,p))}("Unhandled promise rejection",A)},KW=function(s){n6(_7,UU,function(){var p,A=s.facade,y=s.value;if(zW(s)&&(p=E7(function(){b7?O8.emit("unhandledRejection",y,A):i6(Ase,A,y)}),s.rejection=b7||zW(s)?2:1,p.error))throw p.value})},zW=function(s){return 1!==s.rejection&&!s.parent},O$=function(s){n6(_7,UU,function(){var p=s.facade;b7?O8.emit("rejectionHandled",p):i6("rejectionhandled",p,s.value)})},o6=function(s,p,A){return function(y){s(p,y,A)}},s6=function(s,p,A){s.done||(s.done=!0,A&&(s=A),s.value=p,s.state=2,R$(s,!0))},D$=function(s,p,A){if(!s.done){s.done=!0,A&&(s=A);try{if(s.facade===p)throw gse("Promise can't be resolved itself");var y=Ute(p);y?v7(function(){var w={done:!1};try{n6(y,p,o6(D$,w,s),o6(s6,w,s))}catch($){s6(w,$,s)}}):(s.value=p,s.state=1,R$(s,!1))}catch(w){s6({done:!1},w,s)}}};N8&&(w7=(Q2=function(s){dse(this,w7),A7(s),n6(VW,this);var p=xte(this);try{s(o6(D$,p),o6(s6,p))}catch(A){s6(p,A)}}).prototype,(VW=function(s){R8(this,{type:CM,done:!1,notified:!1,parent:!1,reactions:new Pte,rejection:!1,state:0,value:void 0})}).prototype=lse(w7,{then:function(s,p){var A=FU(this),y=D8(T$(this,Q2));return A.parent=!0,y.ok=!GW(s)||s,y.fail=GW(p)&&p,y.domain=b7?O8.domain:void 0,0==A.state?A.reactions.add(y):v7(function(){Fte(y,A)}),y.promise},catch:function(s){return this.then(void 0,s)}}),p7=function(){var s=new VW,p=xte(s);this.promise=s,this.resolve=o6(D$,p),this.reject=o6(s6,p)},QW.f=D8=function(s){return s===Q2||s===g7?new p7(s):Lte(s)}),t6({global:!0,wrap:!0,forced:N8},{Promise:Q2}),r6(Q2,CM,!1,!0),function(s){var p=i7(s);d$&&p&&!p[PL]&&(0,Woe.f)(p,PL,{configurable:!0,get:function(){return this}})}(CM),g7=Dte(CM),t6({target:CM,stat:!0,forced:N8},{reject:function(s){var p=D8(this);return n6(p.reject,void 0,s),p.promise}}),t6({target:CM,stat:!0,forced:!0},{resolve:function(s){return zP(this===g7?Q2:this,s)}}),t6({target:CM,stat:!0,forced:Bte},{all:function(s){var p=this,A=D8(p),y=A.resolve,w=A.reject,$=E7(function(){var j=A7(p.resolve),_e=[],K=0,_i=1;kte(s,function(_o){var _u=K++,ch=!1;_i++,n6(j,p,_o).then(function(_f){ch||(ch=!0,_e[_u]=_f,--_i||y(_e))},w)}),--_i||y(_e)});return $.error&&w($.value),A.promise},race:function(s){var p=this,A=D8(p),y=A.reject,w=E7(function(){var $=A7(p.resolve);kte(s,function(j){n6($,p,j).then(A.resolve,y)})});return w.error&&y(w.value),A.promise}});var jte=vO,_se=HN,vse=d7,N$=A4,Vte=m8;zT({target:"Promise",stat:!0},{allSettled:function(s){var p=this,A=vse.f(p),y=A.resolve,w=A.reject,$=N$(function(){var j=_se(p.resolve),_e=[],K=0,_i=1;Vte(s,function(_o){var _u=K++,ch=!1;_i++,jte(j,p,_o).then(function(_f){ch||(ch=!0,_e[_u]={status:"fulfilled",value:_f},--_i||y(_e))},function(_f){ch||(ch=!0,_e[_u]={status:"rejected",reason:_f},--_i||y(_e))})}),--_i||y(_e)});return $.error&&w($.value),A.promise}});var Dde=HN,yse=wL,lAe=vO,dAe=d7,Gte=A4,hAe=m8,Ese="No one promise resolved";zT({target:"Promise",stat:!0},{any:function(s){var p=this,A=yse("AggregateError"),y=dAe.f(p),w=y.resolve,$=y.reject,j=Gte(function(){var _e=Dde(p.resolve),K=[],_i=0,_o=1,_u=!1;hAe(s,function(ch){var _f=_i++,o_=!1;_o++,lAe(_e,p,ch).then(function(i_){o_||_u||(_u=!0,w(i_))},function(i_){o_||_u||(o_=!0,K[_f]=i_,--_o||$(new A(K,Ese)))})}),--_o||$(new A(K,Ese))});return j.error&&$(j.value),y.promise}});var k$=dte,YW=wL,Qte=FT,P$=_$,a6=h7;zT({target:"Promise",proto:!0,real:!0,forced:!!k$&&OT(function(){k$.prototype.finally.call({then:function(){}},function(){})})},{finally:function(s){var p=P$(this,YW("Promise")),A=Qte(s);return this.then(A?function(y){return a6(p,s()).then(function(){return y})}:s,A?function(y){return a6(p,s()).then(function(){throw y})}:s)}});var _4=nT,JW=CR,Hte=HP,x$=B5,Nde=_4("".charAt),$W=_4("".charCodeAt),L$=_4("".slice),ZW=function(s){return function(p,A){var y,w,$=Hte(x$(p)),j=JW(A),_e=$.length;return j<0||j>=_e?s?"":void 0:(y=$W($,j))<55296||y>56319||j+1===_e||(w=$W($,j+1))<56320||w>57343?s?Nde($,j):y:s?L$($,j,j+2):w-56320+(y-55296<<10)+65536}},kde={codeAt:ZW(!1),charAt:ZW(!0)},Pde=kde.charAt,fAe=HP,Ise=RW,bse="String Iterator",Lde=E8.set,XW=E8.getterFor(bse);Ise(String,"String",function(s){Lde(this,{type:bse,string:fAe(s),index:0})},function(){var s,p=XW(this),A=p.string,y=p.index;return y>=A.length?{value:void 0,done:!0}:(s=Pde(A,y),p.index+=s.length,{value:s,done:!1})});var Cse=_U.Promise,tK=e1,nK=xU,M$=EV,rK=QP,T7=LS("toStringTag");for(var c6 in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var iK=tK[c6],oK=iK&&iK.prototype;oK&&nK(oK)!==T7&&M$(oK,T7,c6),rK[c6]=rK.Array}var sK=Cse,sI=sK,qte=cM,wse=_l,Wte=SS,S7=Q3,Sse=RU,aK=Error.prototype.toString,Mde=_a(function(){if(wse){var s=S7(Object.defineProperty({},"name",{get:function(){return this===s}}));if("true"!==aK.call(s))return!0}return"2: 1"!==aK.call({message:1,name:2})||"Error"!==aK.call({})})?function(){var s=Wte(this),p=Sse(s.name,"Error"),A=Sse(s.message);return p?A?p+": "+A:p:A}:aK,Rse={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},Ose=mI,cK=ET,zte=_a,Bde=Q3,Yte=Q_,I=bT.f,b=vQ.f,F=iS.exports,_n=eT,ca=UN,_d=SS,_p=Mde,t_=RU,s_=Rse,A_=zH,C_=MT,G_=_l,X_="DOMException",x0=cK("Error"),Y0=cK(X_)||function(){try{(new(cK("MessageChannel")||function(s){try{if(qte)return Function('return require("'+s+'")')()}catch(p){}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(s){if("DATA_CLONE_ERR"==s.name&&25==s.code)return s.constructor}}(),TI=x0.prototype,F0=C_.set,xI=C_.getterFor(X_),j1="stack"in x0(X_),d1=function(s){return _n(s_,s)&&s_[s].m?s_[s].c:0},BS=function(){ca(this,jU);var s=arguments.length,p=t_(s<1?void 0:arguments[0]),A=t_(s<2?void 0:arguments[1],"Error"),y=d1(A);if(F0(this,{type:X_,name:A,message:p,code:y}),G_||(this.name=A,this.message=p,this.code=y),j1){var w=x0(p);w.name=X_,I(this,"stack",Yte(1,A_(w.stack,1)))}},jU=BS.prototype=Bde(TI),B$=function(s){return{enumerable:!0,configurable:!0,get:s}},k8=function(s){return B$(function(){return xI(this)[s]})};G_&&b(jU,{name:k8("name"),message:k8("message"),code:k8("code")}),I(jU,"constructor",Yte(1,BS));var v4=zte(function(){return!(new Y0 instanceof x0)}),uK=v4||zte(function(){return TI.toString!==_p||"2: 1"!==String(new Y0(1,2))}),lK=v4||zte(function(){return 25!==new Y0(1,"DataCloneError").code});Ose({global:!0,forced:v4},{DOMException:v4?BS:Y0});var y4=cK(X_),u6=y4.prototype;for(var R7 in uK&&Y0===y4&&F(u6,"toString",_p),lK&&G_&&Y0===y4&&I(u6,"code",B$(function(){return d1(_d(this).name)})),s_)if(_n(s_,R7)){var O7=s_[R7],D7=O7.s,Dse=Yte(6,O7.c);_n(y4,D7)||I(y4,D7,Dse),_n(u6,D7)||I(u6,D7,Dse)}var Ude=mI,Jte=ET,$te=Q_,Nse=bT.f,kse=eT,Fde=UN,Pse=kV,xse=RU,U$=Rse,jde=zH,F$="DOMException",Lse=Jte("Error"),dK=Jte(F$),hK=function(){Fde(this,Vde);var s=arguments.length,p=xse(s<1?void 0:arguments[0]),A=xse(s<2?void 0:arguments[1],"Error"),y=new dK(p,A),w=Lse(p);return w.name=F$,Nse(y,"stack",$te(1,jde(w.stack,1))),Pse(y,this,hK),y},Vde=hK.prototype=dK.prototype,Gde="stack"in Lse(F$),Qde="stack"in new dK(1,2),l6=Gde&&!Qde;Ude({global:!0,forced:l6},{DOMException:l6?hK:dK});var IO=Jte(F$),Mse=IO.prototype;if(Mse.constructor!==IO)for(var pAe in Nse(Mse,"constructor",$te(1,IO)),U$)if(kse(U$,pAe)){var gAe=U$[pAe],Bse=gAe.s;kse(IO,Bse)||Nse(IO,Bse,$te(6,gAe.c))}var Hde="DOMException";fL(ET(Hde),Hde);var Zte=H_,j$=iS.exports,mAe=jO,Xte=_a,qde=E1,tEe=RS,nEe=qde("species"),Wde=RegExp.prototype,Kde=H_,rEe=MN,iEe=UP,AAe=tI,zde=Kde("".charAt),Yde=Kde("".charCodeAt),_Ae=Kde("".slice),Jde=function(s){return function(p,A){var y,w,$=iEe(AAe(p)),j=rEe(A),_e=$.length;return j<0||j>=_e?s?"":void 0:(y=Yde($,j))<55296||y>56319||j+1===_e||(w=Yde($,j+1))<56320||w>57343?s?zde($,j):y:s?_Ae($,j,j+2):w-56320+(y-55296<<10)+65536}},ene=(Jde(!1),Jde(!0)),N7=H_,tne=SN,nne=Math.floor,Use=N7("".charAt),Fse=N7("".replace),fK=N7("".slice),vAe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,yAe=/\$([$&'`]|\d{1,2})/g,jse=r_,EAe=SS,$de=FI,IAe=E_,oEe=jO,bAe=_r.TypeError,Zde=YR,CAe=r_,pK=H_,Xde=_a,Vse=SS,Gse=FI,sEe=MN,Qse=g2,E4=UP,rne=tI,gK=function(s,p,A){return p+(A?ene(s,p).length:1)},V$=_E,TAe=function(s,p,A,y,w,$){var j=A+s.length,_e=y.length,K=yAe;return void 0!==w&&(w=tne(w),K=vAe),Fse($,K,function(_i,_o){var _u;switch(Use(_o,0)){case"$":return"$";case"&":return s;case"`":return fK(p,0,A);case"'":return fK(p,j);case"<":_u=w[fK(_o,1,-1)];break;default:var ch=+_o;if(0===ch)return _i;if(ch>_e){var _f=nne(ch/10);return 0===_f?_i:_f<=_e?void 0===y[_f-1]?Use(_o,1):y[_f-1]+Use(_o,1):_i}_u=y[ch-1]}return void 0===_u?"":_u})},Hse=function(s,p){var A=s.exec;if($de(A)){var y=jse(A,s,p);return null!==y&&EAe(y),y}if("RegExp"===IAe(s))return jse(oEe,s,p);throw bAe("RegExp#exec called on incompatible receiver")},ine=E1("replace"),qse=Math.max,ehe=Math.min,one=pK([].concat),sne=pK([].push),ane=pK("".indexOf),the=pK("".slice),nhe="$0"==="a".replace(/./,"$0"),Wse=!!/./[ine]&&""===/./[ine]("a","$0");!function(s,p,A,y){var w=qde(s),$=!Xte(function(){var _i={};return _i[w]=function(){return 7},7!=""[s](_i)}),j=$&&!Xte(function(){var _i=!1,_o=/a/;return"split"===s&&((_o={}).constructor={},_o.constructor[nEe]=function(){return _o},_o.flags="",_o[w]=/./[w]),_o.exec=function(){return _i=!0,null},_o[w](""),!_i});if(!$||!j||A){var _e=Zte(/./[w]),K=p(w,""[s],function(_i,_o,_u,ch,_f){var o_=Zte(_i),i_=_o.exec;return i_===mAe||i_===Wde.exec?$&&!_f?{done:!0,value:_e(_o,_u,ch)}:{done:!0,value:o_(_u,_o,ch)}:{done:!1}});j$(String.prototype,s,K[0]),j$(Wde,w,K[1])}y&&tEe(Wde[w],"sham",!0)}("replace",function(s,p,A){var y=Wse?"$":"$0";return[function(w,$){var j=rne(this),_e=null==w?void 0:V$(w,ine);return _e?CAe(_e,w,j,$):CAe(p,E4(j),w,$)},function(w,$){var j=Vse(this),_e=E4(w);if("string"==typeof $&&-1===ane($,y)&&-1===ane($,"$<")){var K=A(p,j,_e,$);if(K.done)return K.value}var _i=Gse($);_i||($=E4($));var _o=j.global;if(_o){var _u=j.unicode;j.lastIndex=0}for(var ch=[];;){var _f=Hse(j,_e);if(null===_f||(sne(ch,_f),!_o))break;""===E4(_f[0])&&(j.lastIndex=gK(_e,Qse(j.lastIndex),_u))}for(var o_,i_="",u_=0,g_=0;g_<ch.length;g_++){for(var __=E4((_f=ch[g_])[0]),w_=qse(ehe(sEe(_f.index),_e.length),0),k_=[],Pv=1;Pv<_f.length;Pv++)sne(k_,void 0===(o_=_f[Pv])?o_:String(o_));var f0=_f.groups;if(_i){var v0=one([__],k_,w_,_e);void 0!==f0&&sne(v0,f0);var I0=E4(Zde($,void 0,v0))}else I0=TAe(__,_e,w_,k_,f0,$);w_>=u_&&(i_+=the(_e,u_,w_)+I0,u_=w_+__.length)}return i_+the(_e,u_)}]},!!Xde(function(){var s=/./;return s.exec=function(){var p=[];return p.groups={a:"7"},p},"7"!=="".replace(s,"$<a>")})||!nhe||Wse);var rhe=uT,Kse=E_,ihe=E1("match"),zse=_l,Yse=_r,mK=H_,G$=gP,Jse=kV,ohe=RS,aEe=bT.f,cEe=tN.f,SAe=xT,she=UP,ahe=aJ,che=PH,uhe=iS.exports,$se=_a,RAe=eT,OAe=MT.enforce,lhe=mS,dhe=pJ,DAe=H5,hhe=E1("match"),d6=Yse.RegExp,k7=d6.prototype,NAe=Yse.SyntaxError,fhe=mK(ahe),phe=mK(k7.exec),cne=mK("".charAt),Zse=mK("".replace),ghe=mK("".indexOf),Xse=mK("".slice),kAe=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,h6=/a/g,eae=/a/g,tae=new d6(h6)!==h6,nae=che.MISSED_STICKY,PAe=che.UNSUPPORTED_Y;if(G$("RegExp",zse&&(!tae||nae||dhe||DAe||$se(function(){return eae[hhe]=!1,d6(h6)!=h6||d6(eae)==eae||"/a/i"!=d6(h6,"i")})))){for(var P8=function(s,p){var A,y,w,$,j,_e,K=SAe(k7,this),_i=function(s){var p;return rhe(s)&&(void 0!==(p=s[ihe])?!!p:"RegExp"==Kse(s))}(s),_o=void 0===p,_u=[],ch=s;if(!K&&_i&&_o&&s.constructor===P8)return s;if((_i||SAe(k7,s))&&(s=s.source,_o&&(p="flags"in ch?ch.flags:fhe(ch))),s=void 0===s?"":she(s),p=void 0===p?"":she(p),ch=s,dhe&&"dotAll"in h6&&(y=!!p&&ghe(p,"s")>-1)&&(p=Zse(p,/s/g,"")),A=p,nae&&"sticky"in h6&&(w=!!p&&ghe(p,"y")>-1)&&PAe&&(p=Zse(p,/y/g,"")),DAe&&(s=($=function(_f){for(var o_,i_=_f.length,u_=0,g_="",__=[],w_={},k_=!1,Pv=!1,f0=0,v0="";u_<=i_;u_++){if("\\"===(o_=cne(_f,u_)))o_+=cne(_f,++u_);else if("]"===o_)k_=!1;else if(!k_)switch(!0){case"["===o_:k_=!0;break;case"("===o_:phe(kAe,Xse(_f,u_+1))&&(u_+=2,Pv=!0),g_+=o_,f0++;continue;case">"===o_&&Pv:if(""===v0||RAe(w_,v0))throw new NAe("Invalid capture group name");w_[v0]=!0,__[__.length]=[v0,f0],Pv=!1,v0="";continue}Pv?v0+=o_:g_+=o_}return[g_,__]}(s))[0],_u=$[1]),j=Jse(d6(s,p),K?this:k7,P8),(y||w||_u.length)&&(_e=OAe(j),y&&(_e.dotAll=!0,_e.raw=P8(function(_f){for(var o_,i_=_f.length,u_=0,g_="",__=!1;u_<=i_;u_++)"\\"!==(o_=cne(_f,u_))?__||"."!==o_?("["===o_?__=!0:"]"===o_&&(__=!1),g_+=o_):g_+="[\\s\\S]":g_+=o_+cne(_f,++u_);return g_}(s),A)),w&&(_e.sticky=!0),_u.length&&(_e.groups=_u)),s!==ch)try{ohe(j,"source",""===ch?"(?:)":ch)}catch(_f){}return j},Ahe=function(s){s in P8||aEe(P8,s,{configurable:!0,get:function(){return d6[s]},set:function(p){d6[s]=p}})},_he=cEe(d6),une=0;_he.length>une;)Ahe(_he[une++]);k7.constructor=P8,P8.prototype=k7,uhe(Yse,"RegExp",P8)}lhe("RegExp");var MAe=E_,rae=MT.get,yhe=RegExp.prototype,Ehe=_r.TypeError;_l&&pJ&&(0,bT.f)(yhe,"dotAll",{configurable:!0,get:function(){if(this!==yhe){if("RegExp"===MAe(this))return!!rae(this).dotAll;throw Ehe("Incompatible receiver, RegExp required")}}});const Ihe=DU;function iae(s,p){const A=s&&s.navigator;if(!A.mediaDevices)return;const y=function(j){if("object"!=typeof j||j.mandatory||j.optional)return j;const _e={};return Object.keys(j).forEach(K=>{if("require"===K||"advanced"===K||"mediaSource"===K)return;const _i="object"==typeof j[K]?j[K]:{ideal:j[K]};void 0!==_i.exact&&"number"==typeof _i.exact&&(_i.min=_i.max=_i.exact);const _o=function(_u,ch){return _u?_u+ch.charAt(0).toUpperCase()+ch.slice(1):"deviceId"===ch?"sourceId":ch};if(void 0!==_i.ideal){_e.optional=_e.optional||[];let _u={};"number"==typeof _i.ideal?(_u[_o("min",K)]=_i.ideal,_e.optional.push(_u),_u={},_u[_o("max",K)]=_i.ideal,_e.optional.push(_u)):(_u[_o("",K)]=_i.ideal,_e.optional.push(_u))}void 0!==_i.exact&&"number"!=typeof _i.exact?(_e.mandatory=_e.mandatory||{},_e.mandatory[_o("",K)]=_i.exact):["min","max"].forEach(_u=>{void 0!==_i[_u]&&(_e.mandatory=_e.mandatory||{},_e.mandatory[_o(_u,K)]=_i[_u])})}),j.advanced&&(_e.optional=(_e.optional||[]).concat(j.advanced)),_e},w=function(j,_e){if(p.version>=61)return _e(j);if((j=JSON.parse(JSON.stringify(j)))&&"object"==typeof j.audio){const K=function(_i,_o,_u){_o in _i&&!(_u in _i)&&(_i[_u]=_i[_o],delete _i[_o])};K((j=JSON.parse(JSON.stringify(j))).audio,"autoGainControl","googAutoGainControl"),K(j.audio,"noiseSuppression","googNoiseSuppression"),j.audio=y(j.audio)}if(j&&"object"==typeof j.video){let K=j.video.facingMode;K=K&&("object"==typeof K?K:{ideal:K});const _i=p.version<66;if(K&&("user"===K.exact||"environment"===K.exact||"user"===K.ideal||"environment"===K.ideal)&&(!A.mediaDevices.getSupportedConstraints||!A.mediaDevices.getSupportedConstraints().facingMode||_i)){let _o;if(delete j.video.facingMode,"environment"===K.exact||"environment"===K.ideal?_o=["back","rear"]:"user"!==K.exact&&"user"!==K.ideal||(_o=["front"]),_o)return A.mediaDevices.enumerateDevices().then(_u=>{let ch=(_u=_u.filter(_f=>"videoinput"===_f.kind)).find(_f=>_o.some(o_=>_f.label.toLowerCase().includes(o_)));return!ch&&_u.length&&_o.includes("back")&&(ch=_u[_u.length-1]),ch&&(j.video.deviceId=K.exact?{exact:ch.deviceId}:{ideal:ch.deviceId}),j.video=y(j.video),Ihe("chrome: "+JSON.stringify(j)),_e(j)})}j.video=y(j.video)}return Ihe("chrome: "+JSON.stringify(j)),_e(j)},$=function(j){return p.version>=64?j:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[j.name]||j.name,message:j.message,constraint:j.constraint||j.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(A.getUserMedia=function(j,_e,K){w(j,_i=>{A.webkitGetUserMedia(_i,_e,_o=>{K&&K($(_o))})})}.bind(A),A.mediaDevices.getUserMedia){const j=A.mediaDevices.getUserMedia.bind(A.mediaDevices);A.mediaDevices.getUserMedia=function(_e){return w(_e,K=>j(K).then(_i=>{if(K.audio&&!_i.getAudioTracks().length||K.video&&!_i.getVideoTracks().length)throw _i.getTracks().forEach(_o=>{_o.stop()}),new DOMException("","NotFoundError");return _i},_i=>sI.reject($(_i))))}}}function x8(s){s.MediaStream=s.MediaStream||s.webkitMediaStream}function bhe(s){if("object"==typeof s&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(A){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=A)},enumerable:!0,configurable:!0});const p=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=A=>{A.stream.addEventListener("addtrack",y=>{let w;w=s.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(j=>j.track&&j.track.id===y.track.id):{track:y.track};const $=new Event("track");$.track=y.track,$.receiver=w,$.transceiver={receiver:w},$.streams=[A.stream],this.dispatchEvent($)}),A.stream.getTracks().forEach(y=>{let w;w=s.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(j=>j.track&&j.track.id===y.id):{track:y};const $=new Event("track");$.track=y,$.receiver=w,$.transceiver={receiver:w},$.streams=[A.stream],this.dispatchEvent($)})},this.addEventListener("addstream",this._ontrackpoly)),p.apply(this,arguments)}}else OU(s,"track",p=>(p.transceiver||Object.defineProperty(p,"transceiver",{value:{receiver:p.receiver}}),p))}function oae(s){if("object"==typeof s&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){const p=function(w,$){return{track:$,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===$.kind?w.createDTMFSender($):null),this._dtmf},_pc:w}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const w=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(j,_e){let K=w.apply(this,arguments);return K||(K=p(this,j),this._senders.push(K)),K};const $=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(j){$.apply(this,arguments);const _e=this._senders.indexOf(j);-1!==_e&&this._senders.splice(_e,1)}}const A=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(w){this._senders=this._senders||[],A.apply(this,[w]),w.getTracks().forEach($=>{this._senders.push(p(this,$))})};const y=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(w){this._senders=this._senders||[],y.apply(this,[w]),w.getTracks().forEach($=>{const j=this._senders.find(_e=>_e.track===$);j&&this._senders.splice(this._senders.indexOf(j),1)})}}else if("object"==typeof s&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){const p=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){const A=p.apply(this,[]);return A.forEach(y=>y._pc=this),A},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function Che(s){if(!s.RTCPeerConnection)return;const p=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[A,y,w]=arguments;if(arguments.length>0&&"function"==typeof A)return p.apply(this,arguments);if(0===p.length&&(0===arguments.length||"function"!=typeof A))return p.apply(this,[]);const $=function(_e){const K={};return _e.result().forEach(_i=>{const _o={id:_i.id,timestamp:_i.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[_i.type]||_i.type};_i.names().forEach(_u=>{_o[_u]=_i.stat(_u)}),K[_o.id]=_o}),K},j=function(_e){return new Map(Object.keys(_e).map(K=>[K,_e[K]]))};return arguments.length>=2?p.apply(this,[function(K){y(j($(K)))},A]):new sI((_e,K)=>{p.apply(this,[function(_i){_e(j($(_i)))},K])}).then(y,w)}}function sae(s){if(!("object"==typeof s&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver))return;if(!("getStats"in s.RTCRtpSender.prototype)){const A=s.RTCPeerConnection.prototype.getSenders;A&&(s.RTCPeerConnection.prototype.getSenders=function(){const w=A.apply(this,[]);return w.forEach($=>$._pc=this),w});const y=s.RTCPeerConnection.prototype.addTrack;y&&(s.RTCPeerConnection.prototype.addTrack=function(){const w=y.apply(this,arguments);return w._pc=this,w}),s.RTCRtpSender.prototype.getStats=function(){const w=this;return this._pc.getStats().then($=>kQ($,w.track,!0))}}if(!("getStats"in s.RTCRtpReceiver.prototype)){const A=s.RTCPeerConnection.prototype.getReceivers;A&&(s.RTCPeerConnection.prototype.getReceivers=function(){const y=A.apply(this,[]);return y.forEach(w=>w._pc=this),y}),OU(s,"track",y=>(y.receiver._pc=y.srcElement,y)),s.RTCRtpReceiver.prototype.getStats=function(){const y=this;return this._pc.getStats().then(w=>kQ(w,y.track,!1))}}if(!("getStats"in s.RTCRtpSender.prototype)||!("getStats"in s.RTCRtpReceiver.prototype))return;const p=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){const A=arguments[0];let y,w,$;return this.getSenders().forEach(j=>{j.track===A&&(y?$=!0:y=j)}),this.getReceivers().forEach(j=>(j.track===A&&(w?$=!0:w=j),j.track===A)),$||y&&w?sI.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):y?y.getStats():w?w.getStats():sI.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return p.apply(this,arguments)}}function whe(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map($=>this._shimmedLocalStreams[$][0])};const p=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function($,j){if(!j)return p.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const _e=p.apply(this,arguments);return this._shimmedLocalStreams[j.id]?-1===this._shimmedLocalStreams[j.id].indexOf(_e)&&this._shimmedLocalStreams[j.id].push(_e):this._shimmedLocalStreams[j.id]=[j,_e],_e};const A=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function($){this._shimmedLocalStreams=this._shimmedLocalStreams||{},$.getTracks().forEach(K=>{if(this.getSenders().find(_i=>_i.track===K))throw new DOMException("Track already exists.","InvalidAccessError")});const j=this.getSenders();A.apply(this,arguments);const _e=this.getSenders().filter(K=>-1===j.indexOf(K));this._shimmedLocalStreams[$.id]=[$].concat(_e)};const y=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function($){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[$.id],y.apply(this,arguments)};const w=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function($){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},$&&Object.keys(this._shimmedLocalStreams).forEach(j=>{const _e=this._shimmedLocalStreams[j].indexOf($);-1!==_e&&this._shimmedLocalStreams[j].splice(_e,1),1===this._shimmedLocalStreams[j].length&&delete this._shimmedLocalStreams[j]}),w.apply(this,arguments)}}function The(s,p){if(!s.RTCPeerConnection)return;if(s.RTCPeerConnection.prototype.addTrack&&p.version>=65)return whe(s);const A=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){const _i=A.apply(this);return this._reverseStreams=this._reverseStreams||{},_i.map(_o=>this._reverseStreams[_o.id])};const y=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(_i){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_i.getTracks().forEach(_o=>{if(this.getSenders().find(_u=>_u.track===_o))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[_i.id]){const _o=new s.MediaStream(_i.getTracks());this._streams[_i.id]=_o,this._reverseStreams[_o.id]=_i,_i=_o}y.apply(this,[_i])};const w=s.RTCPeerConnection.prototype.removeStream;function $(_i,_o){let _u=_o.sdp;return Object.keys(_i._reverseStreams||[]).forEach(ch=>{const _f=_i._reverseStreams[ch];_u=_u.replace(new RegExp(_i._streams[_f.id].id,"g"),_f.id)}),new RTCSessionDescription({type:_o.type,sdp:_u})}function j(_i,_o){let _u=_o.sdp;return Object.keys(_i._reverseStreams||[]).forEach(ch=>{const _f=_i._reverseStreams[ch],o_=_i._streams[_f.id];_u=_u.replace(new RegExp(_f.id,"g"),o_.id)}),new RTCSessionDescription({type:_o.type,sdp:_u})}s.RTCPeerConnection.prototype.removeStream=function(_i){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},w.apply(this,[this._streams[_i.id]||_i]),delete this._reverseStreams[this._streams[_i.id]?this._streams[_i.id].id:_i.id],delete this._streams[_i.id]},s.RTCPeerConnection.prototype.addTrack=function(_i,_o){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _u=[].slice.call(arguments,1);if(1!==_u.length||!_u[0].getTracks().find(o_=>o_===_i))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(o_=>o_.track===_i))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const _f=this._streams[_o.id];if(_f)_f.addTrack(_i),sI.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const o_=new s.MediaStream([_i]);this._streams[_o.id]=o_,this._reverseStreams[o_.id]=_o,this.addStream(o_)}return this.getSenders().find(o_=>o_.track===_i)},["createOffer","createAnswer"].forEach(function(_i){const _o=s.RTCPeerConnection.prototype[_i],_u={[_i](){const ch=arguments;return arguments.length&&"function"==typeof arguments[0]?_o.apply(this,[_f=>{const o_=$(this,_f);ch[0].apply(null,[o_])},_f=>{ch[1]&&ch[1].apply(null,_f)},arguments[2]]):_o.apply(this,arguments).then(_f=>$(this,_f))}};s.RTCPeerConnection.prototype[_i]=_u[_i]});const _e=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=j(this,arguments[0]),_e.apply(this,arguments)):_e.apply(this,arguments)};const K=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get(){const _i=K.get.apply(this);return""===_i.type?_i:$(this,_i)}}),s.RTCPeerConnection.prototype.removeTrack=function(_i){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!_i._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(_i._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let _o;this._streams=this._streams||{},Object.keys(this._streams).forEach(_u=>{this._streams[_u].getTracks().find(ch=>_i.track===ch)&&(_o=this._streams[_u])}),_o&&(1===_o.getTracks().length?this.removeStream(this._reverseStreams[_o.id]):_o.removeTrack(_i.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Q$(s,p){!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=s.webkitRTCPeerConnection),s.RTCPeerConnection&&p.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(A){const y=s.RTCPeerConnection.prototype[A],w={[A](){return arguments[0]=new("addIceCandidate"===A?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),y.apply(this,arguments)}};s.RTCPeerConnection.prototype[A]=w[A]})}function aae(s,p){OU(s,"negotiationneeded",A=>{const y=A.target;if(!(p.version<72||y.getConfiguration&&"plan-b"===y.getConfiguration().sdpSemantics)||"stable"===y.signalingState)return A})}var She=Object.freeze({__proto__:null,shimMediaStream:x8,shimOnTrack:bhe,shimGetSendersWithDtmf:oae,shimGetStats:Che,shimSenderReceiverGetStats:sae,shimAddTrackRemoveTrackWithNative:whe,shimAddTrackRemoveTrack:The,shimPeerConnection:Q$,fixNegotiationNeeded:aae,shimGetUserMedia:iae,shimGetDisplayMedia:function(s,p){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&("function"==typeof p?s.navigator.mediaDevices.getDisplayMedia=function(A){return p(A).then(y=>{const w=A.video&&A.video.width,$=A.video&&A.video.height;return A.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:y,maxFrameRate:A.video&&A.video.frameRate||3}},w&&(A.video.mandatory.maxWidth=w),$&&(A.video.mandatory.maxHeight=$),s.navigator.mediaDevices.getUserMedia(A)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),cae={exports:{}};!function(s){var p={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};p.localCName=p.generateIdentifier(),p.splitLines=function(A){return A.trim().split("\n").map(function(y){return y.trim()})},p.splitSections=function(A){return A.split("\nm=").map(function(y,w){return(w>0?"m="+y:y).trim()+"\r\n"})},p.getDescription=function(A){var y=p.splitSections(A);return y&&y[0]},p.getMediaSections=function(A){var y=p.splitSections(A);return y.shift(),y},p.matchPrefix=function(A,y){return p.splitLines(A).filter(function(w){return 0===w.indexOf(y)})},p.parseCandidate=function(A){for(var y,w={foundation:(y=0===A.indexOf("a=candidate:")?A.substring(12).split(" "):A.substring(10).split(" "))[0],component:parseInt(y[1],10),protocol:y[2].toLowerCase(),priority:parseInt(y[3],10),ip:y[4],address:y[4],port:parseInt(y[5],10),type:y[7]},$=8;$<y.length;$+=2)switch(y[$]){case"raddr":w.relatedAddress=y[$+1];break;case"rport":w.relatedPort=parseInt(y[$+1],10);break;case"tcptype":w.tcpType=y[$+1];break;case"ufrag":w.ufrag=y[$+1],w.usernameFragment=y[$+1];break;default:w[y[$]]=y[$+1]}return w},p.writeCandidate=function(A){var y=[];y.push(A.foundation),y.push(A.component),y.push(A.protocol.toUpperCase()),y.push(A.priority),y.push(A.address||A.ip),y.push(A.port);var w=A.type;return y.push("typ"),y.push(w),"host"!==w&&A.relatedAddress&&A.relatedPort&&(y.push("raddr"),y.push(A.relatedAddress),y.push("rport"),y.push(A.relatedPort)),A.tcpType&&"tcp"===A.protocol.toLowerCase()&&(y.push("tcptype"),y.push(A.tcpType)),(A.usernameFragment||A.ufrag)&&(y.push("ufrag"),y.push(A.usernameFragment||A.ufrag)),"candidate:"+y.join(" ")},p.parseIceOptions=function(A){return A.substr(14).split(" ")},p.parseRtpMap=function(A){var y=A.substr(9).split(" "),w={payloadType:parseInt(y.shift(),10)};return y=y[0].split("/"),w.name=y[0],w.clockRate=parseInt(y[1],10),w.channels=3===y.length?parseInt(y[2],10):1,w.numChannels=w.channels,w},p.writeRtpMap=function(A){var y=A.payloadType;void 0!==A.preferredPayloadType&&(y=A.preferredPayloadType);var w=A.channels||A.numChannels||1;return"a=rtpmap:"+y+" "+A.name+"/"+A.clockRate+(1!==w?"/"+w:"")+"\r\n"},p.parseExtmap=function(A){var y=A.substr(9).split(" ");return{id:parseInt(y[0],10),direction:y[0].indexOf("/")>0?y[0].split("/")[1]:"sendrecv",uri:y[1]}},p.writeExtmap=function(A){return"a=extmap:"+(A.id||A.preferredId)+(A.direction&&"sendrecv"!==A.direction?"/"+A.direction:"")+" "+A.uri+"\r\n"},p.parseFmtp=function(A){for(var y,w={},$=A.substr(A.indexOf(" ")+1).split(";"),j=0;j<$.length;j++)w[(y=$[j].trim().split("="))[0].trim()]=y[1];return w},p.writeFmtp=function(A){var y="",w=A.payloadType;if(void 0!==A.preferredPayloadType&&(w=A.preferredPayloadType),A.parameters&&Object.keys(A.parameters).length){var $=[];Object.keys(A.parameters).forEach(function(j){$.push(A.parameters[j]?j+"="+A.parameters[j]:j)}),y+="a=fmtp:"+w+" "+$.join(";")+"\r\n"}return y},p.parseRtcpFb=function(A){var y=A.substr(A.indexOf(" ")+1).split(" ");return{type:y.shift(),parameter:y.join(" ")}},p.writeRtcpFb=function(A){var y="",w=A.payloadType;return void 0!==A.preferredPayloadType&&(w=A.preferredPayloadType),A.rtcpFeedback&&A.rtcpFeedback.length&&A.rtcpFeedback.forEach(function($){y+="a=rtcp-fb:"+w+" "+$.type+($.parameter&&$.parameter.length?" "+$.parameter:"")+"\r\n"}),y},p.parseSsrcMedia=function(A){var y=A.indexOf(" "),w={ssrc:parseInt(A.substr(7,y-7),10)},$=A.indexOf(":",y);return $>-1?(w.attribute=A.substr(y+1,$-y-1),w.value=A.substr($+1)):w.attribute=A.substr(y+1),w},p.parseSsrcGroup=function(A){var y=A.substr(13).split(" ");return{semantics:y.shift(),ssrcs:y.map(function(w){return parseInt(w,10)})}},p.getMid=function(A){var y=p.matchPrefix(A,"a=mid:")[0];if(y)return y.substr(6)},p.parseFingerprint=function(A){var y=A.substr(14).split(" ");return{algorithm:y[0].toLowerCase(),value:y[1]}},p.getDtlsParameters=function(A,y){return{role:"auto",fingerprints:p.matchPrefix(A+y,"a=fingerprint:").map(p.parseFingerprint)}},p.writeDtlsParameters=function(A,y){var w="a=setup:"+y+"\r\n";return A.fingerprints.forEach(function($){w+="a=fingerprint:"+$.algorithm+" "+$.value+"\r\n"}),w},p.getIceParameters=function(A,y){var w=p.splitLines(A);return{usernameFragment:(w=w.concat(p.splitLines(y))).filter(function($){return 0===$.indexOf("a=ice-ufrag:")})[0].substr(12),password:w.filter(function($){return 0===$.indexOf("a=ice-pwd:")})[0].substr(10)}},p.writeIceParameters=function(A){return"a=ice-ufrag:"+A.usernameFragment+"\r\na=ice-pwd:"+A.password+"\r\n"},p.parseRtpParameters=function(A){for(var y={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},w=p.splitLines(A)[0].split(" "),$=3;$<w.length;$++){var j=w[$],_e=p.matchPrefix(A,"a=rtpmap:"+j+" ")[0];if(_e){var K=p.parseRtpMap(_e),_i=p.matchPrefix(A,"a=fmtp:"+j+" ");switch(K.parameters=_i.length?p.parseFmtp(_i[0]):{},K.rtcpFeedback=p.matchPrefix(A,"a=rtcp-fb:"+j+" ").map(p.parseRtcpFb),y.codecs.push(K),K.name.toUpperCase()){case"RED":case"ULPFEC":y.fecMechanisms.push(K.name.toUpperCase())}}}return p.matchPrefix(A,"a=extmap:").forEach(function(_o){y.headerExtensions.push(p.parseExtmap(_o))}),y},p.writeRtpDescription=function(A,y){var w="";w+="m="+A+" ",w+=y.codecs.length>0?"9":"0",w+=" UDP/TLS/RTP/SAVPF ",w+=y.codecs.map(function(j){return void 0!==j.preferredPayloadType?j.preferredPayloadType:j.payloadType}).join(" ")+"\r\n",w+="c=IN IP4 0.0.0.0\r\n",w+="a=rtcp:9 IN IP4 0.0.0.0\r\n",y.codecs.forEach(function(j){w+=p.writeRtpMap(j),w+=p.writeFmtp(j),w+=p.writeRtcpFb(j)});var $=0;return y.codecs.forEach(function(j){j.maxptime>$&&($=j.maxptime)}),$>0&&(w+="a=maxptime:"+$+"\r\n"),w+="a=rtcp-mux\r\n",y.headerExtensions&&y.headerExtensions.forEach(function(j){w+=p.writeExtmap(j)}),w},p.parseRtpEncodingParameters=function(A){var y,w=[],$=p.parseRtpParameters(A),j=-1!==$.fecMechanisms.indexOf("RED"),_e=-1!==$.fecMechanisms.indexOf("ULPFEC"),K=p.matchPrefix(A,"a=ssrc:").map(function(ch){return p.parseSsrcMedia(ch)}).filter(function(ch){return"cname"===ch.attribute}),_i=K.length>0&&K[0].ssrc,_o=p.matchPrefix(A,"a=ssrc-group:FID").map(function(ch){return ch.substr(17).split(" ").map(function(_f){return parseInt(_f,10)})});_o.length>0&&_o[0].length>1&&_o[0][0]===_i&&(y=_o[0][1]),$.codecs.forEach(function(ch){if("RTX"===ch.name.toUpperCase()&&ch.parameters.apt){var _f={ssrc:_i,codecPayloadType:parseInt(ch.parameters.apt,10)};_i&&y&&(_f.rtx={ssrc:y}),w.push(_f),j&&((_f=JSON.parse(JSON.stringify(_f))).fec={ssrc:_i,mechanism:_e?"red+ulpfec":"red"},w.push(_f))}}),0===w.length&&_i&&w.push({ssrc:_i});var _u=p.matchPrefix(A,"b=");return _u.length&&(_u=0===_u[0].indexOf("b=TIAS:")?parseInt(_u[0].substr(7),10):0===_u[0].indexOf("b=AS:")?1e3*parseInt(_u[0].substr(5),10)*.95-16e3:void 0,w.forEach(function(ch){ch.maxBitrate=_u})),w},p.parseRtcpParameters=function(A){var y={},w=p.matchPrefix(A,"a=ssrc:").map(function(_e){return p.parseSsrcMedia(_e)}).filter(function(_e){return"cname"===_e.attribute})[0];w&&(y.cname=w.value,y.ssrc=w.ssrc);var $=p.matchPrefix(A,"a=rtcp-rsize");y.reducedSize=$.length>0,y.compound=0===$.length;var j=p.matchPrefix(A,"a=rtcp-mux");return y.mux=j.length>0,y},p.parseMsid=function(A){var y,w=p.matchPrefix(A,"a=msid:");if(1===w.length)return{stream:(y=w[0].substr(7).split(" "))[0],track:y[1]};var $=p.matchPrefix(A,"a=ssrc:").map(function(j){return p.parseSsrcMedia(j)}).filter(function(j){return"msid"===j.attribute});return $.length>0?{stream:(y=$[0].value.split(" "))[0],track:y[1]}:void 0},p.generateSessionId=function(){return Math.random().toString().substr(2,21)},p.writeSessionBoilerplate=function(A,y,w){var $=void 0!==y?y:2;return"v=0\r\no="+(w||"thisisadapterortc")+" "+(A||p.generateSessionId())+" "+$+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},p.writeMediaSection=function(A,y,w,$){var j=p.writeRtpDescription(A.kind,y);if(j+=p.writeIceParameters(A.iceGatherer.getLocalParameters()),j+=p.writeDtlsParameters(A.dtlsTransport.getLocalParameters(),"offer"===w?"actpass":"active"),j+="a=mid:"+A.mid+"\r\n",j+=A.direction?"a="+A.direction+"\r\n":A.rtpSender&&A.rtpReceiver?"a=sendrecv\r\n":A.rtpSender?"a=sendonly\r\n":A.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",A.rtpSender){var _e="msid:"+$.id+" "+A.rtpSender.track.id+"\r\n";j+="a="+_e,j+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" "+_e,A.sendEncodingParameters[0].rtx&&(j+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" "+_e,j+="a=ssrc-group:FID "+A.sendEncodingParameters[0].ssrc+" "+A.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return j+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" cname:"+p.localCName+"\r\n",A.rtpSender&&A.sendEncodingParameters[0].rtx&&(j+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" cname:"+p.localCName+"\r\n"),j},p.getDirection=function(A,y){for(var w=p.splitLines(A),$=0;$<w.length;$++)switch(w[$]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return w[$].substr(2)}return y?p.getDirection(y):"sendrecv"},p.getKind=function(A){return p.splitLines(A)[0].split(" ")[0].substr(2)},p.isRejected=function(A){return"0"===A.split(" ",2)[1]},p.parseMLine=function(A){var y=p.splitLines(A)[0].substr(2).split(" ");return{kind:y[0],port:parseInt(y[1],10),protocol:y[2],fmt:y.slice(3).join(" ")}},p.parseOLine=function(A){var y=p.matchPrefix(A,"o=")[0].substr(2).split(" ");return{username:y[0],sessionId:y[1],sessionVersion:parseInt(y[2],10),netType:y[3],addressType:y[4],address:y[5]}},p.isValidSDP=function(A){if("string"!=typeof A||0===A.length)return!1;for(var y=p.splitLines(A),w=0;w<y.length;w++)if(y[w].length<2||"="!==y[w].charAt(1))return!1;return!0},s.exports=p}(cae);var c1=cae.exports;function uae(s,p,A,y,w){var $=c1.writeRtpDescription(s.kind,p);if($+=c1.writeIceParameters(s.iceGatherer.getLocalParameters()),$+=c1.writeDtlsParameters(s.dtlsTransport.getLocalParameters(),"offer"===A?"actpass":w||"active"),$+="a=mid:"+s.mid+"\r\n",$+=s.rtpSender&&s.rtpReceiver?"a=sendrecv\r\n":s.rtpSender?"a=sendonly\r\n":s.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",s.rtpSender){var j=s.rtpSender._initialTrackId||s.rtpSender.track.id;s.rtpSender._initialTrackId=j;var _e="msid:"+(y?y.id:"-")+" "+j+"\r\n";$+="a="+_e,$+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" "+_e,s.sendEncodingParameters[0].rtx&&($+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" "+_e,$+="a=ssrc-group:FID "+s.sendEncodingParameters[0].ssrc+" "+s.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return $+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" cname:"+c1.localCName+"\r\n",s.rtpSender&&s.sendEncodingParameters[0].rtx&&($+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" cname:"+c1.localCName+"\r\n"),$}function lne(s,p){var A={codecs:[],headerExtensions:[],fecMechanisms:[]},y=function($,j){$=parseInt($,10);for(var _e=0;_e<j.length;_e++)if(j[_e].payloadType===$||j[_e].preferredPayloadType===$)return j[_e]},w=function($,j,_e,K){var _i=y($.parameters.apt,_e),_o=y(j.parameters.apt,K);return _i&&_o&&_i.name.toLowerCase()===_o.name.toLowerCase()};return s.codecs.forEach(function($){for(var j=0;j<p.codecs.length;j++){var _e=p.codecs[j];if($.name.toLowerCase()===_e.name.toLowerCase()&&$.clockRate===_e.clockRate){if("rtx"===$.name.toLowerCase()&&$.parameters&&_e.parameters.apt&&!w($,_e,s.codecs,p.codecs))continue;(_e=JSON.parse(JSON.stringify(_e))).numChannels=Math.min($.numChannels,_e.numChannels),A.codecs.push(_e),_e.rtcpFeedback=_e.rtcpFeedback.filter(function(K){for(var _i=0;_i<$.rtcpFeedback.length;_i++)if($.rtcpFeedback[_i].type===K.type&&$.rtcpFeedback[_i].parameter===K.parameter)return!0;return!1});break}}}),s.headerExtensions.forEach(function($){for(var j=0;j<p.headerExtensions.length;j++){var _e=p.headerExtensions[j];if($.uri===_e.uri){A.headerExtensions.push(_e);break}}}),A}function lae(s,p,A){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[p][s].indexOf(A)}function dae(s,p){var A=s.getRemoteCandidates().find(function(y){return p.foundation===y.foundation&&p.ip===y.ip&&p.port===y.port&&p.priority===y.priority&&p.protocol===y.protocol&&p.type===y.type});return A||s.addRemoteCandidate(p),!A}function pN(s,p){var A=new Error(p);return A.name=s,A.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[s],A}function BAe(s){const p=s&&s.navigator,A=p.mediaDevices.getUserMedia.bind(p.mediaDevices);p.mediaDevices.getUserMedia=function(y){return A(y).catch(w=>{return sI.reject({name:{PermissionDeniedError:"NotAllowedError"}[($=w).name]||$.name,message:$.message,constraint:$.constraint,toString(){return this.name}});var $})}}function UAe(s){"getDisplayMedia"in s.navigator&&s.navigator.mediaDevices&&(s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||(s.navigator.mediaDevices.getDisplayMedia=s.navigator.getDisplayMedia.bind(s.navigator)))}function hae(s,p){if(s.RTCIceGatherer&&(s.RTCIceCandidate||(s.RTCIceCandidate=function(y){return y}),s.RTCSessionDescription||(s.RTCSessionDescription=function(y){return y}),p.version<15025)){const y=Object.getOwnPropertyDescriptor(s.MediaStreamTrack.prototype,"enabled");Object.defineProperty(s.MediaStreamTrack.prototype,"enabled",{set(w){y.set.call(this,w);const $=new Event("enabled");$.enabled=w,this.dispatchEvent($)}})}s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)&&Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new s.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),s.RTCDtmfSender&&!s.RTCDTMFSender&&(s.RTCDTMFSender=s.RTCDtmfSender);const A=function(s,p){function A(j,_e){_e.addTrack(j),_e.dispatchEvent(new s.MediaStreamTrackEvent("addtrack",{track:j}))}function y(j,_e,K,_i){var _o=new Event("track");_o.track=_e,_o.receiver=K,_o.transceiver={receiver:K},_o.streams=_i,s.setTimeout(function(){j._dispatchEvent("track",_o)})}var w=function(j){var _o,_u,ch,_e=this,K=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(_o){_e[_o]=K[_o].bind(K)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",j=JSON.parse(JSON.stringify(j||{})),this.usingBundle="max-bundle"===j.bundlePolicy,"negotiate"===j.rtcpMuxPolicy)throw pN("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(j.rtcpMuxPolicy||(j.rtcpMuxPolicy="require"),j.iceTransportPolicy){case"all":case"relay":break;default:j.iceTransportPolicy="all"}switch(j.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:j.bundlePolicy="balanced"}if(j.iceServers=(_o=j.iceServers||[],_u=p,ch=!1,(_o=JSON.parse(JSON.stringify(_o))).filter(function(_f){if(_f&&(_f.urls||_f.url)){var o_=_f.urls||_f.url;_f.url&&!_f.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i_="string"==typeof o_;return i_&&(o_=[o_]),o_=o_.filter(function(u_){return 0!==u_.indexOf("turn:")||-1===u_.indexOf("transport=udp")||-1!==u_.indexOf("turn:[")||ch?0===u_.indexOf("stun:")&&_u>=14393&&-1===u_.indexOf("?transport=udp"):(ch=!0,!0)}),delete _f.url,_f.urls=i_?o_[0]:o_,!!o_.length}})),this._iceGatherers=[],j.iceCandidatePoolSize)for(var _i=j.iceCandidatePoolSize;_i>0;_i--)this._iceGatherers.push(new s.RTCIceGatherer({iceServers:j.iceServers,gatherPolicy:j.iceTransportPolicy}));else j.iceCandidatePoolSize=0;this._config=j,this.transceivers=[],this._sdpSessionId=c1.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(w.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(w.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),w.prototype.onicecandidate=null,w.prototype.onaddstream=null,w.prototype.ontrack=null,w.prototype.onremovestream=null,w.prototype.onsignalingstatechange=null,w.prototype.oniceconnectionstatechange=null,w.prototype.onconnectionstatechange=null,w.prototype.onicegatheringstatechange=null,w.prototype.onnegotiationneeded=null,w.prototype.ondatachannel=null,w.prototype._dispatchEvent=function(j,_e){this._isClosed||(this.dispatchEvent(_e),"function"==typeof this["on"+j]&&this["on"+j](_e))},w.prototype._emitGatheringStateChange=function(){var j=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",j)},w.prototype.getConfiguration=function(){return this._config},w.prototype.getLocalStreams=function(){return this.localStreams},w.prototype.getRemoteStreams=function(){return this.remoteStreams},w.prototype._createTransceiver=function(j,_e){var _i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:j,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)_i.iceTransport=this.transceivers[0].iceTransport,_i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var _o=this._createIceAndDtlsTransports();_i.iceTransport=_o.iceTransport,_i.dtlsTransport=_o.dtlsTransport}return _e||this.transceivers.push(_i),_i},w.prototype.addTrack=function(j,_e){if(this._isClosed)throw pN("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var K;if(this.transceivers.find(function(_o){return _o.track===j}))throw pN("InvalidAccessError","Track already exists.");for(var _i=0;_i<this.transceivers.length;_i++)this.transceivers[_i].track||this.transceivers[_i].kind!==j.kind||(K=this.transceivers[_i]);return K||(K=this._createTransceiver(j.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(_e)&&this.localStreams.push(_e),K.track=j,K.stream=_e,K.rtpSender=new s.RTCRtpSender(j,K.dtlsTransport),K.rtpSender},w.prototype.addStream=function(j){var _e=this;if(p>=15025)j.getTracks().forEach(function(_i){_e.addTrack(_i,j)});else{var K=j.clone();j.getTracks().forEach(function(_i,_o){var _u=K.getTracks()[_o];_i.addEventListener("enabled",function(ch){_u.enabled=ch.enabled})}),K.getTracks().forEach(function(_i){_e.addTrack(_i,K)})}},w.prototype.removeTrack=function(j){if(this._isClosed)throw pN("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(j instanceof s.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var _e=this.transceivers.find(function(_i){return _i.rtpSender===j});if(!_e)throw pN("InvalidAccessError","Sender was not created by this connection.");var K=_e.stream;_e.rtpSender.stop(),_e.rtpSender=null,_e.track=null,_e.stream=null,-1===this.transceivers.map(function(_i){return _i.stream}).indexOf(K)&&this.localStreams.indexOf(K)>-1&&this.localStreams.splice(this.localStreams.indexOf(K),1),this._maybeFireNegotiationNeeded()},w.prototype.removeStream=function(j){var _e=this;j.getTracks().forEach(function(K){var _i=_e.getSenders().find(function(_o){return _o.track===K});_i&&_e.removeTrack(_i)})},w.prototype.getSenders=function(){return this.transceivers.filter(function(j){return!!j.rtpSender}).map(function(j){return j.rtpSender})},w.prototype.getReceivers=function(){return this.transceivers.filter(function(j){return!!j.rtpReceiver}).map(function(j){return j.rtpReceiver})},w.prototype._createIceGatherer=function(j,_e){var K=this;if(_e&&j>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var _i=new s.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(_i,"state",{value:"new",writable:!0}),this.transceivers[j].bufferedCandidateEvents=[],this.transceivers[j].bufferCandidates=function(_o){var _u=!_o.candidate||0===Object.keys(_o.candidate).length;_i.state=_u?"completed":"gathering",null!==K.transceivers[j].bufferedCandidateEvents&&K.transceivers[j].bufferedCandidateEvents.push(_o)},_i.addEventListener("localcandidate",this.transceivers[j].bufferCandidates),_i},w.prototype._gather=function(j,_e){var K=this,_i=this.transceivers[_e].iceGatherer;if(!_i.onlocalcandidate){var _o=this.transceivers[_e].bufferedCandidateEvents;this.transceivers[_e].bufferedCandidateEvents=null,_i.removeEventListener("localcandidate",this.transceivers[_e].bufferCandidates),_i.onlocalcandidate=function(_u){if(!(K.usingBundle&&_e>0)){var ch=new Event("icecandidate");ch.candidate={sdpMid:j,sdpMLineIndex:_e};var _f=_u.candidate,o_=!_f||0===Object.keys(_f).length;if(o_)"new"!==_i.state&&"gathering"!==_i.state||(_i.state="completed");else{"new"===_i.state&&(_i.state="gathering"),_f.component=1,_f.ufrag=_i.getLocalParameters().usernameFragment;var i_=c1.writeCandidate(_f);ch.candidate=Object.assign(ch.candidate,c1.parseCandidate(i_)),ch.candidate.candidate=i_,ch.candidate.toJSON=function(){return{candidate:ch.candidate.candidate,sdpMid:ch.candidate.sdpMid,sdpMLineIndex:ch.candidate.sdpMLineIndex,usernameFragment:ch.candidate.usernameFragment}}}var u_=c1.getMediaSections(K._localDescription.sdp);u_[ch.candidate.sdpMLineIndex]+=o_?"a=end-of-candidates\r\n":"a="+ch.candidate.candidate+"\r\n",K._localDescription.sdp=c1.getDescription(K._localDescription.sdp)+u_.join("");var g_=K.transceivers.every(function(__){return __.iceGatherer&&"completed"===__.iceGatherer.state});"gathering"!==K.iceGatheringState&&(K.iceGatheringState="gathering",K._emitGatheringStateChange()),o_||K._dispatchEvent("icecandidate",ch),g_&&(K._dispatchEvent("icecandidate",new Event("icecandidate")),K.iceGatheringState="complete",K._emitGatheringStateChange())}},s.setTimeout(function(){_o.forEach(function(_u){_i.onlocalcandidate(_u)})},0)}},w.prototype._createIceAndDtlsTransports=function(){var j=this,_e=new s.RTCIceTransport(null);_e.onicestatechange=function(){j._updateIceConnectionState(),j._updateConnectionState()};var K=new s.RTCDtlsTransport(_e);return K.ondtlsstatechange=function(){j._updateConnectionState()},K.onerror=function(){Object.defineProperty(K,"state",{value:"failed",writable:!0}),j._updateConnectionState()},{iceTransport:_e,dtlsTransport:K}},w.prototype._disposeIceAndDtlsTransports=function(j){var _e=this.transceivers[j].iceGatherer;_e&&(delete _e.onlocalcandidate,delete this.transceivers[j].iceGatherer);var K=this.transceivers[j].iceTransport;K&&(delete K.onicestatechange,delete this.transceivers[j].iceTransport);var _i=this.transceivers[j].dtlsTransport;_i&&(delete _i.ondtlsstatechange,delete _i.onerror,delete this.transceivers[j].dtlsTransport)},w.prototype._transceive=function(j,_e,K){var _i=lne(j.localCapabilities,j.remoteCapabilities);_e&&j.rtpSender&&(_i.encodings=j.sendEncodingParameters,_i.rtcp={cname:c1.localCName,compound:j.rtcpParameters.compound},j.recvEncodingParameters.length&&(_i.rtcp.ssrc=j.recvEncodingParameters[0].ssrc),j.rtpSender.send(_i)),K&&j.rtpReceiver&&_i.codecs.length>0&&("video"===j.kind&&j.recvEncodingParameters&&p<15019&&j.recvEncodingParameters.forEach(function(_o){delete _o.rtx}),_i.encodings=j.recvEncodingParameters.length?j.recvEncodingParameters:[{}],_i.rtcp={compound:j.rtcpParameters.compound},j.rtcpParameters.cname&&(_i.rtcp.cname=j.rtcpParameters.cname),j.sendEncodingParameters.length&&(_i.rtcp.ssrc=j.sendEncodingParameters[0].ssrc),j.rtpReceiver.receive(_i))},w.prototype.setLocalDescription=function(j){var _e,K,_i=this;if(-1===["offer","answer"].indexOf(j.type))return Promise.reject(pN("TypeError",'Unsupported type "'+j.type+'"'));if(!lae("setLocalDescription",j.type,_i.signalingState)||_i._isClosed)return Promise.reject(pN("InvalidStateError","Can not set local "+j.type+" in state "+_i.signalingState));if("offer"===j.type)_e=c1.splitSections(j.sdp),K=_e.shift(),_e.forEach(function(_u,ch){var _f=c1.parseRtpParameters(_u);_i.transceivers[ch].localCapabilities=_f}),_i.transceivers.forEach(function(_u,ch){_i._gather(_u.mid,ch)});else if("answer"===j.type){_e=c1.splitSections(_i._remoteDescription.sdp),K=_e.shift();var _o=c1.matchPrefix(K,"a=ice-lite").length>0;_e.forEach(function(_u,ch){var _f=_i.transceivers[ch],o_=_f.iceGatherer,i_=_f.iceTransport,u_=_f.dtlsTransport,g_=_f.localCapabilities,__=_f.remoteCapabilities;if(!(c1.isRejected(_u)&&0===c1.matchPrefix(_u,"a=bundle-only").length||_f.rejected)){var w_=c1.getIceParameters(_u,K),k_=c1.getDtlsParameters(_u,K);_o&&(k_.role="server"),_i.usingBundle&&0!==ch||(_i._gather(_f.mid,ch),"new"===i_.state&&i_.start(o_,w_,_o?"controlling":"controlled"),"new"===u_.state&&u_.start(k_));var Pv=lne(g_,__);_i._transceive(_f,Pv.codecs.length>0,!1)}})}return _i._localDescription={type:j.type,sdp:j.sdp},_i._updateSignalingState("offer"===j.type?"have-local-offer":"stable"),Promise.resolve()},w.prototype.setRemoteDescription=function(j){var _e=this;if(-1===["offer","answer"].indexOf(j.type))return Promise.reject(pN("TypeError",'Unsupported type "'+j.type+'"'));if(!lae("setRemoteDescription",j.type,_e.signalingState)||_e._isClosed)return Promise.reject(pN("InvalidStateError","Can not set remote "+j.type+" in state "+_e.signalingState));var K={};_e.remoteStreams.forEach(function(i_){K[i_.id]=i_});var _i=[],_o=c1.splitSections(j.sdp),_u=_o.shift(),ch=c1.matchPrefix(_u,"a=ice-lite").length>0,_f=c1.matchPrefix(_u,"a=group:BUNDLE ").length>0;_e.usingBundle=_f;var o_=c1.matchPrefix(_u,"a=ice-options:")[0];return _e.canTrickleIceCandidates=!!o_&&o_.substr(14).split(" ").indexOf("trickle")>=0,_o.forEach(function(i_,u_){var g_=c1.splitLines(i_),__=c1.getKind(i_),w_=c1.isRejected(i_)&&0===c1.matchPrefix(i_,"a=bundle-only").length,k_=g_[0].substr(2).split(" ")[2],Pv=c1.getDirection(i_,_u),f0=c1.parseMsid(i_),v0=c1.getMid(i_)||c1.generateIdentifier();if(w_||"application"===__&&("DTLS/SCTP"===k_||"UDP/DTLS/SCTP"===k_))_e.transceivers[u_]={mid:v0,kind:__,protocol:k_,rejected:!0};else{var I0,iI,H0,Z0,a0,j_,Z_,o0,W0;!w_&&_e.transceivers[u_]&&_e.transceivers[u_].rejected&&(_e.transceivers[u_]=_e._createTransceiver(__,!0));var q_,_v,u0=c1.parseRtpParameters(i_);w_||(q_=c1.getIceParameters(i_,_u),(_v=c1.getDtlsParameters(i_,_u)).role="client"),Z_=c1.parseRtpEncodingParameters(i_);var B0=c1.parseRtcpParameters(i_),$0=c1.matchPrefix(i_,"a=end-of-candidates",_u).length>0,A0=c1.matchPrefix(i_,"a=candidate:").map(function(N_){return c1.parseCandidate(N_)}).filter(function(N_){return 1===N_.component});if(("offer"===j.type||"answer"===j.type)&&!w_&&_f&&u_>0&&_e.transceivers[u_]&&(_e._disposeIceAndDtlsTransports(u_),_e.transceivers[u_].iceGatherer=_e.transceivers[0].iceGatherer,_e.transceivers[u_].iceTransport=_e.transceivers[0].iceTransport,_e.transceivers[u_].dtlsTransport=_e.transceivers[0].dtlsTransport,_e.transceivers[u_].rtpSender&&_e.transceivers[u_].rtpSender.setTransport(_e.transceivers[0].dtlsTransport),_e.transceivers[u_].rtpReceiver&&_e.transceivers[u_].rtpReceiver.setTransport(_e.transceivers[0].dtlsTransport)),"offer"!==j.type||w_)"answer"===j.type&&!w_&&(iI=(I0=_e.transceivers[u_]).iceGatherer,H0=I0.iceTransport,Z0=I0.dtlsTransport,a0=I0.rtpReceiver,j_=I0.sendEncodingParameters,o0=I0.localCapabilities,_e.transceivers[u_].recvEncodingParameters=Z_,_e.transceivers[u_].remoteCapabilities=u0,_e.transceivers[u_].rtcpParameters=B0,A0.length&&"new"===H0.state&&(!ch&&!$0||_f&&0!==u_?A0.forEach(function(N_){dae(I0.iceTransport,N_)}):H0.setRemoteCandidates(A0)),_f&&0!==u_||("new"===H0.state&&H0.start(iI,q_,"controlling"),"new"===Z0.state&&Z0.start(_v)),!lne(I0.localCapabilities,I0.remoteCapabilities).codecs.filter(function(N_){return"rtx"===N_.name.toLowerCase()}).length&&I0.sendEncodingParameters[0].rtx&&delete I0.sendEncodingParameters[0].rtx,_e._transceive(I0,"sendrecv"===Pv||"recvonly"===Pv,"sendrecv"===Pv||"sendonly"===Pv),!a0||"sendrecv"!==Pv&&"sendonly"!==Pv?delete I0.rtpReceiver:(W0=a0.track,f0?(K[f0.stream]||(K[f0.stream]=new s.MediaStream),A(W0,K[f0.stream]),_i.push([W0,a0,K[f0.stream]])):(K.default||(K.default=new s.MediaStream),A(W0,K.default),_i.push([W0,a0,K.default]))));else{(I0=_e.transceivers[u_]||_e._createTransceiver(__)).mid=v0,I0.iceGatherer||(I0.iceGatherer=_e._createIceGatherer(u_,_f)),A0.length&&"new"===I0.iceTransport.state&&(!$0||_f&&0!==u_?A0.forEach(function(N_){dae(I0.iceTransport,N_)}):I0.iceTransport.setRemoteCandidates(A0)),o0=s.RTCRtpReceiver.getCapabilities(__),p<15019&&(o0.codecs=o0.codecs.filter(function(N_){return"rtx"!==N_.name})),j_=I0.sendEncodingParameters||[{ssrc:1001*(2*u_+2)}];var e_,y_=!1;"sendrecv"===Pv||"sendonly"===Pv?(y_=!I0.rtpReceiver,a0=I0.rtpReceiver||new s.RTCRtpReceiver(I0.dtlsTransport,__),y_&&(W0=a0.track,f0&&"-"===f0.stream||(f0?(K[f0.stream]||(K[f0.stream]=new s.MediaStream,Object.defineProperty(K[f0.stream],"id",{get:function(){return f0.stream}})),Object.defineProperty(W0,"id",{get:function(){return f0.track}}),e_=K[f0.stream]):(K.default||(K.default=new s.MediaStream),e_=K.default)),e_&&(A(W0,e_),I0.associatedRemoteMediaStreams.push(e_)),_i.push([W0,a0,e_]))):I0.rtpReceiver&&I0.rtpReceiver.track&&(I0.associatedRemoteMediaStreams.forEach(function(N_){var q0,jI,d0=N_.getTracks().find(function(q0){return q0.id===I0.rtpReceiver.track.id});d0&&((jI=N_).removeTrack(q0=d0),jI.dispatchEvent(new s.MediaStreamTrackEvent("removetrack",{track:q0})))}),I0.associatedRemoteMediaStreams=[]),I0.localCapabilities=o0,I0.remoteCapabilities=u0,I0.rtpReceiver=a0,I0.rtcpParameters=B0,I0.sendEncodingParameters=j_,I0.recvEncodingParameters=Z_,_e._transceive(_e.transceivers[u_],!1,y_)}}}),void 0===_e._dtlsRole&&(_e._dtlsRole="offer"===j.type?"active":"passive"),_e._remoteDescription={type:j.type,sdp:j.sdp},_e._updateSignalingState("offer"===j.type?"have-remote-offer":"stable"),Object.keys(K).forEach(function(i_){var u_=K[i_];if(u_.getTracks().length){if(-1===_e.remoteStreams.indexOf(u_)){_e.remoteStreams.push(u_);var g_=new Event("addstream");g_.stream=u_,s.setTimeout(function(){_e._dispatchEvent("addstream",g_)})}_i.forEach(function(__){u_.id===__[2].id&&y(_e,__[0],__[1],[u_])})}}),_i.forEach(function(i_){i_[2]||y(_e,i_[0],i_[1],[])}),s.setTimeout(function(){_e&&_e.transceivers&&_e.transceivers.forEach(function(i_){i_.iceTransport&&"new"===i_.iceTransport.state&&i_.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),i_.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},w.prototype.close=function(){this.transceivers.forEach(function(j){j.iceTransport&&j.iceTransport.stop(),j.dtlsTransport&&j.dtlsTransport.stop(),j.rtpSender&&j.rtpSender.stop(),j.rtpReceiver&&j.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},w.prototype._updateSignalingState=function(j){this.signalingState=j;var _e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",_e)},w.prototype._maybeFireNegotiationNeeded=function(){var j=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,s.setTimeout(function(){if(j.needNegotiation){j.needNegotiation=!1;var _e=new Event("negotiationneeded");j._dispatchEvent("negotiationneeded",_e)}},0))},w.prototype._updateIceConnectionState=function(){var j,_e={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_i){_i.iceTransport&&!_i.rejected&&_e[_i.iceTransport.state]++}),j="new",_e.failed>0?j="failed":_e.checking>0?j="checking":_e.disconnected>0?j="disconnected":_e.new>0?j="new":_e.connected>0?j="connected":_e.completed>0&&(j="completed"),j!==this.iceConnectionState){this.iceConnectionState=j;var K=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",K)}},w.prototype._updateConnectionState=function(){var j,_e={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_i){_i.iceTransport&&_i.dtlsTransport&&!_i.rejected&&(_e[_i.iceTransport.state]++,_e[_i.dtlsTransport.state]++)}),_e.connected+=_e.completed,j="new",_e.failed>0?j="failed":_e.connecting>0?j="connecting":_e.disconnected>0?j="disconnected":_e.new>0?j="new":_e.connected>0&&(j="connected"),j!==this.connectionState){this.connectionState=j;var K=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",K)}},w.prototype.createOffer=function(){var j=this;if(j._isClosed)return Promise.reject(pN("InvalidStateError","Can not call createOffer after close"));var _e=j.transceivers.filter(function(ch){return"audio"===ch.kind}).length,K=j.transceivers.filter(function(ch){return"video"===ch.kind}).length,_i=arguments[0];if(_i){if(_i.mandatory||_i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==_i.offerToReceiveAudio&&(_e=!0===_i.offerToReceiveAudio?1:!1===_i.offerToReceiveAudio?0:_i.offerToReceiveAudio),void 0!==_i.offerToReceiveVideo&&(K=!0===_i.offerToReceiveVideo?1:!1===_i.offerToReceiveVideo?0:_i.offerToReceiveVideo)}for(j.transceivers.forEach(function(ch){"audio"===ch.kind?--_e<0&&(ch.wantReceive=!1):"video"===ch.kind&&--K<0&&(ch.wantReceive=!1)});_e>0||K>0;)_e>0&&(j._createTransceiver("audio"),_e--),K>0&&(j._createTransceiver("video"),K--);var _o=c1.writeSessionBoilerplate(j._sdpSessionId,j._sdpSessionVersion++);j.transceivers.forEach(function(ch,_f){var o_=ch.track,i_=ch.kind,u_=ch.mid||c1.generateIdentifier();ch.mid=u_,ch.iceGatherer||(ch.iceGatherer=j._createIceGatherer(_f,j.usingBundle));var g_=s.RTCRtpSender.getCapabilities(i_);p<15019&&(g_.codecs=g_.codecs.filter(function(w_){return"rtx"!==w_.name})),g_.codecs.forEach(function(w_){"H264"===w_.name&&void 0===w_.parameters["level-asymmetry-allowed"]&&(w_.parameters["level-asymmetry-allowed"]="1"),ch.remoteCapabilities&&ch.remoteCapabilities.codecs&&ch.remoteCapabilities.codecs.forEach(function(k_){w_.name.toLowerCase()===k_.name.toLowerCase()&&w_.clockRate===k_.clockRate&&(w_.preferredPayloadType=k_.payloadType)})}),g_.headerExtensions.forEach(function(w_){(ch.remoteCapabilities&&ch.remoteCapabilities.headerExtensions||[]).forEach(function(k_){w_.uri===k_.uri&&(w_.id=k_.id)})});var __=ch.sendEncodingParameters||[{ssrc:1001*(2*_f+1)}];o_&&p>=15019&&"video"===i_&&!__[0].rtx&&(__[0].rtx={ssrc:__[0].ssrc+1}),ch.wantReceive&&(ch.rtpReceiver=new s.RTCRtpReceiver(ch.dtlsTransport,i_)),ch.localCapabilities=g_,ch.sendEncodingParameters=__}),"max-compat"!==j._config.bundlePolicy&&(_o+="a=group:BUNDLE "+j.transceivers.map(function(ch){return ch.mid}).join(" ")+"\r\n"),_o+="a=ice-options:trickle\r\n",j.transceivers.forEach(function(ch,_f){_o+=uae(ch,ch.localCapabilities,"offer",ch.stream,j._dtlsRole),_o+="a=rtcp-rsize\r\n",!ch.iceGatherer||"new"===j.iceGatheringState||0!==_f&&j.usingBundle||(ch.iceGatherer.getLocalCandidates().forEach(function(o_){o_.component=1,_o+="a="+c1.writeCandidate(o_)+"\r\n"}),"completed"===ch.iceGatherer.state&&(_o+="a=end-of-candidates\r\n"))});var _u=new s.RTCSessionDescription({type:"offer",sdp:_o});return Promise.resolve(_u)},w.prototype.createAnswer=function(){var j=this;if(j._isClosed)return Promise.reject(pN("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==j.signalingState&&"have-local-pranswer"!==j.signalingState)return Promise.reject(pN("InvalidStateError","Can not call createAnswer in signalingState "+j.signalingState));var _e=c1.writeSessionBoilerplate(j._sdpSessionId,j._sdpSessionVersion++);j.usingBundle&&(_e+="a=group:BUNDLE "+j.transceivers.map(function(_o){return _o.mid}).join(" ")+"\r\n"),_e+="a=ice-options:trickle\r\n";var K=c1.getMediaSections(j._remoteDescription.sdp).length;j.transceivers.forEach(function(_o,_u){if(!(_u+1>K)){if(_o.rejected)return"application"===_o.kind?_e+="DTLS/SCTP"===_o.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+_o.protocol+" webrtc-datachannel\r\n":"audio"===_o.kind?_e+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===_o.kind&&(_e+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(_e+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+_o.mid+"\r\n");var ch;_o.stream&&("audio"===_o.kind?ch=_o.stream.getAudioTracks()[0]:"video"===_o.kind&&(ch=_o.stream.getVideoTracks()[0]),ch&&p>=15019&&"video"===_o.kind&&!_o.sendEncodingParameters[0].rtx&&(_o.sendEncodingParameters[0].rtx={ssrc:_o.sendEncodingParameters[0].ssrc+1}));var _f=lne(_o.localCapabilities,_o.remoteCapabilities);!_f.codecs.filter(function(o_){return"rtx"===o_.name.toLowerCase()}).length&&_o.sendEncodingParameters[0].rtx&&delete _o.sendEncodingParameters[0].rtx,_e+=uae(_o,_f,"answer",_o.stream,j._dtlsRole),_o.rtcpParameters&&_o.rtcpParameters.reducedSize&&(_e+="a=rtcp-rsize\r\n")}});var _i=new s.RTCSessionDescription({type:"answer",sdp:_e});return Promise.resolve(_i)},w.prototype.addIceCandidate=function(j){var _e,K=this;return j&&void 0===j.sdpMLineIndex&&!j.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(_i,_o){if(!K._remoteDescription)return _o(pN("InvalidStateError","Can not add ICE candidate without a remote description"));if(j&&""!==j.candidate){var _u=j.sdpMLineIndex;if(j.sdpMid)for(var ch=0;ch<K.transceivers.length;ch++)if(K.transceivers[ch].mid===j.sdpMid){_u=ch;break}var _f=K.transceivers[_u];if(!_f)return _o(pN("OperationError","Can not add ICE candidate"));if(_f.rejected)return _i();var o_=Object.keys(j.candidate).length>0?c1.parseCandidate(j.candidate):{};if("tcp"===o_.protocol&&(0===o_.port||9===o_.port)||o_.component&&1!==o_.component)return _i();if((0===_u||_u>0&&_f.iceTransport!==K.transceivers[0].iceTransport)&&!dae(_f.iceTransport,o_))return _o(pN("OperationError","Can not add ICE candidate"));var i_=j.candidate.trim();0===i_.indexOf("a=")&&(i_=i_.substr(2)),(_e=c1.getMediaSections(K._remoteDescription.sdp))[_u]+="a="+(o_.type?i_:"end-of-candidates")+"\r\n",K._remoteDescription.sdp=c1.getDescription(K._remoteDescription.sdp)+_e.join("")}else for(var u_=0;u_<K.transceivers.length&&(K.transceivers[u_].rejected||(K.transceivers[u_].iceTransport.addRemoteCandidate({}),(_e=c1.getMediaSections(K._remoteDescription.sdp))[u_]+="a=end-of-candidates\r\n",K._remoteDescription.sdp=c1.getDescription(K._remoteDescription.sdp)+_e.join(""),!K.usingBundle));u_++);_i()})},w.prototype.getStats=function(j){if(j&&j instanceof s.MediaStreamTrack){var _e=null;if(this.transceivers.forEach(function(_i){_i.rtpSender&&_i.rtpSender.track===j?_e=_i.rtpSender:_i.rtpReceiver&&_i.rtpReceiver.track===j&&(_e=_i.rtpReceiver)}),!_e)throw pN("InvalidAccessError","Invalid selector.");return _e.getStats()}var K=[];return this.transceivers.forEach(function(_i){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(_o){_i[_o]&&K.push(_i[_o].getStats())})}),Promise.all(K).then(function(_i){var _o=new Map;return _i.forEach(function(_u){_u.forEach(function(ch){_o.set(ch.id,ch)})}),_o})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(j){var _e=s[j];if(_e&&_e.prototype&&_e.prototype.getStats){var K=_e.prototype.getStats;_e.prototype.getStats=function(){return K.apply(this).then(function(_i){var _o=new Map;return Object.keys(_i).forEach(function(_u){var ch;_i[_u].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(ch=_i[_u]).type]||ch.type,_o.set(_u,_i[_u])}),_o})}}});var $=["createOffer","createAnswer"];return $.forEach(function(j){var _e=w.prototype[j];w.prototype[j]=function(){var K=arguments;return"function"==typeof K[0]||"function"==typeof K[1]?_e.apply(this,[arguments[2]]).then(function(_i){"function"==typeof K[0]&&K[0].apply(null,[_i])},function(_i){"function"==typeof K[1]&&K[1].apply(null,[_i])}):_e.apply(this,arguments)}}),($=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(j){var _e=w.prototype[j];w.prototype[j]=function(){var K=arguments;return"function"==typeof K[1]||"function"==typeof K[2]?_e.apply(this,arguments).then(function(){"function"==typeof K[1]&&K[1].apply(null)},function(_i){"function"==typeof K[2]&&K[2].apply(null,[_i])}):_e.apply(this,arguments)}}),["getStats"].forEach(function(j){var _e=w.prototype[j];w.prototype[j]=function(){var K=arguments;return"function"==typeof K[1]?_e.apply(this,arguments).then(function(){"function"==typeof K[1]&&K[1].apply(null)}):_e.apply(this,arguments)}}),w}(s,p.version);s.RTCPeerConnection=function(y){return y&&y.iceServers&&(y.iceServers=function(w,$){let j=!1;return(w=JSON.parse(JSON.stringify(w))).filter(_e=>{if(_e&&(_e.urls||_e.url)){let K=_e.urls||_e.url;_e.url&&!_e.urls&&NU("RTCIceServer.url","RTCIceServer.urls");const _i="string"==typeof K;return _i&&(K=[K]),K=K.filter(_o=>{if(0===_o.indexOf("stun:"))return!1;const _u=_o.startsWith("turn")&&!_o.startsWith("turn:[")&&_o.includes("transport=udp");return _u&&!j?(j=!0,!0):_u&&!j}),delete _e.url,_e.urls=_i?K[0]:K,!!K.length}})}(y.iceServers),DU("ICE servers after filtering:",y.iceServers)),new A(y)},s.RTCPeerConnection.prototype=A.prototype}function Rhe(s){s.RTCRtpSender&&!("replaceTrack"in s.RTCRtpSender.prototype)&&(s.RTCRtpSender.prototype.replaceTrack=s.RTCRtpSender.prototype.setTrack)}var FAe=Object.freeze({__proto__:null,shimPeerConnection:hae,shimReplaceTrack:Rhe,shimGetUserMedia:BAe,shimGetDisplayMedia:UAe}),dne=BT,Ohe=ET,Dhe=FI,jAe=_C,Nhe=k3,VAe=iS.exports;if(mI({target:"Promise",proto:!0,real:!0,forced:!!dne&&_a(function(){dne.prototype.finally.call({then:function(){}},function(){})})},{finally:function(s){var p=jAe(this,Ohe("Promise")),A=Dhe(s);return this.then(A?function(y){return Nhe(p,s()).then(function(){return y})}:s,A?function(y){return Nhe(p,s()).then(function(){throw y})}:s)}}),Dhe(dne)){var GAe=Ohe("Promise").prototype.finally;dne.prototype.finally!==GAe&&VAe(dne.prototype,"finally",GAe,{unsafe:!0})}function khe(s,p){const A=s&&s.navigator,y=s&&s.MediaStreamTrack;if(A.getUserMedia=function(w,$,j){NU("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),A.mediaDevices.getUserMedia(w).then($,j)},!(p.version>55&&"autoGainControl"in A.mediaDevices.getSupportedConstraints())){const w=function(j,_e,K){_e in j&&!(K in j)&&(j[K]=j[_e],delete j[_e])},$=A.mediaDevices.getUserMedia.bind(A.mediaDevices);if(A.mediaDevices.getUserMedia=function(j){return"object"==typeof j&&"object"==typeof j.audio&&(j=JSON.parse(JSON.stringify(j)),w(j.audio,"autoGainControl","mozAutoGainControl"),w(j.audio,"noiseSuppression","mozNoiseSuppression")),$(j)},y&&y.prototype.getSettings){const j=y.prototype.getSettings;y.prototype.getSettings=function(){const _e=j.apply(this,arguments);return w(_e,"mozAutoGainControl","autoGainControl"),w(_e,"mozNoiseSuppression","noiseSuppression"),_e}}if(y&&y.prototype.applyConstraints){const j=y.prototype.applyConstraints;y.prototype.applyConstraints=function(_e){return"audio"===this.kind&&"object"==typeof _e&&(_e=JSON.parse(JSON.stringify(_e)),w(_e,"autoGainControl","mozAutoGainControl"),w(_e,"noiseSuppression","mozNoiseSuppression")),j.apply(this,[_e])}}}}function Phe(s){"object"==typeof s&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xhe(s,p){if("object"!=typeof s||!s.RTCPeerConnection&&!s.mozRTCPeerConnection)return;!s.RTCPeerConnection&&s.mozRTCPeerConnection&&(s.RTCPeerConnection=s.mozRTCPeerConnection),p.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(w){const $=s.RTCPeerConnection.prototype[w],j={[w](){return arguments[0]=new("addIceCandidate"===w?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),$.apply(this,arguments)}};s.RTCPeerConnection.prototype[w]=j[w]});const A={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},y=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[w,$,j]=arguments;return y.apply(this,[w||null]).then(_e=>{if(p.version<53&&!$)try{_e.forEach(K=>{K.type=A[K.type]||K.type})}catch(K){if("TypeError"!==K.name)throw K;_e.forEach((_i,_o)=>{_e.set(_o,Object.assign({},_i,{type:A[_i.type]||_i.type}))})}return _e}).then($,j)}}function QAe(s){if("object"!=typeof s||!s.RTCPeerConnection||!s.RTCRtpSender||s.RTCRtpSender&&"getStats"in s.RTCRtpSender.prototype)return;const p=s.RTCPeerConnection.prototype.getSenders;p&&(s.RTCPeerConnection.prototype.getSenders=function(){const y=p.apply(this,[]);return y.forEach(w=>w._pc=this),y});const A=s.RTCPeerConnection.prototype.addTrack;A&&(s.RTCPeerConnection.prototype.addTrack=function(){const y=A.apply(this,arguments);return y._pc=this,y}),s.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):sI.resolve(new Map)}}function HAe(s){if("object"!=typeof s||!s.RTCPeerConnection||!s.RTCRtpSender||s.RTCRtpSender&&"getStats"in s.RTCRtpReceiver.prototype)return;const p=s.RTCPeerConnection.prototype.getReceivers;p&&(s.RTCPeerConnection.prototype.getReceivers=function(){const A=p.apply(this,[]);return A.forEach(y=>y._pc=this),A}),OU(s,"track",A=>(A.receiver._pc=A.srcElement,A)),s.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Lhe(s){s.RTCPeerConnection&&!("removeStream"in s.RTCPeerConnection.prototype)&&(s.RTCPeerConnection.prototype.removeStream=function(p){NU("removeStream","removeTrack"),this.getSenders().forEach(A=>{A.track&&p.getTracks().includes(A.track)&&this.removeTrack(A)})})}function fae(s){s.DataChannel&&!s.RTCDataChannel&&(s.RTCDataChannel=s.DataChannel)}function Mhe(s){if("object"!=typeof s||!s.RTCPeerConnection)return;const p=s.RTCPeerConnection.prototype.addTransceiver;p&&(s.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const A=arguments[1],y=A&&"sendEncodings"in A;y&&A.sendEncodings.forEach($=>{if("rid"in $&&!/^[a-z0-9]{0,16}$/i.test($.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in $&&!(parseFloat($.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in $&&!(parseFloat($.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const w=p.apply(this,arguments);if(y){const{sender:$}=w,j=$.getParameters();(!("encodings"in j)||1===j.encodings.length&&0===Object.keys(j.encodings[0]).length)&&(j.encodings=A.sendEncodings,$.sendEncodings=A.sendEncodings,this.setParametersPromises.push($.setParameters(j).then(()=>{delete $.sendEncodings}).catch(()=>{delete $.sendEncodings})))}return w})}function pae(s){if("object"!=typeof s||!s.RTCRtpSender)return;const p=s.RTCRtpSender.prototype.getParameters;p&&(s.RTCRtpSender.prototype.getParameters=function(){const A=p.apply(this,arguments);return"encodings"in A||(A.encodings=[].concat(this.sendEncodings||[{}])),A})}function gae(s){if("object"!=typeof s||!s.RTCPeerConnection)return;const p=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?sI.all(this.setParametersPromises).then(()=>p.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):p.apply(this,arguments)}}function Bhe(s){if("object"!=typeof s||!s.RTCPeerConnection)return;const p=s.RTCPeerConnection.prototype.createAnswer;s.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?sI.all(this.setParametersPromises).then(()=>p.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):p.apply(this,arguments)}}var Uhe=Object.freeze({__proto__:null,shimOnTrack:Phe,shimPeerConnection:xhe,shimSenderGetStats:QAe,shimReceiverGetStats:HAe,shimRemoveStream:Lhe,shimRTCDataChannel:fae,shimAddTransceiver:Mhe,shimGetParameters:pae,shimCreateOffer:gae,shimCreateAnswer:Bhe,shimGetUserMedia:khe,shimGetDisplayMedia:function(s,p){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&(s.navigator.mediaDevices.getDisplayMedia=function(A){if(!A||!A.video){const y=new DOMException("getDisplayMedia without video constraints is undefined");return y.name="NotFoundError",y.code=8,sI.reject(y)}return!0===A.video?A.video={mediaSource:p}:A.video.mediaSource=p,s.navigator.mediaDevices.getUserMedia(A)})}});function $S(s){if("object"==typeof s&&s.RTCPeerConnection){if("getLocalStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in s.RTCPeerConnection.prototype)){const p=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addStream=function(A){this._localStreams||(this._localStreams=[]),this._localStreams.includes(A)||this._localStreams.push(A),A.getAudioTracks().forEach(y=>p.call(this,y,A)),A.getVideoTracks().forEach(y=>p.call(this,y,A))},s.RTCPeerConnection.prototype.addTrack=function(A){for(var y=arguments.length,w=new Array(y>1?y-1:0),$=1;$<y;$++)w[$-1]=arguments[$];return w&&w.forEach(j=>{this._localStreams?this._localStreams.includes(j)||this._localStreams.push(j):this._localStreams=[j]}),p.apply(this,arguments)}}"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(p){this._localStreams||(this._localStreams=[]);const A=this._localStreams.indexOf(p);if(-1===A)return;this._localStreams.splice(A,1);const y=p.getTracks();this.getSenders().forEach(w=>{y.includes(w.track)&&this.removeTrack(w)})})}}function hne(s){if("object"==typeof s&&s.RTCPeerConnection&&("getRemoteStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in s.RTCPeerConnection.prototype))){Object.defineProperty(s.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(A){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=A),this.addEventListener("track",this._onaddstreampoly=y=>{y.streams.forEach(w=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(w))return;this._remoteStreams.push(w);const $=new Event("addstream");$.stream=w,this.dispatchEvent($)})})}});const p=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){const A=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(y){y.streams.forEach(w=>{if(A._remoteStreams||(A._remoteStreams=[]),A._remoteStreams.indexOf(w)>=0)return;A._remoteStreams.push(w);const $=new Event("addstream");$.stream=w,A.dispatchEvent($)})}),p.apply(A,arguments)}}}function fne(s){if("object"!=typeof s||!s.RTCPeerConnection)return;const p=s.RTCPeerConnection.prototype,A=p.createOffer,y=p.createAnswer,w=p.setLocalDescription,$=p.setRemoteDescription,j=p.addIceCandidate;p.createOffer=function(K,_i){const _u=A.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return _i?(_u.then(K,_i),sI.resolve()):_u},p.createAnswer=function(K,_i){const _u=y.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return _i?(_u.then(K,_i),sI.resolve()):_u};let _e=function(K,_i,_o){const _u=w.apply(this,[K]);return _o?(_u.then(_i,_o),sI.resolve()):_u};p.setLocalDescription=_e,_e=function(K,_i,_o){const _u=$.apply(this,[K]);return _o?(_u.then(_i,_o),sI.resolve()):_u},p.setRemoteDescription=_e,_e=function(K,_i,_o){const _u=j.apply(this,[K]);return _o?(_u.then(_i,_o),sI.resolve()):_u},p.addIceCandidate=_e}function Fhe(s){const p=s&&s.navigator;if(p.mediaDevices&&p.mediaDevices.getUserMedia){const A=p.mediaDevices,y=A.getUserMedia.bind(A);p.mediaDevices.getUserMedia=w=>y(jhe(w))}!p.getUserMedia&&p.mediaDevices&&p.mediaDevices.getUserMedia&&(p.getUserMedia=function(A,y,w){p.mediaDevices.getUserMedia(A).then(y,w)}.bind(p))}function jhe(s){return s&&void 0!==s.video?Object.assign({},s,{video:NJ(s.video)}):s}function Vhe(s){if(!s.RTCPeerConnection)return;const p=s.RTCPeerConnection;s.RTCPeerConnection=function(A,y){if(A&&A.iceServers){const w=[];for(let $=0;$<A.iceServers.length;$++){let j=A.iceServers[$];!j.hasOwnProperty("urls")&&j.hasOwnProperty("url")?(NU("RTCIceServer.url","RTCIceServer.urls"),j=JSON.parse(JSON.stringify(j)),j.urls=j.url,delete j.url,w.push(j)):w.push(A.iceServers[$])}A.iceServers=w}return new p(A,y)},s.RTCPeerConnection.prototype=p.prototype,"generateCertificate"in p&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get:()=>p.generateCertificate})}function Ghe(s){"object"==typeof s&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qhe(s){const p=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(A){if(A){void 0!==A.offerToReceiveAudio&&(A.offerToReceiveAudio=!!A.offerToReceiveAudio);const y=this.getTransceivers().find($=>"audio"===$.receiver.track.kind);!1===A.offerToReceiveAudio&&y?"sendrecv"===y.direction?y.setDirection?y.setDirection("sendonly"):y.direction="sendonly":"recvonly"===y.direction&&(y.setDirection?y.setDirection("inactive"):y.direction="inactive"):!0!==A.offerToReceiveAudio||y||this.addTransceiver("audio"),void 0!==A.offerToReceiveVideo&&(A.offerToReceiveVideo=!!A.offerToReceiveVideo);const w=this.getTransceivers().find($=>"video"===$.receiver.track.kind);!1===A.offerToReceiveVideo&&w?"sendrecv"===w.direction?w.setDirection?w.setDirection("sendonly"):w.direction="sendonly":"recvonly"===w.direction&&(w.setDirection?w.setDirection("inactive"):w.direction="inactive"):!0!==A.offerToReceiveVideo||w||this.addTransceiver("video")}return p.apply(this,arguments)}}function Hhe(s){"object"!=typeof s||s.AudioContext||(s.AudioContext=s.webkitAudioContext)}var mae=Object.freeze({__proto__:null,shimLocalStreamsAPI:$S,shimRemoteStreamsAPI:hne,shimCallbacksAPI:fne,shimGetUserMedia:Fhe,shimConstraints:jhe,shimRTCIceServerUrls:Vhe,shimTrackEventTransceiver:Ghe,shimCreateOfferLegacy:Qhe,shimAudioContext:Hhe}),WAe=B5,KAe=HP,Aae=nT("".replace),pne="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",zAe=RegExp("^"+pne+pne+"*"),AK=RegExp(pne+pne+"*$"),gne=function(s){return function(p){var A=KAe(WAe(p));return 1&s&&(A=Aae(A,zAe,"")),2&s&&(A=Aae(A,AK,"")),A}},qhe={start:gne(1),end:gne(2),trim:gne(3)},H$=rte.PROPER,q$=OT,gN="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",YAe=qhe.trim;zT({target:"String",proto:!0,forced:function(s){return q$(function(){return!!gN[s]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[s]()||H$&&gN[s].name!==s})}("trim")},{trim:function(){return YAe(this)}});var JAe=RL("String").trim,$Ae=D2,ZAe=JAe,_ae=String.prototype,P7=function(s){var p=s.trim;return"string"==typeof s||s===_ae||$Ae(_ae,s)&&p===_ae.trim?ZAe:p},mne=r_;mI({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return mne(URL.prototype.toString,this)}});var vae={exports:{}};!function(s){var p={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};p.localCName=p.generateIdentifier(),p.splitLines=function(A){return P7(A).call(A).split("\n").map(function(y){return P7(y).call(y)})},p.splitSections=function(A){return A.split("\nm=").map(function(y,w){var $;return P7($=w>0?"m="+y:y).call($)+"\r\n"})},p.getDescription=function(A){var y=p.splitSections(A);return y&&y[0]},p.getMediaSections=function(A){var y=p.splitSections(A);return y.shift(),y},p.matchPrefix=function(A,y){return p.splitLines(A).filter(function(w){return 0===w.indexOf(y)})},p.parseCandidate=function(A){for(var y,w={foundation:(y=0===A.indexOf("a=candidate:")?A.substring(12).split(" "):A.substring(10).split(" "))[0],component:parseInt(y[1],10),protocol:y[2].toLowerCase(),priority:parseInt(y[3],10),ip:y[4],address:y[4],port:parseInt(y[5],10),type:y[7]},$=8;$<y.length;$+=2)switch(y[$]){case"raddr":w.relatedAddress=y[$+1];break;case"rport":w.relatedPort=parseInt(y[$+1],10);break;case"tcptype":w.tcpType=y[$+1];break;case"ufrag":w.ufrag=y[$+1],w.usernameFragment=y[$+1];break;default:w[y[$]]=y[$+1]}return w},p.writeCandidate=function(A){var y=[];y.push(A.foundation),y.push(A.component),y.push(A.protocol.toUpperCase()),y.push(A.priority),y.push(A.address||A.ip),y.push(A.port);var w=A.type;return y.push("typ"),y.push(w),"host"!==w&&A.relatedAddress&&A.relatedPort&&(y.push("raddr"),y.push(A.relatedAddress),y.push("rport"),y.push(A.relatedPort)),A.tcpType&&"tcp"===A.protocol.toLowerCase()&&(y.push("tcptype"),y.push(A.tcpType)),(A.usernameFragment||A.ufrag)&&(y.push("ufrag"),y.push(A.usernameFragment||A.ufrag)),"candidate:"+y.join(" ")},p.parseIceOptions=function(A){return A.substr(14).split(" ")},p.parseRtpMap=function(A){var y=A.substr(9).split(" "),w={payloadType:parseInt(y.shift(),10)};return y=y[0].split("/"),w.name=y[0],w.clockRate=parseInt(y[1],10),w.channels=3===y.length?parseInt(y[2],10):1,w.numChannels=w.channels,w},p.writeRtpMap=function(A){var y=A.payloadType;void 0!==A.preferredPayloadType&&(y=A.preferredPayloadType);var w=A.channels||A.numChannels||1;return"a=rtpmap:"+y+" "+A.name+"/"+A.clockRate+(1!==w?"/"+w:"")+"\r\n"},p.parseExtmap=function(A){var y=A.substr(9).split(" ");return{id:parseInt(y[0],10),direction:y[0].indexOf("/")>0?y[0].split("/")[1]:"sendrecv",uri:y[1]}},p.writeExtmap=function(A){return"a=extmap:"+(A.id||A.preferredId)+(A.direction&&"sendrecv"!==A.direction?"/"+A.direction:"")+" "+A.uri+"\r\n"},p.parseFmtp=function(A){for(var y,w={},$=A.substr(A.indexOf(" ")+1).split(";"),j=0;j<$.length;j++){var _e,K;y=P7(_e=$[j]).call(_e).split("="),w[P7(K=y[0]).call(K)]=y[1]}return w},p.writeFmtp=function(A){var y="",w=A.payloadType;if(void 0!==A.preferredPayloadType&&(w=A.preferredPayloadType),A.parameters&&Object.keys(A.parameters).length){var $=[];Object.keys(A.parameters).forEach(function(j){$.push(A.parameters[j]?j+"="+A.parameters[j]:j)}),y+="a=fmtp:"+w+" "+$.join(";")+"\r\n"}return y},p.parseRtcpFb=function(A){var y=A.substr(A.indexOf(" ")+1).split(" ");return{type:y.shift(),parameter:y.join(" ")}},p.writeRtcpFb=function(A){var y="",w=A.payloadType;return void 0!==A.preferredPayloadType&&(w=A.preferredPayloadType),A.rtcpFeedback&&A.rtcpFeedback.length&&A.rtcpFeedback.forEach(function($){y+="a=rtcp-fb:"+w+" "+$.type+($.parameter&&$.parameter.length?" "+$.parameter:"")+"\r\n"}),y},p.parseSsrcMedia=function(A){var y=A.indexOf(" "),w={ssrc:parseInt(A.substr(7,y-7),10)},$=A.indexOf(":",y);return $>-1?(w.attribute=A.substr(y+1,$-y-1),w.value=A.substr($+1)):w.attribute=A.substr(y+1),w},p.parseSsrcGroup=function(A){var y=A.substr(13).split(" ");return{semantics:y.shift(),ssrcs:y.map(function(w){return parseInt(w,10)})}},p.getMid=function(A){var y=p.matchPrefix(A,"a=mid:")[0];if(y)return y.substr(6)},p.parseFingerprint=function(A){var y=A.substr(14).split(" ");return{algorithm:y[0].toLowerCase(),value:y[1]}},p.getDtlsParameters=function(A,y){return{role:"auto",fingerprints:p.matchPrefix(A+y,"a=fingerprint:").map(p.parseFingerprint)}},p.writeDtlsParameters=function(A,y){var w="a=setup:"+y+"\r\n";return A.fingerprints.forEach(function($){w+="a=fingerprint:"+$.algorithm+" "+$.value+"\r\n"}),w},p.parseCryptoLine=function(A){var y=A.substr(9).split(" ");return{tag:parseInt(y[0],10),cryptoSuite:y[1],keyParams:y[2],sessionParams:y.slice(3)}},p.writeCryptoLine=function(A){return"a=crypto:"+A.tag+" "+A.cryptoSuite+" "+("object"==typeof A.keyParams?p.writeCryptoKeyParams(A.keyParams):A.keyParams)+(A.sessionParams?" "+A.sessionParams.join(" "):"")+"\r\n"},p.parseCryptoKeyParams=function(A){if(0!==A.indexOf("inline:"))return null;var y=A.substr(7).split("|");return{keyMethod:"inline",keySalt:y[0],lifeTime:y[1],mkiValue:y[2]?y[2].split(":")[0]:void 0,mkiLength:y[2]?y[2].split(":")[1]:void 0}},p.writeCryptoKeyParams=function(A){return A.keyMethod+":"+A.keySalt+(A.lifeTime?"|"+A.lifeTime:"")+(A.mkiValue&&A.mkiLength?"|"+A.mkiValue+":"+A.mkiLength:"")},p.getCryptoParameters=function(A,y){return p.matchPrefix(A+y,"a=crypto:").map(p.parseCryptoLine)},p.getIceParameters=function(A,y){var w=p.matchPrefix(A+y,"a=ice-ufrag:")[0],$=p.matchPrefix(A+y,"a=ice-pwd:")[0];return w&&$?{usernameFragment:w.substr(12),password:$.substr(10)}:null},p.writeIceParameters=function(A){return"a=ice-ufrag:"+A.usernameFragment+"\r\na=ice-pwd:"+A.password+"\r\n"},p.parseRtpParameters=function(A){for(var y={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},w=p.splitLines(A)[0].split(" "),$=3;$<w.length;$++){var j=w[$],_e=p.matchPrefix(A,"a=rtpmap:"+j+" ")[0];if(_e){var K=p.parseRtpMap(_e),_i=p.matchPrefix(A,"a=fmtp:"+j+" ");switch(K.parameters=_i.length?p.parseFmtp(_i[0]):{},K.rtcpFeedback=p.matchPrefix(A,"a=rtcp-fb:"+j+" ").map(p.parseRtcpFb),y.codecs.push(K),K.name.toUpperCase()){case"RED":case"ULPFEC":y.fecMechanisms.push(K.name.toUpperCase())}}}return p.matchPrefix(A,"a=extmap:").forEach(function(_o){y.headerExtensions.push(p.parseExtmap(_o))}),y},p.writeRtpDescription=function(A,y){var w="";w+="m="+A+" ",w+=y.codecs.length>0?"9":"0",w+=" UDP/TLS/RTP/SAVPF ",w+=y.codecs.map(function(j){return void 0!==j.preferredPayloadType?j.preferredPayloadType:j.payloadType}).join(" ")+"\r\n",w+="c=IN IP4 0.0.0.0\r\n",w+="a=rtcp:9 IN IP4 0.0.0.0\r\n",y.codecs.forEach(function(j){w+=p.writeRtpMap(j),w+=p.writeFmtp(j),w+=p.writeRtcpFb(j)});var $=0;return y.codecs.forEach(function(j){j.maxptime>$&&($=j.maxptime)}),$>0&&(w+="a=maxptime:"+$+"\r\n"),w+="a=rtcp-mux\r\n",y.headerExtensions&&y.headerExtensions.forEach(function(j){w+=p.writeExtmap(j)}),w},p.parseRtpEncodingParameters=function(A){var y,w=[],$=p.parseRtpParameters(A),j=-1!==$.fecMechanisms.indexOf("RED"),_e=-1!==$.fecMechanisms.indexOf("ULPFEC"),K=p.matchPrefix(A,"a=ssrc:").map(function(ch){return p.parseSsrcMedia(ch)}).filter(function(ch){return"cname"===ch.attribute}),_i=K.length>0&&K[0].ssrc,_o=p.matchPrefix(A,"a=ssrc-group:FID").map(function(ch){return ch.substr(17).split(" ").map(function(_f){return parseInt(_f,10)})});_o.length>0&&_o[0].length>1&&_o[0][0]===_i&&(y=_o[0][1]),$.codecs.forEach(function(ch){if("RTX"===ch.name.toUpperCase()&&ch.parameters.apt){var _f={ssrc:_i,codecPayloadType:parseInt(ch.parameters.apt,10)};_i&&y&&(_f.rtx={ssrc:y}),w.push(_f),j&&((_f=JSON.parse(JSON.stringify(_f))).fec={ssrc:_i,mechanism:_e?"red+ulpfec":"red"},w.push(_f))}}),0===w.length&&_i&&w.push({ssrc:_i});var _u=p.matchPrefix(A,"b=");return _u.length&&(_u=0===_u[0].indexOf("b=TIAS:")?parseInt(_u[0].substr(7),10):0===_u[0].indexOf("b=AS:")?1e3*parseInt(_u[0].substr(5),10)*.95-16e3:void 0,w.forEach(function(ch){ch.maxBitrate=_u})),w},p.parseRtcpParameters=function(A){var y={},w=p.matchPrefix(A,"a=ssrc:").map(function(_e){return p.parseSsrcMedia(_e)}).filter(function(_e){return"cname"===_e.attribute})[0];w&&(y.cname=w.value,y.ssrc=w.ssrc);var $=p.matchPrefix(A,"a=rtcp-rsize");y.reducedSize=$.length>0,y.compound=0===$.length;var j=p.matchPrefix(A,"a=rtcp-mux");return y.mux=j.length>0,y},p.parseMsid=function(A){var y,w=p.matchPrefix(A,"a=msid:");if(1===w.length)return{stream:(y=w[0].substr(7).split(" "))[0],track:y[1]};var $=p.matchPrefix(A,"a=ssrc:").map(function(j){return p.parseSsrcMedia(j)}).filter(function(j){return"msid"===j.attribute});return $.length>0?{stream:(y=$[0].value.split(" "))[0],track:y[1]}:void 0},p.parseSctpDescription=function(A){var y,w=p.parseMLine(A),$=p.matchPrefix(A,"a=max-message-size:");$.length>0&&(y=parseInt($[0].substr(19),10)),isNaN(y)&&(y=65536);var j=p.matchPrefix(A,"a=sctp-port:");if(j.length>0)return{port:parseInt(j[0].substr(12),10),protocol:w.fmt,maxMessageSize:y};if(p.matchPrefix(A,"a=sctpmap:").length>0){var _e=p.matchPrefix(A,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(_e[0],10),protocol:_e[1],maxMessageSize:y}}},p.writeSctpDescription=function(A,y){var w=[];return w="DTLS/SCTP"!==A.protocol?["m="+A.kind+" 9 "+A.protocol+" "+y.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+y.port+"\r\n"]:["m="+A.kind+" 9 "+A.protocol+" "+y.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+y.port+" "+y.protocol+" 65535\r\n"],void 0!==y.maxMessageSize&&w.push("a=max-message-size:"+y.maxMessageSize+"\r\n"),w.join("")},p.generateSessionId=function(){return Math.random().toString().substr(2,21)},p.writeSessionBoilerplate=function(A,y,w){var $=void 0!==y?y:2;return"v=0\r\no="+(w||"thisisadapterortc")+" "+(A||p.generateSessionId())+" "+$+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},p.writeMediaSection=function(A,y,w,$){var j=p.writeRtpDescription(A.kind,y);if(j+=p.writeIceParameters(A.iceGatherer.getLocalParameters()),j+=p.writeDtlsParameters(A.dtlsTransport.getLocalParameters(),"offer"===w?"actpass":"active"),j+="a=mid:"+A.mid+"\r\n",j+=A.direction?"a="+A.direction+"\r\n":A.rtpSender&&A.rtpReceiver?"a=sendrecv\r\n":A.rtpSender?"a=sendonly\r\n":A.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",A.rtpSender){var _e="msid:"+$.id+" "+A.rtpSender.track.id+"\r\n";j+="a="+_e,j+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" "+_e,A.sendEncodingParameters[0].rtx&&(j+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" "+_e,j+="a=ssrc-group:FID "+A.sendEncodingParameters[0].ssrc+" "+A.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return j+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" cname:"+p.localCName+"\r\n",A.rtpSender&&A.sendEncodingParameters[0].rtx&&(j+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" cname:"+p.localCName+"\r\n"),j},p.getDirection=function(A,y){for(var w=p.splitLines(A),$=0;$<w.length;$++)switch(w[$]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return w[$].substr(2)}return y?p.getDirection(y):"sendrecv"},p.getKind=function(A){return p.splitLines(A)[0].split(" ")[0].substr(2)},p.isRejected=function(A){return"0"===A.split(" ",2)[1]},p.parseMLine=function(A){var y=p.splitLines(A)[0].substr(2).split(" ");return{kind:y[0],port:parseInt(y[1],10),protocol:y[2],fmt:y.slice(3).join(" ")}},p.parseOLine=function(A){var y=p.matchPrefix(A,"o=")[0].substr(2).split(" ");return{username:y[0],sessionId:y[1],sessionVersion:parseInt(y[2],10),netType:y[3],addressType:y[4],address:y[5]}},p.isValidSDP=function(A){if("string"!=typeof A||0===A.length)return!1;for(var y=p.splitLines(A),w=0;w<y.length;w++)if(y[w].length<2||"="!==y[w].charAt(1))return!1;return!0},s.exports=p}(vae);var _K=vae.exports;function vK(s){if(!s.RTCIceCandidate||s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)return;const p=s.RTCIceCandidate;s.RTCIceCandidate=function(A){if("object"==typeof A&&A.candidate&&0===A.candidate.indexOf("a=")&&((A=JSON.parse(JSON.stringify(A))).candidate=A.candidate.substr(2)),A.candidate&&A.candidate.length){const y=new p(A),w=_K.parseCandidate(A.candidate),$=Object.assign(y,w);return $.toJSON=function(){return{candidate:$.candidate,sdpMid:$.sdpMid,sdpMLineIndex:$.sdpMLineIndex,usernameFragment:$.usernameFragment}},$}return new p(A)},s.RTCIceCandidate.prototype=p.prototype,OU(s,"icecandidate",A=>(A.candidate&&Object.defineProperty(A,"candidate",{value:new s.RTCIceCandidate(A.candidate),writable:"false"}),A))}function xL(s,p){if(!s.RTCPeerConnection)return;"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const A=function(_e){if(!_e||!_e.sdp)return!1;const K=_K.splitSections(_e.sdp);return K.shift(),K.some(_i=>{const _o=_K.parseMLine(_i);return _o&&"application"===_o.kind&&-1!==_o.protocol.indexOf("SCTP")})},y=function(_e){const K=_e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===K||K.length<2)return-1;const _i=parseInt(K[1],10);return _i!=_i?-1:_i},w=function(_e){let K=65536;return"firefox"===p.browser&&(K=p.version<57?-1===_e?16384:2147483637:p.version<60?57===p.version?65535:65536:2147483637),K},$=function(_e,K){let _i=65536;"firefox"===p.browser&&57===p.version&&(_i=65535);const _o=_K.matchPrefix(_e.sdp,"a=max-message-size:");return _o.length>0?_i=parseInt(_o[0].substr(19),10):"firefox"===p.browser&&-1!==K&&(_i=2147483637),_i},j=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===p.browser&&p.version>=76){const{sdpSemantics:_e}=this.getConfiguration();"plan-b"===_e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(A(arguments[0])){const _e=y(arguments[0]),K=w(_e),_i=$(arguments[0],_e);let _o;_o=0===K&&0===_i?Number.POSITIVE_INFINITY:0===K||0===_i?Math.max(K,_i):Math.min(K,_i);const _u={};Object.defineProperty(_u,"maxMessageSize",{get:()=>_o}),this._sctp=_u}return j.apply(this,arguments)}}function yK(s){if(!s.RTCPeerConnection||!("createDataChannel"in s.RTCPeerConnection.prototype))return;function p(y,w){const $=y.send;y.send=function(){const j=arguments[0];if("open"===y.readyState&&w.sctp&&(j.length||j.size||j.byteLength)>w.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+w.sctp.maxMessageSize+" bytes)");return $.apply(y,arguments)}}const A=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){const y=A.apply(this,arguments);return p(y,this),y},OU(s,"datachannel",y=>(p(y.channel,y.target),y))}function I4(s){if(!s.RTCPeerConnection||"connectionState"in s.RTCPeerConnection.prototype)return;const p=s.RTCPeerConnection.prototype;Object.defineProperty(p,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(p,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(A){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),A&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=A)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(A=>{const y=p[A];p[A]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=w=>{const $=w.target;if($._lastConnectionState!==$.connectionState){$._lastConnectionState=$.connectionState;const j=new Event("connectionstatechange",w);$.dispatchEvent(j)}return w},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),y.apply(this,arguments)}})}function yae(s,p){if(!s.RTCPeerConnection||"chrome"===p.browser&&p.version>=71||"safari"===p.browser&&p.version>=605)return;const A=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(y){if(y&&y.sdp&&-1!==y.sdp.indexOf("\na=extmap-allow-mixed")){const w=y.sdp.split("\n").filter($=>"a=extmap-allow-mixed"!==P7($).call($)).join("\n");s.RTCSessionDescription&&y instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:y.type,sdp:w}):y.sdp=w}return A.apply(this,arguments)}}function x7(s,p){if(!s.RTCPeerConnection||!s.RTCPeerConnection.prototype)return;const A=s.RTCPeerConnection.prototype.addIceCandidate;A&&0!==A.length&&(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===p.browser&&p.version<78||"firefox"===p.browser&&p.version<68||"safari"===p.browser)&&arguments[0]&&""===arguments[0].candidate?sI.resolve():A.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),sI.resolve())})}var XAe=Object.freeze({__proto__:null,shimRTCIceCandidate:vK,shimMaxMessageSize:xL,shimSendThrowTypeError:yK,shimConnectionState:I4,removeExtmapAllowMixed:yae,shimAddIceCandidateNullOrEmpty:x7});let RR,V1;(function(){let{window:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const A=DU,y=kU(s),w={browserDetails:y,commonShim:XAe,extractVersion:BV,disableLog:NQ,disableWarnings:yM};switch(y.browser){case"chrome":if(!She||!Q$||!p.shimChrome)return A("Chrome shim is not included in this adapter release."),w;if(null===y.version)return A("Chrome shim can not determine version, not shimming."),w;A("adapter.js shimming chrome."),w.browserShim=She,x7(s,y),iae(s,y),x8(s),Q$(s,y),bhe(s),The(s,y),oae(s),Che(s),sae(s),aae(s,y),vK(s),I4(s),xL(s,y),yK(s),yae(s,y);break;case"firefox":if(!Uhe||!xhe||!p.shimFirefox)return A("Firefox shim is not included in this adapter release."),w;A("adapter.js shimming firefox."),w.browserShim=Uhe,x7(s,y),khe(s,y),xhe(s,y),Phe(s),Lhe(s),QAe(s),HAe(s),fae(s),Mhe(s),pae(s),gae(s),Bhe(s),vK(s),I4(s),xL(s,y),yK(s);break;case"edge":if(!FAe||!hae||!p.shimEdge)return A("MS edge shim is not included in this adapter release."),w;A("adapter.js shimming edge."),w.browserShim=FAe,BAe(s),UAe(s),hae(s,y),Rhe(s),xL(s,y),yK(s);break;case"safari":if(!mae||!p.shimSafari)return A("Safari shim is not included in this adapter release."),w;A("adapter.js shimming safari."),w.browserShim=mae,x7(s,y),Vhe(s),Qhe(s),fne(s),$S(s),hne(s),Ghe(s),Fhe(s),Hhe(s),vK(s),xL(s,y),yK(s),yae(s,y);break;default:A("Unsupported browser!")}})({window:"undefined"==typeof window?void 0:window}),function(s){s.WIN_10="Windows 10",s.WIN_81="Windows 8.1",s.WIN_8="Windows 8",s.WIN_7="Windows 7",s.WIN_VISTA="Windows Vista",s.WIN_SERVER_2003="Windows Server 2003",s.WIN_XP="Windows XP",s.WIN_2000="Windows 2000",s.ANDROID="Android",s.OPEN_BSD="Open BSD",s.SUN_OS="Sun OS",s.LINUX="Linux",s.IOS="iOS",s.MAC_OS="Mac OS",s.QNX="QNX",s.UNIX="UNIX",s.BEOS="BeOS",s.OS_2="OS/2",s.SEARCH_BOT="Search Bot"}(RR||(RR={})),function(s){s.CHROME="Chrome",s.SAFARI="Safari",s.EDGE="Edge",s.FIREFOX="Firefox",s.OPERA="OPR",s.QQ="QQBrowser",s.WECHAT="MicroMessenger"}(V1||(V1={}));var Eae={exports:{}};!function(s,p){!function(A,y){var w="function",$="object",j="string",_e="model",K="name",_i="type",_o="vendor",_u="version",ch="architecture",_f="console",o_="mobile",i_="tablet",u_="smarttv",g_="wearable",__="embedded",w_={extend:function(H0,Z0){var a0={};for(var j_ in H0)a0[j_]=Z0[j_]&&Z0[j_].length%2==0?Z0[j_].concat(H0[j_]):H0[j_];return a0},has:function(H0,Z0){return typeof H0===j&&-1!==Z0.toLowerCase().indexOf(H0.toLowerCase())},lowerize:function(H0){return H0.toLowerCase()},major:function(H0){return typeof H0===j?H0.replace(/[^\d\.]/g,"").split(".")[0]:y},trim:function(H0,Z0){return H0=H0.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===Z0?H0:H0.substring(0,255)}},k_={rgx:function(H0,Z0){for(var a0,j_,Z_,o0,W0,q_,_v=0;_v<Z0.length&&!W0;){var u0=Z0[_v],B0=Z0[_v+1];for(a0=j_=0;a0<u0.length&&!W0;)if(W0=u0[a0++].exec(H0))for(Z_=0;Z_<B0.length;Z_++)q_=W0[++j_],typeof(o0=B0[Z_])===$&&o0.length>0?2==o0.length?this[o0[0]]=typeof o0[1]==w?o0[1].call(this,q_):o0[1]:3==o0.length?this[o0[0]]=typeof o0[1]!==w||o0[1].exec&&o0[1].test?q_?q_.replace(o0[1],o0[2]):y:q_?o0[1].call(this,q_,o0[2]):y:4==o0.length&&(this[o0[0]]=q_?o0[3].call(this,q_.replace(o0[1],o0[2])):y):this[o0]=q_||y;_v+=2}},str:function(H0,Z0){for(var a0 in Z0)if(typeof Z0[a0]===$&&Z0[a0].length>0){for(var j_=0;j_<Z0[a0].length;j_++)if(w_.has(Z0[a0][j_],H0))return"?"===a0?y:a0}else if(w_.has(Z0[a0],H0))return"?"===a0?y:a0;return H0}},Pv={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},f0={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_u,[K,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_u,[K,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[K,_u],[/opios[\/\s]+([\w\.]+)/i],[_u,[K,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[_u,[K,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[K,_u],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[_u,[K,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[_u,[K,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[_u,[K,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_u,[K,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[_u,[K,"IE"]],[/yabrowser\/([\w\.]+)/i],[_u,[K,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[K,/(.+)/,"$1 Secure Browser"],_u],[/focus\/([\w\.]+)/i],[_u,[K,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[_u,[K,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[_u,[K,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_u,[K,"Dolphin"]],[/coast\/([\w\.]+)/i],[_u,[K,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[_u,[K,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[_u,[K,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[K,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[K,/(.+)/,"$1 Browser"],_u],[/(comodo_dragon)\/([\w\.]+)/i],[[K,/_/g," "],_u],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[K,_u],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[K],[/;fbav\/([\w\.]+);/i],[_u,[K,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[K,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[K,_u],[/\bgsa\/([\w\.]+)\s.*safari\//i],[_u,[K,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[_u,[K,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[K,"Chrome WebView"],_u],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[_u,[K,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[K,_u],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[_u,[K,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[_u,K],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[K,[_u,k_.str,Pv.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[K,_u],[/(navigator|netscape)\/([\w\.-]+)/i],[[K,"Netscape"],_u],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[_u,[K,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[K,_u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[ch,"amd64"]],[/(ia32(?=;))/i],[[ch,w_.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[ch,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[ch,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ch,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[ch,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[ch,/ower/,"",w_.lowerize]],[/(sun4\w)[;\)]/i],[[ch,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ch,w_.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[_e,[_o,"Samsung"],[_i,i_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[_e,[_o,"Samsung"],[_i,o_]],[/\((ip(?:hone|od)[\s\w]*);/i],[_e,[_o,"Apple"],[_i,o_]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[_e,[_o,"Apple"],[_i,i_]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[_e,[_o,"Huawei"],[_i,i_]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[_e,[_o,"Huawei"],[_i,o_]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[_e,/_/g," "],[_o,"Xiaomi"],[_i,o_]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[_e,/_/g," "],[_o,"Xiaomi"],[_i,i_]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[_e,[_o,"OPPO"],[_i,o_]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[_e,[_o,"Vivo"],[_i,o_]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[_e,[_o,"Realme"],[_i,o_]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[_e,[_o,"Motorola"],[_i,o_]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[_e,[_o,"Motorola"],[_i,i_]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[_e,[_o,"LG"],[_i,i_]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[_e,[_o,"LG"],[_i,o_]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[_e,[_o,"Lenovo"],[_i,i_]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[_e,/_/g," "],[_o,"Nokia"],[_i,o_]],[/droid.+;\s(pixel\sc)[\s)]/i],[_e,[_o,"Google"],[_i,i_]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[_e,[_o,"Google"],[_i,o_]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[_e,[_o,"Sony"],[_i,o_]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[_e,"Xperia Tablet"],[_o,"Sony"],[_i,i_]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[_e,[_o,"OnePlus"],[_i,o_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[_e,[_o,"Amazon"],[_i,i_]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[_e,"Fire Phone"],[_o,"Amazon"],[_i,o_]],[/\((playbook);[\w\s\),;-]+(rim)/i],[_e,_o,[_i,i_]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[_e,[_o,"BlackBerry"],[_i,o_]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[_e,[_o,"ASUS"],[_i,i_]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[_e,[_o,"ASUS"],[_i,o_]],[/(nexus\s9)/i],[_e,[_o,"HTC"],[_i,i_]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[_o,[_e,/_/g," "],[_i,o_]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[_e,[_o,"Acer"],[_i,i_]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[_e,[_o,"Meizu"],[_i,o_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[_o,_e,[_i,o_]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[_o,_e,[_i,i_]],[/\s(surface\sduo)\s/i],[_e,[_o,"Microsoft"],[_i,i_]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[_e,[_o,"Fairphone"],[_i,o_]],[/\s(u304aa)\sbuild/i],[_e,[_o,"AT&T"],[_i,o_]],[/sie-(\w*)/i],[_e,[_o,"Siemens"],[_i,o_]],[/[;\/]\s?(rct\w+)\sbuild/i],[_e,[_o,"RCA"],[_i,i_]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[_e,[_o,"Dell"],[_i,i_]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[_e,[_o,"Verizon"],[_i,i_]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[_e,[_o,"Barnes & Noble"],[_i,i_]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[_e,[_o,"NuVision"],[_i,i_]],[/;\s(k88)\sbuild/i],[_e,[_o,"ZTE"],[_i,i_]],[/;\s(nx\d{3}j)\sbuild/i],[_e,[_o,"ZTE"],[_i,o_]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[_e,[_o,"Swiss"],[_i,o_]],[/[;\/]\s?(zur\d{3})\sbuild/i],[_e,[_o,"Swiss"],[_i,i_]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[_e,[_o,"Zeki"],[_i,i_]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[_o,"Dragon Touch"],_e,[_i,i_]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[_e,[_o,"Insignia"],[_i,i_]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[_e,[_o,"NextBook"],[_i,i_]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[_o,"Voice"],_e,[_i,o_]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[_o,"LvTel"],_e,[_i,o_]],[/;\s(ph-1)\s/i],[_e,[_o,"Essential"],[_i,o_]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[_e,[_o,"Envizen"],[_i,i_]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[_e,[_o,"MachSpeed"],[_i,i_]],[/[;\/]\s?tu_(1491)\sbuild/i],[_e,[_o,"Rotor"],[_i,i_]],[/(shield[\w\s]+)\sbuild/i],[_e,[_o,"Nvidia"],[_i,i_]],[/(sprint)\s(\w+)/i],[_o,_e,[_i,o_]],[/(kin\.[onetw]{3})/i],[[_e,/\./g," "],[_o,"Microsoft"],[_i,o_]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[_e,[_o,"Zebra"],[_i,i_]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[_e,[_o,"Zebra"],[_i,o_]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[_o,_e,[_i,_f]],[/droid.+;\s(shield)\sbuild/i],[_e,[_o,"Nvidia"],[_i,_f]],[/(playstation\s[345portablevi]+)/i],[_e,[_o,"Sony"],[_i,_f]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[_e,[_o,"Microsoft"],[_i,_f]],[/smart-tv.+(samsung)/i],[_o,[_i,u_]],[/hbbtv.+maple;(\d+)/i],[[_e,/^/,"SmartTV"],[_o,"Samsung"],[_i,u_]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[_o,"LG"],[_i,u_]],[/(apple)\s?tv/i],[_o,[_e,"Apple TV"],[_i,u_]],[/crkey/i],[[_e,"Chromecast"],[_o,"Google"],[_i,u_]],[/droid.+aft([\w])(\sbuild\/|\))/i],[_e,[_o,"Amazon"],[_i,u_]],[/\(dtv[\);].+(aquos)/i],[_e,[_o,"Sharp"],[_i,u_]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[_o,w_.trim],[_e,w_.trim],[_i,u_]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[_i,u_]],[/((pebble))app\/[\d\.]+\s/i],[_o,_e,[_i,g_]],[/droid.+;\s(glass)\s\d/i],[_e,[_o,"Google"],[_i,g_]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[_e,[_o,"Zebra"],[_i,g_]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[_o,[_i,__]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[_e,[_i,o_]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[_e,[_i,i_]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[_i,w_.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[_e,[_o,"Generic"]],[/(phone)/i],[[_i,o_]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[_u,[K,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_u,[K,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[K,_u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_u,K]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[K,_u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[K,[_u,k_.str,Pv.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[K,"Windows"],[_u,k_.str,Pv.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[_u,/_/g,"."],[K,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[K,"Mac OS"],[_u,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[K,_u],[/\(bb(10);/i],[_u,[K,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[_u,[K,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[K,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_u,[K,"webOS"]],[/crkey\/([\d\.]+)/i],[_u,[K,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[K,"Chromium OS"],_u],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[K,_u],[/(sunos)\s?([\w\.\d]*)/i],[[K,"Solaris"],_u],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[K,_u]]},v0=function(H0,Z0){if("object"==typeof H0&&(Z0=H0,H0=y),!(this instanceof v0))return new v0(H0,Z0).getResult();var a0=H0||(void 0!==A&&A.navigator&&A.navigator.userAgent?A.navigator.userAgent:""),j_=Z0?w_.extend(f0,Z0):f0;return this.getBrowser=function(){var Z_={name:y,version:y};return k_.rgx.call(Z_,a0,j_.browser),Z_.major=w_.major(Z_.version),Z_},this.getCPU=function(){var Z_={architecture:y};return k_.rgx.call(Z_,a0,j_.cpu),Z_},this.getDevice=function(){var Z_={vendor:y,model:y,type:y};return k_.rgx.call(Z_,a0,j_.device),Z_},this.getEngine=function(){var Z_={name:y,version:y};return k_.rgx.call(Z_,a0,j_.engine),Z_},this.getOS=function(){var Z_={name:y,version:y};return k_.rgx.call(Z_,a0,j_.os),Z_},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a0},this.setUA=function(Z_){return a0=typeof Z_===j&&Z_.length>255?w_.trim(Z_,255):Z_,this},this.setUA(a0),this};v0.VERSION="0.7.28",v0.BROWSER={NAME:K,MAJOR:"major",VERSION:_u},v0.CPU={ARCHITECTURE:ch},v0.DEVICE={MODEL:_e,VENDOR:_o,TYPE:_i,CONSOLE:_f,MOBILE:o_,SMARTTV:u_,TABLET:i_,WEARABLE:g_,EMBEDDED:__},v0.ENGINE={NAME:K,VERSION:_u},v0.OS={NAME:K,VERSION:_u},s.exports&&(p=s.exports=v0),p.UAParser=v0;var I0=void 0!==A&&(A.jQuery||A.Zepto);if(I0&&!I0.ua){var iI=new v0;I0.ua=iI.getResult(),I0.ua.get=function(){return iI.getUA()},I0.ua.set=function(H0){iI.setUA(H0);var Z0=iI.getResult();for(var a0 in Z0)I0.ua[a0]=Z0[a0]}}}("object"==typeof window?window:k)}(Eae,Eae.exports);const Iae=new Eae.exports;let f6=Iae.getResult();function J1(s){return s&&Iae.setUA(s),f6=Iae.getResult(),{name:e_e(f6),version:t_e(f6),os:LL(f6),osVersion:f6.os.version}}function e_e(s){if("Blink"===s.engine.name&&"WeChat"!==s.browser.name)return V1.CHROME;switch(s.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return V1.CHROME;case"Safari":case"Mobile Safari":return V1.SAFARI;case"Edge":return V1.EDGE;case"Firefox":return V1.FIREFOX;case"QQBrowser":return V1.QQ;case"Opera":return V1.OPERA;case"WeChat":return V1.WECHAT;default:return s.browser.name||""}}function t_e(s){let p;return p="Blink"===s.engine.name?s.engine.version||"":s.browser.version||"",p.split(".")[0]}function LL(s){return"Windows"===s.os.name?s.os.version?s.os.name+" "+s.os.version:s.os.name:s.os.name||""}function Ane(){return J1().os}function EK(){const s=J1();return!!("WebKit"===f6.engine.name&&s.os===RR.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&s.name!==V1.SAFARI||W2()&&s.name!==V1.SAFARI)}function _ne(){return J1().name===V1.CHROME}function H2(){return J1().name===V1.SAFARI}function q2(){return J1().name===V1.FIREFOX}function W2(){return J1().os===RR.IOS}function Khe(){const s=J1();if(s.os!==RR.IOS||!s.osVersion)return!1;const p=s.osVersion.split(".");return 13===Number(p[0])}function K2(){const s=J1();if(s.os!==RR.IOS||!s.osVersion)return!1;const p=s.osVersion.split(".");return 15===Number(p[0])}function vne(){const s=J1();if(s.os!==RR.IOS||!s.osVersion)return!1;const p=s.osVersion.split(".");return 15===Number(p[0])&&0===Number(p[1])}function zhe(){const s=J1();if(s.os!==RR.IOS||!s.osVersion)return!1;const p=s.osVersion.split(".");return 15===Number(p[0])&&Number(p[1])>=1}function bae(){const s=J1();if(s.os!==RR.IOS||!s.osVersion)return!1;const p=s.osVersion.split(".");return 15===Number(p[0])&&Number(p[1])>=2}function b4(){return H2()&&navigator.maxTouchPoints>0}function Yhe(){return J1().name===V1.WECHAT}function ZN(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function p6(){const s=J1();return s.name!==V1.EDGE&&s.name!==V1.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Jhe(){return J1().os===RR.ANDROID}var IK={exports:{}},Cae=qN.f;zT({target:"Object",stat:!0,forced:Object.defineProperty!==Cae,sham:!N2},{defineProperty:Cae});var $he=_U.Object,wae=IK.exports=function(s,p,A){return $he.defineProperty(s,p,A)};$he.defineProperty.sham&&(wae.sham=!0);var Tae=IK.exports;function a_(s,p,A){return p in s?Tae(s,p,{value:A,enumerable:!0,configurable:!0,writable:!0}):s[p]=A,s}var Sae={exports:{}},Zhe=function(s,p){return function(){for(var A=new Array(arguments.length),y=0;y<A.length;y++)A[y]=arguments[y];return s.apply(p,A)}},C4=Zhe,g6=Object.prototype.toString;function Xhe(s){return"[object Array]"===g6.call(s)}function efe(s){return null!==s&&"object"==typeof s}function L7(s){return"[object Function]"===g6.call(s)}function L8(s,p){if(null!=s)if("object"!=typeof s&&(s=[s]),Xhe(s))for(var A=0,y=s.length;A<y;A++)p.call(null,s[A],A,s);else for(var w in s)Object.prototype.hasOwnProperty.call(s,w)&&p.call(null,s[w],w,s)}var YP={isArray:Xhe,isArrayBuffer:function(s){return"[object ArrayBuffer]"===g6.call(s)},isBuffer:function(s){return null!=s&&null!=s.constructor&&"function"==typeof s.constructor.isBuffer&&s.constructor.isBuffer(s)},isFormData:function(s){return"undefined"!=typeof FormData&&s instanceof FormData},isArrayBufferView:function(s){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer&&s.buffer instanceof ArrayBuffer},isString:function(s){return"string"==typeof s},isNumber:function(s){return"number"==typeof s},isObject:efe,isUndefined:function(s){return void 0===s},isDate:function(s){return"[object Date]"===g6.call(s)},isFile:function(s){return"[object File]"===g6.call(s)},isBlob:function(s){return"[object Blob]"===g6.call(s)},isFunction:L7,isStream:function(s){return efe(s)&&L7(s.pipe)},isURLSearchParams:function(s){return"undefined"!=typeof URLSearchParams&&s instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:L8,merge:function s(){var p={};function A($,j){p[j]="object"==typeof p[j]&&"object"==typeof $?s(p[j],$):$}for(var y=0,w=arguments.length;y<w;y++)L8(arguments[y],A);return p},deepMerge:function s(){var p={};function A($,j){p[j]="object"==typeof p[j]&&"object"==typeof $?s(p[j],$):"object"==typeof $?s({},$):$}for(var y=0,w=arguments.length;y<w;y++)L8(arguments[y],A);return p},extend:function(s,p,A){return L8(p,function(y,w){s[w]=A&&"function"==typeof y?C4(y,A):y}),s},trim:function(s){return s.replace(/^\s*/,"").replace(/\s*$/,"")}},bK=YP;function Rae(s){return encodeURIComponent(s).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var tfe=function(s,p,A){if(!p)return s;var y;if(A)y=A(p);else if(bK.isURLSearchParams(p))y=p.toString();else{var w=[];bK.forEach(p,function(j,_e){null!=j&&(bK.isArray(j)?_e+="[]":j=[j],bK.forEach(j,function(K){bK.isDate(K)?K=K.toISOString():bK.isObject(K)&&(K=JSON.stringify(K)),w.push(Rae(_e)+"="+Rae(K))}))}),y=w.join("&")}if(y){var $=s.indexOf("#");-1!==$&&(s=s.slice(0,$)),s+=(-1===s.indexOf("?")?"?":"&")+y}return s},o_e=YP;function yne(){this.handlers=[]}yne.prototype.use=function(s,p){return this.handlers.push({fulfilled:s,rejected:p}),this.handlers.length-1},yne.prototype.eject=function(s){this.handlers[s]&&(this.handlers[s]=null)},yne.prototype.forEach=function(s){o_e.forEach(this.handlers,function(p){null!==p&&s(p)})};var s_e=yne,nfe=YP,Oae=function(s){return!(!s||!s.__CANCEL__)},Ene=YP,rfe=function(s,p,A,y,w){return function(s,p,A,y,w){return s.config=p,A&&(s.code=A),s.request=y,s.response=w,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s}(new Error(s),p,A,y,w)},a_e=rfe,Ine=YP,c_e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ife=YP,z2=ife.isStandardBrowserEnv()?function(){var s,p=/(msie|trident)/i.test(navigator.userAgent),A=document.createElement("a");function y(w){var $=w;return p&&(A.setAttribute("href",$),$=A.href),A.setAttribute("href",$),{href:A.href,protocol:A.protocol?A.protocol.replace(/:$/,""):"",host:A.host,search:A.search?A.search.replace(/^\?/,""):"",hash:A.hash?A.hash.replace(/^#/,""):"",hostname:A.hostname,port:A.port,pathname:"/"===A.pathname.charAt(0)?A.pathname:"/"+A.pathname}}return s=y(window.location.href),function(w){var $=ife.isString(w)?y(w):w;return $.protocol===s.protocol&&$.host===s.host}}():function(){return!0},CK=YP,u_e=CK.isStandardBrowserEnv()?{write:function(s,p,A,y,w,$){var j=[];j.push(s+"="+encodeURIComponent(p)),CK.isNumber(A)&&j.push("expires="+new Date(A).toGMTString()),CK.isString(y)&&j.push("path="+y),CK.isString(w)&&j.push("domain="+w),!0===$&&j.push("secure"),document.cookie=j.join("; ")},read:function(s){var p=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},M8=YP,l_e=tfe,VU=z2,Nae=rfe,JP=YP,sfe=function(s,p){Ene.forEach(s,function(A,y){y!==p&&y.toUpperCase()===p.toUpperCase()&&(s[p]=A,delete s[y])})},afe={"Content-Type":"application/x-www-form-urlencoded"};function B8(s,p){!JP.isUndefined(s)&&JP.isUndefined(s["Content-Type"])&&(s["Content-Type"]=p)}var cfe,bne={adapter:(("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)||"undefined"!=typeof XMLHttpRequest)&&(cfe=function(s){return new Promise(function(p,A){var y=s.data,w=s.headers;M8.isFormData(y)&&delete w["Content-Type"];var $=new XMLHttpRequest;if(s.auth&&(w.Authorization="Basic "+btoa((s.auth.username||"")+":"+(s.auth.password||""))),$.open(s.method.toUpperCase(),l_e(s.url,s.params,s.paramsSerializer),!0),$.timeout=s.timeout,$.onreadystatechange=function(){if($&&4===$.readyState&&(0!==$.status||$.responseURL&&0===$.responseURL.indexOf("file:"))){var _o="getAllResponseHeaders"in $?function(s){var p,A,y,w={};return s&&Ine.forEach(s.split("\n"),function($){if(y=$.indexOf(":"),p=Ine.trim($.substr(0,y)).toLowerCase(),A=Ine.trim($.substr(y+1)),p){if(w[p]&&c_e.indexOf(p)>=0)return;w[p]="set-cookie"===p?(w[p]?w[p]:[]).concat([A]):w[p]?w[p]+", "+A:A}}),w}($.getAllResponseHeaders()):null;(function(s,p,A){var y=A.config.validateStatus;!y||y(A.status)?s(A):p(a_e("Request failed with status code "+A.status,A.config,null,A.request,A))})(p,A,{data:s.responseType&&"text"!==s.responseType?$.response:$.responseText,status:$.status,statusText:$.statusText,headers:_o,config:s,request:$}),$=null}},$.onabort=function(){$&&(A(Nae("Request aborted",s,"ECONNABORTED",$)),$=null)},$.onerror=function(){A(Nae("Network Error",s,null,$)),$=null},$.ontimeout=function(){A(Nae("timeout of "+s.timeout+"ms exceeded",s,"ECONNABORTED",$)),$=null},M8.isStandardBrowserEnv()){var K=u_e,_i=(s.withCredentials||VU(s.url))&&s.xsrfCookieName?K.read(s.xsrfCookieName):void 0;_i&&(w[s.xsrfHeaderName]=_i)}if("setRequestHeader"in $&&M8.forEach(w,function(_o,_u){void 0===y&&"content-type"===_u.toLowerCase()?delete w[_u]:$.setRequestHeader(_u,_o)}),s.withCredentials&&($.withCredentials=!0),s.responseType)try{$.responseType=s.responseType}catch(_o){if("json"!==s.responseType)throw _o}"function"==typeof s.onDownloadProgress&&$.addEventListener("progress",s.onDownloadProgress),"function"==typeof s.onUploadProgress&&$.upload&&$.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(_o){$&&($.abort(),A(_o),$=null)}),void 0===y&&(y=null),$.send(y)})}),cfe),transformRequest:[function(s,p){return sfe(p,"Accept"),sfe(p,"Content-Type"),JP.isFormData(s)||JP.isArrayBuffer(s)||JP.isBuffer(s)||JP.isStream(s)||JP.isFile(s)||JP.isBlob(s)?s:JP.isArrayBufferView(s)?s.buffer:JP.isURLSearchParams(s)?(B8(p,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):JP.isObject(s)?(B8(p,"application/json;charset=utf-8"),JSON.stringify(s)):s}],transformResponse:[function(s){if("string"==typeof s)try{s=JSON.parse(s)}catch(p){}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};JP.forEach(["delete","get","head"],function(s){bne.headers[s]={}}),JP.forEach(["post","put","patch"],function(s){bne.headers[s]=JP.merge(afe)});var kae=bne,ufe=YP,Pae=function(s,p,A){return nfe.forEach(A,function(y){s=y(s,p)}),s},f_e=Oae,lfe=kae;function Lae(s){s.cancelToken&&s.cancelToken.throwIfRequested()}var M7=YP,hfe=function(s,p){p=p||{};var A={};return M7.forEach(["url","method","params","data"],function(y){void 0!==p[y]&&(A[y]=p[y])}),M7.forEach(["headers","auth","proxy"],function(y){M7.isObject(p[y])?A[y]=M7.deepMerge(s[y],p[y]):void 0!==p[y]?A[y]=p[y]:M7.isObject(s[y])?A[y]=M7.deepMerge(s[y]):void 0!==s[y]&&(A[y]=s[y])}),M7.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(y){void 0!==p[y]?A[y]=p[y]:void 0!==s[y]&&(A[y]=s[y])}),A},Cne=YP,ffe=tfe,pfe=s_e,p_e=function(s){return Lae(s),s.baseURL&&!function(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)}(s.url)&&(s.url=function(s,p){return p?s.replace(/\/+$/,"")+"/"+p.replace(/^\/+/,""):s}(s.baseURL,s.url)),s.headers=s.headers||{},s.data=Pae(s.data,s.headers,s.transformRequest),s.headers=ufe.merge(s.headers.common||{},s.headers[s.method]||{},s.headers||{}),ufe.forEach(["delete","get","head","post","put","patch","common"],function(p){delete s.headers[p]}),(s.adapter||lfe.adapter)(s).then(function(p){return Lae(s),p.data=Pae(p.data,p.headers,s.transformResponse),p},function(p){return f_e(p)||(Lae(s),p&&p.response&&(p.response.data=Pae(p.response.data,p.response.headers,s.transformResponse))),Promise.reject(p)})},Mae=hfe;function W$(s){this.defaults=s,this.interceptors={request:new pfe,response:new pfe}}W$.prototype.request=function(s){"string"==typeof s?(s=arguments[1]||{}).url=arguments[0]:s=s||{},(s=Mae(this.defaults,s)).method=s.method?s.method.toLowerCase():"get";var p=[p_e,void 0],A=Promise.resolve(s);for(this.interceptors.request.forEach(function(y){p.unshift(y.fulfilled,y.rejected)}),this.interceptors.response.forEach(function(y){p.push(y.fulfilled,y.rejected)});p.length;)A=A.then(p.shift(),p.shift());return A},W$.prototype.getUri=function(s){return s=Mae(this.defaults,s),ffe(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")},Cne.forEach(["delete","get","head","options"],function(s){W$.prototype[s]=function(p,A){return this.request(Cne.merge(A||{},{method:s,url:p}))}}),Cne.forEach(["post","put","patch"],function(s){W$.prototype[s]=function(p,A,y){return this.request(Cne.merge(y||{},{method:s,url:p,data:A}))}});var gfe=W$;function Bae(s){this.message=s}Bae.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Bae.prototype.__CANCEL__=!0;var wne=Bae,mfe=wne;function K$(s){if("function"!=typeof s)throw new TypeError("executor must be a function.");var p;this.promise=new Promise(function(y){p=y});var A=this;s(function(y){A.reason||(A.reason=new mfe(y),p(A.reason))})}K$.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},K$.source=function(){var s;return{token:new K$(function(p){s=p}),cancel:s}};var Afe=K$,g_e=YP,pEe=Zhe,Uae=gfe,m_e=hfe;function _fe(s){var p=new Uae(s),A=pEe(Uae.prototype.request,p);return g_e.extend(A,Uae.prototype,p),g_e.extend(A,p),A}var T4=_fe(kae);T4.Axios=Uae,T4.create=function(s){return _fe(m_e(T4.defaults,s))},T4.Cancel=wne,T4.CancelToken=Afe,T4.isCancel=Oae,T4.all=function(s){return Promise.all(s)},T4.spread=function(s){return function(p){return s.apply(null,p)}},Sae.exports=T4,Sae.exports.default=T4;var GU=Sae.exports;class A_e{constructor(p){a_(this,"logger",void 0),a_(this,"prefixLists",[]),this.logger=p}debug(){for(var p=arguments.length,A=new Array(p),y=0;y<p;y++)A[y]=arguments[y];this.logger.debug(...this.prefixLists,...A)}info(){for(var p=arguments.length,A=new Array(p),y=0;y<p;y++)A[y]=arguments[y];this.logger.info(...this.prefixLists,...A)}warning(){for(var p=arguments.length,A=new Array(p),y=0;y<p;y++)A[y]=arguments[y];this.logger.warning(...this.prefixLists,...A)}error(){for(var p=arguments.length,A=new Array(p),y=0;y<p;y++)A[y]=arguments[y];this.logger.error(...this.prefixLists,...A)}prefix(p){return this.prefixLists.push(p),this}popPrefix(){return this.prefixLists.pop(),this}}class hS{constructor(){a_(this,"_events",{}),a_(this,"addListener",this.on)}getListeners(p){return this._events[p]?this._events[p].map(A=>A.listener):[]}on(p,A){this._events[p]||(this._events[p]=[]);const y=this._events[p];-1===this._indexOfListener(y,A)&&y.push({listener:A,once:!1})}once(p,A){this._events[p]||(this._events[p]=[]);const y=this._events[p];-1===this._indexOfListener(y,A)&&y.push({listener:A,once:!0})}off(p,A){if(!this._events[p])return;const y=this._events[p],w=this._indexOfListener(y,A);-1!==w&&y.splice(w,1),0===this._events[p].length&&delete this._events[p]}removeAllListeners(p){p?delete this._events[p]:this._events={}}emit(p){this._events[p]||(this._events[p]=[]);const A=this._events[p].map(j=>j);for(var y=arguments.length,w=new Array(y>1?y-1:0),$=1;$<y;$++)w[$-1]=arguments[$];for(let j=0;j<A.length;j+=1){const _e=A[j];_e.once&&this.off(p,_e.listener),_e.listener.apply(this,w||[])}}_indexOfListener(p,A){let y=p.length;for(;y--;)if(p[y].listener===A)return y;return-1}}const Tne=new class extends hS{reportLogUploadError(s){this.emit("REPORT_LOG_UPLOAD",s)}};let D_;!function(s){s.UNEXPECTED_ERROR="UNEXPECTED_ERROR",s.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",s.TIMEOUT="TIMEOUT",s.INVALID_PARAMS="INVALID_PARAMS",s.NOT_READABLE="NOT_READABLE",s.NOT_SUPPORTED="NOT_SUPPORTED",s.INVALID_OPERATION="INVALID_OPERATION",s.OPERATION_ABORTED="OPERATION_ABORTED",s.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",s.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",s.NETWORK_ERROR="NETWORK_ERROR",s.NETWORK_TIMEOUT="NETWORK_TIMEOUT",s.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",s.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",s.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",s.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",s.ELECTRON_IS_NULL="ELECTRON_IS_NULL",s.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",s.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",s.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",s.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",s.PERMISSION_DENIED="PERMISSION_DENIED",s.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",s.TRACK_IS_DISABLED="TRACK_IS_DISABLED",s.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",s.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",s.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",s.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",s.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",s.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",s.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",s.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",s.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",s.UID_CONFLICT="UID_CONFLICT",s.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",s.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",s.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",s.INVALID_TRACK="INVALID_TRACK",s.SENDER_NOT_FOUND="SENDER_NOT_FOUND",s.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",s.SET_ANSWER_FAILED="SET_ANSWER_FAILED",s.ICE_FAILED="ICE_FAILED",s.PC_CLOSED="PC_CLOSED",s.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",s.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",s.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",s.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",s.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",s.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",s.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",s.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",s.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",s.INVALID_REMOTE_USER="INVALID_REMOTE_USER",s.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",s.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",s.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",s.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",s.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",s.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",s.WS_ABORT="WS_ABORT",s.WS_DISCONNECT="WS_DISCONNECT",s.WS_ERR="WS_ERR",s.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",s.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",s.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",s.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",s.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",s.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",s.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",s.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",s.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",s.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",s.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",s.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",s.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",s.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",s.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",s.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",s.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",s.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",s.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",s.INVALID_PLUGIN="INVALID_PLUGIN",s.DISCONNECT_P2P="DISCONNECT_P2P",s.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT"}(D_||(D_={}));class U_ extends Error{constructor(p){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",y=arguments.length>2?arguments[2]:void 0;super(A),a_(this,"code",void 0),a_(this,"message",void 0),a_(this,"data",void 0),a_(this,"name","AgoraRTCException"),this.code=p,this.message="AgoraRTCError ".concat(this.code,": ").concat(A),this.data=y}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===p&&h_.error(this.toString()),"warning"===p&&h_.warning(this.toString()),this}throw(){throw this.print(),this}}const US={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Fae(s,p){const A=Math.floor(p.timeout*Math.pow(p.timeoutFactor,s));return Math.min(p.maxRetryTimeout,A)}function wM(s,p,A,y){const w=Object.assign({},US,y);let $=w.timeout;const j=function(){var _i=f(function*(){var _o;yield(_o=$,new sI(_u=>{window.setTimeout(_u,_o)})),$*=w.timeoutFactor,$=Math.min(w.maxRetryTimeout,$)});return function(){return _i.apply(this,arguments)}}();let _e=!1;const K=new sI(function(){var _i=f(function*(_o,_u){p=p||(()=>!1),A=A||(()=>!0);for(let ch=0;ch<w.maxRetryCount;ch+=1){if(_e)return _u(new U_(D_.OPERATION_ABORTED));try{const _f=yield s();if(!p(_f,ch)||ch+1===w.maxRetryCount)return _o(_f);yield j()}catch(_f){if(!A(_f,ch)||ch+1===w.maxRetryCount)return _u(_f);yield j()}}});return function(_o,_u){return _i.apply(this,arguments)}}());return K.cancel=()=>_e=!0,K}function vfe(){const s=new Date;return s.toTimeString().split(" ")[0]+":"+s.getMilliseconds()}const ML={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Sne=Date.now(),wK=s=>{for(const p in ML)if(Object.prototype.hasOwnProperty.call(ML,p)&&ML[p]===s)return p;return"DEFAULT"},h_=new class{constructor(){a_(this,"proxyServerURL",void 0),a_(this,"logLevel",ML.DEBUG),a_(this,"uploadState","collecting"),a_(this,"uploadLogWaitingList",[]),a_(this,"uploadLogUploadingList",[]),a_(this,"uploadErrorCount",0),a_(this,"currentLogID",0),a_(this,"url",void 0),a_(this,"extLog",(s,p)=>{this.appendLogToWaitingList(s,p)})}debug(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];const y=[ML.DEBUG].concat(p);this.log.apply(this,y)}info(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];const y=[ML.INFO].concat(p);this.log.apply(this,y)}warning(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];const y=[ML.WARNING].concat(p);this.log.apply(this,y)}error(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];const y=[ML.ERROR].concat(p);this.log.apply(this,y)}upload(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];const y=[ML.DEBUG].concat(p);this.uploadLog.apply(this,y)}setLogLevel(s){s=Math.min(Math.max(0,s),4),this.logLevel=s}enableLogUpload(){QO("UPLOAD_LOG",!0)}disableLogUpload(){QO("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(s){this.proxyServerURL=s}prefix(s){return new A_e(this).prefix(s)}log(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];if(Date.now()-Sne<100)return void setTimeout(()=>{this.log(...p)},Date.now()-Sne);const y=Math.max(0,Math.min(4,p[0]));if(p[0]=vfe()+" Agora-SDK [".concat(wK(y),"]:"),this.appendLogToWaitingList(y,p),y<this.logLevel)return;const w=vfe()+" %cAgora-SDK [".concat(wK(y),"]:");let $=[];if(!S0("USE_NEW_LOG"))switch(y){case ML.DEBUG:$=[w,"color: #64B5F6;"].concat(p.slice(1)),console.log.apply(console,$);break;case ML.INFO:$=[w,"color: #1E88E5; font-weight: bold;"].concat(p.slice(1)),console.log.apply(console,$);break;case ML.WARNING:$=[w,"color: #FB8C00; font-weight: bold;"].concat(p.slice(1)),console.warn.apply(console,$);break;case ML.ERROR:$=[w,"color: #B00020; font-weight: bold;"].concat(p.slice(1)),console.error.apply(console,$)}}uploadLog(){for(var s=arguments.length,p=new Array(s),A=0;A<s;A++)p[A]=arguments[A];if(Date.now()-Sne<100)return void setTimeout(()=>{this.uploadLog(...p)},Date.now()-Sne);const y=Math.max(0,Math.min(4,p[0]));p[0]=vfe()+" Agora-SDK [".concat(wK(y),"]:"),this.appendLogToWaitingList(y,p)}appendLogToWaitingList(s){if(!S0("UPLOAD_LOG"))return;let p="";for(var A=arguments.length,y=new Array(A>1?A-1:0),w=1;w<A;w++)y[w-1]=arguments[w];y.forEach($=>{"object"==typeof $&&($=JSON.stringify($)),p+="".concat($," ")}),this.uploadLogWaitingList.push({payload_str:p,log_level:s,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var s=this;return f(function*(){const p=s.uploadLogUploadingList,A={sdk_version:GO,process_id:S0("PROCESS_ID"),payload:JSON.stringify(p)};return wM(f(function*(){const y=yield GU.post(s.url||(s.proxyServerURL?"https://".concat(s.proxyServerURL,"/ls/?h=").concat(S0("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(S0("LOG_UPLOAD_SERVER"),"/upload/v1")),A,{responseType:"text"});if("OK"!==y.data){const w=new Error("unexpected upload log response");throw w.response=y,w}}),()=>(s.uploadLogUploadingList=[],!1),y=>(Tne.reportLogUploadError(y.response?{status:y.response.status,data:y.response.data,headers:y.response.headers,message:y.message}:y.request?{status:y.request.status,message:y.message}:{status:-1,message:y.message}),!0),{timeout:2e3,maxRetryTimeout:2e4})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,10)),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),3e3)}).catch(s=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),200):window.setTimeout(()=>this.uploadLogInterval(),1e3)}))}},z$={debug:console.log,info:console.log,warning:console.warn,error:console.error},TM={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},yfe={debug:0,info:1,warning:2,error:3},Y$=[];let jae,Efe=0,Ife=0,bfe=!1;function Rne(){const s=new Date;return[s.getTime(),s.toTimeString().split(" ")[0]+":"+s.getMilliseconds()]}function One(s){if(!S0("UPLOAD_LOG"))return;let p;switch(s.type){case W1.MISC:p=[s.timestamp,s.level,s.type,s.module,s.instanceId,[s.msg]];break;case W1.INTERNAL_EVENT:case W1.PUBLIC_EVENT:case W1.WEB_EVENT:p=[s.timestamp,s.level,s.type,s.module,s.instanceId,[s.event,s.msg]];break;case W1.INTERNAL_API:case W1.PUBLIC_API:case W1.WEB_API:p=[s.timestamp,s.level,s.type,s.module,s.instanceId,[s.api,s.args,s.result]]}Y$.push(p)}function Vae(s,p){const[A,y]=Rne(),w="warning",$="".concat(y," %cAgora-SDK [").concat(w,"] [INTERNAL API]:"),j={[W1.WEB_API]:"logWebAPI",[W1.PUBLIC_API]:"logPublicAPI",[W1.INTERNAL_API]:"logInternalAPI",[W1.WEB_EVENT]:"logWebEvent",[W1.PUBLIC_EVENT]:"logPublicEvent",[W1.INTERNAL_EVENT]:"logInternalEvent",[W1.MISC]:"logMisc"}[s],_e=[$,TM.warning,"Log.".concat(j),p];S0("USE_NEW_LOG")&&(Dne(w)&&z$.warning.apply(console,_e),One({timestamp:A,level:w,module:"Log",instanceId:void 0,type:W1.INTERNAL_API,api:j,args:void 0,result:p.toString()}))}function TK(s){if(Array.isArray(s)){let[y,w]=s;return y||(y="Global"),{module:y,instanceId:w}}let p,A;if("string"!=typeof s.__moduleName)throw new Error("Cannot get __moduleName from log instance.");p=s.__moduleName;try{A=s.__instanceId}catch(y){throw new Error("Cannot get __instanceId from log instance.")}return{module:p,instanceId:A}}function Dne(s){return yfe[s]>=Ife}function Gae(s,p,A,y,w,$){if(s===W1.PUBLIC_API||s===W1.WEB_API||s===W1.INTERNAL_API)try{const{module:j,instanceId:_e}=TK(A);w=w&&JSON.stringify(w),$=$ instanceof Error?$.toString():$&&JSON.stringify($);const[K,_i]=Rne(),_o=["".concat(_i," %cAgora-SDK [").concat(p,"] [").concat({[W1.PUBLIC_API]:"PUBLIC API",[W1.WEB_API]:"WEB API",[W1.INTERNAL_API]:"INTERNAL API"}[s],"]:"),TM[p],"".concat(j).concat(_e?"<".concat(_e,">"):"",".").concat(y),w,$];S0("USE_NEW_LOG")&&(Dne(p)&&z$[p].apply(console,_o),One({timestamp:K,level:p,module:j,instanceId:_e,type:s,api:y,args:w,result:$}))}catch(j){Vae(s,j)}}function Qae(s,p,A,y,w){if(s===W1.WEB_EVENT||s===W1.INTERNAL_EVENT||s===W1.PUBLIC_EVENT)try{const{module:$,instanceId:j}=TK(A);"string"!=typeof w&&(w=w instanceof Error?w.toString():JSON.stringify(w));const[_e,K]=Rne(),_i=["".concat(K," %cAgora-SDK [").concat(p,"] [").concat({[W1.WEB_EVENT]:"WEB EVENT",[W1.PUBLIC_EVENT]:"PUBLIC EVENT",[W1.INTERNAL_EVENT]:"INTERNAL EVENT"}[s],"]:"),TM[p],"".concat($).concat(j?"<".concat(j,">"):"",".on(").concat(y,")"),w||""];S0("USE_NEW_LOG")&&(Dne(p)&&z$[p].apply(console,_i),One({timestamp:_e,level:p,module:$,instanceId:j,type:s,event:y,msg:w}))}catch($){Vae(s,$)}}function B7(s){jae=s}function aI(s,p,A){try{const{module:y,instanceId:w}=TK(p),[$,j]=Rne(),_e=["".concat(j," %cAgora-SDK [").concat(s,"] [MISC]:"),TM[s],"".concat(y).concat(w?"<".concat(w,">"):""),'"'.concat(A,'"')];S0("USE_NEW_LOG")&&(Dne(s)&&z$[s].apply(console,_e),One({timestamp:$,level:s,module:y,instanceId:w,type:W1.MISC,msg:A}))}catch(y){T0("warning",["log"],"logMisc",void 0,y)}}function vT(s,p,A,y){Qae(W1.INTERNAL_EVENT,s,p,A,y)}function BL(s,p,A,y){Qae(W1.PUBLIC_EVENT,s,p,A,y)}function m6(s,p,A,y){Qae(W1.WEB_EVENT,s,p,A,y)}function T0(s,p,A,y,w){Gae(W1.INTERNAL_API,s,p,A,y,w)}function SK(s,p,A,y,w){Gae(W1.WEB_API,s,p,A,y,w)}function pI(s,p,A,y,w){Gae(W1.PUBLIC_API,s,p,A,y,w)}function dI(s,p){return function(A){return class extends A{get __moduleName(){return s}get __instanceId(){if(p){if("function"==typeof this[p])return this[p]();{const y=p.split(".");return y.length>0?BP(y).call(y,(w,$)=>{try{return w&&w[$]}catch(j){return}},this):this[p]}}}}}}function RK(s){return g1.apply(this,arguments)}function g1(){return g1=f(function*(s){if(!s&&bfe)return;if(bfe=!0,!S0("UPLOAD_LOG"))return void setTimeout(()=>RK(!0),5e3);if(0===Y$.length)return void setTimeout(()=>RK(!0),3e3);const p=Y$.slice(0,10),A={sdk_version:GO,log_version:S0("LOG_VERSION"),process_id:S0("PROCESS_ID"),index:Efe,logs:JSON.stringify(p)};yield wM(f(function*(){const y=yield GU.post(jae?"https://".concat(jae,"/ls/?h=").concat(S0("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(S0("LOG_UPLOAD_SERVER"),"/upload/v1"),A,{responseType:"text"});if("OK"!==y.data)throw new Error("Log service response error ".concat(y.data));return y}),void 0,void 0,{timeout:3e3,maxRetryTimeout:1e4}),Y$.splice(0,10),Efe+=p.length,setTimeout(()=>RK(!0),3e3)}),g1.apply(this,arguments)}const U7="v4.11.1-0-gcd0777ab(5/9/2022, 6:52:38 PM)",GO=function(s){if(s.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return s;const p=s.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(p&&p[1]&&p[2]){const w=p[2];return"".concat(p[1],".").concat(w)}const A=s.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(A&&A[1]&&A[2]){const w=A[2];return"".concat(A[1],".").concat(100*(Number(w)+1))}return"4.0.0.999"}("4.11.1"),F7=function(){try{return!0===JSON.parse("true")}catch(s){return!0}}(),ZS={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Hae={"90p":i1(160,90),"90p_1":i1(160,90),"120p":i1(160,120,15,30,65),"120p_1":i1(160,120,15,30,65),"120p_3":i1(120,120,15,30,50),"120p_4":i1(212,120),"180p":i1(320,180,15,30,140),"180p_1":i1(320,180,15,30,140),"180p_3":i1(180,180,15,30,100),"180p_4":i1(240,180,15,30,120),"240p":i1(320,240,15,40,200),"240p_1":i1(320,240,15,40,200),"240p_3":i1(240,240,15,40,140),"240p_4":i1(424,240,15,40,220),"360p":i1(640,360,15,80,400),"360p_1":i1(640,360,15,80,400),"360p_3":i1(360,360,15,80,260),"360p_4":i1(640,360,30,80,600),"360p_6":i1(360,360,30,80,400),"360p_7":i1(480,360,15,80,320),"360p_8":i1(480,360,30,80,490),"360p_9":i1(640,360,15,80,800),"360p_10":i1(640,360,24,80,800),"360p_11":i1(640,360,24,80,1e3),"480p":i1(640,480,15,100,500),"480p_1":i1(640,480,15,100,500),"480p_2":i1(640,480,30,100,1e3),"480p_3":i1(480,480,15,100,400),"480p_4":i1(640,480,30,100,750),"480p_6":i1(480,480,30,100,600),"480p_8":i1(848,480,15,100,610),"480p_9":i1(848,480,30,100,930),"480p_10":i1(640,480,10,100,400),"720p":i1(1280,720,15,120,1130),"720p_1":i1(1280,720,15,120,1130),"720p_2":i1(1280,720,30,120,2e3),"720p_3":i1(1280,720,30,120,1710),"720p_5":i1(960,720,15,120,910),"720p_6":i1(960,720,30,120,1380),"1080p":i1(1920,1080,15,120,2080),"1080p_1":i1(1920,1080,15,120,2080),"1080p_2":i1(1920,1080,30,120,3e3),"1080p_3":i1(1920,1080,30,120,3150),"1080p_5":i1(1920,1080,60,120,4780),"1440p":i1(2560,1440,30,120,4850),"1440p_1":i1(2560,1440,30,120,4850),"1440p_2":i1(2560,1440,60,120,7350),"4k":i1(3840,2160,30,120,8910),"4k_1":i1(3840,2160,30,120,8910),"4k_3":i1(3840,2160,60,120,13500)},__e={"480p":$P(640,480,5),"480p_1":$P(640,480,5),"480p_2":$P(640,480,30),"480p_3":$P(640,480,15),"720p":$P(1280,720,5),"720p_1":$P(1280,720,5),"720p_2":$P(1280,720,30),"720p_3":$P(1280,720,15),"1080p":$P(1920,1080,5),"1080p_1":$P(1920,1080,5),"1080p_2":$P(1920,1080,30),"1080p_3":$P(1920,1080,15)},v_e={"1SL1TL":NK(1,1),"3SL3TL":NK(3,3),"2SL3TL":NK(2,3)};function OK(s){return"string"==typeof s?Object.assign({},Hae[s]):s}function bO(s){return"string"==typeof s?Object.assign({},__e[s]):s}function j7(s){return"string"==typeof s?Object.assign({},v_e[s]):s}const mN={speech_low_quality:DK(16e3,!1),speech_standard:DK(32e3,!1,18),music_standard:DK(48e3,!1),standard_stereo:DK(48e3,!0,56),high_quality:DK(48e3,!1,128),high_quality_stereo:DK(48e3,!0,192)};function QU(s){return"string"==typeof s?Object.assign({},mN[s]):s}function QO(s,p,A){Object.keys(AN).includes(s)&&(!A&&Object.keys(Nne).includes(s)||(AN[s]=p))}function S0(s){return AN[s]}const AN={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},STATS_COLLECTOR_PORT:443},Nne={};function DK(s,p,A){return{sampleRate:s,stereo:p,bitrate:A}}function i1(s,p,A,y,w){return{width:s,height:p,frameRate:A,bitrateMin:y,bitrateMax:w}}function $P(s,p,A,y,w){return{width:{max:s},height:{max:p},frameRate:A,bitrateMin:y,bitrateMax:w}}function NK(s,p){return{numSpatialLayers:s,numTemporalLayers:p}}F7||(AN.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],AN.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],AN.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],AN.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],AN.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],AN.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],AN.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",AN.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",AN.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",AN.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",AN.AREAS=["NORTH_AMERICA","OVERSEA"]);const Cfe=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],nO=[],V7=[];var Y2=dQ,wfe=qN,Tfe=k2,kK=function(s,p,A){var y=Y2(p);y in s?wfe.f(s,y,Tfe(0,A)):s[y]=A},qae=o8,Sfe=XR,Rfe=kK,Wae=e1.Array,y_e=Math.max,Kae=function(s,p,A){for(var y=Sfe(s),w=qae(p,y),$=qae(void 0===A?y:A,y),j=Wae(y_e($-w,0)),_e=0;w<$;w++,_e++)Rfe(j,_e,s[w]);return j.length=_e,j},G7=Kae,Ofe=Math.floor,J$=function(s,p){var A=s.length,y=Ofe(A/2);return A<8?Dfe(s,p):E_e(s,J$(G7(s,0,y),p),J$(G7(s,y),p),p)},Dfe=function(s,p){for(var A,y,w=s.length,$=1;$<w;){for(y=$,A=s[$];y&&p(s[y-1],A)>0;)s[y]=s[--y];y!==$++&&(s[y]=A)}return s},E_e=function(s,p,A,y){for(var w=p.length,$=A.length,j=0,_e=0;j<w||_e<$;)s[j+_e]=j<w&&_e<$?y(p[j],A[_e])<=0?p[j++]:A[_e++]:j<w?p[j++]:A[_e++];return s},zae=J$,$$=TL.match(/firefox\/(\d+)/i),Yae=!!$$&&+$$[1],Jae=/MSIE|Trident/.test(TL),kne=TL.match(/AppleWebKit\/(\d+)\./),b_e=zT,Pne=nT,Nfe=HN,C_e=mM,w_e=XR,_N=HP,Q7=OT,T_e=zae,Z$=CV,kfe=Yae,S_e=Jae,X$=t1,eZ=!!kne&&+kne[1],S4=[],xne=Pne(S4.sort),$ae=Pne(S4.push),Zae=Q7(function(){S4.sort(void 0)}),Pfe=Q7(function(){S4.sort(null)}),xfe=Z$("sort"),Lfe=!Q7(function(){if(X$)return X$<70;if(!(kfe&&kfe>3)){if(S_e)return!0;if(eZ)return eZ<603;var s,p,A,y,w="";for(s=65;s<76;s++){switch(p=String.fromCharCode(s),s){case 66:case 69:case 70:case 72:A=3;break;case 68:case 71:A=4;break;default:A=2}for(y=0;y<47;y++)S4.push({k:p+y,v:A})}for(S4.sort(function($,j){return j.v-$.v}),y=0;y<S4.length;y++)p=S4[y].k.charAt(0),w.charAt(w.length-1)!==p&&(w+=p);return"DGBEFHACIJK"!==w}});b_e({target:"Array",proto:!0,forced:Zae||!Pfe||!xfe||!Lfe},{sort:function(s){void 0!==s&&Nfe(s);var p=C_e(this);if(Lfe)return void 0===s?xne(p):xne(p,s);var A,y,w=[],$=w_e(p);for(y=0;y<$;y++)y in p&&$ae(w,p[y]);for(T_e(w,function(j){return function(_e,K){return void 0===K?-1:void 0===_e?1:void 0!==j?+j(_e,K)||0:_N(_e)>_N(K)?1:-1}}(s)),A=w.length,y=0;y<A;)p[y]=w[y++];for(;y<$;)delete p[y++];return p}});var Mfe=RL("Array").sort,Bfe=D2,Xae=Mfe,Lne=Array.prototype,ece=function(s){var p=s.sort;return s===Lne||Bfe(Lne,s)&&p===Lne.sort?Xae:p};function PK(s,p){if("boolean"!=typeof s)throw new U_(D_.INVALID_PARAMS,"Invalid ".concat(p,": The value is of the boolean type."))}function dR(s,p,A){if(!A.includes(s))throw new U_(D_.INVALID_PARAMS,"".concat(p," can only be set as ").concat(JSON.stringify(A)))}function $1(s,p){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(s<A||s>y||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!Ffe(s))throw new U_(D_.INVALID_PARAMS,"invalid ".concat(p,": the value range is [").concat(A,", ").concat(y,"]. integer only"))}function rT(s,p){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==s)throw new U_(D_.INVALID_PARAMS,"".concat(p||"param"," cannot be empty"));if(!Ufe(s,A,y,w))throw new U_(D_.INVALID_PARAMS,"Invalid ".concat(p||"string param",": Length of the string: [").concat(A,",").concat(y,"].").concat(w?" ASCII characters only.":""))}function OR(s,p){if(!Array.isArray(s))throw new U_(D_.INVALID_PARAMS,"".concat(p," should be an array"))}function xK(s){if("string"!=typeof s||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(s))throw h_.error("Invalid Channel Name ".concat(s)),new U_(D_.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function tZ(s){if(!("number"==typeof(p=s)&&Math.floor(p)===p&&0<=p&&p<=4294967295||Ufe(s,1,255)))throw h_.error("Invalid UID ".concat(s," ").concat(typeof s)),new U_(D_.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var p;"string"==typeof s&&h_.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function lT(s){return null==s}function Ufe(s){return"string"==typeof s&&s.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&s.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||R_e(s))}function Ffe(s){return"number"==typeof s&&s%1==0}function R_e(s){if("string"!=typeof s)return!1;for(let p=0;p<s.length;p+=1){const A=s.charCodeAt(p);if(A<0||A>255)return!1}return!0}let jfe,W1,DR;(function(s){s.FREE="free",s.UPLOADING="uploading"})(jfe||(jfe={})),function(s){s[s.MISC=0]="MISC",s[s.INTERNAL_EVENT=1]="INTERNAL_EVENT",s[s.PUBLIC_EVENT=2]="PUBLIC_EVENT",s[s.WEB_EVENT=3]="WEB_EVENT",s[s.INTERNAL_API=4]="INTERNAL_API",s[s.WEB_API=5]="WEB_API",s[s.PUBLIC_API=6]="PUBLIC_API"}(W1||(W1={})),function(s){s.NONE="none",s.INIT="init",s.CANPLAY="canplay",s.PLAYING="playing",s.PAUSED="paused",s.SUSPEND="suspend",s.STALLED="stalled",s.WAITING="waiting",s.ERROR="error",s.DESTROYED="destroyed",s.ABORT="abort",s.ENDED="ended",s.EMPTIED="emptied",s.LOADEDDATA="loadeddata"}(DR||(DR={}));const tce={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function nce(s){return rT(s.reportId,"params.reportId",0,100,!1),rT(s.category,"params.category",0,100,!1),rT(s.event,"params.event",0,100,!1),rT(s.label,"params.label",0,100,!1),$1(s.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const Vfe={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let rO,pT,Mne,bI,AI,H7,UL,q7,LK,J2,XS,OI,rce,YT,u1,vN,VT,n1,r1,yN,D1,ice,kT;function oce(s){return $1(s.timeout,"config.timeout",0,1e5),$1(s.timeoutFactor,"config.timeoutFactor",0,100,!1),$1(s.maxRetryCount,"config.maxRetryConfig",0,1/0),$1(s.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function nZ(s){return dR(s.codec,"config.codec",["vp8","vp9","av1","h264"]),dR(s.mode,"config.mode",["rtc","live"]),void 0!==s.audioCodec&&dR(s.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==s.proxyServer&&rT(s.proxyServer,"config.proxyServer",1,1e4),void 0!==s.turnServer&&sce(s.turnServer),void 0!==s.httpRetryConfig&&oce(s.httpRetryConfig),void 0!==s.websocketRetryConfig&&oce(s.websocketRetryConfig),!0}function MK(s){if(!Array.isArray(s)||s.length<1)return!1;try{s.forEach(p=>{if(!p.urls)throw Error()})}catch(p){return!1}return!0}function sce(s){return rT(s.turnServerURL,"turnServerURL"),rT(s.username,"username"),rT(s.password,"password"),s.udpport&&$1(s.udpport,"udpport",1,99999,!0),s.forceturn&&PK(s.forceturn,"forceturn"),s.security&&PK(s.security,"security"),s.tcpport&&$1(s.tcpport,"tcpport",1,99999,!0),!0}function Bne(s){return void 0!==s.level&&dR(s.level,"level",[1,2,3]),!0}(function(s){s.PUBLISH="publish",s.SUBSCRIBE="subscribe",s.WS_COMPRESSOR_INIT="ws_compressor_init",s.SESSION_INIT="session_init",s.JOIN_CHOOSE_SERVER="join_choose_server",s.REQ_USER_ACCOUNT="req_user_account",s.JOIN_GATEWAY="join_gateway",s.REJOIN_GATEWAY="rejoin_gateway",s.STREAM_SWITCH="stream_switch",s.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",s.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",s.FIRST_VIDEO_RECEIVED="first_video_received",s.FIRST_AUDIO_RECEIVED="first_audio_received",s.FIRST_VIDEO_DECODE="first_video_decode",s.FIRST_AUDIO_DECODE="first_audio_decode",s.ON_ADD_AUDIO_STREAM="on_add_audio_stream",s.ON_ADD_VIDEO_STREAM="on_add_video_stream",s.ON_UPDATE_STREAM="on_update_stream",s.ON_REMOVE_STREAM="on_remove_stream",s.USER_ANALYTICS="req_user_analytics"})(rO||(rO={})),function(s){s.SESSION="io.agora.pb.Wrtc.Session",s.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",s.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",s.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",s.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",s.PUBLISH="io.agora.pb.Wrtc.Publish",s.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",s.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",s.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",s.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",s.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",s.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",s.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",s.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",s.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",s.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",s.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",s.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",s.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",s.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",s.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",s.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",s.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",s.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",s.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",s.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",s.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",s.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",s.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",s.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(pT||(pT={})),function(s){s[s.WORKER_EVENT=156]="WORKER_EVENT",s[s.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Mne||(Mne={})),function(s){s.CREATE_CLIENT="createClient",s.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",s.SET_AREA="setArea",s.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",s.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",s.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",s.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",s.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",s.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",s.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",s.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",s.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",s.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",s.START_PROXY_SERVER="Client.startProxyServer",s.STOP_PROXY_SERVER="Client.stopProxyServer",s.SET_PROXY_SERVER="Client.setProxyServer",s.SET_TURN_SERVER="Client.setTurnServer",s.SET_CLIENT_ROLE="Client.setClientRole",s.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",s.ENABLE_DUAL_STREAM="Client.enableDualStream",s.DISABLE_DUAL_STREAM="Client.disableDualStream",s.JOIN="Client.join",s.LEAVE="Client.leave",s.PUBLISH="Client.publish",s.UNPUBLISH="Client.unpublish",s.SUBSCRIBE="Client.subscribe",s.MASS_SUBSCRIBE="Client.massSubscribe",s.MASS_UNSUBSCRIBE="Client.massUnsubscribe",s.UNSUBSCRIBE="Client.unsubscribe",s.RENEW_TOKEN="Client.renewToken",s.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",s.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",s.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",s.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",s.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",s.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",s.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",s.START_LIVE_STREAMING="Client.startLiveStreaming",s.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",s.STOP_LIVE_STREAMING="Client.stopLiveStreaming",s.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",s.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",s.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",s.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",s.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",s.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",s.SET_CONFIG_DISTRIBUTE="_configDistribute",s.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",s.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",s.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",s.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",s.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",s.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",s.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",s.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",s.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",s.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",s.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",s.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",s.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",s.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",s.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",s.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",s.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",s.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",s.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",s.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",s.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",s.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",s.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",s.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",s.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",s.STREAM_TYPE_CHANGE="streamTypeChange",s.CONNECTION_STATE_CHANGE="connectionStateChange",s.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(bI||(bI={})),function(s){s.TRACER="tracer"}(AI||(AI={})),function(s){s.IDLE="IDLE",s.INITING="INITING",s.INITEND="INITEND"}(H7||(H7={})),function(s){s.STATE_CHANGE="state_change",s.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",s.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",s.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(UL||(UL={})),function(s){s[s.ACCESS_POINT=101]="ACCESS_POINT",s[s.UNILBS=201]="UNILBS",s[s.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(q7||(q7={})),function(s){s[s.IIIEGAL_APPID=1]="IIIEGAL_APPID",s[s.IIIEGAL_UID=2]="IIIEGAL_UID",s[s.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(LK||(LK={})),function(s){s[s.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",s[s.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",s[s.INTERNAL_ERROR=8]="INTERNAL_ERROR",s[s.NO_AUTHORIZED=9]="NO_AUTHORIZED",s[s.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",s[s.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",s[s.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",s[s.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",s[s.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",s[s.USER_OVERLOAD=16]="USER_OVERLOAD",s[s.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",s[s.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(J2||(J2={})),function(s){s[s.NO_FLAG_SET=100]="NO_FLAG_SET",s[s.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",s[s.INVALID_FALG_SET=102]="INVALID_FALG_SET",s[s.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",s[s.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",s[s.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",s[s.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",s[s.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",s[s.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",s[s.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",s[s.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",s[s.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",s[s.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",s[s.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",s[s.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",s[s.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",s[s.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",s[s.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",s[s.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(XS||(XS={})),function(s){s[s.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",s[s.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",s[s.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",s[s.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",s[s.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",s[s.K_TICKET_INVALID=7]="K_TICKET_INVALID",s[s.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",s[s.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",s[s.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",s[s.K_UID_BANNED=14]="K_UID_BANNED",s[s.K_IP_BANNED=15]="K_IP_BANNED",s[s.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",s[s.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",s[s.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",s[s.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",s[s.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",s[s.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",s[s.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",s[s.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",s[s.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",s[s.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",s[s.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",s[s.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",s[s.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",s[s.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",s[s.ERR_INVALID_UID=117]="ERR_INVALID_UID",s[s.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",s[s.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",s[s.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",s[s.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",s[s.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",s[s.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",s[s.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",s[s.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",s[s.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",s[s.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",s[s.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",s[s.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",s[s.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",s[s.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",s[s.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",s[s.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",s[s.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",s[s.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",s[s.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",s[s.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",s[s.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",s[s.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",s[s.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",s[s.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",s[s.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",s[s.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",s[s.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",s[s.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",s[s.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",s[s.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",s[s.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(OI||(OI={})),function(s){s[s.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",s[s.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",s[s.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(rce||(rce={})),function(s){s.LEAVE="LEAVE",s.NETWORK_ERROR="NETWORK_ERROR",s.SERVER_ERROR="SERVER_ERROR",s.UID_BANNED="UID_BANNED",s.IP_BANNED="IP_BANNED",s.CHANNEL_BANNED="CHANNEL_BANNED",s.FALLBACK="FALLBACK"}(YT||(YT={})),function(s){s.CONNECTION_STATE_CHANGE="connection-state-change",s.MEDIA_RECONNECT_START="media-reconnect-start",s.MEDIA_RECONNECT_END="media-reconnect-end",s.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",s.USER_JOINED="user-joined",s.USER_LEAVED="user-left",s.USER_PUBLISHED="user-published",s.USER_UNPUBLISHED="user-unpublished",s.USER_INFO_UPDATED="user-info-updated",s.CLIENT_BANNED="client-banned",s.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",s.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",s.VOLUME_INDICATOR="volume-indicator",s.CRYPT_ERROR="crypt-error",s.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",s.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",s.NETWORK_QUALITY="network-quality",s.STREAM_TYPE_CHANGED="stream-type-changed",s.STREAM_FALLBACK="stream-fallback",s.RECEIVE_METADATA="receive-metadata",s.STREAM_MESSAGE="stream-message",s.LIVE_STREAMING_ERROR="live-streaming-error",s.LIVE_STREAMING_WARNING="live-streaming-warning",s.INJECT_STREAM_STATUS="stream-inject-status",s.EXCEPTION="exception",s.ERROR="error",s.P2P_LOST="p2p_lost",s.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",s.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",s.PUBLISHED_USER_LIST="published-user-list"}(u1||(u1={})),function(s){s.NETWORK_ERROR="NETWORK_ERROR",s.SERVER_ERROR="SERVER_ERROR",s.MULTI_IP="MULTI_IP",s.TIMEOUT="TIMEOUT",s.OFFLINE="OFFLINE",s.LEAVE="LEAVE",s.P2P_FAILED="P2P_FAILED",s.FALLBACK="FALLBACK"}(vN||(vN={})),function(s){s.CONNECTING="connecting",s.CONNECTED="connected",s.RECONNECTING="reconnecting",s.CLOSED="closed"}(VT||(VT={})),function(s){s.WS_CONNECTED="ws_connected",s.WS_RECONNECTING="ws_reconnecting",s.WS_CLOSED="ws_closed",s.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",s.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",s.ON_BINARY_DATA="on_binary_data",s.REQUEST_RECOVER="request_recover",s.REQUEST_JOIN_INFO="request_join_info",s.REQUEST_REJOIN_INFO="req_rejoin_info",s.IS_P2P_DISCONNECTED="is_p2p_dis",s.DISCONNECT_P2P="dis_p2p",s.ABORT_P2P_EXECUTION="abort_p2p_execution",s.NEED_RENEW_SESSION="need-sid",s.REPORT_JOIN_GATEWAY="report_join_gateway",s.REQUEST_TIMEOUT="request_timeout",s.REQUEST_SUCCESS="request_success",s.JOIN_RESPONSE="join_response"}(n1||(n1={})),function(s){s.PING="ping",s.PING_BACK="ping_back",s.JOIN="join_v3",s.REJOIN="rejoin_v3",s.LEAVE="leave",s.SET_CLIENT_ROLE="set_client_role",s.PUBLISH="publish",s.UNPUBLISH="unpublish",s.SUBSCRIBE="subscribe",s.SUBSCRIBE_STREAMS="subscribe_streams",s.UNSUBSCRIBE="unsubscribe",s.UNSUBSCRIBE_STREAMS="unsubscribe_streams",s.SUBSCRIBE_CHANGE="subscribe_change",s.TRAFFIC_STATS="traffic_stats",s.RENEW_TOKEN="renew_token",s.SWITCH_VIDEO_STREAM="switch_video_stream",s.DEFAULT_VIDEO_STREAM="default_video_stream",s.SET_FALLBACK_OPTION="set_fallback_option",s.GATEWAY_INFO="gateway_info",s.CONTROL="control",s.SEND_METADATA="send_metadata",s.DATA_STREAM="data_stream",s.PICK_SVC_LAYER="pick_svc_layer",s.RESTART_ICE="restart_ice",s.CONNECT_PC="connect_pc",s.SET_VIDEO_PROFILE="set_video_profile"}(r1||(r1={})),function(s){s.PUBLISH_STATS="publish_stats",s.PUBLISH_RELATED_STATS="publish_related_stats",s.SUBSCRIBE_STATS="subscribe_stats",s.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",s.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",s.DENOISER_STATS="denoiser_stats",s.TRANSPORT_STATS="transport_stats"}(yN||(yN={})),function(s){s.ON_USER_ONLINE="on_user_online",s.ON_USER_OFFLINE="on_user_offline",s.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",s.ON_PUBLISH_STREAM="on_publish_stream",s.ON_UPLINK_STATS="on_uplink_stats",s.ON_P2P_LOST="on_p2p_lost",s.ON_REMOVE_STREAM="on_remove_stream",s.ON_ADD_AUDIO_STREAM="on_add_audio_stream",s.ON_ADD_VIDEO_STREAM="on_add_video_stream",s.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",s.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",s.ON_USER_BANNED="on_user_banned",s.ON_NOTIFICATION="on_notification",s.ON_CRYPT_ERROR="on_crypt_error",s.MUTE_AUDIO="mute_audio",s.MUTE_VIDEO="mute_video",s.UNMUTE_AUDIO="unmute_audio",s.UNMUTE_VIDEO="unmute_video",s.ON_P2P_OK="on_p2p_ok",s.RECEIVE_METADATA="receive_metadata",s.ON_DATA_STREAM="on_data_stream",s.ENABLE_LOCAL_VIDEO="enable_local_video",s.DISABLE_LOCAL_VIDEO="disable_local_video",s.ENABLE_LOCAL_AUDIO="enable_local_audio",s.DISABLE_LOCAL_AUDIO="disable_local_audio",s.ON_PUBLISHED_USER_LIST="on_published_user_list"}(D1||(D1={})),function(s){s.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",s.NEED_ANSWER="NEED_ANSWER",s.NEED_RENEGOTIATE="NEED_RENEGOTIATE",s.P2P_LOST="P2P_LOST",s.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",s.NEED_UNPUB="NEED_UNPUB",s.NEED_UNSUB="NEED_UNSUB",s.NEED_UPLOAD="NEED_UPLOAD",s.NEED_CONTROL="NEED_CONTROL",s.START_RECONNECT="START_RECONNECT",s.END_RECONNECT="END_RECONNECT",s.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(ice||(ice={})),function(s){s.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",s.RECEIVE_TRACK_BUFFER="receive_track_buffer",s.ON_AUDIO_BUFFER="on_audio_buffer",s.UPDATE_SOURCE="update_source"}(kT||(kT={}));const Une={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},Fne={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},BK={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},ace={uplinkNetworkQuality:0,downlinkNetworkQuality:0},jne={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let v1,PT,SM;(function(s){s.CONNECTED="websocket:connected",s.RECONNECTING="websocket:reconnecting",s.WILL_RECONNECT="websocket:will_reconnect",s.CLOSED="websocket:closed",s.FAILED="websocket:failed",s.ON_MESSAGE="websocket:on_message",s.REQUEST_NEW_URLS="websocket:request_new_urls",s.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",s.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(v1||(v1={})),function(s){s.TRANSCODE="mix_streaming",s.RAW="raw_streaming",s.INJECT="inject_streaming"}(PT||(PT={})),function(s){s[s.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",s[s.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",s[s.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",s[s.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",s[s.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",s[s.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",s[s.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",s[s.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",s[s.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",s[s.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",s[s.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(SM||(SM={}));const Gfe={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},cce={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function rZ(s,p){rT(s.url,"".concat(p,".url"),1,1e3,!1),lT(s.x)||$1(s.x,"".concat(p,".x"),0,1e4),lT(s.y)||$1(s.y,"".concat(p,".y"),0,1e4),lT(s.width)||$1(s.width,"".concat(p,".width"),0,1e4),lT(s.height)||$1(s.height,"".concat(p,".height"),0,1e4),lT(s.zOrder)||$1(s.zOrder,"".concat(p,".zOrder"),0,255),lT(s.alpha)||$1(s.alpha,"".concat(p,".alpha"),0,1,!1)}const Vne={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},uce={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let FL,W7,CT,Qfe,hR,RM,iO,OM,gT,JT,GT,wI,FS,iZ,A6,_6,UK,a1;function R4(s){if(!s.channelName)throw new U_(D_.INVALID_PARAMS,"invalid channelName in info");if(!s.uid||"number"!=typeof s.uid)throw new U_(D_.INVALID_PARAMS,"invalid uid in info, uid must be a number");return s.token&&rT(s.token,"info.token",1,2047),tZ(s.uid),xK(s.channelName),!0}function oZ(s){return dR(s,"mediaSource",["screen","window","application"]),!0}(function(s){s.WARNING="@live_uap-warning",s.ERROR="@line_uap-error",s.PUBLISH_STREAM_STATUS="@live_uap-publish-status",s.INJECT_STREAM_STATUS="@live_uap-inject-status",s.WORKER_STATUS="@live_uap-worker-status",s.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(FL||(FL={})),function(s){s.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(W7||(W7={})),function(s){s[s.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",s[s.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",s[s.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",s[s.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",s[s.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",s[s.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",s[s.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",s[s.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",s[s.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",s[s.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",s[s.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",s[s.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",s[s.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",s[s.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",s[s.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",s[s.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",s[s.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",s[s.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",s[s.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",s[s.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",s[s.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(CT||(CT={})),function(s){s.CONNECT_FAILED="connect failed",s.CONNECT_TIMEOUT="connect timeout",s.WS_DISCONNECTED="websocket disconnected",s.REQUEST_TIMEOUT="request timeout",s.REQUEST_FAILED="request failed",s.WAIT_STATUS_TIMEOUT="wait status timeout",s.WAIT_STATUS_ERROR="wait status error",s.BAD_STATE="bad state",s.WS_ABORT="ws abort",s.AP_REQUEST_TIMEOUT="AP request timeout",s.AP_JSON_PARSE_ERROR="AP json parse error",s.AP_REQUEST_ERROR="AP request error",s.AP_REQUEST_ABORT="AP request abort"}(Qfe||(Qfe={})),function(s){s[s.SetSdkProfile=0]="SetSdkProfile",s[s.SetSourceChannel=1]="SetSourceChannel",s[s.SetSourceUserId=2]="SetSourceUserId",s[s.SetDestChannel=3]="SetDestChannel",s[s.StartPacketTransfer=4]="StartPacketTransfer",s[s.StopPacketTransfer=5]="StopPacketTransfer",s[s.UpdateDestChannel=6]="UpdateDestChannel",s[s.Reconnect=7]="Reconnect",s[s.SetVideoProfile=8]="SetVideoProfile"}(hR||(hR={})),function(s){s.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",s.NETWORK_CONNECTED="NETWORK_CONNECTED",s.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",s.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",s.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",s.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",s.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",s.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",s.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",s.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(RM||(RM={})),function(s){s.RELAY_STATE_IDLE="RELAY_STATE_IDLE",s.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",s.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",s.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(iO||(iO={})),function(s){s.RELAY_OK="RELAY_OK",s.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",s.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",s.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(OM||(OM={})),function(s){s.High="high",s.Low="low",s.Audio="audio",s.Screen="screen",s.ScreenLow="screen_low"}(gT||(gT={})),function(s){s.DISCONNECT="disconnect",s.CONNECTION_STATE_CHANGE="connection-state-change",s.NETWORK_QUALITY="network-quality",s.STREAM_TYPE_CHANGE="stream-type-change",s.IS_P2P_DISCONNECTED="is-p2p-dis",s.DISCONNECT_P2P="dis-p2p",s.REQUEST_NEW_GATEWAY_LIST="req-gate-url",s.NEED_RENEW_SESSION="need-sid",s.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",s.JOIN_RESPONSE="join-response"}(JT||(JT={})),function(s){s[s.Nothing=0]="Nothing",s[s.Audio=1]="Audio",s[s.LwoVideo=2]="LwoVideo",s[s.Video=4]="Video",s[s.Data=8]="Data"}(GT||(GT={})),function(s){s.NEED_RENEGOTIATE="@need_renegotiate",s.NEED_REPLACE_TRACK="@need_replace_track",s.NEED_CLOSE="@need_close",s.NEED_ENABLE_TRACK="@need_enable_track",s.NEED_DISABLE_TRACK="@need_disable_track",s.NEED_SESSION_ID="@need_sid",s.SET_OPTIMIZATION_MODE="@set_optimization_mode",s.GET_STATS="@get_stats",s.GET_LOW_VIDEO_TRACK="@get_low_video_track",s.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",s.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",s.NEED_MUTE_TRACK="@need_mute_track",s.NEED_UNMUTE_TRACK="@need_unmute_track"}(wI||(wI={})),function(s){s.SCREEN_TRACK="screen_track",s.LOW_STREAM="low_stream"}(FS||(FS={})),function(s){s[s.HIGH_STREAM=0]="HIGH_STREAM",s[s.LOW_STREAM=1]="LOW_STREAM"}(iZ||(iZ={})),function(s){s[s.DISABLE=0]="DISABLE",s[s.LOW_STREAM=1]="LOW_STREAM",s[s.AUDIO_ONLY=2]="AUDIO_ONLY"}(A6||(A6={})),function(s){s.SOURCE_STATE_CHANGE="source-state-change",s.TRACK_ENDED="track-ended",s.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",s.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",s.CLOSED="closed"}(_6||(_6={})),function(s){s.FIRST_FRAME_DECODED="first-frame-decoded",s.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(UK||(UK={})),function(s){s.CHINA="CHINA",s.ASIA="ASIA",s.NORTH_AMERICA="NORTH_AMERICA",s.EUROPE="EUROPE",s.JAPAN="JAPAN",s.INDIA="INDIA",s.KOREA="KOREA",s.HKMC="HKMC",s.US="US",s.OCEANIA="OCEANIA",s.SOUTH_AMERICA="SOUTH_AMERICA",s.AFRICA="AFRICA",s.OVERSEA="OVERSEA",s.GLOBAL="GLOBAL"}(a1||(a1={}));const Gne=[a1.AFRICA,a1.ASIA,a1.CHINA,a1.EUROPE,a1.GLOBAL,a1.INDIA,a1.JAPAN,a1.NORTH_AMERICA,a1.OCEANIA,a1.OVERSEA,a1.SOUTH_AMERICA];let fS;!function(s){s.CHINA="CN",s.ASIA="AS",s.NORTH_AMERICA="NA",s.EUROPE="EU",s.JAPAN="JP",s.INDIA="IN",s.KOREA="KR",s.HKMC="HK",s.US="US",s.OCEANIA="OC",s.SOUTH_AMERICA="SA",s.AFRICA="AF",s.OVERSEA="OVERSEA",s.GLOBAL="GLOBAL"}(fS||(fS={}));const Qne={CHINA:{},ASIA:{CODE:fS.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:fS.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:fS.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:fS.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:fS.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:fS.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:fS.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:fS.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:fS.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:fS.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:fS.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:fS.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:fS.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let QT,sZ,o1,eI,HO,h1,$2,U8;F7&&(Qne.CHINA={CODE:fS.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(s){s.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(QT||(QT={}));class Hfe extends hS{constructor(p,A){super(),a_(this,"onICEConnectionStateChange",void 0),a_(this,"onConnectionStateChange",void 0),a_(this,"onDTLSTransportStateChange",void 0),a_(this,"onDTLSTransportError",void 0),a_(this,"onICETransportStateChange",void 0),a_(this,"onFirstAudioReceived",void 0),a_(this,"onFirstVideoReceived",void 0),a_(this,"onFirstAudioDecoded",void 0),a_(this,"onFirstVideoDecoded",void 0),a_(this,"onSelectedLocalCandidateChanged",void 0),a_(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(s){s.SEND="sendonly",s.RECV="recvonly",s.SENDRECV="sendrecv",s.INACTIVE="inactive"})(sZ||(sZ={})),function(s){s.VIDEO="video",s.AUDIO="audio"}(o1||(o1={})),function(s){s.LocalVideoTrack="videoTrack",s.LocalAudioTrack="audioTrack",s.LocalVideoLowTrack="videoLowTrack"}(eI||(eI={})),function(s){s.New="new",s.Connected="connected",s.Reconnecting="reconnecting",s.Disconnected="disconnected"}(HO||(HO={})),function(s){s.StateChange="stateChange",s.IceConnectionStateChange="iceConnectionStateChange",s.RequestMuteLocal="requestMuteLocal",s.RequestUnmuteLocal="requestUnmuteLocal",s.RequestRePublish="requestRePublish",s.RequestReSubscribe="requestReSubscribe",s.RequestUploadStats="requestUploadStats",s.MediaReconnectStart="MediaReconnectStart",s.MediaReconnectEnd="MediaReconnectEnd",s.NeedSignalRTT="NeedSignalRTT",s.RequestRestartICE="RequestRestartIce",s.PeerConnectionStateChange="PeerConnectionStateChange",s.RequestReconnect="RequestReconnect",s.RequestReconnectPC="RequestReconnectPC",s.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",s.P2PLost="P2PLost",s.UpdateVideoEncoder="UpdateVideoEncoder",s.ConnectionTypeChange="ConnectionTypeChange"}(h1||(h1={})),function(s){s.ONLINE="ONLINE",s.OFFLINE="OFFLINE"}($2||($2={})),function(s){s.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",s.ONLINE="ONLINE",s.OFFLINE="OFFLINE"}(U8||(U8={}));const O_e={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let ZP,XN;(function(s){s.ON_TRACK="on_track",s.ON_NODE="on_node"})(ZP||(ZP={})),function(s){s.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",s.REQUEST_CONSTRAINTS="request_constraints"}(XN||(XN={}));const NR={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function jS(){return NR}var lce="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,qfe=MN,Wfe=g2,FK=_r.RangeError,Kfe=function(s){if(void 0===s)return 0;var p=qfe(s),A=Wfe(p);if(p!==A)throw FK("Wrong length or index");return A},D_e=_r.Array,zfe=Math.abs,v6=Math.pow,Yfe=Math.floor,Jfe=Math.log,dce=Math.LN2,$fe=SN,fce=kO,pce=OS,N_e=DN,k_e=bT,P_e=Q_,aZ=kO,cZ=OS,Hne=function(s,p,A){var y=N_e(p);y in s?k_e.f(s,y,P_e(0,A)):s[y]=A},gce=_r.Array,Zfe=Math.max,jK=function(s,p,A){for(var y=cZ(s),w=aZ(p,y),$=aZ(void 0===A?y:A,y),j=gce(Zfe($-w,0)),_e=0;w<$;w++,_e++)Hne(j,_e,s[w]);return j.length=_e,j},mce=H_,fR=_l,Xfe=lce,tpe=RS,npe=UT,Ace=_a,uZ=UN,rpe=MN,ipe=g2,K7=Kfe,_ce_pack=function(s,p,A){var y,w,$,j=D_e(A),_e=8*A-p-1,K=(1<<_e)-1,_i=K>>1,_o=23===p?v6(2,-24)-v6(2,-77):0,_u=s<0||0===s&&1/s<0?1:0,ch=0;for((s=zfe(s))!=s||s===1/0?(w=s!=s?1:0,y=K):(y=Yfe(Jfe(s)/dce),s*($=v6(2,-y))<1&&(y--,$*=2),(s+=y+_i>=1?_o/$:_o*v6(2,1-_i))*$>=2&&(y++,$/=2),y+_i>=K?(w=0,y=K):y+_i>=1?(w=(s*$-1)*v6(2,p),y+=_i):(w=s*v6(2,_i-1)*v6(2,p),y=0));p>=8;)j[ch++]=255&w,w/=256,p-=8;for(y=y<<p|w,_e+=p;_e>0;)j[ch++]=255&y,y/=256,_e-=8;return j[--ch]|=128*_u,j},_ce_unpack=function(s,p){var A,y=s.length,w=8*y-p-1,$=(1<<w)-1,j=$>>1,_e=w-7,K=y-1,_i=s[K--],_o=127&_i;for(_i>>=7;_e>0;)_o=256*_o+s[K--],_e-=8;for(A=_o&(1<<-_e)-1,_o>>=-_e,_e+=p;_e>0;)A=256*A+s[K--],_e-=8;if(0===_o)_o=1-j;else{if(_o===$)return A?NaN:_i?-1/0:1/0;A+=v6(2,p),_o-=j}return(_i?-1:1)*A*v6(2,_o-p)},y6=EQ,vce=RI,x_e=tN.f,yce=bT.f,ope=jK,qne=fL,Wne=lL.PROPER,Ece=lL.CONFIGURABLE,j8=MT.get,dZ=MT.set,Ice="ArrayBuffer",VK="Wrong index",DM=_r.ArrayBuffer,NM=DM,V8=NM&&NM.prototype,HU=_r.DataView,G8=HU&&HU.prototype,hZ=Object.prototype,ape=_r.Array,fZ=_r.RangeError,z7=mce(function(s){for(var p=$fe(this),A=pce(p),y=arguments.length,w=fce(y>1?arguments[1]:void 0,A),$=y>2?arguments[2]:void 0,j=void 0===$?A:fce($,A);j>w;)p[w++]=s;return p}),cpe=mce([].reverse),bce=_ce_pack,Cce=_ce_unpack,wce=function(s){return[255&s]},pZ=function(s){return[255&s,s>>8&255]},XP=function(s){return[255&s,s>>8&255,s>>16&255,s>>24&255]},Tce=function(s){return s[3]<<24|s[2]<<16|s[1]<<8|s[0]},upe=function(s){return bce(s,23,4)},GK=function(s){return bce(s,52,8)},Kne=function(s,p){yce(s.prototype,p,{get:function(){return j8(this)[p]}})},Q8=function(s,p,A,y){var w=K7(A),$=j8(s);if(w+p>$.byteLength)throw fZ(VK);var j=j8($.buffer).bytes,_e=w+$.byteOffset,K=ope(j,_e,_e+p);return y?K:cpe(K)},O4=function(s,p,A,y,w,$){var j=K7(A),_e=j8(s);if(j+p>_e.byteLength)throw fZ(VK);for(var K=j8(_e.buffer).bytes,_i=j+_e.byteOffset,_o=y(+w),_u=0;_u<p;_u++)K[_i+_u]=_o[$?_u:p-_u-1]};if(Xfe){var lpe=Wne&&DM.name!==Ice;if(Ace(function(){DM(1)})&&Ace(function(){new DM(-1)})&&!Ace(function(){return new DM,new DM(1.5),new DM(NaN),lpe&&!Ece}))lpe&&Ece&&tpe(DM,"name",Ice);else{(NM=function(s){return uZ(this,V8),new DM(K7(s))}).prototype=V8;for(var Sce,Rce=x_e(DM),dpe=0;Rce.length>dpe;)(Sce=Rce[dpe++])in NM||tpe(NM,Sce,DM[Sce]);V8.constructor=NM}vce&&y6(G8)!==hZ&&vce(G8,hZ);var Y7=new HU(new NM(2)),hpe=mce(G8.setInt8);Y7.setInt8(0,2147483648),Y7.setInt8(1,2147483649),!Y7.getInt8(0)&&Y7.getInt8(1)||npe(G8,{setInt8:function(s,p){hpe(this,s,p<<24>>24)},setUint8:function(s,p){hpe(this,s,p<<24>>24)}},{unsafe:!0})}else V8=(NM=function(s){uZ(this,V8);var p=K7(s);dZ(this,{bytes:z7(ape(p),0),byteLength:p}),fR||(this.byteLength=p)}).prototype,G8=(HU=function(s,p,A){uZ(this,G8),uZ(s,V8);var y=j8(s).byteLength,w=rpe(p);if(w<0||w>y)throw fZ("Wrong offset");if(w+(A=void 0===A?y-w:ipe(A))>y)throw fZ("Wrong length");dZ(this,{buffer:s,byteLength:A,byteOffset:w}),fR||(this.buffer=s,this.byteLength=A,this.byteOffset=w)}).prototype,fR&&(Kne(NM,"byteLength"),Kne(HU,"buffer"),Kne(HU,"byteLength"),Kne(HU,"byteOffset")),npe(G8,{getInt8:function(s){return Q8(this,1,s)[0]<<24>>24},getUint8:function(s){return Q8(this,1,s)[0]},getInt16:function(s){var p=Q8(this,2,s,arguments.length>1?arguments[1]:void 0);return(p[1]<<8|p[0])<<16>>16},getUint16:function(s){var p=Q8(this,2,s,arguments.length>1?arguments[1]:void 0);return p[1]<<8|p[0]},getInt32:function(s){return Tce(Q8(this,4,s,arguments.length>1?arguments[1]:void 0))},getUint32:function(s){return Tce(Q8(this,4,s,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(s){return Cce(Q8(this,4,s,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(s){return Cce(Q8(this,8,s,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(s,p){O4(this,1,s,wce,p)},setUint8:function(s,p){O4(this,1,s,wce,p)},setInt16:function(s,p){O4(this,2,s,pZ,p,arguments.length>2?arguments[2]:void 0)},setUint16:function(s,p){O4(this,2,s,pZ,p,arguments.length>2?arguments[2]:void 0)},setInt32:function(s,p){O4(this,4,s,XP,p,arguments.length>2?arguments[2]:void 0)},setUint32:function(s,p){O4(this,4,s,XP,p,arguments.length>2?arguments[2]:void 0)},setFloat32:function(s,p){O4(this,4,s,upe,p,arguments.length>2?arguments[2]:void 0)},setFloat64:function(s,p){O4(this,8,s,GK,p,arguments.length>2?arguments[2]:void 0)}});qne(NM,Ice),qne(HU,"DataView");var gZ={ArrayBuffer:NM,DataView:HU},EN=mI,H8=H_,q8=_a,zne=SS,fpe=kO,rI=g2,oO=_C,J7=gZ.ArrayBuffer,mZ=gZ.DataView,kI=mZ.prototype,f1=H8(J7.prototype.slice),L_e=H8(kI.getUint8),EI=H8(kI.setUint8);EN({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:q8(function(){return!new J7(2).slice(1,void 0).byteLength})},{slice:function(s,p){if(f1&&void 0===p)return f1(zne(this),s);for(var A=zne(this).byteLength,y=fpe(s,A),w=fpe(void 0===p?A:p,A),$=new(oO(this,J7))(rI(w-y)),j=new mZ(this),_e=new mZ($),K=0;y<w;)EI(_e,K++,L_e(j,y++));return $}});var C0,Q0,kR,qU={exports:{}},M_e=lce,Oce=_l,Z2=_r,ppe=FI,Dce=uT,W8=eT,Nce=cR,gEe=iR,X2=RS,kce=iS.exports,gpe=bT.f,N1=xT,K8=EQ,$7=RI,PR=E1,s1=l2,AZ=Z2.Int8Array,E6=AZ&&AZ.prototype,Pce=Z2.Uint8ClampedArray,QK=Pce&&Pce.prototype,T1=AZ&&K8(AZ),WU=E6&&K8(E6),CO=Object.prototype,z8=Z2.TypeError,mpe=PR("toStringTag"),xR=s1("TYPED_ARRAY_TAG"),xce=s1("TYPED_ARRAY_CONSTRUCTOR"),e2=M_e&&!!$7&&"Opera"!==Nce(Z2.opera),eR=!1,_k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},_Z={BigInt64Array:8,BigUint64Array:8},Lce=function(s){if(!Dce(s))return!1;var p=Nce(s);return W8(_k,p)||W8(_Z,p)};for(C0 in _k)(kR=(Q0=Z2[C0])&&Q0.prototype)?X2(kR,xce,Q0):e2=!1;for(C0 in _Z)(kR=(Q0=Z2[C0])&&Q0.prototype)&&X2(kR,xce,Q0);if((!e2||!ppe(T1)||T1===Function.prototype)&&(T1=function(){throw z8("Incorrect invocation")},e2))for(C0 in _k)Z2[C0]&&$7(Z2[C0],T1);if((!e2||!WU||WU===CO)&&(WU=T1.prototype,e2))for(C0 in _k)Z2[C0]&&$7(Z2[C0].prototype,WU);if(e2&&K8(QK)!==WU&&$7(QK,WU),Oce&&!W8(WU,mpe))for(C0 in eR=!0,gpe(WU,mpe,{get:function(){return Dce(this)?this[xR]:void 0}}),_k)Z2[C0]&&X2(Z2[C0],xR,C0);var KU={NATIVE_ARRAY_BUFFER_VIEWS:e2,TYPED_ARRAY_CONSTRUCTOR:xce,TYPED_ARRAY_TAG:eR&&xR,aTypedArray:function(s){if(Lce(s))return s;throw z8("Target is not a typed array")},aTypedArrayConstructor:function(s){if(ppe(s)&&(!$7||N1(T1,s)))return s;throw z8(gEe(s)+" is not a typed array constructor")},exportTypedArrayMethod:function(s,p,A,y){if(Oce){if(A)for(var w in _k){var $=Z2[w];if($&&W8($.prototype,s))try{delete $.prototype[s]}catch(j){try{$.prototype[s]=p}catch(_e){}}}WU[s]&&!A||kce(WU,s,A?p:e2&&E6[s]||p,y)}},exportTypedArrayStaticMethod:function(s,p,A){var y,w;if(Oce){if($7){if(A)for(y in _k)if((w=Z2[y])&&W8(w,s))try{delete w[s]}catch($){}if(T1[s]&&!A)return;try{return kce(T1,s,A?p:e2&&T1[s]||p)}catch($){}}for(y in _k)!(w=Z2[y])||w[s]&&!A||kce(w,s,p)}},isView:function(s){if(!Dce(s))return!1;var p=Nce(s);return"DataView"===p||W8(_k,p)||W8(_Z,p)},isTypedArray:Lce,TypedArray:T1,TypedArrayPrototype:WU},zU=_a,vZ=_L,_pe=_r.ArrayBuffer,uI=_r.Int8Array,Y8=!KU.NATIVE_ARRAY_BUFFER_VIEWS||!zU(function(){uI(1)})||!zU(function(){new uI(-1)})||!vZ(function(s){new uI,new uI(null),new uI(1.5),new uI(s)},!0)||zU(function(){return 1!==new uI(new _pe(2),1,void 0).length}),Yne=uT,Z7=Math.floor,D4=Number.isInteger||function(s){return!Yne(s)&&isFinite(s)&&Z7(s)===s},EZ=MN,J8=_r.RangeError,HK=_r.RangeError,Jne=function(s,p){var A=function(s){var p=EZ(s);if(p<0)throw J8("The argument can't be less than 0");return p}(s);if(A%p)throw HK("Wrong offset");return A},X7=FN,Mce=r_,IZ=yI,ype=SN,Epe=OS,$ne=X4,bZ=RT,Ipe=aS,B_e=KU.aTypedArrayConstructor,U_e=E_,bpe=_r,Bce=Array.isArray||function(s){return"Array"==U_e(s)},t2=W_,Cpe=uT,ES=E1("species"),CZ=bpe.Array,e9=FN,Zne=O0,wZ=SN,wpe=OS,F_e=function(s,p){return new(function(s){var p;return Bce(s)&&(t2(p=s.constructor)&&(p===CZ||Bce(p.prototype))||Cpe(p)&&null===(p=p[ES]))&&(p=void 0),void 0===p?CZ:p}(s))(0===p?0:p)},kM=H_([].push),I6=function(s){var p=1==s,A=2==s,y=3==s,w=4==s,$=6==s,j=7==s,_e=5==s||$;return function(K,_i,_o,_u){for(var ch,_f,o_=wZ(K),i_=Zne(o_),u_=e9(_i,_o),g_=wpe(i_),__=0,w_=_u||F_e,k_=p?w_(K,g_):A||j?w_(K,0):void 0;g_>__;__++)if((_e||__ in i_)&&(_f=u_(ch=i_[__],__,o_),s))if(p)k_[__]=_f;else if(_f)switch(s){case 3:return!0;case 5:return ch;case 6:return __;case 2:kM(k_,ch)}else switch(s){case 4:return!1;case 7:kM(k_,ch)}return $?-1:y||w?w:k_}},LR={forEach:I6(0),map:I6(1),filter:I6(2),some:I6(3),every:I6(4),find:I6(5),findIndex:I6(6),filterReject:I6(7)},TZ=mI,qO=_r,$T=r_,qK=Y8,$8=UN,j_e=Q_,N4=RS,Xne=D4,ere=g2,jce=Kfe,tre=Jne,WO=DN,SZ=eT,V_e=cR,Vce=uT,Spe=JI,G_e=Q3,Q_e=xT,nre=RI,H_e=tN.f,b6=function(s){var p,A,y,w,$,j,_e=IZ(this),K=ype(s),_i=arguments.length,_o=_i>1?arguments[1]:void 0,_u=void 0!==_o,ch=bZ(K);if(ch&&!Ipe(ch))for(j=($=$ne(K,ch)).next,K=[];!(w=Mce(j,$)).done;)K.push(w.value);for(_u&&_i>2&&(_o=X7(_o,arguments[2])),A=Epe(K),y=new(B_e(_e))(A),p=0;A>p;p++)y[p]=_u?_o(K[p],p):K[p];return y},WK=LR.forEach,q_e=mS,Gce=bT,C6=kV,rre=MT.get,KK=MT.set,Hce=Gce.f,qce=_s.f,Wce=Math.round,RZ=qO.RangeError,n9=gZ.ArrayBuffer,PM=n9.prototype,Rpe=gZ.DataView,Z8=KU.NATIVE_ARRAY_BUFFER_VIEWS,Ope=KU.TYPED_ARRAY_CONSTRUCTOR,ire=KU.TYPED_ARRAY_TAG,ore=KU.TypedArray,zK=KU.TypedArrayPrototype,Dpe=KU.aTypedArrayConstructor,Kce=KU.isTypedArray,OZ="BYTES_PER_ELEMENT",sre="Wrong length",zce=function(s,p){Dpe(s);for(var A=0,y=p.length,w=new s(y);y>A;)w[A]=p[A++];return w},r9=function(s,p){Hce(s,p,{get:function(){return rre(this)[p]}})},Npe=function(s){var p;return Q_e(PM,s)||"ArrayBuffer"==(p=V_e(s))||"SharedArrayBuffer"==p},kpe=function(s,p){return Kce(s)&&!Spe(p)&&p in s&&Xne(+p)&&p>=0},Yce=function(s,p){return p=WO(p),kpe(s,p)?j_e(2,s[p]):qce(s,p)},i9=function(s,p,A){return p=WO(p),!(kpe(s,p)&&Vce(A)&&SZ(A,"value"))||SZ(A,"get")||SZ(A,"set")||A.configurable||SZ(A,"writable")&&!A.writable||SZ(A,"enumerable")&&!A.enumerable?Hce(s,p,A):(s[p]=A.value,s)};_l?(Z8||(_s.f=Yce,Gce.f=i9,r9(zK,"buffer"),r9(zK,"byteOffset"),r9(zK,"byteLength"),r9(zK,"length")),TZ({target:"Object",stat:!0,forced:!Z8},{getOwnPropertyDescriptor:Yce,defineProperty:i9}),qU.exports=function(s,p,A){var y=s.match(/\d+$/)[0]/8,w=s+(A?"Clamped":"")+"Array",$="get"+s,j="set"+s,_e=qO[w],K=_e,_i=K&&K.prototype,_o={},_u=function(ch,_f){Hce(ch,_f,{get:function(){return i_=_f,(u_=rre(this)).view[$](i_*y+u_.byteOffset,!0);var i_,u_},set:function(o_){return u_=_f,g_=o_,__=rre(this),A&&(g_=(g_=Wce(g_))<0?0:g_>255?255:255&g_),void __.view[j](u_*y+__.byteOffset,g_,!0);var u_,g_,__},enumerable:!0})};Z8?qK&&(K=p(function(ch,_f,o_,i_){return $8(ch,_i),C6(Vce(_f)?Npe(_f)?void 0!==i_?new _e(_f,tre(o_,y),i_):void 0!==o_?new _e(_f,tre(o_,y)):new _e(_f):Kce(_f)?zce(K,_f):$T(b6,K,_f):new _e(jce(_f)),ch,K)}),nre&&nre(K,ore),WK(H_e(_e),function(ch){ch in K||N4(K,ch,_e[ch])}),K.prototype=_i):(K=p(function(ch,_f,o_,i_){$8(ch,_i);var u_,g_,__,w_=0,k_=0;if(Vce(_f)){if(!Npe(_f))return Kce(_f)?zce(K,_f):$T(b6,K,_f);u_=_f,k_=tre(o_,y);var Pv=_f.byteLength;if(void 0===i_){if(Pv%y||(g_=Pv-k_)<0)throw RZ(sre)}else if((g_=ere(i_)*y)+k_>Pv)throw RZ(sre);__=g_/y}else __=jce(_f),u_=new n9(g_=__*y);for(KK(ch,{buffer:u_,byteOffset:k_,byteLength:g_,length:__,view:new Rpe(u_)});w_<__;)_u(ch,w_++)}),nre&&nre(K,ore),_i=K.prototype=G_e(zK)),_i.constructor!==K&&N4(_i,"constructor",K),N4(_i,Ope,K),ire&&N4(_i,ire,w),_o[w]=K,TZ({global:!0,forced:K!=_e,sham:!Z8},_o),OZ in K||N4(K,OZ,y),OZ in _i||N4(_i,OZ,y),q_e(w)}):qU.exports=function(){},(0,qU.exports)("Uint8",function(s){return function(p,A,y){return s(this,p,A,y)}});var o9=OS,Ppe=MN,s9=KU.aTypedArray;(0,KU.exportTypedArrayMethod)("at",function(s){var p=s9(this),A=o9(p),y=Ppe(s),w=y>=0?y:A+y;return w<0||w>=A?void 0:p[w]});var a9=r_,are=KU,xpe=OS,DZ=Jne,W_e=SN,Lpe=_a,sO=_r.RangeError,YK=_r.Int8Array,NZ=YK&&YK.prototype,Mpe=NZ&&NZ.set,$ce=are.aTypedArray,K_e=are.exportTypedArrayMethod,cre=!Lpe(function(){var s=new Uint8ClampedArray(2);return a9(Mpe,s,{length:1,0:3},1),3!==s[1]}),Bpe=cre&&are.NATIVE_ARRAY_BUFFER_VIEWS&&Lpe(function(){var s=new YK(2);return s.set(1),s.set("2",1),0!==s[0]||2!==s[1]});K_e("set",function(s){$ce(this);var p=DZ(arguments.length>1?arguments[1]:void 0,1),A=W_e(s);if(cre)return a9(Mpe,this,A,p);var y=this.length,w=xpe(A),$=0;if(w+p>y)throw sO("Wrong length");for(;$<w;)this[p+$]=A[$++]},!cre||Bpe);var JK=jK,c9=Math.floor,ure=function(s,p){var A=s.length,y=c9(A/2);return A<8?Upe(s,p):Fpe(s,ure(JK(s,0,y),p),ure(JK(s,y),p),p)},Upe=function(s,p){for(var A,y,w=s.length,$=1;$<w;){for(y=$,A=s[$];y&&p(s[y-1],A)>0;)s[y]=s[--y];y!==$++&&(s[y]=A)}return s},Fpe=function(s,p,A,y){for(var w=p.length,$=A.length,j=0,_e=0;j<w||_e<$;)s[j+_e]=j<w&&_e<$?y(p[j],A[_e])<=0?p[j++]:A[_e++]:j<w?p[j++]:A[_e++];return s},kZ=ure,lre=XT.match(/firefox\/(\d+)/i),z_e=!!lre&&+lre[1],aO=/MSIE|Trident/.test(XT),iT=XT.match(/AppleWebKit\/(\d+)\./),Xce=_a,xM=tS,Y_e=kZ,$K=z_e,J_e=aO,Vpe=TT,yT=!!iT&&+iT[1],$_e=_r.Array,hre=KU.aTypedArray,PZ=KU.exportTypedArrayMethod,w6=_r.Uint16Array,T6=w6&&H_(w6.prototype.sort),Gpe=!(!T6||Xce(function(){T6(new w6(2),null)})&&Xce(function(){T6(new w6(2),{})})),eue=!!T6&&!Xce(function(){if(Vpe)return Vpe<74;if($K)return $K<67;if(J_e)return!0;if(yT)return yT<602;var s,p,A=new w6(516),y=$_e(516);for(s=0;s<516;s++)p=s%4,A[s]=515-s,y[s]=s-2*p+3;for(T6(A,function(w,$){return(w/4|0)-($/4|0)}),s=0;s<516;s++)if(A[s]!==y[s])return!0});PZ("sort",function(s){return void 0!==s&&xM(s),eue?T6(this,s):Y_e(hre(this),function(p){return function(A,y){return void 0!==p?+p(A,y)||0:y!=y?-1:A!=A?1:0===A&&0===y?1/A>0&&1/y<0?1:-1:A>y}}(s))},!eue||Gpe);var Qpe=mS,tue=gZ.ArrayBuffer;let IS;mI({global:!0,forced:_r.ArrayBuffer!==tue},{ArrayBuffer:tue}),Qpe("ArrayBuffer"),function(s){s[s.CHOOSE_SERVER=11]="CHOOSE_SERVER",s[s.CLOUD_PROXY=18]="CLOUD_PROXY",s[s.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",s[s.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(IS||(IS={}));var X_e=M5,xZ=Array.isArray||function(s){return"Array"==X_e(s)},eve=e1,ZK=xZ,Hpe=LW,tve=P2,KO=LS("species"),fre=eve.Array,XK=function(s,p){return new(function(s){var p;return ZK(s)&&(Hpe(p=s.constructor)&&(p===fre||ZK(p.prototype))||tve(p)&&null===(p=p[KO]))&&(p=void 0),void 0===p?fre:p}(s))(0===p?0:p)},k4=xP,nue=dH,Wpe=mM,LZ=XR,Kpe=XK,rue=nT([].push),S6=function(s){var p=1==s,A=2==s,y=3==s,w=4==s,$=6==s,j=7==s,_e=5==s||$;return function(K,_i,_o,_u){for(var ch,_f,o_=Wpe(K),i_=nue(o_),u_=k4(_i,_o),g_=LZ(i_),__=0,w_=_u||Kpe,k_=p?w_(K,g_):A||j?w_(K,0):void 0;g_>__;__++)if((_e||__ in i_)&&(_f=u_(ch=i_[__],__,o_),s))if(p)k_[__]=_f;else if(_f)switch(s){case 3:return!0;case 5:return ch;case 6:return __;case 2:rue(k_,ch)}else switch(s){case 4:return!1;case 7:rue(k_,ch)}return $?-1:y||w?w:k_}},zpe={forEach:S6(0),map:S6(1),filter:S6(2),some:S6(3),every:S6(4),find:S6(5),findIndex:S6(6),filterReject:S6(7)},nve=zpe.forEach,_z=CV("forEach")?[].forEach:function(s){return nve(this,s,arguments.length>1?arguments[1]:void 0)};zT({target:"Array",proto:!0,forced:[].forEach!=_z},{forEach:_z});var iue=RL("Array").forEach,rve=xU,Ype=lN,Jpe=D2,$pe=iue,oue=Array.prototype,Zpe={DOMTokenList:!0,NodeList:!0},ove=mM,u9=c8;zT({target:"Object",stat:!0,forced:OT(function(){u9(1)})},{keys:function(s){return u9(ove(s))}});var eY=_U.Object.keys,sve=wV,ave=zT,cve=xZ,Xpe=nT([].reverse),n2=[1,2];ave({target:"Array",proto:!0,forced:String(n2)===String(n2.reverse())},{reverse:function(){return cve(this)&&(this.length=this.length),Xpe(this)}});var uve=RL("Array").reverse,ege=D2,P4=uve,pre=Array.prototype,tge=OT,lve=t1,dve=LS("species"),nge=function(s){return lve>=51||!tge(function(){var p=[];return(p.constructor={})[dve]=function(){return{foo:1}},1!==p[s](Boolean).foo})},hve=zT,fve=e1,rge=xZ,pve=LW,gve=P2,ige=o8,mve=XR,Ave=pM,_ve=kK,vve=LS,yve=v$,Eve=nge("slice"),oge=vve("species"),sue=fve.Array,sge=Math.max;hve({target:"Array",proto:!0,forced:!Eve},{slice:function(s,p){var A,y,w,$=Ave(this),j=mve($),_e=ige(s,j),K=ige(void 0===p?j:p,j);if(rge($)&&((pve(A=$.constructor)&&(A===sue||rge(A.prototype))||gve(A)&&null===(A=A[oge]))&&(A=void 0),A===sue||void 0===A))return yve($,_e,K);for(y=new(void 0===A?sue:A)(sge(K-_e,0)),w=0;_e<K;_e++,w++)_e in $&&_ve(y,w,$[_e]);return y.length=w,y}});var Ive=RL("Array").slice,age=D2,cge=Ive,k0=Array.prototype;function cI(s,p,A,y,w){var $,j,_e,K={};return function(s){var p=s.forEach;return s===oue||Jpe(oue,s)&&p===oue.forEach||Ype(Zpe,rve(s))?$pe:p}($=eY(y)).call($,function(_i){K[_i]=y[_i]}),K.enumerable=!!K.enumerable,K.configurable=!!K.configurable,("value"in K||K.initializer)&&(K.writable=!0),K=sve(j=function(s){var p=s.reverse;return s===pre||ege(pre,s)&&p===pre.reverse?P4:p}(_e=function(s){var p=s.slice;return s===k0||age(k0,s)&&p===k0.slice?cge:p}(A).call(A)).call(_e)).call(j,function(_i,_o){return _o(s,p,_i)||_i},K),w&&void 0!==K.initializer&&(K.value=K.initializer?K.initializer.call(w):void 0,K.initializer=void 0),void 0===K.initializer&&(Tae(s,p,K),K=null),K}var bve=RL("Array").values,MZ=xU,l9=lN,Cve=D2,d9=bve,Are=Array.prototype,aue={DOMTokenList:!0,NodeList:!0},x4=function(s){var p=s.values;return s===Are||Cve(Are,s)&&p===Are.values||l9(aue,MZ(s))?d9:p},zO=RL("Array").keys,cue=xU,uue=lN,lue=D2,eG=zO,_re=Array.prototype,wve={DOMTokenList:!0,NodeList:!0},tG=function(s){var p=s.keys;return s===_re||lue(_re,s)&&p===_re.keys||uue(wve,cue(s))?eG:p};function BZ(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function nG(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?BZ(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):BZ(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let L4=0,rG=0;function r2(s,p,A){return new sI((y,w)=>{p.timeout=p.timeout||S0("HTTP_CONNECT_TIMEOUT"),p.responseType=p.responseType||"json",p.data&&!A?(p.data=JSON.stringify(p.data),L4+=dG(p.data)):A&&(p.data.size?L4+=p.data.size:p.data instanceof FormData?L4+=function($){let j=0;return/DingTalk/i.test(navigator.userAgent)&&$.realFormData&&($=$.realFormData),$.forEach(_e=>{j+="string"==typeof _e?dG(_e):_e.size}),j+138}(p.data):L4+=dG(JSON.stringify(p.data))),p.headers=p.headers||{},p.headers["Content-Type"]=p.headers["Content-Type"]||"application/json",p.method="POST",p.url=s,GU.request(p).then($=>{"string"==typeof $.data?rG+=dG($.data):$.data instanceof ArrayBuffer||$.data instanceof Uint8Array?rG+=$.data.byteLength:rG+=dG(JSON.stringify($.data)),y($.data)}).catch($=>{GU.isCancel($)?w(new U_(D_.OPERATION_ABORTED,"cancel token canceled")):w("ECONNABORTED"===$.code?new U_(D_.NETWORK_TIMEOUT,$.message):$.response?new U_(D_.NETWORK_RESPONSE_ERROR,$.response.status):new U_(D_.NETWORK_ERROR,$.message))})})}function uge(s,p){return UZ.apply(this,arguments)}function UZ(){return UZ=f(function*(s,p){const A=new Blob([p.data],{type:"buffer"});return yield r2(s,nG(nG({},p),{},{data:A,headers:{"Content-Type":"application/octet-stream"}}),!0)}),UZ.apply(this,arguments)}const tR=new class extends hS{set networkState(s){h_.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+s),this.emit(U8.NETWORK_STATE_CHANGE,s,this._networkState),s===$2.ONLINE?this.emit(U8.ONLINE):s===$2.OFFLINE&&(this.onlineWaiter=new sI(p=>{this.once(U8.ONLINE,()=>{this.onlineWaiter=void 0,p($2.ONLINE)})}),this.emit(U8.OFFLINE)),this._networkState=s}get networkState(){return this._networkState}constructor(){super(),a_(this,"_moduleName","network-indicator"),a_(this,"_networkState",$2.ONLINE),a_(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=$2.ONLINE}),window.addEventListener("offline",()=>{this.networkState=$2.OFFLINE})}};let vre=!1;const _x=new class extends hS{constructor(){super(...arguments),a_(this,"onAutoplayFailed",void 0),a_(this,"onAudioAutoplayFailed",void 0)}};function due(){const s=J1();if(!vre){const p=A=>{A.preventDefault(),vre=!1,"Android"!==s.os||"Chrome"!==s.name&&s.name!==V1.WECHAT?(document.body.removeEventListener("touchstart",p,!0),document.body.removeEventListener("mousedown",p,!0)):document.body.removeEventListener("click",p,!0)};vre=!0,"Android"!==s.os||"Chrome"!==s.name&&s.name!==V1.WECHAT?(document.body.addEventListener("touchstart",p,!0),document.body.addEventListener("mousedown",p,!0)):document.body.addEventListener("click",p,!0),h_.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),_x.onAutoplayFailed?_x.onAutoplayFailed():h_.warning(_x.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),_x.emit("autoplay-failed")}}var hue;function yre(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function YI(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?yre(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):yre(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}function LM(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:w0};return function(p,A,y){const w=p[A];if("function"==typeof w){const $="AgoraRTCClient"===p.constructor.name?"Client":p.constructor.name;y.value=function(){for(var j=arguments.length,_e=new Array(j),K=0;K<j;K++)_e[K]=arguments[K];const _i=s.report.reportApiInvoke(this._sessionId||null,{name:"".concat($,".").concat(A),options:_e,tag:AI.TRACER,reportResult:s.reportResult});try{const _o=w.apply(this,_e);return _i.onSuccess(s.reportResult&&_o),_o}catch(_o){throw _i.onError(_o),_o}}}return y}}function Ere(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:w0};return function(p,A,y){const w=p[A];if("function"==typeof w){const $="AgoraRTCClient"===p.constructor.name?"Client":p.constructor.name;y.value=f(function*(){for(var j=arguments.length,_e=new Array(j),K=0;K<j;K++)_e[K]=arguments[K];const _i=s.report.reportApiInvoke(this._sessionId||null,{name:"".concat($,".").concat(A),options:_e,tag:AI.TRACER});try{const _o=yield w.apply(this,_e);return _i.onSuccess(),_o}catch(_o){throw _i.onError(_o),_o}})}return y}}const w0=new(dI("AgoraRTCEventReport")(hue=class{constructor(){var s=this;a_(this,"baseInfoMap",new Map),a_(this,"proxyServer",void 0),a_(this,"clientList",nO),a_(this,"eventUploadTimer",void 0),a_(this,"setSessionIdTimer",void 0),a_(this,"url",void 0),a_(this,"backupUrl",void 0),a_(this,"keyEventUploadPendingItems",[]),a_(this,"normalEventUploadPendingItems",[]),a_(this,"apiInvokeUploadPendingItems",[]),a_(this,"apiInvokeCount",0),a_(this,"ltsList",[]),a_(this,"lastSendNormalEventTime",Date.now()),a_(this,"customReportCounterTimer",void 0),a_(this,"customReportCount",0),a_(this,"extApiInvoke",function(){var p=f(function*(A){for(const y of A){const w=YI(YI({},y),{},{sid:null,invokeId:++s.apiInvokeCount,tag:AI.TRACER});s.sendApiInvoke(w)}});return function(A){return p.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),S0("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),S0("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(s){if(!this.baseInfoMap.has(s)&&!this.baseInfoMap.get(s))return h_.error("adjust session ".concat(s," start time, sid is not exist or info is undefined")),void T0("error",this,"adjustSessionStartTime","adjust session ".concat(s," start time, sid is not exist or info is undefined"));const p=this.baseInfoMap.get(s),A=Date.now(),y=p.startTime;p.startTime=A,h_.debug("rewrite session ".concat(s," startTime: ").concat(A," , ").concat(A-y,"ms")),T0("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(s," startTime: ").concat(A," , ").concat(A-y,"ms")),this.baseInfoMap.set(s,p)}reportApiInvoke(s,p,A){p.timeout=p.timeout||6e4,p.reportResult=void 0===p.reportResult||p.reportResult;const y=Date.now();this.apiInvokeCount+=1;const w=this.apiInvokeCount,$=()=>({tag:p.tag,invokeId:w,sid:s,name:p.name,apiInvokeTime:y,options:p.options,states:p.states||null}),j=!!S0("SHOW_REPORT_INVOKER_LOG");j&&h_.info("".concat(p.name," start"),p.options);let _e=!1;cO(p.timeout).then(()=>{_e||(this.sendApiInvoke(YI(YI({},$()),{},{error:D_.API_INVOKE_TIMEOUT,success:!1})),h_.debug("".concat(p.name," timeout")))});const K=new U_(D_.UNEXPECTED_ERROR,"".concat(p.name,": this api invoke is end"));return{onSuccess:_i=>{const _o=()=>{if(_e)throw K;return _e=!0,this.sendApiInvoke(YI(YI({},$()),{},{success:!0},p.reportResult&&{result:_i})),j&&h_.info("".concat(p.name," onSuccess")),_i};return A?Rge(_o,p.name+"Success",A,()=>_e=!0):_o()},onError:_i=>{const _o=()=>{if(_e)throw _i;_e=!0,this.sendApiInvoke(YI(YI({},$()),{},{success:!1,error:_i.toString()})),j&&h_.info("".concat(p.name," onFailure"),_i.toString())};return A?Rge(_o,p.name+"Error",A,()=>_e=!0):_o()}}}sessionInit(s,p){if(this.baseInfoMap.has(s))return;const A=Date.now(),y=this.createBaseInfo(s,A);y.cname=p.cname;const w=Object.assign({},{willUploadConsoleLog:S0("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:F7?"global":"oversea",areas:S0("AREAS")&&S0("AREAS").join(",")},p.extend),$=Date.now(),j=YI(YI({},y),{},{eventType:rO.SESSION_INIT,appid:p.appid,browser:navigator.userAgent,build:U7,lts:$,elapse:$-A,extend:JSON.stringify(w),mode:p.mode,process:S0("PROCESS_ID"),success:!0,version:GO});this.send({type:pT.SESSION,data:j},!0)}joinChooseServer(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{eventType:rO.JOIN_CHOOSE_SERVER,lts:w,eventElapse:w-p.lts,chooseServerAddr:p.csAddr,errorCode:p.ec,elapse:w-A.startTime,success:p.succ,chooseServerAddrList:JSON.stringify(p.serverList),uid:p.uid?parseInt(p.uid):null,cid:p.cid?parseInt(p.cid):null,chooseServerIp:p.csIp||"",opid:p.opid,unilbsServerIds:p.unilbsServerIds,extend:p.extend||void 0});this.send({type:pT.JOIN_CHOOSE_SERVER,data:$},!0)}reqUserAccount(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{eventType:rO.REQ_USER_ACCOUNT,lts:w,success:p.success,serverAddress:p.serverAddr,stringUid:p.stringUid,uid:p.uid,errorCode:p.errorCode,elapse:w-A.startTime,eventElapse:w-p.lts,extend:JSON.stringify(p.extend)});this.send({type:pT.REQ_USER_ACCOUNT,data:$},!0)}joinGateway(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info;p.vid&&(y.vid=p.vid),y.uid=p.uid,y.cid=p.cid;const w=Date.now(),{firstSuccess:$,avoidJoinStartTime:j,isProxy:_e,addr:K}=p,_i=w-($&&j?j:A.startTime),_o=YI(YI({},y),{},{eventType:rO.JOIN_GATEWAY,lts:w,gatewayAddr:p.addr,success:p.succ,errorCode:p.ec,elapse:_i,eventElapse:w-p.lts,firstSuccess:$}),_u=_o.success?1:0;if(p.succ&&(A.lastJoinSuccessTime=w),$)this.send({type:pT.JOIN_GATEWAT,data:_o},!0);else{let ch;if(K)if(_e){const o_=K.match(/h=(\d{1,3}-){3}\d{1,3}/g),i_=K.match(/p=[0-9]{1,6}/g);ch={isSuccess:_u,gatewayIp:o_&&o_.length?o_[0].split("=")[1].replace(/-/g,"."):"",port:i_&&i_.length?i_[0].split("=")[1]:"",isProxy:_e?1:0}}else{const o_=K.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),i_=K.match(/:[0-9]{1,6}/g);ch={isSuccess:_u,gatewayIp:o_&&o_.length?o_[0].split("//")[1].replace(/-/g,"."):"",port:i_&&i_.length?i_[0].split(":")[1]:"",isProxy:_e?1:0}}else ch={isSuccess:_u,gatewayIp:"",port:"",isProxy:_e?1:0};delete _o.success,delete _o.eventType,delete _o.firstSuccess,_o.vid=Number(_o.vid);const _f=Object.assign({},_o,ch,{eventType:rO.REJOIN_GATEWAY});this.send({type:pT.RE_JOIN_GATEWAY,data:_f},!0)}}joinChannelTimeout(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=Date.now(),w=YI(YI({},A.info),{},{lts:y,timeout:p,elapse:y-A.startTime});this.send({type:pT.JOIN_CHANNEL_TIMEOUT,data:w},!0)}publish(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{eventType:rO.PUBLISH,lts:w,eventElapse:p.eventElapse,elapse:w-A.startTime,success:p.succ,errorCode:p.ec,videoName:p.videoName,audioName:p.audioName,screenName:p.screenName,screenshare:p.screenshare,audio:p.audio,video:p.video,p2pid:p.p2pid,publishRequestid:p.publishRequestid});this.send({type:pT.PUBLISH,data:$},!0)}subscribe(s,p,A){const y=this.baseInfoMap.get(s);if(!y)return;const w=y.info,$=Date.now(),j=YI(YI({},w),{},{eventType:rO.SUBSCRIBE,lts:$,eventElapse:p.eventElapse,elapse:$-y.startTime,success:p.succ,errorCode:p.ec,video:p.video,audio:p.audio,subscribeRequestid:p.subscribeRequestid,p2pid:p.p2pid},A&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof p.peerid?j.peerSuid=p.peerid:j.peer=p.peerid,this.send({type:pT.SUBSCRIBE,data:j},!0)}wsCompressorInit(s){var p;const A=[...tG(p=this.baseInfoMap).call(p)],w=this.baseInfoMap.get(A.length?A[0]:"UnableToGetSid");if(!w)return;const $=w.info,j=Date.now(),_e=YI(YI({},$),{},{eventType:rO.WS_COMPRESSOR_INIT,lts:j,eventElapse:s.eventElapse,elapse:j-w.startTime,status:s.status?1:2});this.send({type:pT.WS_COMPRESSOR_INIT,data:_e},!0)}firstRemoteFrame(s,p,A,y){const w=this.baseInfoMap.get(s);if(!w)return;const $=w.info,j=Date.now(),_e=YI(YI(YI({},$),y),{},{elapse:j-w.startTime,eventType:p,lts:j});this.send({type:A,data:_e},!0)}onGatewayStream(s,p,A,y){const w=this.baseInfoMap.get(s);if(!w)return;const $=w.info,j=Date.now(),_e=YI(YI(YI({},$),y),{},{eventType:p,lts:j});this.send({type:A,data:_e},!0)}streamSwitch(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{eventType:rO.STREAM_SWITCH,lts:w,isDual:p.isdual,elapse:w-A.startTime,success:p.succ});this.send({type:pT.STREAM_SWITCH,data:$},!0)}requestProxyAppCenter(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{eventType:rO.REQUEST_PROXY_APPCENTER,lts:w,eventElapse:w-p.lts,elapse:w-A.startTime,APAddr:p.APAddr,workerManagerList:p.workerManagerList,response:p.response,errorCode:p.ec,success:p.succ});this.send({type:pT.REQUEST_PROXY_APPCENTER,data:$},!0)}requestProxyWorkerManager(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{eventType:rO.REQUEST_PROXY_WORKER_MANAGER,lts:w,eventElapse:w-p.lts,elapse:w-A.startTime,workerManagerAddr:p.workerManagerAddr,response:p.response,errorCode:p.ec,success:p.succ});this.send({type:pT.REQUEST_PROXY_WORKER_MANAGER,data:$},!0)}setProxyServer(s){this.proxyServer=s,h_.debug(s?"reportProxyServerurl: ".concat(s):"disable reportProxyServerurl: ".concat(s)),T0("debug",this,"setProxyServer",s)}peerPublishStatus(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI({},y),{},{subscribeElapse:p.subscribeElapse,peer:p.peer,peerPublishDuration:Math.max(p.audioPublishDuration,p.videoPublishDuration),audiotag:p.audioPublishDuration>0?1:-1,videotag:p.videoPublishDuration>0?1:-1,lts:w,elapse:w-A.startTime,joinChannelSuccessElapse:w-(A.lastJoinSuccessTime||w)});this.send({type:pT.PEER_PUBLISH_STATUS,data:$},!0)}workerEvent(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now();(function($,j,_e){const K=$[j];if(!K||"string"!=typeof K)return[$];$[j]="";const _i=dG(JSON.stringify($));let _o=0;const _u=[];let ch=0;for(let _f=0;_f<K.length;_f++)ch+=K.charCodeAt(_f)<=127?1:3,ch<=1300-_i||(_u[_u.length]=YU(YU({},$),{},{[j]:K.substring(_o,_f)}),_o=_f,ch=K.charCodeAt(_f)<=127?1:3);return _o!==K.length-1&&(_u[_u.length]=YU(YU({},$),{},{[j]:K.substring(_o)})),_u})(YI(YI(YI({},y),p),{},{elapse:w-A.startTime,lts:w,productType:"WebRTC"}),"payload").forEach($=>this.send({type:pT.WORKER_EVENT,data:$},!0))}apworkerEvent(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI(YI({},y),p),{},{elapse:w-A.startTime,lts:w});this.send({type:pT.AP_WORKER_EVENT,data:$},!0)}joinWebProxyAP(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI(YI({},y),p),{},{elapse:w-A.startTime,lts:w,extend:p.extend||void 0});this.send({type:pT.JOIN_WEB_PROXY_AP,data:$},!0)}WebSocketQuit(s,p){const A=this.baseInfoMap.get(s);if(!A)return;const y=A.info,w=Date.now(),$=YI(YI(YI({},y),p),{},{elapse:w-A.startTime,lts:w});this.send({type:pT.WEBSOCKET_QUIT,data:$},!0)}sendCustomReportMessage(s,p){var A=this;return f(function*(){if(A.customReportCount+=p.length,A.customReportCount>S0("CUSTOM_REPORT_LIMIT"))throw new U_(D_.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);A.customReportCounterTimer||(A.customReportCounterTimer=window.setInterval(()=>{A.customReportCount=0},5e3));const y=p.map($=>({type:pT.USER_ANALYTICS,data:YI({sid:s},$)})),w={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:y.map($=>JSON.stringify($))};try{yield A.postDataToStatsCollector(w)}catch($){throw h_.error("send custom report message failed",$.toString()),new U_(D_.CUSTOM_REPORT_SEND_FAILED,$.message)}})()}autoplayFailed(s,p,A,y){if(!s)return;const w=this.baseInfoMap.get(s);if(!w)return;const $=w.info,j=Date.now(),_e=YI(YI({},$),{},{vid:void 0===$.vid?0:Number($.vid),lts:j,elapse:j-w.startTime,cbRegistered:_x.onAutoplayFailed||_x.onAudioAutoplayFailed?1:-1,errorMsg:A,mediaType:p,trackId:y,extend:void 0});this.send({type:pT.AUTOPLAY_FAILED,data:_e},!0)}sendApiInvoke(s){const p=S0("NOT_REPORT_EVENT");if(s.tag&&p.includes&&p.includes(s.tag))return!1;if(null===s.sid)return this.apiInvokeUploadPendingItems.push(s),!1;const A=this.baseInfoMap.get(s.sid);if(!A)return this.apiInvokeUploadPendingItems.push(s),!1;const{cname:y,uid:w,cid:$}=A.info;s.lts=s.lts||Date.now();const j={invokeId:s.invokeId,sid:s.sid,cname:y,cid:$,uid:w,lts:s.lts,success:s.success,elapse:s.lts-A.startTime,execElapse:s.lts-s.apiInvokeTime,apiName:s.name,options:s.options?JSON.stringify(s.options):void 0,execStates:s.states?JSON.stringify(s.states):void 0,execResult:s.result?JSON.stringify(s.result):void 0,errorCode:s.error?JSON.stringify(s.error):void 0};return this.send({type:pT.API_INVOKE,data:j},!1),!0}appendSessionId(){this.clientList.forEach(s=>{if(s._sessionId){const p=this.apiInvokeUploadPendingItems.length;for(let A=0;A<p;A++){const y=this.apiInvokeUploadPendingItems.shift();y&&(y.sid=s._sessionId,this.sendApiInvoke(Object.assign({},y)))}}})}send(s,p){if(p)return this.keyEventUploadPendingItems.push(s),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(s),this.normalEventUploadPendingItems.length>S0("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(s,p){const A=[],y=[];for(;s.length;){const j=s.shift();A.length<20?A.push(j):y.push(j)}s.push(...y);for(const j of[...A]){var w;-1!==this.ltsList.indexOf(j.data.lts)?(j.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(j.data.lts)):(this.ltsList.push(j.data.lts),ece(w=this.ltsList).call(w,(_e,K)=>_e-K))}p||(this.lastSendNormalEventTime=Date.now());const $={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:A.map(j=>JSON.stringify(j)),vid:(j=>{const _e=j&&j.data.sid&&this.baseInfoMap.get(j.data.sid);return _e&&_e.info.vid&&+_e.info.vid||0})(A[0])};return A.length&&this.postDataToStatsCollector($).catch((j=>_e=>{S0("EVENT_REPORT_RETRY")&&(p?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(j):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(j),this.normalEventUploadPendingItems.length>S0("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-S0("NORMAL_EVENT_QUEUE_CAPACITY")),h_.warning("report: drop normal events"))))})(A)),s}postDataToStatsCollector(s){var p=arguments,A=this;return f(function*(){let y=p.length>1&&void 0!==p[1]&&p[1];tR.networkState===$2.OFFLINE&&(yield sI.race([tR.onlineWaiter,cO(2*US.maxRetryTimeout)]));const w=y?"/events/proto-raws":"/events/messages";let $=A.url||(A.proxyServer?"https://".concat(A.proxyServer,"/rs/?h=").concat(S0("EVENT_REPORT_DOMAIN"),"&p=").concat(S0("STATS_COLLECTOR_PORT"),"&d=").concat(w):"https://".concat(S0("EVENT_REPORT_DOMAIN"),":").concat(S0("STATS_COLLECTOR_PORT")).concat(w));for(let j=0;j<2;j+=1){1===j&&($=A.backupUrl||(A.proxyServer?"https://".concat(A.proxyServer,"/rs/?h=").concat(S0("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(S0("STATS_COLLECTOR_PORT"),"&d=").concat(w):"https://".concat(S0("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(S0("STATS_COLLECTOR_PORT")).concat(w)));try{y?yield uge($,{timeout:1e4,data:s}):yield r2($,{timeout:1e4,data:s})}catch(_e){if(1===j)throw _e;continue}return}})()}createBaseInfo(s,p){const A=Object.assign({},Vfe);return A.sid=s,this.baseInfoMap.set(s,{info:A,startTime:p}),A}reportResourceTiming(s,p){const A=performance.getEntriesByName(s),y=A[A.length-1];y&&this.reportApiInvoke(p,{name:"Client.resourceTiming",options:y,tag:AI.TRACER}).onSuccess()}})||hue);Tne.on("REPORT_LOG_UPLOAD",s=>{s.networkState=tR.networkState,w0.reportApiInvoke(null,{name:"logUploadError",options:s,tag:AI.TRACER})});class lge extends hS{constructor(p,A){super(),a_(this,"trackMediaType",void 0),a_(this,"_ID",void 0),a_(this,"_hints",[]),a_(this,"_isClosed",!1),a_(this,"_originMediaStreamTrack",void 0),a_(this,"_mediaStreamTrack",void 0),a_(this,"_external",{}),this._ID=A||pS(8,"track-"),this._originMediaStreamTrack=p,this._mediaStreamTrack=p,V7.includes(this)||V7.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(p){if(!p){w0.reportApiInvoke(null,{name:bI.GET_MEDIA_STREAM_TRACK,options:[],tag:AI.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(p){const A=V7.indexOf(p);-1!==A&&V7.splice(A,1)}(this),this.emit(_6.CLOSED)}}let VS,fue,tY,h9=1;class MR{constructor(p){a_(this,"lockingPromise",sI.resolve()),a_(this,"locks",0),a_(this,"name",""),a_(this,"lockId",void 0),this.lockId=h9++,p&&(this.name=p),h_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(p){let A;this.locks+=1,h_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof p?p:""));const y=new sI($=>{A=()=>{this.locks-=1,h_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof p?p:"")),$()}}),w=this.lockingPromise.then(()=>A);return this.lockingPromise=this.lockingPromise.then(()=>y),w}}function f9(s,p){return function(A,y,w){const $=A[y];if("function"!=typeof $)throw new Error("Cannot use mutex on object property.");return w.value=f(function*(){const j=this[p];if(!j)throw new Error("mutex property key ".concat(p," doesn't exist on ").concat(s));const _e=yield j.lock("From ".concat(s,".").concat(y));try{for(var K=arguments.length,_i=new Array(K),_o=0;_o<K;_o++)_i[_o]=arguments[_o];return yield $.apply(this,_i)}finally{_e()}}),w}}class pue extends lge{get muted(){return this._muted}get enabled(){return this._enabled}constructor(p,A){super(p,A),a_(this,"_enabled",!0),a_(this,"_muted",!1),a_(this,"_isClosed",!1),a_(this,"_trackProcessors",[]),a_(this,"_enabledMutex",void 0),a_(this,"processor",void 0),a_(this,"processorContext",void 0),a_(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new MR("".concat(A)),p.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(p=>p.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,h_.debug("[".concat(this.getTrackId(),"] close")),T0("debug",this,"close"),this.emit(wI.NEED_CLOSE),super.close())}_registerTrackProcessor(p){var A=this;return f(function*(){if(-1!==A._trackProcessors.indexOf(p))return;const y=A._trackProcessors[A._trackProcessors.length-1];A._trackProcessors.push(p),p.onOutputChange=f(function*(){A._mediaStreamTrack=p.output||A._originMediaStreamTrack,A._updatePlayerSource(),yield oT(A,wI.NEED_REPLACE_TRACK,A)}),y?(y.onOutputChange=f(function*(){y.output&&(yield p.setInput(y.output))}),yield p.setInput(y.output||y.input||A._originMediaStreamTrack)):yield p.setInput(A._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const p=this._trackProcessors[this._trackProcessors.length-1];return p.output||p.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(p,A){var y=this;return f(function*(){if(p!==y._originMediaStreamTrack){if(y._originMediaStreamTrack.removeEventListener("ended",y._handleTrackEnded),A&&y._originMediaStreamTrack.stop(),p.addEventListener("ended",y._handleTrackEnded),y._originMediaStreamTrack=p,y._trackProcessors.length>0){yield y._trackProcessors[0].setInput(p);const w=y._getOutputFromProcessors();y._mediaStreamTrack=w}else y._mediaStreamTrack=y._originMediaStreamTrack;y._updatePlayerSource(),yield oT(y,wI.NEED_REPLACE_TRACK,y),y.processor&&y.processor.updateInput({track:y._originMediaStreamTrack,context:y.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){h_.debug("[".concat(this.getTrackId(),"] track ended")),m6("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(_6.TRACK_ENDED)}stateCheck(p,A){if(h_.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(p,": ").concat(A,"]")),T0("debug",this,"stateCheck",{stateName:p,state:A,muted:this._muted,enabled:this._enabled}),PK(A,p),this._enabled&&this._muted&&"enabled"===p&&!1===A)throw new U_(D_.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===p&&!0===A)throw new U_(D_.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(s){s.IOS_15_INTERRUPTION_START="ios15-interruption-start",s.IOS_15_INTERRUPTION_END="ios15-interruption-end",s.IOS_INTERRUPTION_START="ios-interruption-start",s.IOS_INTERRUPTION_END="ios-interruption-end",s.STATE_CHANGE="state-change"})(VS||(VS={})),function(s){s.AUDIO_CONTEXT_CREATED="audio_context_created"}(fue||(fue={})),function(s){s.AIDenoiser="AIDenoiser"}(tY||(tY={}));const gue={audioContextInitOptions:{}},nY=new class extends hS{constructor(){super(),a_(this,"registeredPlugins",[])}setOptions(s,p){gue[s]&&(gue[s]=p)}getOptions(s){return gue[s]}installPlugin(s){s instanceof Object&&s.name&&this.registeredPlugins.push(s.name)}},FZ=window.AudioContext||window.webkitAudioContext;let jL=null;const m1=new class extends hS{constructor(){var s;super(...arguments),s=this,a_(this,"prevState",void 0),a_(this,"curState",void 0),a_(this,"interruptDetectorTrack",void 0),a_(this,"onLocalAudioTrackMute",()=>{h_.info("ios15-interruption-start"),vT("info",["WebAudio"],"ios15-interruption-start"),this.emit(VS.IOS_15_INTERRUPTION_START)}),a_(this,"onLocalAudioTrackUnmute",f(function*(){h_.info("ios15-interruption-end"),vT("info",["WebAudio"],"ios15-interruption-end"),"running"!==s.curState||s.duringInterruption?h_.info("ios15-interruption-end-canceled"):(jL&&(yield jL.suspend()),s.emit(VS.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(s){h_.debug("webaudio bindInterruptDetectorTrack ".concat(s.getTrackId())),T0("debug",["WebAudio"],"bindInterruptDetectorTrack",s.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=s,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(s){h_.debug("webaudio unbindInterruptDetectorTrack ".concat(s.getTrackId())),T0("debug",["WebAudio"],"unbindInterruptDetectorTrack",s.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===s&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function iG(){if(!jL){if(function jZ(){if(!FZ)return h_.error("your browser is not support web audio"),void aI("error",["WebAudio"],"your browser is not support web audio");h_.info("create audio context"),SK("info",["WebAudio"],"WebAudioContext");const s=nY.getOptions("audioContextInitOptions");h_.debug("audio content init option:",JSON.stringify(s)),jL=new FZ(s),nY.emit(fue.AUDIO_CONTEXT_CREATED,jL),m1.curState=jL.state,jL.onstatechange=()=>{m1.prevState=m1.curState,m1.curState=jL?jL.state:void 0,(W2()||b4())&&"running"===m1.prevState&&"interrupted"===m1.curState&&(h_.info("ios-interruption-start"),vT("info",["AudioState"],"ios-interruption-start"),m1.emit(VS.IOS_INTERRUPTION_START)),(W2()||b4())&&"interrupted"===m1.prevState&&"running"===m1.curState&&(h_.info("ios-interruption-end"),vT("info",["AudioState"],"ios-interruption-end"),m1.emit(VS.IOS_INTERRUPTION_END)),m1.prevState!==m1.curState&&(h_.debug("AudioContext State Change","".concat(m1.prevState,"=>").concat(m1.curState)),m6("debug",["AudioContext",void 0],"statechange","".concat(m1.prevState,"=>").concat(m1.curState)),m1.emit(VS.STATE_CHANGE))},function(){var p=f(function*(A){const y=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let w,$=!1,j=!1,_e=!1;function K(g_){"running"===A.state?_i(!1):W2()||b4()?"suspended"===A.state&&(_i(!0),g_&&A.resume().then(_u,_u)):"closed"!==A.state&&(_i(!0),g_&&A.resume().then(_u,_u))}function _i(g_){if($!==g_){$=g_;for(let __=0,w_=y;__<w_.length;__+=1){const k_=w_[__];g_?window.addEventListener(k_,ch,{capture:!0,passive:!0}):window.removeEventListener(k_,ch,{capture:!0,passive:!0})}}}function _u(){K(!1)}function ch(){K(!0)}function _f(g_){if(!_e)if(w.paused)if(g_){let __;o_(!1),_e=!0;try{__=w.play(),__?__.then(i_,i_):(w.addEventListener("playing",i_),w.addEventListener("abort",i_),w.addEventListener("error",i_))}catch(w_){i_()}}else o_(!0);else o_(!1)}function o_(g_){if(j!==g_){j=g_;for(let __=0,w_=y;__<w_.length;__++){const k_=w_[__];g_?window.addEventListener(k_,u_,{capture:!0,passive:!0}):window.removeEventListener(k_,u_,{capture:!0,passive:!0})}}}function i_(){w.removeEventListener("playing",i_),w.removeEventListener("abort",i_),w.removeEventListener("error",i_),_e=!1,_f(!1)}function u_(){_f(!0)}if(W2()){const g_=A.createMediaStreamDestination(),__=document.createElement("div");__.innerHTML="<audio x-webkit-airplay='deny'></audio>",w=__.children.item(0),w.controls=!1,w.disableRemotePlayback=!0,w.preload="auto",w.srcObject=g_.stream,_f(!0)}m1.on(VS.STATE_CHANGE,function _o(){K(!0)}),K(!1)});return function(A){return p.apply(this,arguments)}}()(jL)}(),!jL)throw new U_(D_.NOT_SUPPORTED,"can not create audio context");return jL}return jL}function oG(s){if(function(){if(null!==Ire)return Ire;const y=iG(),w=y.createBufferSource(),$=y.createGain(),j=y.createGain();w.connect($),w.connect(j),w.disconnect($);let _e=!1;try{w.disconnect($)}catch(K){_e=!0}return w.disconnect(),Ire=_e,_e}())return;T0("debug",["WebAudio"],"polyfillAudioNode");const p=s.connect,A=s.disconnect;s.connect=(y,w,$)=>(s._inputNodes||(s._inputNodes=[]),s._inputNodes.includes(y)||(y instanceof AudioNode?(s._inputNodes.push(y),p.call(s,y,w,$)):p.call(s,y,w)),s),s.disconnect=(y,w,$)=>{A.call(s),y?I9(s._inputNodes,y):s._inputNodes=[];for(const j of s._inputNodes)p.call(s,j)}}let Ire=null;function i2(s,p){const A=1/p,y=iG();let w=y.createGain();w.gain.value=0,w.connect(y.destination);let $=!1;const j=()=>{if($)return void(w=null);const _e=y.createOscillator();_e.onended=j,_e.connect(w),_e.start(0),_e.stop(y.currentTime+A),s(y.currentTime)};return j(),()=>{$=!0}}const R6=h_.prefix("[inject-node]");class bre{constructor(){a_(this,"nodeLists",[]),a_(this,"prevNode",void 0),a_(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(p,A){R6.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),p.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(A),this.nodeLists.forEach((y,w)=>{const $=this.nodeLists[w+1];$&&y.connect($)})):p.connect(A),this.nextNode=A,this.prevNode=p}disconnect(){var p;R6.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(A=>{A.disconnect()}),null===(p=this.prevNode)||void 0===p||p.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(p){R6.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(R6.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(p),p.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(p),p.connect(this.nextNode)),this.nodeLists.push(p)):R6.debug("add node is called before inject node connected")}removeNode(p){R6.debug("remove node in inject node, current list:",this.nodeLists.length);const A=this.nodeLists.indexOf(p);if(-1===A)return void R6.debug("$[inject-node] cannot find the node to be removed");const y=this.nodeLists[A+1],w=this.nodeLists[A-1];0===A&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(p),this.prevNode.connect(y||this.nextNode)),A===this.nodeLists.length-1&&this.nextNode&&w&&(w.disconnect(p),w.connect(this.nextNode)),0!==A&&A!==this.nodeLists.length-1&&(w.disconnect(p),w.connect(y)),R6.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class Cre extends hS{get processSourceNode(){return this.sourceNode}set processedNode(p){var A;if(!this.isDestroyed&&this._processedNode!==p){try{var y;null===(y=this.sourceNode)||void 0===y||y.disconnect(this.outputNode)}catch(w){}null===(A=this._processedNode)||void 0===A||A.disconnect(),this._processedNode=p,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),a_(this,"outputNode",void 0),a_(this,"outputTrack",void 0),a_(this,"isPlayed",!1),a_(this,"sourceNode",void 0),a_(this,"analyserNode",void 0),a_(this,"context",void 0),a_(this,"audioBufferNode",void 0),a_(this,"destNode",void 0),a_(this,"injectNode",void 0),a_(this,"audioOutputLevel",0),a_(this,"_processedNode",void 0),a_(this,"playNode",void 0),a_(this,"isDestroyed",!1),a_(this,"onNoAudioInput",void 0),a_(this,"isNoAudioInput",!1),a_(this,"_noAudioInputCount",0),this.context=iG(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),oG(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new bre}startGetAudioBuffer(p){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(p),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=A=>{this.emit(kT.ON_AUDIO_BUFFER,function(y){for(let w=0;w<y.outputBuffer.numberOfChannels;w+=1){const $=y.outputBuffer.getChannelData(w);for(let j=0;j<$.length;j+=1)$[j]=0}return y.inputBuffer}(A))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!jS().webAudioMediaStreamDest)throw new U_(D_.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(p){"running"!==this.context.state&&eL(()=>{m1.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=p||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(p){}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||W2()||b4()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const p=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(p);let A=0;for(let y=0;y<p.length;y++)A+=y<64?Math.abs(10*p[y]):Math.abs(6*p[y]/15);return A/p.length/255}checkHasAudioInput(){var p=arguments,A=this;return f(function*(){let y=p.length>0&&void 0!==p[0]?p[0]:0;if(y>5)return A.isNoAudioInput=!0,A.onNoAudioInput&&A.onNoAudioInput(),!1;if(W2()||b4()?"suspended"===A.context.state&&A.context.resume():"running"!==A.context.state&&A.context.resume(),!A.analyserNode)return!1;const w=new Uint8Array(A.analyserNode.frequencyBinCount);A.analyserNode.getByteFrequencyData(w);let $=!1;for(let j=0;j<w.length;j++)0!==w[j]&&($=!0);return $?(A.isNoAudioInput=!1,!0):(yield cO(200),(yield A.checkHasAudioInput(y?y+1:1))&&$)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(p){this.outputNode.gain.setValueAtTime(p,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(p){this.injectNode.addNode(p)}removeAudioNode(p){this.injectNode.removeNode(p)}disconnect(){var p,A;null===(p=this.processedNode)||void 0===p||p.disconnect(),null===(A=this.sourceNode)||void 0===A||A.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var p;this.processedNode?null===(p=this.processedNode)||void 0===p||p.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class mue extends Cre{get isFreeze(){return!1}constructor(p,A){var y,w;if(super(),y=this,a_(this,"sourceNode",void 0),a_(this,"track",void 0),a_(this,"audioElement",void 0),a_(this,"isCurrentTrackCloned",!1),a_(this,"isRemoteTrack",!1),a_(this,"rebuildWebAudio",f(function*(){if(h_.debug("ready to rebuild web audio, state:",y.context.state),y.isNoAudioInput&&(yield y.checkHasAudioInput()),!y.isNoAudioInput||y.isDestroyed)return document.body.removeEventListener("click",y.rebuildWebAudio,!0),void h_.debug("rebuild web audio success, current volume status",y.getAccurateVolumeLevel());y.context.resume().then(()=>h_.info("resume success")),h_.debug("rebuild web audio because of ios 12 bugs"),y.disconnect();const _e=y.track;y.track=y.track.clone(),y.isCurrentTrackCloned?_e.stop():y.isCurrentTrackCloned=!0;const K=new MediaStream([y.track]);y.sourceNode=y.context.createMediaStreamSource(K),oG(y.sourceNode),y.analyserNode=y.context.createAnalyser();const _i=y.outputNode.gain.value;y.outputNode=y.context.createGain(),y.outputNode.gain.setValueAtTime(_i,y.context.currentTime),oG(y.outputNode),y.emit(kT.UPDATE_SOURCE),y.connect(),y.audioElement.srcObject=K,y.isPlayed&&y.play(y.playNode),y.checkHasAudioInput()})),"audio"!==p.kind)throw new U_(D_.UNEXPECTED_ERROR);this.track=p;const $=new MediaStream([this.track]);this.isRemoteTrack=!!A,this.sourceNode=this.context.createMediaStreamSource($),oG(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=$;const j=J1();A&&j.os===RR.IOS&&Number(null===(w=j.osVersion)||void 0===w?void 0:w.split(".")[0])<15&&(m1.on(VS.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(_e=>{_e||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(p){this.sourceNode.disconnect(),this.track=p,this.isCurrentTrackCloned=!1;const A=new MediaStream([p]);this.sourceNode=this.context.createMediaStreamSource(A),oG(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(kT.UPDATE_SOURCE),this.audioElement.srcObject=A}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),m1.off("state-change",this.rebuildWebAudio),super.destroy()}}function O6(s,p){return sG.apply(this,arguments)}function sG(){return sG=f(function*(s,p){const A=(w,$)=>w?"number"!=typeof w?w.max||w.exact||w.ideal||w.min||$:w:$,y={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxHeight:A(p.height,1080),maxWidth:A(p.width,1920)}}};return p.frameRate&&"number"!=typeof p.frameRate?(y.video.mandatory.maxFrameRate=p.frameRate.max,y.video.mandatory.minFrameRate=p.frameRate.min):"number"==typeof p.frameRate&&(y.video.mandatory.maxFrameRate=p.frameRate),yield navigator.mediaDevices.getUserMedia(y)}),sG.apply(this,arguments)}function dge(s){return D6.apply(this,arguments)}function D6(){return D6=f(function*(s){const p=yield hge(s.mediaSource),A=yield(y=p,new sI((w,$)=>{const j=document.createElement("div");j.innerText="share screen",j.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const _e=document.createElement("div");_e.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const K=document.createElement("div");K.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",K.setAttribute("style","height: 12%;");const _i=document.createElement("div");_i.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const _o=document.createElement("div");_o.setAttribute("style","text-align: right; padding: 16px 0;");const _u=document.createElement("button");_u.innerHTML="cancel",_u.setAttribute("style","width: 85px;"),_u.onclick=()=>{document.body.removeChild(ch);const _f=new Error("NotAllowedError");_f.name="NotAllowedError",$(_f)},_o.appendChild(_u),_e.appendChild(K),_e.appendChild(_i),_e.appendChild(_o);const ch=document.createElement("div");ch.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),ch.appendChild(j),ch.appendChild(_e),document.body.appendChild(ch),y.map(_f=>{if(_f.id){const o_=document.createElement("div");o_.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let i_=_f.thumbnail;const{width:u_}=i_.getSize();u_>1920&&(i_=i_.resize({width:1920})),o_.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+i_.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+_f.name.replace(/[\u00A0-\u9999<>\&]/g,function(g_){return"&#"+g_.charCodeAt(0)+";"})+"</span>",o_.onclick=()=>{document.body.removeChild(ch),w(_f.id)},_i.appendChild(o_)}})}));var y;return yield O6(A,s)}),D6.apply(this,arguments)}function hge(s){return cG.apply(this,arguments)}function cG(){return cG=f(function*(s){let p=["window","screen"];"application"!==s&&"window"!==s||(p=["window"]),"screen"===s&&(p=["screen"]);const A=N6();if(!A)throw new U_(D_.ELECTRON_IS_NULL);let y=null;try{y=A.desktopCapturer.getSources({types:p})}catch(w){y=null}y&&y.then||(y=new sI((w,$)=>{A.desktopCapturer.getSources({types:p},(j,_e)=>{j?$(j):w(_e)})}));try{return yield y}catch(w){throw new U_(D_.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,w.toString())}}),cG.apply(this,arguments)}let VZ=null;function N6(){if(VZ)return VZ;try{return VZ=window.require("electron"),VZ}catch(s){return null}}const k6=new MR("safari");let wre=!1,Aue=!1;function MM(s,p){return _ue.apply(this,arguments)}function _ue(){return _ue=f(function*(s,p){let A=0,y=null;for(;A<2;)try{y=yield Tve(s,p,A>0);break}catch(w){if(w instanceof U_)throw h_.error("[".concat(p,"] ").concat(w.toString())),T0("error",[],"getLocalStream",{config:s,id:p},w.toString()),w;const $=p9(w.name||w.code||w,w.message);if($.code===D_.MEDIA_OPTION_INVALID){h_.debug("[".concat(p,"] detect media option invalid, retry")),aI("debug",[],"[".concat(p,"] detect media option invalid, retry")),A+=1,yield cO(500);continue}throw h_.error("[".concat(p,"] ").concat($.toString())),T0("error",[],"getLocalStream",{config:s,id:p},$.toString()),$}if(!y)throw new U_(D_.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return y}),_ue.apply(this,arguments)}function Tve(s,p,A){return vue.apply(this,arguments)}function vue(){return vue=f(function*(s,p,A){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new U_(D_.NOT_SUPPORTED,"can not find getUserMedia");A&&(s.video&&(delete s.video.width,delete s.video.height),s.screen&&(delete s.screen.width,delete s.screen.height));const y=jS(),w=new MediaStream;if(s.audioSource&&w.addTrack(s.audioSource),s.videoSource&&w.addTrack(s.videoSource),!s.audio&&!s.video&&!s.screen)return h_.debug("Using Video Source/ Audio Source"),aI("debug",[],"Using Video Source/ Audio Source"),w;if(s.screen)if(N6())g9(w,s.screen.sourceId?yield O6(s.screen.sourceId,s.screen):yield dge(s.screen));else if(_ne()&&s.screen.extensionId&&s.screen.mandatory){if(!y.getStreamFromExtension)throw new U_(D_.NOT_SUPPORTED,"This browser does not support screen sharing");h_.debug("[".concat(p,'] Screen access on chrome stable, looking for extension"')),aI("debug",[],"[".concat(p,'] Screen access on chrome stable, looking for extension"'));const _u=yield($=s.screen.extensionId,j=p,new sI((ch,_f)=>{try{chrome.runtime.sendMessage($,{getStream:!0},o_=>{if(!o_||!o_.streamId)return h_.error("[".concat(j,"] No response from Chrome Plugin. Plugin not installed properly"),o_),T0("error",[],"getSourceIdFromExtension",{extensionId:$,streamId:j},"No response from Chrome Plugin. Plugin not installed properly, ".concat(o_)),void _f(new U_(D_.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));ch(o_.streamId)})}catch(o_){h_.error("[".concat(j,"] AgoraRTC screensharing plugin is not accessible(").concat($,")"),o_.toString()),T0("error",[],"getSourceIdFromExtension",{extensionId:$,streamId:j},"AgoraRTC screensharing plugin is not accessible(".concat($,"), ").concat(o_.toString())),_f(new U_(D_.CHROME_PLUGIN_NOT_INSTALL))}}));s.screen.mandatory.chromeMediaSourceId=_u,g9(w,yield navigator.mediaDevices.getUserMedia({video:{mandatory:s.screen.mandatory}}))}else if(y.getDisplayMedia){s.screen.mediaSource&&oZ(s.screen.mediaSource);const _u={width:s.screen.width,height:s.screen.height,frameRate:s.screen.frameRate,displaySurface:"screen"===s.screen.mediaSource?"monitor":s.screen.mediaSource};h_.debug("[".concat(p,"] getDisplayMedia:"),JSON.stringify({video:_u,audio:!!s.screenAudio})),SK("debug",["mediaDevices",p],"getDisplayMedia",{video:_u,audio:!!s.screenAudio,trackId:p}),g9(w,yield navigator.mediaDevices.getDisplayMedia({video:_u,audio:!!s.screenAudio}))}else{if(!q2())throw h_.error("[".concat(p,"] This browser does not support screenSharing")),new U_(D_.NOT_SUPPORTED,"This browser does not support screen sharing");{s.screen.mediaSource&&oZ(s.screen.mediaSource);const _u={video:{mediaSource:s.screen.mediaSource,width:s.screen.width,height:s.screen.height,frameRate:s.screen.frameRate}};h_.debug("[".concat(p,"] getUserMedia: ").concat(JSON.stringify(_u))),SK("debug",["mediaDevices",p],"getUserMedia",_u),g9(w,yield navigator.mediaDevices.getUserMedia(_u))}}var $,j;if(!s.video&&!s.audio)return w;let _e={video:s.video,audio:s.audio},K=S0("MEDIA_DEVICE_CONSTRAINTS");if(K)try{"string"==typeof K&&(K=JSON.parse(K)),_e=function _u(ch,_f){if(!Oge(ch)||!Oge(_f)||Array.isArray(ch)&&!Array.isArray(_f)||!Array.isArray(ch)&&Array.isArray(_f))return _f;if(Array.isArray(_f)&&Array.isArray(ch)){const o_=[...ch];for(let i_=0;i_<_f.length;i_++)o_[i_]=_u(ch[i_],_f[i_]);return o_}{const o_=YU({},ch);for(const i_ in _f)Object.prototype.hasOwnProperty.call(_f,i_)&&(o_[i_]=Object.prototype.hasOwnProperty.call(ch,i_)?_u(ch[i_],_f[i_]):_f[i_]);return o_}}(_e,K),aI("debug",["mediaDevices",p],"merge configConstraints ".concat(JSON.stringify(K)))}catch(_u){}h_.debug("[".concat(p,"] GetUserMedia"),JSON.stringify(_e)),SK("debug",["mediaDevices",p],"getUserMedia",_e),J1();let _i,_o=null;(H2()||W2()||EK())&&(_o=yield k6.lock());try{_i=yield navigator.mediaDevices.getUserMedia(_e)}catch(_u){throw _o&&_o(),_u}return _e.audio&&(wre=!0),_e.video&&(Aue=!0),g9(w,_i),_o&&_o(),w}),vue.apply(this,arguments)}function p9(s,p){switch(s){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new U_(D_.MEDIA_OPTION_INVALID,"".concat(s,": ").concat(p));case"NotFoundError":case"DevicesNotFoundError":return new U_(D_.DEVICE_NOT_FOUND,"".concat(s,": ").concat(p));case"NotSupportedError":return new U_(D_.NOT_SUPPORTED,"".concat(s,": ").concat(p));case"NotReadableError":return new U_(D_.NOT_READABLE,"".concat(s,": ").concat(p));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new U_(D_.PERMISSION_DENIED,"".concat(s,": ").concat(p));case"ConstraintNotSatisfiedError":return new U_(D_.CONSTRAINT_NOT_SATISFIED,"".concat(s,": ").concat(p));default:return h_.error("getUserMedia unexpected error",s),T0("error",[],"handleGetUserMediaError",void 0,s),new U_(D_.UNEXPECTED_ERROR,"".concat(s,": ").concat(p))}}function g9(s,p){const A=s.getVideoTracks()[0],y=s.getAudioTracks()[0],w=p.getVideoTracks()[0],$=p.getAudioTracks()[0];$&&(y&&s.removeTrack(y),s.addTrack($)),w&&(A&&s.removeTrack(A),s.addTrack(w))}const eP=new class extends hS{get state(){return this._state}set state(s){s!==this._state&&(this.emit(UL.STATE_CHANGE,s),this._state=s)}constructor(){super(),a_(this,"_state",H7.IDLE),a_(this,"isAccessMicrophonePermission",!1),a_(this,"isAccessCameraPermission",!1),a_(this,"lastAccessMicrophonePermission",!1),a_(this,"lastAccessCameraPermission",!1),a_(this,"checkdeviceMatched",!1),a_(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(S0("ENUMERATE_DEVICES_INTERVAL")||Jhe()&&p6())&&this.updateDevicesInfo()},S0("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(s=>h_.error(s.toString()))}enumerateDevices(s,p){var A=arguments,y=this;return f(function*(){let w=A.length>2&&void 0!==A[2]&&A[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new U_(D_.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const $=yield navigator.mediaDevices.enumerateDevices(),j=y.checkMediaDeviceInfoIsOk($);let _e=!y.isAccessMicrophonePermission&&s,K=!y.isAccessCameraPermission&&p;j.audio&&(_e=!1),j.video&&(K=!1);let _i=null,_o=null,_u=null;if(!w&&(_e||K)){if(k6.isLocked&&(h_.debug("[device manager] wait GUM lock"),(yield k6.lock())(),h_.debug("[device manager] GUM unlock")),wre&&(_e=!1,y.isAccessMicrophonePermission=!0),Aue&&(K=!1,y.isAccessCameraPermission=!0),h_.debug("[device manager] check media device permissions",s,p,_e,K),_e&&K){try{_u=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(ch){const _f=p9(ch.name||ch.code||ch,ch.message);if(_f.code===D_.PERMISSION_DENIED)throw _f;h_.warning("getUserMedia failed in getDevices",_f)}y.isAccessCameraPermission=!0,y.isAccessMicrophonePermission=!0}else if(_e){try{_i=yield navigator.mediaDevices.getUserMedia({audio:s})}catch(ch){const _f=p9(ch.name||ch.code||ch,ch.message);if(_f.code===D_.PERMISSION_DENIED)throw _f;h_.warning("getUserMedia failed in getDevices",_f)}y.isAccessMicrophonePermission=!0}else if(K){try{_o=yield navigator.mediaDevices.getUserMedia({video:p})}catch(ch){const _f=p9(ch.name||ch.code||ch,ch.message);if(_f.code===D_.PERMISSION_DENIED)throw _f;h_.warning("getUserMedia failed in getDevices",_f)}y.isAccessCameraPermission=!0}h_.debug("[device manager] mic permission",s,"cam permission",p)}try{const ch=yield navigator.mediaDevices.enumerateDevices();return _i&&_i.getTracks().forEach(_f=>_f.stop()),_o&&_o.getTracks().forEach(_f=>_f.stop()),_u&&_u.getTracks().forEach(_f=>_f.stop()),_i=null,_o=null,_u=null,ch}catch(ch){return _i&&_i.getTracks().forEach(_f=>_f.stop()),_o&&_o.getTracks().forEach(_f=>_f.stop()),_u&&_u.getTracks().forEach(_f=>_f.stop()),_i=null,_o=null,_u=null,new U_(D_.ENUMERATE_DEVICES_FAILED,ch.toString()).throw()}})()}getRecordingDevices(){var s=arguments,p=this;return f(function*(){let A=s.length>0&&void 0!==s[0]&&s[0];return(yield p.enumerateDevices(!0,!1,A)).filter(y=>"audioinput"===y.kind)})()}getCamerasDevices(){var s=arguments,p=this;return f(function*(){let A=s.length>0&&void 0!==s[0]&&s[0];return(yield p.enumerateDevices(!1,!0,A)).filter(y=>"videoinput"===y.kind)})()}getSpeakers(){var s=arguments,p=this;return f(function*(){let A=s.length>0&&void 0!==s[0]&&s[0];return(yield p.enumerateDevices(!0,!1,A)).filter(y=>"audiooutput"===y.kind)})()}searchDeviceIdByName(s){let p=null;return this.deviceInfoMap.forEach(A=>{A.device.label===s&&(p=A.device.deviceId)}),p}getDeviceById(s){var p=this;return f(function*(){const A=(yield p.enumerateDevices(!0,!0,!0)).find(y=>y.deviceId===s);if(!A)throw new U_(D_.DEVICE_NOT_FOUND,"deviceId: ".concat(s));return A})()}init(){var s=this;return f(function*(){s.state=H7.INITING;try{yield s.updateDevicesInfo(),s.state=H7.INITEND}catch(p){throw h_.warning("Device Detection functionality cannot start properly.",p.toString()),s.state=H7.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new U_(D_.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),p}})()}updateDevicesInfo(){var s=this;return f(function*(){const p=yield s.enumerateDevices(!0,!0,!0),A=Date.now(),y=[];if(p[0]&&p[0].label&&!1===s.checkdeviceMatched){s.checkdeviceMatched=!0;const $=p.find(_e=>"audioinput"===_e.kind&&"default"===_e.deviceId),j=p.find(_e=>"audiooutput"===_e.kind&&"default"===_e.deviceId);$&&j?j.groupId===$.groupId?h_.debug("[device-check] default input ".concat($.label," and output ").concat(j.label," is the same group")):h_.warning("[device-check] default input ".concat($.label," and output ").concat(j.label," is not the same group")):h_.debug("[device-check] default input or output not found")}const w=s.checkMediaDeviceInfoIsOk(p);if(p.forEach($=>{if(!$.deviceId)return;const j=s.deviceInfoMap.get("".concat($.kind,"_").concat($.deviceId));if("ACTIVE"!==(j?j.state:"INACTIVE")){const _e={initAt:A,updateAt:A,device:$,state:"ACTIVE"};s.deviceInfoMap.set("".concat($.kind,"_").concat($.deviceId),_e),y.push(_e)}j&&(j.updateAt=A)}),s.deviceInfoMap.forEach(($,j)=>{"ACTIVE"===$.state&&$.updateAt!==A&&($.state="INACTIVE",y.push($))}),s.state!==H7.INITEND)return w.audio&&(s.lastAccessMicrophonePermission=!0,s.isAccessMicrophonePermission=!0),void(w.video&&(s.lastAccessCameraPermission=!0,s.isAccessCameraPermission=!0));y.forEach($=>{switch($.device.kind){case"audioinput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(UL.RECORDING_DEVICE_CHANGED,$);break;case"videoinput":s.lastAccessCameraPermission&&s.isAccessCameraPermission&&s.emit(UL.CAMERA_DEVICE_CHANGED,$);break;case"audiooutput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(UL.PLAYOUT_DEVICE_CHANGED,$)}}),w.audio&&(s.lastAccessMicrophonePermission=!0,s.isAccessMicrophonePermission=!0),w.video&&(s.lastAccessCameraPermission=!0,s.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(s){const p=s.filter(w=>"audioinput"===w.kind),A=s.filter(w=>"videoinput"===w.kind),y={audio:!1,video:!1};for(const w of p)if(w.label&&w.deviceId){y.audio=!0;break}for(const w of A)if(w.label&&w.deviceId){y.video=!0;break}return y}};var fge;let pge=dI("AudioElementPlayCenter")(fge=class{constructor(){a_(this,"onAutoplayFailed",void 0),a_(this,"elementMap",new Map),a_(this,"elementStateMap",new Map),a_(this,"elementsNeedToResume",[]),a_(this,"sinkIdMap",new Map),a_(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(s=>{let[p,A]=s;const y=this.elementStateMap.get(p),w=A.srcObject.getAudioTracks()[0];K2()?w&&"live"===w.readyState&&"running"===m1.curState&&(h_.debug("auto resume after interruption for iOS 15"),aI("debug",["AudioElementPlayCenter",p],"auto resume after interruption for iOS15"),A.pause(),A.play()):y&&"paused"===y&&w&&"live"===w.readyState&&"running"===m1.curState&&(h_.debug("auto resume after interruption for iOS"),aI("debug",["AudioElementPlayCenter",p],"auto resume after interruption for iOS"),A.play())})}),a_(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(s=>{let[p,A]=s;const y=A.srcObject.getAudioTracks()[0];y&&"live"===y.readyState&&(h_.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),T0("debug",["AudioElementPlayCenter",p],"autoResumeAfterInterruptionOnIOS15"),A.pause(),A.play())})}),this.autoResumeAudioElement(),m1.on(VS.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),m1.on(VS.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),m1.on(VS.STATE_CHANGE,()=>{W2()&&"suspended"===m1.prevState&&"running"===m1.curState&&this.autoResumeAfterInterruption()})}setSinkID(s,p){var A=this;return f(function*(){const y=A.elementMap.get(s);if(A.sinkIdMap.set(s,p),y)try{yield y.setSinkId(p)}catch(w){throw new U_(D_.PERMISSION_DENIED,"can not set sink id: "+w.toString())}})()}play(s,p,A,y){if(this.elementMap.has(p))return;const w=document.createElement("audio");w.autoplay=!0,w.srcObject=new MediaStream([s]),this.bindAudioElementEvents(p,w),this.elementMap.set(p,w),this.elementStateMap.set(p,DR.INIT),this.setVolume(p,A);const $=this.sinkIdMap.get(p);if($)try{w.setSinkId($).catch(_e=>{h_.warning("[".concat(p,"] set sink id failed"),_e.toString()),SK("warning",["HTMLAudioElement",p],"setSinkId",_e.toString())})}catch(_e){h_.warning("[".concat(p,"] set sink id failed"),_e.toString())}const j=w.play();j&&j.then&&j.catch(_e=>{y&&w0.autoplayFailed(y,"audio",_e.message,p),h_.warning("audio element play warning",_e.toString()),SK("warning",["HTMLAudioElement",p],"play",_e.toString()),this.elementMap.has(p)&&"NotAllowedError"===_e.name&&(h_.warning("detected audio element autoplay failed"),T0("warning",["AudioElementPlayCenter",p],"play",_e.toString()),this.elementsNeedToResume.push(w),eL(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),due()}))})}updateTrack(s,p){const A=this.elementMap.get(s);A&&(A.srcObject=new MediaStream([p]))}isPlaying(s){return this.elementMap.has(s)}setVolume(s,p){const A=this.elementMap.get(s);A&&(p=Math.max(0,Math.min(100,p)),A.volume=p/100)}stop(s){const p=this.elementMap.get(s);if(this.sinkIdMap.delete(s),!p)return;const A=this.elementsNeedToResume.indexOf(p);this.elementsNeedToResume.splice(A,1),p.srcObject=null,p.remove(),this.elementMap.delete(s),this.elementStateMap.delete(s)}bindAudioElementEvents(s,p){m9.forEach(A=>{p.addEventListener(A,y=>{const w=this.elementStateMap.get(s),$="pause"===y.type?"paused":y.type;h_.debug("[".concat(s,"] audio-element-status change ").concat(w," => ").concat($)),m6("debug",["HTMLAudioElement",s],"statusChange","".concat(w," => ").concat($)),this.elementStateMap.set(s,$)})})}getPlayerState(s){return this.elementStateMap.get(s)||"uninit"}autoResumeAudioElement(){const s=()=>{this.elementsNeedToResume.forEach(p=>{p.play().then(A=>{h_.debug("Auto resume audio element success"),T0("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(A=>{h_.warning("Auto resume audio element failed!",A),T0("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",A.toString())})}),this.elementsNeedToResume=[]};new sI(p=>{document.body?p():window.addEventListener("load",()=>p())}).then(()=>{const p=J1();"Android"!==p.os||"Chrome"!==p.name&&p.name!==V1.WECHAT?(document.body.addEventListener("touchstart",s,!0),document.body.addEventListener("mousedown",s,!0)):document.body.addEventListener("click",s,!0)})}})||fge;const m9=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],wO=new pge;function HT(){return function(s,p,A){const y=s[p];"function"==typeof y&&(A.value=function(){this._isClosed&&new U_(D_.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var w=arguments.length,$=new Array(w),j=0;j<w;j++)$[j]=arguments[j];const _e=y.apply(this,$);return _e instanceof sI?new sI((K,_i)=>{_e.then(K).catch(_i)}):_e})}}var yue,gge,Eue,Tre,Sre,rY,GZ,Rre,mge,Ore,Iue,Age,nR,bue,Dre,_ge,Cue,vge,uG,yge,A9,_9,Nre,QZ,wue,Tue,IN,Ege;function kre(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function Sue(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?kre(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):kre(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let pR=(yue=dI("LocalAudioTrack","getTrackId"),gge=HT(),Eue=f9("LocalAudioTrack","_enabledMutex"),Tre=HT(),Sre=f9("LocalAudioTrack","_enabledMutex"),rY=HT(),GZ=Ere({report:w0}),Rre=HT(),mge=HT(),Ore=HT(),Iue=HT(),yue((cI((nR=class extends pue{get isPlaying(){return this._useAudioElement?wO.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(s,p,A){super(s,A),a_(this,"trackMediaType","audio"),a_(this,"_encoderConfig",void 0),a_(this,"_source",void 0),a_(this,"_enabled",!0),a_(this,"_volume",100),a_(this,"_useAudioElement",!1),a_(this,"_bypassWebAudio",!1),a_(this,"processor",void 0),a_(this,"processorContext",void 0),a_(this,"processorDestination",void 0),this._encoderConfig=p,this._source=new mue(s),S0("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new Rve(this._source.context,this.getTrackId()),this.processorDestination=new YO(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(kT.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(s){$1(s,"volume",0,1e3);const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),s]},300);this._volume=s,this._source.setVolume(s/100),this._useAudioElement&&wO.setVolume(this.getTrackId(),s);try{if(this._bypassWebAudio)return h_.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void p.onSuccess();const A=this._source.createOutputTrack();this._mediaStreamTrack!==A&&(this._mediaStreamTrack=A,oT(this,wI.NEED_REPLACE_TRACK,this).then(()=>{h_.debug("[".concat(this.getTrackId(),"] replace web audio track success")),aI("debug",this,"replace web audio track success")}).catch(y=>{h_.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),y),aI("warning",this,"replace web audio track failed ".concat(y.toString()))}))}catch(A){}p.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(s){var p=this;return f(function*(){const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[p.getTrackId(),s]});if(!p._useAudioElement)throw new U_(D_.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield wO.setSinkID(p.getTrackId(),s)}catch(y){throw A.onError(y),y}A.onSuccess()})()}setEnabled(s,p,A){var y=this;return f(function*(){if(!A){if(s===y._enabled)return;y.stateCheck("enabled",s)}if(h_.info("[".concat(y.getTrackId(),"] start setEnabled"),s),T0("info",y,"setEnabled",s),s){y._originMediaStreamTrack.enabled=!0;try{A||(y._enabled=!0),yield oT(y,wI.NEED_ENABLE_TRACK,y),h_.info("[".concat(y.getTrackId(),"] setEnabled to ").concat(s," success")),T0("info",y,"setEnabled",s,"success")}catch(w){throw A||(y._enabled=!1),h_.error("[".concat(y.getTrackId(),"] setEnabled to true error"),w.toString()),T0("error",y,"setEnabled",s,w.toString()),w}}else{y._originMediaStreamTrack.enabled=!1,A||(y._enabled=!1);try{yield oT(y,wI.NEED_DISABLE_TRACK,y)}catch(w){throw A||(y._enabled=!0),h_.error("[".concat(y.getTrackId(),"] setEnabled to false error"),w.toString()),T0("info",y,"setEnabled",s,w.toString()),w}}})()}setMuted(s){var p=this;return f(function*(){s!==p._muted&&(p.stateCheck("muted",s),p._muted=s,p._mediaStreamTrack.enabled=!s,h_.debug("[".concat(p.getTrackId(),"] start set muted: ").concat(s)),T0("debug",p,"setMuted",s),s?yield oT(p,wI.NEED_MUTE_TRACK,p):yield oT(p,wI.NEED_UNMUTE_TRACK,p))})()}getStats(){return BM(()=>{h_.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),aI("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),x6(this,wI.GET_STATS)||Sue({},Une)}setAudioFrameCallback(s){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!s)return this._source.removeAllListeners(kT.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(p),this._source.removeAllListeners(kT.ON_AUDIO_BUFFER),this._source.on(kT.ON_AUDIO_BUFFER,A=>s(A))}play(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});h_.debug("[".concat(this.getTrackId(),"] start audio playback")),T0("debug",this,"play"),this._useAudioElement?(h_.debug("[".concat(this.getTrackId(),"] start audio playback in element")),aI("debug",this,"start audio playback in element"),wO.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),s.onSuccess()}stop(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});h_.debug("[".concat(this.getTrackId(),"] stop audio playback")),T0("debug",this,"stop"),this._useAudioElement?wO.stop(this.getTrackId()):this._source.stop(),s.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){h_.debug("[".concat(this.getTrackId(),"] update player source track")),T0("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wO.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(s,p){var A=this;return f(function*(){A._originMediaStreamTrack!==s&&(A._originMediaStreamTrack.removeEventListener("ended",A._handleTrackEnded),s.addEventListener("ended",A._handleTrackEnded),p&&A._originMediaStreamTrack.stop(),A._originMediaStreamTrack=s,A.processor&&A.processor.updateInput({track:s,context:A.processorContext}),A._mediaStreamTrack!==A._source.outputTrack?(A._mediaStreamTrack=A._originMediaStreamTrack,A._updatePlayerSource(),yield oT(A,wI.NEED_REPLACE_TRACK,A)):A._source.updateTrack(A._originMediaStreamTrack))})()}renewMediaStreamTrack(s){return sI.resolve(void 0)}pipe(s){if(this._bypassWebAudio)throw new U_(D_.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===s)return s;if(s._source)throw new U_(D_.INVALID_OPERATION,"Processor ".concat(s.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=s,this.processor._source=this,s.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),s}unpipe(){var s;if(!this.processor)return;const p=this.processor;null===(s=this._source.processSourceNode)||void 0===s||s.disconnect(),this.processor._source=!1,this.processor=void 0,p.reset()}bindProcessorDestinationEvents(){var s=this;this.processorDestination.on(ZP.ON_TRACK,function(){var p=f(function*(A){A?A!==s._mediaStreamTrack&&(s._mediaStreamTrack=A,s._updatePlayerSource(),yield oT(s,wI.NEED_REPLACE_TRACK,s)):s._mediaStreamTrack!==s._originMediaStreamTrack&&(s._mediaStreamTrack=s._originMediaStreamTrack,s._updatePlayerSource(),yield oT(s,wI.NEED_REPLACE_TRACK,s))});return function(A){return p.apply(this,arguments)}}()),this.processorDestination.on(ZP.ON_NODE,p=>{this._source.processedNode=p})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ZP.ON_TRACK),this.processorDestination.removeAllListeners(ZP.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(XN.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(XN.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[gge],Object.getOwnPropertyDescriptor(nR.prototype,"setPlaybackDevice"),nR.prototype),cI(nR.prototype,"setEnabled",[Eue,Tre],Object.getOwnPropertyDescriptor(nR.prototype,"setEnabled"),nR.prototype),cI(nR.prototype,"setMuted",[Sre,rY,GZ],Object.getOwnPropertyDescriptor(nR.prototype,"setMuted"),nR.prototype),cI(nR.prototype,"getStats",[Rre],Object.getOwnPropertyDescriptor(nR.prototype,"getStats"),nR.prototype),cI(nR.prototype,"setAudioFrameCallback",[mge],Object.getOwnPropertyDescriptor(nR.prototype,"setAudioFrameCallback"),nR.prototype),cI(nR.prototype,"play",[Ore],Object.getOwnPropertyDescriptor(nR.prototype,"play"),nR.prototype),cI(nR.prototype,"stop",[Iue],Object.getOwnPropertyDescriptor(nR.prototype,"stop"),nR.prototype),Age=nR))||Age),HZ=(bue=dI("MicrophoneAudioTrack","getTrackId"),Dre=HT(),_ge=f9("MicrophoneAudioTrack","_enabledMutex"),Cue=HT(),bue((cI((uG=class extends pR{constructor(s,p,A,y){super(s,p.encoderConfig?QU(p.encoderConfig):{},y),a_(this,"_config",void 0),a_(this,"_deviceName","default"),a_(this,"_constraints",void 0),a_(this,"_originalConstraints",void 0),a_(this,"_enabled",!0),pI("info",this,"constructor",{trackId:y,deviceId:s.label,constraints:A}),this._config=p,this._constraints=A,this._originalConstraints=A,this._deviceName=s.label,"boolean"==typeof p.bypassWebAudio&&(this._bypassWebAudio=p.bypassWebAudio),K2()&&m1.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(s){var p=this;return f(function*(){const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.MIC_AUDIO_TRACK_SET_DEVICE,options:[p.getTrackId(),s]});if(h_.info("[".concat(p.getTrackId(),"] start set device to ").concat(s)),T0("info",p,"setDevice",s),p._enabled)try{const y=yield eP.getDeviceById(s),w={};w.audio=Sue({},p._constraints),w.audio.deviceId={exact:s},p._originMediaStreamTrack.stop();let $=null;try{$=yield MM(w,p.getTrackId())}catch(j){throw h_.error("[".concat(p.getTrackId(),"] setDevice failed"),j.toString()),T0("error",p,"setDevice",s,j.toString()),$=yield MM({video:p._constraints},p.getTrackId()),yield p._updateOriginMediaStreamTrack($.getAudioTracks()[0],!1),j}yield p._updateOriginMediaStreamTrack($.getAudioTracks()[0],!1),p._deviceName=y.label,p._config.microphoneId=s,p._constraints.deviceId={exact:s}}catch(y){throw A.onError(y),h_.error("[".concat(p.getTrackId(),"] setDevice error"),y.toString()),T0("error",p,"setDevice",s,y.toString()),y}else try{const y=yield eP.getDeviceById(s);p._deviceName=y.label,p._config.microphoneId=s,p._constraints.deviceId={exact:s}}catch(y){throw A.onError(y),h_.error("[".concat(p.getTrackId(),"] setDevice error"),y.toString()),T0("error",p,"setDevice",s,y.toString()),y}A.onSuccess(),h_.info("[".concat(p.getTrackId(),"] set device to ").concat(s," success")),T0("info",p,"setDevice",s,"success")})()}setEnabled(s,p,A){var y=()=>super.setEnabled,w=this;return f(function*(){if(p)return h_.debug("[".concat(w.getTrackId,"] setEnabled false (do not close microphone)")),aI("debug",w,"setEnabled false (do not close microphone)"),yield y().call(w,s);if(!A){if(s===w._enabled)return;w.stateCheck("enabled",s)}if(h_.info("[".concat(w.getTrackId(),"] start setEnabled"),s),T0("info",w,"setEnabled",s),!s){w._originMediaStreamTrack.onended=null,w._originMediaStreamTrack.stop(),A||(w._enabled=!1);try{yield oT(w,wI.NEED_DISABLE_TRACK,w)}catch(_e){throw h_.error("[".concat(w.getTrackId(),"] setEnabled false failed"),_e.toString()),T0("error",w,"setEnabled",s,_e.toString()),_e}return}const $=Sue({},w._constraints),j=eP.searchDeviceIdByName(w._deviceName);j&&!$.deviceId&&($.deviceId=j);try{A||(w._enabled=!0);const _e=yield MM({audio:w._constraints},w.getTrackId());yield w._updateOriginMediaStreamTrack(_e.getAudioTracks()[0],!1),yield oT(w,wI.NEED_ENABLE_TRACK,w)}catch(_e){throw A||(w._enabled=!1),h_.error("[".concat(w.getTrackId(),"] setEnabled true failed"),_e.toString()),T0("error",w,"setEnabled",s,_e.toString()),_e}h_.info("[".concat(w.getTrackId(),"] setEnabled success")),T0("info",w,"setEnabled",s,"success")})()}close(){super.close(),K2()&&m1.unbindInterruptDetectorTrack(this)}onTrackEnded(){var s=this;if((W2()||b4())&&this._enabled&&!this._isClosed&&m1.duringInterruption){const p=function(){var A=f(function*(){m1.off(VS.IOS_INTERRUPTION_END,p),s._enabled&&!s._isClosed&&(h_.debug("[".concat(s.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),aI("debug",s,"try capture microphone media device for interrupted iOS device"),yield s.setEnabled(!1),yield s.setEnabled(!0))});return function(){return A.apply(this,arguments)}}();m1.on(VS.IOS_INTERRUPTION_END,p)}else h_.debug("[".concat(this.getTrackId(),"] track ended")),m6("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(_6.TRACK_ENDED)}renewMediaStreamTrack(s){var p=this;return f(function*(){const A=s||p._constraints,y=eP.searchDeviceIdByName(p._deviceName);y&&!A.deviceId&&(A.deviceId=y),p._constraints=A,p._originMediaStreamTrack.stop();const w=yield MM({audio:p._constraints},p.getTrackId());yield p._updateOriginMediaStreamTrack(w.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var s=this;this.processorContext.on(XN.REQUEST_UPDATE_CONSTRAINTS,function(){var p=f(function*(A,y,w){try{const $=Object.assign({},s._originalConstraints,...A);yield s.renewMediaStreamTrack($),y()}catch($){w($)}});return function(A,y,w){return p.apply(this,arguments)}}()),this.processorContext.on(XN.REQUEST_CONSTRAINTS,function(){var p=f(function*(A){A(s._originMediaStreamTrack.getSettings())});return function(A){return p.apply(this,arguments)}}())}}).prototype,"setDevice",[Dre],Object.getOwnPropertyDescriptor(uG.prototype,"setDevice"),uG.prototype),cI(uG.prototype,"setEnabled",[_ge,Cue],Object.getOwnPropertyDescriptor(uG.prototype,"setEnabled"),uG.prototype),vge=uG))||vge),Sve=(yge=dI("BufferSourceAudioTrack","getTrackId"),A9=HT(),_9=HT(),Nre=HT(),QZ=HT(),wue=HT(),yge((cI((IN=class extends pR{constructor(s,p,A,y){super(p.createOutputTrack(),A,y),a_(this,"source",void 0),a_(this,"_bufferSource",void 0),pI("info",this,"constructor",{trackId:y}),this.source=s,this._bufferSource=p,this._bufferSource.on(kT.AUDIO_SOURCE_STATE_CHANGE,w=>{this.emit(_6.SOURCE_STATE_CHANGE,w)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(w){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(s){const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),s,this.duration]});s&&this._bufferSource.updateOptions(s),this._bufferSource.startProcessAudioBuffer(),p.onSuccess()}pauseProcessAudioBuffer(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),s.onSuccess()}seekAudioBuffer(s){const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(s),p.onSuccess()}resumeProcessAudioBuffer(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),s.onSuccess()}stopProcessAudioBuffer(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),s.onSuccess()}}).prototype,"startProcessAudioBuffer",[A9],Object.getOwnPropertyDescriptor(IN.prototype,"startProcessAudioBuffer"),IN.prototype),cI(IN.prototype,"pauseProcessAudioBuffer",[_9],Object.getOwnPropertyDescriptor(IN.prototype,"pauseProcessAudioBuffer"),IN.prototype),cI(IN.prototype,"seekAudioBuffer",[Nre],Object.getOwnPropertyDescriptor(IN.prototype,"seekAudioBuffer"),IN.prototype),cI(IN.prototype,"resumeProcessAudioBuffer",[QZ],Object.getOwnPropertyDescriptor(IN.prototype,"resumeProcessAudioBuffer"),IN.prototype),cI(IN.prototype,"stopProcessAudioBuffer",[wue],Object.getOwnPropertyDescriptor(IN.prototype,"stopProcessAudioBuffer"),IN.prototype),Tue=IN))||Tue),tP=dI("MixingAudioTrack","getTrackId")(Ege=class extends pR{get isActive(){for(const s of this.trackList)if(s._enabled&&!s._isClosed&&!s.muted)return!0;return!1}constructor(){const s=iG().createMediaStreamDestination();super(s.stream.getAudioTracks()[0],void 0,pS(8,"track-mix-")),a_(this,"trackList",void 0),a_(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(p){}this.destNode=s,this.trackList=[]}hasAudioTrack(s){return-1!==this.trackList.indexOf(s)}addAudioTrack(s){if(-1!==this.trackList.indexOf(s))return h_.debug("track ".concat(s.getTrackId()," is already added")),void aI("debug",this,"track already added");h_.debug("add ".concat(s.getTrackId()," to mixing track")),T0("debug",this,"addAudioTrack",s.getTrackId()),s._source.outputNode.connect(this.destNode),this.trackList.push(s),this.updateEncoderConfig()}removeAudioTrack(s){if(-1!==this.trackList.indexOf(s)){h_.debug("remove ".concat(s.getTrackId()," from mixing track")),T0("debug",this,"removeAudioTrack",s.getTrackId());try{s._source.outputNode.disconnect(this.destNode)}catch(p){}I9(this.trackList,s),this.updateEncoderConfig()}}updateEncoderConfig(){const s={};this.trackList.forEach(p=>{p._encoderConfig&&((p._encoderConfig.bitrate||0)>(s.bitrate||0)&&(s.bitrate=p._encoderConfig.bitrate),(p._encoderConfig.sampleRate||0)>(s.sampleRate||0)&&(s.sampleRate=p._encoderConfig.sampleRate),(p._encoderConfig.sampleSize||0)>(s.sampleSize||0)&&(s.sampleSize=p._encoderConfig.sampleSize),p._encoderConfig.stereo&&(s.stereo=!0))}),this._encoderConfig=s}})||Ege;class YO extends hS{constructor(p){super(),a_(this,"name","AudioProcessorDestination"),a_(this,"ID","0"),a_(this,"inputTrack",void 0),a_(this,"inputNode",void 0),a_(this,"audioProcessorContext",void 0),a_(this,"_source",void 0),this.audioProcessorContext=p}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new U_(D_.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new U_(D_.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(ZP.ON_TRACK,void 0),this.emit(ZP.ON_NODE,void 0)}updateInput(p){if(p.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");p.track&&this.inputTrack!==p.track&&(this.inputTrack=p.track,this.emit(ZP.ON_TRACK,this.inputTrack)),p.node&&this.inputNode!==p.node&&(this.inputNode=p.node,this.emit(ZP.ON_NODE,this.inputNode))}}class Rve extends hS{constructor(p,A){super(),a_(this,"constraintsMap",new Map),a_(this,"statsRegistry",[]),a_(this,"audioContext",void 0),a_(this,"trackId",void 0),this.audioContext=p,this.trackId=A}getConstraints(){var p=this;return f(function*(){return o2(p,XN.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(p,A){var y=this;return f(function*(){var w;return h_.info("processor ".concat(A.name," requestApplyConstraints for ").concat(y.trackId)),p&&y.constraintsMap.set(A,p),oT(y,XN.REQUEST_UPDATE_CONSTRAINTS,Array.from(x4(w=y.constraintsMap).call(w)))})()}requestRevertConstraints(p){var A=this;return f(function*(){var y;if(A.constraintsMap.has(p))return A.constraintsMap.delete(p),oT(A,XN.REQUEST_UPDATE_CONSTRAINTS,Array.from(x4(y=A.constraintsMap).call(y)))})()}registerStats(p,A,y){this.statsRegistry.find(w=>w.processorID===p.ID&&w.processorName===p.name&&w.type===A)||this.statsRegistry.push({processorName:p.name,processorID:p.ID,type:A,cb:y})}unregisterStats(p,A){}gatherStats(){return this.statsRegistry.map(p=>{let{processorID:A,processorName:y,type:w,cb:$}=p;return{processorID:A,processorName:y,type:w,stats:$()}})}}class Ove extends hS{constructor(){super(...arguments),a_(this,"resultStorage",new Map)}setLocalAudioStats(p,A,y){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",p,this.checkAudioInputLevel(y,A)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",p,this.checkSendAudioBitrate(y,A))}setLocalVideoStats(p,A,y){this.record("SEND_VIDEO_BITRATE_TOO_LOW",p,this.checkSendVideoBitrate(y,A)),this.record("FRAMERATE_INPUT_TOO_LOW",p,this.checkFramerateInput(y,A)),this.record("FRAMERATE_SENT_TOO_LOW",p,this.checkFramerateSent(y))}setRemoteAudioStats(p,A){const y=p.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",y,this.checkAudioOutputLevel(A))}setRemoteVideoStats(p,A){const y=p.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",y,this.checkVideoDecode(A))}record(p,A,y){this.resultStorage.has(p)||this.resultStorage.set(p,{result:[],isPrevNormal:!0});const w=this.resultStorage.get(p);if(w&&(w.result.push(y),w.result.length>=5)){const $=w.result.includes(!0);w.isPrevNormal&&!$&&this.emit("exception",Ige[p],p,A),!w.isPrevNormal&&$&&this.emit("exception",Ige[p]+2e3,p+"_RECOVER",A),w.isPrevNormal=$,w.result=[]}}checkAudioOutputLevel(p){return!(p.receiveBitrate>0&&0===p.receiveLevel)}checkAudioInputLevel(p,A){return A instanceof tP&&!A.isActive||!!A.muted||0!==p.sendVolumeLevel}checkFramerateInput(p,A){let y=null;A._encoderConfig&&A._encoderConfig.frameRate&&(y=M4(A._encoderConfig.frameRate));const w=p.captureFrameRate;return!y||!w||!(y>10&&w<5||y<10&&y>=5&&w<=1)}checkFramerateSent(p){return!(p.captureFrameRate&&p.sendFrameRate&&p.captureFrameRate>5&&p.sendFrameRate<=1)}checkSendVideoBitrate(p,A){return!!A.muted||0!==p.sendBitrate}checkSendAudioBitrate(p,A){return A instanceof tP&&!A.isActive||!!A.muted||0!==p.sendBitrate}checkVideoDecode(p){return 0===p.receiveBitrate||0!==p.decodeFrameRate}}const Ige={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},VL=new class{markSubscribeStart(s,p){performance.mark("agora-web-sdk/".concat(s,"/subscribe-").concat(p))}markPublishStart(s,p){performance.mark("agora-web-sdk/".concat(s,"/publish-").concat(p))}measureFromSubscribeStart(s,p){const A=performance.getEntriesByName("agora-web-sdk/".concat(s,"/subscribe-").concat(p));if(A.length>0){const y=A[A.length-1];return Math.round(performance.now()-y.startTime)}return 0}measureFromPublishStart(s,p){const A=performance.getEntriesByName("agora-web-sdk/".concat(s,"/publish-").concat(p));if(A.length>0){const y=A[A.length-1];return Math.round(performance.now()-y.startTime)}return 0}};function bge(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function v9(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?bge(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):bge(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}class lG{constructor(p){a_(this,"store",void 0),a_(this,"onStatsException",void 0),a_(this,"onUploadPublishDuration",void 0),a_(this,"localStats",new Map),a_(this,"remoteStats",new Map),a_(this,"updateStatsInterval",void 0),a_(this,"trafficStats",void 0),a_(this,"trafficStatsPeerList",[]),a_(this,"uplinkStats",void 0),a_(this,"exceptionMonitor",void 0),a_(this,"p2pChannel",void 0),a_(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=p,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new Ove,this.exceptionMonitor.on("exception",(A,y,w)=>{this.onStatsException&&this.onStatsException(A,y,w)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(eI.LocalAudioTrack)||v9({},Une)}getLocalVideoTrackStats(){return this.localStats.get(eI.LocalVideoTrack)||v9({},Fne)}getRemoteAudioTrackStats(p){const A=($,j)=>{if(!this.trafficStats)return j;const _e=this.trafficStats.peer_delay.find(K=>K.peer_uid===$);return _e&&(j.publishDuration=_e.B_ppad+(Date.now()-this.trafficStats.timestamp)),j},y={};if(p){var w;const $=null===(w=this.remoteStats.get(p))||void 0===w?void 0:w.audioStats;$&&(y[p]=A(p,$))}else Array.from(this.remoteStats.entries()).forEach($=>{let[j,{audioStats:_e}]=$;_e&&(y[j]=A(j,_e))});return y}getRemoteNetworkQualityStats(p){const A={};if(p){var y;const w=null===(y=this.remoteStats.get(p))||void 0===y?void 0:y.networkStats;w&&(A[p]=w)}else Array.from(this.remoteStats.entries()).forEach(w=>{let[$,{networkStats:j}]=w;j&&(A[$]=j)});return A}getRemoteVideoTrackStats(p){const A=($,j)=>{if(!this.trafficStats)return j;const _e=this.trafficStats.peer_delay.find(K=>K.peer_uid===$);return _e&&(j.publishDuration=_e.B_ppvd+(Date.now()-this.trafficStats.timestamp)),j},y={};if(p){var w;const $=null===(w=this.remoteStats.get(p))||void 0===w?void 0:w.videoStats;$&&(y[p]=A(p,$))}else Array.from(this.remoteStats.entries()).forEach($=>{let[j,{videoStats:_e}]=$;_e&&(y[j]=A(j,_e))});return y}getRTCStats(){let p=0,A=0,y=0,w=0;const $=this.localStats.get(eI.LocalAudioTrack);$&&(p+=$.sendBytes,A+=$.sendBitrate);const j=this.localStats.get(eI.LocalVideoTrack);j&&(p+=j.sendBytes,A+=j.sendBitrate);const _e=this.localStats.get(eI.LocalVideoLowTrack);_e&&(p+=_e.sendBytes,A+=_e.sendBitrate),this.remoteStats.forEach(_i=>{let{audioStats:_o,videoStats:_u}=_i;_o&&(y+=_o.receiveBytes,w+=_o.receiveBitrate),_u&&(y+=_u.receiveBytes,w+=_u.receiveBitrate)});let K=1;return this.trafficStats&&(K+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:K,SendBitrate:A,SendBytes:p,RecvBytes:y,RecvBitrate:w,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(p){this.localStats.set(p,void 0)}removeLocalStats(p){p?this.localStats.delete(p):this.localStats.clear()}addRemoteStats(p){this.remoteStats.set(p,{})}removeRemoteStats(p){p?this.remoteStats.delete(p):this.remoteStats.clear()}addP2PChannel(p){this.p2pChannel=p}updateTrafficStats(p){p.peer_delay=p.peer_delay.filter(A=>void 0!==A.B_ppad||void 0!==A.B_ppvd),p.peer_delay.filter(A=>-1===this.trafficStatsPeerList.indexOf(A.peer_uid)).forEach(A=>{var y;const w=null===(y=this.p2pChannel)||void 0===y?void 0:y.getRemoteMedia(A.peer_uid),$=null!=w&&w.videoSSRC?VL.measureFromSubscribeStart(this.store.clientId,w.videoSSRC):0,j=null!=w&&w.audioSSRC?VL.measureFromSubscribeStart(this.store.clientId,w.audioSSRC):0;void 0!==A.B_ppad&&void 0!==A.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(A.peer_uid,A.B_ppad,A.B_ppvd,$>j?$:j),this.trafficStatsPeerList.push(A.peer_uid))}),this.trafficStats=p}updateUplinkStats(p){this.uplinkStats&&this.uplinkStats.B_fir!==p.B_fir&&h_.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(p.B_fir)),this.uplinkStats=p}static isRemoteVideoFreeze(p,A,y){return!!p&&(!!y&&A.framesDecodeFreezeTime>y.framesDecodeFreezeTime||!(!y||A.framesDecodeCount>y.framesDecodeCount))}static isRemoteAudioFreeze(p){return!!p&&p._isFreeze()}isLocalVideoFreeze(p){return!(!p.inputFrame||!p.sentFrame)&&p.inputFrame.frameRate>5&&p.sentFrame.frameRate<3}updateLocalStats(p){Array.from(this.localStats.entries()).forEach(A=>{let[y,w]=A;switch(y){case eI.LocalVideoTrack:case eI.LocalVideoLowTrack:{const $=w,j=v9({},Fne),_e=p.getStats(),K=p.getLocalMedia(y);if(_e){const _i=_e.videoSend.find(_o=>_o.ssrc===(null==K?void 0:K.ssrcs[0].ssrcId));if(_i){const _o=p.getLocalVideoSize(),_u=p.getEncoderConfig(eI.LocalVideoTrack);"H264"!==_i.codec&&"VP8"!==_i.codec&&"VP9"!==_i.codec&&"AV1X"!==_i.codec&&"AV1"!==_i.codec||(j.codecType=_i.codec),j.sendBytes=_i.bytes,j.sendBitrate=$?8*Math.max(0,j.sendBytes-$.sendBytes):0,_i.inputFrame?(j.captureFrameRate=_i.inputFrame.frameRate,j.captureResolutionHeight=_i.inputFrame.height,j.captureResolutionWidth=_i.inputFrame.width):_o&&(j.captureResolutionWidth=_o.width,j.captureResolutionHeight=_o.height),_i.sentFrame?(j.sendFrameRate=_i.sentFrame.frameRate,j.sendResolutionHeight=_i.sentFrame.height,j.sendResolutionWidth=_i.sentFrame.width):_o&&(j.sendResolutionWidth=_o.width,j.sendResolutionHeight=_o.height),_i.avgEncodeMs&&(j.encodeDelay=_i.avgEncodeMs),_u&&_u.bitrateMax&&(j.targetSendBitrate=1e3*_u.bitrateMax),j.sendPackets=_i.packets,j.sendPacketsLost=_i.packetsLost,j.totalDuration=$?$.totalDuration+1:1,j.totalFreezeTime=$?$.totalFreezeTime:0,this.isLocalVideoFreeze(_i)&&(j.totalFreezeTime+=1)}this.trafficStats&&(j.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(y,j),j&&K&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,K.track,j);break}case eI.LocalAudioTrack:{const $=w,j=v9({},Une),_e=p.getStats(),K=p.getLocalMedia(y);if(_e){const _i=_e.audioSend.find(_o=>_o.ssrc===(null==K?void 0:K.ssrcs[0].ssrcId));if(_i){if("opus"!==_i.codec&&"aac"!==_i.codec&&"PCMU"!==_i.codec&&"PCMA"!==_i.codec&&"G722"!==_i.codec||(j.codecType=_i.codec),_i.inputLevel)j.sendVolumeLevel=Math.round(32767*_i.inputLevel);else{const _o=p.getLocalAudioVolume();_o&&(j.sendVolumeLevel=Math.round(32767*_o))}j.sendBytes=_i.bytes,j.sendPackets=_i.packets,j.sendPacketsLost=_i.packetsLost,j.sendBitrate=$?8*Math.max(0,j.sendBytes-$.sendBytes):0}}this.trafficStats&&(j.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(eI.LocalAudioTrack,j),j&&K&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,K.track,j);break}}})}updateRemoteStats(p){Array.from(this.remoteStats.entries()).forEach(A=>{let[y,{videoStats:w,audioStats:$,videoPcStats:j}]=A;const _e=$,K=w,_i=j,_o=v9({},BK),_u=v9({},jne),ch=v9({},ace),{audioTrack:_f,videoTrack:o_,audioSSRC:i_,videoSSRC:u_}=p.getRemoteMedia(y),g_=p.getStats(),__=null==g_?void 0:g_.audioRecv.find(Pv=>Pv.ssrc===i_),w_=null==g_?void 0:g_.videoRecv.find(Pv=>Pv.ssrc===u_),k_=this.trafficStats&&this.trafficStats.peer_delay.find(Pv=>Pv.peer_uid===y);if(__&&("opus"!==__.codec&&"aac"!==__.codec&&"PCMU"!==__.codec&&"PCMA"!==__.codec&&"G722"!==__.codec||(_o.codecType=__.codec),__.outputLevel?_o.receiveLevel=Math.round(32767*__.outputLevel):_f&&(_o.receiveLevel=Math.round(32767*_f.getVolumeLevel())),_o.receiveBytes=__.bytes,_o.receivePackets=__.packets,_o.receivePacketsLost=__.packetsLost,_o.packetLossRate=_o.receivePacketsLost/(_o.receivePackets+_o.receivePacketsLost),_o.receiveBitrate=_e?8*Math.max(0,_o.receiveBytes-_e.receiveBytes):0,_o.totalDuration=_e?_e.totalDuration+1:1,_o.totalFreezeTime=_e?_e.totalFreezeTime:0,_o.freezeRate=_o.totalFreezeTime/_o.totalDuration,_o.receiveDelay=__.jitterBufferMs,_o.totalDuration>10&&lG.isRemoteAudioFreeze(_f)&&(_o.totalFreezeTime+=1)),w_){"H264"!==w_.codec&&"VP8"!==w_.codec&&"VP9"!==w_.codec&&"AV1X"!==w_.codec&&"AV1"!==w_.codec||(_u.codecType=w_.codec),_u.receiveBytes=w_.bytes,_u.receiveBitrate=K?8*Math.max(0,_u.receiveBytes-K.receiveBytes):0,_u.decodeFrameRate=w_.decodeFrameRate<0?0:w_.decodeFrameRate,_u.renderFrameRate=w_.decodeFrameRate<0?0:w_.decodeFrameRate,w_.outputFrame&&(_u.renderFrameRate=w_.outputFrame.frameRate),w_.receivedFrame?(_u.receiveFrameRate=w_.receivedFrame.frameRate,_u.receiveResolutionHeight=w_.receivedFrame.height,_u.receiveResolutionWidth=w_.receivedFrame.width):o_&&(_u.receiveResolutionHeight=o_._videoHeight||0,_u.receiveResolutionWidth=o_._videoWidth||0),void 0!==w_.framesRateFirefox&&(_u.receiveFrameRate=Math.round(w_.framesRateFirefox)),_u.receivePackets=w_.packets,_u.receivePacketsLost=w_.packetsLost,_u.packetLossRate=_u.receivePacketsLost/(_u.receivePackets+_u.receivePacketsLost),_u.totalDuration=K?K.totalDuration+1:1,_u.totalFreezeTime=K?K.totalFreezeTime:0,_u.receiveDelay=w_.jitterBufferMs||0;const Pv=!!u_&&p.getRemoteVideoIsReady(u_);o_&&Pv&&lG.isRemoteVideoFreeze(o_,w_,_i)&&(_u.totalFreezeTime+=1),_u.freezeRate=_u.totalFreezeTime/_u.totalDuration}k_&&(_o.end2EndDelay=k_.B_ad,_u.end2EndDelay=k_.B_vd,_o.transportDelay=k_.B_ed,_u.transportDelay=k_.B_ed,_o.currentPacketLossRate=k_.B_ealr4/100,_u.currentPacketLossRate=k_.B_evlr4/100,ch.uplinkNetworkQuality=k_.B_punq?k_.B_punq:0,ch.downlinkNetworkQuality=k_.B_pdnq?k_.B_pdnq:0),this.remoteStats.set(y,{audioStats:_o,videoStats:_u,videoPcStats:w_,networkStats:ch}),_f&&this.exceptionMonitor.setRemoteAudioStats(_f,_o),o_&&this.exceptionMonitor.setRemoteVideoStats(o_,_u)})}}function Rue(s){return(new TextEncoder).encode(s)}const Cge=function(){var s=f(function*(p){return function(A,y){let w="";return new Uint8Array(A).forEach($=>{w+=$.toString(16).padStart(2,"0")}),w}(yield crypto.subtle.digest("SHA-256",Rue(p)))});return function(A){return s.apply(this,arguments)}}();function Pre(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function y9(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?Pre(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):Pre(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}function qZ(s){if(!s.address||!s.tcp)throw new U_(D_.UNEXPECTED_RESPONSE,"Invalid address format ".concat(s));return s.address.match(/^[\.\:\d]+$/)?"".concat(s.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(h_.info("Cannot recognized as IP address ".concat(s.address,". Used As Host instead")),"".concat(s.address,":").concat(s.tcp))}function iY(s){return s.match(/^[\.\:\d]+$/)?"".concat(s.replace(/[^\d]/g,"-"),".").concat(S0("TURN_DOMAIN")):(h_.info("Cannot recognized as IP address ".concat(s,". Used As Host instead")),s)}function xre(s,p){const A=S0("GATEWAY_DOMAINS");let y=A[1]&&-1!==p.indexOf(A[1])?1:0;return s.addresses=s.addresses||[],{gatewayAddrs:s.addresses.map(w=>w.domain_prefix?{address:"".concat(w.domain_prefix,".").concat(A[y++%A.length],":").concat(w.port)}:w.ip.match(/^[\.\:\d]+$/)?{ip:w.ip,port:w.port,address:"".concat(w.ip.replace(/[^\d]/g,"-"),".").concat(A[y++%A.length],":").concat(w.port)}:(h_.info("Cannot recognized as IP address ".concat(w.ip,". Used As Host instead")),{ip:w.ip,port:w.port,address:"".concat(w.ip,":").concat(w.port)})),uid:s.uid,cid:s.cid,vid:s.detail&&s.detail[8],uni_lbs_ip:s.detail&&s.detail[1],res:s,csIp:s.detail&&s.detail[502]}}function M4(s){return"number"==typeof s?s:s.exact||s.ideal||s.max||s.min||0}function Lre(s){const p=s._encoderConfig;if(!p)return{};const A={resolution:p.width&&p.height?"".concat(M4(p.width),"x").concat(M4(p.height)):void 0,maxVideoBW:p.bitrateMax,minVideoBW:p.bitrateMin};return"number"==typeof p.frameRate?(A.maxFrameRate=p.frameRate,A.minFrameRate=p.frameRate):p.frameRate&&(A.maxFrameRate=p.frameRate.max||p.frameRate.ideal||p.frameRate.exact||p.frameRate.min,A.minFrameRate=p.frameRate.min||p.frameRate.ideal||p.frameRate.exact||p.frameRate.max),A}function Oue(s,p,A){var y;const w=p.videoSend.find(_e=>_e.ssrc===s);if(!w)return null;const $=null==A||null===(y=A.videoSend.find(_e=>_e.ssrc===s))||void 0===y?void 0:y.inputFrame,j={id:pS(10,""),timestamp:new Date(p.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:w.ssrc.toString()};return w.inputFrame&&($&&w.inputFrame.height===$.height||(j.A_fhi=w.inputFrame.height?w.inputFrame.height.toString():"0"),$&&w.inputFrame.width===$.width||(j.A_fwi=w.inputFrame.width?w.inputFrame.width.toString():"0"),$&&w.inputFrame.frameRate===$.frameRate||(j.A_fri=w.inputFrame.frameRate?w.inputFrame.frameRate.toString():"0")),j}function wge(s){return s>=0&&s<.17?1:s>=.17&&s<.36?2:s>=.36&&s<.59?3:s>=.59&&s<=1?4:s>1?5:0}function Mre(s,p){let A,y,w;switch(p){case IS.CHOOSE_SERVER:A=4096,y="choose server";break;case IS.CLOUD_PROXY:A=1048576,y="proxy";break;case IS.CLOUD_PROXY_5:A=4194304,y="proxy5";break;case IS.CLOUD_PROXY_FALLBACK:A=4194310,y="proxy fallback";break;default:throw new U_(D_.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:s.detail&&s.detail[502],retry:!1})}if(s.response_body.forEach($=>{$.buffer&&$.buffer.flag===A&&(w={code:$.buffer.code,addresses:($.buffer.edges_services||[]).map(j=>y9(y9({},j),{},{ticket:$.buffer.cert})),server_ts:s.enter_ts,uid:$.buffer.uid,cid:$.buffer.cid,cname:$.buffer.cname,detail:y9(y9({},$.buffer.detail),s.detail),flag:$.buffer.flag,opid:s.opid})}),!w)throw new U_(D_.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(y," from multi unilbs response"),{csIp:s.detail&&s.detail[502]});return w}function Dve(s,p){return Due.apply(this,arguments)}function Due(){return Due=f(function*(s,p){return yield sI.all(s.addresses.map(function(){var A=f(function*(y){return{address:iY(y.ip),tcpport:y.port,udpport:y.port,username:p&&S0("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?p.toString():ZS.username,password:p&&S0("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield Cge(p.toString()):ZS.password}});return function(y){return A.apply(this,arguments)}}()))}),Due.apply(this,arguments)}function Nve(s,p){const A=p._videoHeight||p.getMediaStreamTrack(!0).getSettings().height;return A?A/M4(s.height):4}function P6(s){let{candidateType:p,relayProtocol:A,type:y,address:w,port:$,protocol:j}=s;return"local-candidate"===y?{candidateType:p,relayProtocol:A,protocol:j}:{candidateType:p,relayProtocol:A,address:w,port:$,protocol:j}}function WZ(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function YU(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?WZ(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):WZ(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}function dG(s){return window.TextEncoder?(new TextEncoder).encode(s).length:s.length}function cO(s){return new sI(p=>{window.setTimeout(p,s)})}function kve(s){const p=new U_(D_.TIMEOUT,"timeout");return new sI((A,y)=>{window.setTimeout(()=>y(p),s)})}function pS(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,p=arguments.length>1?arguments[1]:void 0;const A=Math.random().toString(16).substr(2,s).toLowerCase();return A.length===s?"".concat(p).concat(A):"".concat(p).concat(A)+pS(s-A.length,"")}function Tge(){return pS(32,"").toUpperCase()}const Bre=()=>{};function Sge(s){return new sI((p,A)=>{let y=!1;const w=document.createElement("video");w.setAttribute("autoplay",""),w.setAttribute("muted",""),w.muted=!0,w.autoplay=!0,w.setAttribute("playsinline",""),w.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(w);const $=W2()?"canplay":"playing";w.addEventListener($,()=>{const j=w.videoWidth,_e=w.videoHeight;!j&&q2()||(y=!0,w.srcObject=null,w.remove(),p([j,_e]))}),w.srcObject=new MediaStream([s]),w.play().catch(Bre),setTimeout(()=>{y||(w.srcObject=null,w.remove(),p([w.videoWidth,w.videoHeight]))},4e3)})}function JU(s){return sI.all(s.map(p=>p.then(A=>{throw A},A=>A))).then(p=>{throw p},p=>p)}function o2(s,p){for(var A=arguments.length,y=new Array(A>2?A-2:0),w=2;w<A;w++)y[w-2]=arguments[w];return 0===s.getListeners(p).length?sI.reject(new U_(D_.UNEXPECTED_ERROR,"can not emit promise")):new sI(($,j)=>{s.emit(p,...y,$,j)})}function oT(s,p){if(0===s.getListeners(p).length)return sI.resolve();for(var A=arguments.length,y=new Array(A>2?A-2:0),w=2;w<A;w++)y[w-2]=arguments[w];return o2(s,p,...y)}function x6(s,p){if(0===s.getListeners(p).length)return null;for(var A=arguments.length,y=new Array(A>2?A-2:0),w=2;w<A;w++)y[w-2]=arguments[w];return E9(s,p,...y)}function E9(s,p){let A=null,y=null;for(var w=arguments.length,$=new Array(w>2?w-2:0),j=2;j<w;j++)$[j-2]=arguments[j];if(s.emit(p,...$,_e=>{A=_e},_e=>{y=_e}),null!==y)throw y;if(null===A)throw new U_(D_.UNEXPECTED_ERROR,"handler is not sync");return A}function I9(s,p){const A=s.indexOf(p);-1!==A&&s.splice(A,1)}function Ure(s){const p=[];return s.forEach(A=>{-1===p.indexOf(A)&&p.push(A)}),p}function eL(s){sI.resolve().then(s)}function gR(s){return JSON.parse(JSON.stringify(s))}const Fre={};function BM(s,p){Fre[p]||(Fre[p]=!0,s())}function jre(s){const p=window.atob(s),A=new Uint8Array(new ArrayBuffer(p.length));for(let y=0;y<p.length;y+=1)A[y]=p.charCodeAt(y);return A}function Vre(s){let p="";for(let A=0;A<s.length;A+=1)p+=String.fromCharCode(s[A]);return window.btoa(p)}const Gre=new class{constructor(){a_(this,"fnMap",new Map)}throttleByKey(s,p,A,y){for(var w=arguments.length,$=new Array(w>4?w-4:0),j=4;j<w;j++)$[j-4]=arguments[j];if(this.fnMap.has(p)){const _e=this.fnMap.get(p);if(_e.threshold!==A){_e.fn(..._e.args),clearTimeout(_e.timer);const K=window.setTimeout(()=>{const _i=this.fnMap.get(p);_i&&_i.fn(..._i.args),this.fnMap.delete(p)},A);this.fnMap.set(p,{fn:s,threshold:A,timer:K,args:$,skipFn:y})}else _e.skipFn&&_e.skipFn(..._e.args),this.fnMap.set(p,YU(YU({},_e),{},{fn:s,args:$,skipFn:y}))}else{const _e=window.setTimeout(()=>{const K=this.fnMap.get(p);K&&K.fn(...K.args),this.fnMap.delete(p)},A);this.fnMap.set(p,{fn:s,threshold:A,timer:_e,args:$,skipFn:y})}}},Rge=Gre.throttleByKey.bind(Gre),L6=function(){var s=f(function*(p){let{fragementLength:A,referenceList:y,asyncMapHandler:w,allFailedhandler:$,promisesCollector:j}=p,_e=0;const K=A;let _i,_o=0;const _u=function(){var ch=f(function*(){const _f=(()=>{const o_=_e*K;return y.slice(o_,o_+K).map(w)})();j&&j.push(..._f);try{_i=yield JU(_f)}catch(o_){if(_o+=K,_e++,!(_o>=y.length))return void(yield _u());$(o_)}_f.forEach(o_=>o_.cancel())});return function(){return ch.apply(this,arguments)}}();return yield _u(),_i});return function(A){return s.apply(this,arguments)}}();function Oge(s){return"object"==typeof s&&null!==s&&!(s instanceof RegExp)}var Nue=OT,Qre=LS("iterator"),Hre=!Nue(function(){var s=new URL("b?a=1&b=2&c=3","http://a"),p=s.searchParams,A="";return s.pathname="c%20d",p.forEach(function(y,w){p.delete("b"),A+=w+y}),!s.toJSON||!p.sort||"http://a/c%20d?a=1&c=3"!==s.href||"3"!==p.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!p[Qre]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==A||"x"!==new URL("http://x",void 0).host}),kue=N2,Pue=vO,Pve=OT,xue=c8,Dge=s8,Nge=cH,xve=mM,Lue=dH,sY=Object.assign,qre=Object.defineProperty,Lve=nT([].concat),Mue=!sY||Pve(function(){if(kue&&1!==sY({b:1},sY(qre({},"a",{enumerable:!0,get:function(){qre(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var s={},p={},A=Symbol(),y="abcdefghijklmnopqrst";return s[A]=7,y.split("").forEach(function(w){p[w]=w}),7!=sY({},s)[A]||xue(sY({},p)).join("")!=y})?function(s,p){for(var A=xve(s),y=arguments.length,w=1,$=Dge.f,j=Nge.f;y>w;)for(var _e,K=Lue(arguments[w++]),_i=$?Lve(xue(K),$(K)):xue(K),_o=_i.length,_u=0;_o>_u;)_e=_i[_u++],kue&&!Pue(j,K,_e)||(A[_e]=K[_e]);return A}:sY,Mve=WN,Bue=gW,kge=xP,Uue=vO,Fue=mM,jue=function(s,p,A,y){try{return y?p(Mve(A)[0],A[1]):p(A)}catch(w){Bue(s,"throw",w)}},aY=d8,hG=LW,Vue=XR,b9=kK,cY=jQ,Pge=fW,C9=e1.Array,w9=nT,Gue=2147483647,Que=/[^\0-\u007E]/,Wre=/[.\u3002\uFF0E\uFF61]/g,Kre="Overflow: input needs wider integers to process",zre=e1.RangeError,Bve=w9(Wre.exec),uY=Math.floor,KZ=String.fromCharCode,Yre=w9("".charCodeAt),xge=w9([].join),M6=w9([].push),Uve=w9("".replace),Lge=w9("".split),Mge=w9("".toLowerCase),Hue=function(s){return s+22+75*(s<26)},Bge=function(s,p,A){var y=0;for(s=A?uY(s/700):s>>1,s+=uY(s/p);s>455;)s=uY(s/35),y+=36;return uY(y+36*s/(s+38))},Fve=function(s){var p,A,y=[],w=(s=function(g_){for(var __=[],w_=0,k_=g_.length;w_<k_;){var Pv=Yre(g_,w_++);if(Pv>=55296&&Pv<=56319&&w_<k_){var f0=Yre(g_,w_++);56320==(64512&f0)?M6(__,((1023&Pv)<<10)+(1023&f0)+65536):(M6(__,Pv),w_--)}else M6(__,Pv)}return __}(s)).length,$=128,j=0,_e=72;for(p=0;p<s.length;p++)(A=s[p])<128&&M6(y,KZ(A));var K=y.length,_i=K;for(K&&M6(y,"-");_i<w;){var _o=Gue;for(p=0;p<s.length;p++)(A=s[p])>=$&&A<_o&&(_o=A);var _u=_i+1;if(_o-$>uY((Gue-j)/_u))throw zre(Kre);for(j+=(_o-$)*_u,$=_o,p=0;p<s.length;p++){if((A=s[p])<$&&++j>Gue)throw zre(Kre);if(A==$){for(var ch=j,_f=36;;){var o_=_f<=_e?1:_f>=_e+26?26:_f-_e;if(ch<o_)break;var i_=ch-o_,u_=36-o_;M6(y,KZ(Hue(o_+i_%u_))),ch=uY(i_/u_),_f+=36}M6(y,KZ(Hue(ch))),_e=Bge(j,_u,_i==K),j=0,_i++}}j++,$++}return xge(y,"")},jve=e1.TypeError,que=zT,Jre=e1,zZ=wL,lY=vO,UM=nT,Uge=Hre,$re=LU,Vve=fte,Wue=JS,Fge=ate,YZ=E8,Kue=$V,zue=FT,Yue=lN,Gve=xP,Jue=xU,Qve=WN,Zre=P2,GL=HP,$ue=BQ,Xre=k2,JZ=jQ,dY=fW,T9=function(s,p){if(s<p)throw jve("Not enough arguments");return s},Zue=zae,Hve=LS("iterator"),hY="URLSearchParams",B4="URLSearchParamsIterator",eie=YZ.set,$U=YZ.getterFor(hY),Xue=YZ.getterFor(B4),jge=zZ("fetch"),tie=zZ("Request"),S9=zZ("Headers"),ele=tie&&tie.prototype,nie=S9&&S9.prototype,qve=Jre.RegExp,tle=Jre.TypeError,Vge=Jre.decodeURIComponent,nle=Jre.encodeURIComponent,Gge=UM("".charAt),rie=UM([].join),fG=UM([].push),rle=UM("".replace),Wve=UM([].shift),iie=UM([].splice),Qge=UM("".split),ile=UM("".slice),ole=/\+/g,oie=Array(4),Kve=function(s){return oie[s-1]||(oie[s-1]=qve("((?:%[\\da-f]{2}){"+s+"})","gi"))},Hge=function(s){try{return Vge(s)}catch(p){return s}},sle=function(s){var p=rle(s,ole," "),A=4;try{return Vge(p)}catch(y){for(;A;)p=rle(p,Kve(A--),Hge);return p}},zve=/[!'()~]|%20/g,ale={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},qge=function(s){return ale[s]},$Z=function(s){return rle(nle(s),zve,qge)},cle=Fge(function(s,p){eie(this,{type:B4,iterator:JZ($U(s).entries),kind:p})},"Iterator",function(){var s=Xue(this),p=s.kind,A=s.iterator.next(),y=A.value;return A.done||(A.value="keys"===p?y.key:"values"===p?y.value:[y.key,y.value]),A},!0),Wge=function(s){this.entries=[],this.url=null,void 0!==s&&(Zre(s)?this.parseObject(s):this.parseQuery("string"==typeof s?"?"===Gge(s,0)?ile(s,1):s:GL(s)))};Wge.prototype={type:hY,bindURL:function(s){this.url=s,this.update()},parseObject:function(s){var p,A,y,w,$,j,_e,K=dY(s);if(K)for(A=(p=JZ(s,K)).next;!(y=lY(A,p)).done;){if($=(w=JZ(Qve(y.value))).next,(j=lY($,w)).done||(_e=lY($,w)).done||!lY($,w).done)throw tle("Expected sequence with length 2");fG(this.entries,{key:GL(j.value),value:GL(_e.value)})}else for(var _i in s)Yue(s,_i)&&fG(this.entries,{key:_i,value:GL(s[_i])})},parseQuery:function(s){if(s)for(var p,A,y=Qge(s,"&"),w=0;w<y.length;)(p=y[w++]).length&&(A=Qge(p,"="),fG(this.entries,{key:sle(Wve(A)),value:sle(rie(A,"="))}))},serialize:function(){for(var s,p=this.entries,A=[],y=0;y<p.length;)s=p[y++],fG(A,$Z(s.key)+"="+$Z(s.value));return rie(A,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var sie=function(){Kue(this,ZZ),eie(this,new Wge(arguments.length>0?arguments[0]:void 0))},ZZ=sie.prototype;if(Vve(ZZ,{append:function(s,p){T9(arguments.length,2);var A=$U(this);fG(A.entries,{key:GL(s),value:GL(p)}),A.updateURL()},delete:function(s){T9(arguments.length,1);for(var p=$U(this),A=p.entries,y=GL(s),w=0;w<A.length;)A[w].key===y?iie(A,w,1):w++;p.updateURL()},get:function(s){T9(arguments.length,1);for(var p=$U(this).entries,A=GL(s),y=0;y<p.length;y++)if(p[y].key===A)return p[y].value;return null},getAll:function(s){T9(arguments.length,1);for(var p=$U(this).entries,A=GL(s),y=[],w=0;w<p.length;w++)p[w].key===A&&fG(y,p[w].value);return y},has:function(s){T9(arguments.length,1);for(var p=$U(this).entries,A=GL(s),y=0;y<p.length;)if(p[y++].key===A)return!0;return!1},set:function(s,p){T9(arguments.length,1);for(var A,y=$U(this),w=y.entries,$=!1,j=GL(s),_e=GL(p),K=0;K<w.length;K++)(A=w[K]).key===j&&($?iie(w,K--,1):($=!0,A.value=_e));$||fG(w,{key:j,value:_e}),y.updateURL()},sort:function(){var s=$U(this);Zue(s.entries,function(p,A){return p.key>A.key?1:-1}),s.updateURL()},forEach:function(s){for(var p,A=$U(this).entries,y=Gve(s,arguments.length>1?arguments[1]:void 0),w=0;w<A.length;)y((p=A[w++]).value,p.key,this)},keys:function(){return new cle(this,"keys")},values:function(){return new cle(this,"values")},entries:function(){return new cle(this,"entries")}},{enumerable:!0}),$re(ZZ,Hve,ZZ.entries,{name:"entries"}),$re(ZZ,"toString",function(){return $U(this).serialize()},{enumerable:!0}),Wue(sie,hY),que({global:!0,forced:!Uge},{URLSearchParams:sie}),!Uge&&zue(S9)){var Kge=UM(nie.has),ule=UM(nie.set),lle=function(s){if(Zre(s)){var p,A=s.body;if(Jue(A)===hY)return p=s.headers?new S9(s.headers):new S9,Kge(p,"content-type")||ule(p,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$ue(s,{body:Xre(0,GL(A)),headers:Xre(0,p)})}return s};if(zue(jge)&&que({global:!0,enumerable:!0,forced:!0},{fetch:function(s){return jge(s,arguments.length>1?lle(arguments[1]):{})}}),zue(tie)){var XZ=function(s){return Kue(this,ele),new tie(s,arguments.length>1?lle(arguments[1]):{})};ele.constructor=XZ,XZ.prototype=ele,que({global:!0,forced:!0},{Request:XZ})}}var tL,aie=zT,eX=N2,zge=Hre,tX=e1,hle=xP,nL=nT,fY=a8.f,pY=LU,Yve=$V,fle=lN,ple=Mue,R9=function(s){var p=Fue(s),A=hG(this),y=arguments.length,w=y>1?arguments[1]:void 0,$=void 0!==w;$&&(w=kge(w,y>2?arguments[2]:void 0));var j,_e,K,_i,_o,_u,ch=Pge(p),_f=0;if(!ch||this==C9&&aY(ch))for(j=Vue(p),_e=A?new this(j):C9(j);j>_f;_f++)_u=$?w(p[_f],_f):p[_f],b9(_e,_f,_u);else for(_o=(_i=cY(p,ch)).next,_e=A?new this:[];!(K=Uue(_o,_i)).done;_f++)_u=$?jue(_i,w,[K.value,_f],!0):K.value,b9(_e,_f,_u);return _e.length=_f,_e},ZU=Kae,Yge=kde.codeAt,B6=HP,$ve=JS,Jge={URLSearchParams:sie,getState:$U},mle=E8.set,nX=E8.getterFor("URL"),$ge=Jge.URLSearchParams,Zge=Jge.getState,pG=tX.URL,Z1=tX.TypeError,rX=tX.parseInt,Xge=Math.floor,gY=Math.pow,FM=nL("".charAt),sT=nL(/./.exec),uO=nL([].join),U4=nL(1..toString),eme=nL([].pop),mY=nL([].push),iX=nL("".replace),tme=nL([].shift),nme=nL("".split),oX=nL("".slice),AY=nL("".toLowerCase),Zve=nL([].unshift),Ale="Invalid scheme",wT="Invalid host",Xve="Invalid port",eye=/[a-z]/i,lO=/[\d+-.a-z]/i,cie=/\d/,tye=/^0x/i,nye=/^[0-7]+$/,rme=/^\d+$/,ime=/^[\da-f]+$/i,rye=/[\0\t\n\r #%/:<>?@[\\\]^|]/,iye=/[\0\t\n\r #/:<>?@[\\\]^|]/,oye=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,mEe=/[\t\n\r]/g,sX=function(s){var p,A,y,w;if("number"==typeof s){for(p=[],A=0;A<4;A++)Zve(p,s%256),s=Xge(s/256);return uO(p,".")}if("object"==typeof s){for(p="",y=function($){for(var j=null,_e=1,K=null,_i=0,_o=0;_o<8;_o++)0!==$[_o]?(_i>_e&&(j=K,_e=_i),K=null,_i=0):(null===K&&(K=_o),++_i);return _i>_e&&(j=K,_e=_i),j}(s),A=0;A<8;A++)w&&0===s[A]||(w&&(w=!1),y===A?(p+=A?":":"::",w=!0):(p+=U4(s[A],16),A<7&&(p+=":")));return"["+p+"]"}return s},uie={},_le=ple({},uie,{" ":1,'"':1,"<":1,">":1,"`":1}),F4=ple({},_le,{"#":1,"?":1,"{":1,"}":1}),ome=ple({},F4,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),bN=function(s,p){var A=Yge(s,0);return A>32&&A<127&&!fle(p,s)?s:encodeURIComponent(s)},j4={ftp:21,file:null,http:80,https:443,ws:80,wss:443},gG=function(s,p){var A;return 2==s.length&&sT(eye,FM(s,0))&&(":"==(A=FM(s,1))||!p&&"|"==A)},sme=function(s){var p;return s.length>1&&gG(oX(s,0,2))&&(2==s.length||"/"===(p=FM(s,2))||"\\"===p||"?"===p||"#"===p)},sye=function(s){return"."===s||"%2e"===AY(s)},lie={},vle={},_Y={},ame={},mG={},vY={},yY={},yle={},EY={},die={},Ele={},Ile={},aX={},cX={},ble={},U6={},O9={},XU={},hie={},F6={},j6={},IY=function(s,p,A){var y,w,$,j=B6(s);if(p){if(w=this.parse(j))throw Z1(w);this.searchParams=null}else{if(void 0!==A&&(y=new IY(A,!0)),w=this.parse(j,null,y))throw Z1(w);($=Zge(new $ge)).bindURL(this),this.searchParams=$}};IY.prototype={type:"URL",parse:function(s,p,A){var y,w,$,j,_e,K=this,_i=p||lie,_o=0,_u="",ch=!1,_f=!1,o_=!1;for(s=B6(s),p||(K.scheme="",K.username="",K.password="",K.host=null,K.port=null,K.path=[],K.query=null,K.fragment=null,K.cannotBeABaseURL=!1,s=iX(s,oye,"")),s=iX(s,mEe,""),y=R9(s);_o<=y.length;){switch(w=y[_o],_i){case lie:if(!w||!sT(eye,w)){if(p)return Ale;_i=_Y;continue}_u+=AY(w),_i=vle;break;case vle:if(w&&(sT(lO,w)||"+"==w||"-"==w||"."==w))_u+=AY(w);else{if(":"!=w){if(p)return Ale;_u="",_i=_Y,_o=0;continue}if(p&&(K.isSpecial()!=fle(j4,_u)||"file"==_u&&(K.includesCredentials()||null!==K.port)||"file"==K.scheme&&!K.host))return;if(K.scheme=_u,p)return void(K.isSpecial()&&j4[K.scheme]==K.port&&(K.port=null));_u="","file"==K.scheme?_i=cX:K.isSpecial()&&A&&A.scheme==K.scheme?_i=ame:K.isSpecial()?_i=yle:"/"==y[_o+1]?(_i=mG,_o++):(K.cannotBeABaseURL=!0,mY(K.path,""),_i=hie)}break;case _Y:if(!A||A.cannotBeABaseURL&&"#"!=w)return Ale;if(A.cannotBeABaseURL&&"#"==w){K.scheme=A.scheme,K.path=ZU(A.path),K.query=A.query,K.fragment="",K.cannotBeABaseURL=!0,_i=j6;break}_i="file"==A.scheme?cX:vY;continue;case ame:if("/"!=w||"/"!=y[_o+1]){_i=vY;continue}_i=EY,_o++;break;case mG:if("/"==w){_i=die;break}_i=XU;continue;case vY:if(K.scheme=A.scheme,w==tL)K.username=A.username,K.password=A.password,K.host=A.host,K.port=A.port,K.path=ZU(A.path),K.query=A.query;else if("/"==w||"\\"==w&&K.isSpecial())_i=yY;else if("?"==w)K.username=A.username,K.password=A.password,K.host=A.host,K.port=A.port,K.path=ZU(A.path),K.query="",_i=F6;else{if("#"!=w){K.username=A.username,K.password=A.password,K.host=A.host,K.port=A.port,K.path=ZU(A.path),K.path.length--,_i=XU;continue}K.username=A.username,K.password=A.password,K.host=A.host,K.port=A.port,K.path=ZU(A.path),K.query=A.query,K.fragment="",_i=j6}break;case yY:if(!K.isSpecial()||"/"!=w&&"\\"!=w){if("/"!=w){K.username=A.username,K.password=A.password,K.host=A.host,K.port=A.port,_i=XU;continue}_i=die}else _i=EY;break;case yle:if(_i=EY,"/"!=w||"/"!=FM(_u,_o+1))continue;_o++;break;case EY:if("/"!=w&&"\\"!=w){_i=die;continue}break;case die:if("@"==w){ch&&(_u="%40"+_u),ch=!0,$=R9(_u);for(var i_=0;i_<$.length;i_++){var u_=$[i_];if(":"!=u_||o_){var g_=bN(u_,ome);o_?K.password+=g_:K.username+=g_}else o_=!0}_u=""}else if(w==tL||"/"==w||"?"==w||"#"==w||"\\"==w&&K.isSpecial()){if(ch&&""==_u)return"Invalid authority";_o-=R9(_u).length+1,_u="",_i=Ele}else _u+=w;break;case Ele:case Ile:if(p&&"file"==K.scheme){_i=U6;continue}if(":"!=w||_f){if(w==tL||"/"==w||"?"==w||"#"==w||"\\"==w&&K.isSpecial()){if(K.isSpecial()&&""==_u)return wT;if(p&&""==_u&&(K.includesCredentials()||null!==K.port))return;if(j=K.parseHost(_u))return j;if(_u="",_i=O9,p)return;continue}"["==w?_f=!0:"]"==w&&(_f=!1),_u+=w}else{if(""==_u)return wT;if(j=K.parseHost(_u))return j;if(_u="",_i=aX,p==Ile)return}break;case aX:if(!sT(cie,w)){if(w==tL||"/"==w||"?"==w||"#"==w||"\\"==w&&K.isSpecial()||p){if(""!=_u){var __=rX(_u,10);if(__>65535)return Xve;K.port=K.isSpecial()&&__===j4[K.scheme]?null:__,_u=""}if(p)return;_i=O9;continue}return Xve}_u+=w;break;case cX:if(K.scheme="file","/"==w||"\\"==w)_i=ble;else{if(!A||"file"!=A.scheme){_i=XU;continue}if(w==tL)K.host=A.host,K.path=ZU(A.path),K.query=A.query;else if("?"==w)K.host=A.host,K.path=ZU(A.path),K.query="",_i=F6;else{if("#"!=w){sme(uO(ZU(y,_o),""))||(K.host=A.host,K.path=ZU(A.path),K.shortenPath()),_i=XU;continue}K.host=A.host,K.path=ZU(A.path),K.query=A.query,K.fragment="",_i=j6}}break;case ble:if("/"==w||"\\"==w){_i=U6;break}A&&"file"==A.scheme&&!sme(uO(ZU(y,_o),""))&&(gG(A.path[0],!0)?mY(K.path,A.path[0]):K.host=A.host),_i=XU;continue;case U6:if(w==tL||"/"==w||"\\"==w||"?"==w||"#"==w){if(!p&&gG(_u))_i=XU;else if(""==_u){if(K.host="",p)return;_i=O9}else{if(j=K.parseHost(_u))return j;if("localhost"==K.host&&(K.host=""),p)return;_u="",_i=O9}continue}_u+=w;break;case O9:if(K.isSpecial()){if(_i=XU,"/"!=w&&"\\"!=w)continue}else if(p||"?"!=w)if(p||"#"!=w){if(w!=tL&&(_i=XU,"/"!=w))continue}else K.fragment="",_i=j6;else K.query="",_i=F6;break;case XU:if(w==tL||"/"==w||"\\"==w&&K.isSpecial()||!p&&("?"==w||"#"==w)){if(".."===(_e=AY(_e=_u))||"%2e."===_e||".%2e"===_e||"%2e%2e"===_e?(K.shortenPath(),"/"==w||"\\"==w&&K.isSpecial()||mY(K.path,"")):sye(_u)?"/"==w||"\\"==w&&K.isSpecial()||mY(K.path,""):("file"==K.scheme&&!K.path.length&&gG(_u)&&(K.host&&(K.host=""),_u=FM(_u,0)+":"),mY(K.path,_u)),_u="","file"==K.scheme&&(w==tL||"?"==w||"#"==w))for(;K.path.length>1&&""===K.path[0];)tme(K.path);"?"==w?(K.query="",_i=F6):"#"==w&&(K.fragment="",_i=j6)}else _u+=bN(w,F4);break;case hie:"?"==w?(K.query="",_i=F6):"#"==w?(K.fragment="",_i=j6):w!=tL&&(K.path[0]+=bN(w,uie));break;case F6:p||"#"!=w?w!=tL&&("'"==w&&K.isSpecial()?K.query+="%27":K.query+="#"==w?"%23":bN(w,uie)):(K.fragment="",_i=j6);break;case j6:w!=tL&&(K.fragment+=bN(w,_le))}_o++}},parseHost:function(s){var p,A,y;if("["==FM(s,0)){if("]"!=FM(s,s.length-1)||!(p=function(w){var $,j,_e,K,_i,_o,_u,ch=[0,0,0,0,0,0,0,0],_f=0,o_=null,i_=0,u_=function(){return FM(w,i_)};if(":"==u_()){if(":"!=FM(w,1))return;i_+=2,o_=++_f}for(;u_();){if(8==_f)return;if(":"!=u_()){for($=j=0;j<4&&sT(ime,u_());)$=16*$+rX(u_(),16),i_++,j++;if("."==u_()){if(0==j||(i_-=j,_f>6))return;for(_e=0;u_();){if(K=null,_e>0){if(!("."==u_()&&_e<4))return;i_++}if(!sT(cie,u_()))return;for(;sT(cie,u_());){if(_i=rX(u_(),10),null===K)K=_i;else{if(0==K)return;K=10*K+_i}if(K>255)return;i_++}ch[_f]=256*ch[_f]+K,2!=++_e&&4!=_e||_f++}if(4!=_e)return;break}if(":"==u_()){if(i_++,!u_())return}else if(u_())return;ch[_f++]=$}else{if(null!==o_)return;i_++,o_=++_f}}if(null!==o_)for(_o=_f-o_,_f=7;0!=_f&&_o>0;)_u=ch[_f],ch[_f--]=ch[o_+_o-1],ch[o_+--_o]=_u;else if(8!=_f)return;return ch}(oX(s,1,-1))))return wT;this.host=p}else if(this.isSpecial()){if(s=function(s){var p,A,y=[],w=Lge(Uve(Mge(s),Wre,"."),".");for(p=0;p<w.length;p++)M6(y,Bve(Que,A=w[p])?"xn--"+Fve(A):A);return xge(y,".")}(s),sT(rye,s)||null===(p=function(w){var $,j,_e,K,_i,_o,_u,ch=nme(w,".");if(ch.length&&""==ch[ch.length-1]&&ch.length--,($=ch.length)>4)return w;for(j=[],_e=0;_e<$;_e++){if(""==(K=ch[_e]))return w;if(_i=10,K.length>1&&"0"==FM(K,0)&&(_i=sT(tye,K)?16:8,K=oX(K,8==_i?1:2)),""===K)_o=0;else{if(!sT(10==_i?rme:8==_i?nye:ime,K))return w;_o=rX(K,_i)}mY(j,_o)}for(_e=0;_e<$;_e++)if(_o=j[_e],_e==$-1){if(_o>=gY(256,5-$))return null}else if(_o>255)return null;for(_u=eme(j),_e=0;_e<j.length;_e++)_u+=j[_e]*gY(256,3-_e);return _u}(s)))return wT;this.host=p}else{if(sT(iye,s))return wT;for(p="",A=R9(s),y=0;y<A.length;y++)p+=bN(A[y],uie);this.host=p}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return fle(j4,this.scheme)},shortenPath:function(){var s=this.path,p=s.length;!p||"file"==this.scheme&&1==p&&gG(s[0],!0)||s.length--},serialize:function(){var s=this,p=s.scheme,A=s.username,y=s.password,w=s.host,$=s.port,j=s.path,_e=s.query,K=s.fragment,_i=p+":";return null!==w?(_i+="//",s.includesCredentials()&&(_i+=A+(y?":"+y:"")+"@"),_i+=sX(w),null!==$&&(_i+=":"+$)):"file"==p&&(_i+="//"),_i+=s.cannotBeABaseURL?j[0]:j.length?"/"+uO(j,"/"):"",null!==_e&&(_i+="?"+_e),null!==K&&(_i+="#"+K),_i},setHref:function(s){var p=this.parse(s);if(p)throw Z1(p);this.searchParams.update()},getOrigin:function(){var s=this.scheme,p=this.port;if("blob"==s)try{return new V6(s.path[0]).origin}catch(A){return"null"}return"file"!=s&&this.isSpecial()?s+"://"+sX(this.host)+(null!==p?":"+p:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(s){this.parse(B6(s)+":",lie)},getUsername:function(){return this.username},setUsername:function(s){var p=R9(B6(s));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var A=0;A<p.length;A++)this.username+=bN(p[A],ome)}},getPassword:function(){return this.password},setPassword:function(s){var p=R9(B6(s));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var A=0;A<p.length;A++)this.password+=bN(p[A],ome)}},getHost:function(){var s=this.host,p=this.port;return null===s?"":null===p?sX(s):sX(s)+":"+p},setHost:function(s){this.cannotBeABaseURL||this.parse(s,Ele)},getHostname:function(){var s=this.host;return null===s?"":sX(s)},setHostname:function(s){this.cannotBeABaseURL||this.parse(s,Ile)},getPort:function(){var s=this.port;return null===s?"":B6(s)},setPort:function(s){this.cannotHaveUsernamePasswordPort()||(""==(s=B6(s))?this.port=null:this.parse(s,aX))},getPathname:function(){var s=this.path;return this.cannotBeABaseURL?s[0]:s.length?"/"+uO(s,"/"):""},setPathname:function(s){this.cannotBeABaseURL||(this.path=[],this.parse(s,O9))},getSearch:function(){var s=this.query;return s?"?"+s:""},setSearch:function(s){""==(s=B6(s))?this.query=null:("?"==FM(s,0)&&(s=oX(s,1)),this.query="",this.parse(s,F6)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var s=this.fragment;return s?"#"+s:""},setHash:function(s){""!=(s=B6(s))?("#"==FM(s,0)&&(s=oX(s,1)),this.fragment="",this.parse(s,j6)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var V6=function(s){var p=Yve(this,uX),y=mle(p,new IY(s,!1,arguments.length>1?arguments[1]:void 0));eX||(p.href=y.serialize(),p.origin=y.getOrigin(),p.protocol=y.getProtocol(),p.username=y.getUsername(),p.password=y.getPassword(),p.host=y.getHost(),p.hostname=y.getHostname(),p.port=y.getPort(),p.pathname=y.getPathname(),p.search=y.getSearch(),p.searchParams=y.getSearchParams(),p.hash=y.getHash())},uX=V6.prototype,s2=function(s,p){return{get:function(){return nX(this)[s]()},set:p&&function(A){return nX(this)[p](A)},configurable:!0,enumerable:!0}};if(eX&&fY(uX,{href:s2("serialize","setHref"),origin:s2("getOrigin"),protocol:s2("getProtocol","setProtocol"),username:s2("getUsername","setUsername"),password:s2("getPassword","setPassword"),host:s2("getHost","setHost"),hostname:s2("getHostname","setHostname"),port:s2("getPort","setPort"),pathname:s2("getPathname","setPathname"),search:s2("getSearch","setSearch"),searchParams:s2("getSearchParams"),hash:s2("getHash","setHash")}),pY(uX,"toJSON",function(){return nX(this).serialize()},{enumerable:!0}),pY(uX,"toString",function(){return nX(this).serialize()},{enumerable:!0}),pG){var cme=pG.createObjectURL,lX=pG.revokeObjectURL;cme&&pY(V6,"createObjectURL",hle(cme,pG)),lX&&pY(V6,"revokeObjectURL",hle(lX,pG))}$ve(V6,"URL"),aie({global:!0,forced:!zge,sham:!eX},{URL:V6});var AG=_U.URL;const G6={[q7.ACCESS_POINT]:{[XS.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[XS.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[XS.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[XS.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[XS.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[XS.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[XS.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[q7.UNILBS]:{[J2.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[J2.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[J2.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[J2.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[J2.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[J2.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[J2.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[J2.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[J2.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[J2.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[J2.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[J2.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[q7.STRING_UID_ALLOCATOR]:{[LK.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[LK.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[LK.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Q6(s){const p=G6[Math.floor(s/1e4)];if(!p)return{desc:"unkonw error",retry:!1};const A=p[s%1e4];if(!A){if(Math.floor(s/1e4)===q7.ACCESS_POINT){const y=s%1e4;if("1"===y.toString()[0])return{desc:s.toString(),retry:!1};if("2"===y.toString()[0])return{desc:s.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return A}const _G={[OI.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[OI.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[OI.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[OI.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[OI.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[OI.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[OI.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[OI.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[OI.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[OI.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[OI.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[OI.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[OI.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[OI.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[OI.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[OI.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[OI.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[OI.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[OI.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[OI.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[OI.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[OI.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[OI.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[OI.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[OI.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[OI.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[OI.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[OI.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[OI.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[OI.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[OI.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[OI.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[OI.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[OI.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[OI.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[OI.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[OI.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[OI.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[OI.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[OI.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[OI.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[OI.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[OI.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[OI.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[OI.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[OI.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[OI.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[OI.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[OI.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[OI.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[OI.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[OI.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[OI.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[OI.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[OI.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[OI.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[OI.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[OI.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function Cle(s){return _G[s]||{desc:"UNKNOW_ERROR_".concat(s),action:"failed"}}var wle={exports:{}};(function(s,p){s.exports=function(){var A={d:function(t0,b_){for(var K_ in b_)A.o(b_,K_)&&!A.o(t0,K_)&&Object.defineProperty(t0,K_,{enumerable:!0,get:b_[K_]})},o:function(t0,b_){return Object.prototype.hasOwnProperty.call(t0,b_)},r:function(t0){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t0,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t0,"__esModule",{value:!0})}},y={};A.r(y),A.d(y,{DataViewIndexOutOfBoundsError:function(){return d0},DecodeError:function(){return k_},Decoder:function(){return BI},EXT_TIMESTAMP:function(){return Pv},Encoder:function(){return o0},ExtData:function(){return __},ExtensionCodec:function(){return a0},decode:function(){return K1},decodeArrayStream:function(){return r3},decodeAsync:function(){return QL},decodeMulti:function(){return ZO},decodeMultiStream:function(){return bS},decodeStream:function(){return Xye},decodeTimestampExtension:function(){return H0},decodeTimestampToTimeSpec:function(){return iI},encode:function(){return q_},encodeDateToTimeSpec:function(){return v0},encodeTimeSpecToTimestamp:function(){return f0},encodeTimestampExtension:function(){return I0}});var w=4294967295;function $(t0,b_,K_){var l0=Math.floor(K_/4294967296),n0=K_;t0.setUint32(b_,l0),t0.setUint32(b_+4,n0)}function j(t0,b_){return 4294967296*t0.getInt32(b_)+t0.getUint32(b_+4)}var _e=function(t0,b_){var K_="function"==typeof Symbol&&t0[Symbol.iterator];if(!K_)return t0;var l0,n0,U0=K_.call(t0),L0=[];try{for(;(void 0===b_||b_-- >0)&&!(l0=U0.next()).done;)L0.push(l0.value)}catch(oI){n0={error:oI}}finally{try{l0&&!l0.done&&(K_=U0.return)&&K_.call(U0)}finally{if(n0)throw n0.error}}return L0},K=function(t0,b_){for(var K_=0,l0=b_.length,n0=t0.length;K_<l0;K_++,n0++)t0[n0]=b_[K_];return t0},_i="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function _o(t0){for(var b_=t0.length,K_=0,l0=0;l0<b_;){var n0=t0.charCodeAt(l0++);if(0!=(4294967168&n0))if(0==(4294965248&n0))K_+=2;else{if(n0>=55296&&n0<=56319&&l0<b_){var U0=t0.charCodeAt(l0);56320==(64512&U0)&&(++l0,n0=((1023&n0)<<10)+(1023&U0)+65536)}K_+=0==(4294901760&n0)?3:4}else K_++}return K_}var _u=_i?new TextEncoder:void 0,ch=_i?"undefined"!=typeof process?200:0:w,_f=(null==_u?void 0:_u.encodeInto)?function(t0,b_,K_){_u.encodeInto(t0,b_.subarray(K_))}:function(t0,b_,K_){b_.set(_u.encode(t0),K_)};function o_(t0,b_,K_){for(var l0=b_,n0=l0+K_,U0=[],L0="";l0<n0;){var oI=t0[l0++];if(0==(128&oI))U0.push(oI);else if(192==(224&oI)){var HI=63&t0[l0++];U0.push((31&oI)<<6|HI)}else if(224==(240&oI)){HI=63&t0[l0++];var Pb=63&t0[l0++];U0.push((31&oI)<<12|HI<<6|Pb)}else if(240==(248&oI)){var z0=(7&oI)<<18|(HI=63&t0[l0++])<<12|(Pb=63&t0[l0++])<<6|63&t0[l0++];z0>65535&&(U0.push((z0-=65536)>>>10&1023|55296),z0=56320|1023&z0),U0.push(z0)}else U0.push(oI);U0.length>=4096&&(L0+=String.fromCharCode.apply(String,K([],_e(U0))),U0.length=0)}return U0.length>0&&(L0+=String.fromCharCode.apply(String,K([],_e(U0)))),L0}var i_,u_=_i?new TextDecoder:null,g_=_i?"undefined"!=typeof process?200:0:w,__=function(t0,b_){this.type=t0,this.data=b_},w_=(i_=function(t0,b_){return(i_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K_,l0){K_.__proto__=l0}||function(K_,l0){for(var n0 in l0)Object.prototype.hasOwnProperty.call(l0,n0)&&(K_[n0]=l0[n0])})(t0,b_)},function(t0,b_){if("function"!=typeof b_&&null!==b_)throw new TypeError("Class extends value "+String(b_)+" is not a constructor or null");function K_(){this.constructor=t0}i_(t0,b_),t0.prototype=null===b_?Object.create(b_):(K_.prototype=b_.prototype,new K_)}),k_=function(t0){function b_(K_){var l0=t0.call(this,K_)||this,n0=Object.create(b_.prototype);return Object.setPrototypeOf(l0,n0),Object.defineProperty(l0,"name",{configurable:!0,enumerable:!1,value:b_.name}),l0}return w_(b_,t0),b_}(Error),Pv=-1;function f0(t0){var b_,K_=t0.sec,l0=t0.nsec;if(K_>=0&&l0>=0&&K_<=17179869183){if(0===l0&&K_<=4294967295){var n0=new Uint8Array(4);return(b_=new DataView(n0.buffer)).setUint32(0,K_),n0}var U0=K_/4294967296,L0=4294967295&K_;return n0=new Uint8Array(8),(b_=new DataView(n0.buffer)).setUint32(0,l0<<2|3&U0),b_.setUint32(4,L0),n0}return n0=new Uint8Array(12),(b_=new DataView(n0.buffer)).setUint32(0,l0),$(b_,4,K_),n0}function v0(t0){var b_=t0.getTime(),K_=Math.floor(b_/1e3),l0=1e6*(b_-1e3*K_),n0=Math.floor(l0/1e9);return{sec:K_+n0,nsec:l0-1e9*n0}}function I0(t0){return t0 instanceof Date?f0(v0(t0)):null}function iI(t0){var b_=new DataView(t0.buffer,t0.byteOffset,t0.byteLength);switch(t0.byteLength){case 4:return{sec:b_.getUint32(0),nsec:0};case 8:var K_=b_.getUint32(0);return{sec:4294967296*(3&K_)+b_.getUint32(4),nsec:K_>>>2};case 12:return{sec:j(b_,4),nsec:b_.getUint32(0)};default:throw new k_("Unrecognized data size for timestamp (expected 4, 8, or 12): "+t0.length)}}function H0(t0){var b_=iI(t0);return new Date(1e3*b_.sec+b_.nsec/1e6)}var Z0={type:Pv,encode:I0,decode:H0},a0=function(){function t0(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Z0)}return t0.prototype.register=function(b_){var K_=b_.type,l0=b_.encode,n0=b_.decode;if(K_>=0)this.encoders[K_]=l0,this.decoders[K_]=n0;else{var U0=1+K_;this.builtInEncoders[U0]=l0,this.builtInDecoders[U0]=n0}},t0.prototype.tryToEncode=function(b_,K_){for(var l0=0;l0<this.builtInEncoders.length;l0++)if(null!=(n0=this.builtInEncoders[l0])&&null!=(U0=n0(b_,K_)))return new __(-1-l0,U0);for(l0=0;l0<this.encoders.length;l0++){var n0,U0;if(null!=(n0=this.encoders[l0])&&null!=(U0=n0(b_,K_)))return new __(l0,U0)}return b_ instanceof __?b_:null},t0.prototype.decode=function(b_,K_,l0){var n0=K_<0?this.builtInDecoders[-1-K_]:this.decoders[K_];return n0?n0(b_,K_,l0):new __(K_,b_)},t0.defaultCodec=new t0,t0}();function j_(t0){return t0 instanceof Uint8Array?t0:ArrayBuffer.isView(t0)?new Uint8Array(t0.buffer,t0.byteOffset,t0.byteLength):t0 instanceof ArrayBuffer?new Uint8Array(t0):Uint8Array.from(t0)}var Z_=function(t0){var b_="function"==typeof Symbol&&Symbol.iterator,K_=b_&&t0[b_],l0=0;if(K_)return K_.call(t0);if(t0&&"number"==typeof t0.length)return{next:function(){return t0&&l0>=t0.length&&(t0=void 0),{value:t0&&t0[l0++],done:!t0}}};throw new TypeError(b_?"Object is not iterable.":"Symbol.iterator is not defined.")},o0=function(){function t0(b_,K_,l0,n0,U0,L0,oI,HI){void 0===b_&&(b_=a0.defaultCodec),void 0===K_&&(K_=void 0),void 0===l0&&(l0=100),void 0===n0&&(n0=2048),void 0===U0&&(U0=!1),void 0===L0&&(L0=!1),void 0===oI&&(oI=!1),void 0===HI&&(HI=!1),this.extensionCodec=b_,this.context=K_,this.maxDepth=l0,this.initialBufferSize=n0,this.sortKeys=U0,this.forceFloat32=L0,this.ignoreUndefined=oI,this.forceIntegerToFloat=HI,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t0.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},t0.prototype.reinitializeState=function(){this.pos=0},t0.prototype.encode=function(b_){return this.reinitializeState(),this.doEncode(b_,1),this.getUint8Array()},t0.prototype.doEncode=function(b_,K_){if(K_>this.maxDepth)throw new Error("Too deep objects in depth "+K_);null==b_?this.encodeNil():"boolean"==typeof b_?this.encodeBoolean(b_):"number"==typeof b_?this.encodeNumber(b_):"string"==typeof b_?this.encodeString(b_):this.encodeObject(b_,K_)},t0.prototype.ensureBufferSizeToWrite=function(b_){var K_=this.pos+b_;this.view.byteLength<K_&&this.resizeBuffer(2*K_)},t0.prototype.resizeBuffer=function(b_){var K_=new ArrayBuffer(b_),l0=new Uint8Array(K_),n0=new DataView(K_);l0.set(this.bytes),this.view=n0,this.bytes=l0},t0.prototype.encodeNil=function(){this.writeU8(192)},t0.prototype.encodeBoolean=function(b_){this.writeU8(!1===b_?194:195)},t0.prototype.encodeNumber=function(b_){Number.isSafeInteger(b_)&&!this.forceIntegerToFloat?b_>=0?b_<128?this.writeU8(b_):b_<256?(this.writeU8(204),this.writeU8(b_)):b_<65536?(this.writeU8(205),this.writeU16(b_)):b_<4294967296?(this.writeU8(206),this.writeU32(b_)):(this.writeU8(207),this.writeU64(b_)):b_>=-32?this.writeU8(224|b_+32):b_>=-128?(this.writeU8(208),this.writeI8(b_)):b_>=-32768?(this.writeU8(209),this.writeI16(b_)):b_>=-2147483648?(this.writeU8(210),this.writeI32(b_)):(this.writeU8(211),this.writeI64(b_)):this.forceFloat32?(this.writeU8(202),this.writeF32(b_)):(this.writeU8(203),this.writeF64(b_))},t0.prototype.writeStringHeader=function(b_){if(b_<32)this.writeU8(160+b_);else if(b_<256)this.writeU8(217),this.writeU8(b_);else if(b_<65536)this.writeU8(218),this.writeU16(b_);else{if(!(b_<4294967296))throw new Error("Too long string: "+b_+" bytes in UTF-8");this.writeU8(219),this.writeU32(b_)}},t0.prototype.encodeString=function(b_){if(b_.length>ch){var K_=_o(b_);this.ensureBufferSizeToWrite(5+K_),this.writeStringHeader(K_),_f(b_,this.bytes,this.pos),this.pos+=K_}else K_=_o(b_),this.ensureBufferSizeToWrite(5+K_),this.writeStringHeader(K_),function(l0,n0,U0){for(var L0=l0.length,oI=U0,HI=0;HI<L0;){var Pb=l0.charCodeAt(HI++);if(0!=(4294967168&Pb)){if(0==(4294965248&Pb))n0[oI++]=Pb>>6&31|192;else{if(Pb>=55296&&Pb<=56319&&HI<L0){var z0=l0.charCodeAt(HI);56320==(64512&z0)&&(++HI,Pb=((1023&Pb)<<10)+(1023&z0)+65536)}0==(4294901760&Pb)?(n0[oI++]=Pb>>12&15|224,n0[oI++]=Pb>>6&63|128):(n0[oI++]=Pb>>18&7|240,n0[oI++]=Pb>>12&63|128,n0[oI++]=Pb>>6&63|128)}n0[oI++]=63&Pb|128}else n0[oI++]=Pb}}(b_,this.bytes,this.pos),this.pos+=K_},t0.prototype.encodeObject=function(b_,K_){var l0=this.extensionCodec.tryToEncode(b_,this.context);if(null!=l0)this.encodeExtension(l0);else if(Array.isArray(b_))this.encodeArray(b_,K_);else if(ArrayBuffer.isView(b_))this.encodeBinary(b_);else{if("object"!=typeof b_)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(b_));this.encodeMap(b_,K_)}},t0.prototype.encodeBinary=function(b_){var K_=b_.byteLength;if(K_<256)this.writeU8(196),this.writeU8(K_);else if(K_<65536)this.writeU8(197),this.writeU16(K_);else{if(!(K_<4294967296))throw new Error("Too large binary: "+K_);this.writeU8(198),this.writeU32(K_)}var l0=j_(b_);this.writeU8a(l0)},t0.prototype.encodeArray=function(b_,K_){var l0,n0,U0=b_.length;if(U0<16)this.writeU8(144+U0);else if(U0<65536)this.writeU8(220),this.writeU16(U0);else{if(!(U0<4294967296))throw new Error("Too large array: "+U0);this.writeU8(221),this.writeU32(U0)}try{for(var L0=Z_(b_),oI=L0.next();!oI.done;oI=L0.next())this.doEncode(oI.value,K_+1)}catch(Pb){l0={error:Pb}}finally{try{oI&&!oI.done&&(n0=L0.return)&&n0.call(L0)}finally{if(l0)throw l0.error}}},t0.prototype.countWithoutUndefined=function(b_,K_){var l0,n0,U0=0;try{for(var L0=Z_(K_),oI=L0.next();!oI.done;oI=L0.next())void 0!==b_[oI.value]&&U0++}catch(HI){l0={error:HI}}finally{try{oI&&!oI.done&&(n0=L0.return)&&n0.call(L0)}finally{if(l0)throw l0.error}}return U0},t0.prototype.encodeMap=function(b_,K_){var l0,n0,U0=Object.keys(b_);this.sortKeys&&U0.sort();var L0=this.ignoreUndefined?this.countWithoutUndefined(b_,U0):U0.length;if(L0<16)this.writeU8(128+L0);else if(L0<65536)this.writeU8(222),this.writeU16(L0);else{if(!(L0<4294967296))throw new Error("Too large map object: "+L0);this.writeU8(223),this.writeU32(L0)}try{for(var oI=Z_(U0),HI=oI.next();!HI.done;HI=oI.next()){var Pb=HI.value,z0=b_[Pb];this.ignoreUndefined&&void 0===z0||(this.encodeString(Pb),this.doEncode(z0,K_+1))}}catch(hI){l0={error:hI}}finally{try{HI&&!HI.done&&(n0=oI.return)&&n0.call(oI)}finally{if(l0)throw l0.error}}},t0.prototype.encodeExtension=function(b_){var K_=b_.data.length;if(1===K_)this.writeU8(212);else if(2===K_)this.writeU8(213);else if(4===K_)this.writeU8(214);else if(8===K_)this.writeU8(215);else if(16===K_)this.writeU8(216);else if(K_<256)this.writeU8(199),this.writeU8(K_);else if(K_<65536)this.writeU8(200),this.writeU16(K_);else{if(!(K_<4294967296))throw new Error("Too large extension object: "+K_);this.writeU8(201),this.writeU32(K_)}this.writeI8(b_.type),this.writeU8a(b_.data)},t0.prototype.writeU8=function(b_){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,b_),this.pos++},t0.prototype.writeU8a=function(b_){var K_=b_.length;this.ensureBufferSizeToWrite(K_),this.bytes.set(b_,this.pos),this.pos+=K_},t0.prototype.writeI8=function(b_){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,b_),this.pos++},t0.prototype.writeU16=function(b_){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,b_),this.pos+=2},t0.prototype.writeI16=function(b_){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,b_),this.pos+=2},t0.prototype.writeU32=function(b_){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,b_),this.pos+=4},t0.prototype.writeI32=function(b_){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,b_),this.pos+=4},t0.prototype.writeF32=function(b_){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,b_),this.pos+=4},t0.prototype.writeF64=function(b_){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,b_),this.pos+=8},t0.prototype.writeU64=function(b_){var K_,l0,n0,L0;this.ensureBufferSizeToWrite(8),L0=n0=b_,(K_=this.view).setUint32(l0=this.pos,n0/4294967296),K_.setUint32(l0+4,L0),this.pos+=8},t0.prototype.writeI64=function(b_){this.ensureBufferSizeToWrite(8),$(this.view,this.pos,b_),this.pos+=8},t0}(),W0={};function q_(t0,b_){return void 0===b_&&(b_=W0),new o0(b_.extensionCodec,b_.context,b_.maxDepth,b_.initialBufferSize,b_.sortKeys,b_.forceFloat32,b_.ignoreUndefined,b_.forceIntegerToFloat).encode(t0)}function _v(t0){return(t0<0?"-":"")+"0x"+Math.abs(t0).toString(16).padStart(2,"0")}var u0=function(){function t0(b_,K_){void 0===b_&&(b_=16),void 0===K_&&(K_=16),this.maxKeyLength=b_,this.maxLengthPerKey=K_,this.hit=0,this.miss=0,this.caches=[];for(var l0=0;l0<this.maxKeyLength;l0++)this.caches.push([])}return t0.prototype.canBeCached=function(b_){return b_>0&&b_<=this.maxKeyLength},t0.prototype.find=function(b_,K_,l0){var n0,U0,L0=this.caches[l0-1];try{e:for(var oI=function(UI){var C1="function"==typeof Symbol&&Symbol.iterator,ZT=C1&&UI[C1],CN=0;if(ZT)return ZT.call(UI);if(UI&&"number"==typeof UI.length)return{next:function(){return UI&&CN>=UI.length&&(UI=void 0),{value:UI&&UI[CN++],done:!UI}}};throw new TypeError(C1?"Object is not iterable.":"Symbol.iterator is not defined.")}(L0),HI=oI.next();!HI.done;HI=oI.next()){for(var Pb=HI.value,z0=Pb.bytes,hI=0;hI<l0;hI++)if(z0[hI]!==b_[K_+hI])continue e;return Pb.str}}catch(UI){n0={error:UI}}finally{try{HI&&!HI.done&&(U0=oI.return)&&U0.call(oI)}finally{if(n0)throw n0.error}}return null},t0.prototype.store=function(b_,K_){var l0=this.caches[b_.length-1],n0={bytes:b_,str:K_};l0.length>=this.maxLengthPerKey?l0[Math.random()*l0.length|0]=n0:l0.push(n0)},t0.prototype.decode=function(b_,K_,l0){var n0=this.find(b_,K_,l0);if(null!=n0)return this.hit++,n0;this.miss++;var U0=o_(b_,K_,l0),L0=Uint8Array.prototype.slice.call(b_,K_,K_+l0);return this.store(L0,U0),U0},t0}(),B0=function(t0,b_){var K_,l0,n0,U0,L0={label:0,sent:function(){if(1&n0[0])throw n0[1];return n0[1]},trys:[],ops:[]};return U0={next:oI(0),throw:oI(1),return:oI(2)},"function"==typeof Symbol&&(U0[Symbol.iterator]=function(){return this}),U0;function oI(HI){return function(Pb){return function(z0){if(K_)throw new TypeError("Generator is already executing.");for(;L0;)try{if(K_=1,l0&&(n0=2&z0[0]?l0.return:z0[0]?l0.throw||((n0=l0.return)&&n0.call(l0),0):l0.next)&&!(n0=n0.call(l0,z0[1])).done)return n0;switch(l0=0,n0&&(z0=[2&z0[0],n0.value]),z0[0]){case 0:case 1:n0=z0;break;case 4:return L0.label++,{value:z0[1],done:!1};case 5:L0.label++,l0=z0[1],z0=[0];continue;case 7:z0=L0.ops.pop(),L0.trys.pop();continue;default:if(!((n0=(n0=L0.trys).length>0&&n0[n0.length-1])||6!==z0[0]&&2!==z0[0])){L0=0;continue}if(3===z0[0]&&(!n0||z0[1]>n0[0]&&z0[1]<n0[3])){L0.label=z0[1];break}if(6===z0[0]&&L0.label<n0[1]){L0.label=n0[1],n0=z0;break}if(n0&&L0.label<n0[2]){L0.label=n0[2],L0.ops.push(z0);break}n0[2]&&L0.ops.pop(),L0.trys.pop();continue}z0=b_.call(t0,L0)}catch(hI){z0=[6,hI],l0=0}finally{K_=n0=0}if(5&z0[0])throw z0[1];return{value:z0[0]?z0[1]:void 0,done:!0}}([HI,Pb])}}},$0=function(t0){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b_,K_=t0[Symbol.asyncIterator];return K_?K_.call(t0):(t0="function"==typeof __values?__values(t0):t0[Symbol.iterator](),b_={},l0("next"),l0("throw"),l0("return"),b_[Symbol.asyncIterator]=function(){return this},b_);function l0(n0){b_[n0]=t0[n0]&&function(U0){return new Promise(function(L0,oI){var HI,Pb,z0;HI=L0,Pb=oI,z0=(U0=t0[n0](U0)).done,Promise.resolve(U0.value).then(function(UI){HI({value:UI,done:z0})},Pb)})}}},A0=function(t0){return this instanceof A0?(this.v=t0,this):new A0(t0)},e_=function(t0,b_,K_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l0,n0=K_.apply(t0,b_||[]),U0=[];return l0={},L0("next"),L0("throw"),L0("return"),l0[Symbol.asyncIterator]=function(){return this},l0;function L0(hI){n0[hI]&&(l0[hI]=function(UI){return new Promise(function(C1,ZT){U0.push([hI,UI,C1,ZT])>1||oI(hI,UI)})})}function oI(hI,UI){try{(C1=n0[hI](UI)).value instanceof A0?Promise.resolve(C1.value.v).then(HI,Pb):z0(U0[0][2],C1)}catch(ZT){z0(U0[0][3],ZT)}var C1}function HI(hI){oI("next",hI)}function Pb(hI){oI("throw",hI)}function z0(hI,UI){hI(UI),U0.shift(),U0.length&&oI(U0[0][0],U0[0][1])}},y_=new DataView(new ArrayBuffer(0)),N_=new Uint8Array(y_.buffer),d0=function(){try{y_.getInt8(0)}catch(t0){return t0.constructor}throw new Error("never reached")}(),q0=new d0("Insufficient data"),jI=new u0,BI=function(){function t0(b_,K_,l0,n0,U0,L0,oI,HI){void 0===b_&&(b_=a0.defaultCodec),void 0===K_&&(K_=void 0),void 0===l0&&(l0=w),void 0===n0&&(n0=w),void 0===U0&&(U0=w),void 0===L0&&(L0=w),void 0===oI&&(oI=w),void 0===HI&&(HI=jI),this.extensionCodec=b_,this.context=K_,this.maxStrLength=l0,this.maxBinLength=n0,this.maxArrayLength=U0,this.maxMapLength=L0,this.maxExtLength=oI,this.keyDecoder=HI,this.totalPos=0,this.pos=0,this.view=y_,this.bytes=N_,this.headByte=-1,this.stack=[]}return t0.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},t0.prototype.setBuffer=function(b_){this.bytes=j_(b_),this.view=function(K_){if(K_ instanceof ArrayBuffer)return new DataView(K_);var l0=j_(K_);return new DataView(l0.buffer,l0.byteOffset,l0.byteLength)}(this.bytes),this.pos=0},t0.prototype.appendBuffer=function(b_){if(-1!==this.headByte||this.hasRemaining(1)){var K_=this.bytes.subarray(this.pos),l0=j_(b_),n0=new Uint8Array(K_.length+l0.length);n0.set(K_),n0.set(l0,K_.length),this.setBuffer(n0)}else this.setBuffer(b_)},t0.prototype.hasRemaining=function(b_){return this.view.byteLength-this.pos>=b_},t0.prototype.createExtraByteError=function(b_){var K_=this.view;return new RangeError("Extra "+(K_.byteLength-this.pos)+" of "+K_.byteLength+" byte(s) found at buffer["+b_+"]")},t0.prototype.decode=function(b_){this.reinitializeState(),this.setBuffer(b_);var K_=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return K_},t0.prototype.decodeMulti=function(b_){return B0(this,function(K_){switch(K_.label){case 0:this.reinitializeState(),this.setBuffer(b_),K_.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return K_.sent(),[3,1];case 3:return[2]}})},t0.prototype.decodeAsync=function(b_){var K_,l0,n0,U0,L0,HI,Pb;return L0=this,void 0,Pb=function(){var z0,hI,UI,C1,ZT,CN,X0,lI;return B0(this,function(ZI){switch(ZI.label){case 0:z0=!1,ZI.label=1;case 1:ZI.trys.push([1,6,7,12]),K_=$0(b_),ZI.label=2;case 2:return[4,K_.next()];case 3:if((l0=ZI.sent()).done)return[3,5];if(UI=l0.value,z0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(UI);try{hI=this.doDecodeSync(),z0=!0}catch(z1){if(!(z1 instanceof d0))throw z1}this.totalPos+=this.pos,ZI.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return C1=ZI.sent(),n0={error:C1},[3,12];case 7:return ZI.trys.push([7,,10,11]),l0&&!l0.done&&(U0=K_.return)?[4,U0.call(K_)]:[3,9];case 8:ZI.sent(),ZI.label=9;case 9:return[3,11];case 10:if(n0)throw n0.error;return[7];case 11:return[7];case 12:if(z0){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,hI]}throw CN=(ZT=this).headByte,X0=ZT.pos,lI=ZT.totalPos,new RangeError("Insufficient data in parsing "+_v(CN)+" at "+lI+" ("+X0+" in the current buffer)")}})},new((HI=void 0)||(HI=Promise))(function(z0,hI){function UI(CN){try{ZT(Pb.next(CN))}catch(X0){hI(X0)}}function C1(CN){try{ZT(Pb.throw(CN))}catch(X0){hI(X0)}}function ZT(CN){var X0;CN.done?z0(CN.value):(X0=CN.value,X0 instanceof HI?X0:new HI(function(lI){lI(X0)})).then(UI,C1)}ZT((Pb=Pb.apply(L0,[])).next())})},t0.prototype.decodeArrayStream=function(b_){return this.decodeMultiAsync(b_,!0)},t0.prototype.decodeStream=function(b_){return this.decodeMultiAsync(b_,!1)},t0.prototype.decodeMultiAsync=function(b_,K_){return e_(this,arguments,function(){var l0,n0,U0,L0,oI,HI,Pb,z0,hI;return B0(this,function(UI){switch(UI.label){case 0:l0=K_,n0=-1,UI.label=1;case 1:UI.trys.push([1,13,14,19]),U0=$0(b_),UI.label=2;case 2:return[4,A0(U0.next())];case 3:if((L0=UI.sent()).done)return[3,12];if(oI=L0.value,K_&&0===n0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(oI),l0&&(n0=this.readArraySize(),l0=!1,this.complete()),UI.label=4;case 4:UI.trys.push([4,9,,10]),UI.label=5;case 5:return[4,A0(this.doDecodeSync())];case 6:return[4,UI.sent()];case 7:return UI.sent(),0==--n0?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((HI=UI.sent())instanceof d0))throw HI;return[3,10];case 10:this.totalPos+=this.pos,UI.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Pb=UI.sent(),z0={error:Pb},[3,19];case 14:return UI.trys.push([14,,17,18]),L0&&!L0.done&&(hI=U0.return)?[4,A0(hI.call(U0))]:[3,16];case 15:UI.sent(),UI.label=16;case 16:return[3,18];case 17:if(z0)throw z0.error;return[7];case 18:return[7];case 19:return[2]}})})},t0.prototype.doDecodeSync=function(){e:for(;;){var b_=this.readHeadByte(),K_=void 0;if(b_>=224)K_=b_-256;else if(b_<192)if(b_<128)K_=b_;else if(b_<144){if(0!=(n0=b_-128)){this.pushMapState(n0),this.complete();continue e}K_={}}else if(b_<160){if(0!=(n0=b_-144)){this.pushArrayState(n0),this.complete();continue e}K_=[]}else{var l0=b_-160;K_=this.decodeUtf8String(l0,0)}else if(192===b_)K_=null;else if(194===b_)K_=!1;else if(195===b_)K_=!0;else if(202===b_)K_=this.readF32();else if(203===b_)K_=this.readF64();else if(204===b_)K_=this.readU8();else if(205===b_)K_=this.readU16();else if(206===b_)K_=this.readU32();else if(207===b_)K_=this.readU64();else if(208===b_)K_=this.readI8();else if(209===b_)K_=this.readI16();else if(210===b_)K_=this.readI32();else if(211===b_)K_=this.readI64();else if(217===b_)l0=this.lookU8(),K_=this.decodeUtf8String(l0,1);else if(218===b_)l0=this.lookU16(),K_=this.decodeUtf8String(l0,2);else if(219===b_)l0=this.lookU32(),K_=this.decodeUtf8String(l0,4);else if(220===b_){if(0!==(n0=this.readU16())){this.pushArrayState(n0),this.complete();continue e}K_=[]}else if(221===b_){if(0!==(n0=this.readU32())){this.pushArrayState(n0),this.complete();continue e}K_=[]}else if(222===b_){if(0!==(n0=this.readU16())){this.pushMapState(n0),this.complete();continue e}K_={}}else if(223===b_){if(0!==(n0=this.readU32())){this.pushMapState(n0),this.complete();continue e}K_={}}else if(196===b_){var n0=this.lookU8();K_=this.decodeBinary(n0,1)}else if(197===b_)n0=this.lookU16(),K_=this.decodeBinary(n0,2);else if(198===b_)n0=this.lookU32(),K_=this.decodeBinary(n0,4);else if(212===b_)K_=this.decodeExtension(1,0);else if(213===b_)K_=this.decodeExtension(2,0);else if(214===b_)K_=this.decodeExtension(4,0);else if(215===b_)K_=this.decodeExtension(8,0);else if(216===b_)K_=this.decodeExtension(16,0);else if(199===b_)n0=this.lookU8(),K_=this.decodeExtension(n0,1);else if(200===b_)n0=this.lookU16(),K_=this.decodeExtension(n0,2);else{if(201!==b_)throw new k_("Unrecognized type byte: "+_v(b_));n0=this.lookU32(),K_=this.decodeExtension(n0,4)}this.complete();for(var U0=this.stack;U0.length>0;){var L0=U0[U0.length-1];if(0===L0.type){if(L0.array[L0.position]=K_,L0.position++,L0.position!==L0.size)continue e;U0.pop(),K_=L0.array}else{if(1===L0.type){if("string"!=(oI=typeof K_)&&"number"!==oI)throw new k_("The type of key must be string or number but "+typeof K_);if("__proto__"===K_)throw new k_("The key __proto__ is not allowed");L0.key=K_,L0.type=2;continue e}if(L0.map[L0.key]=K_,L0.readCount++,L0.readCount!==L0.size){L0.key=null,L0.type=1;continue e}U0.pop(),K_=L0.map}}return K_}var oI},t0.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},t0.prototype.complete=function(){this.headByte=-1},t0.prototype.readArraySize=function(){var b_=this.readHeadByte();switch(b_){case 220:return this.readU16();case 221:return this.readU32();default:if(b_<160)return b_-144;throw new k_("Unrecognized array type byte: "+_v(b_))}},t0.prototype.pushMapState=function(b_){if(b_>this.maxMapLength)throw new k_("Max length exceeded: map length ("+b_+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:b_,key:null,readCount:0,map:{}})},t0.prototype.pushArrayState=function(b_){if(b_>this.maxArrayLength)throw new k_("Max length exceeded: array length ("+b_+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:b_,array:new Array(b_),position:0})},t0.prototype.decodeUtf8String=function(b_,K_){var l0;if(b_>this.maxStrLength)throw new k_("Max length exceeded: UTF-8 byte length ("+b_+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+K_+b_)throw q0;var n0,oI,Pb,U0=this.pos+K_;return n0=this.stateIsMapKey()&&(null===(l0=this.keyDecoder)||void 0===l0?void 0:l0.canBeCached(b_))?this.keyDecoder.decode(this.bytes,U0,b_):b_>g_?(Pb=this.bytes.subarray(oI=U0,oI+b_),u_.decode(Pb)):o_(this.bytes,U0,b_),this.pos+=K_+b_,n0},t0.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},t0.prototype.decodeBinary=function(b_,K_){if(b_>this.maxBinLength)throw new k_("Max length exceeded: bin length ("+b_+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(b_+K_))throw q0;var l0=this.pos+K_,n0=this.bytes.subarray(l0,l0+b_);return this.pos+=K_+b_,n0},t0.prototype.decodeExtension=function(b_,K_){if(b_>this.maxExtLength)throw new k_("Max length exceeded: ext length ("+b_+") > maxExtLength ("+this.maxExtLength+")");var l0=this.view.getInt8(this.pos+K_),n0=this.decodeBinary(b_,K_+1);return this.extensionCodec.decode(n0,l0,this.context)},t0.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t0.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t0.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t0.prototype.readU8=function(){var b_=this.view.getUint8(this.pos);return this.pos++,b_},t0.prototype.readI8=function(){var b_=this.view.getInt8(this.pos);return this.pos++,b_},t0.prototype.readU16=function(){var b_=this.view.getUint16(this.pos);return this.pos+=2,b_},t0.prototype.readI16=function(){var b_=this.view.getInt16(this.pos);return this.pos+=2,b_},t0.prototype.readU32=function(){var b_=this.view.getUint32(this.pos);return this.pos+=4,b_},t0.prototype.readI32=function(){var b_=this.view.getInt32(this.pos);return this.pos+=4,b_},t0.prototype.readU64=function(){var b_,K_,l0=4294967296*(b_=this.view).getUint32(K_=this.pos)+b_.getUint32(K_+4);return this.pos+=8,l0},t0.prototype.readI64=function(){var b_=j(this.view,this.pos);return this.pos+=8,b_},t0.prototype.readF32=function(){var b_=this.view.getFloat32(this.pos);return this.pos+=4,b_},t0.prototype.readF64=function(){var b_=this.view.getFloat64(this.pos);return this.pos+=8,b_},t0}(),WI={};function K1(t0,b_){return void 0===b_&&(b_=WI),new BI(b_.extensionCodec,b_.context,b_.maxStrLength,b_.maxBinLength,b_.maxArrayLength,b_.maxMapLength,b_.maxExtLength).decode(t0)}function ZO(t0,b_){return void 0===b_&&(b_=WI),new BI(b_.extensionCodec,b_.context,b_.maxStrLength,b_.maxBinLength,b_.maxArrayLength,b_.maxMapLength,b_.maxExtLength).decodeMulti(t0)}var FR=function(t0,b_){var K_,l0,n0,U0,L0={label:0,sent:function(){if(1&n0[0])throw n0[1];return n0[1]},trys:[],ops:[]};return U0={next:oI(0),throw:oI(1),return:oI(2)},"function"==typeof Symbol&&(U0[Symbol.iterator]=function(){return this}),U0;function oI(HI){return function(Pb){return function(z0){if(K_)throw new TypeError("Generator is already executing.");for(;L0;)try{if(K_=1,l0&&(n0=2&z0[0]?l0.return:z0[0]?l0.throw||((n0=l0.return)&&n0.call(l0),0):l0.next)&&!(n0=n0.call(l0,z0[1])).done)return n0;switch(l0=0,n0&&(z0=[2&z0[0],n0.value]),z0[0]){case 0:case 1:n0=z0;break;case 4:return L0.label++,{value:z0[1],done:!1};case 5:L0.label++,l0=z0[1],z0=[0];continue;case 7:z0=L0.ops.pop(),L0.trys.pop();continue;default:if(!((n0=(n0=L0.trys).length>0&&n0[n0.length-1])||6!==z0[0]&&2!==z0[0])){L0=0;continue}if(3===z0[0]&&(!n0||z0[1]>n0[0]&&z0[1]<n0[3])){L0.label=z0[1];break}if(6===z0[0]&&L0.label<n0[1]){L0.label=n0[1],n0=z0;break}if(n0&&L0.label<n0[2]){L0.label=n0[2],L0.ops.push(z0);break}n0[2]&&L0.ops.pop(),L0.trys.pop();continue}z0=b_.call(t0,L0)}catch(hI){z0=[6,hI],l0=0}finally{K_=n0=0}if(5&z0[0])throw z0[1];return{value:z0[0]?z0[1]:void 0,done:!0}}([HI,Pb])}}},dT=function(t0){return this instanceof dT?(this.v=t0,this):new dT(t0)},X1=function(t0,b_,K_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l0,n0=K_.apply(t0,b_||[]),U0=[];return l0={},L0("next"),L0("throw"),L0("return"),l0[Symbol.asyncIterator]=function(){return this},l0;function L0(hI){n0[hI]&&(l0[hI]=function(UI){return new Promise(function(C1,ZT){U0.push([hI,UI,C1,ZT])>1||oI(hI,UI)})})}function oI(hI,UI){try{(C1=n0[hI](UI)).value instanceof dT?Promise.resolve(C1.value.v).then(HI,Pb):z0(U0[0][2],C1)}catch(ZT){z0(U0[0][3],ZT)}var C1}function HI(hI){oI("next",hI)}function Pb(hI){oI("throw",hI)}function z0(hI,UI){hI(UI),U0.shift(),U0.length&&oI(U0[0][0],U0[0][1])}};function rR(t0){if(null==t0)throw new Error("Assertion Failure: value must not be null nor undefined")}function n3(t0){return null!=t0[Symbol.asyncIterator]?t0:function(b_){return X1(this,arguments,function(){var K_,l0,U0;return FR(this,function(L0){switch(L0.label){case 0:K_=b_.getReader(),L0.label=1;case 1:L0.trys.push([1,,9,10]),L0.label=2;case 2:return[4,dT(K_.read())];case 3:return l0=L0.sent(),U0=l0.value,l0.done?[4,dT(void 0)]:[3,5];case 4:return[2,L0.sent()];case 5:return rR(U0),[4,dT(U0)];case 6:return[4,L0.sent()];case 7:return L0.sent(),[3,2];case 8:return[3,10];case 9:return K_.releaseLock(),[7];case 10:return[2]}})})}(t0)}function QL(t0,b_){return void 0===b_&&(b_=WI),K_=this,void 0,U0=function(){var L0;return function(oI,HI){var Pb,z0,hI,UI,C1={label:0,sent:function(){if(1&hI[0])throw hI[1];return hI[1]},trys:[],ops:[]};return UI={next:ZT(0),throw:ZT(1),return:ZT(2)},"function"==typeof Symbol&&(UI[Symbol.iterator]=function(){return this}),UI;function ZT(CN){return function(X0){return function(lI){if(Pb)throw new TypeError("Generator is already executing.");for(;C1;)try{if(Pb=1,z0&&(hI=2&lI[0]?z0.return:lI[0]?z0.throw||((hI=z0.return)&&hI.call(z0),0):z0.next)&&!(hI=hI.call(z0,lI[1])).done)return hI;switch(z0=0,hI&&(lI=[2&lI[0],hI.value]),lI[0]){case 0:case 1:hI=lI;break;case 4:return C1.label++,{value:lI[1],done:!1};case 5:C1.label++,z0=lI[1],lI=[0];continue;case 7:lI=C1.ops.pop(),C1.trys.pop();continue;default:if(!((hI=(hI=C1.trys).length>0&&hI[hI.length-1])||6!==lI[0]&&2!==lI[0])){C1=0;continue}if(3===lI[0]&&(!hI||lI[1]>hI[0]&&lI[1]<hI[3])){C1.label=lI[1];break}if(6===lI[0]&&C1.label<hI[1]){C1.label=hI[1],hI=lI;break}if(hI&&C1.label<hI[2]){C1.label=hI[2],C1.ops.push(lI);break}hI[2]&&C1.ops.pop(),C1.trys.pop();continue}lI=HI.call(oI,C1)}catch(ZI){lI=[6,ZI],z0=0}finally{Pb=hI=0}if(5&lI[0])throw lI[1];return{value:lI[0]?lI[1]:void 0,done:!0}}([CN,X0])}}}(this,function(oI){return L0=n3(t0),[2,new BI(b_.extensionCodec,b_.context,b_.maxStrLength,b_.maxBinLength,b_.maxArrayLength,b_.maxMapLength,b_.maxExtLength).decodeAsync(L0)]})},new((n0=void 0)||(n0=Promise))(function(L0,oI){function HI(hI){try{z0(U0.next(hI))}catch(UI){oI(UI)}}function Pb(hI){try{z0(U0.throw(hI))}catch(UI){oI(UI)}}function z0(hI){var UI;hI.done?L0(hI.value):(UI=hI.value,UI instanceof n0?UI:new n0(function(C1){C1(UI)})).then(HI,Pb)}z0((U0=U0.apply(K_,[])).next())});var K_,n0,U0}function r3(t0,b_){void 0===b_&&(b_=WI);var K_=n3(t0);return new BI(b_.extensionCodec,b_.context,b_.maxStrLength,b_.maxBinLength,b_.maxArrayLength,b_.maxMapLength,b_.maxExtLength).decodeArrayStream(K_)}function bS(t0,b_){void 0===b_&&(b_=WI);var K_=n3(t0);return new BI(b_.extensionCodec,b_.context,b_.maxStrLength,b_.maxBinLength,b_.maxArrayLength,b_.maxMapLength,b_.maxExtLength).decodeStream(K_)}function Xye(t0,b_){return void 0===b_&&(b_=WI),bS(t0,b_)}return y}()})(wle),(0,qU.exports)("Int8",function(s){return function(p,A,y){return s(this,p,A,y)}}),(0,qU.exports)("Int16",function(s){return function(p,A,y){return s(this,p,A,y)}}),(0,qU.exports)("Int32",function(s){return function(p,A,y){return s(this,p,A,y)}}),(0,qU.exports)("Uint16",function(s){return function(p,A,y){return s(this,p,A,y)}}),(0,qU.exports)("Uint32",function(s){return function(p,A,y){return s(this,p,A,y)}}),(0,qU.exports)("Float32",function(s){return function(p,A,y){return s(this,p,A,y)}}),(0,qU.exports)("Float64",function(s){return function(p,A,y){return s(this,p,A,y)}});const ume=()=>function(s){const p=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(A=>A.charCodeAt(0));return new Uint8Array(p,0,p.length/Uint8Array.BYTES_PER_ELEMENT)}();let D9,a2;function Tle(){return Tle=f(function*(){if(D9)return D9;const s={};let p,A={};for(p in s)Object.prototype.hasOwnProperty.call(s,p)&&(A[p]=s[p]);let y=!1,w=!1;y="object"==typeof window,w="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let $="";(y||w)&&(w?$=self.location.href:"undefined"!=typeof document&&document.currentScript&&($=document.currentScript.src),$=0!==$.indexOf("blob:")?$.substr(0,$.lastIndexOf("/")+1):""),s.print||console.log.bind(console);const j=s.printErr||console.warn.bind(console);for(p in A)Object.prototype.hasOwnProperty.call(A,p)&&(s[p]=A[p]);let _e;A=null,"object"!=typeof WebAssembly&&Pv("no native wasm support detected");let K=!1;function _i(q_){const _v=s["_"+q_];return _v||Pv("Assertion failed: Cannot call unknown function "+q_+", make sure it is exported"),_v}function _o(q_,_v,u0,B0,$0){const A0={string:function(q0){let jI=0;if(null!=q0&&0!==q0){const BI=1+(q0.length<<2);jI=o0(BI),function(FR,dT,X1,rR){if(!(rR>0))return 0;const QL=X1+rR-1;for(let r3=0;r3<FR.length;++r3){let bS=FR.charCodeAt(r3);if(bS>=55296&&bS<=57343&&(bS=65536+((1023&bS)<<10)|1023&FR.charCodeAt(++r3)),bS<=127){if(X1>=QL)break;dT[X1++]=bS}else if(bS<=2047){if(X1+1>=QL)break;dT[X1++]=192|bS>>6,dT[X1++]=128|63&bS}else if(bS<=65535){if(X1+2>=QL)break;dT[X1++]=224|bS>>12,dT[X1++]=128|bS>>6&63,dT[X1++]=128|63&bS}else{if(X1+3>=QL)break;dT[X1++]=240|bS>>18,dT[X1++]=128|bS>>12&63,dT[X1++]=128|bS>>6&63,dT[X1++]=128|63&bS}}dT[X1]=0}(q0,_f,jI,BI)}return jI},array:function(q0){const jI=o0(q0.length);return ch.set(q0,jI),jI}},e_=_i(q_),y_=[];let N_=0;if(B0)for(let q0=0;q0<B0.length;q0++){const jI=A0[u0[q0]];jI?(0===N_&&(N_=j_()),y_[q0]=jI(B0[q0])):y_[q0]=B0[q0]}let d0=e_.apply(null,y_);return q0=d0,d0="string"===_v?(jI=q0)?function(WI,K1,ZO){const FR=K1+undefined;let dT=K1,X1="";for(;WI[dT]&&!(dT>=FR);)++dT;if(dT-K1>16&&WI.subarray&&_u)return _u.decode(WI.subarray(K1,dT));for(;K1<dT;){let rR=WI[K1++];if(!(128&rR)){X1+=String.fromCharCode(rR);continue}const n3=63&WI[K1++];if(192==(224&rR)){X1+=String.fromCharCode((31&rR)<<6|n3);continue}const QL=63&WI[K1++];if(rR=224==(240&rR)?(15&rR)<<12|n3<<6|QL:(7&rR)<<18|n3<<12|QL<<6|63&WI[K1++],rR<65536)X1+=String.fromCharCode(rR);else{const r3=rR-65536;X1+=String.fromCharCode(55296|r3>>10,56320|1023&r3)}}return X1}(_f,jI):"":"boolean"===_v?Boolean(q0):q0,0!==N_&&Z_(N_),d0;var q0,jI}const _u="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;let ch,_f,o_;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");const i_=[],u_=[],g_=[],__=[];u_.push({func:function(){H0()}});let w_=0,k_=null;function Pv(q_){throw s.onAbort&&s.onAbort(q_),j(q_+=""),K=!0,q_="abort("+q_+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(q_)}s.preloadedImages={},s.preloadedAudios={};let f0="deflate.wasm";var q_;function I0(q_){for(;q_.length>0;){const _v=q_.shift();if("function"==typeof _v){_v(s);continue}const u0=_v.func;"number"==typeof u0?void 0===_v.arg?o_.get(u0)():o_.get(u0)(_v.arg):u0(void 0===_v.arg?null:_v.arg)}}f0.startsWith("data:application/octet-stream;base64,")||(q_=f0,f0=s.locateFile?s.locateFile(q_,$):$+q_);const iI={emscripten_memcpy_big:function(q_,_v,u0){_f.copyWithin(q_,_v,_v+u0)},emscripten_resize_heap:function(q_){Pv("OOM")}};yield f(function*(){const q_={env:iI,wasi_snapshot_preview1:iI};function _v($0,A0){var y_;s.asm=$0.exports,_e=s.asm.memory,y_=_e.buffer,s.HEAP8=ch=new Int8Array(y_),s.HEAP16=new Int16Array(y_),s.HEAP32=new Int32Array(y_),s.HEAPU8=_f=new Uint8Array(y_),s.HEAPU16=new Uint16Array(y_),s.HEAPU32=new Uint32Array(y_),s.HEAPF32=new Float32Array(y_),s.HEAPF64=new Float64Array(y_),o_=s.asm.__indirect_function_table,function(N_){if(w_--,s.monitorRunDependencies&&s.monitorRunDependencies(w_),0==w_&&k_){const d0=k_;k_=null,d0()}}()}if(w_++,s.monitorRunDependencies&&s.monitorRunDependencies(w_),s.instantiateWasm)try{return s.instantiateWasm(q_,_v)}catch($0){return j("Module.instantiateWasm callback failed with error: "+$0),!1}return yield function B0($0){return new sI((A0,e_)=>{A0(ume().buffer)}).then(function(A0){return WebAssembly.instantiate(A0,q_)}).then($0,function(A0){j("failed to asynchronously prepare wasm: "+A0),Pv(A0)})}(function u0($0){_v($0.instance)}),{}})();let H0=s.___wasm_call_ctors=function(){return(H0=s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},Z0=s._malloc=function(){return(Z0=s._malloc=s.asm.malloc).apply(null,arguments)};s._free=function(){return(s._free=s.asm.free).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s._zlibCompress=function(){return(s._zlibCompress=s.asm.zlibCompress).apply(null,arguments)};let a0,j_=s.stackSave=function(){return(j_=s.stackSave=s.asm.stackSave).apply(null,arguments)},Z_=s.stackRestore=function(){return(Z_=s.stackRestore=s.asm.stackRestore).apply(null,arguments)},o0=s.stackAlloc=function(){return(o0=s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};function W0(q_){function _v(){a0||(a0=!0,s.calledRun=!0,K||(I0(u_),I0(g_),s.onRuntimeInitialized&&s.onRuntimeInitialized(),function(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)u0=s.postRun.shift(),__.unshift(u0);var u0;I0(__)}()))}w_>0||(function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)u0=s.preRun.shift(),i_.unshift(u0);var u0;I0(i_)}(),w_>0||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),_v()},1)):_v()))}if(s.ccall=_o,s.cwrap=function(q_,_v,u0,B0){const $0=(u0=u0||[]).every(function(A0){return"number"===A0});return"string"!==_v&&$0&&!B0?_i(q_):function(){return _o(q_,_v,u0,arguments)}},s.allocate=function(q_,_v){let u0;return u0=1==_v?o0(q_.length):Z0(q_.length),_f.set(q_.subarray||q_.slice?q_:new Uint8Array(q_),u0),u0},k_=function q_(){a0||W0(),a0||(k_=q_)},s.run=W0,s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return W0(),D9=s,s}),Tle.apply(this,arguments)}const lme=Uint8Array.BYTES_PER_ELEMENT,cye={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},dme={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},uye={_message:"m",_type:"t",_id:"id"},lye={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let fie;class dye{constructor(){a_(this,"zlibCompress",void 0)}init(){var p=this;return f(function*(){fie||(fie=(yield f(function*(){return a2||(a2=yield function aye(){return Tle.apply(this,arguments)}()),{zlibCompress:y=>{const w=new Uint8Array(y),$=lme*w.byteLength,j=a2._malloc($),_e=a2._malloc(3*$);for(let _o=0;_o<$;_o++)a2.HEAP8[j/lme+_o]=w[_o];const K=a2._zlibCompress(j,$,_e),_i=new Uint8Array(a2.HEAP8.slice(_e,_e+K));return a2._free(j),a2._free(_e),_i}}})()).zlibCompress),p.zlibCompress=fie})()}msgPackCompress(p){return wle.exports.encode(p)}compress(p){const A=Date.now(),y=this.compressKeyAndValue(JSON.parse(JSON.stringify(p))),w=this.msgPackCompress(y),$=this.zlibCompress(w),j=new Uint8Array([49,49,49,50,...Array.from($)]);return{origin:Object.assign({},p),originLength:JSON.stringify(p).length,shortKeyAndValue:y,msgpackSer:w,compressed:j,compressedLength:j.length,time:Date.now()-A}}compressKeyAndValue(p){return this._ObjectKeyCompress(this._typeCompress(p))}_typeCompress(p){const A=p._type;return A?(p._type=lye[A]||A,p):p}_ObjectKeyCompress(p){const A=p._message;if(A){const y=A.stats;y&&(A.stats=this._statsCompress(y)),p._message=this._messageCompress(A)}return this._reportCompress(p)}_statsCompress(p){return this._keyCompress(p,cye)}_messageCompress(p){return this._keyCompress(p,dme)}_reportCompress(p){return this._keyCompress(p,uye)}_keyCompress(p,A){const y={},w=Object.keys(p);return BP(w).call(w,($,j)=>{const _e=p[j];return A[j]?y[A[j]]=_e:y[j]=_e,y},y),y}}class hye extends hS{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(p){super(),a_(this,"lowPriorityQueue",[]),a_(this,"highPriorityQueue",[]),a_(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=p}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(p){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(p):this.lowPriorityQueue.push(p),this.sendMessage()}sendMessage(){const p=this.queue.length;let A=0;A=p<5?15*p:60+3*(p-4),setTimeout(()=>{this._sendMessage()},A)}_sendMessage(){if(!this.queue.length)return;const p=this.AgoraWebSocketManager.getConnection();if(!p||1!==p.readyState)return;const A=this.queue.shift();return this.lowPriorityQueue.includes(A)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),p.send(A.compressed),A}}var Sle;function hme(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}let pie=dI("AgoraWebSocketManager","connectionID")(Sle=class extends hS{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(s){["tryNext","recover"].includes(s)&&this.resetReconnectCount(s),this._reconnectMode=s}get state(){return this._state}set state(s){s!==this._state&&(this._state=s,"reconnecting"===this._state?this.emit(v1.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(v1.CONNECTED):"closed"===this._state?this.emit(v1.CLOSED):"failed"===this._state&&this.emit(v1.FAILED))}resetReconnectCount(s){h_.debug("websocket reset reconnect count, reason: "+s),T0("debug",this,"resetReconnectCount",s,"websocket reset reconnect count, reason: "+s),this.reconnectCount=0}constructor(s,p){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3&&void 0!==arguments[3]&&arguments[3],w=arguments.length>4?arguments[4]:void 0;super(),a_(this,"connectionID",0),a_(this,"currentURLIndex",0),a_(this,"urls",void 0),a_(this,"_reconnectMode","tryNext"),a_(this,"reconnectReason",void 0),a_(this,"_initMutex",new MR("websocket")),a_(this,"name",void 0),a_(this,"_state","closed"),a_(this,"reconnectInterrupter",void 0),a_(this,"websocket",void 0),a_(this,"retryConfig",void 0),a_(this,"reconnectCount",0),a_(this,"onlineReconnectListener",void 0),a_(this,"compressor",new dye),a_(this,"compressorInitStatus","initializing"),a_(this,"compress",void 0),a_(this,"messageSender",void 0),a_(this,"useCompress",void 0),a_(this,"tryDoubleDomain",!1),a_(this,"wsInflateLength",0),a_(this,"wsDeflateLength",0),a_(this,"closeEstablishingWs",()=>{}),a_(this,"store",void 0),a_(this,"joinChannelServiceRecordIndex",void 0),this.store=w,this.name=s,this.retryConfig=function(_o){for(var _u=1;_u<arguments.length;_u++){var ch=null!=arguments[_u]?arguments[_u]:{};_u%2?hme(Object(ch),!0).forEach(function(_f){a_(_o,_f,ch[_f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_o,Object.getOwnPropertyDescriptors(ch)):hme(Object(ch)).forEach(function(_f){Object.defineProperty(_o,_f,Object.getOwnPropertyDescriptor(ch,_f))})}return _o}({},p),this.useCompress=A,this.tryDoubleDomain=y;const{timeout:$,timeoutFactor:j}=p,_e=Math.max(300,Math.floor(3*$/5)),K=Math.max(1.2,Math.floor(8*j)/10);$2.ONLINE&&(this.retryConfig.timeout=_e,this.retryConfig.timeoutFactor=K),tR.on(U8.NETWORK_STATE_CHANGE,(_o,_u)=>{_o!==_u&&(this.resetReconnectCount("network state change: ".concat(_u," -> ").concat(_o)),_o===$2.ONLINE?(this.retryConfig.timeout=_e,this.retryConfig.timeoutFactor=K):(this.retryConfig.timeout=$,this.retryConfig.timeoutFactor=j))});const _i=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const _o=Date.now()-_i;h_.debug("websocket compressor initialized successfully in ".concat(_o,"ms")),T0("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(_o,"ms")),w0.wsCompressorInit({status:!0,ec:null,eventElapse:_o}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(_o=>{this.compressorInitStatus="failed";const _u=_o?_o.message||_o.toString():"Empty Error";h_.debug("websocket compressor failed to initialize because of ".concat(_u)),T0("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(_u)),w0.wsCompressorInit({status:!1,ec:_u,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(s){const p=(A,y)=>{this.urls=s;const w=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new hye(this),this.createWebSocketConnection(w).then(A).catch(y),this.once(v1.CLOSED,()=>y(new U_(D_.WS_DISCONNECT))),this.once(v1.CONNECTED,()=>A())};return this._initMutex.lock().then(A=>new sI((y,w)=>{p(y,w)}).then(()=>{A()}).catch(()=>{A()}))}close(s,p){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const A=this.websocket;p?setTimeout(()=>A.close(),500):A.close(),this.websocket=void 0}this.state=s?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(s,p){if(!this.websocket)return h_.warning("[".concat(this.name,"] can not reconnect, no websocket")),void T0("warning",this,"reconnect","can not reconnect, no websocket");var A;void 0!==s&&(this.reconnectMode=s),h_.debug("[".concat(this.name,"] reconnect is triggered initiative")),T0("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(A=this.store)||void 0===A||A.recordJoinChannelService({status:"error",errors:[new Error(p)]},this.joinChannelServiceRecordIndex));const y=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),y&&y.bind(this.websocket)({code:9999,reason:p})}sendMessageWithJSON(s){const p=JSON.stringify(s);return{compressed:p,compressedLength:p.length,origin:s}}sendMessage(s){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new U_(D_.WS_ABORT,"websocket is not ready");try{let A=null;if("initialized"===this.compressorInitStatus&&this.useCompress&&S0("WEBSOCKET_COMPRESS"))try{A=this.compress(s),this.setWsInflateData(A)}catch(y){A=this.sendMessageWithJSON(s)}else A=this.sendMessageWithJSON(s);p?this.websocket.send(A.compressed):this.messageSender.pushMessage(A)}catch(A){throw new U_(D_.WS_ERR,"send websocket message error"+A.toString())}}setWsInflateData(s){this.wsDeflateLength=this.wsDeflateLength+s.originLength,this.wsInflateLength=this.wsInflateLength+s.compressedLength}getWsInflateData(){const s=this.wsInflateLength,p=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:s,wsDeflateLength:p}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(s,p){var A=this;return f(function*(){return A.connectionID+=1,A.joinChannelServiceRecordIndex=void 0,new sI((y,w)=>{var $;const j=()=>{h_.debug("[".concat(A.name,"] websocket opened:"),s),m6("debug",["WebSocket",A.connectionID],"open",s),A.reconnectMode="retry",A.state="connected",A.resetReconnectCount("opened"),y()},_e=function(){var _o=f(function*(_u){if(h_.debug("[".concat(A.name,"] websocket close ").concat(A.websocket&&A.websocket.url,", code: ").concat(_u.code,", reason: ").concat(_u.reason,", current mode: ").concat(A.reconnectMode)),m6("debug",["WebSocket",A.connectionID],"close",{code:_u.code,reason:_u.reason,url:A.websocket&&A.websocket.url,reconnectMode:A.reconnectMode}),A.reconnectCount<A.retryConfig.maxRetryCount){"connected"===A.state&&(A.reconnectReason=_u.reason,A.state="reconnecting");const ch=x6(A,v1.WILL_RECONNECT,A.reconnectMode)||A.reconnectMode,_f=yield A.reconnectWithAction(ch);if("closed"===A.state)return h_.debug("[".concat(A.connectionID,"] ws is closed, no need to reconnect")),void aI("debug",A,"ws is closed, no need to reconnect");if(!_f)return w(new U_(D_.WS_DISCONNECT,"websocket reconnect failed: ".concat(_u.code))),void A.close(!0);y()}else w(new U_(D_.WS_DISCONNECT,"websocket close: ".concat(_u.code))),A.close()});return function(ch){return _o.apply(this,arguments)}}(),K=_o=>{A.emit(v1.ON_MESSAGE,_o)};A.websocket&&(A.websocket.onclose=null,A.websocket.close()),S0("GATEWAY_WSS_ADDRESS")&&A.name.startsWith("gateway")&&(s=S0("GATEWAY_WSS_ADDRESS")),h_.debug("[".concat(A.name,"] start connect, url: ").concat(s)),aI("debug",A,"start connect, url: ".concat(s));const _i=null===($=A.store)||void 0===$?void 0:$.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});A.chooseBestWebsocketConnection(s,!!p,_i).then(_o=>{var _u;A.websocket=_o,j&&j(),_o.onclose=_e,_o.onmessage=K,null===(_u=A.store)||void 0===_u||_u.recordJoinChannelService({endTs:Date.now(),status:"success"},_i),A.joinChannelServiceRecordIndex=_i}).catch(_o=>{var _u;if(null===(_u=A.store)||void 0===_u||_u.recordJoinChannelService({endTs:Date.now(),status:_o instanceof U_&&_o.code===D_.WS_ABORT?"aborted":"error",errors:[_o]},_i),"closed"!==A.state){if(_o instanceof U_&&_o.code===D_.WS_ERR){const ch=new U_(D_.WS_ERR,"init websocket failed! Error: ".concat(_o.toString()));return h_.error("[".concat(A.name,"]").concat(ch)),T0("error",A,"chooseBestWebsocketConnection",void 0,_o.toString()),void w(ch)}_e&&_e(_o)}else w(new U_(D_.WS_DISCONNECT,"websocket is closed: ".concat(_o.toString())))})})})()}reconnectWithAction(s){var p=arguments,A=this;return f(function*(){let y=!(p.length>1&&void 0!==p[1])||p[1];if(A.reconnectCount>=A.retryConfig.maxRetryCount||!A.urls||"closed"===A.state)return!1;A.onlineReconnectListener||tR.networkState!==$2.OFFLINE||(A.onlineReconnectListener=tR.onlineWaiter&&tR.onlineWaiter.then(()=>{A.onlineReconnectListener=void 0}));let w=!0;if(A.reconnectInterrupter=()=>{w=!1},y){const j=Fae(A.reconnectCount,A.retryConfig);h_.debug("[".concat(A.name,"] wait ").concat(j,"ms to reconnect websocket, mode: ").concat(s)),T0("debug",A,"reconnectWithAction",{timeout:j,action:s}),yield sI.race([cO(j),A.onlineReconnectListener||new sI(()=>{})])}if("closed"===A.state||!w)return!1;A.reconnectCount+=1;const $=function(){var j=f(function*(_e,K){A.emit(v1.RECONNECT_CREATE_CONNECTION,K),yield A.createWebSocketConnection(_e)});return function(K,_i){return j.apply(this,arguments)}}();try{if("retry"===s){const j=A.urls[A.currentURLIndex];A.emit(v1.RECONNECT_WAITTING_FINISH,s),yield $(j,s)}else if("tryNext"===s){if(A.currentURLIndex+=1,A.currentURLIndex>=A.urls.length)return yield A.reconnectWithAction("recover",!1);h_.debug("[".concat(A.name,"] websocket url length: ").concat(A.urls.length," current index: ").concat(A.currentURLIndex)),aI("debug",A,"websocket url length: ".concat(A.urls.length," current index: ").concat(A.currentURLIndex));const j=A.urls[A.currentURLIndex];A.emit(v1.RECONNECT_WAITTING_FINISH,s),yield $(j,s)}else if("recover"===s){h_.debug("[".concat(A.name,"] request new urls")),aI("debug",A,"request new urls"),A.resetReconnectCount("recover mode"),A.emit(v1.RECONNECT_WAITTING_FINISH,s),A.urls=yield o2(A,v1.REQUEST_NEW_URLS),A.currentURLIndex=0;const j=A.urls[A.currentURLIndex];yield $(j,s)}return!0}catch(j){return h_.error("[".concat(A.name,"] reconnect failed"),j.toString()),T0("error",A,"reconnectWithAction",void 0,j.toString()),yield A.reconnectWithAction(s,y)}})()}chooseBestWebsocketConnection(s,p,A){var y=this;return f(function*(){return new sI((w,$)=>{let j=!1;const _e=[];y.closeEstablishingWs=()=>{h_.debug("[choose-best-ws] close establishing websockets"),_e.forEach(i_=>{i_.onclose=null,i_.onopen=null,i_.onmessage=null,i_.close()}),$(new U_(D_.WS_ABORT,"choose best websocket aborted"))};const K=S0("GATEWAY_DOMAINS");let _i;const _o=s.indexOf("?h="),_u=K.find(i_=>-1!==_o?s.includes(i_,_o):s.includes(i_));h_.debug("[choose-best-ws] currentDomain: ",_u,", domains: ",K),T0("debug",y,"chooseBestWebsocketConnection",{currentDomain:_u,domains:K});let ch=!y.tryDoubleDomain||p||!_u;if(!ch&&_u){var _f;const i_=Date.now();try{K.forEach(u_=>{const g_=-1===_o?s.replace(_u,u_):s.substr(0,_o)+s.substr(_o).replace(_u,u_),__=new WebSocket(g_);__.binaryType="arraybuffer",_e.push(__),h_.debug("[choose-best-ws] ws is connecting:",__.url),aI("debug",y,"ws is connecting: ".concat(__.url))})}catch(u_){for(h_.debug("[choose-best-ws] ws create failed, fallback to single url"),aI("debug",y,"ws create failed, fallback to single url"),_e.forEach(g_=>g_.close());_e.length;)_e.pop();ch=!0}null===(_f=y.store)||void 0===_f||_f.recordJoinChannelService({urls:_e.map(u_=>u_.url),service:"gateway"},A),_e.forEach(u_=>{u_.onopen=()=>{if(j)return;const g_=Date.now()-i_;h_.debug("[choose-best-ws] ws open cost ".concat(g_,"ms")),_e.filter(__=>__!==u_).forEach(__=>{h_.debug("[choose-best-ws]close backup websocket: ".concat(__.url)),aI("debug",y,"close backup websocket: ".concat(__.url)),__.close()}),j=!0,w(u_)},u_.onclose=g_=>{_i=g_,!j&&(_e.find(__=>!(__.readyState===WebSocket.CLOSED||__.readyState===WebSocket.CLOSING))||(h_.debug("[choose-best-ws] all websocket is closed"),aI("debug",y,"all websocket is closed"),j=!0,$(_i)))},u_.onmessage=g_=>{h_.debug("[choose-best-ws]".concat(u_.url," onmessage: ").concat(g_.data)),aI("debug",y,"".concat(u_.url," onmessage: ").concat(g_.data))}}),cO(5e3).then(()=>{_e.forEach(u_=>{u_.readyState!==WebSocket.OPEN&&u_.close()})})}if(ch){var o_;let i_;h_.debug("[choose-best-ws] use single url: ",s),aI("debug",y,"use single url: ".concat(s)),null===(o_=y.store)||void 0===o_||o_.recordJoinChannelService({urls:[s],service:"gateway"},A);try{i_=new WebSocket(s),_e.push(i_),i_.binaryType="arraybuffer"}catch(u_){const g_=new U_(D_.WS_ERR,"init websocket failed! Error: ".concat(u_.toString()));return h_.error("[".concat(y.name,"]").concat(g_)),T0("error",y,"chooseBestWebsocketConnection",void 0,u_.toString()),void $(g_)}i_.onopen=()=>{w(i_)},i_.onclose=u_=>{$(u_)},i_.onmessage=u_=>{h_.debug("[choose-best-ws]".concat(i_.url," onmessage: ").concat(u_.data)),aI("debug",y,"".concat(i_.url," onmessage: ").concat(u_.data))},cO(5e3).then(()=>{i_&&i_.readyState!==WebSocket.OPEN&&i_.close()})}}).then(w=>(y.closeEstablishingWs=void 0,w)).catch(w=>{throw y.closeEstablishingWs=void 0,w})})()}})||Sle;class fme{constructor(p){a_(this,"input",[]),a_(this,"size",void 0),this.size=p}add(p){this.input.push(p),this.input.length>this.size&&this.input.splice(0,1)}mean(){var p;return 0===this.input.length?0:BP(p=this.input).call(p,(A,y)=>A+y)/this.input.length}}var Rle;let pme=dI("AgoraRTCSignal","websocket.connectionID")(Rle=class extends hS{get connectionState(){return this._connectionState}set connectionState(s){s!==this._connectionState&&(this._connectionState=s,s===VT.CONNECTED?this.emit(n1.WS_CONNECTED):s===VT.RECONNECTING?this.emit(n1.WS_RECONNECTING,this._websocketReconnectReason):s===VT.CLOSED&&this.emit(n1.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(s,p){super(),a_(this,"_disconnectedReason",void 0),a_(this,"_websocketReconnectReason",void 0),a_(this,"_connectionState",VT.CLOSED),a_(this,"reconnectToken",void 0),a_(this,"websocket",void 0),a_(this,"openConnectionTime",void 0),a_(this,"clientId",void 0),a_(this,"lastMsgTime",Date.now()),a_(this,"uploadCache",[]),a_(this,"uploadCacheInterval",void 0),a_(this,"rttRolling",new fme(5)),a_(this,"pingpongTimer",void 0),a_(this,"wsInflateDataTimer",void 0),a_(this,"pingpongTimeoutCount",0),a_(this,"joinResponse",void 0),a_(this,"multiIpOption",void 0),a_(this,"initError",void 0),a_(this,"spec",void 0),a_(this,"store",void 0),a_(this,"onWebsocketMessage",A=>{if(A.data instanceof ArrayBuffer)return void this.emit(n1.ON_BINARY_DATA,A.data);const y=JSON.parse(A.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(y,"_id")){const w="res-@".concat(y._id);this.emit(w,y._result,y._message)}else if(Object.prototype.hasOwnProperty.call(y,"_type")&&(this.emit(y._type,y._message),y._type===D1.ON_NOTIFICATION&&this.handleNotification(y._message),y._type===D1.ON_USER_BANNED))switch(y._message.error_code){case 14:this.close(YT.UID_BANNED);break;case 15:this.close(YT.IP_BANNED);break;case 16:this.close(YT.CHANNEL_BANNED)}}),this.clientId=s.clientId,this.spec=s,this.store=p,this.websocket=new pie("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,p),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===VT.CONNECTED&&this.reconnect("retry",vN.OFFLINE)})}request(s,p,A,y){var w=this;return f(function*(){const $=pS(6,""),j={_id:$,_type:s,_message:p},_e=w.websocket.connectionID,K=()=>new sI((o_,i_)=>{if(w.connectionState===VT.CONNECTED)return o_();const u_=()=>{w.off(n1.WS_CLOSED,g_),o_()},g_=()=>{w.off(n1.WS_CONNECTED,u_),i_(new U_(D_.WS_ABORT))};w.once(n1.WS_CONNECTED,u_),w.once(n1.WS_CLOSED,g_),s!==r1.PUBLISH&&s!==r1.SUBSCRIBE&&s!==r1.UNSUBSCRIBE&&s!==r1.UNPUBLISH&&s!==r1.CONTROL||w.once(n1.DISCONNECT_P2P,()=>{i_(new U_(D_.DISCONNECT_P2P))}),s===r1.PUBLISH&&w.once(n1.ABORT_P2P_EXECUTION,()=>{i_(new U_(D_.DISCONNECT_P2P))})});if(w.connectionState!==VT.CONNECTING&&w.connectionState!==VT.RECONNECTING||s===r1.JOIN||s===r1.REJOIN||(yield K()),w.websocket.sendMessage(j,!0),y)return;const _i=new sI((o_,i_)=>{let u_=!1;const g_=(w_,k_)=>{u_=!0,o_({isSuccess:"success"===w_,message:k_||{}}),w.off(n1.WS_CLOSED,__),w.off(n1.WS_RECONNECTING,__),w.emit(n1.REQUEST_SUCCESS,s,p)};w.once("res-@".concat($),g_);const __=()=>{i_(new U_(D_.WS_ABORT,"type: ".concat(s))),w.off(n1.WS_CLOSED,__),w.off(n1.WS_RECONNECTING,__),w.off("res-@".concat($),g_)};w.once(n1.WS_CLOSED,__),w.once(n1.WS_RECONNECTING,__),cO(S0("SIGNAL_REQUEST_TIMEOUT")).then(()=>{w.websocket.connectionID!==_e||u_||(h_.warning("ws request timeout, type: ".concat(s)),aI("warning",w,"ws request timeout, type: ".concat(s)),w.emit(n1.REQUEST_TIMEOUT,s,p))})});let _o=null;try{_o=yield _i}catch(o_){if(w.connectionState===VT.CLOSED||s===r1.LEAVE)throw new U_(D_.WS_ABORT);return!w.spec.forceWaitGatewayResponse||A?o_.throw():s===r1.JOIN||s===r1.REJOIN?null:(yield K(),yield w.request(s,p))}if(_o.isSuccess)return _o.message;const _u=Number(_o.message.error_code||_o.message.code),ch=Cle(_u),_f=new U_(D_.UNEXPECTED_RESPONSE,"".concat(ch.desc,": ").concat(_o.message.error_str),{code:_u,data:_o.message});return"success"===ch.action?_o.message:(h_.warning("[".concat(w.websocket.connectionID,"] unexpected response from type ").concat(s,", error_code: ").concat(_u,", message: ").concat(ch.desc,", action: ").concat(ch.action)),aI("warning",w,"unexpected response from type ".concat(s,", error_code: ").concat(_u,", message: ").concat(ch.desc,", action: ").concat(ch.action)),_u===OI.ERR_TOO_MANY_BROADCASTERS?((s===r1.JOIN||s===r1.REJOIN)&&(w.initError=_f,w.close()),_f.throw()):"failed"===ch.action?_f.throw():"quit"===ch.action?(w.initError=_f,w.close(),_f.throw()):(_u===OI.ERR_JOIN_BY_MULTI_IP?(w.multiIpOption=_o.message.option,h_.warning("[".concat(w.clientId,"] detect multi ip, recover")),aI("warning",w,"detect multi ip, recover"),w.reconnect("recover",vN.MULTI_IP)):w.reconnect(ch.action,vN.SERVER_ERROR),s===r1.JOIN||s===r1.REJOIN?null:yield w.request(s,p)))})()}waitMessage(s,p){return new sI(A=>{const y=w=>{(!p||p(w))&&(this.off(s,y),A(w))};this.on(s,y)})}upload(s,p){const A={_type:s,_message:p};try{this.websocket.sendMessage(A)}catch(y){const w=S0("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(A),this.uploadCache.length>w&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==VT.CONNECTED)return;const $=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload($._type,$._message)},S0("UPLOAD_CACHE_INTERVAL")||2e3))}}send(s,p){this.websocket.sendMessage({_type:s,_message:p})}init(s,p){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new sI((A,y)=>{this.once(n1.WS_CONNECTED,()=>A(this.joinResponse)),this.once(n1.WS_CLOSED,()=>y(this.initError||new U_(D_.WS_ABORT))),this.connectionState=VT.CONNECTING,this.websocket.init(s).catch(y),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{p&&void 0===this.openConnectionTime&&(h_.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),y(new U_(D_.INIT_WEBSOCKET_TIMEOUT)))},S0("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(s){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=s||YT.LEAVE,this.connectionState=VT.CLOSED,h_.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),s===YT.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new pie("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var s=this;return f(function*(){if(!s.joinResponse){s.emit(n1.ABORT_P2P_EXECUTION);const p=yield o2(s,n1.REQUEST_JOIN_INFO),A=yield s.request(r1.JOIN,p);if(!A)return s.emit(n1.REPORT_JOIN_GATEWAY,D_.TIMEOUT,s.url||""),!1;s.joinResponse=A,s.emit(n1.JOIN_RESPONSE,s.joinResponse),s.reconnectToken=s.joinResponse.rejoin_token}return s.connectionState=VT.CONNECTED,s.pingpongTimer&&window.clearInterval(s.pingpongTimer),s.pingpongTimer=window.setInterval(s.handlePingPong.bind(s),3e3),!0})()}rejoin(){var s=this;return f(function*(){if(!s.reconnectToken)throw new U_(D_.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const p=E9(s,n1.REQUEST_REJOIN_INFO);p.token=s.reconnectToken;const A=yield s.request(r1.REJOIN,p);return!!A&&(s.connectionState=VT.CONNECTED,s.pingpongTimer&&window.clearInterval(s.pingpongTimer),s.pingpongTimer=window.setInterval(s.handlePingPong.bind(s),3e3),A.peers&&A.peers.forEach(y=>{s.emit(D1.ON_USER_ONLINE,{uid:y.uid}),s.emit(y.audio_mute?D1.MUTE_AUDIO:D1.UNMUTE_AUDIO,{uid:y.uid}),s.emit(y.video_mute?D1.MUTE_VIDEO:D1.UNMUTE_VIDEO,{uid:y.uid}),s.emit(y.audio_enable_local?D1.ENABLE_LOCAL_AUDIO:D1.DISABLE_LOCAL_AUDIO,{uid:y.uid}),s.emit(y.video_enable_local?D1.ENABLE_LOCAL_VIDEO:D1.DISABLE_LOCAL_VIDEO,{uid:y.uid}),y.audio||y.video||s.emit(D1.ON_REMOVE_STREAM,{uid:y.uid,uint_id:y.uint_id}),y.audio&&s.emit(D1.ON_ADD_AUDIO_STREAM,{uid:y.uid,uint_id:y.uint_id,audio:!0,ssrcId:y.audio_ssrc}),y.video&&s.emit(D1.ON_ADD_VIDEO_STREAM,{uid:y.uid,uint_id:y.uint_id,video:!0,ssrcId:y.video_ssrc})}),!0)})()}reconnect(s,p){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(s,p)}handleNotification(s){h_.debug("[".concat(this.clientId,"] receive notification: "),s),T0("debug",this,"handleNotification",s);const p=Cle(s.code);if("success"!==p.action)return"failed"===p.action?(h_.error("[".concat(this.clientId,"] ignore error: "),p.desc),void aI("error",this,"ignore error: ".concat(p.desc))):"quit"===p.action?("ERR_REPEAT_JOIN_CHANNEL"===p.desc&&this.close(YT.UID_BANNED),void this.close()):void this.reconnect(p.action,vN.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const s=S0("PING_PONG_TIME_OUT"),p=Date.now();this.pingpongTimeoutCount>=s&&(h_.warning("PINGPONG Timeout. Last Socket Message: ".concat(p-this.lastMsgTime,"ms")),aI("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(p-this.lastMsgTime,"ms")),p-this.lastMsgTime>S0("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",vN.TIMEOUT):this.request(r1.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const A=Date.now()-p;this.rttRolling.add(A),S0("REPORT_STATS")&&this.send(r1.PING_BACK,{pingpongElapse:A})}).catch(A=>{})}handleWsInflateData(){const{wsInflateLength:s,wsDeflateLength:p}=this.websocket.getWsInflateData();0!==s&&0!==p&&this.upload(yN.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:p,ws_inflate_length:s})}handleWebsocketEvents(){this.websocket.on(v1.RECONNECT_WAITTING_FINISH,s=>{this.emit(n1.WS_RECONNECT_WAITTING_FINISH,s)}),this.websocket.on(v1.RECONNECT_CREATE_CONNECTION,s=>{this.emit(n1.WS_RECONNECT_CREATE_CONNECTION,s)}),this.websocket.on(v1.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(v1.CLOSED,()=>{this.connectionState=VT.CLOSED}),this.websocket.on(v1.FAILED,()=>{this._disconnectedReason=YT.NETWORK_ERROR,this.connectionState=VT.CLOSED}),this.websocket.on(v1.RECONNECTING,s=>{this._websocketReconnectReason=s,this.joinResponse=void 0,this.connectionState=this.connectionState===VT.CONNECTED?VT.RECONNECTING:VT.CONNECTING}),this.websocket.on(v1.WILL_RECONNECT,(s,p)=>{if(E9(this,n1.IS_P2P_DISCONNECTED)&&"retry"===s)return h_.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),aI("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(n1.NEED_RENEW_SESSION),this.emit(n1.DISCONNECT_P2P),p("tryNext");"retry"!==s&&(h_.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(s)),aI("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(s)),this.reconnectToken=void 0,this.emit(n1.NEED_RENEW_SESSION),this.emit(n1.DISCONNECT_P2P)),p(s)}),this.websocket.on(v1.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(s=>{h_.warning("[".concat(this.clientId,"] rejoin failed ").concat(s)),T0("warning",this,"rejoin",void 0,s.toString()),this.reconnect("tryNext",vN.SERVER_ERROR)}):this.join().catch(s=>{if(this.emit(n1.REPORT_JOIN_GATEWAY,s.message||s.code,this.url||""),s instanceof U_&&s.code===D_.UNEXPECTED_RESPONSE&&s.data.code===OI.ERR_NO_AUTHORIZED)return h_.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),aI("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",vN.SERVER_ERROR);h_.error("[".concat(this.clientId,"] join gateway request failed"),s.toString()),T0("error",this,"join",void 0,s.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",vN.SERVER_ERROR):(this.initError=s,this.close())})}),this.websocket.on(v1.REQUEST_NEW_URLS,(s,p)=>{o2(this,n1.REQUEST_RECOVER,this.multiIpOption).then(s).catch(p)})}})||Rle;var Ole;function gme(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function vG(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?gme(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):gme(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}const bY=new Map;let fye=dI("AgoraRTCGateway","store.clientId")(Ole=class extends hS{get state(){return this._state}set state(s){if(s===this._state)return;const p=this._state;this._state=s,"DISCONNECTED"===s&&this._disconnectedReason?this.emit(JT.CONNECTION_STATE_CHANGE,s,p,this._disconnectedReason):this.emit(JT.CONNECTION_STATE_CHANGE,s,p)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(s){h_.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(s)),T0("debug",this,"joinGatewayStartTime",s,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(s)),this._joinGatewayStartTime=s}constructor(s,p){super(),a_(this,"store",void 0),a_(this,"joinInfo",void 0),a_(this,"key",void 0),a_(this,"signal",void 0),a_(this,"role",void 0),a_(this,"inChannelInfo",{joinAt:null,duration:0}),a_(this,"spec",void 0),a_(this,"_state","DISCONNECTED"),a_(this,"_statsCollector",void 0),a_(this,"_disconnectedReason",void 0),a_(this,"isSignalRecover",!1),a_(this,"hasChangeBGPAddress",!1),a_(this,"trafficStatsInterval",void 0),a_(this,"networkQualityInterval",void 0),a_(this,"_joinGatewayStartTime",0),a_(this,"_signalTimeout",!1),a_(this,"_clientRoleOptions",void 0),a_(this,"_isProactiveJoin",!1),this.store=s,this.spec=p,this.signal=new pme(vG(vG({},p),{},{retryConfig:p.websocketRetryConfig}),s),this._statsCollector=p.statsCollector,this.role=p.role||"audience",this._clientRoleOptions=p.clientRoleOptions,this.handleSignalEvents()}join(s,p,A){var y=this;return f(function*(){y.store.joinGatewayStart(),"disabled"!==s.cloudProxyServer&&(y.hasChangeBGPAddress=!0);const w=Date.now();let $=bY.get(s.cname);if($||($=new Map,bY.set(s.cname,$)),y._isProactiveJoin=!0,$.has(s.uid)){const _i=new U_(D_.UID_CONFLICT);throw w0.joinGateway(s.sid,{lts:w,succ:!1,ec:_i.message,addr:null,uid:s.uid,cid:s.cid,firstSuccess:y._isProactiveJoin,avoidJoinStartTime:y.store.avoidJoinStart,isProxy:!!s.proxyServer}),y._isProactiveJoin=!1,_i}$.set(s.uid,!0),y.joinInfo=s,y.key=p;const j=s.proxyServer,_e=s.gatewayAddrs.map(j?_i=>{const _o=_i.address.split(":");return"wss://".concat(j,"/ws/?h=").concat(_o[0],"&p=").concat(_o[1])}:_i=>"wss://".concat(_i.address));let K=0;y.joinGatewayStartTime=w;try{K=(yield y.signal.init(_e,A)).uid}catch(_i){throw _i&&_i.code===D_.INIT_WEBSOCKET_TIMEOUT?(h_.warning("[".concat(y.store.clientId,"] User join failed"),_i.toString()),_i):(h_.error("[".concat(y.store.clientId,"] User join failed"),_i.toString()),T0("error",y,"join",void 0,_i.toString()),w0.joinGateway(s.sid,{lts:w,succ:!1,ec:_i.message,addr:y.signal.url,uid:s.uid,cid:s.cid,firstSuccess:y._isProactiveJoin,avoidJoinStartTime:y.store.avoidJoinStart,isProxy:!!j}),y._isProactiveJoin=!1,$.delete(s.uid),y.signal.close(),_i)}return y.state="CONNECTED",y.inChannelInfo.joinAt=Date.now(),h_.debug("[".concat(y.store.clientId,"] Connected to gateway server")),T0("debug",y,"join",void 0,"success"),y.trafficStatsInterval=window.setInterval(()=>{y.updateTrafficStats().catch(_i=>{h_.warning("[".concat(y.store.clientId,"] get traffic stats error"),_i.toString()),T0("warning",y,"trafficStatsInterval",void 0,_i.toString())})},3e3),y.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?y.emit(JT.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):y.emit(JT.NETWORK_QUALITY,y._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===y.state&&y._statsCollector.trafficStats?{uplinkNetworkQuality:wge(y._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:wge(y._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),y.store.joinGatewayEnd(),K})()}leave(){var s=arguments,p=this;return f(function*(){let A=s.length>0&&void 0!==s[0]&&s[0],y=s.length>1?s[1]:void 0;if("DISCONNECTED"!==p.state){y!==YT.FALLBACK&&(p.state="DISCONNECTING");try{A||p.signal.connectionState!==VT.CONNECTED||(yield(w=p.signal.request(r1.LEAVE,void 0,!0),3e3,sI.race([w,kve(3e3)])))}catch(w){h_.warning("[".concat(p.store.clientId,"] leave request failed, ignore"),w),aI("warning",p,"leave request failed, ignore, ".concat(w.toString()))}p.signal.close(y),y!==YT.FALLBACK&&(p.state="DISCONNECTED"),p.reset()}var w})()}publish(s,p,A){var y=this;return f(function*(){if("CONNECTED"!==y.state&&"RECONNECTING"!==y.state)throw new U_(D_.INVALID_OPERATION,"can not publish when connection state is ".concat(y.state));const w={state:"offer",p2p_id:y.store.p2pId,ortc:p,mode:y.spec.mode,extend:S0("PUB_EXTEND")};try{return(yield y.signal.request(r1.PUBLISH,w,!0))._message}catch($){if(A&&$.data&&$.data.code===OI.ERR_PUBLISH_REQUEST_INVALID)return h_.warning("[".concat(y.store.clientId,"] receive publish error code, retry"),$.toString()),aI("warning",y,"receive publish error code, retry, ".concat($.toString())),yield y.tryUnpubBeforeRepub(s,p),y.publish(s,p,!1);throw $}})()}unpublish(s,p){var A=this;return f(function*(){try{if("CONNECTED"!==A.state&&"RECONNECTING"!==A.state)throw new U_(D_.INVALID_OPERATION,"can not publish when connection state is ".concat(A.state));yield A.signal.request(r1.UNPUBLISH,{stream_id:p,ortc:s},!0)}catch(y){h_.warning("unpublish warning: ",y),T0("warning",A,"unpublish",void 0,y.toString())}})()}subscribe(s,p,A){var y=this;return f(function*(){if("CONNECTED"!==y.state&&"RECONNECTING"!==y.state)throw new U_(D_.INVALID_OPERATION,"can not subscribe when connection state is ".concat(y.state));const w={stream_id:s,stream_type:p.stream_type,mode:y.spec.mode,codec:y.spec.codec,p2p_id:y.store.p2pId,tcc:!!S0("SUBSCRIBE_TCC"),extend:S0("SUB_EXTEND"),ssrcId:p.ssrcId};try{return(yield y.signal.request(r1.SUBSCRIBE,w,!0))._message}catch($){if(A&&$.data&&$.data.code===OI.ERR_SUBSCRIBE_REQUEST_INVALID)return h_.warning("[".concat(y.store.clientId,"] receiver subscribe error code, retry"),$.toString()),aI("warning",y,"receiver subscribe error code, retry"),yield y.tryUnsubBeforeResub(s,p),yield y.subscribe(s,p,!1);throw $}})()}subscribeAll(s,p){var A=this;return f(function*(){if("CONNECTED"!==A.state&&"RECONNECTING"!==A.state)throw new U_(D_.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(A.state));const y={p2p_id:A.store.p2pId,users:s,dtx:!1};try{return yield A.signal.request(r1.SUBSCRIBE_STREAMS,y,!0)}catch(w){if(p&&w.data&&w.data.code===OI.ERR_SUBSCRIBE_REQUEST_INVALID)return h_.warning("[".concat(A.store.clientId,"] receiver massSubscribe error code, retry"),w.toString()),aI("warning",A,"receiver massSubscribe error code, retry"),yield A.tryMassUnsubBeforeResub(s),yield A.subscribeAll(s,!1);throw w}})()}setVideoProfile(s){var p=this;return f(function*(){const A=function(y){if(!(y.bitrateMax&&y.bitrateMin&&y.frameRate&&y.height&&y.width))return;let w=y.frameRate,$=y.width,j=y.height,_e=!0;return"number"!=typeof w&&(w=w.exact||w.ideal||w.max||w.min||0,w||(_e=!1)),"number"!=typeof $&&($=$.exact||$.ideal||$.max||$.min||0,$||(_e=!1)),"number"!=typeof j&&(j=j.exact||j.ideal||j.max||j.min||0,w||(_e=!1)),_e?{stream_type:0,width:$,height:j,fps:w,start_bps:1e3*y.bitrateMax,min_bps:1e3*y.bitrateMin,target_bps:1e3*y.bitrateMax}:void 0}(s);return A?p.signal.request(r1.SET_VIDEO_PROFILE,A):(h_.debug("[".concat(p.store.clientId,"] encoder config is not complete, do not report to gateway")),void aI("debug",p,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(s,p){var A=this;return f(function*(){try{yield A.signal.request(r1.UNSUBSCRIBE,{p2p_id:A.store.p2pId,ortc:s,stream_id:p},!0)}catch(y){h_.warning("unsubscribe warning: ",y),T0("warning",A,"unsubscribe",void 0,y.toString())}})()}massUnsubscribe(s){var p=this;return f(function*(){try{yield p.signal.request(r1.UNSUBSCRIBE_STREAMS,s,!0)}catch(A){h_.warning("unsubscribeAll warning: ",A),T0("warning",p,"unsubscribeAll",void 0,A.toString())}})()}reconnectPC(s){var p=this;return f(function*(){const{iceParameters:A,dtlsParameters:y,rtpCapabilities:w}=s,$=yield p.signal.request(r1.CONNECT_PC,{p2p_id:p.store.p2pId,stream_id:p.store.uid,ortc:{iceParameters:A,dtlsParameters:y,rtpCapabilities:w}},!0),j=p.getGatewayIpPort();return{gatewayEstablishParams:$,gatewayIP:null==j?void 0:j.ip,gatewayPort:null==j?void 0:j.port}})()}getGatewayInfo(){return this.signal.request(r1.GATEWAY_INFO)}renewToken(s){return this.signal.request(r1.RENEW_TOKEN,s)}setClientRole(s,p){var A=this;return f(function*(){if(p&&(A._clientRoleOptions=Object.assign({},p)),"CONNECTED"!==A.state)return void(A.role=s);let y;y="audience"===s?A._clientRoleOptions&&A._clientRoleOptions.level?A._clientRoleOptions.level:2:0,yield A.signal.request(r1.SET_CLIENT_ROLE,{role:s,level:y}),A.role=s})()}setRemoteVideoStreamType(s,p){var A=this;return f(function*(){yield A.signal.request(r1.SWITCH_VIDEO_STREAM,{stream_id:s,stream_type:p})})()}setDefaultRemoteVideoStreamType(s){var p=this;return f(function*(){yield p.signal.request(r1.DEFAULT_VIDEO_STREAM,{stream_type:s})})()}setStreamFallbackOption(s,p){var A=this;return f(function*(){yield A.signal.request(r1.SET_FALLBACK_OPTION,{stream_id:s,fallback_type:p})})()}pickSVCLayer(s,p){var A=this;return f(function*(){yield A.signal.request(r1.PICK_SVC_LAYER,{stream_id:s,spatial_layer:p.spatialLayer,temporal_layer:p.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),vG({},this.inChannelInfo)}getGatewayVersion(){var s=this;return f(function*(){return(yield s.signal.request(r1.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const s=bY.get(this.joinInfo.cname);s&&s.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const s=function(p){const A=p.match(/(wss\:\/\/)?([^:]+):(\d+)/);return A?{username:ZS.username,password:ZS.password,turnServerURL:A[2],tcpport:parseInt(A[3])+30,udpport:parseInt(A[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],s&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(vG(vG({},ZS),{},{turnServerURL:s.turnServerURL,tcpport:s.tcpport,udpport:s.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var s=this;return f(function*(){if("CONNECTED"!==s.state)return;const p=yield s.signal.request(r1.TRAFFIC_STATS,void 0,!0);p.timestamp=Date.now(),p.peer_delay.forEach(A=>{const y=s._statsCollector.trafficStats&&s._statsCollector.trafficStats.peer_delay.find(w=>w.peer_uid===A.peer_uid);y&&y.B_st!==A.B_st&&eL(()=>{s.emit(JT.STREAM_TYPE_CHANGE,A.peer_uid,A.B_st)})}),s._statsCollector.updateTrafficStats(p)})()}getJoinMessage(s){if(!this.joinInfo||!this.key)throw new U_(D_.UNEXPECTED_ERROR,"can not generate join message, no join info");const p=Object.assign({},this.joinInfo.apResponse);let A=S0("REPORT_APP_SCENARIO");if("string"!=typeof A)try{A=JSON.stringify(A)}catch(w){A=void 0}A&&A.length>128&&(A=void 0);const y=vG({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:GO,browser:navigator.userAgent,process_id:S0("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:p,extend:S0("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:A,attributes:{userAttributes:{enablePublishedUserList:S0("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:S0("MAX_SUBSCRIPTION")}}},s);return this.joinInfo.stringUid&&(y.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(y.aes_mode=this.joinInfo.aesmode,S0("ENCRYPT_AES")?(y.aes_secret=this.joinInfo.aespassword,y.aes_encrypt=!0):y.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(y.aes_salt=this.joinInfo.aessalt)),p.addresses[this.signal.websocket.currentURLIndex]&&(y.ap_response.ticket=p.addresses[this.signal.websocket.currentURLIndex].ticket,delete p.addresses),void 0!==this.joinInfo.defaultVideoStream&&(y.default_video_stream=this.joinInfo.defaultVideoStream),y}getRejoinMessage(){if(!this.joinInfo)throw new U_(D_.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var s=this;this.signal.on(n1.WS_RECONNECT_WAITTING_FINISH,p=>{["tryNext","recover"].includes(p)&&this.joinInfo&&w0.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(n1.WS_RECONNECT_CREATE_CONNECTION,p=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(n1.WS_RECONNECTING,p=>{this.joinInfo&&w0.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:p||vN.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",w0.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(n1.WS_CLOSED,p=>{let A;switch(p){case YT.LEAVE:A=vN.LEAVE;break;case YT.UID_BANNED:case YT.IP_BANNED:case YT.CHANNEL_BANNED:case YT.SERVER_ERROR:A=vN.SERVER_ERROR;break;case YT.FALLBACK:A=vN.FALLBACK;break;default:A=vN.NETWORK_ERROR}h_.debug("[signal] websocket closed, reason: ".concat(A||"undefined -> "+vN.NETWORK_ERROR)),vT("debug",this,"ws_closed","reason: ".concat(p)),this.joinInfo&&w0.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:p===YT.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:A}),this._disconnectedReason=p,p!==YT.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(n1.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(h_.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),aI("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),w0.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const p=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!p)return h_.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(p)),void aI("error",this,"set local access point after joined failed: ".concat(p));QO("EVENT_REPORT_DOMAIN",p[1]),QO("EVENT_REPORT_BACKUP_DOMAIN",p[1]),QO("LOG_UPLOAD_SERVER","".concat(p[1],":6444"))}}),this.signal.on(D1.ON_UPLINK_STATS,p=>{this._statsCollector.updateUplinkStats(p)}),this.signal.on(n1.REQUEST_RECOVER,(p,A,y)=>{if(!this.joinInfo)return y(new U_(D_.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));p&&(this.joinInfo.multiIP=p,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,o2(this,JT.REQUEST_NEW_GATEWAY_LIST).then(A).catch(y)}),this.signal.on(n1.REQUEST_JOIN_INFO,function(){var p=f(function*(A){var y;s.updateTurnConfigFromSignal();const{iceParameters:w,dtlsParameters:$,rtpCapabilities:j}=yield o2(s,JT.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(y=s.joinInfo)||void 0===y?void 0:y.turnServer});A(s.getJoinMessage({ortc:{iceParameters:w,dtlsParameters:$,rtpCapabilities:j,version:"2"}}))});return function(A){return p.apply(this,arguments)}}()),this.signal.on(n1.REQUEST_REJOIN_INFO,p=>{p(this.getRejoinMessage())}),this.signal.on(n1.REPORT_JOIN_GATEWAY,(p,A)=>{this.joinInfo&&(w0.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:p,addr:A,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(n1.IS_P2P_DISCONNECTED,p=>{p(E9(this,JT.IS_P2P_DISCONNECTED))}),this.signal.on(n1.DISCONNECT_P2P,()=>{this.emit(JT.DISCONNECT_P2P)}),this.signal.on(n1.NEED_RENEW_SESSION,()=>{this.emit(JT.NEED_RENEW_SESSION)}),this.signal.on(n1.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(n1.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(n1.JOIN_RESPONSE,p=>{const A=this.getGatewayIpPort();A?this.emit(JT.JOIN_RESPONSE,p,A.ip,A.port):this.emit(JT.JOIN_RESPONSE,p)})}tryUnsubBeforeResub(s,p){var A=this;return f(function*(){try{yield A.signal.request(r1.UNSUBSCRIBE,{p2p_id:A.store.p2pId,stream_id:s,ortc:[p]},!0)}catch(y){throw h_.warning("unsubscribe warning",y),T0("warning",A,"tryUnsubBeforeResub",s,y.toString()),y}})()}tryUnpubBeforeRepub(s,p){var A=this;return f(function*(){try{yield A.signal.request(r1.UNPUBLISH,{stream_id:s,ortc:p},!0)}catch(y){throw h_.warning("unpublish warning: ",y),T0("warning",A,"tryUnpubBeforeRepub",s,y.toString()),y}})()}tryMassUnsubBeforeResub(s){var p=this;return f(function*(){const A={users:s.map(y=>({stream_id:y.stream_id,stream_type:y.stream_type}))};try{yield p.signal.request(r1.UNSUBSCRIBE_STREAMS,A,!0)}catch(y){throw h_.warning("massUnsubscribe warning",y),T0("warning",p,"tryUnsubAllBeforeResub",s.map(w=>w.stream_id),y.toString()),y}})()}muteLocal(s,p){var A=this;return f(function*(){const y={action:s.find(w=>w.stream_type===gT.Audio)?"mute_local_audio":"mute_local_video",p2p_id:A.store.p2pId,ortc:s,stream_id:p};try{yield A.signal.request(r1.CONTROL,y,!0,!0)}catch(w){throw h_.warning("gateway unmuteLocal warning: ",w),T0("warning",A,"muteLocal",p,w.toString()),w}})()}unmuteLocal(s,p){var A=this;return f(function*(){const y={action:s.find(w=>w.stream_type===gT.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:A.store.p2pId,ortc:s,stream_id:p};try{yield A.signal.request(r1.CONTROL,y,!0,!0)}catch(w){throw h_.warning("gateway muteLocal warning: ",w),T0("warning",A,"unmuteLocal",p,w.toString()),w}})()}uploadStats(s,p){this.signal.upload(s,p)}getSignalRTT(){return this.signal.rtt}restartICE(s){var p=this;return f(function*(){const A={p2p_id:p.store.p2pId,stream_id:p.store.uid,ortc:s};try{const y=yield p.signal.request(r1.RESTART_ICE,A,!0),w=p.getGatewayIpPort();return{restartICEResponse:y,gatewayIP:null==w?void 0:w.ip,gatewayPort:null==w?void 0:w.port}}catch(y){throw h_.warning("P2PChannel.restartICE warning: ",y),T0("warning",p,"restartICE",void 0,y.toString()),y}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,vN.P2P_FAILED)}getGatewayIpPort(){var s;if(!S0("GATEWAY_WSS_ADDRESS")&&null!==(s=this.joinInfo)&&void 0!==s&&s.gatewayAddrs){const p=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(p.ip||p.ip6)&&p.port?p.ip6?{ip:p.ip6,port:p.port}:{ip:p.ip,port:p.port}:void 0}}})||Ole;function Dle(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function H6(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?Dle(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):Dle(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}!function(){var s;function p(q_){var _v=0;return function(){return _v<q_.length?{done:!1,value:q_[_v++]}:{done:!0}}}var y,A="function"==typeof Object.defineProperties?Object.defineProperty:function(q_,_v,u0){return q_==Array.prototype||q_==Object.prototype||(q_[_v]=u0.value),q_},w=function(q_){q_=["object"==typeof globalThis&&globalThis,q_,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof k&&k];for(var _v=0;_v<q_.length;++_v){var u0=q_[_v];if(u0&&u0.Math==Math)return u0}throw Error("Cannot find global object")}(this);function $(q_,_v){if(_v)e:{var u0=w;q_=q_.split(".");for(var B0=0;B0<q_.length-1;B0++){var $0=q_[B0];if(!($0 in u0))break e;u0=u0[$0]}(_v=_v(B0=u0[q_=q_[q_.length-1]]))!=B0&&null!=_v&&A(u0,q_,{configurable:!0,writable:!0,value:_v})}}function j(q_){return(q_={next:q_})[Symbol.iterator]=function(){return this},q_}function _e(q_){var _v="undefined"!=typeof Symbol&&Symbol.iterator&&q_[Symbol.iterator];return _v?_v.call(q_):{next:p(q_)}}if($("Symbol",function(q_){function _v($0,A0){this.A=$0,A(this,"description",{configurable:!0,writable:!0,value:A0})}if(q_)return q_;_v.prototype.toString=function(){return this.A};var u0="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",B0=0;return function $0(A0){if(this instanceof $0)throw new TypeError("Symbol is not a constructor");return new _v(u0+(A0||"")+"_"+B0++,A0)}}),$("Symbol.iterator",function(q_){if(q_)return q_;q_=Symbol("Symbol.iterator");for(var _v="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u0=0;u0<_v.length;u0++){var B0=w[_v[u0]];"function"==typeof B0&&"function"!=typeof B0.prototype[q_]&&A(B0.prototype,q_,{configurable:!0,writable:!0,value:function(){return j(p(this))}})}return q_}),"function"==typeof Object.setPrototypeOf)y=Object.setPrototypeOf;else{var K;e:{var _i={};try{_i.__proto__={a:!0},K=_i.a;break e}catch(q_){}K=!1}y=K?function(q_,_v){if(q_.__proto__=_v,q_.__proto__!==_v)throw new TypeError(q_+" is not extensible");return q_}:null}var _o=y;function _u(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function ch(q_){if(q_.m)throw new TypeError("Generator is already running");q_.m=!0}function _f(q_,_v){return q_.h=3,{value:_v}}function o_(q_){this.g=new _u,this.G=q_}function i_(q_,_v,u0,B0){try{var $0=_v.call(q_.g.j,u0);if(!($0 instanceof Object))throw new TypeError("Iterator result "+$0+" is not an object");if(!$0.done)return q_.g.m=!1,$0;var A0=$0.value}catch(e_){return q_.g.j=null,q_.g.s(e_),u_(q_)}return q_.g.j=null,B0.call(q_.g,A0),u_(q_)}function u_(q_){for(;q_.g.h;)try{var _v=q_.G(q_.g);if(_v)return q_.g.m=!1,{value:_v.value,done:!1}}catch(u0){q_.g.v=void 0,q_.g.s(u0)}if(q_.g.m=!1,q_.g.l){if(_v=q_.g.l,q_.g.l=null,_v.F)throw _v.D;return{value:_v.return,done:!0}}return{value:void 0,done:!0}}function g_(q_){this.next=function(_v){return q_.o(_v)},this.throw=function(_v){return q_.s(_v)},this.return=function(_v){return function(u0,B0){ch(u0.g);var $0=u0.g.j;return $0?i_(u0,"return"in $0?$0.return:function(A0){return{value:A0,done:!0}},B0,u0.g.return):(u0.g.return(B0),u_(u0))}(q_,_v)},this[Symbol.iterator]=function(){return this}}function __(q_,_v){return _v=new g_(new o_(_v)),_o&&q_.prototype&&_o(_v,q_.prototype),_v}if(_u.prototype.o=function(q_){this.v=q_},_u.prototype.s=function(q_){this.l={D:q_,F:!0},this.h=this.C||this.u},_u.prototype.return=function(q_){this.l={return:q_},this.h=this.u},o_.prototype.o=function(q_){return ch(this.g),this.g.j?i_(this,this.g.j.next,q_,this.g.o):(this.g.o(q_),u_(this))},o_.prototype.s=function(q_){return ch(this.g),this.g.j?i_(this,this.g.j.throw,q_,this.g.o):(this.g.s(q_),u_(this))},$("Array.prototype.entries",function(q_){return q_||function(){return function(_v,u0){_v instanceof String&&(_v+="");var B0=0,$0=!1,A0={next:function(){if(!$0&&B0<_v.length){var e_=B0++;return{value:u0(e_,_v[e_]),done:!1}}return $0=!0,{done:!0,value:void 0}}};return A0[Symbol.iterator]=function(){return A0},A0}(this,function(_v,u0){return[_v,u0]})}}),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var w_=function(q_,_v){for(var u0=0;u0<q_.length;u0++)_v(q_[u0])},k_=function(q_){return q_.replace(/\r?\n|\r/g,"\r\n")},Pv=function(q_,_v,u0){return _v instanceof Blob?(u0=void 0!==u0?String(u0+""):"string"==typeof _v.name?_v.name:"blob",_v.name===u0&&"[object Blob]"!==Object.prototype.toString.call(_v)||(_v=new File([_v],u0)),[String(q_),_v]):[String(q_),String(_v)]},f0=function(q_,_v){if(q_.length<_v)throw new TypeError(_v+" argument required, but only "+q_.length+" present.")},v0="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,I0=v0.FormData,iI=v0.XMLHttpRequest&&v0.XMLHttpRequest.prototype.send,H0=v0.Request&&v0.fetch,Z0=v0.navigator&&v0.navigator.sendBeacon,a0=v0.Element&&v0.Element.prototype,j_=v0.Symbol&&Symbol.toStringTag;j_&&(Blob.prototype[j_]||(Blob.prototype[j_]="Blob"),"File"in v0&&!File.prototype[j_]&&(File.prototype[j_]="File"));try{new File([],"")}catch(q_){v0.File=function(_v,u0,B0){return _v=new Blob(_v,B0||{}),Object.defineProperties(_v,{name:{value:u0},lastModified:{value:+(B0&&void 0!==B0.lastModified?new Date(B0.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),j_&&Object.defineProperty(_v,j_,{value:"File"}),_v}}var Z_=function(q_){return q_.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},o0=function(q_){this.i=[];var _v=this;q_&&w_(q_.elements,function(u0){if(u0.name&&!u0.disabled&&"submit"!==u0.type&&"button"!==u0.type&&!u0.matches("form fieldset[disabled] *"))if("file"===u0.type){var B0=u0.files&&u0.files.length?u0.files:[new File([],"",{type:"application/octet-stream"})];w_(B0,function($0){_v.append(u0.name,$0)})}else"select-multiple"===u0.type||"select-one"===u0.type?w_(u0.options,function($0){!$0.disabled&&$0.selected&&_v.append(u0.name,$0.value)}):"checkbox"===u0.type||"radio"===u0.type?u0.checked&&_v.append(u0.name,u0.value):(B0="textarea"===u0.type?k_(u0.value):u0.value,_v.append(u0.name,B0))})};if((s=o0.prototype).append=function(q_,_v,u0){f0(arguments,2),this.i.push(Pv(q_,_v,u0))},s.delete=function(q_){f0(arguments,1);var _v=[];q_=String(q_),w_(this.i,function(u0){u0[0]!==q_&&_v.push(u0)}),this.i=_v},s.entries=function q_(){var _v,u0=this;return __(q_,function(B0){if(1==B0.h&&(_v=0),3!=B0.h)return _v<u0.i.length?B0=_f(B0,u0.i[_v]):(B0.h=0,B0=void 0),B0;_v++,B0.h=2})},s.forEach=function(q_,_v){f0(arguments,1);for(var u0=_e(this),B0=u0.next();!B0.done;B0=u0.next()){var $0=_e(B0.value);B0=$0.next().value,$0=$0.next().value,q_.call(_v,$0,B0,this)}},s.get=function(q_){f0(arguments,1);var _v=this.i;q_=String(q_);for(var u0=0;u0<_v.length;u0++)if(_v[u0][0]===q_)return _v[u0][1];return null},s.getAll=function(q_){f0(arguments,1);var _v=[];return q_=String(q_),w_(this.i,function(u0){u0[0]===q_&&_v.push(u0[1])}),_v},s.has=function(q_){f0(arguments,1),q_=String(q_);for(var _v=0;_v<this.i.length;_v++)if(this.i[_v][0]===q_)return!0;return!1},s.keys=function q_(){var _v,u0,A0=this;return __(q_,function(e_){if(1==e_.h&&(_v=_e(A0),u0=_v.next()),3!=e_.h)return u0.done?void(e_.h=0):_f(e_,_e(u0.value).next().value);u0=_v.next(),e_.h=2})},s.set=function(q_,_v,u0){f0(arguments,2),q_=String(q_);var B0=[],$0=Pv(q_,_v,u0),A0=!0;w_(this.i,function(e_){e_[0]===q_?A0&&(A0=!B0.push($0)):B0.push(e_)}),A0&&B0.push($0),this.i=B0},s.values=function q_(){var _v,u0,$0,A0=this;return __(q_,function(e_){if(1==e_.h&&(_v=_e(A0),u0=_v.next()),3!=e_.h)return u0.done?void(e_.h=0):(($0=_e(u0.value)).next(),_f(e_,$0.next().value));u0=_v.next(),e_.h=2})},o0.prototype._asNative=function(){for(var q_=new I0,_v=_e(this),u0=_v.next();!u0.done;u0=_v.next()){var B0=_e(u0.value);u0=B0.next().value,B0=B0.next().value,q_.append(u0,B0)}return q_},o0.prototype._blob=function(){var q_="----formdata-polyfill-"+Math.random(),_v=[],u0="--"+q_+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(B0,$0){return"string"==typeof B0?_v.push(u0+Z_(k_($0))+'"\r\n\r\n'+k_(B0)+"\r\n"):_v.push(u0+Z_(k_($0))+'"; filename="'+Z_(B0.name)+'"\r\nContent-Type: '+(B0.type||"application/octet-stream")+"\r\n\r\n",B0,"\r\n")}),_v.push("--"+q_+"--"),new Blob(_v,{type:"multipart/form-data; boundary="+q_})},o0.prototype[Symbol.iterator]=function(){return this.entries()},o0.prototype.toString=function(){return"[object FormData]"},a0&&!a0.matches&&(a0.matches=a0.matchesSelector||a0.mozMatchesSelector||a0.msMatchesSelector||a0.oMatchesSelector||a0.webkitMatchesSelector||function(q_){for(var _v=(q_=(this.document||this.ownerDocument).querySelectorAll(q_)).length;0<=--_v&&q_.item(_v)!==this;);return-1<_v}),j_&&(o0.prototype[j_]="FormData"),iI){var W0=v0.XMLHttpRequest.prototype.setRequestHeader;v0.XMLHttpRequest.prototype.setRequestHeader=function(q_,_v){W0.call(this,q_,_v),"content-type"===q_.toLowerCase()&&(this.B=!0)},v0.XMLHttpRequest.prototype.send=function(q_){q_ instanceof o0?(q_=q_._blob(),this.B||this.setRequestHeader("Content-Type",q_.type),iI.call(this,q_)):iI.call(this,q_)}}H0&&(v0.fetch=function(q_,_v){return _v&&_v.body&&_v.body instanceof o0&&(_v.body=_v.body._blob()),H0.call(this,q_,_v)}),Z0&&(v0.navigator.sendBeacon=function(q_,_v){return _v instanceof o0&&(_v=_v._asNative()),Z0.call(this,q_,_v)}),v0.FormData=o0}}();let Nle=1;function N9(s,p,A,y,w){Nle+=1;const $={sid:A.sid,command:"convergeAllocateEdge",uid:"666",appId:A.appId,ts:Math.floor(Date.now()/1e3),seq:Nle,requestId:Nle,version:GO,cname:A.cname},j={service_name:p,json_body:JSON.stringify($)};let _e,K,_i=s[0];return wM(f(function*(){_e=Date.now();const _o=yield r2(_i,{data:j,cancelToken:y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(K=Date.now()-_e,0!==_o.code){const _f=new U_(D_.UNEXPECTED_RESPONSE,"live streaming ap error, code"+_o.code,{retry:!0,responseTime:K});throw h_.error(_f.toString()),T0("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,_f.toString()),_f}const _u=JSON.parse(_o.json_body);if(200!==_u.code){const _f=new U_(D_.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(_u.code,", reason: ").concat(_u.reason),{code:_u.code,responseTime:K});throw h_.error(_f.toString()),T0("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,_f.toString()),_f}if(!_u.servers||0===_u.servers.length){const _f=new U_(D_.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:_u.code,responseTime:K});throw h_.error(_f.toString()),T0("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,_f.toString()),_f}const ch=(o_=p,{addressList:(_f=_u).servers.map(i_=>"wss://".concat(i_.address.replace(/\./g,"-"),".").concat(S0("WORKER_DOMAIN"),":").concat(i_.wss,"?serviceName=").concat(encodeURIComponent(o_))),workerToken:_f.workerToken,vid:_f.vid});var _f,o_;return S0("LIVE_STREAMING_ADDRESS")&&(ch.addressList=S0("LIVE_STREAMING_ADDRESS")instanceof Array?S0("LIVE_STREAMING_ADDRESS"):[S0("LIVE_STREAMING_ADDRESS")]),H6(H6({},ch),{},{responseTime:K})}),(_o,_u)=>(w0.apworkerEvent(A.sid,{success:!0,sc:200,serviceName:p,responseDetail:JSON.stringify(_o.addressList),firstSuccess:0===_u,responseTime:K,serverIp:s[_u%s.length]}),!1),(_o,_u)=>(w0.apworkerEvent(A.sid,{success:!1,sc:_o.data&&_o.data.code||200,serviceName:p,responseTime:K,serverIp:s[_u%s.length]}),!!(_o.code!==D_.OPERATION_ABORTED&&_o.code!==D_.UNEXPECTED_RESPONSE||_o.data&&_o.data.retry)&&(_i=s[(_u+1)%s.length],!0)),w)}let kle=1;function mme(s,p,A,y){let{url:w,areaCode:$}=s;T0("debug",["AjaxAPI",p.clientId],"requestChooseServer",{url:w,areaCode:$});const j=Date.now(),[_e,K]=Ple(p,$,[IS.CHOOSE_SERVER]);let _i=tR.networkState;return wM(f(function*(){_i&&tR.networkState===$2.OFFLINE&&tR.onlineWaiter&&(yield sI.race([tR.onlineWaiter,cO(y&&y.maxRetryTimeout||US.maxRetryTimeout)])),_i=tR.networkState;const _o=yield r2(w,{data:_e,cancelToken:A,headers:{"Content-Type":"multipart/form-data;"}},!0);w0.reportResourceTiming(w,p.sid),_me(_o,w,p,j,[IS.CHOOSE_SERVER]);const _u=Mre(_o,IS.CHOOSE_SERVER);return vme(_u),xre(_u,w)}),_o=>(_o&&w0.joinChooseServer(p.sid,{lts:j,succ:!0,csAddr:w,opid:K,serverList:_o.gatewayAddrs.map(_u=>_u.address),ec:null,cid:_o.cid.toString(),uid:_o.uid.toString(),csIp:_o.csIp,unilbsServerIds:[IS.CHOOSE_SERVER].toString()}),!1),_o=>_o.code!==D_.OPERATION_ABORTED&&(_o.code===D_.CAN_NOT_GET_GATEWAY_SERVER?_o.data.retry:(w0.joinChooseServer(p.sid,{lts:j,succ:!1,csAddr:w,serverList:null,opid:K,ec:_o.code,csIp:_o.data&&_o.data.csIp,unilbsServerIds:[IS.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:_i})}),h_.warning("[".concat(p.clientId,"] Choose server network error, retry"),_o),aI("warning",["AjaxAPI",p.clientId],"Choose server network error, retry, ".concat(_o)),!0)),y)}function Ame(s,p,A,y){let{url:w,areaCode:$,serviceIds:j}=s;T0("debug",["AjaxAPI",p.clientId],"requestMultiUnilbs",{url:w,areaCode:$,serviceIds:j});const _e=Date.now(),[K,_i]=Ple(p,$,j);let _o;return wM(f(function*(){_o&&tR.networkState===$2.OFFLINE&&tR.onlineWaiter&&(yield sI.race([tR.onlineWaiter,cO(y&&y.maxRetryTimeout||US.maxRetryTimeout)])),_o=tR.networkState;const _u=yield r2(w,{data:K,cancelToken:A,headers:{"Content-Type":"multipart/form-data;"}},!0);w0.reportResourceTiming(w,p.sid),_me(_u,w,p,_e,j);const ch=Mre(_u,IS.CHOOSE_SERVER),_f=Mre(_u,"proxy5"===p.cloudProxyServer?IS.CLOUD_PROXY_5:"proxy3"===p.cloudProxyServer||"proxy4"===p.cloudProxyServer?IS.CLOUD_PROXY:IS.CLOUD_PROXY_FALLBACK);return vme(ch),{gatewayInfo:xre(ch,w),proxyInfo:_f,url:w}}),_u=>(_u.gatewayInfo&&w0.joinChooseServer(p.sid,{lts:_e,succ:!0,csAddr:w,serverList:_u.gatewayInfo.gatewayAddrs.map(ch=>ch.address),ec:null,opid:_i,cid:_u.gatewayInfo.cid.toString(),uid:_u.gatewayInfo.uid.toString(),csIp:_u.gatewayInfo.csIp,unilbsServerIds:j.toString()}),_u.proxyInfo&&w0.joinWebProxyAP(p.sid,{lts:_e,sucess:1,apServerAddr:w,turnServerAddrList:_u.proxyInfo.addresses.map(ch=>ch.ip).join(","),errorCode:null,eventType:p.cloudProxyServer,unilbsServerIds:j.toString()}),!1),_u=>_u.code!==D_.OPERATION_ABORTED&&(_u.code===D_.CAN_NOT_GET_GATEWAY_SERVER?_u.data.retry:(w0.joinWebProxyAP(p.sid,{lts:_e,sucess:0,apServerAddr:w,turnServerAddrList:null,errorCode:_u.code,eventType:p.cloudProxyServer,unilbsServerIds:j.toString(),extend:JSON.stringify({networkState:_o})}),h_.warning("[".concat(p.clientId,"] multi unilbs network error, retry"),_u),aI("warning",["AjaxAPI",p.clientId],"multi unilbs network error, retry, ".concat(_u)),!0)),y)}const _me=(s,p,A,y,w)=>{const $=[],j=_e=>{4096===_e.flag?w0.joinChooseServer(A.sid,{lts:y,succ:!1,csAddr:p,opid:s.opid,serverList:null,ec:_e.error.message,csIp:_e.error.data&&_e.error.data.csIp,unilbsServerIds:w.toString()}):1048576!==_e.flag&&4194304!==_e.flag&&4194310!==_e.flag||w0.joinWebProxyAP(A.sid,{lts:y,sucess:0,apServerAddr:p,turnServerAddrList:null,errorCode:_e.error.code,eventType:A.cloudProxyServer,unilbsServerIds:w.toString()})};if(s.response_body.forEach(_e=>{const K=_e.buffer.code;if(23===_e.uri&&0===K&&!_e.buffer.edges_services)if(4194310===_e.buffer.flag)h_.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),_e.buffer.edges_services=[];else{const _i={error:new U_(D_.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:s.detail[502]}),flag:_e.buffer.flag};$.push(_i),j(_i)}if(0!==K){const _i=Q6(K),_o={error:new U_(D_.CAN_NOT_GET_GATEWAY_SERVER,_i.desc,{retry:_i.retry,csIp:s.detail[502]}),flag:_e.buffer.flag};4194310===_e.buffer.flag?h_.warning(_o.error.toString()):$.push(_o),j(_o)}}),$.length)throw h_.warning("[".concat(A.clientId,"] multi unilbs ").concat(p," failed, ").concat($.map(_e=>"flag: ".concat(_e.flag,", message: ").concat(_e.error.message,", retry: ").concat(_e.error.data.retry)).join(" | "))),T0("warning",["AjaxAPI",A.clientId],"checkMultiUnilbsResponseValid",{url:p},$.map(_e=>({flag:_e.flag,message:_e.error.message,retry:_e.error.data.retry}))),new U_(D_.CAN_NOT_GET_GATEWAY_SERVER,$.map(_e=>"flag: ".concat(_e.flag,", message: ").concat(_e.error.message)).join(" | "),{retry:!!$.find(_e=>_e.error.data.retry),csIp:s.detail[502]})},vme=s=>{if(s.addresses&&0===s.addresses.length&&0===s.code)throw new U_(D_.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:s.detail&&s.detail[502]});if(S0("GATEWAY_ADDRESS")&&S0("GATEWAY_ADDRESS").length>0){h_.debug("assign gateway address to",S0("GATEWAY_ADDRESS")),aI("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(S0("GATEWAY_ADDRESS"))));const p=S0("GATEWAY_ADDRESS").map(A=>({ip:A.ip,port:A.port,ticket:s.addresses[0]&&s.addresses[0].ticket}));s.addresses=p}},yme=(s,p)=>{if(s.response_body&&s.response_body.length){const A=s.response_body[0];if(0!==A.buffer.code){const y=Q6(A.buffer.code);throw new U_(D_.UPDATE_TICKET_FAILED,"[".concat(A.buffer.code,"]: ").concat(y.desc),{retry:y.retry})}return A.buffer.ticket}throw h_.debug("update ticket request received ap response without response body:",p),aI("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(p)),new U_(D_.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},Ple=(s,p,A)=>{const y=Math.floor(1e12*Math.random()),w={appid:s.appId,client_ts:Date.now(),opid:y,sid:s.sid,request_bodies:[{uri:22,buffer:{cname:s.cname,detail:{6:s.stringUid,11:p,12:S0("USE_NEW_TOKEN")?"1":void 0},key:s.token,service_ids:A,uid:s.uid||0}}]};w.request_bodies.forEach(j=>{s.multiIP&&s.multiIP.gateway_ip&&(j.buffer.detail[5]=JSON.stringify({vocs_ip:[s.multiIP.uni_lbs_ip],vos_ip:[s.multiIP.gateway_ip]}))});const $=new FormData;return $.append("request",JSON.stringify(w)),[$,y]},pye=(s,p)=>{const A=Math.floor(1e12*Math.random()),y={appid:s.appId,client_ts:Date.now(),opid:A,sid:s.sid,request_bodies:[{uri:28,buffer:{cname:s.cname,detail:{1:"",6:s.stringUid,12:"1"},token:s.token,service_ids:p,uid:s.uid||0,edges_services:s.apResponse.addresses.map($=>({ip:$.ip,port:$.port}))}}]},w=new FormData;return w.append("request",JSON.stringify(y)),[w,A]},dX=()=>{const s=S0("AREAS");return 0===s.length&&s.push(a1.GLOBAL),BP(s).call(s,(p,A,y)=>{const w=Eme(A);return w?0===y?w:"".concat(p,",").concat(w):p},"")},Eme=s=>s===a1.OVERSEA?"".concat(fS.ASIA,",").concat(fS.EUROPE,",").concat(fS.AFRICA,",").concat(fS.NORTH_AMERICA,",").concat(fS.SOUTH_AMERICA,",").concat(fS.OCEANIA):fS[s],gie={GLOBAL:{ASIA:[a1.CHINA,a1.JAPAN,a1.INDIA,a1.KOREA,a1.HKMC],EUROPE:[],NORTH_AMERICA:[a1.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},yG=Object.keys(gie[a1.GLOBAL]),mie=[a1.CHINA,a1.NORTH_AMERICA,a1.EUROPE,a1.ASIA,a1.JAPAN,a1.INDIA,a1.OCEANIA,a1.SOUTH_AMERICA,a1.AFRICA,a1.KOREA,a1.HKMC,a1.US];function CY(s,p,A,y){return xle.apply(this,arguments)}function xle(){return xle=f(function*(s,p,A,y){return{gatewayInfo:yield($=f(function*(j,_e,K,_i){let _o=null;const _u=[],ch=function(){var o_=f(function*(){const i_=S0("WEBCS_DOMAIN").slice(0,S0("AJAX_REQUEST_CONCURRENT")).map(__=>({url:j.proxyServer?"https://".concat(j.proxyServer,"/ap/?url=").concat(__+"/api/v2/transpond/webrtc?v=2"):"https://".concat(__,"/api/v2/transpond/webrtc?v=2"),areaCode:dX()})),u_=_i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i_.map(__=>__.url)}),g_=yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:i_,asyncMapHandler:__=>(h_.debug("[".concat(j.clientId,"] Connect to choose_server:"),__.url),mme(__,j,_e,K)),allFailedhandler:__=>{throw _i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:__},u_),__[0]},promisesCollector:_u});return _i.recordJoinChannelService({endTs:Date.now(),status:"success"},u_),g_});return function(){return o_.apply(this,arguments)}}(),_f=function(){var o_=f(function*(){if(yield cO(1e3),null!==_o)return _o;const i_=S0("WEBCS_DOMAIN_BACKUP_LIST").map(__=>({url:j.proxyServer?"https://".concat(j.proxyServer,"/ap/?url=").concat(__+"/api/v2/transpond/webrtc?v=2"):"https://".concat(__,"/api/v2/transpond/webrtc?v=2"),areaCode:dX()})),u_=_i.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:i_.map(__=>__.url)}),g_=yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:i_,asyncMapHandler:__=>(h_.debug("[".concat(j.clientId,"] Connect to backup choose_server:"),__.url),mme(__,j,_e,K)),allFailedhandler:__=>{throw _i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:__},u_),__[0]},promisesCollector:_u});return _i.recordJoinChannelService({endTs:Date.now(),status:"success"},u_),g_});return function(){return o_.apply(this,arguments)}}();try{return _o=yield JU([ch(),_f()]),_u.length&&_u.forEach(o_=>o_.cancel&&"function"==typeof o_.cancel&&o_.cancel()),_o}catch(o_){throw o_[0]}}),function(j,_e,K,_i){return $.apply(this,arguments)})(s,p,A,y)};var $}),xle.apply(this,arguments)}function Lle(s,p,A,y,w){return Mle.apply(this,arguments)}function Mle(){return Mle=f(function*(s,p,A,y,w){const $=s.cloudProxyServer;if("disabled"===$){if(!y)return;if(s.useLocalAccessPoint)return yield CY(s,p,A,w);if(S0("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:_e,proxyInfo:K}=yield Cme(s,p,A,w);return s.turnServer&&"auto"!==s.turnServer.mode?(aI("debug",["Server",s.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:_e}):(s.turnServer={mode:"manual",servers:K.map(_i=>({turnServerURL:_i.address,tcpport:_i.tcpport||ZS.tcpport,udpport:_i.udpport||ZS.udpport,username:_i.username||ZS.username,password:_i.password||ZS.password,forceturn:S0("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:_e})}return yield CY(s,p,A,w)}let j;if(["443only","normal"].includes($)){let _e;y?"normal"!==$?[_e,j]=yield sI.all([Fle(s,p,A),CY(s,p,A,w)]):(_e=yield Fle(s,p,A),s.proxyServer=_e.addresses[0],w0.setProxyServer(s.proxyServer),h_.setProxyServer(s.proxyServer),B7(s.proxyServer),j=yield CY(s,p,A,w)):(j=void 0,"normal"!==$?_e=yield Fle(s,p,A):(_e=yield Fle(s,p,A),s.proxyServer=_e.addresses[0],w0.setProxyServer(s.proxyServer),h_.setProxyServer(s.proxyServer),B7(s.proxyServer))),s.turnServer={mode:"manual",servers:_e.addresses.map(K=>({turnServerURL:K,tcpport:_e.serverResponse.tcpport?_e.serverResponse.tcpport:ZS.tcpport,udpport:_e.serverResponse.udpport?_e.serverResponse.udpport:ZS.udpport,username:_e.serverResponse.username||ZS.username,password:_e.serverResponse.password||ZS.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:_e,gatewayInfo:K}=yield Cme(s,p,A,w);j={gatewayInfo:K},s.turnServer={mode:"manual",servers:_e.map(_i=>({turnServerURL:_i.address,tcpport:"proxy3"===$?void 0:_i.tcpport?_i.tcpport:ZS.tcpport,udpport:"proxy4"===$?void 0:_i.udpport?_i.udpport:ZS.udpport,username:_i.username||ZS.username,password:_i.password||ZS.password,forceturn:"proxy4"!==$,security:"proxy5"===$}))}}return h_.debug("[".concat(s.clientId,"] set proxy server: ").concat(s.proxyServer,", mode: ").concat($)),T0("debug",["Server",s.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:s.proxyServer,mode:s.cloudProxyServer}),j}),Mle.apply(this,arguments)}function Ble(s,p,A,y,w){return Ule.apply(this,arguments)}function Ule(){return Ule=f(function*(s,p,A,y,w){let j=[];j=S0("ACCOUNT_REGISTER").slice(0,S0("AJAX_REQUEST_CONCURRENT")).map(p.proxyServer?K=>"https://".concat(p.proxyServer,"/ap/?url=").concat(K+"/api/v1"):K=>"https://".concat(K,"/api/v1"));const _e=null==w?void 0:w.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:j});try{const K=yield(_i=f(function*(_o,_u,ch,_f,o_){const i_=Date.now(),u_={sid:ch.sid,opid:10,appid:ch.appId,string_uid:_u};let g_=_o[0];const __=yield wM(()=>r2(g_+"".concat(-1===g_.indexOf("?")?"?":"&","action=stringuid"),{data:u_,cancelToken:_f,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(w_,k_)=>{if(0===w_.code){if(w_.uid<=0||w_.uid>=Math.pow(2,32))throw h_.error("Invalid Uint Uid ".concat(_u," => ").concat(w_.uid),w_),T0("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(_u," => ").concat(w_.uid,", ").concat(w_)),w0.reqUserAccount(u_.sid,{lts:i_,success:!1,serverAddr:g_,stringUid:u_.string_uid,uid:w_.uid,errorCode:D_.INVALID_UINT_UID_FROM_STRING_UID,extend:u_}),new U_(D_.INVALID_UINT_UID_FROM_STRING_UID);return w0.reqUserAccount(u_.sid,{lts:i_,success:!0,serverAddr:g_,stringUid:u_.string_uid,uid:w_.uid,errorCode:null,extend:u_}),!1}const Pv=Q6(w_.code);return Pv.retry&&(g_=_o[(k_+1)%_o.length]),w0.reqUserAccount(u_.sid,{lts:i_,success:!1,serverAddr:g_,stringUid:u_.string_uid,uid:w_.uid,errorCode:Pv.desc,extend:u_}),Pv.retry},(w_,k_)=>w_.code!==D_.OPERATION_ABORTED&&(w0.reqUserAccount(u_.sid,{lts:i_,success:!1,serverAddr:g_,stringUid:u_.string_uid,uid:null,errorCode:w_.code,extend:u_}),g_=_o[(k_+1)%_o.length],!0),o_);if(0!==__.code){const w_=Q6(__.code);throw new U_(D_.UNEXPECTED_RESPONSE,w_.desc)}return __}),function(_o,_u,ch,_f,o_){return _i.apply(this,arguments)})(j,s,p,A,y);return null==w||w.recordJoinChannelService({status:"success",endTs:Date.now()},_e),K.uid}catch(K){throw null==w||w.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[K]},_e),K}var _i}),Ule.apply(this,arguments)}function Fle(s,p,A){return Ime.apply(this,arguments)}function Ime(){return Ime=f(function*(s,p,A){let y=Date.now();const w=s.cloudProxyServer,$=S0("normal"===w?"PROXY_CS":"WEBCS_DOMAIN").map(_o=>s.proxyServer?"https://".concat(s.proxyServer,"/ap/?url=").concat(_o+"/api/v1"):"https://".concat(_o,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(w)){const _o=$.map(_f=>({url:_f,areaCode:dX()}));let _u=null;_u=yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:_o,asyncMapHandler:_f=>function(o_,i_,u_,g_){let{url:__,areaCode:w_}=o_;const k_=Date.now(),Pv={opid:133,flag:"proxy5"===i_.cloudProxyServer?4194304:1048576,ts:+new Date,key:i_.token,cname:i_.cname,sid:i_.sid,detail:{6:i_.stringUid,11:w_},uid:i_.uid||0};return wM(f(function*(){return yield r2(__,{data:Pv,cancelToken:u_,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),f0=>{if(0===f0.code)return w0.joinWebProxyAP(i_.sid,{lts:k_,sucess:1,apServerAddr:__,turnServerAddrList:f0.addresses.map(I0=>I0.ip).join(","),errorCode:null,eventType:i_.cloudProxyServer}),!1;const v0=Q6(f0.code);throw new U_(D_.CAN_NOT_GET_GATEWAY_SERVER,v0.desc,{retry:v0.retry})},f0=>f0.code!==D_.OPERATION_ABORTED&&(f0.code===D_.CAN_NOT_GET_GATEWAY_SERVER?(w0.joinWebProxyAP(Pv.sid,{lts:k_,sucess:0,apServerAddr:__,turnServerAddrList:null,errorCode:f0.code,eventType:i_.cloudProxyServer}),h_.warning("[".concat(i_.clientId,"] proxy ap server ").concat(__," failed, message: ").concat(f0.message,", retry: ").concat(f0.data.retry)),aI("warning",["AjaxAPI",i_.clientId],"proxy ap server ".concat(__," failed, message: ").concat(f0.message,", retry: ").concat(f0.data.retry)),f0.data.retry):(w0.joinWebProxyAP(Pv.sid,{lts:k_,sucess:0,apServerAddr:__,turnServerAddrList:null,errorCode:f0.code,eventType:i_.cloudProxyServer}),!0)),g_)}(_f,s,p,A),allFailedhandler:()=>{throw h_.error("[".concat(s.clientId,"] can not get proxy server after trying several times")),new U_(D_.CAN_NOT_GET_PROXY_SERVER)}});const ch=_u.addresses;if(!ch||0===ch.length)throw h_.error("[".concat(s.clientId,"] can not get proxy server, empty proxy server list")),new U_(D_.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:ch.map(_f=>_f.ip).map(iY),serverResponse:{tcpport:ch[0].port||443,udpport:ch[0].port||ZS.udpport,username:ZS.username,password:ZS.password}}}let j=null;j=yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:$,asyncMapHandler:_o=>function(_u,ch,_f,o_){const i_=Date.now(),u_={command:"convergeAllocateEdge",sid:ch.sid,appId:ch.appId,token:ch.token,uid:ch.uid,cname:ch.cname,ts:Math.floor(Date.now()/1e3),version:GO,seq:0,requestId:1};return wM(f(function*(){return{res:yield r2(_u,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(u_)},cancelToken:_f,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:_u}}),g_=>{if(!g_.res.json_body)throw h_.debug("[".concat(ch.clientId,"] Get proxy server failed: no json_body")),T0("error",["AjaxAPI",ch.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new U_(D_.UNEXPECTED_RESPONSE,JSON.stringify(g_.res));const __=JSON.parse(g_.res.json_body);if(200!==__.code)throw h_.debug("[".concat(ch.clientId,"] Get proxy server failed: response code [").concat(__.code,"], reason [").concat(__.reason,"]")),T0("error",["AjaxAPI",ch.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(__.code,"], reason [").concat(__.reason,"]")),new U_(D_.UNEXPECTED_RESPONSE,JSON.stringify(g_.res));return h_.debug("[".concat(ch.clientId,"] App return server length"),__.servers.length),T0("debug",["AjaxAPI",ch.clientId],"requestProxyServerList","",{length:__.servers.length}),!1},g_=>g_.code!==D_.OPERATION_ABORTED&&(w0.requestProxyAppCenter(u_.sid,{lts:i_,succ:!1,APAddr:_u,workerManagerList:null,ec:g_.code,response:g_.message}),!0),o_)}(_o,s,p,A),allFailedhandler:()=>{throw h_.error("[".concat(s.clientId,"] can not get proxy server after trying several times")),new U_(D_.CAN_NOT_GET_PROXY_SERVER)}});const _e=JSON.parse(j.res.json_body).servers.map(qZ);if("443only"===s.cloudProxyServer)return{addresses:_e,serverResponse:{tcpport:443,udpport:ZS.udpport,username:ZS.username,password:ZS.password}};w0.requestProxyAppCenter(s.sid,{lts:y,succ:!0,APAddr:j.url,workerManagerList:JSON.stringify(_e),ec:null,response:JSON.stringify(j.res)}),y=Date.now();const K=_e.map(_o=>function(_u,ch,_f,o_){const i_=Date.now();let u_=_u;_u.startsWith("http")||(u_="https://".concat(_u,":4000/v2/machine"));const g_={command:"request",gatewayType:"http",appId:ch.appId,cname:ch.cname,uid:(ch.uid||"").toString(),sdkVersion:"2.3.1",sid:ch.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:ch.appId,cname:ch.cname,uid:(ch.uid||"").toString(),sid:ch.sid}};return wM(f(function*(){return{res:yield r2(u_,{data:g_,cancelToken:_f}),url:_u}}),__=>{if(!__.res.serverResponse)throw new U_(D_.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},__=>__.code!==D_.OPERATION_ABORTED&&(w0.requestProxyWorkerManager(g_.sid,{lts:i_,succ:!1,workerManagerAddr:_u,ec:__.code,response:__.message}),!0),o_)}(_o,s,p,A));let _i=null;try{_i=yield JU(K)}catch(_o){throw h_.error("[".concat(s.clientId,"] can not get worker manager after trying several times")),new U_(D_.CAN_NOT_GET_PROXY_SERVER)}return K.forEach(_o=>_o.cancel()),w0.requestProxyWorkerManager(s.sid,{lts:y,succ:!0,workerManagerAddr:_i.url,ec:null,response:JSON.stringify(_i.res)}),{addresses:[_i.url],serverResponse:_i.res.serverResponse}}),Ime.apply(this,arguments)}function jle(){return jle=f(function*(s,p,A){const y=S0("CDS_AP").slice(0,S0("AJAX_REQUEST_CONCURRENT")).map(_e=>s.proxyServer?"https://".concat(s.proxyServer,"/ap/?url=").concat(_e+"/api/v1"):"https://".concat(_e,"/api/v1?action=config")).map(_e=>function(K,_i,_o,_u){const ch=J1(),_f={flag:64,cipher_method:0,features:{device:ch.name,system:ch.os,system_general:navigator.userAgent,vendor:_i.appId,version:GO,cname:_i.cname,sid:_i.sid,session_id:_i.sid,detail:"",proxyServer:_i.proxyServer}};return wM(()=>r2(K,{data:_f,timeout:1e3,cancelToken:_o,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,o_=>o_.code!==D_.OPERATION_ABORTED,_u)}(_e,s,p,A));let w=null,$=null,j={};try{w=yield JU(y)}catch(_e){if(_e.code===D_.OPERATION_ABORTED)throw _e;$=_e}if(y.forEach(_e=>_e.cancel()),w0.reportApiInvoke(s.sid,{name:bI.REQUEST_CONFIG_DISTRIBUTE,options:{error:$,res:w}}).onSuccess(),w&&w.test_tags)try{j=function(_e){if(!_e.test_tags)return{};const K=_e.test_tags,_i=Object.keys(K),_o={};return _i.forEach(_u=>{var ch;const _f=P7(ch=_u.slice(4)).call(ch),o_=JSON.parse(K[_u])[1];_o[_f]=o_}),_o}(w)}catch(_e){}return j}),jle.apply(this,arguments)}function Cme(s,p,A,y){return hX.apply(this,arguments)}function hX(){return hX=f(function*(s,p,A,y){const w=S0("PROXY_SERVER_TYPE3"),$=(_f,o_)=>{let i_=w;return Array.isArray(i_)&&(i_=o_%2==0?w[1]:w[0]),"https://".concat(i_,"/ap/?url=").concat(_f)};let j=null;const _e=[],K=function(){var _f=f(function*(){const o_=S0("WEBCS_DOMAIN").slice(0,S0("AJAX_REQUEST_CONCURRENT")).map((g_,__)=>({url:"disabled"===s.cloudProxyServer||"fallback"===s.cloudProxyServer?"https://".concat(g_,"/api/v2/transpond/webrtc?v=2"):$("".concat(g_,"/api/v2/transpond/webrtc?v=2"),__),areaCode:dX(),serviceIds:[IS.CHOOSE_SERVER,"proxy5"===s.cloudProxyServer?IS.CLOUD_PROXY_5:"proxy3"===s.cloudProxyServer||"proxy4"===s.cloudProxyServer?IS.CLOUD_PROXY:IS.CLOUD_PROXY_FALLBACK]})),i_=y.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o_.map(g_=>g_.url)}),u_=yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:o_,asyncMapHandler:g_=>(h_.debug("[".concat(s.clientId,"] Connect to choose_server:"),g_.url),Ame(g_,s,p,A)),allFailedhandler:g_=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g_},i_),g_[0]},promisesCollector:_e});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},i_),u_});return function(){return _f.apply(this,arguments)}}(),_i=function(){var _f=f(function*(){if(yield cO(1e3),null!==j)return j;const o_=S0("WEBCS_DOMAIN_BACKUP_LIST").map((g_,__)=>({url:"disabled"===s.cloudProxyServer||"fallback"===s.cloudProxyServer?"https://".concat(g_,"/api/v2/transpond/webrtc?v=2"):$("".concat(g_,"/api/v2/transpond/webrtc?v=2"),__),areaCode:dX(),serviceIds:[IS.CHOOSE_SERVER,"proxy5"===s.cloudProxyServer?IS.CLOUD_PROXY_5:"proxy3"===s.cloudProxyServer||"proxy4"===s.cloudProxyServer?IS.CLOUD_PROXY:IS.CLOUD_PROXY_FALLBACK]})),i_=y.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o_.map(g_=>g_.url)}),u_=yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:o_,asyncMapHandler:g_=>(h_.debug("[".concat(s.clientId,"] Connect to backup choose_server:"),g_.url),Ame(g_,s,p,A)),allFailedhandler:g_=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g_},i_),g_[0]},promisesCollector:_e});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},i_),u_});return function(){return _f.apply(this,arguments)}}();let _o,_u,ch;try{({gatewayInfo:_o,proxyInfo:_u,url:ch}=yield JU([K(),_i()]))}catch(_f){throw _f[0]}if(_e.length&&_e.forEach(_f=>_f.cancel&&"function"==typeof _f.cancel&&_f.cancel()),!_o||!_u)throw new U_(D_.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(s.apUrl=ch,"disabled"!==s.cloudProxyServer&&Array.isArray(w)&&ch){const _f=new AG(ch).host;w.includes(_f)&&(s.proxyServer=_f,h_.setProxyServer(_f),w0.setProxyServer(_f),B7(_f))}return j={gatewayInfo:_o,proxyInfo:yield Dve(_u,_o.uid)},j}),hX.apply(this,arguments)}function Vle(s,p,A,y){return Aie.apply(this,arguments)}function Aie(){return Aie=f(function*(s,p,A,y){const w=S0("UAP_AP").slice(0,S0("AJAX_REQUEST_CONCURRENT")).map($=>p.proxyServer?"https://".concat(p.proxyServer,"/ap/?url=").concat($+"/api/v1?action=uap"):"https://".concat($,"/api/v1?action=uap"));return yield N9(w,s,p,A,y)}),Aie.apply(this,arguments)}function pX(){return pX=f(function*(s,p,A){const y=S0("UAP_AP").slice(0,S0("AJAX_REQUEST_CONCURRENT")).map(w=>s.proxyServer?"https://".concat(s.proxyServer,"/ap/?url=").concat(w+"/api/v1?action=uap"):"https://".concat(w,"/api/v1?action=uap")).map(w=>function($,j,_e,K){const _i={command:"convergeAllocateEdge",sid:j.sid,appId:j.appId,token:j.token,ts:Date.now(),version:GO,cname:j.cname,uid:j.uid.toString(),requestId:kle,seq:kle};kle+=1;const _o={service_name:"tele_channel",json_body:JSON.stringify(_i)};return wM(f(function*(){const _u=yield r2($,{data:_o,cancelToken:_e,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==_u.code){const _f=new U_(D_.UNEXPECTED_RESPONSE,"cross channel ap error, code"+_u.code,{retry:!0});throw h_.error(_f.toString()),T0("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,_f.toString()),_f}const ch=JSON.parse(_u.json_body);if(200!==ch.code){const _f=new U_(D_.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(ch.code,", reason: ").concat(ch.reason));throw h_.error(_f.toString()),T0("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,_f.toString()),_f}if(!ch.servers||0===ch.servers.length){const _f=new U_(D_.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw h_.error(_f.toString()),T0("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,_f.toString()),_f}return{vid:ch.vid,workerToken:ch.workerToken,addressList:ch.servers.map(_f=>"wss://".concat(_f.address.replace(/\./g,"-"),".").concat(S0("WORKER_DOMAIN"),":").concat(_f.wss))}}),void 0,_u=>!!(_u.code!==D_.OPERATION_ABORTED&&_u.code!==D_.UNEXPECTED_RESPONSE||_u.data&&_u.data.retry),K)}(w,s,p,A));try{const w=yield JU(y);return y.forEach($=>$.cancel()),w}catch(w){throw w[0]}}),pX.apply(this,arguments)}function Gle(){return Gle=f(function*(s,p,A){let y=null;const w=[],$=function(){var j=f(function*(_e){const K=S0(_e?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(_i=>s.proxyServer?"https://".concat(s.proxyServer,"/ap/?url=").concat(_i+"/api/v2/transpond/webrtc?v=2"):"https://".concat(_i,"/api/v2/transpond/webrtc?v=2"));return _e&&(yield cO(1e3),null!==y)?y:yield L6({fragementLength:S0("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:_i=>(h_.debug("[".concat(s.clientId,"] update ticket, Connect to ").concat(_e?"backup":""," choose_server:"),_i),function(_o,_u,ch,_f){const[o_]=pye(_u,[IS.CHOOSE_SERVER]);let i_=tR.networkState;return wM(f(function*(){i_&&tR.networkState===$2.OFFLINE&&tR.onlineWaiter&&(yield sI.race([tR.onlineWaiter,cO(_f&&_f.maxRetryTimeout||US.maxRetryTimeout)])),i_=tR.networkState;const u_=yield r2(_o,{data:o_,cancelToken:ch,headers:{"Content-Type":"multipart/form-data;"}},!0);return yme(u_,_o)}),()=>!1,u_=>u_.code!==D_.OPERATION_ABORTED&&(u_.code===D_.UPDATE_TICKET_FAILED?u_.data.retry:(h_.warning("[".concat(_u.clientId,"] update ticket network error, retry"),u_),aI("warning",["AjaxAPI",_u.clientId],"update ticket network error, retry, ".concat(u_)),!0)),_f)}(_i,s,p,A)),allFailedhandler:_i=>{throw _i[0]},promisesCollector:w})});return function(K){return j.apply(this,arguments)}}();try{return y=yield JU([$(!1),$(!0)]),w.length&&w.forEach(j=>j.cancel&&"function"==typeof j.cancel&&j.cancel()),y}catch(j){throw j[0]}}),Gle.apply(this,arguments)}var Qle;function gX(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function wme(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?gX(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):gX(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let Tme=dI("ConfigDistributeManager")(Qle=class extends hS{constructor(){super(),a_(this,"configs",void 0),a_(this,"joinInfo",void 0),a_(this,"cancelToken",void 0),a_(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),a_(this,"interval",void 0),a_(this,"mutex",new MR("config-distribute")),a_(this,"mutableParamsRead",!1)}startGetConfigDistribute(s,p){this.joinInfo=s,this.cancelToken=p,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},S0("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var s=this;return f(function*(){!s.mutex.isLocked||(yield s.mutex.lock())()})()}updateConfigDistribute(){var s=this;return f(function*(){if(s.mutableParamsRead||(s.mutableParamsRead=!0,w0.reportApiInvoke(null,{options:void 0,name:bI.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:AI.TRACER}).onSuccess(JSON.stringify(Nne))),!s.joinInfo||!s.cancelToken||!s.retryConfig)return h_.debug("[config-distribute] get config distribute interrupted have no joininfo"),void T0("debug",s,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let p;const A=yield s.mutex.lock();try{p=yield function bme(s,p,A){return jle.apply(this,arguments)}(s.joinInfo,s.cancelToken,s.retryConfig),h_.debug("[config-distribute] get config distribute",JSON.stringify(p)),T0("debug",s,"updateConfigDistribute",p),p.limit_bitrate&&s.handleBitrateLimit(p.limit_bitrate),s.cacheGlobalParameterConfig(p),s.configs=p}catch(y){const w=new U_(D_.NETWORK_RESPONSE_ERROR,y);h_.warning("[config-distribute] ".concat(w.toString())),T0("warning",s,"updateConfigDistribute",void 0,y.toString())}finally{A()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(s){var p;(p=s)&&p.uplink&&p.id&&void 0!==p.uplink.max_bitrate&&void 0!==p.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==s.id&&this.emit(QT.UPDATE_BITRATE_LIMIT,s):this.emit(QT.UPDATE_BITRATE_LIMIT,s))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&wme({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(s){var p;const A=ece(p=Object.keys(s).filter(w=>/^webrtc_ng_global_parameter/.test(w))).call(p);for(let w=0;w<A.length;w++)for(let $=A.length-1;$>w;$--){const j=A[$];if("number"==typeof s[j].__priority){const _e=s[j].__priority,K=A[$-1];if("number"==typeof s[K].__priority){if(!(_e>s[K].__priority))continue;{const _i=j;A[$]=A[$-1],A[$-1]=_i}}else{const _i=j;A[$]=A[$-1],A[$-1]=_i}}}const y={};A.forEach(w=>{const $=s[w],j=$.__expires;Object.keys($).forEach(_e=>{"__priority"===_e||"__expires"===_e||Object.prototype.hasOwnProperty.call(y,_e)||(y[_e]=wme({value:$[_e]},j&&{expires:j}))})});try{const w=JSON.stringify(y),$=window.btoa(w);window.localStorage.setItem("websdk_ng_global_parameter",$),h_.debug("Caching global parameters ".concat(w)),T0("debug",this,"cacheGlobalParameterConfig",w)}catch(w){h_.error("Error caching global parameters:",w.message),T0("error",this,"cacheGlobalParameterConfig",void 0,w.message)}}})||Qle;function Hle(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function _F(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?Hle(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):Hle(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}class jM extends hS{constructor(p,A,y,w){super(),a_(this,"spec",void 0),a_(this,"token",void 0),a_(this,"websocket",void 0),a_(this,"pingpongTimer",void 0),a_(this,"reconnectMode","retry"),a_(this,"serviceMode",void 0),a_(this,"reqId",0),a_(this,"commandReqId",0),a_(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),a_(this,"handleWebSocketMessage",$=>{if(!$.data)return;const j=JSON.parse($.data);j.requestId?this.emit("@".concat(j.requestId,"-").concat(j.sid),j):this.serviceMode===PT.INJECT?this.emit(FL.INJECT_STREAM_STATUS,j):(w0.workerEvent(this.spec.sid,{actionType:"status",serverCode:j.code,workerType:this.serviceMode===PT.TRANSCODE?1:2}),this.emit(FL.PUBLISH_STREAM_STATUS,j))}),this.spec=A,this.token=p,this.serviceMode=w,this.websocket=new pie("live-streaming",y),this.websocket.on(v1.CONNECTED,this.handleWebSocketOpen),this.websocket.on(v1.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(v1.REQUEST_NEW_URLS,($,j)=>{o2(this,FL.REQUEST_NEW_ADDRESS).then($).catch(j)}),this.websocket.on(v1.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(p){return this.websocket.init(p)}request(p,A,y,w){var $=this;return f(function*(){$.reqId+=1,"request"===p&&($.commandReqId+=1);const j=$.commandReqId,_e=$.reqId;if(!_e||!$.websocket)throw new U_(D_.UNEXPECTED_ERROR);const K=_F({command:p,sdkVersion:"4.11.1"===GO?"0.0.1":GO,seq:_e,requestId:_e,allocate:y,cname:$.spec.cname,appId:$.spec.appId,sid:$.spec.sid,uid:$.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},A);if("closed"===$.websocket.state)throw new U_(D_.WS_DISCONNECT);const _i=()=>new sI((_f,o_)=>{$.websocket.once(v1.CLOSED,()=>o_(new U_(D_.WS_ABORT))),$.websocket.once(v1.CONNECTED,_f)});"connected"!==$.websocket.state&&(yield _i()),K.clientRequest&&(K.clientRequest.workerToken=$.token);const _o=new sI((_f,o_)=>{const i_=()=>{o_(new U_(D_.WS_ABORT))};$.websocket.once(v1.RECONNECTING,i_),$.websocket.once(v1.CLOSED,i_),$.once("@".concat(_e,"-").concat($.spec.sid),u_=>{_f(u_)})});w&&w0.workerEvent($.spec.sid,_F(_F({},w),{},{requestId:j,actionType:"request",payload:JSON.stringify(A.clientRequest),serverCode:0,code:0}));const _u=Date.now();$.websocket.sendMessage(K);let ch=null;try{ch=yield _o}catch(_f){if("closed"===$.websocket.state)throw _f;return yield _i(),yield $.request(p,A,y)}return w&&w0.workerEvent($.spec.sid,_F(_F({},w),{},{requestId:j,actionType:"response",payload:JSON.stringify(ch.serverResponse),serverCode:ch.code,success:200===ch.code,responseTime:Date.now()-_u})),200!==ch.code&&$.handleResponseError(ch),ch})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const p="4.11.1"===GO?"0.0.1":GO;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:p,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(p){switch(p.code){case CT.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void h_.warning("live stream response already exists stream");case CT.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case CT.LIVE_STREAM_RESPONSE_BAD_STREAM:case CT.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new U_(D_.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:p.code}).throw();case CT.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===p.serverResponse.command||"UninjectStream"===p.serverResponse.command)return;throw new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case CT.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new U_(D_.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:p.code}).throw();case CT.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const A=new U_(D_.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(FL.WARNING,A,p.serverResponse.url)}case CT.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const A=new U_(D_.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(FL.WARNING,A,p.serverResponse.url)}case CT.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case CT.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new U_(D_.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:p.code}).throw();case CT.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const A=new U_(D_.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(FL.WARNING,A,p.serverResponse.url)}case CT.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:p.code}).throw();case CT.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case CT.LIVE_STREAM_RESPONSE_WORKER_LOST:case CT.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===p.serverResponse.command||"UninjectStream"===p.serverResponse.command)return;throw new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case CT.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===p.serverResponse.command||"UninjectStream"===p.serverResponse.command)return;if("UpdateTranscoding"===p.serverResponse.command||"ControlStream"===p.serverResponse.command)return new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:p.code}).throw();throw new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case CT.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case CT.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case CT.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case CT.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new U_(D_.LIVE_STREAMING_CDN_ERROR,"",{code:p.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(Bre)},6e3)}}function c2(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function JO(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?c2(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):c2(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}class Sme extends hS{constructor(p){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:US,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:US;super(),a_(this,"onLiveStreamWarning",void 0),a_(this,"onLiveStreamError",void 0),a_(this,"onInjectStatusChange",void 0),a_(this,"spec",void 0),a_(this,"retryTimeout",1e4),a_(this,"connection",void 0),a_(this,"httpRetryConfig",void 0),a_(this,"wsRetryConfig",void 0),a_(this,"streamingTasks",new Map),a_(this,"isStartingStreamingTask",!1),a_(this,"taskMutex",new MR("live-streaming")),a_(this,"cancelToken",GU.CancelToken.source()),a_(this,"transcodingConfig",void 0),a_(this,"injectConfig",JO({},uce)),a_(this,"injectLoopTimes",0),a_(this,"uapResponse",void 0),a_(this,"lastTaskId",1),a_(this,"statusError",new Map),this.spec=p,this.httpRetryConfig=y,this.wsRetryConfig=A}setTranscodingConfig(p){var A=this;return f(function*(){const y=JO(JO({},Vne),p);var _e;66!==y.videoCodecProfile&&77!==y.videoCodecProfile&&100!==y.videoCodecProfile&&(h_.debug("[".concat(A.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(y.videoCodecProfile," -> 100")),y.videoCodecProfile=100),y.transcodingUsers||(y.transcodingUsers=y.userConfigs),y.transcodingUsers&&(y.transcodingUsers=y.transcodingUsers.map(_e=>JO(JO(JO({},Gfe),_e),{},{zOrder:_e.zOrder?_e.zOrder+1:1}))),lT((_e=y).width)||$1(_e.width,"config.width",0,1e4),lT(_e.height)||$1(_e.height,"config.height",0,1e4),lT(_e.videoBitrate)||$1(_e.videoBitrate,"config.videoBitrate",1,1e6),lT(_e.videoFrameRate)||$1(_e.videoFrameRate,"config.videoFrameRate"),lT(_e.lowLatency)||PK(_e.lowLatency,"config.lowLatency"),lT(_e.audioSampleRate)||dR(_e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),lT(_e.audioBitrate)||$1(_e.audioBitrate,"config.audioBitrate",1,128),lT(_e.audioChannels)||dR(_e.audioChannels,"config.audioChannels",[1,2,3,4,5]),lT(_e.videoGop)||$1(_e.videoGop,"config.videoGop"),lT(_e.videoCodecProfile)||dR(_e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),lT(_e.userCount)||$1(_e.userCount,"config.userCount",0,17),lT(_e.backgroundColor)||$1(_e.backgroundColor,"config.backgroundColor",0,16777215),lT(_e.userConfigExtraInfo)||rT(_e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),_e.transcodingUsers&&!lT(_e.transcodingUsers)&&(OR(_e.transcodingUsers,"config.transcodingUsers"),_e.transcodingUsers.forEach((K,_i)=>{tZ(K.uid),lT(K.x)||$1(K.x,"transcodingUser[".concat(_i,"].x"),0,1e4),lT(K.y)||$1(K.y,"transcodingUser[".concat(_i,"].y"),0,1e4),lT(K.width)||$1(K.width,"transcodingUser[".concat(_i,"].width"),0,1e4),lT(K.height)||$1(K.height,"transcodingUser[".concat(_i,"].height"),0,1e4),lT(K.zOrder)||$1(K.zOrder-1,"transcodingUser[".concat(_i,"].zOrder"),0,100),lT(K.alpha)||$1(K.alpha,"transcodingUser[".concat(_i,"].alpha"),0,1,!1)})),lT(_e.watermark)||rZ(_e.watermark,"watermark"),lT(_e.backgroundImage)||rZ(_e.backgroundImage,"backgroundImage"),_e.images&&!lT(_e.images)&&(OR(_e.images,"config.images"),_e.images.forEach((K,_i)=>{rZ(K,"images[".concat(_i,"]"))}));const w=[];y.images&&w.push(...y.images.map(_e=>JO(JO(JO({},cce),_e),{},{zOrder:255}))),y.backgroundImage&&(w.push(JO(JO(JO({},cce),y.backgroundImage),{},{zOrder:0})),delete y.backgroundImage),y.watermark&&(w.push(JO(JO(JO({},cce),y.watermark),{},{zOrder:255})),delete y.watermark),y.images=w,y.transcodingUsers&&(y.userConfigs=y.transcodingUsers.map(_e=>JO({},_e)),y.userCount=y.transcodingUsers.length,delete y.transcodingUsers);const $=(y.userConfigs||[]).map(_e=>"number"==typeof _e.uid?sI.resolve(_e.uid):Ble(_e.uid,A.spec,A.cancelToken.token,A.httpRetryConfig));if((yield sI.all($)).forEach((_e,K)=>{y.userConfigs&&y.userConfigs[K]&&(y.userConfigs[K].uid=_e)}),A.transcodingConfig=y,A.connection)try{var j;const _e=yield A.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:A.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(x4(j=A.streamingTasks).call(j)).map(K=>K.taskId).join("#")});h_.debug("[".concat(A.spec.clientId,"] update live transcoding config success, code: ").concat(_e.code,", config:"),JSON.stringify(A.transcodingConfig))}catch(_e){if(!_e.data||!_e.data.retry)throw _e;_e.data.changeAddress&&A.connection.tryNextAddress(),A.streamingTasks.forEach(K=>{h_.warning("[".concat(A.spec.clientId,"] live streaming receive error"),_e.toString(),"try to republish",K.url),A.startLiveStreamingTask(K.url,K.mode,_e).then(()=>{h_.debug("[".concat(A.spec.clientId,"] live streaming republish ").concat(K.url," success"))}).catch(_i=>{h_.error("[".concat(A.spec.clientId,"] live streaming republish failed"),K.url,_i.toString()),A.onLiveStreamError&&A.onLiveStreamError(K.url,_i)})})}})()}setInjectStreamConfig(p,A){this.injectConfig=Object.assign({},this.injectConfig,p),this.injectLoopTimes=A}startLiveStreamingTask(p,A,y){var w=this;return f(function*(){var $;if(Array.from(x4($=w.streamingTasks).call($)).find(_i=>_i.mode===PT.INJECT)&&A===PT.INJECT)return new U_(D_.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!w.transcodingConfig&&A===PT.TRANSCODE)throw new U_(D_.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let j={command:"PublishStream",ts:Date.now(),url:p,uid:w.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};h_.debug("[".concat(w.spec.clientId,"] start live streaming ").concat(p,", mode: ").concat(A));const _e=yield w.taskMutex.lock();if(!w.connection&&y)return void _e();if(w.streamingTasks.get(p)&&!y)return _e(),new U_(D_.LIVE_STREAMING_TASK_CONFLICT).throw();try{w.connection||(w.connection=yield w.connect(A))}catch(_i){throw _e(),_i}switch(A){case PT.TRANSCODE:j.transcodingConfig=JO({},w.transcodingConfig);break;case PT.RAW:break;case PT.INJECT:j={cname:w.spec.cname,command:"InjectStream",sid:w.spec.sid,transcodingConfig:w.injectConfig,ts:Date.now(),url:p,loopTimes:w.injectLoopTimes}}w.uapResponse&&w.uapResponse.vid&&(j.vid=w.uapResponse.vid),w.isStartingStreamingTask=!0;const K=w.lastTaskId++;try{const _i=new sI((_u,ch)=>{cO(w.retryTimeout).then(()=>{if(y)return ch(y);const _f=w.statusError.get(p);return _f?(w.statusError.delete(p),ch(_f)):void 0})}),_o=yield sI.race([w.connection.request("request",{clientRequest:j},!0,{url:p,command:"PublishStream",workerType:A===PT.TRANSCODE?1:2,requestByUser:!y,tid:K.toString()}),_i]);w.isStartingStreamingTask=!1,h_.debug("[".concat(w.spec.clientId,"] live streaming started, code: ").concat(_o.code)),w.streamingTasks.set(p,{clientRequest:j,mode:A,url:p,taskId:K}),_e()}catch(_i){if(_e(),w.isStartingStreamingTask=!1,!_i.data||!_i.data.retry||y)throw _i;return _i.data.changeAddress?(w.connection.tryNextAddress(),yield w.startLiveStreamingTask(p,A,_i)):yield w.startLiveStreamingTask(p,A,_i)}})()}stopLiveStreamingTask(p){return new sI((A,y)=>{const w=this.streamingTasks.get(p);if(!w||!this.connection)return new U_(D_.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const $=w.mode;w.abortTask=()=>{h_.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(p),A()},this.connection.request("request",{clientRequest:{command:$===PT.INJECT?"UninjectStream":"UnpublishStream",url:w.url}},!1,{url:p,command:"UnPublishStream",workerType:$===PT.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(j=>{h_.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(j.code)),this.streamingTasks.delete(p),0===this.streamingTasks.size&&$!==PT.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),A(),$===PT.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(SM.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,p)}).catch(y)})}controlInjectStream(p,A,y,w){var $=this;return f(function*(){const j=$.streamingTasks.get(p);if(!j||!$.connection||j.mode!==PT.INJECT)throw new U_(D_.INVALID_OPERATION,"can not find inject stream task to control");return(yield $.connection.request("request",{clientRequest:{command:"ControlStream",url:p,control:A,audioVolume:y,position:w}})).serverResponse})()}resetAllTask(){var p;const A=Array.from(x4(p=this.streamingTasks).call(p));this.terminate();for(const y of A)this.startLiveStreamingTask(y.url,y.mode).catch(w=>{this.onLiveStreamError&&this.onLiveStreamError(y.url,w)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=GU.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(p){var A=this;return f(function*(){if(A.connection)throw new U_(D_.UNEXPECTED_ERROR,"live streaming connection has already connected");const y=yield o2(A,W7.REQUEST_WORKER_MANAGER_LIST,p);return A.uapResponse=y,A.connection=new jM(y.workerToken,A.spec,A.wsRetryConfig,p),A.connection.on(FL.WARNING,(w,$)=>A.onLiveStreamWarning&&A.onLiveStreamWarning($,w)),A.connection.on(FL.PUBLISH_STREAM_STATUS,w=>A.handlePublishStreamServer(w)),A.connection.on(FL.INJECT_STREAM_STATUS,w=>A.handleInjectStreamServerStatus(w)),A.connection.on(FL.REQUEST_NEW_ADDRESS,(w,$)=>{if(!A.connection)return $(new U_(D_.UNEXPECTED_ERROR,"can not get new live streaming address list"));o2(A,W7.REQUEST_WORKER_MANAGER_LIST,p).then(j=>{A.uapResponse=j,w(j.addressList)}).catch($)}),yield A.connection.init(y.addressList),A.connection})()}handlePublishStreamServer(p){const A=p.serverStatus&&p.serverStatus.url||"empty_url",y=this.streamingTasks.get(A),w=p.reason;switch(p.code){case CT.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case CT.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case CT.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case CT.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const j=new U_(D_.LIVE_STREAMING_CDN_ERROR,"",{code:p.code});if(y)return h_.error(j.toString()),this.onLiveStreamError&&this.onLiveStreamError(A,j);if(!this.isStartingStreamingTask)return;this.statusError.set(A,j)}case CT.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const j=new U_(D_.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,w);return this.onLiveStreamWarning&&this.onLiveStreamWarning(A,j)}case CT.LIVE_STREAM_RESPONSE_WORKER_LOST:case CT.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var $;if(!this.connection)return;this.connection.tryNextAddress();const j=Array.from(x4($=this.streamingTasks).call($));for(const _e of j)_e.abortTask?_e.abortTask():(h_.warning("[".concat(this.spec.clientId,"] publish stream status code"),p.code,"try to republish",_e.url),this.startLiveStreamingTask(_e.url,_e.mode,new U_(D_.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:p.code})).then(()=>{h_.debug("[".concat(this.spec.clientId,"] republish live stream success"),_e.url)}).catch(K=>{h_.error(K.toString()),this.onLiveStreamError&&this.onLiveStreamError(_e.url,K)}));return}}}handleInjectStreamServerStatus(p){const A=Number(p.uid),y=p.serverStatus&&p.serverStatus.url;switch(p.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(SM.INJECT_STREAM_STATUS_START_SUCCESS,A,y));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(SM.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,A,y),void this.streamingTasks.delete(y);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(SM.INJECT_STREAM_STATUS_START_UNAUTHORIZED,A,y),void this.streamingTasks.delete(y);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(SM.INJECT_STREAM_STATUS_BROKEN,A,y),void this.streamingTasks.delete(y);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(SM.INJECT_STREAM_STATUS_START_TIMEOUT,A,y),void this.streamingTasks.delete(y);default:return void h_.debug("inject stream server status",p)}}hasUrl(p){return this.streamingTasks.has(p)}}class wY{constructor(){a_(this,"destChannelMediaInfos",new Map),a_(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(p){R4(p),this.srcChannelMediaInfo=p}addDestChannelInfo(p){R4(p),this.destChannelMediaInfos.set(p.channelName,p)}removeDestChannelInfo(p){xK(p),this.destChannelMediaInfos.delete(p)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function TY(s){if(!(s instanceof wY))return new U_(D_.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const p=s.getSrcChannelMediaInfo(),A=s.getDestChannelMediaInfo();return p?0===A.size?new U_(D_.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new U_(D_.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class nP extends hS{constructor(p,A,y){super(),a_(this,"ws",void 0),a_(this,"requestId",1),a_(this,"heartBeatTimer",void 0),a_(this,"joinInfo",void 0),a_(this,"clientId",void 0),a_(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),a_(this,"onClose",w=>{this.emit("close"),this.dispose()}),a_(this,"onMessage",w=>{const $=JSON.parse(w.data);if(!$||"serverResponse"!==$.command||!$.requestId)return $&&"serverStatus"===$.command&&$.serverStatus&&$.serverStatus.command?(this.emit("status",$.serverStatus),void this.emit($.serverStatus.command,$.serverStatus)):void 0;this.emit("req_".concat($.requestId),$)}),this.joinInfo=p,this.clientId=A,this.ws=new pie("cross-channel-".concat(this.clientId),y),this.ws.on(v1.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(v1.CONNECTED,this.onOpen),this.ws.on(v1.ON_MESSAGE,this.onMessage),this.ws.on(v1.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(p){const A=this.requestId++;return p.requestId=A,p.seq=A,this.ws.sendMessage(p),A}waitStatus(p){return new sI((A,y)=>{const w=window.setTimeout(()=>{y(new U_(D_.TIMEOUT,"wait status timeout, status: ".concat(p)))},5e3);this.once(p,$=>{window.clearTimeout(w),$.state&&0!==$.state?y(new U_(D_.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(p))):A(void 0)}),this.once("dispose",()=>{window.clearTimeout(w),y(new U_(D_.WS_ABORT))})})}request(p){var A=this;return f(function*(){if("closed"===A.ws.state)throw new U_(D_.WS_DISCONNECT);"connected"!==A.ws.state&&(yield new sI((_e,K)=>{A.ws.once(v1.CLOSED,()=>K(new U_(D_.WS_ABORT))),A.ws.once(v1.CONNECTED,_e)}));const w=A.sendMessage(p),$=new sI((_e,K)=>{const _i=()=>{K(new U_(D_.WS_ABORT))};A.ws.once(v1.RECONNECTING,_i),A.ws.once(v1.CLOSED,_i),A.once("req_".concat(w),_e),cO(3e3).then(()=>{A.removeAllListeners("req_".concat(w)),A.ws.off(v1.RECONNECTING,_i),A.ws.off(v1.CLOSED,_i),K(new U_(D_.TIMEOUT,"cross channel ws request timeout"))})}),j=yield $;if(!j||200!==j.code)throw new U_(D_.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(j)));return j})()}connect(p){var A=this;return f(function*(){A.ws.removeAllListeners(v1.REQUEST_NEW_URLS),A.ws.on(v1.REQUEST_NEW_URLS,y=>{y(p)}),yield A.ws.init(p)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(p){const A=this.requestId++;return p.requestId=A,this.ws.sendMessage(p),A}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Aye extends hS{set state(p){p!==this._state&&(p!==iO.RELAY_STATE_FAILURE&&(this.errorCode=OM.RELAY_OK),this.emit("state",p,this.errorCode),this._state=p)}get state(){return this._state}constructor(p,A,y,w){var $;super(),$=this,a_(this,"joinInfo",void 0),a_(this,"clientId",void 0),a_(this,"cancelToken",GU.CancelToken.source()),a_(this,"workerToken",void 0),a_(this,"requestId",0),a_(this,"signal",void 0),a_(this,"prevChannelMediaConfig",void 0),a_(this,"httpRetryConfig",void 0),a_(this,"_state",iO.RELAY_STATE_IDLE),a_(this,"errorCode",OM.RELAY_OK),a_(this,"onStatus",j=>{h_.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(j))),j&&j.command&&("onAudioPacketReceived"===j.command&&this.emit("event",RM.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===j.command&&this.emit("event",RM.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===j.command&&(this.errorCode=OM.SRC_TOKEN_EXPIRED,this.state=iO.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===j.command&&(this.errorCode=OM.DEST_TOKEN_EXPIRED,this.state=iO.RELAY_STATE_FAILURE))}),a_(this,"onReconnect",f(function*(){h_.debug("[".concat($.clientId,"] ChannelMediaSocket disconnect, reconnecting")),$.emit("event",RM.NETWORK_DISCONNECTED),$.state=iO.RELAY_STATE_IDLE,$.prevChannelMediaConfig&&$.sendStartRelayMessage($.prevChannelMediaConfig).catch(j=>{$.state!==iO.RELAY_STATE_IDLE&&(h_.error("auto restart channel media relay failed",j.toString()),$.errorCode=OM.SERVER_CONNECTION_LOST,$.state=iO.RELAY_STATE_FAILURE)})})),this.joinInfo=p,this.clientId=A,this.signal=new nP(this.joinInfo,this.clientId,y),this.httpRetryConfig=w}startChannelMediaRelay(p){var A=this;return f(function*(){if(A.state!==iO.RELAY_STATE_IDLE)throw new U_(D_.INVALID_OPERATION);A.state=iO.RELAY_STATE_CONNECTING,yield A.connect(),h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: connect success"));try{yield A.sendStartRelayMessage(p)}catch(y){throw y.data&&y.data.serverResponse&&"SetSourceChannel"===y.data.serverResponse.command?new U_(D_.CROSS_CHANNEL_FAILED_JOIN_SRC):y.data&&y.data.serverResponse&&"SetDestChannelStatus"===y.serverResponse.command?new U_(D_.CROSS_CHANNEL_FAILED_JOIN_DEST):y.data&&y.data.serverResponse&&"StartPacketTransfer"===y.serverResponse.command?new U_(D_.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):y}A.prevChannelMediaConfig=p})()}updateChannelMediaRelay(p){var A=this;return f(function*(){if(A.state!==iO.RELAY_STATE_RUNNING)throw new U_(D_.INVALID_OPERATION);yield A.sendUpdateMessage(p),A.prevChannelMediaConfig=p})()}stopChannelMediaRelay(){var p=this;return f(function*(){yield p.sendStopRelayMessage(),h_.debug("[".concat(p.clientId,"] stopChannelMediaRelay: send stop message success")),p.state=iO.RELAY_STATE_IDLE,p.dispose()})()}dispose(){h_.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=GU.CancelToken.source(),this.state=iO.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var p=this;return f(function*(){const A=yield function fX(s,p,A){return pX.apply(this,arguments)}(p.joinInfo,p.cancelToken.token,p.httpRetryConfig);p.workerToken=A.workerToken,yield p.signal.connect(A.addressList),p.emit("event",RM.NETWORK_CONNECTED),p.signal.on("status",p.onStatus),p.signal.on("reconnecting",p.onReconnect)})()}sendStartRelayMessage(p){var A=this;return f(function*(){const y=A.genMessage(hR.StopPacketTransfer);yield A.signal.request(y),yield A.signal.waitStatus("Normal Quit"),h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const w=A.genMessage(hR.SetSdkProfile,p);yield A.signal.request(w),h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const $=A.genMessage(hR.SetSourceChannel,p);yield A.signal.request($),yield A.signal.waitStatus("SetSourceChannelStatus"),A.emit("event",RM.PACKET_JOINED_SRC_CHANNEL),h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const j=A.genMessage(hR.SetSourceUserId,p);yield A.signal.request(j),h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const _e=A.genMessage(hR.SetDestChannel,p);yield A.signal.request(_e),yield A.signal.waitStatus("SetDestChannelStatus"),A.emit("event",RM.PACKET_JOINED_DEST_CHANNEL),h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: SetDestChannel success"));const K=A.genMessage(hR.StartPacketTransfer,p);yield A.signal.request(K),A.emit("event",RM.PACKET_SENT_TO_DEST_CHANNEL),A.state=iO.RELAY_STATE_RUNNING,h_.debug("[".concat(A.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(p){var A=this;return f(function*(){const y=A.genMessage(hR.UpdateDestChannel,p);yield A.signal.request(y),A.emit("event",RM.PACKET_UPDATE_DEST_CHANNEL),h_.debug("[".concat(A.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var p=this;return f(function*(){const A=p.genMessage(hR.StopPacketTransfer);yield p.signal.request(A),h_.debug("[".concat(p.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(p,A){const y=[],w=[],$=[];this.requestId+=1;const j={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:GO,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.11.1"===j.sdkVersion&&(j.sdkVersion="0.0.1");let _e=null,K=null;switch(p){case hR.SetSdkProfile:return j.clientRequest={command:"SetSdkProfile",type:"multi_channel"},j;case hR.SetSourceChannel:if(K=A&&A.getSrcChannelMediaInfo(),!K)throw new U_(D_.UNEXPECTED_ERROR,"can not find source config");return j.clientRequest={command:"SetSourceChannel",uid:"0",channelName:K.channelName,token:K.token||this.joinInfo.appId},j;case hR.SetSourceUserId:if(K=A&&A.getSrcChannelMediaInfo(),!K)throw new U_(D_.UNEXPECTED_ERROR,"can not find source config");return j.clientRequest={command:"SetSourceUserId",uid:K.uid+""},j;case hR.SetDestChannel:if(_e=A&&A.getDestChannelMediaInfo(),!_e)throw new U_(D_.UNEXPECTED_ERROR,"can not find dest config");return _e.forEach(_i=>{y.push(_i.channelName),w.push(_i.uid+""),$.push(_i.token||this.joinInfo.appId)}),j.clientRequest={command:"SetDestChannel",channelName:y,uid:w,token:$},j;case hR.StartPacketTransfer:return j.clientRequest={command:"StartPacketTransfer"},j;case hR.Reconnect:return j.clientRequest={command:"Reconnect"},j;case hR.StopPacketTransfer:return j.clientRequest={command:"StopPacketTransfer"},j;case hR.UpdateDestChannel:if(_e=A&&A.getDestChannelMediaInfo(),!_e)throw new U_(D_.UNEXPECTED_ERROR,"can not find dest config");return _e.forEach(_i=>{y.push(_i.channelName),w.push(_i.uid+""),$.push(_i.token||this.joinInfo.appId)}),j.clientRequest={command:"UpdateDestChannel",channelName:y,uid:w,token:$},j}return j}}var _ie;let k9=dI("AgoraRTCPlayer","trackId")(_ie=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(s){s!==this._videoElementStatus&&(h_.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(s)),m6("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(s)),this._videoElementStatus=s)}constructor(s){a_(this,"trackId",void 0),a_(this,"config",void 0),a_(this,"onFirstVideoFrameDecoded",void 0),a_(this,"freezeTimeCounterList",[]),a_(this,"timeUpdatedCount",0),a_(this,"freezeTime",0),a_(this,"playbackTime",0),a_(this,"lastTimeUpdatedTime",0),a_(this,"videoTrack",void 0),a_(this,"container",void 0),a_(this,"videoElement",void 0),a_(this,"videoElementCheckInterval",void 0),a_(this,"_videoElementStatus",DR.NONE),a_(this,"slot",void 0),a_(this,"isGettingVideoDimensions",!1),a_(this,"handleVideoEvents",p=>{switch(p.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=DR.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=DR.CANPLAY;break;case"stalled":this.videoElementStatus=DR.STALLED;break;case"suspend":this.videoElementStatus=DR.SUSPEND;break;case"pause":this.videoElementStatus=DR.PAUSED,!W2()&&!b4()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),aI("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=DR.WAITING;break;case"abort":this.videoElementStatus=DR.ABORT;break;case"ended":this.videoElementStatus=DR.ENDED;break;case"emptied":this.videoElementStatus=DR.EMPTIED;break;case"timeupdate":{const A=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=A);const y=A-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=A,y>500&&(this.freezeTime+=y),this.playbackTime+=y;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),a_(this,"startGetVideoDimensions",()=>{const p=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return h_.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),T0("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(p,500)};!this.isGettingVideoDimensions&&p()}),a_(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===m1.curState&&(bae()?(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):zhe()?(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):vne()&&(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),a_(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(bae()?(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):zhe()?(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):vne()&&(h_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=s.element,this.trackId=s.trackId,this.updateConfig(s),m1.on(VS.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),m1.on(VS.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(s){this.config=s,this.trackId=s.trackId;const p=s.element;p!==this.slot&&(this.destroy(),this.slot=p),this.createElements()}updateVideoTrack(s){this.videoTrack!==s&&(this.videoTrack=s,this.createElements())}play(s){if(this.videoElement){const p=this.videoElement.play();p&&p.catch&&p.catch(y=>{s&&w0.autoplayFailed(s,"video",y.message,this.trackId),T0("warning",this,"play",y.toString(),"error"),"NotAllowedError"===y.name?(h_.warning("detected video element autoplay failed",y),this.handleAutoPlayFailed()):h_.warning("[".concat(this.trackId,"] play warning: "),y)});const A=J1();if(("Safari"===A.name&&15===Number(A.version)||K2())&&p&&p.then&&p.catch){const y=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};p.then(y).catch(y)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;const p=s.getContext("2d");if(!p)return h_.error("create canvas context failed!"),T0("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);p.drawImage(this.videoElement,0,0,s.width,s.height);const A=p.getImageData(0,0,s.width,s.height);return s.remove(),A}destroy(){if(m1.off(VS.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),m1.off(VS.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(s){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=DR.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=DR.ERROR,this.container&&this.container.appendChild(this.videoElement),EG.forEach(A=>{this.videoElement&&this.videoElement.addEventListener(A,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=DR.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const s=J1();"Safari"===s.name&&15===Number(s.version)||K2()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,q2()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,q2()&&this.videoElement.load());const p=this.videoElement.play();void 0!==p&&p.catch(A=>{h_.debug("[".concat(this.trackId,"] playback interrupted"),A.toString()),aI("debug",this,"play back interrupted: ".concat(A.toString()))})}removeVideoElement(){if(this.videoElement){EG.forEach(s=>{this.videoElement&&this.videoElement.removeEventListener(s,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(s){}this.videoElement=void 0,this.videoElementStatus=DR.NONE}}handleAutoPlayFailed(){const s=J1();if(this.videoElement){const p=A=>{A.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{h_.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),aI("debug",this,"video element autoplay resumed")}).catch(y=>{h_.error(y)}),"Android"!==s.os||"Chrome"!==s.name&&s.name!==V1.WECHAT?(document.body.removeEventListener("touchstart",p,!0),document.body.removeEventListener("mousedown",p,!0)):document.body.removeEventListener("click",p,!0))};"Android"!==s.os||"Chrome"!==s.name&&s.name!==V1.WECHAT?(document.body.addEventListener("touchstart",p,!0),document.body.addEventListener("mousedown",p,!0)):document.body.addEventListener("click",p,!0),due()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||_ie;const EG=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var Rme,vie={exports:{}};function P9(s,p,A){const y=s.createShader(A);if(!y)return new U_(D_.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(s.shaderSource(y,p),s.compileShader(y),!s.getShaderParameter(y,s.COMPILE_STATUS)){const w=s.getShaderInfoLog(y);return s.deleteShader(y),new U_(D_.WEBGL_INTERNAL_ERROR,"error compiling shader:"+w).throw()}return y}(function(s,p){s.exports=(()=>{var A={3476:(j,_e,K)=>{j.exports=K(7460)},4341:(j,_e,K)=>{j.exports=K(3685)},3536:(j,_e,K)=>{var _i=K(1910);j.exports=_i},8171:(j,_e,K)=>{K(6450);var _i=K(4058).Object,_o=j.exports=function(_u,ch,_f){return _i.defineProperty(_u,ch,_f)};_i.defineProperty.sham&&(_o.sham=!0)},2956:(j,_e,K)=>{K(7627),K(6274),K(5967),K(8881),K(4560),K(7206),K(4349),K(7971);var _i=K(4058);j.exports=_i.Promise},3685:(j,_e,K)=>{var _i=K(3536);j.exports=_i},4883:(j,_e,K)=>{var _i=K(1899),_o=K(7475),_u=K(9826),ch=_i.TypeError;j.exports=function(_f){if(_o(_f))return _f;throw ch(_u(_f)+" is not a function")}},174:(j,_e,K)=>{var _i=K(1899),_o=K(4284),_u=K(9826),ch=_i.TypeError;j.exports=function(_f){if(_o(_f))return _f;throw ch(_u(_f)+" is not a constructor")}},1851:(j,_e,K)=>{var _i=K(1899),_o=K(7475),_u=_i.String,ch=_i.TypeError;j.exports=function(_f){if("object"==typeof _f||_o(_f))return _f;throw ch("Can't set "+_u(_f)+" as a prototype")}},8479:j=>{j.exports=function(){}},5743:(j,_e,K)=>{var _i=K(1899),_o=K(7046),_u=_i.TypeError;j.exports=function(ch,_f){if(_o(_f,ch))return ch;throw _u("Incorrect invocation")}},6059:(j,_e,K)=>{var _i=K(1899),_o=K(941),_u=_i.String,ch=_i.TypeError;j.exports=function(_f){if(_o(_f))return _f;throw ch(_u(_f)+" is not an object")}},1692:(j,_e,K)=>{var _i=K(4529),_o=K(9413),_u=K(623),ch=function(_f){return function(o_,i_,u_){var g_,__=_i(o_),w_=_u(__),k_=_o(u_,w_);if(_f&&i_!=i_){for(;w_>k_;)if((g_=__[k_++])!=g_)return!0}else for(;w_>k_;k_++)if((_f||k_ in __)&&__[k_]===i_)return _f||k_||0;return!_f&&-1}};j.exports={includes:ch(!0),indexOf:ch(!1)}},3765:(j,_e,K)=>{var _i=K(5329);j.exports=_i([].slice)},1385:(j,_e,K)=>{var _i=K(9813)("iterator"),_o=!1;try{var _u=0,ch={next:function(){return{done:!!_u++}},return:function(){_o=!0}};ch[_i]=function(){return this},Array.from(ch,function(){throw 2})}catch(_f){}j.exports=function(_f,o_){if(!o_&&!_o)return!1;var i_=!1;try{var u_={};u_[_i]=function(){return{next:function(){return{done:i_=!0}}}},_f(u_)}catch(g_){}return i_}},2532:(j,_e,K)=>{var _i=K(5329),_o=_i({}.toString),_u=_i("".slice);j.exports=function(ch){return _u(_o(ch),8,-1)}},9697:(j,_e,K)=>{var _i=K(1899),_o=K(2885),_u=K(7475),ch=K(2532),_f=K(9813)("toStringTag"),o_=_i.Object,i_="Arguments"==ch(function(){return arguments}());j.exports=_o?ch:function(u_){var g_,__,w_;return void 0===u_?"Undefined":null===u_?"Null":"string"==typeof(__=function(k_,Pv){try{return k_[Pv]}catch(f0){}}(g_=o_(u_),_f))?__:i_?ch(g_):"Object"==(w_=ch(g_))&&_u(g_.callee)?"Arguments":w_}},8694:(j,_e,K)=>{var _i=K(5329)("".replace),_o=String(Error("zxcasd").stack),_u=/\n\s*at [^:]*:[^\n]*/,ch=_u.test(_o);j.exports=function(_f,o_){if(ch&&"string"==typeof _f)for(;o_--;)_f=_i(_f,_u,"");return _f}},3489:(j,_e,K)=>{var _i=K(953),_o=K(1136),_u=K(9677),ch=K(5988);j.exports=function(_f,o_,i_){for(var u_=_o(o_),g_=ch.f,__=_u.f,w_=0;w_<u_.length;w_++){var k_=u_[w_];_i(_f,k_)||i_&&_i(i_,k_)||g_(_f,k_,__(o_,k_))}}},4160:(j,_e,K)=>{var _i=K(5981);j.exports=!_i(function(){function _o(){}return _o.prototype.constructor=null,Object.getPrototypeOf(new _o)!==_o.prototype})},1046:(j,_e,K)=>{var _i=K(5143).IteratorPrototype,_o=K(9290),_u=K(1887),ch=K(904),_f=K(2077),o_=function(){return this};j.exports=function(i_,u_,g_,__){var w_=u_+" Iterator";return i_.prototype=_o(_i,{next:_u(+!__,g_)}),ch(i_,w_,!1,!0),_f[w_]=o_,i_}},2029:(j,_e,K)=>{var _i=K(5746),_o=K(5988),_u=K(1887);j.exports=_i?function(ch,_f,o_){return _o.f(ch,_f,_u(1,o_))}:function(ch,_f,o_){return ch[_f]=o_,ch}},1887:j=>{j.exports=function(_e,K){return{enumerable:!(1&_e),configurable:!(2&_e),writable:!(4&_e),value:K}}},7771:(j,_e,K)=>{var _i=K(6887),_o=K(8834),_u=K(2529),ch=K(9417),_f=K(7475),o_=K(1046),i_=K(249),u_=K(8929),g_=K(904),__=K(2029),w_=K(9754),k_=K(9813),Pv=K(2077),f0=K(5143),v0=ch.PROPER,I0=ch.CONFIGURABLE,iI=f0.IteratorPrototype,H0=f0.BUGGY_SAFARI_ITERATORS,Z0=k_("iterator"),j_="values",Z_="entries",o0=function(){return this};j.exports=function(W0,q_,_v,u0,B0,$0,A0){o_(_v,q_,u0);var e_,y_,N_,d0=function(FR){if(FR===B0&&K1)return K1;if(!H0&&FR in BI)return BI[FR];switch(FR){case"keys":case j_:case Z_:return function(){return new _v(this,FR)}}return function(){return new _v(this)}},q0=q_+" Iterator",jI=!1,BI=W0.prototype,WI=BI[Z0]||BI["@@iterator"]||B0&&BI[B0],K1=!H0&&WI||d0(B0),ZO="Array"==q_&&BI.entries||WI;if(ZO&&(e_=i_(ZO.call(new W0)))!==Object.prototype&&e_.next&&(_u||i_(e_)===iI||(u_?u_(e_,iI):_f(e_[Z0])||w_(e_,Z0,o0)),g_(e_,q0,!0,!0),_u&&(Pv[q0]=o0)),v0&&B0==j_&&WI&&WI.name!==j_&&(!_u&&I0?__(BI,"name",j_):(jI=!0,K1=function(){return _o(WI,this)})),B0)if(y_={values:d0(j_),keys:$0?K1:d0("keys"),entries:d0(Z_)},A0)for(N_ in y_)(H0||jI||!(N_ in BI))&&w_(BI,N_,y_[N_]);else _i({target:q_,proto:!0,forced:H0||jI},y_);return _u&&!A0||BI[Z0]===K1||w_(BI,Z0,K1,{name:B0}),Pv[q_]=K1,y_}},5746:(j,_e,K)=>{var _i=K(5981);j.exports=!_i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(j,_e,K)=>{var _i=K(1899),_o=K(941),_u=_i.document,ch=_o(_u)&&_o(_u.createElement);j.exports=function(_f){return ch?_u.createElement(_f):{}}},3281:j=>{j.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:j=>{j.exports="object"==typeof window},4470:(j,_e,K)=>{var _i=K(2861),_o=K(1899);j.exports=/ipad|iphone|ipod/i.test(_i)&&void 0!==_o.Pebble},2749:(j,_e,K)=>{var _i=K(2861);j.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(_i)},6049:(j,_e,K)=>{var _i=K(2532),_o=K(1899);j.exports="process"==_i(_o.process)},8045:(j,_e,K)=>{var _i=K(2861);j.exports=/web0s(?!.*chrome)/i.test(_i)},2861:(j,_e,K)=>{var _i=K(626);j.exports=_i("navigator","userAgent")||""},3385:(j,_e,K)=>{var _i,_o,_u=K(1899),ch=K(2861),_f=_u.process,o_=_u.Deno,i_=_f&&_f.versions||o_&&o_.version,u_=i_&&i_.v8;u_&&(_o=(_i=u_.split("."))[0]>0&&_i[0]<4?1:+(_i[0]+_i[1])),!_o&&ch&&(!(_i=ch.match(/Edge\/(\d+)/))||_i[1]>=74)&&(_i=ch.match(/Chrome\/(\d+)/))&&(_o=+_i[1]),j.exports=_o},6759:j=>{j.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(j,_e,K)=>{var _i=K(5981),_o=K(1887);j.exports=!_i(function(){var _u=Error("a");return!("stack"in _u)||(Object.defineProperty(_u,"stack",_o(1,7)),7!==_u.stack)})},6887:(j,_e,K)=>{var _i=K(1899),_o=K(9730),_u=K(5329),ch=K(7475),_f=K(9677).f,o_=K(7252),i_=K(4058),u_=K(6843),g_=K(2029),__=K(953),w_=function(k_){var Pv=function(f0,v0,I0){if(this instanceof Pv){switch(arguments.length){case 0:return new k_;case 1:return new k_(f0);case 2:return new k_(f0,v0)}return new k_(f0,v0,I0)}return _o(k_,this,arguments)};return Pv.prototype=k_.prototype,Pv};j.exports=function(k_,Pv){var f0,v0,I0,iI,H0,Z0,a0,j_,Z_=k_.target,o0=k_.global,W0=k_.stat,q_=k_.proto,_v=o0?_i:W0?_i[Z_]:(_i[Z_]||{}).prototype,u0=o0?i_:i_[Z_]||g_(i_,Z_,{})[Z_],B0=u0.prototype;for(I0 in Pv)f0=!o_(o0?I0:Z_+(W0?".":"#")+I0,k_.forced)&&_v&&__(_v,I0),H0=u0[I0],f0&&(Z0=k_.noTargetGet?(j_=_f(_v,I0))&&j_.value:_v[I0]),iI=f0&&Z0?Z0:Pv[I0],f0&&typeof H0==typeof iI||(a0=k_.bind&&f0?u_(iI,_i):k_.wrap&&f0?w_(iI):q_&&ch(iI)?_u(iI):iI,(k_.sham||iI&&iI.sham||H0&&H0.sham)&&g_(a0,"sham",!0),g_(u0,I0,a0),q_&&(__(i_,v0=Z_+"Prototype")||g_(i_,v0,{}),g_(i_[v0],I0,iI),k_.real&&B0&&!B0[I0]&&g_(B0,I0,iI)))}},5981:j=>{j.exports=function(_e){try{return!!_e()}catch(K){return!0}}},9730:(j,_e,K)=>{var _i=K(8285),_o=Function.prototype,_u=_o.apply,ch=_o.call;j.exports="object"==typeof Reflect&&Reflect.apply||(_i?ch.bind(_u):function(){return ch.apply(_u,arguments)})},6843:(j,_e,K)=>{var _i=K(5329),_o=K(4883),_u=K(8285),ch=_i(_i.bind);j.exports=function(_f,o_){return _o(_f),void 0===o_?_f:_u?ch(_f,o_):function(){return _f.apply(o_,arguments)}}},8285:(j,_e,K)=>{var _i=K(5981);j.exports=!_i(function(){var _o=function(){}.bind();return"function"!=typeof _o||_o.hasOwnProperty("prototype")})},8834:(j,_e,K)=>{var _i=K(8285),_o=Function.prototype.call;j.exports=_i?_o.bind(_o):function(){return _o.apply(_o,arguments)}},9417:(j,_e,K)=>{var _i=K(5746),_o=K(953),_u=Function.prototype,ch=_i&&Object.getOwnPropertyDescriptor,_f=_o(_u,"name"),o_=_f&&"something"===function(){}.name,i_=_f&&(!_i||_i&&ch(_u,"name").configurable);j.exports={EXISTS:_f,PROPER:o_,CONFIGURABLE:i_}},5329:(j,_e,K)=>{var _i=K(8285),_o=Function.prototype,ch=_o.call,_f=_i&&_o.bind.bind(ch,ch);j.exports=_i?function(o_){return o_&&_f(o_)}:function(o_){return o_&&function(){return ch.apply(o_,arguments)}}},626:(j,_e,K)=>{var _i=K(4058),_o=K(1899),_u=K(7475),ch=function(_f){return _u(_f)?_f:void 0};j.exports=function(_f,o_){return arguments.length<2?ch(_i[_f])||ch(_o[_f]):_i[_f]&&_i[_f][o_]||_o[_f]&&_o[_f][o_]}},2902:(j,_e,K)=>{var _i=K(9697),_o=K(4229),_u=K(2077),ch=K(9813)("iterator");j.exports=function(_f){if(null!=_f)return _o(_f,ch)||_o(_f,"@@iterator")||_u[_i(_f)]}},429:(j,_e,K)=>{var _i=K(1899),_o=K(8834),_u=K(4883),ch=K(6059),_f=K(9826),o_=K(2902),i_=_i.TypeError;j.exports=function(u_,g_){var __=arguments.length<2?o_(u_):g_;if(_u(__))return ch(_o(__,u_));throw i_(_f(u_)+" is not iterable")}},4229:(j,_e,K)=>{var _i=K(4883);j.exports=function(_o,_u){var ch=_o[_u];return null==ch?void 0:_i(ch)}},1899:(j,_e,K)=>{var _i=function(_o){return _o&&_o.Math==Math&&_o};j.exports=_i("object"==typeof globalThis&&globalThis)||_i("object"==typeof window&&window)||_i("object"==typeof self&&self)||_i("object"==typeof K.g&&K.g)||function(){return this}()||Function("return this")()},953:(j,_e,K)=>{var _i=K(5329),_o=K(9678),_u=_i({}.hasOwnProperty);j.exports=Object.hasOwn||function(ch,_f){return _u(_o(ch),_f)}},7748:j=>{j.exports={}},4845:(j,_e,K)=>{var _i=K(1899);j.exports=function(_o,_u){var ch=_i.console;ch&&ch.error&&(1==arguments.length?ch.error(_o):ch.error(_o,_u))}},5463:(j,_e,K)=>{var _i=K(626);j.exports=_i("document","documentElement")},2840:(j,_e,K)=>{var _i=K(5746),_o=K(5981),_u=K(1333);j.exports=!_i&&!_o(function(){return 7!=Object.defineProperty(_u("div"),"a",{get:function(){return 7}}).a})},7026:(j,_e,K)=>{var _i=K(1899),_o=K(5329),_u=K(5981),ch=K(2532),_f=_i.Object,o_=_o("".split);j.exports=_u(function(){return!_f("z").propertyIsEnumerable(0)})?function(i_){return"String"==ch(i_)?o_(i_,""):_f(i_)}:_f},1302:(j,_e,K)=>{var _i=K(5329),_o=K(7475),_u=K(3030),ch=_i(Function.toString);_o(_u.inspectSource)||(_u.inspectSource=function(_f){return ch(_f)}),j.exports=_u.inspectSource},3794:(j,_e,K)=>{var _i=K(941),_o=K(2029);j.exports=function(_u,ch){_i(ch)&&"cause"in ch&&_o(_u,"cause",ch.cause)}},5402:(j,_e,K)=>{var _i,_o,_u,ch=K(8019),_f=K(1899),o_=K(5329),i_=K(941),u_=K(2029),g_=K(953),__=K(3030),w_=K(4262),k_=K(7748),Pv="Object already initialized",f0=_f.TypeError;if(ch||__.state){var I0=__.state||(__.state=new(0,_f.WeakMap)),iI=o_(I0.get),H0=o_(I0.has),Z0=o_(I0.set);_i=function(j_,Z_){if(H0(I0,j_))throw new f0(Pv);return Z_.facade=j_,Z0(I0,j_,Z_),Z_},_o=function(j_){return iI(I0,j_)||{}},_u=function(j_){return H0(I0,j_)}}else{var a0=w_("state");k_[a0]=!0,_i=function(j_,Z_){if(g_(j_,a0))throw new f0(Pv);return Z_.facade=j_,u_(j_,a0,Z_),Z_},_o=function(j_){return g_(j_,a0)?j_[a0]:{}},_u=function(j_){return g_(j_,a0)}}j.exports={set:_i,get:_o,has:_u,enforce:function(j_){return _u(j_)?_o(j_):_i(j_,{})},getterFor:function(j_){return function(Z_){var o0;if(!i_(Z_)||(o0=_o(Z_)).type!==j_)throw f0("Incompatible receiver, "+j_+" required");return o0}}}},6782:(j,_e,K)=>{var _i=K(9813),_o=K(2077),_u=_i("iterator"),ch=Array.prototype;j.exports=function(_f){return void 0!==_f&&(_o.Array===_f||ch[_u]===_f)}},7475:j=>{j.exports=function(_e){return"function"==typeof _e}},4284:(j,_e,K)=>{var _i=K(5329),_o=K(5981),_u=K(7475),ch=K(9697),_f=K(626),o_=K(1302),i_=function(){},u_=[],g_=_f("Reflect","construct"),__=/^\s*(?:class|function)\b/,w_=_i(__.exec),k_=!__.exec(i_),Pv=function(v0){if(!_u(v0))return!1;try{return g_(i_,u_,v0),!0}catch(I0){return!1}},f0=function(v0){if(!_u(v0))return!1;switch(ch(v0)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return k_||!!w_(__,o_(v0))}catch(I0){return!0}};f0.sham=!0,j.exports=!g_||_o(function(){var v0;return Pv(Pv.call)||!Pv(Object)||!Pv(function(){v0=!0})||v0})?f0:Pv},7252:(j,_e,K)=>{var _i=K(5981),_o=K(7475),_u=/#|\.prototype\./,ch=function(g_,__){var w_=o_[_f(g_)];return w_==u_||w_!=i_&&(_o(__)?_i(__):!!__)},_f=ch.normalize=function(g_){return String(g_).replace(_u,".").toLowerCase()},o_=ch.data={},i_=ch.NATIVE="N",u_=ch.POLYFILL="P";j.exports=ch},941:(j,_e,K)=>{var _i=K(7475);j.exports=function(_o){return"object"==typeof _o?null!==_o:_i(_o)}},2529:j=>{j.exports=!0},6664:(j,_e,K)=>{var _i=K(1899),_o=K(626),_u=K(7475),ch=K(7046),_f=K(2302),o_=_i.Object;j.exports=_f?function(i_){return"symbol"==typeof i_}:function(i_){var u_=_o("Symbol");return _u(u_)&&ch(u_.prototype,o_(i_))}},3091:(j,_e,K)=>{var _i=K(1899),_o=K(6843),_u=K(8834),ch=K(6059),_f=K(9826),o_=K(6782),i_=K(623),u_=K(7046),g_=K(429),__=K(2902),w_=K(7609),k_=_i.TypeError,Pv=function(v0,I0){this.stopped=v0,this.result=I0},f0=Pv.prototype;j.exports=function(v0,I0,iI){var H0,Z0,a0,j_,Z_,o0,W0,_v=!(!iI||!iI.AS_ENTRIES),u0=!(!iI||!iI.IS_ITERATOR),B0=!(!iI||!iI.INTERRUPTED),$0=_o(I0,iI&&iI.that),A0=function(y_){return H0&&w_(H0,"normal",y_),new Pv(!0,y_)},e_=function(y_){return _v?(ch(y_),B0?$0(y_[0],y_[1],A0):$0(y_[0],y_[1])):B0?$0(y_,A0):$0(y_)};if(u0)H0=v0;else{if(!(Z0=__(v0)))throw k_(_f(v0)+" is not iterable");if(o_(Z0)){for(a0=0,j_=i_(v0);j_>a0;a0++)if((Z_=e_(v0[a0]))&&u_(f0,Z_))return Z_;return new Pv(!1)}H0=g_(v0,Z0)}for(o0=H0.next;!(W0=_u(o0,H0)).done;){try{Z_=e_(W0.value)}catch(y_){w_(H0,"throw",y_)}if("object"==typeof Z_&&Z_&&u_(f0,Z_))return Z_}return new Pv(!1)}},7609:(j,_e,K)=>{var _i=K(8834),_o=K(6059),_u=K(4229);j.exports=function(ch,_f,o_){var i_,u_;_o(ch);try{if(!(i_=_u(ch,"return"))){if("throw"===_f)throw o_;return o_}i_=_i(i_,ch)}catch(g_){u_=!0,i_=g_}if("throw"===_f)throw o_;if(u_)throw i_;return _o(i_),o_}},5143:(j,_e,K)=>{var _i,_o,_u,ch=K(5981),_f=K(7475),o_=K(9290),i_=K(249),u_=K(9754),g_=K(9813),__=K(2529),w_=g_("iterator"),k_=!1;[].keys&&("next"in(_u=[].keys())?(_o=i_(i_(_u)))!==Object.prototype&&(_i=_o):k_=!0),null==_i||ch(function(){var Pv={};return _i[w_].call(Pv)!==Pv})?_i={}:__&&(_i=o_(_i)),_f(_i[w_])||u_(_i,w_,function(){return this}),j.exports={IteratorPrototype:_i,BUGGY_SAFARI_ITERATORS:k_}},2077:j=>{j.exports={}},623:(j,_e,K)=>{var _i=K(3057);j.exports=function(_o){return _i(_o.length)}},6132:(j,_e,K)=>{var _i,_o,_u,ch,_f,o_,i_,u_,g_=K(1899),__=K(6843),w_=K(9677).f,k_=K(2941).set,Pv=K(2749),f0=K(4470),v0=K(8045),I0=K(6049),iI=g_.MutationObserver||g_.WebKitMutationObserver,H0=g_.document,Z0=g_.process,a0=g_.Promise,j_=w_(g_,"queueMicrotask"),Z_=j_&&j_.value;Z_||(_i=function(){var o0,W0;for(I0&&(o0=Z0.domain)&&o0.exit();_o;){W0=_o.fn,_o=_o.next;try{W0()}catch(q_){throw _o?ch():_u=void 0,q_}}_u=void 0,o0&&o0.enter()},Pv||I0||v0||!iI||!H0?!f0&&a0&&a0.resolve?((i_=a0.resolve(void 0)).constructor=a0,u_=__(i_.then,i_),ch=function(){u_(_i)}):I0?ch=function(){Z0.nextTick(_i)}:(k_=__(k_,g_),ch=function(){k_(_i)}):(_f=!0,o_=H0.createTextNode(""),new iI(_i).observe(o_,{characterData:!0}),ch=function(){o_.data=_f=!_f})),j.exports=Z_||function(o0){var W0={fn:o0,next:void 0};_u&&(_u.next=W0),_o||(_o=W0,ch()),_u=W0}},9297:(j,_e,K)=>{var _i=K(1899);j.exports=_i.Promise},2497:(j,_e,K)=>{var _i=K(3385),_o=K(5981);j.exports=!!Object.getOwnPropertySymbols&&!_o(function(){var _u=Symbol();return!String(_u)||!(Object(_u)instanceof Symbol)||!Symbol.sham&&_i&&_i<41})},8019:(j,_e,K)=>{var _i=K(1899),_o=K(7475),_u=K(1302),ch=_i.WeakMap;j.exports=_o(ch)&&/native code/.test(_u(ch))},9520:(j,_e,K)=>{var _i=K(4883),_o=function(_u){var ch,_f;this.promise=new _u(function(o_,i_){if(void 0!==ch||void 0!==_f)throw TypeError("Bad Promise constructor");ch=o_,_f=i_}),this.resolve=_i(ch),this.reject=_i(_f)};j.exports.f=function(_u){return new _o(_u)}},4649:(j,_e,K)=>{var _i=K(5803);j.exports=function(_o,_u){return void 0===_o?arguments.length<2?"":_u:_i(_o)}},9290:(j,_e,K)=>{var _i,_o=K(6059),_u=K(9938),ch=K(6759),_f=K(7748),o_=K(5463),i_=K(1333),u_=K(4262)("IE_PROTO"),g_=function(){},__=function(Pv){return"<script>"+Pv+"<\/script>"},w_=function(Pv){Pv.write(__("")),Pv.close();var f0=Pv.parentWindow.Object;return Pv=null,f0},k_=function(){try{_i=new ActiveXObject("htmlfile")}catch(I0){}var Pv,f0;k_="undefined"!=typeof document?document.domain&&_i?w_(_i):((f0=i_("iframe")).style.display="none",o_.appendChild(f0),f0.src=String("javascript:"),(Pv=f0.contentWindow.document).open(),Pv.write(__("document.F=Object")),Pv.close(),Pv.F):w_(_i);for(var v0=ch.length;v0--;)delete k_.prototype[ch[v0]];return k_()};_f[u_]=!0,j.exports=Object.create||function(Pv,f0){var v0;return null!==Pv?(g_.prototype=_o(Pv),v0=new g_,g_.prototype=null,v0[u_]=Pv):v0=k_(),void 0===f0?v0:_u.f(v0,f0)}},9938:(j,_e,K)=>{var _i=K(5746),_o=K(3937),_u=K(5988),ch=K(6059),_f=K(4529),o_=K(4771);_e.f=_i&&!_o?Object.defineProperties:function(i_,u_){ch(i_);for(var g_,__=_f(u_),w_=o_(u_),k_=w_.length,Pv=0;k_>Pv;)_u.f(i_,g_=w_[Pv++],__[g_]);return i_}},5988:(j,_e,K)=>{var _i=K(1899),_o=K(5746),_u=K(2840),ch=K(3937),_f=K(6059),o_=K(3894),i_=_i.TypeError,u_=Object.defineProperty,g_=Object.getOwnPropertyDescriptor;_e.f=_o?ch?function(__,w_,k_){if(_f(__),w_=o_(w_),_f(k_),"function"==typeof __&&"prototype"===w_&&"value"in k_&&"writable"in k_&&!k_.writable){var Pv=g_(__,w_);Pv&&Pv.writable&&(__[w_]=k_.value,k_={configurable:"configurable"in k_?k_.configurable:Pv.configurable,enumerable:"enumerable"in k_?k_.enumerable:Pv.enumerable,writable:!1})}return u_(__,w_,k_)}:u_:function(__,w_,k_){if(_f(__),w_=o_(w_),_f(k_),_u)try{return u_(__,w_,k_)}catch(Pv){}if("get"in k_||"set"in k_)throw i_("Accessors not supported");return"value"in k_&&(__[w_]=k_.value),__}},9677:(j,_e,K)=>{var _i=K(5746),_o=K(8834),_u=K(6760),ch=K(1887),_f=K(4529),o_=K(3894),i_=K(953),u_=K(2840),g_=Object.getOwnPropertyDescriptor;_e.f=_i?g_:function(__,w_){if(__=_f(__),w_=o_(w_),u_)try{return g_(__,w_)}catch(k_){}if(i_(__,w_))return ch(!_o(_u.f,__,w_),__[w_])}},946:(j,_e,K)=>{var _i=K(5629),_o=K(6759).concat("length","prototype");_e.f=Object.getOwnPropertyNames||function(_u){return _i(_u,_o)}},7857:(j,_e)=>{_e.f=Object.getOwnPropertySymbols},249:(j,_e,K)=>{var _i=K(1899),_o=K(953),_u=K(7475),ch=K(9678),_f=K(4262),o_=K(4160),i_=_f("IE_PROTO"),u_=_i.Object,g_=u_.prototype;j.exports=o_?u_.getPrototypeOf:function(__){var w_=ch(__);if(_o(w_,i_))return w_[i_];var k_=w_.constructor;return _u(k_)&&w_ instanceof k_?k_.prototype:w_ instanceof u_?g_:null}},7046:(j,_e,K)=>{var _i=K(5329);j.exports=_i({}.isPrototypeOf)},5629:(j,_e,K)=>{var _i=K(5329),_o=K(953),_u=K(4529),ch=K(1692).indexOf,_f=K(7748),o_=_i([].push);j.exports=function(i_,u_){var g_,__=_u(i_),w_=0,k_=[];for(g_ in __)!_o(_f,g_)&&_o(__,g_)&&o_(k_,g_);for(;u_.length>w_;)_o(__,g_=u_[w_++])&&(~ch(k_,g_)||o_(k_,g_));return k_}},4771:(j,_e,K)=>{var _i=K(5629),_o=K(6759);j.exports=Object.keys||function(_u){return _i(_u,_o)}},6760:(j,_e)=>{var K={}.propertyIsEnumerable,_i=Object.getOwnPropertyDescriptor,_o=_i&&!K.call({1:2},1);_e.f=_o?function(_u){var ch=_i(this,_u);return!!ch&&ch.enumerable}:K},8929:(j,_e,K)=>{var _i=K(5329),_o=K(6059),_u=K(1851);j.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var ch,_f=!1,o_={};try{(ch=_i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o_,[]),_f=o_ instanceof Array}catch(i_){}return function(i_,u_){return _o(i_),_u(u_),_f?ch(i_,u_):i_.__proto__=u_,i_}}():void 0)},5623:(j,_e,K)=>{var _i=K(2885),_o=K(9697);j.exports=_i?{}.toString:function(){return"[object "+_o(this)+"]"}},9811:(j,_e,K)=>{var _i=K(1899),_o=K(8834),_u=K(7475),ch=K(941),_f=_i.TypeError;j.exports=function(o_,i_){var u_,g_;if("string"===i_&&_u(u_=o_.toString)&&!ch(g_=_o(u_,o_))||_u(u_=o_.valueOf)&&!ch(g_=_o(u_,o_))||"string"!==i_&&_u(u_=o_.toString)&&!ch(g_=_o(u_,o_)))return g_;throw _f("Can't convert object to primitive value")}},1136:(j,_e,K)=>{var _i=K(626),_o=K(5329),_u=K(946),ch=K(7857),_f=K(6059),o_=_o([].concat);j.exports=_i("Reflect","ownKeys")||function(i_){var u_=_u.f(_f(i_)),g_=ch.f;return g_?o_(u_,g_(i_)):u_}},4058:j=>{j.exports={}},2:j=>{j.exports=function(_e){try{return{error:!1,value:_e()}}catch(K){return{error:!0,value:K}}}},6584:(j,_e,K)=>{var _i=K(6059),_o=K(941),_u=K(9520);j.exports=function(ch,_f){if(_i(ch),_o(_f)&&_f.constructor===ch)return _f;var o_=_u.f(ch);return(0,o_.resolve)(_f),o_.promise}},8397:j=>{var _e=function(){this.head=null,this.tail=null};_e.prototype={add:function(K){var _i={item:K,next:null};this.head?this.tail.next=_i:this.head=_i,this.tail=_i},get:function(){var K=this.head;if(K)return this.head=K.next,this.tail===K&&(this.tail=null),K.item}},j.exports=_e},7524:(j,_e,K)=>{var _i=K(9754);j.exports=function(_o,_u,ch){for(var _f in _u)ch&&ch.unsafe&&_o[_f]?_o[_f]=_u[_f]:_i(_o,_f,_u[_f],ch);return _o}},9754:(j,_e,K)=>{var _i=K(2029);j.exports=function(_o,_u,ch,_f){_f&&_f.enumerable?_o[_u]=ch:_i(_o,_u,ch)}},8219:(j,_e,K)=>{var _i=K(1899).TypeError;j.exports=function(_o){if(null==_o)throw _i("Can't call method on "+_o);return _o}},4911:(j,_e,K)=>{var _i=K(1899),_o=Object.defineProperty;j.exports=function(_u,ch){try{_o(_i,_u,{value:ch,configurable:!0,writable:!0})}catch(_f){_i[_u]=ch}return ch}},4431:(j,_e,K)=>{var _i=K(626),_o=K(5988),_u=K(9813),ch=K(5746),_f=_u("species");j.exports=function(o_){var i_=_i(o_);ch&&i_&&!i_[_f]&&(0,_o.f)(i_,_f,{configurable:!0,get:function(){return this}})}},904:(j,_e,K)=>{var _i=K(2885),_o=K(5988).f,_u=K(2029),ch=K(953),_f=K(5623),o_=K(9813)("toStringTag");j.exports=function(i_,u_,g_,__){if(i_){var w_=g_?i_:i_.prototype;ch(w_,o_)||_o(w_,o_,{configurable:!0,value:u_}),__&&!_i&&_u(w_,"toString",_f)}}},4262:(j,_e,K)=>{var _i=K(8726),_o=K(9418),_u=_i("keys");j.exports=function(ch){return _u[ch]||(_u[ch]=_o(ch))}},3030:(j,_e,K)=>{var _i=K(1899),_o=K(4911),_u="__core-js_shared__",ch=_i[_u]||_o(_u,{});j.exports=ch},8726:(j,_e,K)=>{var _i=K(2529),_o=K(3030);(j.exports=function(_u,ch){return _o[_u]||(_o[_u]=void 0!==ch?ch:{})})("versions",[]).push({version:"3.20.3",mode:_i?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(j,_e,K)=>{var _i=K(6059),_o=K(174),_u=K(9813)("species");j.exports=function(ch,_f){var o_,i_=_i(ch).constructor;return void 0===i_||null==(o_=_i(i_)[_u])?_f:_o(o_)}},4620:(j,_e,K)=>{var _i=K(5329),_o=K(2435),_u=K(5803),ch=K(8219),_f=_i("".charAt),o_=_i("".charCodeAt),i_=_i("".slice),u_=function(g_){return function(__,w_){var k_,Pv,f0=_u(ch(__)),v0=_o(w_),I0=f0.length;return v0<0||v0>=I0?g_?"":void 0:(k_=o_(f0,v0))<55296||k_>56319||v0+1===I0||(Pv=o_(f0,v0+1))<56320||Pv>57343?g_?_f(f0,v0):k_:g_?i_(f0,v0,v0+2):Pv-56320+(k_-55296<<10)+65536}};j.exports={codeAt:u_(!1),charAt:u_(!0)}},2941:(j,_e,K)=>{var _i,_o,_u,ch,_f=K(1899),o_=K(9730),i_=K(6843),u_=K(7475),g_=K(953),__=K(5981),w_=K(5463),k_=K(3765),Pv=K(1333),f0=K(2749),v0=K(6049),I0=_f.setImmediate,iI=_f.clearImmediate,H0=_f.process,Z0=_f.Dispatch,a0=_f.Function,j_=_f.MessageChannel,Z_=_f.String,o0=0,W0={};try{_i=_f.location}catch($0){}var q_=function($0){if(g_(W0,$0)){var A0=W0[$0];delete W0[$0],A0()}},_v=function($0){return function(){q_($0)}},u0=function($0){q_($0.data)},B0=function($0){_f.postMessage(Z_($0),_i.protocol+"//"+_i.host)};I0&&iI||(I0=function($0){var A0=k_(arguments,1);return W0[++o0]=function(){o_(u_($0)?$0:a0($0),void 0,A0)},_o(o0),o0},iI=function($0){delete W0[$0]},v0?_o=function($0){H0.nextTick(_v($0))}:Z0&&Z0.now?_o=function($0){Z0.now(_v($0))}:j_&&!f0?(ch=(_u=new j_).port2,_u.port1.onmessage=u0,_o=i_(ch.postMessage,ch)):_f.addEventListener&&u_(_f.postMessage)&&!_f.importScripts&&_i&&"file:"!==_i.protocol&&!__(B0)?(_o=B0,_f.addEventListener("message",u0,!1)):_o="onreadystatechange"in Pv("script")?function($0){w_.appendChild(Pv("script")).onreadystatechange=function(){w_.removeChild(this),q_($0)}}:function($0){setTimeout(_v($0),0)}),j.exports={set:I0,clear:iI}},9413:(j,_e,K)=>{var _i=K(2435),_o=Math.max,_u=Math.min;j.exports=function(ch,_f){var o_=_i(ch);return o_<0?_o(o_+_f,0):_u(o_,_f)}},4529:(j,_e,K)=>{var _i=K(7026),_o=K(8219);j.exports=function(_u){return _i(_o(_u))}},2435:j=>{var _e=Math.ceil,K=Math.floor;j.exports=function(_i){var _o=+_i;return _o!=_o||0===_o?0:(_o>0?K:_e)(_o)}},3057:(j,_e,K)=>{var _i=K(2435),_o=Math.min;j.exports=function(_u){return _u>0?_o(_i(_u),9007199254740991):0}},9678:(j,_e,K)=>{var _i=K(1899),_o=K(8219),_u=_i.Object;j.exports=function(ch){return _u(_o(ch))}},6935:(j,_e,K)=>{var _i=K(1899),_o=K(8834),_u=K(941),ch=K(6664),_f=K(4229),o_=K(9811),i_=K(9813),u_=_i.TypeError,g_=i_("toPrimitive");j.exports=function(__,w_){if(!_u(__)||ch(__))return __;var k_,Pv=_f(__,g_);if(Pv){if(void 0===w_&&(w_="default"),k_=_o(Pv,__,w_),!_u(k_)||ch(k_))return k_;throw u_("Can't convert object to primitive value")}return void 0===w_&&(w_="number"),o_(__,w_)}},3894:(j,_e,K)=>{var _i=K(6935),_o=K(6664);j.exports=function(_u){var ch=_i(_u,"string");return _o(ch)?ch:ch+""}},2885:(j,_e,K)=>{var _i={};_i[K(9813)("toStringTag")]="z",j.exports="[object z]"===String(_i)},5803:(j,_e,K)=>{var _i=K(1899),_o=K(9697),_u=_i.String;j.exports=function(ch){if("Symbol"===_o(ch))throw TypeError("Cannot convert a Symbol value to a string");return _u(ch)}},9826:(j,_e,K)=>{var _i=K(1899).String;j.exports=function(_o){try{return _i(_o)}catch(_u){return"Object"}}},9418:(j,_e,K)=>{var _i=K(5329),_o=0,_u=Math.random(),ch=_i(1..toString);j.exports=function(_f){return"Symbol("+(void 0===_f?"":_f)+")_"+ch(++_o+_u,36)}},2302:(j,_e,K)=>{var _i=K(2497);j.exports=_i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(j,_e,K)=>{var _i=K(5746),_o=K(5981);j.exports=_i&&_o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(j,_e,K)=>{var _i=K(1899),_o=K(8726),_u=K(953),ch=K(9418),_f=K(2497),o_=K(2302),i_=_o("wks"),u_=_i.Symbol,g_=u_&&u_.for,__=o_?u_:u_&&u_.withoutSetter||ch;j.exports=function(w_){if(!_u(i_,w_)||!_f&&"string"!=typeof i_[w_]){var k_="Symbol."+w_;i_[w_]=_f&&_u(u_,w_)?u_[w_]:o_&&g_?g_(k_):__(k_)}return i_[w_]}},7627:(j,_e,K)=>{var _i=K(6887),_o=K(1899),_u=K(7046),ch=K(249),_f=K(8929),o_=K(3489),i_=K(9290),u_=K(2029),g_=K(1887),__=K(8694),w_=K(3794),k_=K(3091),Pv=K(4649),f0=K(9813),v0=K(8780),I0=f0("toStringTag"),iI=_o.Error,H0=[].push,Z0=function(j_,Z_){var o0,W0=arguments.length>2?arguments[2]:void 0,q_=_u(a0,this);_f?o0=_f(new iI,q_?ch(this):a0):(o0=q_?this:i_(a0),u_(o0,I0,"Error")),void 0!==Z_&&u_(o0,"message",Pv(Z_)),v0&&u_(o0,"stack",__(o0.stack,1)),w_(o0,W0);var _v=[];return k_(j_,H0,{that:_v}),u_(o0,"errors",_v),o0};_f?_f(Z0,iI):o_(Z0,iI,{name:!0});var a0=Z0.prototype=i_(iI.prototype,{constructor:g_(1,Z0),message:g_(1,""),name:g_(1,"AggregateError")});_i({global:!0},{AggregateError:Z0})},6274:(j,_e,K)=>{var _i=K(4529),_o=K(8479),_u=K(2077),ch=K(5402),_f=K(5988).f,o_=K(7771),i_=K(2529),u_=K(5746),g_="Array Iterator",__=ch.set,w_=ch.getterFor(g_);j.exports=o_(Array,"Array",function(Pv,f0){__(this,{type:g_,target:_i(Pv),index:0,kind:f0})},function(){var Pv=w_(this),f0=Pv.target,v0=Pv.kind,I0=Pv.index++;return!f0||I0>=f0.length?(Pv.target=void 0,{value:void 0,done:!0}):"keys"==v0?{value:I0,done:!1}:"values"==v0?{value:f0[I0],done:!1}:{value:[I0,f0[I0]],done:!1}},"values");var k_=_u.Arguments=_u.Array;if(_o("keys"),_o("values"),_o("entries"),!i_&&u_&&"values"!==k_.name)try{_f(k_,"name",{value:"values"})}catch(Pv){}},6450:(j,_e,K)=>{var _i=K(6887),_o=K(5746),_u=K(5988).f;_i({target:"Object",stat:!0,forced:Object.defineProperty!==_u,sham:!_o},{defineProperty:_u})},5967:()=>{},4560:(j,_e,K)=>{var _i=K(6887),_o=K(8834),_u=K(4883),ch=K(9520),_f=K(2),o_=K(3091);_i({target:"Promise",stat:!0},{allSettled:function(i_){var u_=this,g_=ch.f(u_),__=g_.resolve,w_=g_.reject,k_=_f(function(){var Pv=_u(u_.resolve),f0=[],v0=0,I0=1;o_(i_,function(iI){var H0=v0++,Z0=!1;I0++,_o(Pv,u_,iI).then(function(a0){Z0||(Z0=!0,f0[H0]={status:"fulfilled",value:a0},--I0||__(f0))},function(a0){Z0||(Z0=!0,f0[H0]={status:"rejected",reason:a0},--I0||__(f0))})}),--I0||__(f0)});return k_.error&&w_(k_.value),g_.promise}})},7206:(j,_e,K)=>{var _i=K(6887),_o=K(4883),_u=K(626),ch=K(8834),_f=K(9520),o_=K(2),i_=K(3091),u_="No one promise resolved";_i({target:"Promise",stat:!0},{any:function(g_){var __=this,w_=_u("AggregateError"),k_=_f.f(__),Pv=k_.resolve,f0=k_.reject,v0=o_(function(){var I0=_o(__.resolve),iI=[],H0=0,Z0=1,a0=!1;i_(g_,function(j_){var Z_=H0++,o0=!1;Z0++,ch(I0,__,j_).then(function(W0){o0||a0||(a0=!0,Pv(W0))},function(W0){o0||a0||(o0=!0,iI[Z_]=W0,--Z0||f0(new w_(iI,u_)))})}),--Z0||f0(new w_(iI,u_))});return v0.error&&f0(v0.value),k_.promise}})},4349:(j,_e,K)=>{var _i=K(6887),_o=K(2529),_u=K(9297),ch=K(5981),_f=K(626),o_=K(7475),i_=K(487),u_=K(6584),g_=K(9754);if(_i({target:"Promise",proto:!0,real:!0,forced:!!_u&&ch(function(){_u.prototype.finally.call({then:function(){}},function(){})})},{finally:function(w_){var k_=i_(this,_f("Promise")),Pv=o_(w_);return this.then(Pv?function(f0){return u_(k_,w_()).then(function(){return f0})}:w_,Pv?function(f0){return u_(k_,w_()).then(function(){throw f0})}:w_)}}),!_o&&o_(_u)){var __=_f("Promise").prototype.finally;_u.prototype.finally!==__&&g_(_u.prototype,"finally",__,{unsafe:!0})}},8881:(j,_e,K)=>{var _i,_o,_u,ch,_f=K(6887),o_=K(2529),i_=K(1899),u_=K(626),g_=K(8834),__=K(9297),w_=K(9754),k_=K(7524),Pv=K(8929),f0=K(904),v0=K(4431),I0=K(4883),iI=K(7475),H0=K(941),Z0=K(5743),a0=K(1302),j_=K(3091),Z_=K(1385),o0=K(487),W0=K(2941).set,q_=K(6132),_v=K(6584),u0=K(4845),B0=K(9520),$0=K(2),A0=K(8397),e_=K(5402),y_=K(7252),N_=K(9813),d0=K(3321),q0=K(6049),jI=K(3385),BI=N_("species"),WI="Promise",K1=e_.getterFor(WI),ZO=e_.set,FR=e_.getterFor(WI),dT=__&&__.prototype,X1=__,rR=dT,n3=i_.TypeError,QL=i_.document,r3=i_.process,bS=B0.f,Xye=bS,t0=!!(QL&&QL.createEvent&&i_.dispatchEvent),b_=iI(i_.PromiseRejectionEvent),K_="unhandledrejection",l0=!1,n0=y_(WI,function(){var X0=a0(X1),lI=X0!==String(X1);if(!lI&&66===jI||o_&&!rR.finally)return!0;if(jI>=51&&/native code/.test(X0))return!1;var ZI=new X1(function(jR){jR(1)}),z1=function(jR){jR(function(){},function(){})};return(ZI.constructor={})[BI]=z1,!(l0=ZI.then(function(){})instanceof z1)||!lI&&d0&&!b_}),U0=n0||!Z_(function(X0){X1.all(X0).catch(function(){})}),L0=function(X0){var lI;return!(!H0(X0)||!iI(lI=X0.then))&&lI},oI=function(X0,lI){var ZI,z1,jR,IG=lI.value,Tie=1==lI.state,yX=Tie?X0.ok:X0.fail,rAe=X0.resolve,DY=X0.reject,NY=X0.domain;try{yX?(Tie||(2===lI.rejection&&UI(lI),lI.rejection=1),!0===yX?ZI=IG:(NY&&NY.enter(),ZI=yX(IG),NY&&(NY.exit(),jR=!0)),ZI===X0.promise?DY(n3("Promise-chain cycle")):(z1=L0(ZI))?g_(z1,ZI,rAe,DY):rAe(ZI)):DY(IG)}catch(eEe){NY&&!jR&&NY.exit(),DY(eEe)}},HI=function(X0,lI){X0.notified||(X0.notified=!0,q_(function(){for(var ZI,z1=X0.reactions;ZI=z1.get();)oI(ZI,X0);X0.notified=!1,lI&&!X0.rejection&&z0(X0)}))},Pb=function(X0,lI,ZI){var z1,jR;t0?((z1=QL.createEvent("Event")).promise=lI,z1.reason=ZI,z1.initEvent(X0,!1,!0),i_.dispatchEvent(z1)):z1={promise:lI,reason:ZI},!b_&&(jR=i_["on"+X0])?jR(z1):X0===K_&&u0("Unhandled promise rejection",ZI)},z0=function(X0){g_(W0,i_,function(){var lI,ZI=X0.facade,z1=X0.value;if(hI(X0)&&(lI=$0(function(){q0?r3.emit("unhandledRejection",z1,ZI):Pb(K_,ZI,z1)}),X0.rejection=q0||hI(X0)?2:1,lI.error))throw lI.value})},hI=function(X0){return 1!==X0.rejection&&!X0.parent},UI=function(X0){g_(W0,i_,function(){var lI=X0.facade;q0?r3.emit("rejectionHandled",lI):Pb("rejectionhandled",lI,X0.value)})},C1=function(X0,lI,ZI){return function(z1){X0(lI,z1,ZI)}},ZT=function(X0,lI,ZI){X0.done||(X0.done=!0,ZI&&(X0=ZI),X0.value=lI,X0.state=2,HI(X0,!0))},CN=function(X0,lI,ZI){if(!X0.done){X0.done=!0,ZI&&(X0=ZI);try{if(X0.facade===lI)throw n3("Promise can't be resolved itself");var z1=L0(lI);z1?q_(function(){var jR={done:!1};try{g_(z1,lI,C1(CN,jR,X0),C1(ZT,jR,X0))}catch(IG){ZT(jR,IG,X0)}}):(X0.value=lI,X0.state=1,HI(X0,!1))}catch(jR){ZT({done:!1},jR,X0)}}};if(n0&&(rR=(X1=function(X0){Z0(this,rR),I0(X0),g_(_i,this);var lI=K1(this);try{X0(C1(CN,lI),C1(ZT,lI))}catch(ZI){ZT(lI,ZI)}}).prototype,(_i=function(X0){ZO(this,{type:WI,done:!1,notified:!1,parent:!1,reactions:new A0,rejection:!1,state:0,value:void 0})}).prototype=k_(rR,{then:function(X0,lI){var ZI=FR(this),z1=bS(o0(this,X1));return ZI.parent=!0,z1.ok=!iI(X0)||X0,z1.fail=iI(lI)&&lI,z1.domain=q0?r3.domain:void 0,0==ZI.state?ZI.reactions.add(z1):q_(function(){oI(z1,ZI)}),z1.promise},catch:function(X0){return this.then(void 0,X0)}}),_o=function(){var X0=new _i,lI=K1(X0);this.promise=X0,this.resolve=C1(CN,lI),this.reject=C1(ZT,lI)},B0.f=bS=function(X0){return X0===X1||X0===_u?new _o(X0):Xye(X0)},!o_&&iI(__)&&dT!==Object.prototype)){ch=dT.then,l0||(w_(dT,"then",function(X0,lI){var ZI=this;return new X1(function(z1,jR){g_(ch,ZI,z1,jR)}).then(X0,lI)},{unsafe:!0}),w_(dT,"catch",rR.catch,{unsafe:!0}));try{delete dT.constructor}catch(X0){}Pv&&Pv(dT,rR)}_f({global:!0,wrap:!0,forced:n0},{Promise:X1}),f0(X1,WI,!1,!0),v0(WI),_u=u_(WI),_f({target:WI,stat:!0,forced:n0},{reject:function(X0){var lI=bS(this);return g_(lI.reject,void 0,X0),lI.promise}}),_f({target:WI,stat:!0,forced:o_||n0},{resolve:function(X0){return _v(o_&&this===_u?X1:this,X0)}}),_f({target:WI,stat:!0,forced:U0},{all:function(X0){var lI=this,ZI=bS(lI),z1=ZI.resolve,jR=ZI.reject,IG=$0(function(){var Tie=I0(lI.resolve),yX=[],rAe=0,DY=1;j_(X0,function(NY){var eEe=rAe++,z0e=!1;DY++,g_(Tie,lI,NY).then(function(Dbe){z0e||(z0e=!0,yX[eEe]=Dbe,--DY||z1(yX))},jR)}),--DY||z1(yX)});return IG.error&&jR(IG.value),ZI.promise},race:function(X0){var lI=this,ZI=bS(lI),z1=ZI.reject,jR=$0(function(){var IG=I0(lI.resolve);j_(X0,function(Tie){g_(IG,lI,Tie).then(ZI.resolve,z1)})});return jR.error&&z1(jR.value),ZI.promise}})},7971:(j,_e,K)=>{var _i=K(4620).charAt,_o=K(5803),_u=K(5402),ch=K(7771),_f="String Iterator",o_=_u.set,i_=_u.getterFor(_f);ch(String,"String",function(u_){o_(this,{type:_f,string:_o(u_),index:0})},function(){var u_,g_=i_(this),__=g_.string,w_=g_.index;return w_>=__.length?{value:void 0,done:!0}:(u_=_i(__,w_),g_.index+=u_.length,{value:u_,done:!1})})},7634:(j,_e,K)=>{K(6274);var _i=K(3281),_o=K(1899),_u=K(9697),ch=K(2029),_f=K(2077),o_=K(9813)("toStringTag");for(var i_ in _i){var u_=_o[i_],g_=u_&&u_.prototype;g_&&_u(g_)!==o_&&ch(g_,o_,i_),_f[i_]=_f.Array}},1910:(j,_e,K)=>{var _i=K(8171);j.exports=_i},7460:(j,_e,K)=>{var _i=K(2956);K(7634),j.exports=_i},9662:(j,_e,K)=>{var _i=K(7854),_o=K(614),_u=K(6330),ch=_i.TypeError;j.exports=function(_f){if(_o(_f))return _f;throw ch(_u(_f)+" is not a function")}},6077:(j,_e,K)=>{var _i=K(7854),_o=K(614),_u=_i.String,ch=_i.TypeError;j.exports=function(_f){if("object"==typeof _f||_o(_f))return _f;throw ch("Can't set "+_u(_f)+" as a prototype")}},1223:(j,_e,K)=>{var _i=K(5112),_o=K(30),_u=K(3070),ch=_i("unscopables"),_f=Array.prototype;null==_f[ch]&&_u.f(_f,ch,{configurable:!0,value:_o(null)}),j.exports=function(o_){_f[ch][o_]=!0}},9670:(j,_e,K)=>{var _i=K(7854),_o=K(111),_u=_i.String,ch=_i.TypeError;j.exports=function(_f){if(_o(_f))return _f;throw ch(_u(_f)+" is not an object")}},1318:(j,_e,K)=>{var _i=K(5656),_o=K(1400),_u=K(6244),ch=function(_f){return function(o_,i_,u_){var g_,__=_i(o_),w_=_u(__),k_=_o(u_,w_);if(_f&&i_!=i_){for(;w_>k_;)if((g_=__[k_++])!=g_)return!0}else for(;w_>k_;k_++)if((_f||k_ in __)&&__[k_]===i_)return _f||k_||0;return!_f&&-1}};j.exports={includes:ch(!0),indexOf:ch(!1)}},4326:(j,_e,K)=>{var _i=K(1702),_o=_i({}.toString),_u=_i("".slice);j.exports=function(ch){return _u(_o(ch),8,-1)}},648:(j,_e,K)=>{var _i=K(7854),_o=K(1694),_u=K(614),ch=K(4326),_f=K(5112)("toStringTag"),o_=_i.Object,i_="Arguments"==ch(function(){return arguments}());j.exports=_o?ch:function(u_){var g_,__,w_;return void 0===u_?"Undefined":null===u_?"Null":"string"==typeof(__=function(k_,Pv){try{return k_[Pv]}catch(f0){}}(g_=o_(u_),_f))?__:i_?ch(g_):"Object"==(w_=ch(g_))&&_u(g_.callee)?"Arguments":w_}},7741:(j,_e,K)=>{var _i=K(1702)("".replace),_o=String(Error("zxcasd").stack),_u=/\n\s*at [^:]*:[^\n]*/,ch=_u.test(_o);j.exports=function(_f,o_){if(ch&&"string"==typeof _f)for(;o_--;)_f=_i(_f,_u,"");return _f}},9920:(j,_e,K)=>{var _i=K(2597),_o=K(3887),_u=K(1236),ch=K(3070);j.exports=function(_f,o_,i_){for(var u_=_o(o_),g_=ch.f,__=_u.f,w_=0;w_<u_.length;w_++){var k_=u_[w_];_i(_f,k_)||i_&&_i(i_,k_)||g_(_f,k_,__(o_,k_))}}},8544:(j,_e,K)=>{var _i=K(7293);j.exports=!_i(function(){function _o(){}return _o.prototype.constructor=null,Object.getPrototypeOf(new _o)!==_o.prototype})},4994:(j,_e,K)=>{var _i=K(3383).IteratorPrototype,_o=K(30),_u=K(9114),ch=K(8003),_f=K(7497),o_=function(){return this};j.exports=function(i_,u_,g_,__){var w_=u_+" Iterator";return i_.prototype=_o(_i,{next:_u(+!__,g_)}),ch(i_,w_,!1,!0),_f[w_]=o_,i_}},8880:(j,_e,K)=>{var _i=K(9781),_o=K(3070),_u=K(9114);j.exports=_i?function(ch,_f,o_){return _o.f(ch,_f,_u(1,o_))}:function(ch,_f,o_){return ch[_f]=o_,ch}},9114:j=>{j.exports=function(_e,K){return{enumerable:!(1&_e),configurable:!(2&_e),writable:!(4&_e),value:K}}},654:(j,_e,K)=>{var _i=K(2109),_o=K(6916),_u=K(1913),ch=K(6530),_f=K(614),o_=K(4994),i_=K(9518),u_=K(7674),g_=K(8003),__=K(8880),w_=K(1320),k_=K(5112),Pv=K(7497),f0=K(3383),v0=ch.PROPER,I0=ch.CONFIGURABLE,iI=f0.IteratorPrototype,H0=f0.BUGGY_SAFARI_ITERATORS,Z0=k_("iterator"),j_="values",Z_="entries",o0=function(){return this};j.exports=function(W0,q_,_v,u0,B0,$0,A0){o_(_v,q_,u0);var e_,y_,N_,d0=function(FR){if(FR===B0&&K1)return K1;if(!H0&&FR in BI)return BI[FR];switch(FR){case"keys":case j_:case Z_:return function(){return new _v(this,FR)}}return function(){return new _v(this)}},q0=q_+" Iterator",jI=!1,BI=W0.prototype,WI=BI[Z0]||BI["@@iterator"]||B0&&BI[B0],K1=!H0&&WI||d0(B0),ZO="Array"==q_&&BI.entries||WI;if(ZO&&(e_=i_(ZO.call(new W0)))!==Object.prototype&&e_.next&&(_u||i_(e_)===iI||(u_?u_(e_,iI):_f(e_[Z0])||w_(e_,Z0,o0)),g_(e_,q0,!0,!0),_u&&(Pv[q0]=o0)),v0&&B0==j_&&WI&&WI.name!==j_&&(!_u&&I0?__(BI,"name",j_):(jI=!0,K1=function(){return _o(WI,this)})),B0)if(y_={values:d0(j_),keys:$0?K1:d0("keys"),entries:d0(Z_)},A0)for(N_ in y_)(H0||jI||!(N_ in BI))&&w_(BI,N_,y_[N_]);else _i({target:q_,proto:!0,forced:H0||jI},y_);return _u&&!A0||BI[Z0]===K1||w_(BI,Z0,K1,{name:B0}),Pv[q_]=K1,y_}},9781:(j,_e,K)=>{var _i=K(7293);j.exports=!_i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(j,_e,K)=>{var _i=K(7854),_o=K(111),_u=_i.document,ch=_o(_u)&&_o(_u.createElement);j.exports=function(_f){return ch?_u.createElement(_f):{}}},8324:j=>{j.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(j,_e,K)=>{var _i=K(317)("span").classList,_o=_i&&_i.constructor&&_i.constructor.prototype;j.exports=_o===Object.prototype?void 0:_o},8113:(j,_e,K)=>{var _i=K(5005);j.exports=_i("navigator","userAgent")||""},7392:(j,_e,K)=>{var _i,_o,_u=K(7854),ch=K(8113),_f=_u.process,o_=_u.Deno,i_=_f&&_f.versions||o_&&o_.version,u_=i_&&i_.v8;u_&&(_o=(_i=u_.split("."))[0]>0&&_i[0]<4?1:+(_i[0]+_i[1])),!_o&&ch&&(!(_i=ch.match(/Edge\/(\d+)/))||_i[1]>=74)&&(_i=ch.match(/Chrome\/(\d+)/))&&(_o=+_i[1]),j.exports=_o},748:j=>{j.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(j,_e,K)=>{var _i=K(7293),_o=K(9114);j.exports=!_i(function(){var _u=Error("a");return!("stack"in _u)||(Object.defineProperty(_u,"stack",_o(1,7)),7!==_u.stack)})},2109:(j,_e,K)=>{var _i=K(7854),_o=K(1236).f,_u=K(8880),ch=K(1320),_f=K(3505),o_=K(9920),i_=K(4705);j.exports=function(u_,g_){var __,w_,k_,Pv,f0,v0=u_.target,I0=u_.global,iI=u_.stat;if(__=I0?_i:iI?_i[v0]||_f(v0,{}):(_i[v0]||{}).prototype)for(w_ in g_){if(Pv=g_[w_],k_=u_.noTargetGet?(f0=_o(__,w_))&&f0.value:__[w_],!i_(I0?w_:v0+(iI?".":"#")+w_,u_.forced)&&void 0!==k_){if(typeof Pv==typeof k_)continue;o_(Pv,k_)}(u_.sham||k_&&k_.sham)&&_u(Pv,"sham",!0),ch(__,w_,Pv,u_)}}},7293:j=>{j.exports=function(_e){try{return!!_e()}catch(K){return!0}}},2104:(j,_e,K)=>{var _i=K(4374),_o=Function.prototype,_u=_o.apply,ch=_o.call;j.exports="object"==typeof Reflect&&Reflect.apply||(_i?ch.bind(_u):function(){return ch.apply(_u,arguments)})},4374:(j,_e,K)=>{var _i=K(7293);j.exports=!_i(function(){var _o=function(){}.bind();return"function"!=typeof _o||_o.hasOwnProperty("prototype")})},6916:(j,_e,K)=>{var _i=K(4374),_o=Function.prototype.call;j.exports=_i?_o.bind(_o):function(){return _o.apply(_o,arguments)}},6530:(j,_e,K)=>{var _i=K(9781),_o=K(2597),_u=Function.prototype,ch=_i&&Object.getOwnPropertyDescriptor,_f=_o(_u,"name"),o_=_f&&"something"===function(){}.name,i_=_f&&(!_i||_i&&ch(_u,"name").configurable);j.exports={EXISTS:_f,PROPER:o_,CONFIGURABLE:i_}},1702:(j,_e,K)=>{var _i=K(4374),_o=Function.prototype,ch=_o.call,_f=_i&&_o.bind.bind(ch,ch);j.exports=_i?function(o_){return o_&&_f(o_)}:function(o_){return o_&&function(){return ch.apply(o_,arguments)}}},5005:(j,_e,K)=>{var _i=K(7854),_o=K(614),_u=function(ch){return _o(ch)?ch:void 0};j.exports=function(ch,_f){return arguments.length<2?_u(_i[ch]):_i[ch]&&_i[ch][_f]}},8173:(j,_e,K)=>{var _i=K(9662);j.exports=function(_o,_u){var ch=_o[_u];return null==ch?void 0:_i(ch)}},7854:(j,_e,K)=>{var _i=function(_o){return _o&&_o.Math==Math&&_o};j.exports=_i("object"==typeof globalThis&&globalThis)||_i("object"==typeof window&&window)||_i("object"==typeof self&&self)||_i("object"==typeof K.g&&K.g)||function(){return this}()||Function("return this")()},2597:(j,_e,K)=>{var _i=K(1702),_o=K(7908),_u=_i({}.hasOwnProperty);j.exports=Object.hasOwn||function(ch,_f){return _u(_o(ch),_f)}},3501:j=>{j.exports={}},490:(j,_e,K)=>{var _i=K(5005);j.exports=_i("document","documentElement")},4664:(j,_e,K)=>{var _i=K(9781),_o=K(7293),_u=K(317);j.exports=!_i&&!_o(function(){return 7!=Object.defineProperty(_u("div"),"a",{get:function(){return 7}}).a})},8361:(j,_e,K)=>{var _i=K(7854),_o=K(1702),_u=K(7293),ch=K(4326),_f=_i.Object,o_=_o("".split);j.exports=_u(function(){return!_f("z").propertyIsEnumerable(0)})?function(i_){return"String"==ch(i_)?o_(i_,""):_f(i_)}:_f},9587:(j,_e,K)=>{var _i=K(614),_o=K(111),_u=K(7674);j.exports=function(ch,_f,o_){var i_,u_;return _u&&_i(i_=_f.constructor)&&i_!==o_&&_o(u_=i_.prototype)&&u_!==o_.prototype&&_u(ch,u_),ch}},2788:(j,_e,K)=>{var _i=K(1702),_o=K(614),_u=K(5465),ch=_i(Function.toString);_o(_u.inspectSource)||(_u.inspectSource=function(_f){return ch(_f)}),j.exports=_u.inspectSource},8340:(j,_e,K)=>{var _i=K(111),_o=K(8880);j.exports=function(_u,ch){_i(ch)&&"cause"in ch&&_o(_u,"cause",ch.cause)}},9909:(j,_e,K)=>{var _i,_o,_u,ch=K(8536),_f=K(7854),o_=K(1702),i_=K(111),u_=K(8880),g_=K(2597),__=K(5465),w_=K(6200),k_=K(3501),Pv="Object already initialized",f0=_f.TypeError;if(ch||__.state){var I0=__.state||(__.state=new(0,_f.WeakMap)),iI=o_(I0.get),H0=o_(I0.has),Z0=o_(I0.set);_i=function(j_,Z_){if(H0(I0,j_))throw new f0(Pv);return Z_.facade=j_,Z0(I0,j_,Z_),Z_},_o=function(j_){return iI(I0,j_)||{}},_u=function(j_){return H0(I0,j_)}}else{var a0=w_("state");k_[a0]=!0,_i=function(j_,Z_){if(g_(j_,a0))throw new f0(Pv);return Z_.facade=j_,u_(j_,a0,Z_),Z_},_o=function(j_){return g_(j_,a0)?j_[a0]:{}},_u=function(j_){return g_(j_,a0)}}j.exports={set:_i,get:_o,has:_u,enforce:function(j_){return _u(j_)?_o(j_):_i(j_,{})},getterFor:function(j_){return function(Z_){var o0;if(!i_(Z_)||(o0=_o(Z_)).type!==j_)throw f0("Incompatible receiver, "+j_+" required");return o0}}}},614:j=>{j.exports=function(_e){return"function"==typeof _e}},4705:(j,_e,K)=>{var _i=K(7293),_o=K(614),_u=/#|\.prototype\./,ch=function(g_,__){var w_=o_[_f(g_)];return w_==u_||w_!=i_&&(_o(__)?_i(__):!!__)},_f=ch.normalize=function(g_){return String(g_).replace(_u,".").toLowerCase()},o_=ch.data={},i_=ch.NATIVE="N",u_=ch.POLYFILL="P";j.exports=ch},111:(j,_e,K)=>{var _i=K(614);j.exports=function(_o){return"object"==typeof _o?null!==_o:_i(_o)}},1913:j=>{j.exports=!1},2190:(j,_e,K)=>{var _i=K(7854),_o=K(5005),_u=K(614),ch=K(7976),_f=K(3307),o_=_i.Object;j.exports=_f?function(i_){return"symbol"==typeof i_}:function(i_){var u_=_o("Symbol");return _u(u_)&&ch(u_.prototype,o_(i_))}},3383:(j,_e,K)=>{var _i,_o,_u,ch=K(7293),_f=K(614),o_=K(30),i_=K(9518),u_=K(1320),g_=K(5112),__=K(1913),w_=g_("iterator"),k_=!1;[].keys&&("next"in(_u=[].keys())?(_o=i_(i_(_u)))!==Object.prototype&&(_i=_o):k_=!0),null==_i||ch(function(){var Pv={};return _i[w_].call(Pv)!==Pv})?_i={}:__&&(_i=o_(_i)),_f(_i[w_])||u_(_i,w_,function(){return this}),j.exports={IteratorPrototype:_i,BUGGY_SAFARI_ITERATORS:k_}},7497:j=>{j.exports={}},6244:(j,_e,K)=>{var _i=K(7466);j.exports=function(_o){return _i(_o.length)}},133:(j,_e,K)=>{var _i=K(7392),_o=K(7293);j.exports=!!Object.getOwnPropertySymbols&&!_o(function(){var _u=Symbol();return!String(_u)||!(Object(_u)instanceof Symbol)||!Symbol.sham&&_i&&_i<41})},8536:(j,_e,K)=>{var _i=K(7854),_o=K(614),_u=K(2788),ch=_i.WeakMap;j.exports=_o(ch)&&/native code/.test(_u(ch))},6277:(j,_e,K)=>{var _i=K(1340);j.exports=function(_o,_u){return void 0===_o?arguments.length<2?"":_u:_i(_o)}},30:(j,_e,K)=>{var _i,_o=K(9670),_u=K(6048),ch=K(748),_f=K(3501),o_=K(490),i_=K(317),u_=K(6200)("IE_PROTO"),g_=function(){},__=function(Pv){return"<script>"+Pv+"<\/script>"},w_=function(Pv){Pv.write(__("")),Pv.close();var f0=Pv.parentWindow.Object;return Pv=null,f0},k_=function(){try{_i=new ActiveXObject("htmlfile")}catch(I0){}var Pv,f0;k_="undefined"!=typeof document?document.domain&&_i?w_(_i):((f0=i_("iframe")).style.display="none",o_.appendChild(f0),f0.src=String("javascript:"),(Pv=f0.contentWindow.document).open(),Pv.write(__("document.F=Object")),Pv.close(),Pv.F):w_(_i);for(var v0=ch.length;v0--;)delete k_.prototype[ch[v0]];return k_()};_f[u_]=!0,j.exports=Object.create||function(Pv,f0){var v0;return null!==Pv?(g_.prototype=_o(Pv),v0=new g_,g_.prototype=null,v0[u_]=Pv):v0=k_(),void 0===f0?v0:_u.f(v0,f0)}},6048:(j,_e,K)=>{var _i=K(9781),_o=K(3353),_u=K(3070),ch=K(9670),_f=K(5656),o_=K(1956);_e.f=_i&&!_o?Object.defineProperties:function(i_,u_){ch(i_);for(var g_,__=_f(u_),w_=o_(u_),k_=w_.length,Pv=0;k_>Pv;)_u.f(i_,g_=w_[Pv++],__[g_]);return i_}},3070:(j,_e,K)=>{var _i=K(7854),_o=K(9781),_u=K(4664),ch=K(3353),_f=K(9670),o_=K(4948),i_=_i.TypeError,u_=Object.defineProperty,g_=Object.getOwnPropertyDescriptor;_e.f=_o?ch?function(__,w_,k_){if(_f(__),w_=o_(w_),_f(k_),"function"==typeof __&&"prototype"===w_&&"value"in k_&&"writable"in k_&&!k_.writable){var Pv=g_(__,w_);Pv&&Pv.writable&&(__[w_]=k_.value,k_={configurable:"configurable"in k_?k_.configurable:Pv.configurable,enumerable:"enumerable"in k_?k_.enumerable:Pv.enumerable,writable:!1})}return u_(__,w_,k_)}:u_:function(__,w_,k_){if(_f(__),w_=o_(w_),_f(k_),_u)try{return u_(__,w_,k_)}catch(Pv){}if("get"in k_||"set"in k_)throw i_("Accessors not supported");return"value"in k_&&(__[w_]=k_.value),__}},1236:(j,_e,K)=>{var _i=K(9781),_o=K(6916),_u=K(5296),ch=K(9114),_f=K(5656),o_=K(4948),i_=K(2597),u_=K(4664),g_=Object.getOwnPropertyDescriptor;_e.f=_i?g_:function(__,w_){if(__=_f(__),w_=o_(w_),u_)try{return g_(__,w_)}catch(k_){}if(i_(__,w_))return ch(!_o(_u.f,__,w_),__[w_])}},8006:(j,_e,K)=>{var _i=K(6324),_o=K(748).concat("length","prototype");_e.f=Object.getOwnPropertyNames||function(_u){return _i(_u,_o)}},5181:(j,_e)=>{_e.f=Object.getOwnPropertySymbols},9518:(j,_e,K)=>{var _i=K(7854),_o=K(2597),_u=K(614),ch=K(7908),_f=K(6200),o_=K(8544),i_=_f("IE_PROTO"),u_=_i.Object,g_=u_.prototype;j.exports=o_?u_.getPrototypeOf:function(__){var w_=ch(__);if(_o(w_,i_))return w_[i_];var k_=w_.constructor;return _u(k_)&&w_ instanceof k_?k_.prototype:w_ instanceof u_?g_:null}},7976:(j,_e,K)=>{var _i=K(1702);j.exports=_i({}.isPrototypeOf)},6324:(j,_e,K)=>{var _i=K(1702),_o=K(2597),_u=K(5656),ch=K(1318).indexOf,_f=K(3501),o_=_i([].push);j.exports=function(i_,u_){var g_,__=_u(i_),w_=0,k_=[];for(g_ in __)!_o(_f,g_)&&_o(__,g_)&&o_(k_,g_);for(;u_.length>w_;)_o(__,g_=u_[w_++])&&(~ch(k_,g_)||o_(k_,g_));return k_}},1956:(j,_e,K)=>{var _i=K(6324),_o=K(748);j.exports=Object.keys||function(_u){return _i(_u,_o)}},5296:(j,_e)=>{var K={}.propertyIsEnumerable,_i=Object.getOwnPropertyDescriptor,_o=_i&&!K.call({1:2},1);_e.f=_o?function(_u){var ch=_i(this,_u);return!!ch&&ch.enumerable}:K},7674:(j,_e,K)=>{var _i=K(1702),_o=K(9670),_u=K(6077);j.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var ch,_f=!1,o_={};try{(ch=_i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o_,[]),_f=o_ instanceof Array}catch(i_){}return function(i_,u_){return _o(i_),_u(u_),_f?ch(i_,u_):i_.__proto__=u_,i_}}():void 0)},2140:(j,_e,K)=>{var _i=K(7854),_o=K(6916),_u=K(614),ch=K(111),_f=_i.TypeError;j.exports=function(o_,i_){var u_,g_;if("string"===i_&&_u(u_=o_.toString)&&!ch(g_=_o(u_,o_))||_u(u_=o_.valueOf)&&!ch(g_=_o(u_,o_))||"string"!==i_&&_u(u_=o_.toString)&&!ch(g_=_o(u_,o_)))return g_;throw _f("Can't convert object to primitive value")}},3887:(j,_e,K)=>{var _i=K(5005),_o=K(1702),_u=K(8006),ch=K(5181),_f=K(9670),o_=_o([].concat);j.exports=_i("Reflect","ownKeys")||function(i_){var u_=_u.f(_f(i_)),g_=ch.f;return g_?o_(u_,g_(i_)):u_}},1320:(j,_e,K)=>{var _i=K(7854),_o=K(614),_u=K(2597),ch=K(8880),_f=K(3505),o_=K(2788),i_=K(9909),u_=K(6530).CONFIGURABLE,g_=i_.get,__=i_.enforce,w_=String(String).split("String");(j.exports=function(k_,Pv,f0,v0){var I0,iI=!!v0&&!!v0.unsafe,H0=!!v0&&!!v0.enumerable,Z0=!!v0&&!!v0.noTargetGet,a0=v0&&void 0!==v0.name?v0.name:Pv;_o(f0)&&("Symbol("===String(a0).slice(0,7)&&(a0="["+String(a0).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!_u(f0,"name")||u_&&f0.name!==a0)&&ch(f0,"name",a0),(I0=__(f0)).source||(I0.source=w_.join("string"==typeof a0?a0:""))),k_!==_i?(iI?!Z0&&k_[Pv]&&(H0=!0):delete k_[Pv],H0?k_[Pv]=f0:ch(k_,Pv,f0)):H0?k_[Pv]=f0:_f(Pv,f0)})(Function.prototype,"toString",function(){return _o(this)&&g_(this).source||o_(this)})},2261:(j,_e,K)=>{var _i,_o,_u=K(6916),ch=K(1702),_f=K(1340),o_=K(7066),i_=K(2999),u_=K(2309),g_=K(30),__=K(9909).get,w_=K(9441),k_=K(7168),Pv=u_("native-string-replace",String.prototype.replace),f0=RegExp.prototype.exec,v0=f0,I0=ch("".charAt),iI=ch("".indexOf),H0=ch("".replace),Z0=ch("".slice),a0=(_o=/b*/g,_u(f0,_i=/a/,"a"),_u(f0,_o,"a"),0!==_i.lastIndex||0!==_o.lastIndex),j_=i_.BROKEN_CARET,Z_=void 0!==/()??/.exec("")[1];(a0||Z_||j_||w_||k_)&&(v0=function(o0){var W0,q_,_v,u0,B0,$0,A0,e_=this,y_=__(e_),N_=_f(o0),d0=y_.raw;if(d0)return d0.lastIndex=e_.lastIndex,W0=_u(v0,d0,N_),e_.lastIndex=d0.lastIndex,W0;var q0=y_.groups,jI=j_&&e_.sticky,BI=_u(o_,e_),WI=e_.source,K1=0,ZO=N_;if(jI&&(BI=H0(BI,"y",""),-1===iI(BI,"g")&&(BI+="g"),ZO=Z0(N_,e_.lastIndex),e_.lastIndex>0&&(!e_.multiline||e_.multiline&&"\n"!==I0(N_,e_.lastIndex-1))&&(WI="(?: "+WI+")",ZO=" "+ZO,K1++),q_=new RegExp("^(?:"+WI+")",BI)),Z_&&(q_=new RegExp("^"+WI+"$(?!\\s)",BI)),a0&&(_v=e_.lastIndex),u0=_u(f0,jI?q_:e_,ZO),jI?u0?(u0.input=Z0(u0.input,K1),u0[0]=Z0(u0[0],K1),u0.index=e_.lastIndex,e_.lastIndex+=u0[0].length):e_.lastIndex=0:a0&&u0&&(e_.lastIndex=e_.global?u0.index+u0[0].length:_v),Z_&&u0&&u0.length>1&&_u(Pv,u0[0],q_,function(){for(B0=1;B0<arguments.length-2;B0++)void 0===arguments[B0]&&(u0[B0]=void 0)}),u0&&q0)for(u0.groups=$0=g_(null),B0=0;B0<q0.length;B0++)$0[(A0=q0[B0])[0]]=u0[A0[1]];return u0}),j.exports=v0},7066:(j,_e,K)=>{var _i=K(9670);j.exports=function(){var _o=_i(this),_u="";return _o.global&&(_u+="g"),_o.ignoreCase&&(_u+="i"),_o.multiline&&(_u+="m"),_o.dotAll&&(_u+="s"),_o.unicode&&(_u+="u"),_o.sticky&&(_u+="y"),_u}},2999:(j,_e,K)=>{var _i=K(7293),_o=K(7854).RegExp,_u=_i(function(){var o_=_o("a","y");return o_.lastIndex=2,null!=o_.exec("abcd")}),ch=_u||_i(function(){return!_o("a","y").sticky}),_f=_u||_i(function(){var o_=_o("^r","gy");return o_.lastIndex=2,null!=o_.exec("str")});j.exports={BROKEN_CARET:_f,MISSED_STICKY:ch,UNSUPPORTED_Y:_u}},9441:(j,_e,K)=>{var _i=K(7293),_o=K(7854).RegExp;j.exports=_i(function(){var _u=_o(".","s");return!(_u.dotAll&&_u.exec("\n")&&"s"===_u.flags)})},7168:(j,_e,K)=>{var _i=K(7293),_o=K(7854).RegExp;j.exports=_i(function(){var _u=_o("(?<a>b)","g");return"b"!==_u.exec("b").groups.a||"bc"!=="b".replace(_u,"$<a>c")})},4488:(j,_e,K)=>{var _i=K(7854).TypeError;j.exports=function(_o){if(null==_o)throw _i("Can't call method on "+_o);return _o}},3505:(j,_e,K)=>{var _i=K(7854),_o=Object.defineProperty;j.exports=function(_u,ch){try{_o(_i,_u,{value:ch,configurable:!0,writable:!0})}catch(_f){_i[_u]=ch}return ch}},8003:(j,_e,K)=>{var _i=K(3070).f,_o=K(2597),_u=K(5112)("toStringTag");j.exports=function(ch,_f,o_){ch&&!o_&&(ch=ch.prototype),ch&&!_o(ch,_u)&&_i(ch,_u,{configurable:!0,value:_f})}},6200:(j,_e,K)=>{var _i=K(2309),_o=K(9711),_u=_i("keys");j.exports=function(ch){return _u[ch]||(_u[ch]=_o(ch))}},5465:(j,_e,K)=>{var _i=K(7854),_o=K(3505),_u="__core-js_shared__",ch=_i[_u]||_o(_u,{});j.exports=ch},2309:(j,_e,K)=>{var _i=K(1913),_o=K(5465);(j.exports=function(_u,ch){return _o[_u]||(_o[_u]=void 0!==ch?ch:{})})("versions",[]).push({version:"3.20.3",mode:_i?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(j,_e,K)=>{var _i=K(9303),_o=Math.max,_u=Math.min;j.exports=function(ch,_f){var o_=_i(ch);return o_<0?_o(o_+_f,0):_u(o_,_f)}},5656:(j,_e,K)=>{var _i=K(8361),_o=K(4488);j.exports=function(_u){return _i(_o(_u))}},9303:j=>{var _e=Math.ceil,K=Math.floor;j.exports=function(_i){var _o=+_i;return _o!=_o||0===_o?0:(_o>0?K:_e)(_o)}},7466:(j,_e,K)=>{var _i=K(9303),_o=Math.min;j.exports=function(_u){return _u>0?_o(_i(_u),9007199254740991):0}},7908:(j,_e,K)=>{var _i=K(7854),_o=K(4488),_u=_i.Object;j.exports=function(ch){return _u(_o(ch))}},7593:(j,_e,K)=>{var _i=K(7854),_o=K(6916),_u=K(111),ch=K(2190),_f=K(8173),o_=K(2140),i_=K(5112),u_=_i.TypeError,g_=i_("toPrimitive");j.exports=function(__,w_){if(!_u(__)||ch(__))return __;var k_,Pv=_f(__,g_);if(Pv){if(void 0===w_&&(w_="default"),k_=_o(Pv,__,w_),!_u(k_)||ch(k_))return k_;throw u_("Can't convert object to primitive value")}return void 0===w_&&(w_="number"),o_(__,w_)}},4948:(j,_e,K)=>{var _i=K(7593),_o=K(2190);j.exports=function(_u){var ch=_i(_u,"string");return _o(ch)?ch:ch+""}},1694:(j,_e,K)=>{var _i={};_i[K(5112)("toStringTag")]="z",j.exports="[object z]"===String(_i)},1340:(j,_e,K)=>{var _i=K(7854),_o=K(648),_u=_i.String;j.exports=function(ch){if("Symbol"===_o(ch))throw TypeError("Cannot convert a Symbol value to a string");return _u(ch)}},6330:(j,_e,K)=>{var _i=K(7854).String;j.exports=function(_o){try{return _i(_o)}catch(_u){return"Object"}}},9711:(j,_e,K)=>{var _i=K(1702),_o=0,_u=Math.random(),ch=_i(1..toString);j.exports=function(_f){return"Symbol("+(void 0===_f?"":_f)+")_"+ch(++_o+_u,36)}},3307:(j,_e,K)=>{var _i=K(133);j.exports=_i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(j,_e,K)=>{var _i=K(9781),_o=K(7293);j.exports=_i&&_o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(j,_e,K)=>{var _i=K(7854),_o=K(2309),_u=K(2597),ch=K(9711),_f=K(133),o_=K(3307),i_=_o("wks"),u_=_i.Symbol,g_=u_&&u_.for,__=o_?u_:u_&&u_.withoutSetter||ch;j.exports=function(w_){if(!_u(i_,w_)||!_f&&"string"!=typeof i_[w_]){var k_="Symbol."+w_;i_[w_]=_f&&_u(u_,w_)?u_[w_]:o_&&g_?g_(k_):__(k_)}return i_[w_]}},9191:(j,_e,K)=>{var _i=K(5005),_o=K(2597),_u=K(8880),ch=K(7976),_f=K(7674),o_=K(9920),i_=K(9587),u_=K(6277),g_=K(8340),__=K(7741),w_=K(2914),k_=K(1913);j.exports=function(Pv,f0,v0,I0){var iI=I0?2:1,H0=Pv.split("."),Z0=H0[H0.length-1],a0=_i.apply(null,H0);if(a0){var j_=a0.prototype;if(!k_&&_o(j_,"cause")&&delete j_.cause,!v0)return a0;var Z_=_i("Error"),o0=f0(function(W0,q_){var _v=u_(I0?q_:W0,void 0),u0=I0?new a0(W0):new a0;return void 0!==_v&&_u(u0,"message",_v),w_&&_u(u0,"stack",__(u0.stack,2)),this&&ch(j_,this)&&i_(u0,this,o0),arguments.length>iI&&g_(u0,arguments[iI]),u0});if(o0.prototype=j_,"Error"!==Z0&&(_f?_f(o0,Z_):o_(o0,Z_,{name:!0})),o_(o0,a0),!k_)try{j_.name!==Z0&&_u(j_,"name",Z0),j_.constructor=o0}catch(W0){}return o0}}},6992:(j,_e,K)=>{var _i=K(5656),_o=K(1223),_u=K(7497),ch=K(9909),_f=K(3070).f,o_=K(654),i_=K(1913),u_=K(9781),g_="Array Iterator",__=ch.set,w_=ch.getterFor(g_);j.exports=o_(Array,"Array",function(Pv,f0){__(this,{type:g_,target:_i(Pv),index:0,kind:f0})},function(){var Pv=w_(this),f0=Pv.target,v0=Pv.kind,I0=Pv.index++;return!f0||I0>=f0.length?(Pv.target=void 0,{value:void 0,done:!0}):"keys"==v0?{value:I0,done:!1}:"values"==v0?{value:f0[I0],done:!1}:{value:[I0,f0[I0]],done:!1}},"values");var k_=_u.Arguments=_u.Array;if(_o("keys"),_o("values"),_o("entries"),!i_&&u_&&"values"!==k_.name)try{_f(k_,"name",{value:"values"})}catch(Pv){}},1703:(j,_e,K)=>{var _i=K(2109),_o=K(7854),_u=K(2104),ch=K(9191),_f=_o.WebAssembly,o_=7!==Error("e",{cause:7}).cause,i_=function(g_,__){var w_={};w_[g_]=ch(g_,__,o_),_i({global:!0,forced:o_},w_)},u_=function(g_,__){if(_f&&_f[g_]){var w_={};w_[g_]=ch("WebAssembly."+g_,__,o_),_i({target:"WebAssembly",stat:!0,forced:o_},w_)}};i_("Error",function(g_){return function(__){return _u(g_,this,arguments)}}),i_("EvalError",function(g_){return function(__){return _u(g_,this,arguments)}}),i_("RangeError",function(g_){return function(__){return _u(g_,this,arguments)}}),i_("ReferenceError",function(g_){return function(__){return _u(g_,this,arguments)}}),i_("SyntaxError",function(g_){return function(__){return _u(g_,this,arguments)}}),i_("TypeError",function(g_){return function(__){return _u(g_,this,arguments)}}),i_("URIError",function(g_){return function(__){return _u(g_,this,arguments)}}),u_("CompileError",function(g_){return function(__){return _u(g_,this,arguments)}}),u_("LinkError",function(g_){return function(__){return _u(g_,this,arguments)}}),u_("RuntimeError",function(g_){return function(__){return _u(g_,this,arguments)}})},4916:(j,_e,K)=>{var _i=K(2109),_o=K(2261);_i({target:"RegExp",proto:!0,forced:/./.exec!==_o},{exec:_o})},3948:(j,_e,K)=>{var _i=K(7854),_o=K(8324),_u=K(8509),ch=K(6992),_f=K(8880),o_=K(5112),i_=o_("iterator"),u_=o_("toStringTag"),g_=ch.values,__=function(k_,Pv){if(k_){if(k_[i_]!==g_)try{_f(k_,i_,g_)}catch(v0){k_[i_]=g_}if(k_[u_]||_f(k_,u_,Pv),_o[Pv])for(var f0 in ch)if(k_[f0]!==ch[f0])try{_f(k_,f0,ch[f0])}catch(v0){k_[f0]=ch[f0]}}};for(var w_ in _o)__(_i[w_]&&_i[w_].prototype,w_);__(_u,"DOMTokenList")}},y={};function w(j){var _e=y[j];if(void 0!==_e)return _e.exports;var K=y[j]={exports:{}};return A[j](K,K.exports,w),K.exports}w.n=j=>{var _e=j&&j.__esModule?()=>j.default:()=>j;return w.d(_e,{a:_e}),_e},w.d=(j,_e)=>{for(var K in _e)w.o(_e,K)&&!w.o(j,K)&&Object.defineProperty(j,K,{enumerable:!0,get:_e[K]})},w.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(j){if("object"==typeof window)return window}}(),w.o=(j,_e)=>Object.prototype.hasOwnProperty.call(j,_e),w.r=j=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})};var $={};return(()=>{w.r($),w.d($,{AudioExtension:()=>iI,AudioProcessor:()=>v0,Extension:()=>I0,Ticker:()=>Z0,VideoProcessor:()=>f0,logger:()=>i_,reporter:()=>__});var j=w(4341);function _e(a0,j_,Z_){return j_ in a0?j(a0,j_,{value:Z_,enumerable:!0,configurable:!0,writable:!0}):a0[j_]=Z_,a0}w(1703),w(6992),w(3948);var K=w(3476),_i=w.n(K);function _o(){let a0=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,j_=arguments.length>1?arguments[1]:void 0;const Z_=Math.random().toString(16).substr(2,a0).toLowerCase();return Z_.length===a0?"".concat(j_).concat(Z_):"".concat(j_).concat(Z_)+_o(a0-Z_.length,"")}w(4916);const _u=Date.now(),ch={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function _f(){const a0=new Date;return a0.toTimeString().split(" ")[0]+":"+a0.getMilliseconds()}const o_=a0=>{for(const j_ in ch)if(Object.prototype.hasOwnProperty.call(ch,j_)&&ch[j_]===a0)return j_;return"DEFAULT"},i_=new class{constructor(){_e(this,"logLevel",ch.DEBUG),_e(this,"hookLog",void 0)}debug(){for(var a0=arguments.length,j_=new Array(a0),Z_=0;Z_<a0;Z_++)j_[Z_]=arguments[Z_];const o0=[ch.DEBUG].concat(j_);this.log.apply(this,o0)}info(){for(var a0=arguments.length,j_=new Array(a0),Z_=0;Z_<a0;Z_++)j_[Z_]=arguments[Z_];const o0=[ch.INFO].concat(j_);this.log.apply(this,o0)}warning(){for(var a0=arguments.length,j_=new Array(a0),Z_=0;Z_<a0;Z_++)j_[Z_]=arguments[Z_];const o0=[ch.WARNING].concat(j_);this.log.apply(this,o0)}error(){for(var a0=arguments.length,j_=new Array(a0),Z_=0;Z_<a0;Z_++)j_[Z_]=arguments[Z_];const o0=[ch.ERROR].concat(j_);this.log.apply(this,o0)}log(){for(var a0,j_=arguments.length,Z_=new Array(j_),o0=0;o0<j_;o0++)Z_[o0]=arguments[o0];if(Date.now()-_u<100)return void setTimeout(()=>{this.log(...Z_)},Date.now()-_u);const W0=Math.max(0,Math.min(4,Z_[0]));if(Z_[0]=_f()+" Agora-Extension [".concat(o_(W0),"]:"),W0<this.logLevel)return;const q_=_f()+" %cAgora-Extension [".concat(o_(W0),"]:");let _v=[];switch(W0){case ch.DEBUG:_v=[q_,"color: #64B5F6;"].concat(Z_.slice(1)),console.log.apply(console,_v);break;case ch.INFO:_v=[q_,"color: #1E88E5; font-weight: bold;"].concat(Z_.slice(1)),console.log.apply(console,_v);break;case ch.WARNING:_v=[q_,"color: #FB8C00; font-weight: bold;"].concat(Z_.slice(1)),console.warn.apply(console,_v);break;case ch.ERROR:_v=[q_,"color: #B00020; font-weight: bold;"].concat(Z_.slice(1)),console.error.apply(console,_v)}null===(a0=this.hookLog)||void 0===a0||a0.call(this,W0,_v)}};function u_(a0,j_){var Z_=Object.keys(a0);if(Object.getOwnPropertySymbols){var o0=Object.getOwnPropertySymbols(a0);j_&&(o0=o0.filter(function(W0){return Object.getOwnPropertyDescriptor(a0,W0).enumerable})),Z_.push.apply(Z_,o0)}return Z_}function g_(a0){for(var j_=1;j_<arguments.length;j_++){var Z_=null!=arguments[j_]?arguments[j_]:{};j_%2?u_(Object(Z_),!0).forEach(function(o0){_e(a0,o0,Z_[o0])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a0,Object.getOwnPropertyDescriptors(Z_)):u_(Object(Z_)).forEach(function(o0){Object.defineProperty(a0,o0,Object.getOwnPropertyDescriptor(Z_,o0))})}return a0}const __=new class{constructor(){_e(this,"apiInvokeMsgQueue",[]),_e(this,"hookApiInvoke",void 0)}reportApiInvoke(a0){a0.timeout=a0.timeout||6e4,a0.reportResult=void 0===a0.reportResult||a0.reportResult;const j_=Date.now(),Z_=()=>({name:a0.name,apiInvokeTime:j_,options:a0.options});let o0=!1;var W0;(W0=a0.timeout,new(_i())(_v=>{window.setTimeout(_v,W0)})).then(()=>{o0||(this.sendApiInvoke(g_(g_({},Z_()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),i_.debug("".concat(a0.name," timeout")))});const q_=new Error("".concat(a0.name,": this api invoke is end"));return{onSuccess:_v=>{if(o0)throw q_;o0=!0,this.sendApiInvoke(g_(g_({},Z_()),{},{success:!0},a0.reportResult&&{result:_v}))},onError:_v=>{if(o0)throw _v;o0=!0,this.sendApiInvoke(g_(g_({},Z_()),{},{success:!1,error:_v.toString()}))}}}sendApiInvoke(a0){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,a0]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(a0)}};function w_(a0,j_){var Z_=Object.keys(a0);if(Object.getOwnPropertySymbols){var o0=Object.getOwnPropertySymbols(a0);j_&&(o0=o0.filter(function(W0){return Object.getOwnPropertyDescriptor(a0,W0).enumerable})),Z_.push.apply(Z_,o0)}return Z_}function k_(a0){for(var j_=1;j_<arguments.length;j_++){var Z_=null!=arguments[j_]?arguments[j_]:{};j_%2?w_(Object(Z_),!0).forEach(function(o0){_e(a0,o0,Z_[o0])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a0,Object.getOwnPropertyDescriptors(Z_)):w_(Object(Z_)).forEach(function(o0){Object.defineProperty(a0,o0,Object.getOwnPropertyDescriptor(Z_,o0))})}return a0}class Pv extends class{constructor(){_e(this,"_events",{}),_e(this,"addListener",this.on)}getListeners(j_){return this._events[j_]?this._events[j_].map(Z_=>Z_.listener):[]}on(j_,Z_){this._events[j_]||(this._events[j_]=[]);const o0=this._events[j_];-1===this._indexOfListener(o0,Z_)&&o0.push({listener:Z_,once:!1})}once(j_,Z_){this._events[j_]||(this._events[j_]=[]);const o0=this._events[j_];-1===this._indexOfListener(o0,Z_)&&o0.push({listener:Z_,once:!0})}off(j_,Z_){if(!this._events[j_])return;const o0=this._events[j_],W0=this._indexOfListener(o0,Z_);-1!==W0&&o0.splice(W0,1),0===this._events[j_].length&&delete this._events[j_]}removeAllListeners(j_){j_?delete this._events[j_]:this._events={}}emit(j_){this._events[j_]||(this._events[j_]=[]);const Z_=this._events[j_].map(_v=>_v);for(var o0=arguments.length,W0=new Array(o0>1?o0-1:0),q_=1;q_<o0;q_++)W0[q_-1]=arguments[q_];for(let _v=0;_v<Z_.length;_v+=1){const u0=Z_[_v];u0.once&&this.off(j_,u0.listener),u0.listener.apply(this,W0||[])}}_indexOfListener(j_,Z_){let o0=j_.length;for(;o0--;)if(j_[o0].listener===Z_)return o0;return-1}emitAsPromise(j_){for(var Z_=arguments.length,o0=new Array(Z_>1?Z_-1:0),W0=1;W0<Z_;W0++)o0[W0-1]=arguments[W0];return 0===this.getListeners(j_).length?_i().reject(new Error("No promise event handler.")):new(_i())((q_,_v)=>{this.emit(j_,...o0,q_,_v)})}emitAsPromiseNoResponse(j_){for(var Z_=arguments.length,o0=new Array(Z_>1?Z_-1:0),W0=1;W0<Z_;W0++)o0[W0-1]=arguments[W0];return 0===this.getListeners(j_).length?_i().resolve():new(_i())((q_,_v)=>{this.emit(j_,...o0,q_,_v)})}}{get enabled(){return this._enabled}output(j_,Z_){if(this.outputTrack===j_)return;const o0=__.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:null==j_?void 0:j_.toString()}});this.outputTrack=j_,this.destination&&this.destination.updateInput({track:j_,context:Z_}),o0.onSuccess()}constructor(){super(),_e(this,"inputTrack",void 0),_e(this,"outputTrack",void 0),_e(this,"_enabled",!0),_e(this,"_source",void 0),_e(this,"ID",_o(6,"")),_e(this,"destination",void 0),_e(this,"context",void 0),_e(this,"name",void 0)}enable(){if(this._enabled)return;const j_=__.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});i_.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var Z_;const o0=null===(Z_=this.onEnableChange)||void 0===Z_?void 0:Z_.call(this,this._enabled);if(o0 instanceof _i())return o0.then(()=>{j_.onSuccess()}).catch(W0=>{throw j_.onError(W0),W0});j_.onSuccess()}catch(o0){throw j_.onError(o0),o0}}disable(){if(!this._enabled)return;const j_=__.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});i_.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var Z_;const o0=null===(Z_=this.onEnableChange)||void 0===Z_?void 0:Z_.call(this,this._enabled);if(o0 instanceof _i())return o0.then(()=>{j_.onSuccess()}).catch(W0=>{throw j_.onError(W0),W0});j_.onSuccess()}catch(o0){throw j_.onError(o0),o0}}}class f0 extends Pv{get kind(){return"video"}pipe(j_){const Z_=__.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:j_.name}});if(this.destination===j_)return Z_.onSuccess(),j_;if(j_._source){const o0=new Error("Processor ".concat(j_.name," already piped, please call unpipe beforehand."));throw Z_.onError(o0),o0}return this.destination&&this.unpipe(),this.destination=j_,j_._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),Z_.onSuccess(),j_}unpipe(){if(!this.destination)return;const j_=__.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});i_.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const Z_=this.destination;this.destination._source=void 0,this.destination=void 0,Z_.reset()}finally{j_.onSuccess()}}updateInput(j_){var Z_,o0;j_.context!==this.context&&(this.context=j_.context,null===(Z_=this.onPiped)||void 0===Z_||Z_.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:j_.context})),j_.track&&this.inputTrack!==j_.track&&(this.inputTrack=j_.track,null===(o0=this.onTrack)||void 0===o0||o0.call(this,j_.track,this.context))}reset(){var j_;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(j_=this.onUnpiped)||void 0===j_||j_.call(this),this.destination&&this.destination.reset()}}class v0 extends Pv{constructor(){super(...arguments),_e(this,"inputNode",void 0),_e(this,"outputNode",void 0),_e(this,"destination",void 0),_e(this,"context",void 0)}get kind(){return"audio"}pipe(j_){const Z_=__.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:j_.name}});if(this.destination===j_)return Z_.onSuccess(),j_;if(j_._source){const o0=new Error("Processor ".concat(j_.name," already piped, please call unpipe beforehand."));throw Z_.onError(o0),o0}return this.destination&&this.unpipe(),this.destination=j_,j_._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),Z_.onSuccess(),j_}unpipe(){if(!this.destination)return;i_.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const j_=__.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var Z_;let o0=this.destination;null===(Z_=this.outputNode)||void 0===Z_||Z_.disconnect(),this.destination._source=void 0,this.destination=void 0,o0.reset()}finally{j_.onSuccess()}}output(j_,Z_){if(j_ instanceof MediaStreamTrack)super.output(j_,Z_);else if(j_ instanceof AudioNode){if(this.outputNode===j_)return;const o0=__.reportApiInvoke({name:"".concat(this.name,".output"),options:k_(k_({},j_ instanceof MediaStreamTrack&&{track:j_.toString()}),j_ instanceof AudioNode&&{audioNode:j_.toString()})});this.outputNode=j_,this.destination&&this.destination.updateInput({node:j_,context:Z_}),o0.onSuccess()}}updateInput(j_){var Z_,o0,W0;j_.context!==this.context&&(this.context=j_.context,null===(Z_=this.onPiped)||void 0===Z_||Z_.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:j_.context})),j_.track&&this.inputTrack!==j_.track&&(this.inputTrack=j_.track,null===(o0=this.onTrack)||void 0===o0||o0.call(this,j_.track,this.context)),j_.node&&this.inputNode!==j_.node&&(this.inputNode=j_.node,null===(W0=this.onNode)||void 0===W0||W0.call(this,j_.node,this.context))}reset(){var j_;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(j_=this.onUnpiped)||void 0===j_||j_.call(this),this.destination&&this.destination.reset()}}class I0{constructor(){_e(this,"__registered__",!1),_e(this,"logger",i_),_e(this,"reporter",__),_e(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class iI extends I0{}let H0;class Z0{get running(){return this._running}constructor(j_,Z_){if(_e(this,"type",void 0),_e(this,"interval",void 0),_e(this,"fn",void 0),_e(this,"_running",!1),_e(this,"_osc",void 0),!j_)throw new Error;if(Z_<=0)throw new Error;this.type=j_,this.interval=Z_}add(j_){this.fn=j_}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const j_=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&j_()},this.interval)};j_();break}case"RAF":{const j_=Z_=>{requestAnimationFrame(o0=>{o0-Z_<this.interval?this._running&&j_(Z_):(this.fn&&this.fn(),this._running&&j_(o0))})};j_(performance.now());break}case"Oscillator":{H0||(H0=new AudioContext);const j_=H0.createGain();let Z_;j_.gain.value=0,j_.connect(H0.destination);const o0=()=>{this.fn&&this.fn(),Z_&&Z_.disconnect(),Z_=H0.createOscillator(),this._osc=Z_,Z_.connect(j_),this._running&&(Z_.onended=o0,Z_.start(0),Z_.stop(H0.currentTime+this.interval/1e3))};o0();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),$})()})(vie),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(Rme=HTMLCanvasElement.prototype.getContext,function(){let s=arguments;return"webgl"===s[0]&&(s=[].slice.call(arguments),s[0]="experimental-webgl"),Rme.apply(null,s)}));const vye=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function Ome(s){const p=new Uint8Array([99,114,121,112,116,105,105]),A=p.length,y=s,w=y.length,$=new Uint8Array(w),j=new Uint8Array(256);for(let _u=0;_u<256;_u++)j[_u]=_u;let _e=0;for(let _u=0;_u<256;_u++)_e=(_e+j[_u]+p[_u%A])%256,[j[_u],j[_e]]=[j[_e],j[_u]];let K,_i=0;_e=0;for(let _u=0;_u<0+w;_u++)_i=(_i+1)%256,_e=(_e+j[_i])%256,[j[_i],j[_e]]=[j[_e],j[_i]],K=j[(j[_i]+j[_e])%256],_u>=0&&($[_u-0]=y[_u-0]^K);const _o=String.fromCharCode.apply(null,Array.from($));return Function("var winSize = 5; return `"+_o+"`")()}const Dme=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class Nme{constructor(p,A){a_(this,"program",void 0),a_(this,"gl",void 0),a_(this,"kernel",void 0),this.gl=p,this.kernel=A||Dme,this.program=function(y,w){const $=Ome(w),j=function _ye(s,p,A,y){const w=[];for(let $=0;$<p.length;++$)w.push(P9(s,p[$],0===$?s.VERTEX_SHADER:s.FRAGMENT_SHADER));return function($,j,_e,K){const _i=$.createProgram();if(!_i)throw new U_(D_.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(j.forEach(_o=>{$.attachShader(_i,_o)}),_e&&_e.forEach((_o,_u)=>{$.bindAttribLocation(_i,K?K[_u]:_u,_o)}),$.linkProgram(_i),!$.getProgramParameter(_i,$.LINK_STATUS)){const _o=$.getProgramInfoLog(_i);throw $.deleteProgram(_i),new U_(D_.WEBGL_INTERNAL_ERROR,"error in program linking:"+_o)}return _i}(s,w,A,y)}(y,[Ome(vye),$]);{const _e=y.getAttribLocation(j,"a_position"),K=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,K),y.bufferData(y.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),y.STATIC_DRAW),y.enableVertexAttribArray(_e),y.vertexAttribPointer(_e,2,y.FLOAT,!1,0,0)}{const _e=y.getAttribLocation(j,"a_texCoord"),K=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,K),y.bufferData(y.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),y.STATIC_DRAW),y.enableVertexAttribArray(_e),y.vertexAttribPointer(_e,2,y.FLOAT,!1,0,0)}return j}(this.gl,this.kernel)}setUniforms(){const p=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(p,1)}}class e3 extends Nme{constructor(p,A,y,w){super(p,A),a_(this,"xOffset",void 0),a_(this,"yOffset",void 0),a_(this,"denoiseLevel",5),this.xOffset=1/y,this.yOffset=1/w}setUniforms(){const p=this.gl.getUniformLocation(this.program,"u_flipY"),A=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),y=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(A,this.xOffset,this.yOffset),this.gl.uniform1f(y,this.denoiseLevel),this.gl.uniform1f(p,1)}setParameters(p){void 0!==p.denoiseLevel&&(this.denoiseLevel=p.denoiseLevel)}setSize(p,A){this.xOffset=1/p,this.yOffset=1/A}}const yie=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class kme extends e3{constructor(p,A,y){super(p,yie,A,y)}}const yye=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class qle extends e3{constructor(p,A,y){super(p,yye,A,y)}}const Eye=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class Pme extends e3{constructor(p,A,y){super(p,Eye,A,y)}}const xme=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],Lme=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Mme=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Bme=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class Ume extends e3{constructor(p,A,y,w){super(p,xme,y,w),a_(this,"inputTexture",void 0),a_(this,"lightLevel",.1),a_(this,"rednessLevel",.5),a_(this,"mskin_he_max",175/180*3.141593),a_(this,"mskin_he_min",115/180*3.141593),a_(this,"mskin_hc_max",173/180*3.141593),a_(this,"mskin_hc_min",116/180*3.141593),a_(this,"mskin_hc_axis",2.04203545),a_(this,"mfacts_rotate_c",0),a_(this,"mfacts_rotate_le",0),a_(this,"mfacts_rotate_ge",0),a_(this,"tab_addr",null),a_(this,"lutTextures",[]),this.inputTexture=A,this.init()}setUniforms(){const p=this.gl.getUniformLocation(this.program,"u_flipY"),A=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(A,this.denoiseLevel),this.gl.uniform1f(p,1);const y=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(y,this.lightLevel);const w=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(w,this.rednessLevel);const $=this.gl.getUniformLocation(this.program,"skin_he_max"),j=this.gl.getUniformLocation(this.program,"skin_he_min"),_e=this.gl.getUniformLocation(this.program,"skin_hc_max"),K=this.gl.getUniformLocation(this.program,"skin_hc_min"),_i=this.gl.getUniformLocation(this.program,"skin_hc_axis"),_o=this.gl.getUniformLocation(this.program,"facts_rotate_c"),_u=this.gl.getUniformLocation(this.program,"facts_rotate_le"),ch=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f($,this.mskin_he_max),this.gl.uniform1f(j,this.mskin_he_min),this.gl.uniform1f(_e,this.mskin_hc_max),this.gl.uniform1f(K,this.mskin_hc_min),this.gl.uniform1f(_i,this.mskin_hc_axis),this.gl.uniform1f(_o,this.mfacts_rotate_c),this.gl.uniform1f(_u,this.mfacts_rotate_le),this.gl.uniform1f(ch,this.mfacts_rotate_ge);const _f=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(_f,2);const o_=["lighten_lut"],i_=[this.gl.TEXTURE3];for(let u_=0;u_<o_.length;u_++){const g_=this.gl.getUniformLocation(this.program,o_[u_]);this.gl.activeTexture(i_[u_]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[u_]),this.gl.uniform1i(g_,u_+3)}}setParameters(p){void 0!==p.denoiseLevel&&(this.denoiseLevel=p.denoiseLevel),void 0!==p.lightLevel&&(this.lightLevel=p.lightLevel),void 0!==p.rednessLevel&&(this.rednessLevel=p.rednessLevel,this.updateRedness(this.rednessLevel)),p.lighteningContrastLevel&&this.updateLut(p.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(Mme);const p=[this.tab_addr],A=[256],y=[1];for(let w=0;w<p.length;w++){const $=this.gl.createTexture();if(!$)throw new U_(D_.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,$),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,A[w],y[w],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,p[w]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push($)}}updateRedness(p){let y,w,$=p,j=$;$>1&&($=1),$<0&&($=0),j>1&&(j=1),j<0&&(j=0),this.mfacts_rotate_c=.8*$,j<.8&&(j=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*j)/180*3.141593,this.mskin_hc_min=(116-4*j)/180*3.141593,this.mskin_hc_axis=(117-4*j)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),y=this.mskin_he_max-this.mskin_hc_max,w=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=y>.01?this.mfacts_rotate_c*w/y:this.mfacts_rotate_c,y=this.mskin_hc_min-this.mskin_he_min,w=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=y>.01?this.mfacts_rotate_c*w/y:this.mfacts_rotate_c}updateLut(p){let A=null;if(0===p&&(A=Mme),1===p&&(A=Bme),2===p&&(A=Lme),!A)throw new U_(D_.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+p);this.tab_addr=new Uint8Array(A);const y=[this.tab_addr],w=[256],$=[1];for(let j=0;j<y.length;j++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[j]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,w[j],$[j],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,y[j])}}class Iye{constructor(){a_(this,"gl",null),a_(this,"canvas",null),a_(this,"programs",[]),a_(this,"commonProgram",null),a_(this,"inputTexture",null),a_(this,"outputTextures",[]),a_(this,"fbos",[]),a_(this,"originalFrameWidth",0),a_(this,"originalFrameHeight",0),a_(this,"enableBeauty",!1),a_(this,"denoiseLevel",5),a_(this,"lightLevel",.35),a_(this,"rednessLevel",.5),a_(this,"lighteningContrastLevel",1)}setEnableBeauty(p){this.enableBeauty=!!p}init(p,A,y){if(!jS().supportWebGL)throw new U_(D_.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=y.getContext("webgl"),!this.gl)throw new U_(D_.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(p,A),!this.inputTexture)throw new U_(D_.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=y,this.programs.push(new Nme(this.gl)),this.programs.push(new kme(this.gl,p,A)),this.programs.push(new qle(this.gl,p,A)),this.programs.push(new Pme(this.gl,p,A)),this.programs.push(new Ume(this.gl,this.inputTexture,p,A)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(p){if(!this.gl||!this.commonProgram||!this.canvas)return void h_.warning("video effect manager is not init!");let A=0;if(this.originalFrameHeight===p.videoWidth&&this.originalFrameWidth===p.videoHeight)A=2;else if(this.originalFrameHeight!==p.videoHeight||this.originalFrameWidth!==p.videoWidth){if(h_.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(p.videoWidth,"x").concat(p.videoHeight)),0===p.videoHeight||0===p.videoWidth)return void h_.debug("beauty effect: skip 0 resolution frame");this.canvas.width=p.videoWidth,this.canvas.height=p.videoHeight,p.setAttribute("width",p.videoWidth.toString()),p.setAttribute("height",p.videoHeight.toString()),this.release(),this.init(p.videoWidth,p.videoHeight,this.canvas)}this.gl.viewport(0,0,p.videoWidth,p.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,p);const y=this.enableBeauty?this.programs.length-1:0;for(let $=0;$<=y;$++){const j=this.programs[$].program;this.gl.useProgram(j);const _e=this.gl.getUniformLocation(j,"u_image");this.programs[$].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[A+$%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[A+$%2]),this.gl.uniform1i(_e,0)}this.gl.useProgram(this.commonProgram);const w=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(w,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(p){this.programs.forEach(A=>{A instanceof e3&&A.setParameters({denoiseLevel:p})}),this.denoiseLevel=p}setLightLevel(p){this.programs.forEach(A=>{A instanceof e3&&A.setParameters({lightLevel:p})}),this.lightLevel=p}setRednessLevel(p){this.programs.forEach(A=>{A instanceof e3&&A.setParameters({rednessLevel:p})}),this.rednessLevel=p}setContrastLevel(p){this.programs.forEach(A=>{A instanceof e3&&A.setParameters({lighteningContrastLevel:p})}),this.lighteningContrastLevel=p}setSize(p,A){this.programs.forEach(y=>{y instanceof e3&&y.setSize(p,A)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(p,A){if(!this.gl)throw new U_(D_.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let y=0;y<4;y++){const w=this.gl.createTexture();if(!w)throw new U_(D_.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,w),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),y<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,p,A,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,A,p,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const $=this.gl.createFramebuffer();if(!$)throw new U_(D_.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,$),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,w,0),this.outputTextures.push(w),this.fbos.push($)}this.gl.viewport(0,0,p,A),this.originalFrameWidth=p,this.originalFrameHeight=A}}class bye{constructor(){a_(this,"targetFrameRate",0),a_(this,"recordedFrameCount",0),a_(this,"recordingTime",2),a_(this,"recordID",void 0)}startRecordBeautyEffectOutput(p){var A=arguments,y=this;return f(function*(){let w=A.length>1&&void 0!==A[1]?A[1]:4;if(y.recordID)throw new U_(D_.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const $=pS(6,"");return y.recordID=$,y.targetFrameRate=p,y.recordedFrameCount=0,y.recordingTime=w,yield cO(1e3*y.recordingTime),y.recordID!==$?(y.recordID=void 0,!0):(y.recordID=void 0,y.recordedFrameCount<y.targetFrameRate*y.recordingTime/2?(h_.warning("detect beauty effect overload, current framerate",y.recordedFrameCount/2),!1):(h_.debug("beauty effect current framerate",y.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class Fme extends vie.exports.VideoProcessor{constructor(){super(),a_(this,"name","BeautyProcessor"),a_(this,"fps",15),a_(this,"canvas",void 0),a_(this,"video",void 0),a_(this,"manager",void 0),a_(this,"overloadDetector",new bye),a_(this,"stopChromeBackgroundLoop",null),a_(this,"onOverload",void 0),a_(this,"stopLoop",void 0),a_(this,"lastRenderTime",0),this.fps=30,this.manager=new Iye,this._enabled=!1}onEnableChange(p){var A=this;return f(function*(){A.manager.setEnableBeauty(p),A.context&&A.inputTrack&&(p?yield A.startEffect(A.inputTrack,A.context):yield A.stopEffect(A.inputTrack,A.context))})()}setBeautyEffectOptions(p){var A=this;return f(function*(){if(void 0!==(y=p).smoothnessLevel&&$1(y.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==y.lighteningLevel&&$1(y.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==y.rednessLevel&&$1(y.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==y.lighteningContrastLevel&&dR(y.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==p.smoothnessLevel){const y=Math.max(.1,10*p.smoothnessLevel);A.manager.setDenoiseLevel(y)}var y;if(void 0!==p.lighteningLevel){const y=Math.max(.1,p.lighteningLevel/2);A.manager.setLightLevel(y)}if(void 0!==p.rednessLevel){const y=Math.max(.01,p.rednessLevel);A.manager.setRednessLevel(y)}void 0!==p.lighteningContrastLevel&&A.manager.setContrastLevel(p.lighteningContrastLevel)})()}onTrack(p,A){var y=this;return f(function*(){var w;y.video&&y.enabled&&(null===(w=y.stopLoop)||void 0===w||w.call(y),yield y.stopEffect(p,A)),yield y.startEffect(p,A)})()}startEffect(p,A){var y=this;return f(function*(){if(!y.enabled)return;const w=J1(),$=yield y.renderWithWebGL(p);y.output($,A),h_.info("start video effect, output:",y.outputTrack),y.overloadDetector.startRecordBeautyEffectOutput(y.fps).then(K=>{K||y.onOverload&&y.onOverload()});let j=!1;y.stopLoop=()=>{j=!0};const _e=()=>{y.enabled&&!j&&requestAnimationFrame(_e);const K=Date.now(),_i=1e3/y.fps,_o=y.lastRenderTime?K-y.lastRenderTime:_i;_o<_i||(y.lastRenderTime=K-(_o-_i),y.video&&y.video.paused&&y.video.play(),y.enabled&&y.video&&(y.manager.render(y.video),y.outputTrack&&y.outputTrack.requestFrame&&y.outputTrack.requestFrame(),y.overloadDetector.addFrame()))};requestAnimationFrame(_e),w.name===V1.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?y.stopChromeBackgroundLoop=i2(()=>{y.enabled&&y.video&&y.manager.render(y.video),y.outputTrack&&y.outputTrack.requestFrame&&y.outputTrack.requestFrame(),y.overloadDetector.addFrame()},y.fps):y.stopChromeBackgroundLoop&&(y.stopChromeBackgroundLoop(),y.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(p){var A=this;return f(function*(){A.canvas&&(A.canvas.remove(),A.canvas=void 0),A.video&&(A.video.remove(),A.video=void 0),A.canvas=document.createElement("canvas"),A.video=document.createElement("video"),A.video.setAttribute("autoplay",""),A.video.setAttribute("muted",""),A.video.muted=!0,A.video.setAttribute("playsinline",""),A.video.setAttribute("style","display:none"),A.video.srcObject=new MediaStream([p]);const y=new sI(K=>{const _i=()=>{A.video&&A.video.removeEventListener("playing",_i),K(void 0)};A.video&&A.video.addEventListener("playing",_i)});A.video.play(),yield y;const w=p.getSettings(),$=w.width||A.video.videoWidth,j=w.height||A.video.videoHeight;if(w.frameRate&&A.fps!==w.frameRate&&(A.fps=w.frameRate,h_.debug("beauty video processor: set fps to",A.fps)),h_.debug("beauty video processor: width ".concat($," height ").concat(j)),!$||!j)throw new U_(D_.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");A.canvas.width=$,A.canvas.height=j,A.video.setAttribute("width",$.toString()),A.video.setAttribute("height",j.toString()),A.manager.init($,j,A.canvas);const _e=jS();return A.canvas.captureStream(_e.supportRequestFrame?0:A.fps).getVideoTracks()[0]})()}stopEffect(p,A){var y=this;return f(function*(){h_.info("stop video effect"),y.overloadDetector.stopRecordBeautyEffectOutput(),y.manager.release(),y.canvas&&y.canvas.remove(),y.video&&y.video.remove(),y.canvas=void 0,y.video=void 0,y.output(p,A)})()}}function Wle(s){const p={};if(s.facingMode&&(p.facingMode=s.facingMode),s.cameraId&&(p.deviceId={exact:s.cameraId}),!s.encoderConfig)return p;const A=OK(s.encoderConfig);return p.width=A.width,p.height=A.height,!ZN()&&A.frameRate&&(p.frameRate=A.frameRate),J1().name===V1.EDGE&&"object"==typeof p.frameRate&&(p.frameRate.max=60),q2()&&(p.frameRate={ideal:30,max:30}),p}function Cye(s){const p={};s.screenSourceType&&(p.mediaSource=s.screenSourceType),s.extensionId&&_ne()&&(p.extensionId=s.extensionId),s.electronScreenSourceId&&(p.sourceId=s.electronScreenSourceId);const A=s.encoderConfig?bO(s.encoderConfig):null;return p.mandatory={chromeMediaSource:"desktop",maxWidth:A?A.width:void 0,maxHeight:A?A.height:void 0},A&&A.frameRate&&("number"==typeof A.frameRate?(p.mandatory.maxFrameRate=A.frameRate,p.mandatory.minFrameRate=A.frameRate):(p.mandatory.maxFrameRate=A.frameRate.max||A.frameRate.ideal||A.frameRate.exact||void 0,p.mandatory.minFrameRate=A.frameRate.min||A.frameRate.ideal||A.frameRate.exact||void 0),p.frameRate=A.frameRate),A&&A.width&&(p.width=A.width),A&&A.height&&(p.height=A.height),p}function jme(s){const p={};if(ZN()||(void 0!==s.AGC&&(p.autoGainControl=s.AGC),void 0!==s.AEC&&(p.echoCancellation=s.AEC),void 0!==s.ANS&&(p.noiseSuppression=s.ANS,_ne()&&s.ANS&&(p.googHighpassFilter=s.ANS))),s.encoderConfig){const A=QU(s.encoderConfig);p.channelCount=A.stereo?2:1,p.sampleRate=A.sampleRate,p.sampleSize=A.sampleSize}return s.microphoneId&&(p.deviceId={exact:s.microphoneId}),Jhe()&&(p.sampleRate=void 0),p}var o,e;(function(s){s.COVERED="COVERED",s.POSITION="POSITION",s.SIZE="SIZE",s.STYLE="STYLE"})(o||(o={})),function(s){s.UNMOUNTED="UNMOUNTED",s.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(e||(e={}));var i,d,_,B,_t,ga,_h,_g,l_,f_,R_,V_,Y_,R0,V0,J0,MI,LI,DI,y1,H1,BR,dO,Eie=new class{constructor(){a_(this,"_clientSize",null),a_(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),a_(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),a_(this,"getStyle",s=>window.getComputedStyle(s,null)),a_(this,"checkCssVisibleProperty",s=>{let p=!0;const A=this.getStyle(s),{display:y,visibility:w,opacity:$,filter:j}=A;return("none"===y||["hidden","collapse"].includes(w)||Number($)<.1)&&(p=!1),!!p&&(j&&j.split(" ").filter(_e=>{const K=_e.split("(")[0];return["brightness","blur","opacity"].includes(K)}).map(_e=>{const[K,_i]=_e.split(/\(|\)/);return[K,Number(_i.match(/^[0-9\.]+/))]}).forEach(_e=>{const[K,_i]=_e;switch(K){case"brightness":(_i<.1||_i>3)&&(p=!1);break;case"blur":_i>3&&(p=!1);break;case"opacity":_i<.1&&(p=!1)}}),p)}),a_(this,"checkPropertyUpToAllParentNodes",(s,p)=>{let A=!0,y=!0;let $=s;for(;$&&y;)p($)||(A=!1,y=!1),$=$.parentElement,$||(y=!1);return A}),a_(this,"checkActualCssVisibleIncludeInherit",s=>this.checkPropertyUpToAllParentNodes(s,this.checkCssVisibleProperty)),a_(this,"getSizeAboutClient",s=>{const{width:p,height:A,left:y,right:w,top:$,bottom:j}=s.getBoundingClientRect(),_e=this.getClientWidth(),K=this.getClientHeight();return{width:p,height:A,left:y,right:w,top:$,bottom:j,clientWidth:_e,clientHeight:K,clientMin:Math.min(_e,K)}}),a_(this,"checkActualSize",()=>{const{width:s,height:p,clientMin:A}=this._clientSize;return this.checkSizeIsVisible(s,p,A)}),a_(this,"elementFromPoint",(s,p)=>document.elementFromPoint?document.elementFromPoint(s,p):null),a_(this,"checkCoverForAPoint",(s,p,A)=>{const y=this.elementFromPoint(s,p);return null!==y&&y!==A}),a_(this,"getPointPositionList",()=>{const{width:s,height:p,left:A,top:y}=this._clientSize,w=s/6,$=p/6,j=[],_e=10**6;for(let K=0;K<5;K++)for(let _i=0;_i<5;_i++)j.push({x:(A*_e+(0===K?.1:4===K?(w*K*_e-1e5)/_e:w*K)*_e)/_e,y:(y*_e+(0===_i?.1:4===_i?($*_i*_e-1e5)/_e:$*_i)*_e)/_e});return[...j]}),a_(this,"checkElementCover",s=>this.getPointPositionList().map(p=>this.checkCoverForAPoint(p.x,p.y,s)).filter(p=>!!p).length>6),a_(this,"checkSizeIsVisible",(s,p,A)=>(s>50||A/s<=10)&&(p>50||A/p<=10)),a_(this,"checkSizeOfPartInClient",()=>{const{left:s,right:p,top:A,bottom:y,clientHeight:w,clientWidth:$,clientMin:j}=this._clientSize;let _e,K,_i,_o;if(s<0)_e=0;else{if(!(s<$))return!1;_e=s}if(p<0)return!1;if(K=p<$?p:$,A<0)_i=0;else{if(!(A<w))return!1;_i=A}return!(y<0)&&(_o=y<w?y:w,this.checkSizeIsVisible(K-_e,_o-_i,j))}),a_(this,"returnHiddenResult",s=>(this._clientSize=null,{visible:!1,reason:s})),a_(this,"checkOneElementVisible",s=>{if(s instanceof HTMLElement){if(this.checkElementIsMountedOnDom(s)){if(this.checkActualCssVisibleIncludeInherit(s)){if(this._clientSize=this.getSizeAboutClient(s),this.checkElementCover(s))return this.returnHiddenResult(o.COVERED);{const p=this.checkActualSize(),A=this.checkSizeOfPartInClient();return p&&!A?this.returnHiddenResult(o.POSITION):p?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(o.SIZE)}}return this.returnHiddenResult(o.STYLE)}return this.returnHiddenResult(e.UNMOUNTED)}return this.returnHiddenResult(e.INVALID_HTML_ELEMENT)}),a_(this,"checkElementIsMountedOnDom",s=>this.checkPropertyUpToAllParentNodes(s,p=>"HTML"!==p.nodeName.toUpperCase()?null!==p.parentElement:!!document.documentElement))}};function AEe(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function Iie(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?AEe(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):AEe(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let UR=(i=dI("LocalVideoTrack","getTrackId"),d=HT(),_=f9("LocalVideoTrack","_enabledMutex"),B=HT(),_t=f9("LocalVideoTrack","_enabledMutex"),ga=HT(),_h=Ere({report:w0}),_g=HT(),l_=HT(),f_=HT(),R_=HT(),V_=HT(),Y_=HT(),R0=HT(),i((cI((J0=class X0e extends pue{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==DR.PLAYING)}constructor(p,A,y,w,$,j){super(p,$),a_(this,"trackMediaType","video"),a_(this,"_player",void 0),a_(this,"_videoBeautyProcessor",void 0),a_(this,"_videoVisibleTimer",null),a_(this,"_previousVideoVisibleStatus",void 0),a_(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),a_(this,"_encoderConfig",void 0),a_(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),a_(this,"_optimizationMode",void 0),a_(this,"_videoHeight",void 0),a_(this,"_videoWidth",void 0),a_(this,"_forceBitrateLimit",void 0),a_(this,"_enabled",!0),a_(this,"processorDestination",void 0),a_(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=A,this._scalabiltyMode=y,this._optimizationMode=w,this._hints=j||[],-1===this._hints.indexOf(FS.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new tIe(this.getTrackId()),this.processorDestination=new eIe(this.processorContext),this.bindProcessorDestinationEvents()}play(p){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const y=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof p?p:"HTMLElement",A]});if("string"==typeof p){const $=document.getElementById(p);$?p=$:(h_.warning("[".concat(this.getTrackId(),'] can not find "#').concat(p,'" element, use document.body')),aI("warning",this,'can not find "#'.concat(p,'" element, use document.body')),p=document.body)}h_.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(A)),T0("debug",this,"play",A);const w=Iie(Iie(Iie({},this._getDefaultPlayerConfig()),A),{},{trackId:this.getTrackId(),element:p});this._player?this._player.updateConfig(w):(this._player=new k9(w),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const $=this.getVideoElementVisibleStatus();this.emit(_6.VIDEO_ELEMENT_VISIBLE_STATUS,$)}catch($){}},S0("CHECK_VIDEO_VISIBLE_INTERVAL")),y.onSuccess()}stop(){const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return p.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,h_.debug("[".concat(this.getTrackId(),"] stop video playback")),T0("debug",this,"stop"),p.onSuccess()}setEnabled(p,A){var y=this;return f(function*(){if(!A){if(p===y._enabled)return;y.stateCheck("enabled",p)}if(h_.info("[".concat(y.getTrackId(),"] start setEnabled"),p),T0("info",y,"setEnabled",p),!p){y._originMediaStreamTrack.enabled=!1;try{yield oT(y,wI.NEED_DISABLE_TRACK,y)}catch(w){throw h_.error("[".concat(y.getTrackId(),"] setEnabled to false error"),w.toString()),T0("error",y,"setEnabled",p,w.toString()),w}return A||(y._enabled=!1),h_.info("[".concat(y.getTrackId(),"] setEnabled to false success")),void T0("info",y,"setEnabled",p,"success")}y._originMediaStreamTrack.enabled=!0;try{yield oT(y,wI.NEED_ENABLE_TRACK,y)}catch(w){throw h_.error("[".concat(y.getTrackId(),"] setEnabled to true error"),w.toString()),T0("error",y,"setEnabled",p,w.toString()),w}h_.info("[".concat(y.getTrackId(),"] setEnabled to true success")),T0("info",y,"setEnabled",p,"success"),A||(y._enabled=!0)})()}setMuted(p){var A=this;return f(function*(){p!==A._muted&&(A.stateCheck("muted",p),A._muted=p,A._mediaStreamTrack.enabled=!p,h_.debug("[".concat(A.getTrackId(),"] start set muted: ").concat(p)),T0("debug",A,"setMuted",p),p?yield oT(A,wI.NEED_MUTE_TRACK,A):yield oT(A,wI.NEED_UNMUTE_TRACK,A))})()}getStats(){return BM(()=>{h_.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),aI("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),x6(this,wI.GET_STATS)||Iie({},Fne)}setBeautyEffect(p){var A=arguments,y=this;return f(function*(){let w=A.length>1&&void 0!==A[1]?A[1]:{};const $=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_VIDEO_TRACK_BEAUTY,options:[y.getTrackId(),p,w]});if(p||y._videoBeautyProcessor){if(Ane()===RR.IOS||Ane()===RR.ANDROID){const j=new U_(D_.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw $.onError(j),j}if(!y._enabled&&p){const j=new U_(D_.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw $.onError(j),j}if(h_.info("[".concat(y.getTrackId(),"] start setBeautyEffect"),p,JSON.stringify(w)),T0("info",y,"setBeautyEffect",[p,w]),y._videoBeautyProcessor||p){try{if(!y._videoBeautyProcessor)if(y._videoBeautyProcessor=new Fme,y.processor){const j=y.processor;y.pipe(y._videoBeautyProcessor).pipe(j)}else y.pipe(y._videoBeautyProcessor).pipe(y.processorDestination);yield y._videoBeautyProcessor.setBeautyEffectOptions(w),p?yield y._videoBeautyProcessor.enable():yield y._videoBeautyProcessor.disable()}catch(j){throw h_.error("[".concat(y.getTrackId(),"] setBeautyEffect error"),j.toString()),T0("info",y,"setBeautyEffect",[p,w]),$.onError(j),j}h_.info("[".concat(y.getTrackId(),"] setBeautyEffect success")),T0("info",y,"setBeautyEffect",[p,w],"success"),$.onSuccess()}else $.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(p,A,y,w){const $=this._mediaStreamTrack.clone();return new X0e($,p,A,y,w)}setBitrateLimit(p){var A=this;return f(function*(){if(h_.debug("[".concat(A.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(p))),T0("debug",A,"setBitrateLimit",p),p){A._forceBitrateLimit=p,A._encoderConfig&&(A._encoderConfig.bitrateMax=A._encoderConfig.bitrateMax&&A._encoderConfig.bitrateMax<p.max_bitrate?A._encoderConfig.bitrateMax:p.max_bitrate,A._encoderConfig.bitrateMin=p.min_bitrate);try{yield oT(A,wI.NEED_UPDATE_VIDEO_ENCODER,A)}catch(y){return y.throw()}}})()}setOptimizationMode(p){var A=this;return f(function*(){if("motion"!==p&&"detail"!==p&&"balanced"!==p)return h_.error(D_.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void T0("error",A,"setOptimizationMode",p,D_.INVALID_PARAMS);const y=A._optimizationMode;try{A._optimizationMode=p,yield oT(A,wI.SET_OPTIMIZATION_MODE,A)}catch(w){throw A._optimizationMode=y,h_.error("[".concat(A.getTrackId(),"] set optimization mode failed"),w.toString()),T0("error",A,"setOptimizationMode",p,w.toString()),w}h_.info("[".concat(A.getTrackId(),"] set optimization mode success (").concat(p,")")),T0("info",A,"setOptimizationMode",p,"success")})()}setScalabiltyMode(p){if(1===p.numSpatialLayers&&1!==p.numTemporalLayers)return h_.error(D_.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),T0("error",this,"setScalabiltyMode",p,D_.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=p,h_.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(p,")")),T0("info",this,"setScalabiltyMode",p,"success")}updateMediaStreamTrackResolution(){Sge(this._originMediaStreamTrack).then(p=>{let[A,y]=p;this._videoHeight=y,this._videoWidth=A}).catch(Bre)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:p,height:A,frameRate:y}=this.getMediaStreamTrackSettings();if(!p||!A||!y)return;const[w,$]=function(j,_e,K){const _i=S0("BITRATE_ADAPTER_TYPE");let _o;const _u=200*Math.pow(K/15,.6)*Math.pow(j*_e/640/360,.75),ch=_u;if("STANDARD_BITRATE"===_i)_o=4*_u;else{if("COMPATIABLE_BITRATE"!==_i)return;_o=2*_u}return[Math.floor(_o),Math.floor(ch)]}(p,A,y)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=$,this._encoderConfig.bitrateMax=w,h_.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(p,", h: ").concat(A,", fps: ").concat(y,"] => [brMax: ").concat(w,", brMin: ").concat($,"]")),T0("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(p,", h: ").concat(A,", fps: ").concat(y,"] => [brMax: ").concat(w,", brMin: ").concat($,"]")))}getVideoElementVisibleStatus(){try{var p,A;const y=null==this||null===(p=this._player)||void 0===p?void 0:p.getContainerElement(),w={track:this,element:null==this||null===(A=this._player)||void 0===A?void 0:A.getVideoElement(),slot:null==y?void 0:y.parentElement},{element:$,slot:j}=w;if(this.isPlaying&&$ instanceof HTMLVideoElement&&j instanceof HTMLElement){const _e=Eie.checkOneElementVisible($),K=Object.assign({},_e);if(K.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=K.visible;w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(K.visible?"Video is visible":"Invisible because of ".concat(K.reason))}return K}return}catch(y){throw new U_(D_.GET_VIDEO_ELEMENT_VISIBLE_ERROR,y.message)}}renewMediaStreamTrack(p){return f(function*(){})()}pipe(p){if(this._videoBeautyProcessor&&p!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(p);if(this.processor===p)return p;if(p._source)throw new U_(D_.INVALID_OPERATION,"Processor ".concat(p.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=p,this.processor._source=this,p.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),p}unpipe(){if(!this.processor)return;const p=this.processor;this.processor._source=void 0,this.processor=void 0,p.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var p=this;this.processorDestination.on(ZP.ON_TRACK,function(){var A=f(function*(y){y?y!==p._mediaStreamTrack&&(p._mediaStreamTrack=y,p._updatePlayerSource(),yield oT(p,wI.NEED_REPLACE_TRACK,p)):p._mediaStreamTrack!==p._originMediaStreamTrack&&(p._mediaStreamTrack=p._originMediaStreamTrack,p._updatePlayerSource(),yield oT(p,wI.NEED_REPLACE_TRACK,p))});return function(y){return A.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(ZP.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(XN.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(XN.REQUEST_CONSTRAINTS)}}).prototype,"play",[d],Object.getOwnPropertyDescriptor(J0.prototype,"play"),J0.prototype),cI(J0.prototype,"setEnabled",[_,B],Object.getOwnPropertyDescriptor(J0.prototype,"setEnabled"),J0.prototype),cI(J0.prototype,"setMuted",[_t,ga,_h],Object.getOwnPropertyDescriptor(J0.prototype,"setMuted"),J0.prototype),cI(J0.prototype,"getStats",[_g],Object.getOwnPropertyDescriptor(J0.prototype,"getStats"),J0.prototype),cI(J0.prototype,"setBeautyEffect",[l_],Object.getOwnPropertyDescriptor(J0.prototype,"setBeautyEffect"),J0.prototype),cI(J0.prototype,"getCurrentFrameData",[f_],Object.getOwnPropertyDescriptor(J0.prototype,"getCurrentFrameData"),J0.prototype),cI(J0.prototype,"setBitrateLimit",[R_],Object.getOwnPropertyDescriptor(J0.prototype,"setBitrateLimit"),J0.prototype),cI(J0.prototype,"setOptimizationMode",[V_],Object.getOwnPropertyDescriptor(J0.prototype,"setOptimizationMode"),J0.prototype),cI(J0.prototype,"setScalabiltyMode",[Y_],Object.getOwnPropertyDescriptor(J0.prototype,"setScalabiltyMode"),J0.prototype),cI(J0.prototype,"updateMediaStreamTrackResolution",[R0],Object.getOwnPropertyDescriptor(J0.prototype,"updateMediaStreamTrackResolution"),J0.prototype),V0=J0))||V0),_Ee=(MI=dI("CameraVideoTrack","getTrackId"),LI=HT(),DI=f9("CameraVideoTrack","_enabledMutex"),y1=HT(),H1=HT(),MI((cI((dO=class extends UR{constructor(s,p,A,y,w,$){var j;super(s,p.encoderConfig?OK(p.encoderConfig):{},y,w,$),j=this,a_(this,"_config",void 0),a_(this,"_originalConstraints",void 0),a_(this,"_constraints",void 0),a_(this,"_enabled",!0),a_(this,"_deviceName","default"),a_(this,"tryResumeVideoForIOS15WeChat",f(function*(){K2()&&!bae()&&Yhe()&&j._enabled&&!j._isClosed&&(h_.debug("[".concat(j.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield j.renewMediaStreamTrack())})),pI("info",this,"constructor",{trackId:$,deviceId:s.label,constraints:A,config:p}),this._config=p,this._originalConstraints=A,this._constraints=A,this._deviceName=s.label,this._config.encoderConfig&&(this._encoderConfig=OK(this._config.encoderConfig)),m1.on(VS.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),m1.on(VS.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(s){var p=this;return f(function*(){const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CAM_VIDEO_TRACK_SET_DEVICE,options:[p.getTrackId(),s]});if(h_.info("[".concat(p.getTrackId(),"] set device to ").concat(s)),T0("info",p,"setDevice",s),p._enabled)try{const y=yield eP.getDeviceById(s),w={};w.video=Iie({},p._constraints),w.video.deviceId={exact:s},w.video.facingMode=void 0,p._originMediaStreamTrack.stop();let $=null;try{$=yield MM(w,p.getTrackId())}catch(j){throw h_.error("[".concat(p.getTrackId(),"] setDevice failed"),j.toString()),T0("error",p,"setDevice",s,j.toString()),$=yield MM({video:p._constraints},p.getTrackId()),yield p._updateOriginMediaStreamTrack($.getVideoTracks()[0],!1),j}yield p._updateOriginMediaStreamTrack($.getVideoTracks()[0],!1),p.updateMediaStreamTrackResolution(),p._deviceName=y.label,p._config.cameraId=s,p._constraints.deviceId={exact:s}}catch(y){throw A.onError(y),h_.error("[".concat(p.getTrackId(),"] setDevice error"),y.toString()),T0("error",p,"setDevice",s,y.toString()),y}else try{const y=yield eP.getDeviceById(s);p._deviceName=y.label,p._config.cameraId=s,p._constraints.deviceId={exact:s}}catch(y){throw A.onError(y),h_.error("[".concat(p.getTrackId(),"] setDevice error"),y.toString()),T0("error",p,"setDevice",s,y.toString()),y}h_.info("[".concat(p.getTrackId(),"] setDevice success")),T0("info",p,"setDevice",s,"success"),A.onSuccess()})()}setEnabled(s,p){var A=this;return f(function*(){if(!p){if(s===A._enabled)return;A.stateCheck("enabled",s)}if(h_.info("[".concat(A.getTrackId(),"] start setEnabled"),s),T0("info",A,"setEnabled",s),!s){A._originMediaStreamTrack.onended=null,A._originMediaStreamTrack.stop(),p||(A._enabled=!1);try{yield oT(A,wI.NEED_DISABLE_TRACK,A)}catch($){throw h_.error("[".concat(A.getTrackId(),"] setEnabled to false error"),$.toString()),T0("error",A,"setEnabled",s,$.toString()),$}return h_.info("[".concat(A.getTrackId(),"] setEnabled to false success")),void T0("info",A,"setEnabled",s,"success")}const y=Iie({},A._constraints),w=eP.searchDeviceIdByName(A._deviceName);w&&!y.deviceId&&(y.deviceId={exact:w});try{const $=yield MM({video:A._constraints},A.getTrackId());yield A._updateOriginMediaStreamTrack($.getVideoTracks()[0],!1),yield oT(A,wI.NEED_ENABLE_TRACK,A)}catch($){throw h_.error("[".concat(A.getTrackId(),"] setEnabled true error"),$.toString()),T0("error",A,"setEnabled",s,$.toString()),$}A.updateMediaStreamTrackResolution(),h_.info("[".concat(A.getTrackId(),"] setEnabled to true success")),T0("info",A,"setEnabled",s,"success"),p||(A._enabled=!0)})()}setEncoderConfiguration(s,p){var A=this;return f(function*(){const y=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[A.getTrackId(),s]});if(!A._enabled){const j=new U_(D_.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw y.onError(j),j}s=OK(s),A._forceBitrateLimit&&(s.bitrateMax=A._forceBitrateLimit.max_bitrate?A._forceBitrateLimit.max_bitrate:s.bitrateMax,s.bitrateMin=A._forceBitrateLimit.min_bitrate?A._forceBitrateLimit.min_bitrate:s.bitrateMin);const w=gR(A._config);w.encoderConfig=s;const $=Wle(w);(H2()||W2()||b4())&&($.deviceId=void 0),h_.debug("[".concat(A.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(s),JSON.stringify($)),T0("debug",A,"setEncoderConfiguration",s);try{yield A._originMediaStreamTrack.applyConstraints($),A.updateMediaStreamTrackResolution()}catch(j){const _e=new U_(D_.UNEXPECTED_ERROR,j.toString());throw h_.error("[".concat(A.getTrackId(),"] applyConstraints error"),_e.toString()),T0("error",A,"setEncoderConfiguration",j.toString()),y.onError(_e),_e}A._config=w,A._constraints=$,A._originalConstraints=$,A._encoderConfig=s,-1===A._hints.indexOf(FS.SCREEN_TRACK)&&A.updateBitrateFromProfile();try{yield oT(A,wI.NEED_UPDATE_VIDEO_ENCODER,A)}catch(j){return y.onError(j),j.throw()}y.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var s=this;if((W2()||b4())&&this._enabled&&!this._isClosed&&m1.duringInterruption){const p=function(){var A=f(function*(){m1.off(VS.IOS_INTERRUPTION_END,p),s._enabled&&!s._isClosed&&(h_.debug("[".concat(s.getTrackId(),"] try capture camera media device for interrupted iOS device.")),aI("debug",s,"try capture camera media device for interrupted iOS device."),yield s.setEnabled(!1),yield s.setEnabled(!0))});return function(){return A.apply(this,arguments)}}();m1.on(VS.IOS_INTERRUPTION_END,p)}else h_.debug("[".concat(this.getTrackId(),"] track ended")),m6("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(_6.TRACK_ENDED)}renewMediaStreamTrack(s){var p=this;return f(function*(){const A=s||p._constraints,y=eP.searchDeviceIdByName(p._deviceName);y&&!A.deviceId&&(A.deviceId={exact:y});const w=yield MM({video:A},p.getTrackId());p._constraints=A,yield p._updateOriginMediaStreamTrack(w.getVideoTracks()[0],!0),p.updateMediaStreamTrackResolution()})()}close(){super.close(),m1.off(VS.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),m1.off(VS.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var s=this;this.processorContext.on(XN.REQUEST_UPDATE_CONSTRAINTS,function(){var p=f(function*(A,y,w){try{const $=Object.assign({},s._originalConstraints,...A);yield s.renewMediaStreamTrack($),y()}catch($){w($)}});return function(A,y,w){return p.apply(this,arguments)}}()),this.processorContext.on(XN.REQUEST_CONSTRAINTS,function(){var p=f(function*(A){A(s._originMediaStreamTrack.getSettings())});return function(A){return p.apply(this,arguments)}}())}}).prototype,"setDevice",[LI],Object.getOwnPropertyDescriptor(dO.prototype,"setDevice"),dO.prototype),cI(dO.prototype,"setEnabled",[DI,y1],Object.getOwnPropertyDescriptor(dO.prototype,"setEnabled"),dO.prototype),cI(dO.prototype,"setEncoderConfiguration",[H1],Object.getOwnPropertyDescriptor(dO.prototype,"setEncoderConfiguration"),dO.prototype),BR=dO))||BR);class eIe extends hS{constructor(p){super(),a_(this,"name","VideoProcessorDestination"),a_(this,"ID","0"),a_(this,"_source",void 0),a_(this,"videoContext",void 0),a_(this,"inputTrack",void 0),this.videoContext=p}get kind(){return"video"}get enabled(){return!0}pipe(){throw new U_(D_.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new U_(D_.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(p){if(p.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");p.track&&p.track!==this.inputTrack&&(this.inputTrack=p.track,this.emit(ZP.ON_TRACK,p.track))}reset(){this.inputTrack=void 0,this.emit(ZP.ON_TRACK,void 0)}}class tIe extends hS{constructor(p){super(),a_(this,"constraintsMap",new Map),a_(this,"statsRegistry",[]),a_(this,"trackId",void 0),this.trackId=p}getConstraints(){var p=this;return f(function*(){return yield o2(p,XN.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(p,A){var y=this;return f(function*(){var w;return h_.info("processor ".concat(A.name," requestApplyConstraints for ").concat(y.trackId)),p&&y.constraintsMap.set(A,p),oT(y,XN.REQUEST_UPDATE_CONSTRAINTS,Array.from(x4(w=y.constraintsMap).call(w)))})()}requestRevertConstraints(p){var A=this;return f(function*(){var y;if(A.constraintsMap.has(p))return h_.info("processor ".concat(p.name," requestRevertConstraints for ").concat(A.trackId)),A.constraintsMap.delete(p),oT(A,XN.REQUEST_UPDATE_CONSTRAINTS,Array.from(x4(y=A.constraintsMap).call(y)))})()}registerStats(p,A,y){this.statsRegistry.find(w=>w.processorID===p.ID&&w.processorName===p.name&&w.type===A)||this.statsRegistry.push({processorName:p.name,processorID:p.ID,type:A,cb:y})}unregisterStats(p,A){}gatherStats(){return this.statsRegistry.map(p=>{let{processorID:A,processorName:y,type:w,cb:$}=p;return{processorID:A,processorName:y,type:w,stats:$()}})}}class wye{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(p,A){a_(this,"uid",void 0),a_(this,"_uintid",void 0),a_(this,"_trust_in_room_",!0),a_(this,"_trust_audio_enabled_state_",!0),a_(this,"_trust_video_enabled_state_",!0),a_(this,"_trust_audio_mute_state_",!0),a_(this,"_trust_video_mute_state_",!0),a_(this,"_trust_stream_added_state_",!0),a_(this,"_audio_muted_",!1),a_(this,"_video_muted_",!1),a_(this,"_audio_enabled_",!0),a_(this,"_video_enabled_",!0),a_(this,"_audio_added_",!1),a_(this,"_video_added_",!1),a_(this,"_audioTrack",void 0),a_(this,"_videoTrack",void 0),a_(this,"_audioSSRC",void 0),a_(this,"_videoSSRC",void 0),a_(this,"_audioOrtc",void 0),a_(this,"_videoOrtc",void 0),a_(this,"_cname",void 0),a_(this,"_rtxSsrcId",void 0),this.uid=p,this._uintid=A}}var nIe=sK,rIe=d7,iIe=A4;zT({target:"Promise",stat:!0},{try:function(s){var p=rIe.f(this),A=iIe(s);return(A.error?p.reject:p.resolve)(A.value),p.promise}});var Tye=nIe,oIe=zT,sIe=e1,aIe=OT,cIe=xZ,uIe=P2,lIe=mM,dIe=XR,vEe=kK,hIe=XK,fIe=nge,pIe=t1,yEe=LS("isConcatSpreadable"),EEe=9007199254740991,IEe="Maximum allowed index exceeded",bEe=sIe.TypeError,gIe=pIe>=51||!aIe(function(){var s=[];return s[yEe]=!1,s.concat()[0]!==s}),mIe=fIe("concat"),AIe=function(s){if(!uIe(s))return!1;var p=s[yEe];return void 0!==p?!!p:cIe(s)};oIe({target:"Array",proto:!0,forced:!gIe||!mIe},{concat:function(s){var p,A,y,w,$,j=lIe(this),_e=hIe(j,0),K=0;for(p=-1,y=arguments.length;p<y;p++)if(AIe($=-1===p?j:arguments[p])){if(K+(w=dIe($))>EEe)throw bEe(IEe);for(A=0;A<w;A++,K++)A in $&&vEe(_e,K,$[A])}else{if(K>=EEe)throw bEe(IEe);vEe(_e,K++,$)}return _e.length=K,_e}});var CEe={},_Ie=M5,vIe=pM,wEe=ZH.f,yIe=Kae,TEe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];CEe.f=function(s){return TEe&&"Window"==_Ie(s)?function(p){try{return wEe(p)}catch(A){return yIe(TEe)}}(s):wEe(vIe(s))};var Kle={};Kle.f=LS;var SEe=_U,IIe=lN,bIe=Kle,CIe=qN.f,TO=function(s){var p=SEe.Symbol||(SEe.Symbol={});IIe(p,s)||CIe(p,s,{value:bIe.f(s)})},bie=zT,Sye=e1,wIe=wL,TIe=VY,zle=vO,SIe=nT,Cie=N2,mX=gH,Rye=OT,$O=lN,RIe=xZ,OIe=FT,DIe=P2,NIe=D2,Oye=AH,Dye=WN,kIe=mM,Vme=pM,Nye=dQ,REe=HP,kye=k2,Yle=BQ,OEe=c8,PIe=ZH,DEe=CEe,Pye=s8,NEe=kP,kEe=qN,xIe=a8,PEe=cH,LIe=v$,xye=LU,Jle=_H.exports,xEe=PQ,LEe=Mie,MEe=LS,MIe=Kle,BIe=TO,UIe=JS,BEe=E8,Gme=zpe.forEach,VM=Z3("hidden"),Qme="Symbol",UEe=MEe("toPrimitive"),FIe=BEe.set,FEe=BEe.getterFor(Qme),q6=Object.prototype,SY=Sye.Symbol,AX=SY&&SY.prototype,jEe=Sye.TypeError,Lye=Sye.QObject,$le=wIe("JSON","stringify"),VEe=NEe.f,RY=kEe.f,GEe=DEe.f,jIe=PEe.f,QEe=SIe([].push),x9=Jle("symbols"),Zle=Jle("op-symbols"),Mye=Jle("string-to-symbol-registry"),Bye=Jle("symbol-to-string-registry"),VIe=Jle("wks"),Uye=!Lye||!Lye.prototype||!Lye.prototype.findChild,Fye=Cie&&Rye(function(){return 7!=Yle(RY({},"a",{get:function(){return RY(this,"a",{value:7}).a}})).a})?function(s,p,A){var y=VEe(q6,p);y&&delete q6[p],RY(s,p,A),y&&s!==q6&&RY(q6,p,y)}:RY,jye=function(s,p){var A=x9[s]=Yle(AX);return FIe(A,{type:Qme,tag:s,description:p}),Cie||(A.description=p),A},Hme=function(s,p,A){s===q6&&Hme(Zle,p,A),Dye(s);var y=Nye(p);return Dye(A),$O(x9,y)?(A.enumerable?($O(s,VM)&&s[VM][y]&&(s[VM][y]=!1),A=Yle(A,{enumerable:kye(0,!1)})):($O(s,VM)||RY(s,VM,kye(1,{})),s[VM][y]=!0),Fye(s,y,A)):RY(s,y,A)},Vye=function(s,p){Dye(s);var A=Vme(p),y=OEe(A).concat(Gye(A));return Gme(y,function(w){Cie&&!zle(HEe,A,w)||Hme(s,w,A[w])}),s},HEe=function(s){var p=Nye(s),A=zle(jIe,this,p);return!(this===q6&&$O(x9,p)&&!$O(Zle,p))&&(!(A||!$O(this,p)||!$O(x9,p)||$O(this,VM)&&this[VM][p])||A)},qEe=function(s,p){var A=Vme(s),y=Nye(p);if(A!==q6||!$O(x9,y)||$O(Zle,y)){var w=VEe(A,y);return!w||!$O(x9,y)||$O(A,VM)&&A[VM][y]||(w.enumerable=!0),w}},WEe=function(s){var p=GEe(Vme(s)),A=[];return Gme(p,function(y){$O(x9,y)||$O(xEe,y)||QEe(A,y)}),A},Gye=function(s){var p=s===q6,A=GEe(p?Zle:Vme(s)),y=[];return Gme(A,function(w){!$O(x9,w)||p&&!$O(q6,w)||QEe(y,x9[w])}),y};if(mX||(xye(AX=(SY=function(){if(NIe(AX,this))throw jEe("Symbol is not a constructor");var s=arguments.length&&void 0!==arguments[0]?REe(arguments[0]):void 0,p=LEe(s),A=function(y){this===q6&&zle(A,Zle,y),$O(this,VM)&&$O(this[VM],p)&&(this[VM][p]=!1),Fye(this,p,kye(1,y))};return Cie&&Uye&&Fye(q6,p,{configurable:!0,set:A}),jye(p,s)}).prototype,"toString",function(){return FEe(this).tag}),xye(SY,"withoutSetter",function(s){return jye(LEe(s),s)}),PEe.f=HEe,kEe.f=Hme,xIe.f=Vye,NEe.f=qEe,PIe.f=DEe.f=WEe,Pye.f=Gye,MIe.f=function(s){return jye(MEe(s),s)},Cie&&RY(AX,"description",{configurable:!0,get:function(){return FEe(this).description}})),bie({global:!0,wrap:!0,forced:!mX,sham:!mX},{Symbol:SY}),Gme(OEe(VIe),function(s){BIe(s)}),bie({target:Qme,stat:!0,forced:!mX},{for:function(s){var p=REe(s);if($O(Mye,p))return Mye[p];var A=SY(p);return Mye[p]=A,Bye[A]=p,A},keyFor:function(s){if(!Oye(s))throw jEe(s+" is not a symbol");if($O(Bye,s))return Bye[s]},useSetter:function(){Uye=!0},useSimple:function(){Uye=!1}}),bie({target:"Object",stat:!0,forced:!mX,sham:!Cie},{create:function(s,p){return void 0===p?Yle(s):Vye(Yle(s),p)},defineProperty:Hme,defineProperties:Vye,getOwnPropertyDescriptor:qEe}),bie({target:"Object",stat:!0,forced:!mX},{getOwnPropertyNames:WEe,getOwnPropertySymbols:Gye}),bie({target:"Object",stat:!0,forced:Rye(function(){Pye.f(1)})},{getOwnPropertySymbols:function(s){return Pye.f(kIe(s))}}),$le&&bie({target:"JSON",stat:!0,forced:!mX||Rye(function(){var s=SY();return"[null]"!=$le([s])||"{}"!=$le({a:s})||"{}"!=$le(Object(s))})},{stringify:function(s,p,A){var y=LIe(arguments),w=p;if((DIe(p)||void 0!==s)&&!Oye(s))return RIe(p)||(p=function($,j){if(OIe(w)&&(j=zle(w,this,$,j)),!Oye(j))return j}),y[1]=p,TIe($le,null,y)}}),!AX[UEe]){var GIe=AX.valueOf;xye(AX,UEe,function(s){return zle(GIe,this)})}UIe(SY,Qme),xEe[VM]=!0,TO("asyncIterator"),TO("hasInstance"),TO("isConcatSpreadable"),TO("iterator"),TO("match"),TO("matchAll"),TO("replace"),TO("search"),TO("species"),TO("split"),TO("toPrimitive"),TO("toStringTag"),TO("unscopables"),JS(e1.JSON,"JSON",!0);var QIe=_U.Symbol;TO("asyncDispose"),TO("dispose"),TO("matcher"),TO("metadata"),TO("observable"),TO("patternMatch"),TO("replaceAll");var KEe=QIe,zEe=Kle.f("asyncIterator");function YEe(s){this.wrapped=s}function Xle(s){var p,A;function y($,j){try{var _e=s[$](j),K=_e.value,_i=K instanceof YEe;Tye.resolve(_i?K.wrapped:K).then(function(_o){_i?y("return"===$?"return":"next",_o):w(_e.done?"return":"normal",_o)},function(_o){y("throw",_o)})}catch(_o){w("throw",_o)}}function w($,j){switch($){case"return":p.resolve({value:j,done:!0});break;case"throw":p.reject(j);break;default:p.resolve({value:j,done:!1})}(p=p.next)?y(p.key,p.arg):A=null}this._invoke=function($,j){return new Tye(function(_e,K){var _i={key:$,arg:j,resolve:_e,reject:K,next:null};A?A=A.next=_i:(p=A=_i,y($,j))})},"function"!=typeof s.return&&(this.return=void 0)}function ede(s){return function(){return new Xle(s.apply(this,arguments))}}function GS(s){return new YEe(s)}Xle.prototype["function"==typeof KEe&&zEe||"@@asyncIterator"]=function(){return this},Xle.prototype.next=function(s){return this._invoke("next",s)},Xle.prototype.throw=function(s){return this._invoke("throw",s)},Xle.prototype.return=function(s){return this._invoke("return",s)};var qIe=Kle.f("iterator");function JEe(s,p){var A={},y=!1;function w($,j){return y=!0,j=new Tye(function(_e){_e(s[$](j))}),{done:!1,value:p(j)}}return A[void 0!==KEe&&qIe||"@@iterator"]=function(){return this},A.next=function($){return y?(y=!1,$):w("next",$)},"function"==typeof s.throw&&(A.throw=function($){if(y)throw y=!1,$;return w("throw",$)}),"function"==typeof s.return&&(A.return=function($){return y?(y=!1,$):w("return",$)}),A}var WIe=zEe,KIe=mI,qme=H_,JIe=eT,ZIe=xT,XIe=UP,ebe=bT.f,tbe=u5,L9=_r.Symbol,_X=L9&&L9.prototype;if(_l&&FI(L9)&&(!("description"in _X)||void 0!==L9().description)){var $Ee={},Wme=function(){var s=arguments.length<1||void 0===arguments[0]?void 0:XIe(arguments[0]),p=ZIe(_X,this)?new L9(s):void 0===s?L9():L9(s);return""===s&&($Ee[p]=!0),p};tbe(Wme,L9),Wme.prototype=_X,_X.constructor=Wme;var nbe="Symbol(test)"==String(L9("test")),rbe=qme(_X.toString),ibe=qme(_X.valueOf),obe=/^Symbol\((.*)\)[^)]+$/,sbe=qme("".replace),abe=qme("".slice);ebe(_X,"description",{configurable:!0,get:function(){var s=ibe(this),p=rbe(s);if(JIe($Ee,s))return"";var A=nbe?abe(p,7,-1):sbe(p,obe,"$1");return""===A?void 0:A}}),KIe({global:!0,forced:!0},{Symbol:Wme})}var t3={exports:{}};function ZEe(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function XEe(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?ZEe(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):ZEe(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}function Qye(s,p,A,y,w,$){let j=[],_e=[],K=[],_i=[],_o=!1,_u=!1;if(t3.exports.parse(s).mediaDescriptions.forEach(ch=>{$&&$!==ch.attributes.direction||("video"!==ch.media.mediaType||_o||(_e=ch.attributes.payloads,_i=ch.attributes.extmaps,_o=!0),"audio"!==ch.media.mediaType||_u||(j=ch.attributes.payloads,K=ch.attributes.extmaps,_u=!0))}),!_i||0===_e.length)throw new Error("Cannot get video capabilities from SDP.");if(!K||0===j.length)throw new Error("Cannot get audio capabilities from SDP.");return _e.forEach(ch=>{var _f;null!==(_f=ch.rtpMap)&&void 0!==_f&&_f.clockRate&&(ch.rtpMap.clockRate=parseInt(ch.rtpMap.clockRate))}),j.forEach(ch=>{var _f;null!==(_f=ch.rtpMap)&&void 0!==_f&&_f.clockRate&&(ch.rtpMap.clockRate=parseInt(ch.rtpMap.clockRate))}),p&&(j=j.filter(ch=>{var _f;return"rtx"!==(null===(_f=ch.rtpMap)||void 0===_f?void 0:_f.encodingName.toLowerCase())}),_e=_e.filter(ch=>{var _f;return"rtx"!==(null===(_f=ch.rtpMap)||void 0===_f?void 0:_f.encodingName.toLowerCase())})),A&&(_e=_e.filter(ch=>{var _f;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(_f=ch.rtpMap)||void 0===_f?void 0:_f.encodingName)||"")})),y&&(null==y?void 0:y.length)>0&&(j=j.filter(ch=>{var _f;return y.includes((null===(_f=ch.rtpMap)||void 0===_f?void 0:_f.encodingName.toLowerCase())||"")})),w&&(null==w?void 0:w.length)>0&&(_e=_e.filter(ch=>{var _f;return w.includes((null===(_f=ch.rtpMap)||void 0===_f?void 0:_f.encodingName.toLowerCase())||"")})),{audioCodecs:j,videoCodecs:_e,audioExtensions:K,videoExtensions:_i}}function Kme(s){const p=t3.exports.parse(s);let A,y;for(const w of p.mediaDescriptions){if(!A){const $=w.attributes.iceUfrag,j=w.attributes.icePwd;if(!$||!j)throw new Error("Cannot get iceUfrag or icePwd from SDP.");A={iceUfrag:$,icePwd:j}}if(!y){const $=w.attributes.fingerprints;$.length>0&&(y={fingerprints:$})}}if(!y&&p.attributes.fingerprints.length>0&&(y={fingerprints:p.attributes.fingerprints}),!y||!A)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:A,dtlsParameters:y}}function e0e(s,p,A){const{cname:y}=s;let w;void 0!==p&&void 0!==A?(w=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:p,port:A.toString(),type:"host",extension:{}}],h_.debug("Using remote candidate from AP ".concat(p,":").concat(A)),aI("debug",[],"Using remote candidate from AP ".concat(p,":").concat(A))):w=s.iceParameters.candidates.map(K=>({foundation:K.foundation,componentId:"1",transport:K.protocol,priority:K.priority.toString(),connectionAddress:K.ip,port:K.port.toString(),type:K.type,extension:{}}));const $={fingerprints:s.dtlsParameters.fingerprints.map(K=>({hashFunction:K.algorithm,fingerprint:K.fingerprint}))},j={iceUfrag:s.iceParameters.iceUfrag,icePwd:s.iceParameters.icePwd};let _e;switch(s.dtlsParameters.role){case"server":_e="passive";break;case"client":_e="active";break;case"auto":_e="actpass"}return{dtlsParameters:$,iceParameters:j,candidates:w,rtpCapabilities:i0e(s.rtpCapabilities),setup:_e,cname:y}}function wie(s,p,A){const y=[],w=[];return s.forEach($=>{let{ssrcId:j,rtx:_e}=$;const K=pS(8,"track-"),_i={ssrcId:j,attributes:XEe({label:K,mslabel:A=A||pS(10,""),msid:"".concat(A," ").concat(K)},p&&{cname:p})};if(y.push(_i),void 0!==_e){const _o={ssrcId:_e,attributes:XEe({label:K,mslabel:A,msid:"".concat(A," ").concat(K)},p&&{cname:p})};y.push(_o),w.push({semantic:"FID",ssrcIds:[j,_e]})}}),s.length>1&&w.push({semantic:"SIM",ssrcIds:s.map($=>{let{ssrcId:j}=$;return j})}),{ssrcs:y,ssrcGroups:w}}function zme(s,p){p instanceof pR&&s.attributes.payloads.forEach(A=>{var y;const w=null===(y=A.rtpMap)||void 0===y?void 0:y.encodingName.toLowerCase();if(!w||-1===["opus","pcmu","pcma","g722"].indexOf(w))return;A.fmtp||(A.fmtp={parameters:{}}),A.fmtp.parameters.minptime="10",A.fmtp.parameters.useinbandfec="1";const $=p._encoderConfig;$&&("pcmu"!==w&&"pcma"!==w&&"g722"!==w&&($.bitrate&&!q2()&&(A.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*$.bitrate))),$.sampleRate&&(A.fmtp.parameters.maxplaybackrate="".concat($.sampleRate),A.fmtp.parameters["sprop-maxcapturerate"]="".concat($.sampleRate))),$.stereo&&(A.fmtp.parameters.stereo="1",A.fmtp.parameters["sprop-stereo"]="1"))})}function t0e(s){const p=s.attributes.unrecognized.findIndex(A=>"x-google-flag"===A.attField&&"conference"===A.attValue);-1!==p&&s.attributes.unrecognized.splice(p,1)}function n0e(s,p){if(!(p instanceof UR&&p._encoderConfig&&-1===p._hints.indexOf(FS.SCREEN_TRACK)))return;const A=p._encoderConfig;jS().supportMinBitrate&&A.bitrateMin&&s.attributes.payloads.forEach(y=>{var w;["h264","vp8","vp9","av1"].includes((null===(w=y.rtpMap)||void 0===w?void 0:w.encodingName.toLowerCase())||"")&&(y.fmtp||(y.fmtp={parameters:{}}),y.fmtp.parameters["x-google-min-bitrate"]="".concat(A.bitrateMin))}),jS().supportMinBitrate&&!p._hints.includes(FS.LOW_STREAM)&&A.bitrateMax&&s.attributes.payloads.forEach(y=>{var w;["h264","vp8","vp9","av1"].includes((null===(w=y.rtpMap)||void 0===w?void 0:w.encodingName.toLowerCase())||"")&&(y.fmtp||(y.fmtp={parameters:{}}),y.fmtp.parameters["x-google-start-bitrate"]="".concat(Math.floor(A.bitrateMax)))})}function r0e(s,p,A){if(!p)return;let y,w;if("video"===s.media.mediaType?(y=A.videoExtensions,w=A.videoCodecs):(y=A.audioExtensions,w=A.audioCodecs),!0===p.tcc){const $=y.find(j=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===j.extensionName);$&&(s.attributes.extmaps.find(j=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===j.extensionName)||s.attributes.extmaps.push({entry:$.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(j=w,_e=s.attributes.payloads,_e.filter(K=>!!j.find(_i=>_i.payloadType===K.payloadType&&!!_i.rtcpFeedbacks.find(_o=>"transport-cc"===_o.type)))).forEach(j=>{j.rtcpFeedbacks.find(_e=>"transport-cc"===_e.type)||j.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===p.tcc){const $=s.attributes.extmaps.findIndex(j=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===j.extensionName);-1!==$&&s.attributes.extmaps.splice($,1),s.attributes.payloads.forEach(j=>{const _e=j.rtcpFeedbacks.findIndex(K=>"transport-cc"===K.type);-1!==_e&&j.rtcpFeedbacks.splice(_e,1)})}var j,_e;if(!0===p.remb){const $=y.find(j=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===j.extensionName);$&&(s.attributes.extmaps.find(j=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===j.extensionName)||s.attributes.extmaps.push({entry:$.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(j,_e){return _e.filter(K=>!!j.find(_i=>_i.payloadType===K.payloadType&&!!_i.rtcpFeedbacks.find(_o=>"goog-remb"===_o.type)))}(w,s.attributes.payloads).forEach(j=>{j.rtcpFeedbacks.find(_e=>"goog-remb"===_e.type)||j.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===p.remb){const $=s.attributes.extmaps.findIndex(j=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===j.extensionName);-1!==$&&s.attributes.extmaps.splice($,1),s.attributes.payloads.forEach(j=>{const _e=j.rtcpFeedbacks.findIndex(K=>"goog-remb"===K.type);-1!==_e&&j.rtcpFeedbacks.splice(_e,1)})}}function Yme(s,p,A,y,w,$){if("videoExtensions"===A||"audioExtensions"===A){const j=[];return s[A].forEach(_e=>{p[A].some((K,_i)=>{if(_e.entry===K.entry&&_e.extensionName===K.extensionName)return j.push(_i),!0})?$[A].push(_e):y[A].push(_e)}),void p[A].forEach((_e,K)=>{-1===j.indexOf(K)&&w[A].push(_e)})}if("videoCodecs"===A||"audioCodecs"===A){const j=[];return s[A].forEach(_e=>{p[A].some((K,_i)=>{if(_e.payloadType===K.payloadType&&JSON.stringify(_e)===JSON.stringify(K))return j.push(_i),!0})?$[A].push(_e):y[A].push(_e)}),void p[A].forEach((_e,K)=>{-1===j.indexOf(K)&&w[A].push(_e)})}}function i0e(s){const{send:p,recv:A,sendrecv:y}=s;if(!y){if(!p||!A)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:p,recv:A}}let w,$;return p?(w={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},w.audioCodecs=[...p.audioCodecs,...y.audioCodecs],w.videoCodecs=[...p.videoCodecs,...y.videoCodecs],w.audioExtensions=[...p.audioExtensions,...y.audioExtensions],w.videoExtensions=[...p.videoExtensions,...y.videoExtensions]):w=y,A?($={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},$.audioCodecs=[...A.audioCodecs,...y.audioCodecs],$.videoCodecs=[...A.videoCodecs,...y.videoCodecs],$.audioExtensions=[...A.audioExtensions,...y.audioExtensions],$.videoExtensions=[...A.videoExtensions,...y.videoExtensions]):$=y,{send:w,recv:$}}!function(s,p){s.exports=(()=>{var A={8:($,j,_e)=>{_e.r(j),_e.d(j,{Parser:()=>Z0,Printer:()=>W0,parse:()=>B0,print:()=>$0});const K="\n",_i="".concat("\r").concat(K),_o=" ";let _u;function ch(A0){return A0>="0"&&A0<="9"}function _f(A0){return A0>="!"&&A0<="~"}function o_(A0){return _f(A0)||A0>="\x80"&&A0<="\xff"}function i_(A0){return"!"===A0||A0>="#"&&A0<="'"||A0>="*"&&A0<="+"||A0>="-"&&A0<="."||A0>="0"&&A0<="9"||A0>="A"&&A0<="Z"||A0>="^"&&A0<="~"}function u_(A0){return A0>="1"&&A0<="9"}function g_(A0){return A0>="A"&&A0<="Z"||A0>="a"&&A0<="z"}function __(A0){return"d"===A0||"h"===A0||"m"===A0||"s"===A0}function w_(A0){return A0>"\x01"&&A0<"\t"||A0>"\v"&&A0<"\f"||A0>"\x0e"&&A0<"\xff"}function k_(A0){return g_(A0)||ch(A0)||"+"===A0||"/"===A0}function Pv(A0){return ch(A0)||g_(A0)||"+"===A0||"/"===A0||"-"===A0||"_"===A0}function f0(A0){return g_(A0)||ch(A0)||"+"===A0||"/"===A0}function v0(A0,e_){var y_=Object.keys(A0);if(Object.getOwnPropertySymbols){var N_=Object.getOwnPropertySymbols(A0);e_&&(N_=N_.filter(function(d0){return Object.getOwnPropertyDescriptor(A0,d0).enumerable})),y_.push.apply(y_,N_)}return y_}function I0(A0){for(var e_=1;e_<arguments.length;e_++){var y_=null!=arguments[e_]?arguments[e_]:{};e_%2?v0(Object(y_),!0).forEach(function(N_){iI(A0,N_,y_[N_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A0,Object.getOwnPropertyDescriptors(y_)):v0(Object(y_)).forEach(function(N_){Object.defineProperty(A0,N_,Object.getOwnPropertyDescriptor(y_,N_))})}return A0}function iI(A0,e_,y_){return e_ in A0?Object.defineProperty(A0,e_,{value:y_,enumerable:!0,configurable:!0,writable:!0}):A0[e_]=y_,A0}var A0;(A0=_u||(_u={})).VERSION="v",A0.ORIGIN="o",A0.SESSION_NAME="s",A0.INFORMATION="i",A0.URI="u",A0.EMAIL="e",A0.PHONE="p",A0.CONNECTION="c",A0.BANDWIDTH="b",A0.TIME="t",A0.REPEAT="r",A0.ZONE_ADJUSTMENTS="z",A0.KEY="k",A0.ATTRIBUTE="a",A0.MEDIA="m";class H0{consumeText(e_,y_){let N_=y_;for(;N_<e_.length;){const d0=e_[N_];if("\0"===d0||"\r"===d0||d0===K)break;N_+=1}if(N_-y_==0)throw new Error("Invalid text, at ".concat(e_));return N_}consumeUnicastAddress(e_,y_,N_){return this.consumeTill(e_,y_,_o)}consumeOneOrMore(e_,y_,N_){let d0=y_;for(;N_(e_[d0]);)d0++;if(d0-y_==0)throw new Error("Invalid rule at ".concat(y_,"."));return d0}consumeSpace(e_,y_){if(e_[y_]===_o)return y_+1;throw new Error("Invalid space at ".concat(y_,"."))}consumeIP4Address(e_,y_){let N_=y_;for(let d0=0;d0<4;d0++)if(N_=this.consumeDecimalUChar(e_,N_),3!==d0){if("."!==e_[N_])throw new Error("Invalid IP4 address.");N_++}return N_}consumeDecimalUChar(e_,y_){let N_=y_;for(let q0=0;q0<3&&ch(e_[N_]);q0++,N_++);if(N_-y_==0)throw new Error("Invalid decimal uchar.");const d0=parseInt(e_.slice(y_,N_));if(d0>=0&&d0<=255)return N_;throw new Error("Invalid decimal uchar")}consumeIP6Address(e_,y_){let N_=this.consumeHexpart(e_,y_);return":"===e_[N_]&&(N_+=1,N_=this.consumeIP4Address(e_,N_)),N_}consumeHexpart(e_,y_){let N_=y_;if(":"===e_[N_]&&":"===e_[N_+1]){N_+=2;try{N_=this.consumeHexseq(e_,N_)}catch(d0){}return N_}if(N_=this.consumeHexseq(e_,N_),":"===e_[N_]&&":"===e_[N_+1]){N_+=2;try{N_=this.consumeHexseq(e_,N_)}catch(d0){}return N_}return N_}consumeHexseq(e_,y_){let N_=y_;for(;N_=this.consumeHex4(e_,N_),":"===e_[N_]&&":"!==e_[N_+1];)N_+=1;return N_}consumeHex4(e_,y_){let N_=0;for(;N_<4;N_++)if(!((d0=e_[y_+N_])>="0"&&d0<="9"||d0>="a"&&d0<="f"||d0>="A"&&d0<="F")){if(0===N_)throw new Error("Invalid hex 4");break}var d0;return y_+N_}consumeFQDN(e_,y_){let N_=y_;for(;ch(e_[N_])||g_(e_[N_])||"-"===e_[N_]||"."===e_[N_];)N_+=1;if(N_-y_<4)throw new Error("Invalid FQDN");return N_}consumeExtnAddr(e_,y_){return this.consumeOneOrMore(e_,y_,o_)}consumeMulticastAddress(e_,y_,N_){switch(N_){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e_,y_);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e_,y_);default:try{return this.consumeFQDN(e_,y_)}catch(d0){return this.consumeExtnAddr(e_,y_)}}}consumeIP6MulticastAddress(e_,y_){const N_=this.consumeHexpart(e_,y_);return"/"===e_[N_]?this.consumeInteger(e_,N_+1):N_}consumeIP4MulticastAddress(e_,y_){let N_=y_+3;const d0=e_.slice(y_,N_),q0=parseInt(d0);if(q0<224||q0>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let jI=0;jI<3;jI++){if("."!==e_[N_])throw new Error("Invalid IP4 multicast address.");N_+=1,N_=this.consumeDecimalUChar(e_,N_)}return"/"===e_[N_]&&(N_+=1),N_=this.consumeTTL(e_,N_),"/"===e_[N_]&&(N_=this.consumeInteger(e_,N_)),N_}consumeInteger(e_,y_){if(!u_(e_[y_]))throw new Error("Invalid integer.");for(y_+=1;ch(e_[y_]);)y_+=1;return y_}consumeTTL(e_,y_){if("0"===e_[y_])return y_+1;if(!u_(e_[y_]))throw new Error("Invalid TTL.");y_+=1;for(let N_=0;N_<2&&ch(e_[y_]);N_++)y_+=1;return y_}consumeToken(e_,y_){return this.consumeOneOrMore(e_,y_,i_)}consumeTime(e_,y_){let N_=y_;if("0"===e_[N_])return N_+1;for(u_(e_[N_])&&(N_+=1);ch(e_[N_]);)N_++;if(N_-y_<10)throw new Error("Invalid time");return N_}consumeAddress(e_,y_){return this.consumeTill(e_,y_,_o)}consumeTypedTime(e_,y_){let N_=y_;return N_=this.consumeOneOrMore(e_,N_,ch),__(e_[N_])?N_+1:N_}consumeRepeatInterval(e_,y_){if(!u_(e_[y_]))throw new Error("Invalid repeat interval");for(y_+=1;ch(e_[y_]);)y_+=1;return __(e_[y_])&&(y_+=1),y_}consumePort(e_,y_){return this.consumeOneOrMore(e_,y_,ch)}consume(e_,y_,N_){for(let d0=0;d0<N_.length;d0++){if(y_+d0>=e_.length)throw new Error("consume exceeding value length");if(e_[y_+d0]!==N_[d0])throw new Error("consume ".concat(N_," failed at ").concat(d0))}return y_+N_.length}consumeTill(e_,y_,N_){let d0=y_;for(;d0<e_.length&&("string"!=typeof N_||e_[d0]!==N_)&&("function"!=typeof N_||!N_(e_[d0]));)d0++;return d0}}class Z0 extends H0{constructor(){super(),iI(this,"records",[]),iI(this,"currentLine",0)}parse(e_){const y_=this.probeEOL(e_);this.records=e_.split(y_).filter(QL=>!!QL.trim()).map(this.parseLine),this.currentLine=0;const N_=this.parseVersion(),d0=this.parseOrigin(),q0=this.parseSessionName(),jI=this.parseInformation(),BI=this.parseUri(),WI=this.parseEmail(),K1=this.parsePhone(),ZO=this.parseConnection(),FR=this.parseBandWidth(),dT=this.parseTimeFields(),X1=this.parseKey(),rR=this.parseSessionAttribute(),n3=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:N_,origin:d0,sessionName:q0,information:jI,uri:BI,emails:WI,phones:K1,connection:ZO,bandwidths:FR,timeFields:dT,key:X1,attributes:rR,mediaDescriptions:n3}}getCurrentRecord(){const e_=this.records[this.currentLine];if(!e_)throw new Error("Record doesn't exit.");return e_}probeEOL(e_){for(let y_=0;y_<e_.length;y_++)if(e_[y_]===K)return"\r"===e_[y_-1]?_i:K;throw new Error("Invalid newline character.")}parseLine(e_,y_){if(e_.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const N_=e_[0];if("="!==e_[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:N_,value:e_.slice(2),line:y_,cur:0}}parseSessionAttribute(){const e_=new j_;for(;this.currentLine<this.records.length;){const y_=this.getCurrentRecord();if(y_.type!==_u.ATTRIBUTE)break;const N_={attField:this.extractOneOrMore(y_,d0=>i_(d0)&&":"!==d0),_cur:0};":"===y_.value[y_.cur]&&(y_.cur+=1,N_.attValue=this.extractOneOrMore(y_,w_)),e_.parse(N_),this.currentLine++}return e_.digest()}parseMediaAttributes(e_){const y_=new Z_(e_);for(;this.currentLine<this.records.length;){const N_=this.getCurrentRecord();if(N_.type!==_u.ATTRIBUTE)break;const d0={attField:this.extractOneOrMore(N_,q0=>i_(q0)&&":"!==q0),_cur:0};":"===N_.value[N_.cur]&&(N_.cur+=1,d0.attValue=this.extractOneOrMore(N_,w_)),y_.parse(d0),this.currentLine++}return y_.digest()}parseKey(){const e_=this.getCurrentRecord();if(e_.type===_u.KEY){if("prompt"===e_.value||"clear:"===e_.value||"base64:"===e_.value||"uri:"===e_.value)return e_.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e_=this.getCurrentRecord();if(e_.type===_u.ZONE_ADJUSTMENTS){const y_=[];for(;;)try{const N_=this.extract(e_,this.consumeTime);this.consumeSpaceForRecord(e_);let d0=!1;"-"===e_.value[e_.cur]&&(d0=!0,e_.cur+=1);const q0=this.extract(e_,this.consumeTypedTime);y_.push({time:N_,typedTime:q0,back:d0})}catch(N_){break}if(0===y_.length)throw new Error("Invalid zone adjustments");return this.currentLine++,y_}return[]}parseRepeat(){const e_=[];for(;;){const y_=this.getCurrentRecord();if(y_.type!==_u.REPEAT)break;{const N_=this.extract(y_,this.consumeRepeatInterval),d0=this.parseTypedTime(y_);e_.push({repeatInterval:N_,typedTimes:d0}),this.currentLine++}}return e_}parseTypedTime(e_){const y_=[];for(;;)try{this.consumeSpaceForRecord(e_),y_.push(this.extract(e_,this.consumeTypedTime))}catch(N_){break}if(0===y_.length)throw new Error("Invalid typed time.");return y_}parseTime(){const e_=this.getCurrentRecord(),y_=this.extract(e_,this.consumeTime);this.consumeSpaceForRecord(e_);const N_=this.extract(e_,this.consumeTime);return this.currentLine++,{startTime:y_,stopTime:N_}}parseBandWidth(){const e_=[];for(;this.currentLine<this.records.length;){const y_=this.getCurrentRecord();if(y_.type!==_u.BANDWIDTH)break;{const N_=this.extractOneOrMore(y_,i_);if(":"!==y_.value[y_.cur])throw new Error("Invalid bandwidth field.");y_.cur++;const d0=this.extractOneOrMore(y_,ch);e_.push({bwtype:N_,bandwidth:d0}),this.currentLine++}}return e_}parseVersion(){const e_=this.getCurrentRecord();if(e_.type!==_u.VERSION)throw new Error("first sdp record must be version");const y_=e_.value.slice(0,this.consumeOneOrMore(e_.value,0,ch));if(y_.length!==e_.value.length)throw new Error('invalid proto version, "v='.concat(e_.value,'"'));return this.currentLine++,y_}parseOrigin(){const e_=this.getCurrentRecord();if(e_.type!==_u.ORIGIN)throw new Error("second line of sdp must be origin");const y_=this.extractOneOrMore(e_,o_);this.consumeSpaceForRecord(e_);const N_=this.extractOneOrMore(e_,ch);this.consumeSpaceForRecord(e_);const d0=this.extractOneOrMore(e_,ch);this.consumeSpaceForRecord(e_);const q0=this.extractOneOrMore(e_,i_);this.consumeSpaceForRecord(e_);const jI=this.extractOneOrMore(e_,i_);this.consumeSpaceForRecord(e_);const BI=this.extract(e_,this.consumeUnicastAddress);return this.currentLine++,{username:y_,sessId:N_,sessVersion:d0,nettype:q0,addrtype:jI,unicastAddress:BI}}parseSessionName(){const e_=this.getCurrentRecord();if(e_.type===_u.SESSION_NAME){const y_=this.extract(e_,this.consumeText);return this.currentLine++,y_}}parseInformation(){const e_=this.getCurrentRecord();if(e_.type!==_u.INFORMATION)return;const y_=this.extract(e_,this.consumeText);return this.currentLine++,y_}parseUri(){const e_=this.getCurrentRecord();if(e_.type===_u.URI)return this.currentLine++,e_.value}parseEmail(){const e_=[];for(;;){const y_=this.getCurrentRecord();if(y_.type!==_u.EMAIL)break;e_.push(y_.value),this.currentLine++}return e_}parsePhone(){const e_=[];for(;;){const y_=this.getCurrentRecord();if(y_.type!==_u.PHONE)break;e_.push(y_.value),this.currentLine++}return e_}parseConnection(){const e_=this.getCurrentRecord();if(e_.type===_u.CONNECTION){const y_=this.extractOneOrMore(e_,i_);this.consumeSpaceForRecord(e_);const N_=this.extractOneOrMore(e_,i_);this.consumeSpaceForRecord(e_);const d0=this.extract(e_,this.consumeAddress);return this.currentLine++,{nettype:y_,addrtype:N_,address:d0}}}parseMedia(){const e_=this.getCurrentRecord(),y_=this.extract(e_,this.consumeToken);this.consumeSpaceForRecord(e_);let N_=this.extract(e_,this.consumePort);"/"===e_.value[e_.cur]&&(e_.cur+=1,N_+=this.extract(e_,this.consumeInteger)),this.consumeSpaceForRecord(e_);const d0=[];for(d0.push(this.extract(e_,this.consumeToken));"/"===e_.value[e_.cur];)e_.cur+=1,d0.push(this.extract(e_,this.consumeToken));if(0===d0.length)throw new Error("Invalid proto");const q0=this.parseFmt(e_);return this.currentLine++,{mediaType:y_,port:N_,protos:d0,fmts:q0}}parseTimeFields(){const e_=[];for(;this.getCurrentRecord().type===_u.TIME;){const y_=this.parseTime(),N_=this.parseRepeat(),d0=this.parseZone();e_.push({time:y_,repeats:N_,zones:d0})}return e_}parseMediaDescription(){const e_=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===_u.MEDIA;){const y_=this.parseMedia(),N_=this.parseInformation(),d0=this.parseConnections(),q0=this.parseBandWidth(),jI=this.parseKey(),BI=this.parseMediaAttributes(y_);e_.push({media:y_,information:N_,connections:d0,bandwidths:q0,key:jI,attributes:BI})}return e_}parseConnections(){const e_=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===_u.CONNECTION;)e_.push(this.parseConnection());return e_}parseFmt(e_){const y_=[];for(;;)try{this.consumeSpaceForRecord(e_),y_.push(this.extract(e_,this.consumeToken))}catch(N_){break}if(0===y_.length)throw new Error("Invalid fmts");return y_}extract(e_,y_,...N_){const d0=y_.call(this,e_.value,e_.cur,...N_),q0=e_.value.slice(e_.cur,d0);return e_.cur=d0,q0}extractOneOrMore(e_,y_){const N_=this.consumeOneOrMore(e_.value,e_.cur,y_),d0=e_.value.slice(e_.cur,N_);return e_.cur=N_,d0}consumeSpaceForRecord(e_){if(e_.value[e_.cur]!==_o)throw new Error("Invalid space at ".concat(e_.cur,"."));e_.cur+=1}}class a0 extends H0{constructor(...e_){super(...e_),iI(this,"attributes",void 0),iI(this,"digested",!1)}extractOneOrMore(e_,y_,N_){const d0=this.consumeOneOrMore(e_.attValue,e_._cur,y_),q0=e_.attValue.slice(e_._cur,d0),[jI,BI]=N_||[];if("number"==typeof jI&&q0.length<jI)throw new Error("error in length, should be more or equal than ".concat(jI," characters."));if("number"==typeof BI&&q0.length>BI)throw new Error("error in length, should be less or equal than ".concat(BI," characters."));return e_._cur=d0,q0}consumeAttributeSpace(e_){if(e_.attValue[e_._cur]!==_o)throw new Error("Invalid space at ".concat(e_._cur,"."));e_._cur+=1}extract(e_,y_,...N_){if(!e_.attValue)throw new Error("Nothing to extract from attValue.");const d0=y_.call(this,e_.attValue,e_._cur,...N_),q0=e_.attValue.slice(e_._cur,d0);return e_._cur=d0,q0}atEnd(e_){if(!e_.attValue)throw new Error;return e_._cur>=e_.attValue.length}peekChar(e_){if(!e_.attValue)throw new Error;return e_.attValue[e_._cur]}peek(e_,y_){if(!e_.attValue)throw new Error;for(let N_=0;N_<y_.length;N_++)if(y_[N_]!==e_.attValue[e_._cur+N_])return!1;return!0}parseIceUfrag(e_){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e_,k_,[4,256])}parseIcePwd(e_){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e_,k_,[22,256])}parseIceOptions(e_){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const y_=[];for(;!this.atEnd(e_);){y_.push(this.extractOneOrMore(e_,k_));try{this.consumeAttributeSpace(e_)}catch(N_){if(this.atEnd(e_))break;throw N_}}this.attributes.iceOptions=y_}parseFingerprint(e_){const y_=this.extract(e_,this.consumeToken);this.consumeAttributeSpace(e_);const N_=this.extract(e_,this.consumeTill);this.attributes.fingerprints.push({hashFunction:y_,fingerprint:N_})}parseExtmap(e_){const y_=this.extractOneOrMore(e_,ch);let N_;"/"===this.peekChar(e_)&&(this.extract(e_,this.consume,"/"),N_=this.extract(e_,this.consumeToken)),this.consumeAttributeSpace(e_);const d0=this.extract(e_,this.consumeTill,_o),q0=I0(I0({entry:parseInt(y_,10)},N_&&{direction:N_}),{},{extensionName:d0});this.peekChar(e_)===_o&&(this.consumeAttributeSpace(e_),q0.extensionAttributes=this.extract(e_,this.consumeTill)),this.attributes.extmaps.push(q0)}parseSetup(e_){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const y_=this.extract(e_,this.consumeTill);if("active"!==y_&&"passive"!==y_&&"actpass"!==y_&&"holdconn"!==y_)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=y_}}class j_ extends a0{constructor(...e_){super(...e_),iI(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e_){if(this.digested)throw new Error("already digested");try{switch(e_.attField){case"group":this.parseGroup(e_);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e_);break;case"ice-pwd":this.parseIcePwd(e_);break;case"ice-options":this.parseIceOptions(e_);break;case"fingerprint":this.parseFingerprint(e_);break;case"setup":this.parseSetup(e_);break;case"tls-id":this.parseTlsId(e_);break;case"identity":this.parseIdentity(e_);break;case"extmap":this.parseExtmap(e_);break;case"msid-semantic":this.parseMsidSemantic(e_);break;default:e_.ignored=!0,this.attributes.unrecognized.push(e_)}}catch(y_){throw console.error("parsing session attribute ".concat(e_.attField,' error, "a=').concat(e_.attField,":").concat(e_.attValue,'"')),y_}if(!e_.ignored&&e_.attValue&&!this.atEnd(e_))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e_){const y_=this.extract(e_,this.consumeToken),N_=[];for(;!this.atEnd(e_)&&this.peekChar(e_)===_o;)this.consumeAttributeSpace(e_),N_.push(this.extract(e_,this.consumeToken));this.attributes.groups.push({semantic:y_,identificationTag:N_})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e_){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e_,Pv)}parseIdentity(e_){const y_=this.extractOneOrMore(e_,f0),N_=[];for(;!this.atEnd(e_)&&this.peekChar(e_)===_o;){this.consumeAttributeSpace(e_);const d0=this.extract(e_,this.consumeToken);this.extract(e_,this.consume,"=");const q0=this.extractOneOrMore(e_,jI=>jI!==_o&&w_(jI));N_.push({name:d0,value:q0})}this.attributes.identities.push({assertionValue:y_,extensions:N_})}parseMsidSemantic(e_){this.peekChar(e_)===_o&&this.consumeAttributeSpace(e_);const y_={semantic:this.extract(e_,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e_)}catch(N_){break}if("*"===this.peekChar(e_)){this.extract(e_,this.consume,"*"),y_.applyForAll=!0;break}{const N_=this.extract(e_,this.consumeTill,_o);y_.identifierList.push(N_)}}this.attributes.msidSemantic=y_}}class Z_ extends a0{constructor(e_){super(),iI(this,"attributes",void 0),-1!==e_.protos.indexOf("RTP")||e_.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e_){if(this.digested)throw new Error("already digested");try{switch(e_.attField){case"extmap":this.parseExtmap(e_);break;case"setup":this.parseSetup(e_);break;case"ice-ufrag":this.parseIceUfrag(e_);break;case"ice-pwd":this.parseIcePwd(e_);break;case"ice-options":this.parseIceOptions(e_);break;case"candidate":this.parseCandidate(e_);break;case"remote-candidate":this.parseRemoteCandidate(e_);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e_);break;case"rtpmap":this.parseRtpmap(e_);break;case"ptime":this.parsePtime(e_);break;case"maxptime":this.parseMaxPtime(e_);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e_);break;case"ssrc":this.parseSSRC(e_);break;case"fmtp":this.parseFmtp(e_);break;case"rtcp-fb":this.parseRtcpFb(e_);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e_);break;case"mid":this.parseMid(e_);break;case"msid":this.parseMsid(e_);break;case"imageattr":this.parseImageAttr(e_);break;case"rid":this.parseRid(e_);break;case"simulcast":this.parseSimulcast(e_);break;case"sctp-port":this.parseSctpPort(e_);break;case"max-message-size":this.parseMaxMessageSize(e_);break;case"ssrc-group":this.parseSSRCGroup(e_);break;default:e_.ignored=!0,this.attributes.unrecognized.push(e_)}}catch(y_){throw console.error("parsing media attribute ".concat(e_.attField,' error, "a=').concat(e_.attField,":").concat(e_.attValue,'"')),y_}if(!e_.ignored&&e_.attValue&&!this.atEnd(e_))throw new Error("attribute parsing error")}parseCandidate(e_){const y_=this.extractOneOrMore(e_,k_,[1,32]);this.consumeAttributeSpace(e_);const N_=this.extractOneOrMore(e_,ch,[1,5]);this.consumeAttributeSpace(e_);const d0=this.extract(e_,this.consumeToken);this.consumeAttributeSpace(e_);const q0=this.extractOneOrMore(e_,ch,[1,10]);this.consumeAttributeSpace(e_);const jI=this.extract(e_,this.consumeAddress);this.consumeAttributeSpace(e_);const BI=this.extract(e_,this.consumePort);this.consumeAttributeSpace(e_),this.extract(e_,this.consume,"typ"),this.consumeAttributeSpace(e_);const WI={foundation:y_,componentId:N_,transport:d0,priority:q0,connectionAddress:jI,port:BI,type:this.extract(e_,this.consumeToken),extension:{}};for(this.peek(e_," raddr")&&(this.extract(e_,this.consume," raddr"),this.consumeAttributeSpace(e_),WI.relAddr=this.extract(e_,this.consumeAddress)),this.peek(e_," rport")&&(this.extract(e_,this.consume," rport"),this.consumeAttributeSpace(e_),WI.relPort=this.extract(e_,this.consumePort));this.peekChar(e_)===_o;){this.consumeAttributeSpace(e_);const K1=this.extract(e_,this.consumeToken);this.consumeAttributeSpace(e_),WI.extension[K1]=this.extractOneOrMore(e_,_f)}this.attributes.candidates.push(WI)}parseRemoteCandidate(e_){const y_=[];for(;;){const N_=this.extractOneOrMore(e_,ch,[1,5]);this.consumeAttributeSpace(e_);const d0=this.extract(e_,this.consumeAddress);this.consumeAttributeSpace(e_);const q0=this.extract(e_,this.consumePort);y_.push({componentId:N_,connectionAddress:d0,port:q0});try{this.consumeAttributeSpace(e_)}catch(jI){break}}this.attributes.remoteCandidatesList.push(y_)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e_){const y_=this.extract(e_,this.consumeToken);this.consumeAttributeSpace(e_);const N_=this.extract(e_,this.consumeTill,"/");this.extract(e_,this.consume,"/");const d0={encodingName:N_,clockRate:this.extractOneOrMore(e_,ch)};this.atEnd(e_)||"/"!==this.peekChar(e_)||(this.extract(e_,this.consume,"/"),d0.encodingParameters=parseInt(this.extract(e_,this.consumeTill),10));const q0=this.attributes.payloads.find(jI=>jI.payloadType===parseInt(y_,10));q0?q0.rtpMap=d0:this.attributes.payloads.push({payloadType:parseInt(y_,10),rtpMap:d0,rtcpFeedbacks:[]})}parsePtime(e_){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e_,this.consumeTill)}parseMaxPtime(e_){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e_,this.consumeTill)}parseDirection(e_){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e_.attField}parseSSRC(e_){const y_=this.extractOneOrMore(e_,ch);this.consumeAttributeSpace(e_);const N_=this.extract(e_,this.consumeTill,":");let d0;":"===this.peekChar(e_)&&(this.extract(e_,this.consume,":"),d0=this.extract(e_,this.consumeTill));const q0=this.attributes.ssrcs.find(jI=>jI.ssrcId===parseInt(y_,10));q0?q0.attributes[N_]=d0:this.attributes.ssrcs.push({ssrcId:parseInt(y_,10),attributes:{[N_]:d0}})}parseFmtp(e_){const y_=this.extract(e_,this.consumeTill,_o);this.consumeAttributeSpace(e_);const N_=this.extract(e_,this.consumeTill),d0={};N_.split(";").forEach(jI=>{let[BI,WI]=jI.split("=");BI=BI.trim(),WI="string"==typeof WI?WI.trim():WI,"string"==typeof BI&&BI.length>0&&(d0[BI]=WI)});const q0=this.attributes.payloads.find(jI=>jI.payloadType===parseInt(y_,10));q0?q0.fmtp={parameters:d0}:this.attributes.payloads.push({payloadType:parseInt(y_,10),rtcpFeedbacks:[],fmtp:{parameters:d0}})}parseFmtParameters(e_){const y_={},N_=this.extract(e_,this.consumeTill,"=");e_._cur++;const d0=this.extract(e_,this.consumeTill,";");for(y_[N_]=d0;";"===e_.attValue[e_._cur];){const q0=this.extract(e_,this.consumeTill,"=");e_._cur++;const jI=this.extract(e_,this.consumeTill,";");y_[q0]=jI}return y_}parseRtcpFb(e_){let y_="";y_="*"===this.peekChar(e_)?this.extract(e_,this.consume,"*"):this.extract(e_,this.consumeTill,_o),this.consumeAttributeSpace(e_);const N_=this.extract(e_,this.consumeTill,_o);let d0;if("trr-int"===N_)d0={type:N_,interval:this.extract(e_,this.consumeTill)};else{const q0={type:N_};this.peekChar(e_)===_o&&(this.consumeAttributeSpace(e_),q0.parameter=this.extract(e_,this.consumeToken),this.peekChar(e_)===_o&&(q0.additional=this.extract(e_,this.consumeTill))),d0=q0}if("*"===y_)this.attributes.rtcpFeedbackWildcards.push(d0);else{const q0=this.attributes.payloads.find(jI=>jI.payloadType===parseInt(y_,10));q0?q0.rtcpFeedbacks.push(d0):this.attributes.payloads.push({payloadType:parseInt(y_,10),rtcpFeedbacks:[d0]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e_){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const y_={port:this.extract(e_,this.consumePort)};this.peekChar(e_)===_o&&(this.consumeAttributeSpace(e_),y_.netType=this.extractOneOrMore(e_,i_),this.consumeAttributeSpace(e_),y_.addressType=this.extractOneOrMore(e_,i_),this.consumeAttributeSpace(e_),y_.address=this.extract(e_,this.consumeAddress)),this.attributes.rtcp=y_}parseMsid(e_){const y_={id:this.extractOneOrMore(e_,i_,[1,64])};this.peekChar(e_)===_o&&(this.consumeAttributeSpace(e_),y_.appdata=this.extractOneOrMore(e_,i_,[1,64])),this.attributes.msids.push(y_)}parseImageAttr(e_){this.attributes.imageattr.push(e_.attValue)}parseRid(e_){const y_=this.extractOneOrMore(e_,d0=>g_(d0)||ch(d0)||"_"===d0||"-"===d0);this.consumeAttributeSpace(e_);const N_={id:y_,direction:this.extract(e_,this.consumeToken),params:[]};if(this.peekChar(e_)===_o){if(this.consumeAttributeSpace(e_),this.peek(e_,"pt=")){this.extract(e_,this.consume,"pt=");const d0=[];for(;;){const q0=this.extract(e_,this.consumeToken);d0.push(q0);try{this.extract(e_,this.consume,",")}catch(jI){break}}N_.payloads=d0,this.peekChar(e_)===_o&&this.extract(e_,this.consume,_o)}for(;;){const d0=this.extract(e_,this.consumeToken);switch(d0){case"depend":{const q0={type:d0,rids:this.extract(e_,this.consume,"=").split(",")};N_.params.push(q0);break}default:{const q0={type:d0};"="===this.peekChar(e_)&&(this.extract(e_,this.consume,"="),q0.val=this.extract(e_,this.consumeTill,";")),N_.params.push(q0)}}try{this.extract(e_,this.consume,";")}catch(q0){break}}}this.attributes.rids.push(N_)}parseSimulcast(e_){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e_.attValue,this.extract(e_,this.consumeTill)}parseSctpPort(e_){this.attributes.sctpPort=this.extractOneOrMore(e_,ch,[1,5])}parseMaxMessageSize(e_){this.attributes.maxMessageSize=this.extractOneOrMore(e_,ch,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e_){this.attributes.mid=this.extract(e_,this.consumeToken)}parseSSRCGroup(e_){const y_=this.extract(e_,this.consumeToken),N_=[];for(;;)try{this.consumeAttributeSpace(e_);const d0=this.extract(e_,this.consumeInteger);N_.push(parseInt(d0,10))}catch(d0){break}this.attributes.ssrcGroups.push({semantic:y_,ssrcIds:N_})}}function o0(A0,e_,y_){return e_ in A0?Object.defineProperty(A0,e_,{value:y_,enumerable:!0,configurable:!0,writable:!0}):A0[e_]=y_,A0}class W0{constructor(){o0(this,"eol",_i)}print(e_,y_){let N_="";return y_&&(this.eol=y_),N_+=this.printVersion(e_.version),N_+=this.printOrigin(e_.origin),N_+=this.printSessionName(e_.sessionName),N_+=this.printInformation(e_.information),N_+=this.printUri(e_.uri),N_+=this.printEmail(e_.emails),N_+=this.printPhone(e_.phones),N_+=this.printConnection(e_.connection),N_+=this.printBandwidth(e_.bandwidths),N_+=this.printTimeFields(e_.timeFields),N_+=this.printKey(e_.key),N_+=this.printSessionAttributes(e_.attributes),N_+=this.printMediaDescription(e_.mediaDescriptions),N_}printVersion(e_){return"v=".concat(e_).concat(this.eol)}printOrigin(e_){return"o=".concat(e_.username," ").concat(e_.sessId," ").concat(e_.sessVersion," ").concat(e_.nettype," ").concat(e_.addrtype," ").concat(e_.unicastAddress).concat(this.eol)}printSessionName(e_){return e_?"s=".concat(e_).concat(this.eol):""}printInformation(e_){return e_?"i=".concat(e_).concat(this.eol):""}printUri(e_){return e_?"u=".concat(e_).concat(this.eol):""}printEmail(e_){let y_="";for(const N_ of e_)y_+="e=".concat(N_).concat(this.eol);return y_}printPhone(e_){let y_="";for(const N_ of e_)y_+="e=".concat(N_).concat(this.eol);return y_}printConnection(e_){return e_?"c=".concat(e_.nettype," ").concat(e_.addrtype," ").concat(e_.address).concat(this.eol):""}printBandwidth(e_){let y_="";for(const N_ of e_)y_+="b=".concat(N_.bwtype,":").concat(N_.bandwidth).concat(this.eol);return y_}printTimeFields(e_){let y_="";for(const N_ of e_){y_+="t=".concat(N_.time.startTime," ").concat(N_.time.startTime).concat(this.eol);for(const d0 of N_.repeats)y_+="r=".concat(d0.repeatInterval," ").concat(d0.typedTimes.join(" ")).concat(this.eol);N_.zoneAdjustments&&(y_+="z=",y_+="z=".concat(N_.zoneAdjustments.map(d0=>"".concat(d0.time," ").concat(d0.back?"-":""," ").concat(d0.typedTime)).join(" ")).concat(this.eol),y_+=this.eol)}return y_}printKey(e_){return e_?"k=".concat(e_).concat(this.eol):""}printAttributes(e_){let y_="";for(const N_ of e_)y_+="a=".concat(N_.attField).concat(N_.attValue?":".concat(N_.attValue):"").concat(this.eol);return y_}printMediaDescription(e_){let y_="";for(const N_ of e_)y_+=this.printMedia(N_.media),y_+=this.printInformation(N_.information),y_+=this.printConnections(N_.connections),y_+=this.printBandwidth(N_.bandwidths),y_+=this.printKey(N_.key),y_+=this.printMediaAttributes(N_);return y_}printConnections(e_){let y_="";for(const N_ of e_)y_+=this.printConnection(N_);return y_}printMedia(e_){return"m=".concat(e_.mediaType," ").concat(e_.port," ").concat(e_.protos.join("/")," ").concat(e_.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e_){return new _v(this.eol).print(e_)}printMediaAttributes(e_){return new u0(this.eol).print(e_)}}class q_{constructor(e_){o0(this,"eol",void 0),this.eol=e_}printIceUfrag(e_){return void 0===e_?"":"a=ice-ufrag:".concat(e_).concat(this.eol)}printIcePwd(e_){return void 0===e_?"":"a=ice-pwd:".concat(e_).concat(this.eol)}printIceOptions(e_){return void 0===e_?"":"a=ice-options:".concat(e_.join(_o)).concat(this.eol)}printFingerprints(e_){return e_.length>0?e_.map(y_=>"a=fingerprint:".concat(y_.hashFunction).concat(_o).concat(y_.fingerprint)).join(this.eol)+this.eol:""}printExtmap(e_){return e_.map(y_=>"a=extmap:".concat(y_.entry).concat(y_.direction?"/".concat(y_.direction):"").concat(_o).concat(y_.extensionName).concat(y_.extensionAttributes?"".concat(_o).concat(y_.extensionAttributes):"").concat(this.eol)).join("")}printSetup(e_){return void 0===e_?"":"a=setup:".concat(e_).concat(this.eol)}printUnrecognized(e_){return e_.map(y_=>"a=".concat(y_.attField).concat(y_.attValue?":".concat(y_.attValue):"").concat(this.eol)).join("")}}class _v extends q_{print(e_){let y_="";return y_+=this.printGroups(e_.groups),y_+=this.printMsidSemantic(e_.msidSemantic),y_+=this.printIceLite(e_.iceLite),y_+=this.printIceUfrag(e_.iceUfrag),y_+=this.printIcePwd(e_.icePwd),y_+=this.printIceOptions(e_.iceOptions),y_+=this.printFingerprints(e_.fingerprints),y_+=this.printSetup(e_.setup),y_+=this.printTlsId(e_.tlsId),y_+=this.printIdentity(e_.identities),y_+=this.printExtmap(e_.extmaps),y_+=this.printUnrecognized(e_.unrecognized),y_}printGroups(e_){let y_="";return e_.length>0&&(y_+=e_.map(N_=>"a=group:".concat(N_.semantic).concat(N_.identificationTag.map(d0=>"".concat(_o).concat(d0)).join("")).concat(this.eol)).join("")),y_}printIceLite(e_){return void 0===e_?"":"a=ice-lite"+this.eol}printTlsId(e_){return e_?"a=tls-id:".concat(e_).concat(this.eol):""}printIdentity(e_){return 0===e_.length?"":e_.map(y_=>"a=identity:".concat(y_.assertionValue).concat(y_.extensions.map(N_=>"".concat(_o).concat(N_.name).concat(N_.value?"=".concat(N_.value):"")))).join(this.eol)+this.eol}printMsidSemantic(e_){if(!e_)return"";let y_="a=msid-semantic:".concat(e_.semantic);return e_.applyForAll?y_+="".concat(_o,"*"):e_.identifierList.length>0&&(y_+=e_.identifierList.map(N_=>"".concat(_o).concat(N_))),y_+this.eol}}class u0 extends q_{print(e_){const y_=e_.attributes;let N_="";return N_+=this.printRTCP(y_.rtcp),N_+=this.printIceUfrag(y_.iceUfrag),N_+=this.printIcePwd(y_.icePwd),N_+=this.printIceOptions(y_.iceOptions),N_+=this.printCandidates(y_.candidates),N_+=this.printRemoteCandidatesList(y_.remoteCandidatesList),N_+=this.printEndOfCandidates(y_.endOfCandidates),N_+=this.printFingerprints(y_.fingerprints),N_+=this.printSetup(y_.setup),N_+=this.printMid(y_.mid),N_+=this.printExtmap(y_.extmaps),N_+=this.printRTPRelated(y_),N_+=this.printPtime(y_.ptime),N_+=this.printMaxPtime(y_.maxPtime),N_+=this.printDirection(y_.direction),N_+=this.printSSRCGroups(y_.ssrcGroups),N_+=this.printSSRC(y_.ssrcs),N_+=this.printRTCPMux(y_.rtcpMux),N_+=this.printRTCPMuxOnly(y_.rtcpMuxOnly),N_+=this.printRTCPRsize(y_.rtcpRsize),N_+=this.printMSId(y_.msids),N_+=this.printImageattr(y_.imageattr),N_+=this.printRid(y_.rids),N_+=this.printSimulcast(y_.simulcast),N_+=this.printSCRPPort(y_.sctpPort),N_+=this.printMaxMessageSize(y_.maxMessageSize),N_+=this.printUnrecognized(y_.unrecognized),N_}printCandidates(e_){return e_.map(y_=>"a=candidate:".concat(y_.foundation).concat(_o).concat(y_.componentId).concat(_o).concat(y_.transport).concat(_o).concat(y_.priority).concat(_o).concat(y_.connectionAddress).concat(_o).concat(y_.port).concat(_o,"typ").concat(_o).concat(y_.type).concat(y_.relAddr?"".concat(_o,"raddr").concat(_o).concat(y_.relAddr):"").concat(y_.relPort?"".concat(_o,"rport").concat(_o).concat(y_.relPort):"").concat(Object.keys(y_.extension).map(N_=>"".concat(_o).concat(N_).concat(_o).concat(y_.extension[N_])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(e_){return e_.map(y_=>"a=remote-candidates:".concat(y_.join(_o)).concat(this.eol)).join("")}printEndOfCandidates(e_){return void 0===e_?"":"a=end-of-candidates"+this.eol}printRTPRelated(e_){if(!e_.payloads)return"";const y_=e_.payloads;let N_="";N_+=e_.rtcpFeedbackWildcards.map(d0=>this.printRTCPFeedback("*",d0)).join("");for(const d0 of y_)N_+=this.printRtpMap(d0.payloadType,d0.rtpMap),N_+=this.printFmtp(d0.payloadType,d0.fmtp),N_+=d0.rtcpFeedbacks.map(q0=>this.printRTCPFeedback(d0.payloadType,q0)).join("");return N_}printFmtp(e_,y_){if(!y_)return"";const N_=Object.keys(y_.parameters);return 1===N_.length&&void 0===y_.parameters[N_[0]]?"a=fmtp:".concat(e_).concat(_o).concat(N_[0]).concat(this.eol):"a=fmtp:".concat(e_).concat(_o).concat(Object.keys(y_.parameters).map(d0=>"".concat(d0,"=").concat(y_.parameters[d0])).join(";")).concat(this.eol)}printRtpMap(e_,y_){return y_?"a=rtpmap:".concat(e_).concat(_o).concat(y_.encodingName,"/").concat(y_.clockRate).concat(y_.encodingParameters?"/".concat(y_.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e_,y_){let N_="a=rtcp-fb:".concat(e_).concat(_o),d0=y_;return"trr-int"===d0.type?N_+="ttr-int".concat(_o).concat(d0.interval):(d0=d0,N_+="".concat(d0.type),d0.parameter&&(N_+="".concat(_o).concat(d0.parameter),d0.additional&&(N_+="".concat(_o).concat(d0.additional)))),N_+this.eol}printPtime(e_){return void 0===e_?"":"a=ptime:".concat(e_).concat(this.eol)}printMaxPtime(e_){return void 0===e_?"":"a=maxptime:".concat(e_).concat(this.eol)}printDirection(e_){return void 0===e_?"":"a=".concat(e_).concat(this.eol)}printSSRC(e_){return e_.map(y_=>Object.keys(y_.attributes).map(N_=>"a=ssrc:".concat(y_.ssrcId.toString(10)).concat(_o).concat(N_).concat(y_.attributes[N_]?":".concat(y_.attributes[N_]):"").concat(this.eol)).join("")).join("")}printRTCPMux(e_){return void 0===e_?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e_){return void 0===e_?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e_){return void 0===e_?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e_){if(void 0===e_)return"";let y_="a=rtcp:".concat(e_.port);return e_.netType&&(y_+="".concat(_o).concat(e_.netType)),e_.addressType&&(y_+="".concat(_o).concat(e_.addressType)),e_.address&&(y_+="".concat(_o).concat(e_.address)),y_+this.eol}printMSId(e_){return e_.map(y_=>"a=msid:".concat(y_.id).concat(y_.appdata?"".concat(_o).concat(y_.appdata):"").concat(this.eol)).join("")}printImageattr(e_){return e_.map(y_=>"a=imageattr:".concat(y_).concat(this.eol)).join("")}printRid(e_){return e_.map(y_=>{let N_="a=rid:".concat(y_.id).concat(_o).concat(y_.direction);return y_.payloads&&(N_+="".concat(_o,"pt=").concat(y_.payloads.join(","))),y_.params.length>0&&(N_+="".concat(_o).concat(y_.params.map(d0=>"depend"===d0.type?"depend=".concat(d0.rids.join(",")):"".concat(d0.type,"=").concat(d0.val)).join(";"))),N_+this.eol}).join("")}printSimulcast(e_){return void 0===e_?"":"a=simulcast:".concat(e_).concat(this.eol)}printSCRPPort(e_){return void 0===e_?"":"a=sctp-port:".concat(e_).concat(this.eol)}printMaxMessageSize(e_){return void 0===e_?"":"a=max-message-size:".concat(e_)}printMid(e_){return void 0===e_?"":"a=mid:".concat(e_).concat(this.eol)}printSSRCGroups(e_){return e_.map(y_=>"a=ssrc-group:".concat(y_.semantic).concat(y_.ssrcIds.map(N_=>"".concat(_o).concat(N_.toString(10))).join("")).concat(this.eol)).join("")}}function B0(A0){return(new Z0).parse(A0)}function $0(A0,e_){return(new W0).print(A0,e_)}}},y={};function w($){if(y[$])return y[$].exports;var j=y[$]={exports:{}};return A[$](j,j.exports,w),j.exports}return w.d=($,j)=>{for(var _e in j)w.o(j,_e)&&!w.o($,_e)&&Object.defineProperty($,_e,{enumerable:!0,get:j[_e]})},w.o=($,j)=>Object.prototype.hasOwnProperty.call($,j),w.r=$=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},w(8)})()}(t3);class cbe{constructor(p){a_(this,"sessionDesc",void 0),a_(this,"localCapabilities",void 0),a_(this,"rtpCapabilities",void 0),a_(this,"candidates",void 0),a_(this,"iceParameters",void 0),a_(this,"dtlsParameters",void 0),a_(this,"setup",void 0),a_(this,"currentMidIndex",void 0),a_(this,"cname",void 0),p=gR(p);const{remoteIceParameters:A,remoteDtlsParameters:y,candidates:w,remoteRTPCapabilities:$,remoteSetup:j,localCapabilities:_e,sdkCodec:K,cname:_i}=p,_o=t3.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=$,this.candidates=w,this.iceParameters=A,this.dtlsParameters=y,this.setup=j,this.localCapabilities=_e,this.cname=_i;for(let _u=0;_u<_o.mediaDescriptions.length;_u++){const ch=_o.mediaDescriptions[_u];if(ch.attributes.iceUfrag=A.iceUfrag,ch.attributes.icePwd=A.icePwd,ch.attributes.fingerprints=y.fingerprints,ch.attributes.candidates=w,ch.attributes.setup=j,"video"===ch.media.mediaType){ch.media.fmts=$.videoCodecs.map(o_=>o_.payloadType.toString(10));const _f=$.videoCodecs.filter(o_=>{var i_;return null===(i_=o_.rtpMap)||void 0===i_?void 0:i_.encodingName.toLowerCase().includes(K)});if(0===_f.length)throw new Error("Codec ".concat(K," not supported by remote SDP."));ch.attributes.payloads=_f,ch.attributes.extmaps=$.videoExtensions}"audio"===ch.media.mediaType&&(ch.media.fmts=$.audioCodecs.map(_f=>_f.payloadType.toString(10)),ch.attributes.payloads=$.audioCodecs,ch.attributes.extmaps=$.audioExtensions),_o.mediaDescriptions[_u]=this.mungMediaDesc(ch)}this.sessionDesc=_o,this.currentMidIndex=_o.mediaDescriptions.length-1}toString(){return t3.exports.print(this.sessionDesc)}send(p,A,y){const{ssrcs:w,ssrcGroups:$}=wie(A,this.cname),j=this.sessionDesc.mediaDescriptions.find(_i=>p===o1.VIDEO?"video"===_i.media.mediaType:"audio"===_i.media.mediaType),_e=w[0].attributes.label,K=w[0].attributes.mslabel;return j.attributes.ssrcs=j.attributes.ssrcs.concat(w),j.attributes.ssrcGroups=j.attributes.ssrcGroups.concat($),{id:_e,mslabel:K}}batchSend(p){return p.map(A=>{let{kind:y,ssrcMsg:w}=A;return this.send(y,w,void 0)})}stopSending(p){this.sessionDesc.mediaDescriptions.forEach(A=>{const y=[],w=[],$=[];A.attributes.ssrcs.forEach(j=>{p.includes(j.attributes.label||"")?$.push(j):y.push(j)}),A.attributes.ssrcGroups.forEach(j=>{$.map(_e=>_e.ssrcId).includes(j.ssrcIds[0])||w.push(j)}),A.attributes.ssrcs=y,A.attributes.ssrcGroups=w})}mute(p){const A=this.sessionDesc.mediaDescriptions.find(y=>y.attributes.mid===p);if(!A)throw new Error("mediaDescription not found with ".concat(p," in remote SDP when calling RemoteSDP.mute."));A.attributes.direction="inactive"}unmute(p){const A=this.sessionDesc.mediaDescriptions.find(y=>y.attributes.mid===p);if(!A)throw new Error("mediaDescription not found with ".concat(p," in remote SDP when calling RemoteSDP.unmute."));A.attributes.direction="sendonly"}receive(p,A,y){p.forEach((w,$)=>{const j=w._mediaStreamTrack,_e=this.sessionDesc.mediaDescriptions.findIndex(_i=>_i.attributes.mid===j.kind),K=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[_e],w);this.sessionDesc.mediaDescriptions[_e]=K})}stopReceiving(p){}restartICE(p,A){p=gR(p),A=gR(A),this.iceParameters=p,this.candidates=A,this.sessionDesc.mediaDescriptions.forEach(y=>{y.attributes.iceUfrag=p.iceUfrag,y.attributes.icePwd=p.icePwd,y.attributes.candidates=this.candidates})}predictReceivingMids(p){const A=[];for(let y=0;y<p;y++)A.push((this.currentMidIndex+y+1).toString(10));return A}mungRecvMediaDsec(p,A){const y=gR(p);return zme(y,A),n0e(y,A),y}updateRecvMedia(p,A){const y=this.sessionDesc.mediaDescriptions.findIndex(w=>w.attributes.mid===p);if(-1!==y){const w=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[y],A);this.sessionDesc.mediaDescriptions[y]=w}}bumpMid(p){this.currentMidIndex+=p}updateTrackLabel(p,A,y){const w=this.sessionDesc.mediaDescriptions.find(j=>p===o1.VIDEO?"video"===j.attributes.mid:"audio"===j.attributes.mid);if(w){const j=w.attributes.ssrcs.find(_e=>_e.attributes.label===A);var $;j&&(j.attributes.label=y,null===($=j.attributes.msid)||void 0===$||$.replace(A,y))}}mungMediaDesc(p){const A=gR(p);return t0e(A),function(y){const w=y.attributes.extmaps.find($=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===$.extensionName);w&&y.attributes.extmaps.splice(y.attributes.extmaps.indexOf(w),1),y.attributes.payloads.forEach($=>{const j=$.rtcpFeedbacks.findIndex(_e=>"transport-cc"===_e.type);-1!==j&&$.rtcpFeedbacks.splice(j,1)})}(A),A}}function V4(s){if(Array.isArray(s))return s.map(function(y){return y});if(!o0e(s))return s;var p={};for(var A in s)p[A]=o0e(s[A])||Array.isArray(s[A])?V4(s[A]):s[A];return p}function o0e(s){return!("object"!=typeof s||Array.isArray(s)||!s)}var Hye=function(){function s(p){this.input=[],this.size=p}return s.prototype.add=function(p){this.input.push(p),this.input.length>this.size&&this.input.splice(0,1)},s.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},s}(),s0e=function(s,p){return(s0e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,y){A.__proto__=y}||function(A,y){for(var w in y)y.hasOwnProperty(w)&&(A[w]=y[w])})(s,p)};function qye(s,p){function A(){this.constructor=s}s0e(s,p),s.prototype=null===p?Object.create(p):(A.prototype=p.prototype,new A)}var vX=function(){return(vX=Object.assign||function(s){for(var p,A=1,y=arguments.length;A<y;A++)for(var w in p=arguments[A])Object.prototype.hasOwnProperty.call(p,w)&&(s[w]=p[w]);return s}).apply(this,arguments)};function Wye(s,p,A,y){return new(A||(A=Promise))(function(w,$){function j(_i){try{K(y.next(_i))}catch(_o){$(_o)}}function _e(_i){try{K(y.throw(_i))}catch(_o){$(_o)}}function K(_i){_i.done?w(_i.value):new A(function(_o){_o(_i.value)}).then(j,_e)}K((y=y.apply(s,p||[])).next())})}function Kye(s,p){var A,y,w,$,j={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return $={next:_e(0),throw:_e(1),return:_e(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function _e(K){return function(_i){return function(_o){if(A)throw new TypeError("Generator is already executing.");for(;j;)try{if(A=1,y&&(w=2&_o[0]?y.return:_o[0]?y.throw||((w=y.return)&&w.call(y),0):y.next)&&!(w=w.call(y,_o[1])).done)return w;switch(y=0,w&&(_o=[2&_o[0],w.value]),_o[0]){case 0:case 1:w=_o;break;case 4:return j.label++,{value:_o[1],done:!1};case 5:j.label++,y=_o[1],_o=[0];continue;case 7:_o=j.ops.pop(),j.trys.pop();continue;default:if(!((w=(w=j.trys).length>0&&w[w.length-1])||6!==_o[0]&&2!==_o[0])){j=0;continue}if(3===_o[0]&&(!w||_o[1]>w[0]&&_o[1]<w[3])){j.label=_o[1];break}if(6===_o[0]&&j.label<w[1]){j.label=w[1],w=_o;break}if(w&&j.label<w[2]){j.label=w[2],j.ops.push(_o);break}w[2]&&j.ops.pop(),j.trys.pop();continue}_o=p.call(s,j)}catch(_u){_o=[6,_u],y=0}finally{A=w=0}if(5&_o[0])throw _o[1];return{value:_o[0]?_o[1]:void 0,done:!0}}([K,_i])}}}var G4,a0e={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},tde={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:a0e,remoteCandidate:a0e}},c0e={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},u0e={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},l0e={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},d0e={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},zye=function(){function s(p,A){var y=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=V4(tde),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=p,this.options=A,this.intervalTimer=window.setInterval(function(){return Wye(y,void 0,void 0,function(){return Kye(this,function(w){return this.updateStats(),[2]})})},this.options.updateInterval)}return s.prototype.getStats=function(){return this.stats},s.prototype.setVideoIsReady=function(p){this.videoIsReady=p},s.prototype.setVideoIsReady2=function(p,A){this.videoIsReady2[p]=A},s.prototype.getVideoIsReady=function(p){return this.videoIsReady2[p]||!1},s.prototype.setIsFirstAudioDecoded=function(p){},s.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},s.prototype.calcLossRate=function(p){var A=this;this.lossRateWindowStats.push(p),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var y=this.lossRateWindowStats.length,w=0,$=0,j=0,_e=0,K=function(_u){p[_u].forEach(function(ch,_f){if(A.lossRateWindowStats[y-1][_u][_f]&&A.lossRateWindowStats[0][_u][_f]){var o_=A.lossRateWindowStats[y-1][_u][_f].packets-A.lossRateWindowStats[0][_u][_f].packets,i_=A.lossRateWindowStats[y-1][_u][_f].packetsLost-A.lossRateWindowStats[0][_u][_f].packetsLost;"videoSend"===_u||"audioSend"===_u?(w+=o_,j+=i_):($+=o_,_e+=i_),ch.packetLostRate=Number.isNaN(o_)||Number.isNaN(o_)||o_<=0||i_<=0?0:i_/(o_+i_)}})},_i=0,_o=["videoSend","audioSend","videoRecv","audioRecv"];_i<_o.length;_i++)K(_o[_i]);p.sendPacketLossRate=w<=0||j<=0?0:j/(w+j),p.recvPacketLossRate=$<=0||_e<=0?0:_e/($+_e)},s}(),ube=function(s){function p(){var A=null!==s&&s.apply(this,arguments)||this;return A._stats=tde,A.lastDecodeVideoReceiverStats=new Map,A}return qye(p,s),p.prototype.updateStats=function(){return Wye(this,void 0,void 0,function(){var A,y,w,$;return Kye(this,function(j){switch(j.label){case 0:return[4,this._getStats()];case 1:return A=j.sent(),y=this.statsResponsesToObjects(A),this._stats=V4(tde),w=y.filter(function(_e){return"ssrc"===_e.type}),this.processSSRCStats(w),($=y.find(function(_e){return"VideoBwe"===_e.type}))&&this.processBandwidthStats($),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},p.prototype.processBandwidthStats=function(A){this._stats.bitrate={actualEncoded:Number(A.googActualEncBitrate),targetEncoded:Number(A.googTargetEncBitrate),retransmit:Number(A.googRetransmitBitrate),transmit:Number(A.googTransmitBitrate)},this._stats.sendBandwidth=Number(A.googAvailableSendBandwidth)},p.prototype.processSSRCStats=function(A){var y=this;A.forEach(function(w){var $=w.id.includes("send");switch(w.mediaType+"_"+($?"send":"recv")){case"video_send":var j=V4(u0e);j.codec=w.googCodecName,j.adaptionChangeReason="none",w.googCpuLimitedResolution&&(j.adaptionChangeReason="cpu"),w.googBandwidthLimitedResolution&&(j.adaptionChangeReason="bandwidth"),j.avgEncodeMs=Number(w.googAvgEncodeMs),j.inputFrame={width:Number(w.googFrameWidthInput)||Number(w.googFrameWidthSent),height:Number(w.googFrameHeightInput)||Number(w.googFrameHeightSent),frameRate:Number(w.googFrameRateInput)},j.sentFrame={width:Number(w.googFrameWidthSent),height:Number(w.googFrameHeightSent),frameRate:Number(w.googFrameRateInput)},j.firsCount=Number(w.googFirReceived),j.nacksCount=Number(w.googNacksReceived),j.plisCount=Number(w.googPlisReceived),j.frameCount=Number(w.framesEncoded),j.bytes=Number(w.bytesSent),j.packets=Number(w.packetsSent),j.packetsLost=Number(w.packetsLost),j.ssrc=Number(w.ssrc),j.rttMs=Number(w.googRtt||0),y._stats.videoSend.push(j),y._stats.rtt=j.rttMs;break;case"video_recv":var _e=V4(c0e),K=y.lastDecodeVideoReceiverStats.get(Number(w.ssrc));if(_e.codec=w.googCodecName,_e.targetDelayMs=Number(w.googTargetDelayMs),_e.renderDelayMs=Number(w.googRenderDelayMs),_e.currentDelayMs=Number(w.googCurrentDelayMs),_e.minPlayoutDelayMs=Number(w.googMinPlayoutDelayMs),_e.decodeMs=Number(w.googDecodeMs),_e.maxDecodeMs=Number(w.googMaxDecodeMs),_e.receivedFrame={width:Number(w.googFrameWidthReceived),height:Number(w.googFrameHeightReceived),frameRate:Number(w.googFrameRateReceived)},_e.decodedFrame={width:Number(w.googFrameWidthReceived),height:Number(w.googFrameHeightReceived),frameRate:Number(w.googFrameRateDecoded)},_e.outputFrame={width:Number(w.googFrameWidthReceived),height:Number(w.googFrameHeightReceived),frameRate:Number(w.googFrameRateOutput)},_e.jitterBufferMs=Number(w.googJitterBufferMs),_e.firsCount=Number(w.googFirsSent),_e.nacksCount=Number(w.googNacksSent),_e.plisCount=Number(w.googPlisSent),_e.framesDecodeCount=Number(w.framesDecoded),_e.bytes=Number(w.bytesReceived),_e.packets=Number(w.packetsReceived),_e.packetsLost=Number(w.packetsLost),_e.ssrc=Number(w.ssrc),_e.packets>0&&!y.isFirstVideoReceived[_e.ssrc]&&(y.onFirstVideoReceived&&y.onFirstVideoReceived(_e.ssrc),y.isFirstVideoReceived[_e.ssrc]=!0),_e.framesDecodeCount>0&&!y.isFirstVideoDecoded[_e.ssrc]&&(y.onFirstVideoDecoded&&y.onFirstVideoDecoded(_e.ssrc,_e.decodedFrame.width,_e.decodedFrame.height),y.isFirstVideoDecoded[_e.ssrc]=!0),K){var _i=K.stats,_o=Date.now()-K.lts;_e.framesDecodeFreezeTime=_i.framesDecodeFreezeTime,_e.framesDecodeInterval=_i.framesDecodeInterval,_e.framesDecodeCount>_i.framesDecodeCount&&y.isFirstVideoDecoded?(K.lts=Date.now(),_e.framesDecodeInterval=_o,_e.framesDecodeInterval>=y.options.freezeRateLimit&&(y.getVideoIsReady(parseInt(w.ssrc,10))?_e.framesDecodeFreezeTime+=_e.framesDecodeInterval:y.setVideoIsReady2(parseInt(w.ssrc,10),!0))):_e.framesDecodeCount<K.stats.framesDecodeCount&&(_e.framesDecodeInterval=0)}y.lastDecodeVideoReceiverStats.set(_e.ssrc,{stats:vX({},_e),lts:Date.now()}),y._stats.videoRecv.push(_e);break;case"audio_recv":var _u=V4(d0e);_u.codec=w.googCodecName,_u.outputLevel=Math.abs(Number(w.audioOutputLevel))/32767,_u.decodingCNG=Number(w.googDecodingCNG),_u.decodingCTN=Number(w.googDecodingCTN),_u.decodingCTSG=Number(w.googDecodingCTSG),_u.decodingNormal=Number(w.googDecodingNormal),_u.decodingPLC=Number(w.googDecodingPLC),_u.decodingPLCCNG=Number(w.googDecodingPLCCNG),_u.expandRate=Number(w.googExpandRate),_u.accelerateRate=Number(w.googAccelerateRate),_u.preemptiveExpandRate=Number(w.googPreemptiveExpandRate),_u.secondaryDecodedRate=Number(w.googSecondaryDecodedRate),_u.speechExpandRate=Number(w.googSpeechExpandRate),_u.preferredJitterBufferMs=Number(w.googPreferredJitterBufferMs),_u.jitterBufferMs=Number(w.googJitterBufferMs),_u.jitterMs=Number(w.googJitterReceived),_u.bytes=Number(w.bytesReceived),_u.packets=Number(w.packetsReceived),_u.packetsLost=Number(w.packetsLost),_u.ssrc=Number(w.ssrc),_u.receivedFrames=Number(w.googDecodingCTN)||Number(w.packetsReceived),_u.droppedFrames=Number(w.googDecodingPLC)+Number(w.googDecodingPLCCNG)||Number(w.packetsLost),_u.receivedFrames>0&&!y.isFirstAudioReceived[_u.ssrc]&&(y.onFirstAudioReceived&&y.onFirstAudioReceived(_u.ssrc),y.isFirstAudioReceived[_u.ssrc]=!0),_u.decodingNormal>0&&!y.isFirstAudioDecoded[_u.ssrc]&&(y.onFirstAudioDecoded&&y.onFirstAudioDecoded(_u.ssrc),y.isFirstAudioDecoded[_u.ssrc]=!0),y._stats.audioRecv.push(_u);break;case"audio_send":var ch=V4(l0e);ch.codec=w.googCodecName,ch.inputLevel=Math.abs(Number(w.audioInputLevel))/32767,ch.aecReturnLoss=Number(w.googEchoCancellationReturnLoss||0),ch.aecReturnLossEnhancement=Number(w.googEchoCancellationReturnLossEnhancement||0),ch.residualEchoLikelihood=Number(w.googResidualEchoLikelihood||0),ch.residualEchoLikelihoodRecentMax=Number(w.googResidualEchoLikelihoodRecentMax||0),ch.bytes=Number(w.bytesSent),ch.packets=Number(w.packetsSent),ch.packetsLost=Number(w.packetsLost),ch.ssrc=Number(w.ssrc),ch.rttMs=Number(w.googRtt||0),y._stats.rtt=ch.rttMs,y._stats.audioSend.push(ch)}})},p.prototype._getStats=function(){var A=this;return new Promise(function(y,w){A.pc.getStats(y,w)})},p.prototype.statsResponsesToObjects=function(A){var y=[];return A.result().forEach(function(w){var $={id:w.id,timestamp:w.timestamp.valueOf().toString(),type:w.type};w.names().forEach(function(j){$[j]=w.stat(j)}),y.push($)}),y},p}(zye);!function(s){s.CERTIFICATE="certificate",s.CODEC="codec",s.CANDIDATE_PAIR="candidate-pair",s.LOCAL_CANDIDATE="local-candidate",s.REMOTE_CANDIDATE="remote-candidate",s.INBOUND="inbound-rtp",s.TRACK="track",s.OUTBOUND="outbound-rtp",s.PC="peer-connection",s.REMOTE_INBOUND="remote-inbound-rtp",s.REMOTE_OUTBOUND="remote-outbound-rtp",s.TRANSPORT="transport",s.CSRC="csrc",s.DATA_CHANNEL="data-channel",s.STREAM="stream",s.SENDER="sender",s.RECEIVER="receiver"}(G4||(G4={}));var x1,h0e=function(s){function p(){var A=null!==s&&s.apply(this,arguments)||this;return A._stats=tde,A.lastDecodeVideoReceiverStats=new Map,A.lastVideoFramesRecv=new Map,A.lastVideoFramesSent=new Map,A.lastVideoFramesDecode=new Map,A.lastVideoJBDelay=new Map,A.lastAudioJBDelay=new Map,A.mediaBytesSent=new Map,A.mediaBytesRetransmit=new Map,A.mediaBytesTargetEncode=new Map,A.lastEncoderMs=new Map,A}return qye(p,s),p.prototype.updateStats=function(){return Wye(this,void 0,void 0,function(){var A,y=this;return Kye(this,function(w){switch(w.label){case 0:return A=this,[4,this.pc.getStats()];case 1:return A.report=w.sent(),this._stats=V4(tde),this.report.forEach(function($){switch($.type){case G4.OUTBOUND:"audio"===$.mediaType?y.processAudioOutboundStats($):"video"===$.mediaType&&y.processVideoOutboundStats($);break;case G4.INBOUND:"audio"===$.mediaType?y.processAudioInboundStats($):"video"===$.mediaType&&y.processVideoInboundStats($);break;case G4.TRANSPORT:var j=y.report.get($.selectedCandidatePairId);j&&y.processCandidatePairStats(j);break;case G4.CANDIDATE_PAIR:$.selected&&y.processCandidatePairStats($)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},p.prototype.processCandidatePairStats=function(A){if(this._stats.sendBandwidth=A.availableOutgoingBitrate||0,A.currentRoundTripTime&&(this._stats.rtt=1e3*A.currentRoundTripTime),this._stats.videoSend.forEach(function($){!$.rttMs&&A.currentRoundTripTime&&($.rttMs=1e3*A.currentRoundTripTime)}),this._stats.audioSend.forEach(function($){!$.rttMs&&A.currentRoundTripTime&&($.rttMs=1e3*A.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=A.id,A.localCandidateId){var y=this.report.get(A.localCandidateId);y&&this.processCandidateStats(y)}if(A.remoteCandidateId){var w=this.report.get(A.remoteCandidateId);w&&this.processCandidateStats(w)}},p.prototype.processCandidateStats=function(A){var y;A.type===G4.LOCAL_CANDIDATE&&(y=this._stats.selectedCandidatePair.localCandidate),A.type===G4.REMOTE_CANDIDATE&&(y=this._stats.selectedCandidatePair.remoteCandidate),y&&(y.type=A.type,y.id=A.id,A.address&&(y.address=A.address),A.candidateType&&(y.candidateType=A.candidateType),A.port&&(y.port=A.port),A.priority&&(y.priority=A.priority),A.protocol&&(y.protocol=A.protocol),A.relayProtocol&&(y.relayProtocol=A.relayProtocol),A.type===G4.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==y.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(vX({},y),vX({},this.stats.selectedCandidatePair.localCandidate)),A.type===G4.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==y.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(vX({},y),vX({},this.stats.selectedCandidatePair.remoteCandidate)))},p.prototype.processAudioInboundStats=function(A){var y=this._stats.audioRecv.find(function(w){return w.ssrc===A.ssrc});y||(y=V4(d0e),this._stats.audioRecv.push(y)),y.ssrc=A.ssrc,y.packets=A.packetsReceived,y.packetsLost=A.packetsLost,y.bytes=A.bytesReceived,y.jitterMs=1e3*A.jitter,A.trackId&&this.processAudioTrackReceiverStats(A.trackId,y),A.codecId&&(y.codec=this.getCodecFromCodecStats(A.codecId)),y.receivedFrames||(y.receivedFrames=A.packetsReceived),y.droppedFrames||(y.droppedFrames=A.packetsLost),y.receivedFrames>0&&!this.isFirstAudioReceived[y.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(y.ssrc),this.isFirstAudioReceived[y.ssrc]=!0),y.outputLevel&&y.outputLevel>0&&!this.isFirstAudioDecoded[y.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(y.ssrc),this.isFirstAudioDecoded[y.ssrc]=!0)},p.prototype.processVideoInboundStats=function(A){var y=this._stats.videoRecv.find(function(_u){return _u.ssrc===A.ssrc});y||(y=V4(c0e),this._stats.videoRecv.push(y)),y.ssrc=A.ssrc,y.packets=A.packetsReceived,y.packetsLost=A.packetsLost,y.bytes=A.bytesReceived,y.firsCount=A.firCount,y.nacksCount=A.nackCount,y.plisCount=A.pliCount,y.framesDecodeCount=A.framesDecoded;var w=this.lastDecodeVideoReceiverStats.get(y.ssrc),$=this.lastVideoFramesDecode.get(y.ssrc),j=Date.now();if(y.framesDecodeCount>0&&!this.isFirstVideoDecoded[y.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(y.ssrc,y.decodedFrame?y.decodedFrame.width:0,y.decodedFrame?y.decodedFrame.height:0),this.isFirstVideoDecoded[y.ssrc]=!0),w){var _i=w.stats,_o=j-w.lts;y.framesDecodeFreezeTime=_i.framesDecodeFreezeTime,y.framesDecodeInterval=_i.framesDecodeInterval,y.framesDecodeCount>_i.framesDecodeCount&&this.isFirstVideoDecoded?(w.lts=Date.now(),y.framesDecodeInterval=_o,y.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(A.ssrc))?y.framesDecodeFreezeTime+=y.framesDecodeInterval:this.setVideoIsReady2(parseInt(A.ssrc,10),!0))):y.framesDecodeCount<_i.framesDecodeCount&&(y.framesDecodeInterval=0),A.framesDecoded&&A.qpSum&&(y.qpSumPerFrame=w.stats.framesDecodeCount>A.framesDecoded?A.qpSum/A.framesDecoded:(A.qpSum-w.qpSum)/(A.framesDecoded-w.stats.framesDecodeCount))}$&&j-$.lts>=800?(y.decodeFrameRate=Math.round((y.framesDecodeCount-$.count)/((j-$.lts)/1e3)),this.lastVideoFramesDecode.set(y.ssrc,{count:y.framesDecodeCount,lts:j,rate:y.decodeFrameRate})):$?y.decodeFrameRate=$.rate:this.lastVideoFramesDecode.set(y.ssrc,{count:y.framesDecodeCount,lts:j,rate:0}),A.totalDecodeTime&&(y.decodeMs=1e3*A.totalDecodeTime),A.trackId&&this.processVideoTrackReceiverStats(A.trackId,y),A.codecId&&(y.codec=this.getCodecFromCodecStats(A.codecId)),A.framerateMean&&(y.framesRateFirefox=A.framerateMean),y.packets>0&&!this.isFirstVideoReceived[y.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(y.ssrc),this.isFirstVideoReceived[y.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(y.ssrc,{stats:vX({},y),lts:w?w.lts:Date.now(),qpSum:A.qpSum})},p.prototype.processVideoOutboundStats=function(A){var y=this._stats.videoSend.find(function(ch){return ch.ssrc===A.ssrc});y||(y=V4(u0e),this._stats.videoSend.push(y));var w,$=this.mediaBytesSent.get(A.ssrc);if($?$.add(A.bytesSent):((_e=new Hye(10)).add(A.bytesSent),this.mediaBytesSent.set(A.ssrc,_e)),void 0!==A.retransmittedBytesSent){var j=this.mediaBytesRetransmit.get(A.ssrc);j?j.add(A.retransmittedBytesSent):((_e=new Hye(10)).add(A.retransmittedBytesSent),this.mediaBytesRetransmit.set(A.ssrc,_e))}if(A.totalEncodedBytesTarget){var _e,K=this.mediaBytesTargetEncode.get(A.ssrc);K?K.add(A.totalEncodedBytesTarget):((_e=new Hye(10)).add(A.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(A.ssrc,_e))}if(y.ssrc=A.ssrc,y.bytes=A.bytesSent,y.packets=A.packetsSent,y.firsCount=A.firCount,y.nacksCount=A.nackCount,y.plisCount=A.pliCount,y.frameCount=A.framesEncoded,y.adaptionChangeReason=A.qualityLimitationReason,A.totalEncodeTime&&A.framesEncoded&&(y.avgEncodeMs=!(w=this.lastEncoderMs.get(A.ssrc))||w.lastFrameCount>A.framesEncoded?1e3*A.totalEncodeTime/A.framesEncoded:1e3*(A.totalEncodeTime-w.lastEncoderTime)/(A.framesEncoded-w.lastFrameCount)),A.framesEncoded&&A.qpSum&&(y.qpSumPerFrame=!(w=this.lastEncoderMs.get(A.ssrc))||w.lastFrameCount>A.framesEncoded?A.qpSum/A.framesEncoded:(A.qpSum-w.lastQpSum)/(A.framesEncoded-w.lastFrameCount)),this.lastEncoderMs.set(A.ssrc,{lastFrameCount:A.framesEncoded,lastEncoderTime:A.totalEncodeTime,lastQpSum:A.qpSum,lts:Date.now()}),A.codecId&&(y.codec=this.getCodecFromCodecStats(A.codecId)),A.mediaSourceId&&this.processVideoMediaSource(A.mediaSourceId,y),A.trackId&&this.processVideoTrackSenderStats(A.trackId,y),A.remoteId)this.processRemoteInboundStats(A.remoteId,y);else{var _u=this.findRemoteStatsId(A.ssrc,G4.REMOTE_INBOUND);_u&&this.processRemoteInboundStats(_u,y)}},p.prototype.processAudioOutboundStats=function(A){var y=this._stats.audioSend.find(function($){return $.ssrc===A.ssrc});if(y||(y=V4(l0e),this._stats.audioSend.push(y)),y.ssrc=A.ssrc,y.packets=A.packetsSent,y.bytes=A.bytesSent,A.mediaSourceId&&this.processAudioMediaSource(A.mediaSourceId,y),A.codecId&&(y.codec=this.getCodecFromCodecStats(A.codecId)),A.trackId&&this.processAudioTrackSenderStats(A.trackId,y),A.remoteId)this.processRemoteInboundStats(A.remoteId,y);else{var w=this.findRemoteStatsId(A.ssrc,G4.REMOTE_INBOUND);w&&this.processRemoteInboundStats(w,y)}},p.prototype.findRemoteStatsId=function(A,y){var w=Array.from(this.report.values()).find(function($){return $.type===y&&$.ssrc===A});return w?w.id:null},p.prototype.processVideoMediaSource=function(A,y){var w=this.report.get(A);w&&w.width&&w.height&&w.framesPerSecond&&(y.inputFrame={width:w.width,height:w.height,frameRate:w.framesPerSecond})},p.prototype.processAudioMediaSource=function(A,y){var w=this.report.get(A);w&&(y.inputLevel=w.audioLevel)},p.prototype.processVideoTrackSenderStats=function(A,y){var w=this.report.get(A);if(w){var $=0,j=Date.now(),_e=this.lastVideoFramesSent.get(y.ssrc);_e&&j-_e.lts>=800?($=Math.round((w.framesSent-_e.count)/((j-_e.lts)/1e3)),this.lastVideoFramesSent.set(y.ssrc,{count:w.framesSent,lts:j,rate:$})):_e?$=_e.rate:this.lastVideoFramesSent.set(y.ssrc,{count:w.framesSent,lts:j,rate:0}),y.sentFrame={width:w.frameWidth,height:w.frameHeight,frameRate:$}}},p.prototype.processVideoTrackReceiverStats=function(A,y){var w=this.report.get(A);if(w){var $=this.lastVideoFramesRecv.get(y.ssrc),j=Date.now();y.framesReceivedCount=w.framesReceived;var _e=0;if($&&j-$.lts>=800?(_e=Math.round((w.framesReceived-$.count)/((j-$.lts)/1e3)),this.lastVideoFramesRecv.set(y.ssrc,{count:w.framesReceived,lts:j,rate:_e})):$?_e=$.rate:this.lastVideoFramesRecv.set(y.ssrc,{count:w.framesReceived,lts:j,rate:0}),y.receivedFrame={width:w.frameWidth||0,height:w.frameHeight||0,frameRate:_e||0},y.decodedFrame={width:w.frameWidth||0,height:w.frameHeight||0,frameRate:y.decodeFrameRate||0},y.outputFrame={width:w.frameWidth||0,height:w.frameHeight||0,frameRate:y.decodeFrameRate||0},w.jitterBufferDelay&&w.jitterBufferEmittedCount){var K=this.lastVideoJBDelay.get(y.ssrc);this.lastVideoJBDelay.set(y.ssrc,{jitterBufferDelay:w.jitterBufferDelay,jitterBufferEmittedCount:w.jitterBufferEmittedCount}),K||(K={jitterBufferDelay:0,jitterBufferEmittedCount:0});var _i=1e3*(w.jitterBufferDelay-K.jitterBufferDelay)/(w.jitterBufferEmittedCount-K.jitterBufferEmittedCount);y.jitterBufferMs=_i,y.currentDelayMs=Math.round(_i)}}},p.prototype.processAudioTrackSenderStats=function(A,y){var w=this.report.get(A);w&&(y.aecReturnLoss=w.echoReturnLoss||0,y.aecReturnLossEnhancement=w.echoReturnLossEnhancement||0)},p.prototype.processAudioTrackReceiverStats=function(A,y){var w=this.report.get(A);if(w){if(w.removedSamplesForAcceleration&&w.totalSamplesReceived&&(y.accelerateRate=w.removedSamplesForAcceleration/w.totalSamplesReceived),w.jitterBufferDelay&&w.jitterBufferEmittedCount){var $=this.lastAudioJBDelay.get(y.ssrc);this.lastAudioJBDelay.set(y.ssrc,{jitterBufferDelay:w.jitterBufferDelay,jitterBufferEmittedCount:w.jitterBufferEmittedCount}),$||($={jitterBufferDelay:0,jitterBufferEmittedCount:0}),y.jitterBufferMs=Math.round(1e3*(w.jitterBufferDelay-$.jitterBufferDelay)/(w.jitterBufferEmittedCount-$.jitterBufferEmittedCount))}y.outputLevel=w.audioLevel;var _e=1920;w.totalSamplesDuration&&w.totalSamplesReceived&&(_e=w.totalSamplesReceived/w.totalSamplesDuration/50,y.receivedFrames=Math.round(w.totalSamplesReceived/_e)),w.concealedSamples&&(y.droppedFrames=Math.round(w.concealedSamples/_e))}},p.prototype.processRemoteInboundStats=function(A,y){var w=this.report.get(A);w&&(y.packetsLost=w.packetsLost,w.roundTripTime&&(y.rttMs=1e3*w.roundTripTime))},p.prototype.getCodecFromCodecStats=function(A){var y=this.report.get(A);if(!y)return"";var w=y.mimeType.match(/\/(.*)$/);return w&&w[1]?w[1]:""},p.prototype.updateSendBitrate=function(){var A=0,y=null,w=null;this.mediaBytesSent.forEach(function(j){A+=j.diffMean()}),this.mediaBytesRetransmit.forEach(function(j){y=null===y?j.diffMean():y+j.diffMean()}),this.mediaBytesTargetEncode.forEach(function(j){w=null===w?j.diffMean():w+j.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==y?A-y:A)/(this.options.updateInterval/1e3),transmit:8*A/(this.options.updateInterval/1e3)},null!==y&&(this._stats.bitrate.retransmit=8*y/(this.options.updateInterval/1e3)),null!==w&&(this._stats.bitrate.targetEncoded=8*w/(this.options.updateInterval/1e3))},p}(zye),lbe=function(s){function p(){return null!==s&&s.apply(this,arguments)||this}return qye(p,s),p.prototype.updateStats=function(){return Promise.resolve()},p}(zye);function f0e(s,p,A,y){void 0===p&&(p=250),void 0===A&&(A=8),void 0===y&&(y=500);var w,$=(w=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&w[0]?Number(w[0].split("/")[1]):null;return $?$<76?new ube(s,{updateInterval:p,lossRateInterval:A,freezeRateLimit:y}):new h0e(s,{updateInterval:p,lossRateInterval:A,freezeRateLimit:y}):window.RTCStatsReport&&s.getStats()instanceof Promise?new h0e(s,{updateInterval:p,lossRateInterval:A,freezeRateLimit:y}):new lbe(s,{updateInterval:p,lossRateInterval:A,freezeRateLimit:y})}function p0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function g0e(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?p0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):p0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let dbe=(cI((x1=class iAe extends Hfe{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(p,A){super(p,A),a_(this,"store",void 0),a_(this,"peerConnection",void 0),a_(this,"remoteSDP",void 0),a_(this,"initialOffer",void 0),a_(this,"statsFilter",void 0),a_(this,"useRTX",!1),a_(this,"localCapabilities",void 0),a_(this,"localCandidateCount",0),a_(this,"allCandidatesReceived",!1),a_(this,"mutex",new MR("P2PConnection-mutex")),this.store=A,this.peerConnection=new RTCPeerConnection(iAe.resolvePCConfiguration(p),{optional:[{googDscp:!0}]}),this.statsFilter=f0e(this.peerConnection,void 0,void 0,q2()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var p=this;return f(function*(){try{const A=yield p.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!A.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const y=Kme(A.sdp),w=Qye(A.sdp,!p.useRTX,!1,["opus"]);return p.localCapabilities=w,p.initialOffer=A,g0e(g0e({},y),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:w},offerSDP:A.sdp})}catch(A){throw new U_(D_.GET_LOCAL_CONNECTION_PARAMS_FAILED,A.toString())}})()}connect(p,A,y,w,$,j){var _e=this;return f(function*(){try{if(!_e.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");_e.remoteSDP=new cbe({remoteIceParameters:p,remoteDtlsParameters:A,candidates:y,remoteRTPCapabilities:w.send,remoteSetup:$,localCapabilities:_e.localCapabilities,sdkCodec:_e.store.codec,cname:j});const K=_e.remoteSDP.toString();yield _e.peerConnection.setLocalDescription(_e.initialOffer),yield _e.peerConnection.setRemoteDescription({type:"answer",sdp:K})}catch(K){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(K.toString()))}})()}send(p,A){var y=this;return ede(function*(){const w=yield GS(y.mutex.lock());try{if(!y.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const $=p.map(ch=>y.peerConnection.addTrack(ch._mediaStreamTrack)),j=yield GS(y.peerConnection.createOffer()),_e=t3.exports.parse(j.sdp),K=p.map(ch=>{const _f=ch._mediaStreamTrack,o_=_e.mediaDescriptions.find(i_=>i_.attributes.mid===_f.kind);if(!o_)throw new Error("Cannot extract ssrc from mediaDescription.");return function(i_,u_,g_){const __=i_.attributes.ssrcs.filter(k_=>k_.attributes.label===u_),w_=i_.attributes.ssrcGroups;if(0===__.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(w_&&__.length>1){const k_=w_.find(Pv=>-1!==Pv.ssrcIds.indexOf(__[0].ssrcId));return k_?[{ssrcId:k_.ssrcIds[0],rtx:g_?k_.ssrcIds[1]:void 0}]:[{ssrcId:__[0].ssrcId}]}return[{ssrcId:__[0].ssrcId}]}(o_,_f.id,y.useRTX)});let _i;try{_i=yield K}catch(ch){throw $.forEach(_f=>{H2()&&_f.replaceTrack(null),y.peerConnection.removeTrack(_f)}),ch}const _o=y.mungSendOfferSDP(j.sdp,p);y.remoteSDP.receive(p,A,_i);const _u=y.remoteSDP.toString();return yield GS(y.peerConnection.setLocalDescription({type:"offer",sdp:_o})),yield GS(y.applySendEncodings($,p)),yield GS(y.peerConnection.setRemoteDescription({type:"answer",sdp:_u})),p.map((ch,_f)=>({localSSRC:K[_f],id:ch._mediaStreamTrack.id}))}catch($){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat($.toString()))}finally{w()}})()}stopSending(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const y=A.peerConnection.getSenders().filter(j=>{var _e;return-1!==p.indexOf((null===(_e=j.track)||void 0===_e?void 0:_e.id)||"")});if(y.length!==p.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");y.map(j=>{H2()&&j.replaceTrack(null),A.peerConnection.removeTrack(j)});const w=yield A.peerConnection.createOffer();yield A.peerConnection.setLocalDescription(w),A.remoteSDP.stopReceiving(p);const $=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"answer",sdp:$})}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(y.toString()))}})()}receive(p,A,y,w){var $=this;return f(function*(){try{if(!$.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(p," before remoteSDP created."));const{id:j,mslabel:_e}=$.remoteSDP.send(p,A,w),K=new sI((_u,ch)=>{const _f=setTimeout(()=>{ch(new Error("Cannot receive track, id: ".concat(j)))},1e4),o_=i_=>{const u_=J1();if(("Safari"===u_.name&&11===Number(u_.version)||W2())&&i_.track.id!==j&&i_.streams[0].id===_e){var g_;const __=i_.streams[0].getTracks()[0];return null===(g_=$.remoteSDP)||void 0===g_||g_.updateTrackLabel(p,j,i_.track.id),$.peerConnection.removeEventListener("track",o_),clearTimeout(_f),void _u(__)}if(i_.track.id===j)return $.peerConnection.removeEventListener("track",o_),clearTimeout(_f),void _u(i_.track)};$.peerConnection.addEventListener("track",o_)}),_i=$.remoteSDP.toString();yield $.peerConnection.setRemoteDescription({type:"offer",sdp:_i});const _o=yield $.peerConnection.createAnswer();return yield $.peerConnection.setLocalDescription(_o),{track:yield K,id:j}}catch(j){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(j.toString()))}})()}stopReceiving(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");A.remoteSDP.stopSending(p);const y=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"offer",sdp:y});const w=yield A.peerConnection.createAnswer();yield A.peerConnection.setLocalDescription(w)}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(y.toString()))}})()}muteRemote(p){return f(function*(){})()}unmuteRemote(p){return f(function*(){})()}muteLocal(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const y=A.peerConnection.getSenders().filter(w=>{var $;return-1!==p.indexOf((null===($=w.track)||void 0===$?void 0:$.id)||"")});if(y.length!==p.length)throw new Error("sender' length doesn't match mids' length.");y.map(w=>{if(H2()&&w.track)w.track.enabled=!1;else{const $=w.getParameters();$.encodings.forEach(j=>j.active=!1),w.setParameters($)}})}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(y.toString()))}})()}unmuteLocal(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const y=A.peerConnection.getSenders().filter(j=>{var _e;return-1!==p.indexOf((null===(_e=j.track)||void 0===_e?void 0:_e.id)||"")});if(y.length!==p.length)throw new Error("Senders' length doesn't match mids' length.");y.map(function(){var j=f(function*(_e){if(H2()&&_e.track)_e.track.enabled=!0;else{const K=_e.getParameters();K.encodings.forEach(_i=>_i.active=!0),yield _e.setParameters(K)}});return function(_e){return j.apply(this,arguments)}}());const w=yield A.peerConnection.createOffer();yield A.peerConnection.setLocalDescription(w);const $=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"answer",sdp:$})}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(y.toString()))}})()}reEstablish(){var p=this;return f(function*(){const A=yield p.peerConnection.createOffer({iceRestart:!0});if(!A.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:Kme(A.sdp).iceParameters,restartICE:(y=f(function*(w,$){return p.restartICE(A,w,$)}),function($,j){return y.apply(this,arguments)}),restartOfferSDP:A.sdp};var y})()}close(){var p;this.peerConnection.close(),null===(p=this.onConnectionStateChange)||void 0===p||p.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(p){return this.statsFilter.getVideoIsReady(p)}updateEncoderConfig(p,A){var y=this;return f(function*(){try{if(!y.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const w=yield y.peerConnection.createOffer(),$=y.mungSendOfferSDP(w.sdp,[A]);y.remoteSDP.updateRecvMedia(A._mediaStreamTrack.kind,A);const j=y.remoteSDP.toString();yield y.peerConnection.setLocalDescription({type:"offer",sdp:$}),yield y.peerConnection.setRemoteDescription({type:"answer",sdp:j})}catch(w){throw new U_(D_.EXCHANGE_SDP_FAILED,w.toString())}})()}updateSendParameters(p,A){var y=this;return f(function*(){const w=y.peerConnection.getSenders().filter($=>{var j;return(null===(j=$.track)||void 0===j?void 0:j.id)===p});1===w.length&&(yield y.applySendEncodings(w,[A]))})()}setStatsRemoteVideoIsReady(p,A){this.statsFilter.setVideoIsReady2(p,A)}replaceTrack(p,A){var y=this;return f(function*(){const w=y.peerConnection.getSenders().find($=>{var j;return(null===(j=$.track)||void 0===j?void 0:j.id)===A});w&&(yield w.replaceTrack(p._mediaStreamTrack))})()}restartICE(p,A,y){var w=this;return f(function*(){try{if(!w.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");w.remoteSDP.restartICE(A,y);const $=w.remoteSDP.toString();yield w.peerConnection.setLocalDescription(p),yield w.peerConnection.setRemoteDescription({type:"answer",sdp:$})}catch($){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat($.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var p;null===(p=this.onICEConnectionStateChange)||void 0===p||p.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var p;null===(p=this.onConnectionStateChange)||void 0===p||p.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=p=>{p.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,h_.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,h_.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},S0("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(p){const A={iceServers:[],sdpSemantics:"plan-b"};return p.iceServers?A.iceServers=p.iceServers:p.turnServer&&"off"!==p.turnServer.mode&&(MK(p.turnServer.servers)?A.iceServers=p.turnServer.servers:(A.iceServers&&A.iceServers.push(...iAe.turnServerConfigToIceServers(p.turnServer.servers)),S0("USE_TURN_SERVER_OF_GATEWAY")&&A.iceServers&&p.turnServer.serversFromGateway&&A.iceServers.push(...iAe.turnServerConfigToIceServers(p.turnServer.serversFromGateway)),p.turnServer.servers.concat(p.turnServer.serversFromGateway||[]).forEach(y=>{y.forceturn&&(A.iceTransportPolicy="relay")}))),A}static turnServerConfigToIceServers(p){const A=[];return p.forEach(y=>{y.security?y.tcpport&&A.push({username:y.username,credential:y.password,credentialType:"password",urls:"turns:".concat(y.turnServerURL,":").concat(y.tcpport,"?transport=tcp")}):(y.udpport&&A.push({username:y.username,credential:y.password,credentialType:"password",urls:"turn:".concat(y.turnServerURL,":").concat(y.udpport,"?transport=udp")}),y.tcpport&&A.push({username:y.username,credential:y.password,credentialType:"password",urls:"turn:".concat(y.turnServerURL,":").concat(y.tcpport,"?transport=tcp")}))}),A}applySendEncodings(p,A){return f(function*(){try{if(!jS().supportSetRtpSenderParameters||p.length!==A.length)return;for(let w=0;w<p.length;w++){var y;const $=p[w],j=A[w];if(!j)continue;const _e={},K={};if(j instanceof UR)switch(j._optimizationMode){case"motion":_e.degradationPreference="maintain-framerate";break;case"detail":_e.degradationPreference="maintain-resolution";break;default:_e.degradationPreference="balanced"}if(S0("DSCP_TYPE")&&p6()){const _u=S0("DSCP_TYPE");["very-low","low","medium","high"].includes(_u)&&(K.networkPriority=_u)}const _i=$.getParameters(),_o=null===(y=_i.encodings)||void 0===y?void 0:y[0];_o&&Object.assign(_o,K),Object.assign(_i,_e),yield $.setParameters(_i)}}catch(w){h_.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(p,A){const y=t3.exports.parse(p);return A.forEach((w,$)=>{const j=w._mediaStreamTrack,_e=y.mediaDescriptions.find(K=>K.attributes.mid===j.kind);_e&&zme(_e,w)}),t3.exports.print(y)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=p=>{var A;null===(A=this.onFirstAudioReceived)||void 0===A||A.call(this,p)},this.statsFilter.onFirstVideoReceived=p=>{var A;null===(A=this.onFirstVideoReceived)||void 0===A||A.call(this,p)},this.statsFilter.onFirstAudioDecoded=p=>{var A;null===(A=this.onFirstAudioDecoded)||void 0===A||A.call(this,p)},this.statsFilter.onFirstVideoDecoded=(p,A,y)=>{var w;null===(w=this.onFirstVideoDecoded)||void 0===w||w.call(this,p,A,y)},this.statsFilter.onSelectedLocalCandidateChanged=(p,A)=>{var y;null===(y=this.onSelectedLocalCandidateChanged)||void 0===y||y.call(this,p,A)},this.statsFilter.onSelectedRemoteCandidateChanged=(p,A)=>{var y;null===(y=this.onSelectedRemoteCandidateChanged)||void 0===y||y.call(this,p,A)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const y=A.remoteSDP.batchSend(p).map((j,_e)=>{let{id:K,mslabel:_i}=j;const{kind:_o}=p[_e];return new sI((_u,ch)=>{const _f=setTimeout(()=>{ch(new Error("Cannot receive track, id: ".concat(K)))},1e4),o_=i_=>{const u_=J1();if("Safari"===u_.name&&11===Number(u_.version)&&i_.track.id!==K&&i_.streams[0].id===_i){var g_;const __=i_.streams[0].getTracks()[0];return null===(g_=A.remoteSDP)||void 0===g_||g_.updateTrackLabel(_o,K,i_.track.id),A.peerConnection.removeEventListener("track",o_),clearTimeout(_f),void _u({track:__,id:K})}if(i_.track.id===K)return A.peerConnection.removeEventListener("track",o_),clearTimeout(_f),void _u({track:i_.track,id:K})};A.peerConnection.addEventListener("track",o_)})}),w=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"offer",sdp:w});const $=yield A.peerConnection.createAnswer();return yield A.peerConnection.setLocalDescription($),yield sI.all(y)}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(y.toString()))}})()}}).prototype,"connect",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"connect"),x1.prototype),cI(x1.prototype,"stopSending",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"stopSending"),x1.prototype),cI(x1.prototype,"receive",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"receive"),x1.prototype),cI(x1.prototype,"stopReceiving",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"stopReceiving"),x1.prototype),cI(x1.prototype,"muteRemote",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"muteRemote"),x1.prototype),cI(x1.prototype,"unmuteRemote",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"unmuteRemote"),x1.prototype),cI(x1.prototype,"muteLocal",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"muteLocal"),x1.prototype),cI(x1.prototype,"unmuteLocal",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"unmuteLocal"),x1.prototype),cI(x1.prototype,"reEstablish",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"reEstablish"),x1.prototype),cI(x1.prototype,"close",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"close"),x1.prototype),cI(x1.prototype,"updateEncoderConfig",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"updateEncoderConfig"),x1.prototype),cI(x1.prototype,"updateSendParameters",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"updateSendParameters"),x1.prototype),cI(x1.prototype,"replaceTrack",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"replaceTrack"),x1.prototype),cI(x1.prototype,"restartICE",[GM],Object.getOwnPropertyDescriptor(x1.prototype,"restartICE"),x1.prototype),x1);function GM(s,p,A){const y=s[p];if("function"!=typeof y)throw new Error("Cannot use mutex on object property.");return A.value=f(function*(){const w=this.mutex,$=yield w.lock("Locking from P2PConnection.".concat(p));try{for(var j=arguments.length,_e=new Array(j),K=0;K<j;K++)_e[K]=arguments[K];return yield y.apply(this,_e)}finally{$()}}),A}var m0e;let hbe=dI("RemoteSDP")(m0e=class{get localCapabilities(){return gR(this._localCapabilities)}get rtpCapabilities(){return gR(this._rtpCapabilities)}get candidates(){return gR(this._candidates)}get iceParameters(){return gR(this._iceParameters)}get dtlsParameters(){return gR(this._dtlsParameters)}constructor(s){a_(this,"sessionDesc",void 0),a_(this,"_localCapabilities",void 0),a_(this,"_rtpCapabilities",void 0),a_(this,"_candidates",void 0),a_(this,"_iceParameters",void 0),a_(this,"_dtlsParameters",void 0),a_(this,"setup",void 0),a_(this,"currentMidIndex",void 0),a_(this,"cname",void 0),s=gR(s);const{remoteIceParameters:p,remoteDtlsParameters:A,candidates:y,remoteRTPCapabilities:w,remoteSetup:$,localCapabilities:j,cname:_e}=s,K=t3.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=w,this._candidates=y,this._iceParameters=p,this._dtlsParameters=A,this._localCapabilities=j,this.setup=$,this.cname=_e;const _i=this.rtpCapabilities.send;for(const _o of K.mediaDescriptions){if(_o.attributes.iceUfrag=p.iceUfrag,_o.attributes.icePwd=p.icePwd,_o.attributes.fingerprints=A.fingerprints,_o.attributes.candidates=y,_o.attributes.setup=$,"video"===_o.media.mediaType&&(_o.media.fmts=_i.videoCodecs.map(_u=>_u.payloadType.toString(10)),_o.attributes.payloads=_i.videoCodecs,_o.attributes.extmaps=_i.videoExtensions,S0("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:_u,ssrcGroups:ch}=wie([{ssrcId:4e4,rtx:S0("USE_RTX")?40001:void 0}],this.cname);_o.attributes.ssrcs=_u,_o.attributes.ssrcGroups=ch}if("audio"===_o.media.mediaType&&(_o.media.fmts=_i.audioCodecs.map(_u=>_u.payloadType.toString(10)),_o.attributes.payloads=_i.audioCodecs,_o.attributes.extmaps=_i.audioExtensions,S0("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:_u,ssrcGroups:ch}=wie([{ssrcId:2e4}],this.cname);_o.attributes.ssrcs=_u,_o.attributes.ssrcGroups=ch}}this.sessionDesc=K,this.currentMidIndex=K.mediaDescriptions.length-1}preloadRemoteMedia(){const s=S0("PRELOAD_MEDIA_COUNT");T0("debug",this,"preloadRemoteMedia",s);const p=this.candidates,A=this.dtlsParameters,y=this.iceParameters,w=this.rtpCapabilities.send;for(let $=1;$<s;$++){const j=2*$+2e4,_e=2*$+4e4,{ssrcs:K,ssrcGroups:_i}=wie([{ssrcId:j}],this.cname),{ssrcs:_o,ssrcGroups:_u}=wie([{ssrcId:_e,rtx:S0("USE_RTX")?_e+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:w.videoCodecs.map(ch=>ch.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:y.iceUfrag,icePwd:y.icePwd,unrecognized:[],candidates:p,extmaps:w.videoExtensions,fingerprints:A.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_o,ssrcGroups:_u,rtcpFeedbackWildcards:[],payloads:w.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*$)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:w.audioCodecs.map(ch=>ch.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:y.iceUfrag,icePwd:y.icePwd,unrecognized:[],candidates:p,extmaps:w.audioExtensions,fingerprints:A.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:K,ssrcGroups:_i,rtcpFeedbackWildcards:[],payloads:w.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*$+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return t3.exports.print(this.sessionDesc)}send(s,p,A,y){const{ssrcs:w,ssrcGroups:$}=wie(p,this.cname,A),j=this.findPreloadMediaDesc(w);if(j){if(y&&(y.tcc||y.remb)){const _e=this.sessionDesc.mediaDescriptions.indexOf(j);return this.sessionDesc.mediaDescriptions[_e]=this.mungSendMediaDesc(j,y),{mid:j.attributes.mid,needExchangeSDP:!0}}return{mid:j.attributes.mid,needExchangeSDP:!1}}{const _e=this.findAvailableMediaIndex(s);if(H2()||Khe()){if(-1!==_e&&1!==_e){const K=gR(this.sessionDesc.mediaDescriptions[_e]);return K.attributes.direction="sendonly",K.attributes.ssrcs=w,K.attributes.ssrcGroups=$,this.sessionDesc.mediaDescriptions[_e]=this.mungSendMediaDesc(K,y),{mid:K.attributes.mid,needExchangeSDP:!0}}{const K=this.createOrRecycleSendMedia(s,w,$,"sendonly",y);return this.updateBundleMids(),{mid:K.attributes.mid,needExchangeSDP:!0}}}if(-1!==_e){const K=gR(this.sessionDesc.mediaDescriptions[_e]);return K.attributes.direction="sendonly",K.attributes.ssrcs=w,K.attributes.ssrcGroups=$,this.sessionDesc.mediaDescriptions[_e]=this.mungSendMediaDesc(K,y),{mid:K.attributes.mid,needExchangeSDP:!0}}{const K=this.createOrRecycleSendMedia(s,w,$,"sendonly",y);return this.updateBundleMids(),{mid:K.attributes.mid,needExchangeSDP:!0}}}}batchSend(s){const p=s.map(w=>{let{kind:$,ssrcMsg:j,mslabel:_e}=w;return this.send($,j,_e)}),A=[];let y=!1;return p.forEach(w=>{let{mid:$,needExchangeSDP:j}=w;j&&(y=!0),A.push($)}),{mids:A,needExchangeSDP:y}}stopSending(s){const p=this.sessionDesc.mediaDescriptions.filter(A=>A.attributes.mid&&-1!==s.indexOf(A.attributes.mid));if(p.length!==s.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");p.forEach(A=>{"0"===A.attributes.mid||q2()||H2()||Khe()?A.attributes.ssrcs=[]:(A.attributes.ssrcs=[],A.attributes.direction="inactive",A.media.port="0")}),this.updateBundleMids()}mute(s){const p=this.sessionDesc.mediaDescriptions.find(A=>A.attributes.mid===s);if(!p)throw new Error("mediaDescription not found with ".concat(s," in remote SDP when calling RemoteSDP.mute."));p.attributes.direction="inactive"}unmute(s){const p=this.sessionDesc.mediaDescriptions.find(A=>A.attributes.mid===s);if(!p)throw new Error("mediaDescription not found with ".concat(s," in remote SDP when calling RemoteSDP.unmute."));p.attributes.direction="sendonly"}muteRemote(s){const p=this.sessionDesc.mediaDescriptions.filter(A=>s.includes(A.attributes.mid||""));if(p.length!==s.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");p.forEach(A=>{A.attributes.direction="inactive"})}unmuteRemote(s){const p=this.sessionDesc.mediaDescriptions.filter(A=>s.includes(A.attributes.mid||""));if(p.length!==s.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");p.forEach(A=>{A.attributes.direction="recvonly"})}receive(s,p,A,y){s.forEach((w,$)=>{this.createOrRecycleRecvMedia(w,[],"recvonly",p,A,y[$])}),this.updateBundleMids()}stopReceiving(s){const p=this.sessionDesc.mediaDescriptions.filter(A=>-1!==s.indexOf(A.attributes.mid));if(p.length!==s.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");p.forEach(A=>{A.media.port="0",A.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(s,p){s=gR(s),p=gR(p),this._iceParameters=s,this._candidates=p,this.sessionDesc.mediaDescriptions.forEach(A=>{A.attributes.iceUfrag=s.iceUfrag,A.attributes.icePwd=s.icePwd,A.attributes.candidates=this.candidates})}predictReceivingMids(s){const p=[];for(let A=0;A<s;A++)p.push((this.currentMidIndex+A+1).toString(10));return p}findAvailableMediaIndex(s){return this.sessionDesc.mediaDescriptions.findIndex(p=>p.media.mediaType===s&&"0"!==p.media.port&&("sendonly"===p.attributes.direction||"sendrecv"===p.attributes.direction)&&0===p.attributes.ssrcs.length)}createOrRecycleRecvMedia(s,p,A,y,w,$){const j=s._mediaStreamTrack.kind,_e=this.rtpCapabilities.recv,K=this.localCapabilities.send;let _i=[];if(j===o1.VIDEO){var _o,_u;if(S0("H264_PROFILE_LEVEL_ID")&&"h264"===y&&(_i=_e.videoCodecs.filter(u_=>{var g_,__;return((null===(g_=u_.rtpMap)||void 0===g_?void 0:g_.encodingName.toLowerCase())||"").includes(y)&&(null==u_||null===(__=u_.fmtp)||void 0===__?void 0:__.parameters["profile-level-id"])===S0("H264_PROFILE_LEVEL_ID")})),!_i||0===(null===(_o=_i)||void 0===_o?void 0:_o.length)){const u_=K.videoCodecs.filter(g_=>{var __;return((null===(__=g_.rtpMap)||void 0===__?void 0:__.encodingName.toLowerCase())||"").includes(y)});0!==u_.length&&(_i=_e.videoCodecs.filter(g_=>u_.some(__=>__.payloadType===g_.payloadType)))}if(S0("USE_RTX")){const u_=_i.map(__=>__.payloadType.toString()),g_=_e.videoCodecs.filter(__=>{var w_,k_;return"rtx"===(null===(w_=__.rtpMap)||void 0===w_?void 0:w_.encodingName)&&u_.includes((null===(k_=__.fmtp)||void 0===k_?void 0:k_.parameters.apt)||"")});_i=[..._i,...g_]}0===_i.length&&(h_.warning("codec ".concat(y," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(_u=_e.videoCodecs[0].rtpMap)||void 0===_u?void 0:_u.encodingName)),_i=_e.videoCodecs)}else _i=_e.audioCodecs.filter(u_=>{var g_;return((null===(g_=u_.rtpMap)||void 0===g_?void 0:g_.encodingName.toLowerCase())||"").includes(w)}),0===_i.length&&(h_.warning("codec ".concat(w," not included in rtpCapabilities, fallback to opus")),_i=_e.audioCodecs.filter(u_=>{var g_;return((null===(g_=u_.rtpMap)||void 0===g_?void 0:g_.encodingName.toLowerCase())||"").includes("opus")}));const ch=j===o1.VIDEO?_e.videoExtensions:_e.audioExtensions;this.currentMidIndex+=1;const _f="".concat(this.currentMidIndex);let o_={media:{mediaType:j,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:_i.map(u_=>u_.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:ch,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:p,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:_i,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:A,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_f)}};o_=this.mungRecvMediaDsec(o_,s,$);const i_=this.findFirstClosedMedia(j);if(i_){const u_=this.sessionDesc.mediaDescriptions.indexOf(i_);this.sessionDesc.mediaDescriptions[u_]=o_}else this.sessionDesc.mediaDescriptions.push(o_);return o_}createOrRecycleSendMedia(s,p,A,y,w){const $=this.rtpCapabilities.send,j=s===o1.VIDEO?$.videoCodecs:$.audioCodecs,_e=s===o1.VIDEO?$.videoExtensions:$.audioExtensions;this.currentMidIndex+=1;const K="".concat(this.currentMidIndex);let _i={media:{mediaType:s,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:j.map(_u=>_u.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:_e,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:p,ssrcGroups:A,rtcpFeedbackWildcards:[],payloads:j,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:y,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(K)}};_i=this.mungSendMediaDesc(_i,w);const _o=this.findFirstClosedMedia(s);if(_o){const _u=this.sessionDesc.mediaDescriptions.indexOf(_o);this.sessionDesc.mediaDescriptions[_u]=_i}else this.sessionDesc.mediaDescriptions.push(_i);return _i}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(s=>"0"!==s.media.port).map(s=>s.attributes.mid)}mungRecvMediaDsec(s,p,A){const y=gR(s);return t0e(y),zme(y,p),n0e(y,p),function(w){if("video"!==w.media.mediaType)return;const $=J1();if($.name!==V1.SAFARI&&$.os!==RR.IOS)return;const j=w.attributes.extmaps.findIndex(_e=>/video-orientation/g.test(_e.extensionName));-1!==j&&w.attributes.extmaps.splice(j,1)}(y),r0e(y,A,this.localCapabilities.send),y}mungSendMediaDesc(s,p){const A=gR(s);return r0e(A,p,this.localCapabilities.recv),A}updateRecvMedia(s,p){const A=this.sessionDesc.mediaDescriptions.findIndex(y=>y.attributes.mid===s);if(-1!==A){const y=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[A],p);this.sessionDesc.mediaDescriptions[A]=y}}bumpMid(s){this.currentMidIndex+=s}findFirstClosedMedia(s){return this.sessionDesc.mediaDescriptions.find(p=>q2()?"0"===p.media.port&&p.media.mediaType===s:"0"===p.media.port)}findPreloadMediaDesc(s){return this.sessionDesc.mediaDescriptions.find(p=>{var A,y;return(null===(A=p.attributes)||void 0===A||null===(y=A.ssrcs[0])||void 0===y?void 0:y.ssrcId)===s[0].ssrcId})}})||m0e;var _0e,L1;function v0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function y0e(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?v0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):v0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let fbe=dI("P2PConnection","store.p2pId")((cI((L1=class oAe extends Hfe{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(p,A){super(p,A),a_(this,"store",void 0),a_(this,"peerConnection",void 0),a_(this,"remoteSDP",void 0),a_(this,"initialOffer",void 0),a_(this,"transportEventReceiver",void 0),a_(this,"statsFilter",void 0),a_(this,"useRTX",S0("USE_RTX")),a_(this,"localCapabilities",void 0),a_(this,"localCandidateCount",0),a_(this,"allCandidatesReceived",!1),a_(this,"mutex",new MR("P2PConnection-mutex")),this.store=A,this.peerConnection=new RTCPeerConnection(oAe.resolvePCConfiguration(p),{optional:[{googDscp:!0}]}),this.statsFilter=f0e(this.peerConnection,void 0,void 0,q2()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var p=this;return f(function*(){try{p.peerConnection.addTransceiver("video",{direction:"recvonly"}),p.peerConnection.addTransceiver("audio",{direction:"recvonly"});const A=yield p.peerConnection.createOffer();if(!A.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const y=Kme(A.sdp),w=yield($=f(function*(j,_e,K,_i){const _o=new RTCPeerConnection;_o.addTransceiver("video",{direction:"sendonly"}),_o.addTransceiver("audio",{direction:"sendonly"}),_o.addTransceiver("video",{direction:"recvonly"}),_o.addTransceiver("audio",{direction:"recvonly"});const _u=(yield _o.createOffer()).sdp,ch=Qye(_u,j,_e,K,_i,"sendonly"),_f=Qye(_u,j,_e,K,_i,"recvonly"),o_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u_={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Yme(ch,_f,"videoExtensions",o_,i_,u_),Yme(ch,_f,"videoCodecs",o_,i_,u_),Yme(ch,_f,"audioExtensions",o_,i_,u_),Yme(ch,_f,"audioCodecs",o_,i_,u_),S0("RAISE_H264_BASELINE_PRIORITY")){const g_=u_.videoCodecs.findIndex(__=>{var w_,k_;return"h264"===(null===(w_=__.rtpMap)||void 0===w_?void 0:w_.encodingName.toLocaleLowerCase())&&"42001f"===(null===(k_=__.fmtp)||void 0===k_?void 0:k_.parameters["profile-level-id"])});if(-1!==g_){const __=u_.videoCodecs.findIndex(w_=>{var k_;return"h264"===(null===(k_=w_.rtpMap)||void 0===k_?void 0:k_.encodingName.toLocaleLowerCase())});if(__<g_){h_.debug("raising H264 baseline profile priority");const w_=u_.videoCodecs[g_];u_.videoCodecs.splice(g_,1),u_.videoCodecs.splice(__,0,w_)}-1!==__&&(i_.videoCodecs=i_.videoCodecs.filter(w_=>{var k_,Pv;return!("h264"===(null===(k_=w_.rtpMap)||void 0===k_?void 0:k_.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(Pv=w_.fmtp)||void 0===Pv?void 0:Pv.parameters["profile-level-id"]))})),-1!==__&&S0("FILTER_SEND_H264_BASELINE")&&(o_.videoCodecs=o_.videoCodecs.filter(w_=>{var k_,Pv;return!("h264"===(null===(k_=w_.rtpMap)||void 0===k_?void 0:k_.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(Pv=w_.fmtp)||void 0===Pv?void 0:Pv.parameters["profile-level-id"]))}))}}try{_o.close()}catch(g_){}return{send:o_,recv:i_,sendrecv:u_}}),function(j,_e,K,_i){return $.apply(this,arguments)})(!p.useRTX,!1);return p.localCapabilities=i0e(w),p.initialOffer=A,y0e(y0e({},y),{},{rtpCapabilities:w,offerSDP:A.sdp})}catch(A){throw new U_(D_.GET_LOCAL_CONNECTION_PARAMS_FAILED,A.toString())}var $})()}connect(p,A,y,w,$,j){var _e=this;return f(function*(){try{if(!_e.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");_e.remoteSDP=new hbe({remoteIceParameters:p,remoteDtlsParameters:A,candidates:y,remoteRTPCapabilities:w,remoteSetup:$,localCapabilities:_e.localCapabilities,cname:j});const K=_e.remoteSDP.toString(),_i=_e.logSDPExchange(_e.initialOffer.sdp||"","offer","local","connect");yield _e.peerConnection.setLocalDescription(_e.initialOffer),null==_i||_i(K),yield _e.peerConnection.setRemoteDescription({type:"answer",sdp:K});const _o=_e.peerConnection.getTransceivers()[0];if(null!=_o&&_o.receiver&&_e.tryBindTransportEvents(_o.receiver),S0("PRELOAD_MEDIA_COUNT")>0){_e.remoteSDP.preloadRemoteMedia();const _u=_e.remoteSDP.toString();yield _e.peerConnection.setRemoteDescription({type:"offer",sdp:_u});const ch=yield _e.peerConnection.createAnswer();yield _e.peerConnection.setLocalDescription(ch)}}catch(K){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(K.toString()))}})()}send(p,A,y){var w=this;return ede(function*(){const $=yield GS(w.mutex.lock());try{if(!w.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const j=[];p.forEach(i_=>{const u_=w.peerConnection.addTransceiver(i_._mediaStreamTrack,{direction:"sendonly"});j.push(u_)}),q2()&&!0===S0("SIMULCAST")&&(aI("debug",w,"apply simulcast for firefox"),yield GS(w.applySimulcastForFirefox(j,p)));const _e=yield GS(w.peerConnection.createOffer()),K=w.remoteSDP.predictReceivingMids(p.length),_i=w.mungSendOfferSDP(_e.sdp,p,K),_o=t3.exports.parse(_i),_u=K.map(i_=>{const u_=_o.mediaDescriptions.find(g_=>g_.attributes.mid===i_);if(!u_)throw new Error("Cannot extract ssrc from mediaDescription.");return function(g_,__){const w_=[],k_=g_.attributes.ssrcGroups.filter(v0=>"FID"===v0.semantic),Pv=g_.attributes.ssrcGroups.find(v0=>"SIM"===v0.semantic),f0=g_.attributes.ssrcs;if(Pv)Pv.ssrcIds.forEach(v0=>{var I0;const iI=null===(I0=k_.find(H0=>H0.ssrcIds[0]===v0))||void 0===I0?void 0:I0.ssrcIds[1];w_.push({ssrcId:v0,rtx:__?iI:void 0})});else if(k_.length>0){const I0=k_[0].ssrcIds[1];w_.push({ssrcId:k_[0].ssrcIds[0],rtx:__?I0:void 0})}else{if(0===f0.length)throw new Error("No ssrcs found on local media description.");w_.push({ssrcId:f0[0].ssrcId})}return w_}(u_,w.useRTX)});let ch;try{ch=yield _u}catch(i_){ch=[],w.remoteSDP.receive(p,A,y,ch);const u_=w.remoteSDP.toString();throw yield GS(w.peerConnection.setLocalDescription({type:"offer",sdp:_i})),yield GS(w.peerConnection.setRemoteDescription({type:"answer",sdp:u_})),yield GS(w.stopSending(K,!0)),i_}w.remoteSDP.receive(p,A,y,ch);const _f=w.remoteSDP.toString(),o_=w.logSDPExchange(_i,"offer","local","send");return yield GS(w.peerConnection.setLocalDescription({type:"offer",sdp:_i})),yield GS(w.applySimulcastEncodings(j,p)),yield GS(w.applySendEncodings(j,p)),null==o_||o_(_f),yield GS(w.peerConnection.setRemoteDescription({type:"answer",sdp:_f})),j.map((i_,u_)=>({localSSRC:_u[u_],id:K[u_],transceiver:i_}))}catch(j){throw j instanceof U_?j:new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(j.toString()))}finally{$()}})()}stopSending(p,A){var y=this;return f(function*(){const w=A?void 0:yield y.mutex.lock("From P2PConnection.stopSending");try{if(!y.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const $=y.peerConnection.getTransceivers().filter(_i=>-1!==p.indexOf(_i.mid));if($.length!==p.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");$.map(_i=>{var _o;_i.direction="inactive",null===(_o=_i.stop)||void 0===_o||_o.call(_i)});const j=yield y.peerConnection.createOffer(),_e=y.logSDPExchange(j.sdp||"","offer","local","stopSending");yield y.peerConnection.setLocalDescription(j),y.remoteSDP.stopReceiving(p);const K=y.remoteSDP.toString();null==_e||_e(K),yield y.peerConnection.setRemoteDescription({type:"answer",sdp:K})}catch($){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat($.toString()))}finally{w&&w()}})()}receive(p,A,y,w){var $=this;return f(function*(){try{if(!$.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(p," before remoteSDP created."));const{mid:j,needExchangeSDP:_e}=$.remoteSDP.send(p,A,y,w);if(_e){const _i=$.remoteSDP.toString(),_o=$.logSDPExchange(_i,"offer","remote","receive");yield $.peerConnection.setRemoteDescription({type:"offer",sdp:_i});const _u=yield $.peerConnection.createAnswer();null==_o||_o(_u.sdp||""),yield $.peerConnection.setLocalDescription(_u),h_.debug("[P2PConnection] receive ".concat(p," by exchanging SDP."))}else h_.debug("[P2PConnection] receive ".concat(p," no need to exchange SDP."));const K=$.peerConnection.getTransceivers().find(_i=>_i.mid===j);if(!K)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:K.receiver.track,id:j}}catch(j){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(j.toString()))}})()}batchReceive(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:y,needExchangeSDP:w}=A.remoteSDP.batchSend(p);if(w){const $=A.remoteSDP.toString(),j=A.logSDPExchange($,"offer","remote","receive");yield A.peerConnection.setRemoteDescription({type:"offer",sdp:$});const _e=yield A.peerConnection.createAnswer();null==j||j(_e.sdp||""),yield A.peerConnection.setLocalDescription(_e),h_.debug("[P2PConnection] batchReceive by exchanging SDP.")}else h_.debug("[P2PConnection] batchReceive no need to exchange SDP.");return y.map($=>{const j=A.peerConnection.getTransceivers().find(_e=>_e.mid===$);if(!j)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:j.receiver.track,id:$}})}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(y.toString()))}})()}stopReceiving(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");A.remoteSDP.stopSending(p);const y=A.remoteSDP.toString(),w=A.logSDPExchange(y,"offer","remote","stopReceiving");yield A.peerConnection.setRemoteDescription({type:"offer",sdp:y});const $=yield A.peerConnection.createAnswer();null==w||w($.sdp||""),yield A.peerConnection.setLocalDescription($)}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(y.toString()))}})()}muteRemote(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(p," before remote SDP created."));A.remoteSDP.mute(p);const y=A.remoteSDP.toString(),w=A.logSDPExchange(y,"offer","remote","muteRemote");yield A.peerConnection.setRemoteDescription({type:"offer",sdp:y});const $=yield A.peerConnection.createAnswer();null==w||w($.sdp||""),yield A.peerConnection.setLocalDescription($)}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(y.toString()))}})()}unmuteRemote(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(p," before remote SDP created."));A.remoteSDP.unmute(p);const y=A.remoteSDP.toString(),w=A.logSDPExchange(y,"offer","remote","unmuteRemote");yield A.peerConnection.setRemoteDescription({type:"offer",sdp:y});const $=yield A.peerConnection.createAnswer();null==w||w($.sdp||""),yield A.peerConnection.setLocalDescription($)}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(y.toString()))}})()}muteLocal(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const y=A.peerConnection.getTransceivers().filter(_e=>_e.mid&&-1!==p.indexOf(_e.mid));if(y.length!==p.length)throw new Error("Transceivers' length doesn't match mids' length.");y.map(_e=>{_e.direction="inactive"});const w=yield A.peerConnection.createOffer(),$=A.logSDPExchange(w.sdp||"","offer","local","muteLocal");yield A.peerConnection.setLocalDescription(w),A.remoteSDP.muteRemote(p);const j=A.remoteSDP.toString();null==$||$(j),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:j})}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(y.toString()))}})()}unmuteLocal(p){var A=this;return f(function*(){try{if(!A.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const y=A.peerConnection.getTransceivers().filter(_e=>_e.mid&&-1!==p.indexOf(_e.mid));if(y.length!==p.length)throw new Error("Transceivers' length doesn't match mids' length.");y.map(function(){var _e=f(function*(K,_i){K.direction="sendonly"});return function(K,_i){return _e.apply(this,arguments)}}());const w=yield A.peerConnection.createOffer(),$=A.logSDPExchange(w.sdp||"","offer","local","unmuteLocal");yield A.peerConnection.setLocalDescription(w),A.remoteSDP.unmuteRemote(p);const j=A.remoteSDP.toString();null==$||$(j),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:j})}catch(y){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(y.toString()))}})()}reEstablish(){var p=this;return f(function*(){const A=yield p.peerConnection.createOffer({iceRestart:!0});if(!A.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:Kme(A.sdp).iceParameters,restartICE:(y=f(function*(w,$){return p.restartICE(A,w,$)}),function($,j){return y.apply(this,arguments)}),restartOfferSDP:A.sdp};var y})()}close(){var p;this.peerConnection.close(),null===(p=this.onConnectionStateChange)||void 0===p||p.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(p){return this.statsFilter.getVideoIsReady(p)}updateEncoderConfig(p,A){var y=this;return f(function*(){try{if(!y.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const w=yield y.peerConnection.createOffer(),$=y.mungSendOfferSDP(w.sdp,[A],[p]);y.remoteSDP.updateRecvMedia(p,A);const j=y.remoteSDP.toString(),_e=y.logSDPExchange($,"offer","local","updateEncoderConfig");yield y.peerConnection.setLocalDescription({type:"offer",sdp:$}),null==_e||_e(j),yield y.peerConnection.setRemoteDescription({type:"answer",sdp:j})}catch(w){throw new U_(D_.EXCHANGE_SDP_FAILED,w.toString())}})()}updateSendParameters(p,A){var y=this;return f(function*(){const w=y.peerConnection.getTransceivers().filter($=>$.mid===p);1===w.length&&(y.isVP8Simulcast(A)?q2()||(yield y.applySimulcastEncodings(w,[A])):yield y.applySendEncodings(w,[A]))})()}setStatsRemoteVideoIsReady(p,A){this.statsFilter.setVideoIsReady2(p,A)}replaceTrack(p,A){var y=this;return f(function*(){const w=y.peerConnection.getTransceivers().find($=>$.mid===A);w&&(yield w.sender.replaceTrack(p._mediaStreamTrack))})()}restartICE(p,A,y){var w=this;return f(function*(){try{if(!w.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");w.remoteSDP.restartICE(A,y);const $=w.remoteSDP.toString(),j=w.logSDPExchange(p.sdp||"","offer","local","restartICE");yield w.peerConnection.setLocalDescription(p),null==j||j($),yield w.peerConnection.setRemoteDescription({type:"answer",sdp:$})}catch($){throw new U_(D_.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat($.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var p;null===(p=this.onICEConnectionStateChange)||void 0===p||p.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var p;null===(p=this.onConnectionStateChange)||void 0===p||p.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=p=>{p.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,h_.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,h_.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},S0("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(p){const A={iceServers:[]};return p.iceServers?A.iceServers=p.iceServers:p.turnServer&&"off"!==p.turnServer.mode&&(MK(p.turnServer.servers)?A.iceServers=p.turnServer.servers:(A.iceServers&&A.iceServers.push(...oAe.turnServerConfigToIceServers(p.turnServer.servers)),S0("USE_TURN_SERVER_OF_GATEWAY")&&A.iceServers&&p.turnServer.serversFromGateway&&A.iceServers.push(...oAe.turnServerConfigToIceServers(p.turnServer.serversFromGateway)),p.turnServer.servers.concat(p.turnServer.serversFromGateway||[]).forEach(y=>{y.forceturn&&(A.iceTransportPolicy="relay")}))),A}static turnServerConfigToIceServers(p){const A=[];return p.forEach(y=>{y.security?y.tcpport&&A.push({username:y.username,credential:y.password,credentialType:"password",urls:"turns:".concat(iY(y.turnServerURL),":").concat(y.tcpport,"?transport=tcp")}):(y.udpport&&A.push({username:y.username,credential:y.password,credentialType:"password",urls:"turn:".concat(y.turnServerURL,":").concat(y.udpport,"?transport=udp")}),y.tcpport&&A.push({username:y.username,credential:y.password,credentialType:"password",urls:"turn:".concat(y.turnServerURL,":").concat(y.tcpport,"?transport=tcp")}))}),A}tryBindTransportEvents(p){p.transport&&(this.transportEventReceiver=p,p.transport.onstatechange=()=>{var A,y;null!==(A=p.transport)&&void 0!==A&&A.state&&(null===(y=this.onDTLSTransportStateChange)||void 0===y||y.call(this,p.transport.state))},p.transport.onerror=A=>{var y;null===(y=this.onDTLSTransportError)||void 0===y||y.call(this,A.error)},p.transport.iceTransport&&(p.transport.iceTransport.onstatechange=()=>{var A,y,w;null!==(A=p.transport)&&void 0!==A&&A.iceTransport.state&&(null===(y=this.onICETransportStateChange)||void 0===y||y.call(this,null===(w=p.transport)||void 0===w?void 0:w.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(p,A){var y=this;return f(function*(){try{if(!jS().supportSetRtpSenderParameters||p.length!==A.length)return;for(let _o=0;_o<p.length;_o++){const _u=p[_o],ch=A[_o];if(ch&&ch instanceof UR){var w,$;if(y.isVP8Simulcast(ch))continue;const _f={},o_={};switch(ch._optimizationMode){case"motion":_f.degradationPreference="maintain-framerate";break;case"detail":_f.degradationPreference="maintain-resolution";break;default:_f.degradationPreference="balanced"}var j,_e,K,_i;if(null!==(w=ch._encoderConfig)&&void 0!==w&&w.bitrateMax&&(o_.maxBitrate=1e3*(null===(j=ch._encoderConfig)||void 0===j?void 0:j.bitrateMax)),ch._hints.includes(FS.LOW_STREAM)&&(null!==(_e=ch._encoderConfig)&&void 0!==_e&&_e.frameRate&&(o_.maxFramerate=M4(ch._encoderConfig.frameRate)),null!==(K=ch._encoderConfig)&&void 0!==K&&K.scaleResolutionDownBy&&(null===(_i=ch._encoderConfig)||void 0===_i?void 0:_i.scaleResolutionDownBy)>1&&(o_.scaleResolutionDownBy=ch._encoderConfig.scaleResolutionDownBy)),S0("DSCP_TYPE")&&p6()){const g_=S0("DSCP_TYPE");["very-low","low","medium","high"].includes(g_)&&(o_.networkPriority=g_)}const i_=_u.sender.getParameters(),u_=null===($=i_.encodings)||void 0===$?void 0:$[0];q2()&&!u_&&(_f.encodings=[o_]),u_&&Object.assign(u_,o_),Object.assign(i_,_f),yield _u.sender.setParameters(i_)}}}catch(_o){h_.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(p,A,y){const w=t3.exports.parse(p);return A.forEach(($,j)=>{const _e=y[j],K=w.mediaDescriptions.find(_i=>_i.attributes.mid===_e);K&&(zme(K,$),function(_i,_o,_u){if(q2()||"video"!==_i.media.mediaType||!(_o instanceof UR)||"vp9"!==_u&&"vp8"!==_u||"vp8"===_u&&!S0("SIMULCAST")||void 0===_o._scalabiltyMode||_o._scalabiltyMode.numSpatialLayers<=1)return;const ch="vp8"===_u?2:_o._scalabiltyMode.numSpatialLayers,_f=_i.attributes.ssrcs[0],o_=_i.attributes.ssrcGroups.find(u_=>"FID"===u_.semantic&&u_.ssrcIds[0]===_f.ssrcId),i_={semantic:"SIM",ssrcIds:[_f.ssrcId]};for(let u_=1;u_<ch;u_++)_i.attributes.ssrcs.push({ssrcId:_f.ssrcId+u_,attributes:gR(_f.attributes)}),i_.ssrcIds.push(_f.ssrcId+u_),o_&&(_i.attributes.ssrcs.push({ssrcId:o_.ssrcIds[1]+u_,attributes:gR(_f.attributes)}),_i.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[_f.ssrcId+u_,o_.ssrcIds[1]+u_]}));_i.attributes.ssrcGroups.unshift(i_)}(K,$,this.store.codec))}),t3.exports.print(w)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=p=>{var A;null===(A=this.onFirstAudioReceived)||void 0===A||A.call(this,p)},this.statsFilter.onFirstVideoReceived=p=>{var A;null===(A=this.onFirstVideoReceived)||void 0===A||A.call(this,p)},this.statsFilter.onFirstAudioDecoded=p=>{var A;null===(A=this.onFirstAudioDecoded)||void 0===A||A.call(this,p)},this.statsFilter.onFirstVideoDecoded=(p,A,y)=>{var w;null===(w=this.onFirstVideoDecoded)||void 0===w||w.call(this,p,A,y)},this.statsFilter.onSelectedLocalCandidateChanged=(p,A)=>{var y;null===(y=this.onSelectedLocalCandidateChanged)||void 0===y||y.call(this,p,A)},this.statsFilter.onSelectedRemoteCandidateChanged=(p,A)=>{var y;null===(y=this.onSelectedRemoteCandidateChanged)||void 0===y||y.call(this,p,A)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(p,A){var y=this;return f(function*(){if(p.length===A.length)for(let K=0;K<p.length;K++){var w,$,j,_e;const _i=p[K],_o=A[K];if(_o instanceof UR&&!_o._hints.includes(FS.LOW_STREAM)&&null!==(w=_o._encoderConfig)&&void 0!==w&&w.bitrateMax&&(null===($=_o._encoderConfig)||void 0===$?void 0:$.bitrateMax)>200&&null!==(j=_o._scalabiltyMode)&&void 0!==j&&j.numSpatialLayers&&(null===(_e=_o._scalabiltyMode)||void 0===_e?void 0:_e.numSpatialLayers)>1&&"vp8"===y.store.codec){const _u={},ch={high:1e3*(_o._encoderConfig.bitrateMax-50),medium:5e4};_u.encodings=[{rid:"m",active:!0,maxBitrate:ch.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:ch.high}];const _f=_i.sender.getParameters();yield _i.sender.setParameters(Object.assign(_f,_u))}}})()}applySimulcastEncodings(p,A){var y=this;return f(function*(){if(!q2()&&p.length===A.length)for(let w=0;w<p.length;w++){const $=A[w];if($ instanceof UR&&y.isVP8Simulcast($)){const j=p[w],_e={},K={high:1e3*($._encoderConfig.bitrateMax-50),medium:5e4};_e.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:K.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:K.medium,scaleResolutionDownBy:4}];const _i=j.sender.getParameters();yield j.sender.setParameters(Object.assign(_i,_e))}}})()}isVP8Simulcast(p){var A,y,w,$;return!!(p instanceof UR&&S0("SIMULCAST")&&"vp8"===this.store.codec&&!p._hints.includes(FS.LOW_STREAM)&&null!==(A=p._encoderConfig)&&void 0!==A&&A.bitrateMax&&(null===(y=p._encoderConfig)||void 0===y?void 0:y.bitrateMax)>200&&null!==(w=p._scalabiltyMode)&&void 0!==w&&w.numSpatialLayers&&(null===($=p._scalabiltyMode)||void 0===$?void 0:$.numSpatialLayers)>1)}logSDPExchange(p,A,y,w){if(S0("SDP_LOGGING"))return h_.upload("exchanging ".concat(y," ").concat(A," SDP during P2PConnection.").concat(w,"\n"),p),"offer"===A?$=>{this.logSDPExchange($,"answer","local"===y?"remote":"local",w)}:void 0}}).prototype,"connect",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"connect"),L1.prototype),cI(L1.prototype,"receive",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"receive"),L1.prototype),cI(L1.prototype,"batchReceive",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"batchReceive"),L1.prototype),cI(L1.prototype,"stopReceiving",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"stopReceiving"),L1.prototype),cI(L1.prototype,"muteRemote",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"muteRemote"),L1.prototype),cI(L1.prototype,"unmuteRemote",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"unmuteRemote"),L1.prototype),cI(L1.prototype,"muteLocal",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"muteLocal"),L1.prototype),cI(L1.prototype,"unmuteLocal",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"unmuteLocal"),L1.prototype),cI(L1.prototype,"reEstablish",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"reEstablish"),L1.prototype),cI(L1.prototype,"close",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"close"),L1.prototype),cI(L1.prototype,"updateEncoderConfig",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"updateEncoderConfig"),L1.prototype),cI(L1.prototype,"updateSendParameters",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"updateSendParameters"),L1.prototype),cI(L1.prototype,"replaceTrack",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"replaceTrack"),L1.prototype),cI(L1.prototype,"restartICE",[QM],Object.getOwnPropertyDescriptor(L1.prototype,"restartICE"),L1.prototype),_0e=L1))||_0e;function QM(s,p,A){const y=s[p];if("function"!=typeof y)throw new Error("Cannot use mutex on object property.");return A.value=f(function*(){const w=this.mutex,$=yield w.lock("From P2PConnection.".concat(p));try{for(var j=arguments.length,_e=new Array(j),K=0;K<j;K++)_e[K]=arguments[K];return yield y.apply(this,_e)}finally{$()}}),A}var E0e,I0e;function b0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function $me(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?b0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):b0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}class C0e extends lge{getUserId(){return this._userId}constructor(p,A,y,w){super(p,"track-".concat(p.kind,"-").concat(A,"-").concat(w.clientId,"_").concat(pS(5,""))),a_(this,"_userId",void 0),a_(this,"_uintId",void 0),a_(this,"_isDestroyed",!1),a_(this,"store",void 0),this._userId=A,this._uintId=y,this.store=w}_updateOriginMediaStreamTrack(p){this._originMediaStreamTrack=p,this._mediaStreamTrack=p,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,h_.info("[".concat(this.getTrackId(),"] is destroyed")),T0("info",this,"_destroy"),this.stop(),super.close()}}let Zme=dI("RemoteVideoTrack","getTrackId")(E0e=class extends C0e{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==DR.PLAYING)}constructor(s,p,A,y){super(s,p,A,y),a_(this,"_videoVisibleTimer",null),a_(this,"_previousVideoVisibleStatus",void 0),a_(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),a_(this,"trackMediaType","video"),a_(this,"_videoWidth",void 0),a_(this,"_videoHeight",void 0),a_(this,"_player",void 0),T0("info",this,"constructor",{userId:p}),this.updateMediaStreamTrackResolution()}getStats(){return BM(()=>{h_.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),aI("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),x6(this,wI.GET_STATS)||$me({},jne)}play(s){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof s?s:"HTMLElement",p]});if("string"==typeof s){const w=document.getElementById(s);w?s=w:(h_.warning("[".concat(this.getTrackId(),'] can not find "#').concat(s,'" element, use document.body')),aI("warning",this,'can not find "#'.concat(s,'" element, use document.body')),s=document.body)}h_.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(p)),T0("debug",this,"play",p);const y=$me($me({fit:"cover"},p),{},{trackId:this.getTrackId(),element:s});this._player?this._player.updateConfig(y):(this._player=new k9(y),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(UK.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const w=this.getVideoElementVisibleStatus();this.emit(UK.VIDEO_ELEMENT_VISIBLE_STATUS,w)}catch(w){}},S0("CHECK_VIDEO_VISIBLE_INTERVAL")),A.onSuccess()}stop(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return s.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,h_.debug("[".concat(this.getTrackId(),"] stop video playback")),T0("debug",this,"stop"),s.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Sge(this._originMediaStreamTrack).then(s=>{let[p,A]=s;this._videoHeight=A,this._videoWidth=p}).catch(Bre)}_updatePlayerSource(){h_.debug("[".concat(this.getTrackId(),"] update player source track")),T0("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var s,p;const A=null==this||null===(s=this._player)||void 0===s?void 0:s.getContainerElement(),y={track:this,element:null==this||null===(p=this._player)||void 0===p?void 0:p.getVideoElement(),slot:null==A?void 0:A.parentElement},{element:w,slot:$}=y;if(this.isPlaying&&w instanceof HTMLVideoElement&&$ instanceof HTMLElement){const j=Eie.checkOneElementVisible(w),_e=Object.assign({},j);if(_e.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_e.visible;w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(_e.visible?"Video is visible":"Invisible because of ".concat(_e.reason))}return _e}return}catch(A){throw new U_(D_.GET_VIDEO_ELEMENT_VISIBLE_ERROR,A.message)}}})||E0e,Xme=dI("RemoteAudioTrack","getTrackId")(I0e=class extends C0e{get isPlaying(){return this._useAudioElement?wO.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(s,p,A,y){super(s,p,A,y),a_(this,"trackMediaType","audio"),a_(this,"_source",void 0),a_(this,"_useAudioElement",!0),a_(this,"_volume",100),T0("info",this,"constructor",{userId:p}),S0("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new mue(s,!0),this._source.once(kT.RECEIVE_TRACK_BUFFER,()=>{this.emit(UK.FIRST_FRAME_DECODED)})}setAudioFrameCallback(s){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!s)return this._source.removeAllListeners(kT.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(p),this._source.removeAllListeners(kT.ON_AUDIO_BUFFER),this._source.on(kT.ON_AUDIO_BUFFER,A=>s(A))}setVolume(s){const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),s]},300);this._volume=s,this._useAudioElement?wO.setVolume(this.getTrackId(),s):this._source.setVolume(s/100),p.onSuccess()}setPlaybackDevice(s){var p=this;return f(function*(){const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[p.getTrackId(),s]});if(!p._useAudioElement)throw new U_(D_.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield wO.setSinkID(p.getTrackId(),s)}catch(y){throw A.onError(y),y}A.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return BM(()=>{h_.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),aI("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),x6(this,wI.GET_STATS)||$me({},BK)}play(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});h_.debug("[".concat(this.getTrackId(),"] start audio playback")),T0("debug",this,"play"),this._useAudioElement?(h_.debug("[".concat(this.getTrackId(),"] use audio element to play")),aI("debug",this,"use audio element to play"),wO.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),s.onSuccess()}stop(){const s=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});h_.debug("[".concat(this.getTrackId(),"] stop audio playback")),T0("debug",this,"stop"),this._useAudioElement?wO.stop(this.getTrackId()):this._source.stop(),s.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){h_.debug("[".concat(this.getTrackId(),"] update player source track")),T0("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wO.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||I0e;function w0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function T0e(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?w0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):w0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}class gbe extends hS{constructor(){super(),a_(this,"uplinkStatsUploadInterval",void 0),a_(this,"uplinkStatsUploadSlowInterval",void 0),a_(this,"uplinkRelatedStatsUploadInterval",void 0),a_(this,"uplinkDenoiserStatsUploadInterval",void 0),a_(this,"transportStatsUploadInterval",void 0),a_(this,"extensionStatsUploadInterval",void 0),a_(this,"downlinkStatsUploadInterval",void 0),a_(this,"downlinkStatsUploadSlowInterval",void 0),a_(this,"downlinkRelatedStatsUploadInterval",void 0),a_(this,"lastStats",void 0),a_(this,"uploadUnplinkStarted",!1),a_(this,"uploadDownlinkStarted",!1),a_(this,"uploadTransportStarted",!1),a_(this,"requestStats",void 0),a_(this,"requestLocalMedia",void 0),a_(this,"requestRemoteMedia",void 0),a_(this,"requestAllTracks",void 0),a_(this,"requestVideoIsReady",void 0),a_(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&this.uploadTransportStats(A)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&(this.uploadUplinkStats(A,this.lastStats),this.lastStats=A)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&this.uploadSlowUplinkStats(A)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&this.uploadRelatedUplinkStats(A,this.lastStats),this.lastStats=A},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestAllTracks)||void 0===p?void 0:p.call(this);A&&this.uploadDenoiserStats(A)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestAllTracks)||void 0===p?void 0:p.call(this);A&&this.uploadExtensionStats(A)},2e3))}uploadTransportStats(p){eL(()=>{var A;null===(A=this.requestUpload)||void 0===A||A.call(this,yN.TRANSPORT_STATS,function(y){const w={connectionType:100};if("relay"===y.selectedCandidatePair.localCandidate.candidateType){const $=y.selectedCandidatePair.localCandidate.relayProtocol;"udp"===$&&(w.connectionType=101),"tcp"===$&&(w.connectionType=103),"tls"===$&&(w.connectionType=104)}return w}(p))})}uploadUplinkStats(p,A){var y;((null===(y=this.requestLocalMedia)||void 0===y?void 0:y.call(this))||[]).forEach(w=>{let[$,{track:j,ssrcs:_e}]=w;switch($){case eI.LocalVideoLowTrack:case eI.LocalVideoTrack:{const _i=function(_u,ch,_f){var o_;const i_=ch.videoSend.find(g_=>g_.ssrc===_u);if(!i_)return null;const u_={id:pS(10,""),timestamp:new Date(ch.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i_.ssrc.toString()};switch(u_.A_vstd=_f._originMediaStreamTrack&&!_f._originMediaStreamTrack.enabled||!_f._mediaStreamTrack.enabled?"1":"0",i_.sentFrame&&(u_.A_fhs=i_.sentFrame.height.toString(),u_.A_frs=i_.sentFrame.frameRate.toString(),u_.A_fws=i_.sentFrame.width.toString()),i_.adaptionChangeReason){case"none":u_.A_ac="0";break;case"cpu":u_.A_ac="1";break;case"bandwidth":u_.A_ac="2";break;case"other":u_.A_ac="3"}return u_.A_lvps=tce[_f._player?_f._player.videoElementStatus:"uninit"].toString(),u_.A_nr=null===(o_=i_.nacksCount)||void 0===o_?void 0:o_.toString(),i_.avgEncodeMs&&(u_.A_aem=i_.avgEncodeMs.toFixed(0).toString()),u_}(_e[0].ssrcId,p,j),_o=Oue(_e[0].ssrcId,p,A);_i&&eL(()=>{var _u;return null===(_u=this.requestUpload)||void 0===_u?void 0:_u.call(this,yN.PUBLISH_STATS,{stream_type:$===eI.LocalVideoLowTrack?"low":"high",stats:T0e(T0e({},_i),_o)})});break}case eI.LocalAudioTrack:{const _i=function(_o,_u,ch){const _f=_u.audioSend.find(i_=>i_.ssrc===_o);if(!_f)return null;const o_={id:pS(10,""),timestamp:new Date(_u.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:_f.ssrc.toString()};return o_.A_astd=ch._originMediaStreamTrack.enabled&&ch._mediaStreamTrack.enabled?"0":"1",o_.A_ail=_f.inputLevel?Math.round(100*_f.inputLevel).toString():Math.round(100*ch._source.getAccurateVolumeLevel()).toString(),o_.A_apil=Math.round(100*ch._source.getAccurateVolumeLevel()).toString(),_f.aecReturnLoss&&(o_.A_ecrl=Math.round(_f.aecReturnLoss).toString()),_f.aecReturnLossEnhancement&&(o_.A_ecrle=Math.round(_f.aecReturnLossEnhancement).toString()),o_}(_e[0].ssrcId,p,j);_i&&eL(()=>{var _o;return null===(_o=this.requestUpload)||void 0===_o?void 0:_o.call(this,yN.PUBLISH_STATS,{stream_type:"high",stats:_i})});break}}const K=function(_i){const _o={id:"bweforvideo",timestamp:new Date(_i.timestamp).toISOString(),type:"VideoBwe"};return _i.bitrate.retransmit&&(_o.A_rb=_i.bitrate.retransmit.toString()),_i.bitrate.targetEncoded&&(_o.A_teb=_i.bitrate.targetEncoded.toString()),_o.A_aeb=_i.bitrate.actualEncoded.toString(),_o.A_tb=_i.bitrate.transmit.toString(),void 0!==_i.sendBandwidth&&(_o.A_asb=_i.sendBandwidth.toString()),_o}(p);K&&eL(()=>{var _i;return null===(_i=this.requestUpload)||void 0===_i?void 0:_i.call(this,yN.PUBLISH_STATS,{stream_type:$===eI.LocalVideoLowTrack?"low":"high",stats:K})})})}uploadSlowUplinkStats(p){var A;((null===(A=this.requestLocalMedia)||void 0===A?void 0:A.call(this))||[]).filter(y=>{let[w]=y;return w===eI.LocalVideoLowTrack||w===eI.LocalVideoTrack}).forEach(y=>{let[w,{ssrcs:$}]=y;const j=Oue($[0].ssrcId,p);j&&eL(()=>{var _e;return null===(_e=this.requestUpload)||void 0===_e?void 0:_e.call(this,yN.PUBLISH_STATS,{stream_type:w===eI.LocalVideoLowTrack?"low":"high",stats:j})})})}uploadRelatedUplinkStats(p,A){var y;((null===(y=this.requestLocalMedia)||void 0===y?void 0:y.call(this))||[]).filter(w=>{let[$]=w;return $===eI.LocalVideoLowTrack||$===eI.LocalVideoTrack}).forEach(w=>{let[$,{ssrcs:j}]=w;const _e=function(K,_i){const _o=_i.videoSend.find(_u=>_u.ssrc===K);return _o?{mediaType:"video",isVideoMute:!1,frameRateInput:_o.inputFrame&&_o.inputFrame.frameRate.toString(),frameRateSent:_o.sentFrame&&_o.sentFrame.frameRate.toString(),googRtt:_o.rttMs.toString(),qpSumPerFrame:Math.floor(_o.qpSumPerFrame).toString()}:null}(j[0].ssrcId,p);_e&&eL(()=>{var K;null===(K=this.requestUpload)||void 0===K||K.call(this,yN.PUBLISH_RELATED_STATS,{stream_type:$===eI.LocalVideoLowTrack?"low":"high",stats:_e})})})}uploadDenoiserStats(p){for(let $=0;$<p.length;$++){const j=p[$];if(j instanceof HZ){var A,y,w;const _e=null===(A=(y=j._external).getDenoiserStats)||void 0===A?void 0:A.call(y);return void(_e&&(null===(w=this.requestUpload)||void 0===w||w.call(this,yN.DENOISER_STATS,_e)))}}}uploadExtensionStats(p){for(let A=0;A<p.length;A++){const y=p[A];if(y instanceof HZ)return void y.getProcessorStats().forEach(w=>{var $;w.type===yN.DENOISER_STATS&&(null===($=this.requestUpload)||void 0===$||$.call(this,yN.DENOISER_STATS,w.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&(this.uploadDownlinkStats(A,this.lastStats),this.lastStats=A)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&this.uploadSlowDownlinkStats(A)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var p;const A=null===(p=this.requestStats)||void 0===p?void 0:p.call(this);A&&(this.uploadRelatedDownlinkStats(A,this.lastStats),this.lastStats=A)},1e3))}uploadDownlinkStats(p,A){var y;((null===(y=this.requestRemoteMedia)||void 0===y?void 0:y.call(this))||[]).forEach(w=>{let[$,j]=w;if(j.has(o1.VIDEO)&&$.videoTrack){const _e=$.videoTrack?function(K,_i,_o){const _u=_i.videoRecv.find(i_=>i_.ssrc===K);if(!_u)return null;const ch={id:pS(10,""),timestamp:new Date(_i.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:_u.ssrc.toString()};var _f,o_;return ch.bytesReceived=_u.bytes.toString(),ch.packetsLost=_u.packetsLost.toString(),ch.packetsReceived=_u.packets.toString(),_u.framesRateFirefox&&(ch.A_frr=_u.framesRateFirefox.toString()),_u.receivedFrame?(ch.A_frr=_u.receivedFrame.frameRate.toString(),ch.A_fhr=_u.receivedFrame.height.toString(),ch.A_fwr=_u.receivedFrame.width.toString()):(ch.A_fhr=null===(_f=_o._videoHeight)||void 0===_f?void 0:_f.toString(),ch.A_fwr=null===(o_=_o._videoWidth)||void 0===o_?void 0:o_.toString()),ch.A_frd=_u.decodeFrameRate.toString(),_u.outputFrame&&(ch.A_fro=_u.outputFrame.frameRate.toString()),void 0!==_u.jitterBufferMs&&(ch.A_jbm=Math.floor(_u.jitterBufferMs).toString()),void 0!==_u.currentDelayMs&&(ch.A_cdm=Math.floor(_u.currentDelayMs).toString()),ch.A_fs=_u.firsCount.toString(),ch.A_ns=_u.nacksCount.toString(),ch.A_ps=_u.plisCount.toString(),_o&&(ch.A_vrtd=_o._originMediaStreamTrack.enabled&&_o._mediaStreamTrack.enabled?"0":"1"),_o._player&&_o._player.freezeTimeCounterList.length>0&&(ch.A_vrft=_o._player.freezeTimeCounterList.splice(0,1)[0].toString()),ch.A_rvps=tce[_o._player?_o._player.videoElementStatus:"uninit"].toString(),ch}($._videoSSRC,p,$.videoTrack):void 0;_e&&eL(()=>{var K;return null===(K=this.requestUpload)||void 0===K?void 0:K.call(this,yN.SUBSCRIBE_STATS,{stream_id:$.uid,stats:_e})})}if(j.has(o1.AUDIO)&&$.audioTrack){const _e=$.audioTrack?function(K,_i,_o){const _u=_i.audioRecv.find(_f=>_f.ssrc===K);if(!_u)return null;const ch={id:pS(10,""),timestamp:new Date(_i.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:_u.ssrc.toString()};return ch.bytesReceived=_u.bytes.toString(),ch.packetsLost=_u.packetsLost.toString(),ch.packetsReceived=_u.packets.toString(),ch.A_aol=_u.outputLevel?Math.round(100*_u.outputLevel).toString():Math.round(100*_o._source.getAccurateVolumeLevel()).toString(),ch.A_apol=Math.round(100*_o._source.getAccurateVolumeLevel()).toString(),_o&&(ch.A_artd=_o._originMediaStreamTrack.enabled&&_o._mediaStreamTrack.enabled?"0":"1"),ch.A_jr=_u.jitterMs.toString(),ch.A_jbm=Math.floor(_u.jitterBufferMs).toString(),ch.A_cdm=Math.floor(_u.jitterBufferMs).toString(),ch.A_raps=tce[wO.getPlayerState(_o.getTrackId())].toString(),ch}($._audioSSRC,p,$.audioTrack):void 0;_e&&eL(()=>{var K;return null===(K=this.requestUpload)||void 0===K?void 0:K.call(this,yN.SUBSCRIBE_STATS,{stream_id:$.uid,stats:_e})})}})}uploadSlowDownlinkStats(p){}uploadRelatedDownlinkStats(p,A){var y;((null===(y=this.requestRemoteMedia)||void 0===y?void 0:y.call(this))||[]).forEach(w=>{let[$,j]=w;if(j.has(o1.VIDEO)&&$.videoTrack){var _e;const K=!0===($._videoSSRC&&(null===(_e=this.requestVideoIsReady)||void 0===_e?void 0:_e.call(this,$._videoSSRC))||!1),_i=function(_o,_u,ch,_f,o_,i_){const u_=ch.videoRecv.find(k_=>k_.ssrc===_o),g_=o_?o_.videoRecv.find(k_=>k_.ssrc===_o):void 0;if(!u_)return null;const __=lG.isRemoteVideoFreeze(i_,u_,g_)&&_u,w_={mediaType:"video",isVideoMute:!1,peerId:_f,frameRateReceived:u_.receivedFrame&&u_.receivedFrame.frameRate.toString(),frameRateDecoded:u_.decodedFrame&&u_.decodedFrame.frameRate.toString(),isFreeze:__,bytesReceived:u_.bytes.toString(),packetsReceived:u_.packets.toString(),packetsLost:u_.packetsLost.toString(),qpSumPerFrame:Math.floor(u_.qpSumPerFrame).toString()};return u_.framesRateFirefox&&(w_.frameRateDecoded=u_.framesRateFirefox.toString(),w_.frameRateReceived=u_.framesRateFirefox.toString()),w_}($._videoSSRC,K,p,$.uid,A,$.videoTrack);_i&&eL(()=>{var _o;null===(_o=this.requestUpload)||void 0===_o||_o.call(this,yN.SUBSCRIBE_RELATED_STATS,{stream_id:$.uid,stats:_i})})}if(j.has(o1.AUDIO)&&$.audioTrack){const K=function(_i,_o,_u,ch){const _f=_o.audioRecv.find(i_=>i_.ssrc===_i);if(!_f)return null;const o_=lG.isRemoteAudioFreeze(ch);return{mediaType:"audio",isAudioMute:!1,peerId:_u,googJitterReceived:_f.jitterMs.toString(),isFreeze:o_,bytesReceived:_f.bytes.toString(),packetsReceived:_f.packets.toString(),packetsLost:_f.packetsLost.toString(),frameReceived:_f.receivedFrames.toString(),frameDropped:_f.droppedFrames.toString()}}($._audioSSRC,p,$.uid,$.audioTrack);K&&eL(()=>{var _i;null===(_i=this.requestUpload)||void 0===_i||_i.call(this,yN.SUBSCRIBE_RELATED_STATS,{stream_id:$.uid,stats:K})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var S0e,M1;function R0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function OY(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?R0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):R0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}function O0e(s){var p,A,y,w=2;for("undefined"!=typeof Symbol&&(A=WIe,y=Symbol.iterator);w--;){if(A&&null!=(p=s[A]))return p.call(s);if(y&&null!=(p=s[y]))return new Yye(p.call(s));A="@@asyncIterator",y="@@iterator"}throw new TypeError("Object is not async iterable")}function Yye(s){function p(A){if(Object(A)!==A)return sI.reject(new TypeError(A+" is not an object."));var y=A.done;return sI.resolve(A.value).then(function(w){return{value:w,done:y}})}return(Yye=function(A){this.s=A,this.n=A.next}).prototype={s:null,n:null,next:function(){return p(this.n.apply(this.s,arguments))},return:function(A){var y=this.s.return;return void 0===y?sI.resolve({value:A,done:!0}):p(y.apply(this.s,arguments))},throw:function(A){var y=this.s.return;return void 0===y?sI.reject(A):p(y.apply(this.s,arguments))}},new Yye(s)}let mbe=dI("P2PChannel","store.p2pId")((cI((M1=class extends hS{get state(){return this._state}set state(s){const p=this._state;this._state=s,this.emit(h1.StateChange,p,this._state)}constructor(s,p){var A;super(),A=this,a_(this,"store",void 0),a_(this,"statsUploader",void 0),a_(this,"connection",void 0),a_(this,"localTrackMap",new Map),a_(this,"remoteUserMap",new Map),a_(this,"pendingLocalTracks",[]),a_(this,"pendingRemoteTracks",[]),a_(this,"statsCollector",void 0),a_(this,"isPlanB",!1),a_(this,"iceFailedCount",0),a_(this,"dtlsFailedCount",0),a_(this,"mutex",new MR("P2PChannel-mutex")),a_(this,"_state",HO.Disconnected),a_(this,"handleMuteLocalTrack",function(){var y=f(function*(w,$,j){const _e=yield A.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!A.connection)return void j(new U_(D_.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));T0("debug",A,"handleMuteLocalTrack",w.getTrackId()),yield A.waitTillConnected();const K=A.filterTobeMutedTracks(w);if(0===K.length)return void $();yield A.connection.muteLocal(K.map(_o=>{let[,{id:_u}]=_o;return _u}));const _i=A.createMuteMessage(K);yield oT(A,h1.RequestMuteLocal,_i),$()}catch(K){j(K)}finally{_e()}});return function(w,$,j){return y.apply(this,arguments)}}()),a_(this,"handleUnmuteLocalTrack",function(){var y=f(function*(w,$,j){const _e=yield A.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!A.connection)return void j(new U_(D_.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));T0("debug",A,"handleUnmuteLocalTrack",w.getTrackId()),yield A.waitTillConnected();const K=A.filterTobeUnmutedTracks(w);if(0===K.length)return void $();yield A.connection.unmuteLocal(K.map(_o=>{let[,{id:_u}]=_o;return _u}));const _i=A.createUnmuteMessage(K);yield oT(A,h1.RequestUnmuteLocal,_i),$()}catch(K){j(K)}finally{_e()}});return function(w,$,j){return y.apply(this,arguments)}}()),a_(this,"handleUpdateVideoEncoder",function(){var y=f(function*(w,$,j){const _e=yield A.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const K=A.localTrackMap.get(eI.LocalVideoTrack);if(!A.connection||!K||K.track!==w)return void $();yield A.waitTillConnected();const{id:_i,track:_o}=K;yield A.connection.updateSendParameters(_i,_o),yield A.connection.updateEncoderConfig(_i,_o),A.emit(h1.UpdateVideoEncoder,_o),$()}catch(K){j(K)}finally{_e()}});return function(w,$,j){return y.apply(this,arguments)}}()),a_(this,"handleSetOptimizationMode",function(){var y=f(function*(w,$,j){const _e=yield A.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const K=A.localTrackMap.get(eI.LocalVideoTrack);if(!A.connection||!K||K.track!==w)return;yield A.waitTillConnected();const{id:_i,track:_o}=K;yield A.connection.updateSendParameters(_i,_o),$()}catch(K){j(K)}finally{_e()}});return function(w,$,j){return y.apply(this,arguments)}}()),a_(this,"handleReplaceTrack",function(){var y=f(function*(w,$,j,_e){let K;h_.debug("P2PChannel handleReplaceTrack for [track-id-".concat(w.getTrackId(),"]")),"boolean"==typeof _e&&_e||(K=yield A.mutex.lock("From P2PChannel.handleReplaceTrack"));try{const _o=Array.from(A.localTrackMap.entries()).find(_u=>{let[,{track:ch}]=_u;return w===ch});if(!A.connection||!_o)return void $();if(yield A.waitTillConnected(),yield A.connection.replaceTrack(w,_o[1].id),A.isPlanB){const _u=_o[1];_u.id=w._mediaStreamTrack.id,A.localTrackMap.set(_o[0],_u)}if(_o[0]===eI.LocalVideoTrack&&jS().supportDualStreamEncoding){const _u=A.localTrackMap.get(eI.LocalVideoLowTrack);if(_u){const ch=w._mediaStreamTrack.clone();_u.track._originMediaStreamTrack.stop(),_u.track._mediaStreamTrack=ch,_u.track._originMediaStreamTrack=ch,yield new sI((_f,o_)=>{A.handleReplaceTrack(_u.track,_f,o_,!0)})}}$()}catch(_o){j(_o)}finally{var _i;null===(_i=K)||void 0===_i||_i()}});return function(w,$,j,_e){return y.apply(this,arguments)}}()),a_(this,"handleGetLocalVideoStats",y=>{y(this.statsCollector.getLocalVideoTrackStats())}),a_(this,"handleGetLocalAudioStats",y=>{y(this.statsCollector.getLocalAudioTrackStats())}),a_(this,"handleGetRemoteVideoStats",y=>this.statsCollector.getRemoteVideoTrackStats(y.uid)[y.uid]),a_(this,"handleGetRemoteAudioStats",y=>this.statsCollector.getRemoteAudioTrackStats(y.uid)[y.uid]),this.store=s,this.statsCollector=p,this.statsCollector.addP2PChannel(this),this.statsUploader=new gbe,this.bindStatsUploaderEvents(),this.isPlanB=!jS().supportUnifiedPlan||S0("CHROME_FORCE_PLAN_B")&&p6()}startP2PConnection(s){var p=this;return f(function*(){return p.state=HO.New,p.connection=p.isPlanB?new dbe(s,p.store):new fbe(s,p.store),p.bindConnectionEvents(p.connection),p.store.peerConnectionStart(),p.connection.establish()})()}connect(s,p,A,y,w,$){var j=this;return f(function*(){if(!j.connection)throw new U_(D_.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");yield j.connection.connect(s,p,A,y,w,$),j.statsUploader.startUploadTransportStats(),j.state=HO.Connected})()}publish(s,p,A){var y=this;return ede(function*(){const w=yield GS(y.mutex.lock("From P2PChannel.publish"));try{if(!y.connection){if(y.state===HO.Disconnected)throw new U_(D_.UNEXPECTED_ERROR,"PeerConnection already disconnected.");y.throwIfTrackTypeNotMatch(s);const j=s.filter(_e=>-1===y.pendingLocalTracks.indexOf(_e));return void(y.pendingLocalTracks=y.pendingLocalTracks.concat(j))}y.store.pubId=y.store.pubId+1,VL.markPublishStart(y.store.clientId,y.store.pubId),yield GS(y.waitTillConnected());const $=y.filterTobePublishedTracks(s,p,A);if(0===$.length)return void(yield GS(y.tryToUnmuteAudio(s)));yield*JEe(O0e(y.doPublish(y.connection,$)),GS)}finally{w()}})()}doPublish(s,p){var A=this;return ede(function*(){p.forEach(_i=>{let{track:_o,type:_u}=_i;const ch=performance.now();A.store.publish(_o.getTrackId(),_u===eI.LocalAudioTrack?"audio":"video",ch)}),A.bindLocalTrackEvents(p);const y=yield GS(s.send(p.map(_i=>{let{track:_o}=_i;return _o}),A.store.codec,A.store.audioCodec)),w=(yield GS(y.next())).value,$=A.createGatewayPublishMessage(p,w);let j;try{j=yield $}catch(_i){throw aI("error",A,"doPublish yield error: ".concat(_i.toString())),y.throw(_i),(null==_i?void 0:_i.code)===D_.WS_ABORT&&p.forEach(_o=>{let{track:_u}=_o;-1===A.pendingLocalTracks.indexOf(_u)&&A.pendingLocalTracks.push(_u)}),A.unbindLocalTrackEvents(p),_i}const _e=A.mapPubResToRemoteConfig($,j);T0("debug",A,"doPublish",{remoteConfigs:_e,tracks:p.map(_i=>{let{track:_o}=_i;return _o.getTrackId()}),pubMsg:$,pubAns:j});const K=(yield GS(y.next(_e))).value;p.forEach(_i=>{let{type:_o}=_i;A.statsCollector.addLocalStats(_o)}),A.assignLocalTracks(p,K),A.statsUploader.startUploadUplinkStats(),p.forEach(_i=>{let{track:_o,type:_u}=_i;const ch=performance.now();A.store.publish(_o.getTrackId(),_u===eI.LocalAudioTrack?"audio":"video",void 0,ch)})})()}publishLowStream(s){var p=this;return ede(function*(){if(!p.connection)return;T0("debug",p,"publishLowStream",s);const A=yield GS(p.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const w=p.localTrackMap.get(eI.LocalVideoTrack);if(!w)throw new U_(D_.UNEXPECTED_ERROR,"Could not find high stream");if(p.localTrackMap.has(eI.LocalVideoLowTrack))throw new U_(D_.UNEXPECTED_ERROR,"[".concat(p.store.clientId,"] Can't publish low stream when stream already publish"));yield GS(p.waitTillConnected());const $=[{track:p.getLowVideoTrack(w.track,s),type:eI.LocalVideoLowTrack}];if(yield*JEe(O0e(p.doPublish(p.connection,$)),GS),w.track.muted||!w.track.enabled){var y;const j=null===(y=p.localTrackMap.get(eI.LocalVideoLowTrack))||void 0===y?void 0:y.id;void 0!==j&&(yield GS(p.connection.muteLocal([j])))}}finally{A()}})()}republish(){var s=this;return f(function*(){s.pendingLocalTracks.length>0&&(h_.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),T0("debug",s,"republish",s.pendingLocalTracks.map(p=>p.getTrackId())),yield o2(s,h1.RequestRePublish,s.pendingLocalTracks),s.emit(h1.MediaReconnectEnd,s.store.uid),s.pendingLocalTracks=[])})()}reSubscribe(s){var p=this;return f(function*(){T0("debug",p,"reSubscribe",p.pendingRemoteTracks.map(A=>{let{user:y}=A;return y.uid}));for(let A=p.pendingRemoteTracks.length-1;A>=0;A--){const{user:y,kind:w}=p.pendingRemoteTracks[A];(w!==o1.AUDIO||y._audio_added_&&y._audioSSRC)&&(w!==o1.VIDEO||y._video_added_&&y._videoSSRC)||p.pendingRemoteTracks.splice(A,1)}if(s)yield o2(p,h1.RequestReSubscribe,p.pendingRemoteTracks);else for(const{user:A,kind:y}of p.pendingRemoteTracks)yield p.subscribe(A,y,y===o1.VIDEO?A._videoSSRC:A._audioSSRC);p.pendingRemoteTracks.forEach(A=>{let{user:y}=A;p.emit(h1.MediaReconnectEnd,y.uid)}),p.pendingRemoteTracks=[]})()}unpublish(s){var p=this;return f(function*(){if(!p.connection)return void s.forEach(y=>{const w=p.pendingLocalTracks.indexOf(y);-1!==w&&p.pendingLocalTracks.splice(w,1)});yield p.waitTillConnected();const A=p.filterTobeUnpublishedTracks(s);return 0!==A.length?(T0("debug",p,"unpublish"),p.doUnpublish(p.connection,A)):void 0})()}unpublishLowStream(){var s=this;return f(function*(){if(!s.connection)return;T0("debug",s,"unpublishLowStream");const p=s.localTrackMap.get(eI.LocalVideoLowTrack);return p?(yield s.waitTillConnected(),s.doUnpublish(s.connection,[[eI.LocalVideoLowTrack,p]])):void 0})()}doUnpublish(s,p){var A=this;return f(function*(){const y=A.createGatewayUnpublishMessage(p);return yield s.stopSending(p.map(w=>{let[,{id:$}]=w;return $})),A.withdrawLocalTracks(p),A.unbindLocalTrackEvents(p.map(w=>{let[$,{track:j}]=w;return{type:$,track:j}})),p.forEach(w=>{let[$]=w;A.statsCollector.removeLocalStats($)}),0===A.localTrackMap.size&&A.statsUploader.stopUploadUplinkStats(),y})()}subscribe(s,p,A,y,w){var $=this;return f(function*(){var j;if(!$.connection)throw new U_(D_.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(T0("debug",$,"subscribe",{uid:s.uid,mediaType:p,ssrcId:A}),null!==(j=$.remoteUserMap.get(s))&&void 0!==j&&j.has(p))return;let _e,K;if(yield $.waitTillConnected(),w){const _u=w.find(_f=>{let{stream_type:o_}=_f;return o_===p});if(!_u)throw new U_(D_.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(p," for user: ").concat(s.uid," because subscribe answer from gateway does not contain stream_type: ").concat(p,"."));const ch=yield $.connection.receive(p,_u.ssrcs,String(s.uid),_u.attributes);_e=ch.track,K=ch.id}else{const _u=yield $.connection.receive(p,[{ssrcId:A,rtx:y}],String(s.uid),void 0);_e=_u.track,K=_u.id}p===o1.AUDIO?(s._audioTrack?s._audioTrack._updateOriginMediaStreamTrack(_e):(s._audioTrack=new Xme(_e,s.uid,s._uintid,$.store),h_.info("[".concat($.store.p2pId,"] create remote audio track: ").concat(s._audioTrack.getTrackId()))),$.bindRemoteTrackEvents(s,s._audioTrack)):(s._videoTrack?s._videoTrack._updateOriginMediaStreamTrack(_e):(s._videoTrack=new Zme(_e,s.uid,s._uintid,$.store),h_.info("[".concat($.store.p2pId,"] create remote video track: ").concat(s._videoTrack.getTrackId()))),$.bindRemoteTrackEvents(s,s._videoTrack));const _i=$.remoteUserMap.get(s);_i?_i.set(p,K):$.remoteUserMap.set(s,new Map([[p,K]])),$.statsCollector.addRemoteStats(s.uid),$.statsUploader.startUploadDownlinkStats();const _o=$.pendingRemoteTracks.findIndex(_u=>{let{user:ch,kind:_f}=_u;return ch.uid===s.uid&&p===_f});-1!==_o&&($.pendingRemoteTracks.splice(_o,1),$.emit(h1.MediaReconnectEnd,s.uid))})()}massSubscribe(s){var p=this;return f(function*(){return p.massSubscribeNoLock(s)})()}massSubscribeNoLock(s){var p=this;return f(function*(){if(!p.connection)throw new U_(D_.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");T0("debug",p,"subscribeAll",s.map(y=>{let{user:w,mediaType:$,ssrcId:j}=y;return{uid:w.uid,mediaType:$,ssrcId:j}})),s=s.filter(y=>{var w;let{user:$,mediaType:j}=y;return!(null!==(w=p.remoteUserMap.get($))&&void 0!==w&&w.has(j))}),yield p.waitTillConnected();const A=yield p.connection.batchReceive(s.map(y=>{let{user:w,mediaType:$,ssrcId:j,rtxSsrcId:_e}=y;return{kind:$,ssrcMsg:[{ssrcId:j,rtx:_e}],mslabel:String(w.uid)}}));s.forEach((y,w)=>{let{user:$,mediaType:j}=y;const{track:_e,id:K}=A[w];j===o1.AUDIO?($._audioTrack?$._audioTrack._updateOriginMediaStreamTrack(_e):($._audioTrack=new Xme(_e,$.uid,$._uintid,p.store),h_.info("[".concat(p.store.p2pId,"] create remote audio track: ").concat($._audioTrack.getTrackId()))),p.bindRemoteTrackEvents($,$._audioTrack)):($._videoTrack?$._videoTrack._updateOriginMediaStreamTrack(_e):($._videoTrack=new Zme(_e,$.uid,$._uintid,p.store),h_.info("[".concat(p.store.p2pId,"] create remote video track: ").concat($._videoTrack.getTrackId()))),p.bindRemoteTrackEvents($,$._videoTrack));const _i=p.remoteUserMap.get($);_i?_i.set(j,K):p.remoteUserMap.set($,new Map([[j,K]])),p.statsCollector.addRemoteStats($.uid),p.statsUploader.startUploadDownlinkStats();const _o=p.pendingRemoteTracks.findIndex(_u=>{let{user:ch,kind:_f}=_u;return ch.uid===$.uid&&j===_f});-1!==_o&&(p.pendingRemoteTracks.splice(_o,1),p.emit(h1.MediaReconnectEnd,$.uid))})})()}unsubscribe(s,p){var A=this;return f(function*(){const y=A.pendingRemoteTracks.filter(j=>{let{user:_e,kind:K}=j;return void 0!==p?_e.uid===s.uid&&p===K:_e.uid===s.uid});if(y.forEach(j=>{const _e=A.pendingRemoteTracks.indexOf(j);A.pendingRemoteTracks.splice(_e,1)}),!A.connection)return void y.forEach(j=>{let{kind:_e}=j;var K;if(_e===o1.AUDIO)null===(K=s._audioTrack)||void 0===K||K._destroy(),s._audioTrack=void 0;else if(_e===o1.VIDEO){var _i;null===(_i=s._videoTrack)||void 0===_i||_i._destroy(),s._videoTrack=void 0}});T0("debug",A,"unsubscribe",{uid:s.uid,mediaType:p});const w=A.filterTobeUnSubscribedTracks(s,p);if(0===w.length)return;yield A.connection.stopReceiving(w.map(j=>{let[,{id:_e}]=j;return _e}));const $=A.createUnsubscribeMessage(w);return A.withdrawRemoteTracks(w),0===A.remoteUserMap.size&&A.statsUploader.stopUploadDownlinkStats(),w.forEach(j=>{let[_e,{kind:K}]=j;var _i,_o;if(K===o1.VIDEO&&_e._videoSSRC&&(null===(_i=A.connection)||void 0===_i||_i.setStatsRemoteVideoIsReady(_e._videoSSRC,!1)),K===o1.VIDEO)A.unbindRemoteTrackEvents(_e._videoTrack),null===(_o=_e._videoTrack)||void 0===_o||_o._destroy(),_e._videoTrack=void 0;else if(K===o1.AUDIO){var _u;A.unbindRemoteTrackEvents(_e._audioTrack),null===(_u=_e._audioTrack)||void 0===_u||_u._destroy(),_e._audioTrack=void 0}}),$})()}massUnsubscribe(s){var p=this;return f(function*(){return p.massUnsubscribeNoLock(s)})()}massUnsubscribeNoLock(s){var p=this;return f(function*(){let A=[];for(const{user:$,mediaType:j}of s){const _e=p.pendingRemoteTracks.filter(K=>{let{user:_i,kind:_o}=K;return void 0!==j?_i.uid===$.uid&&j===_o:_i.uid===$.uid});_e.forEach(K=>{const _i=p.pendingRemoteTracks.indexOf(K);p.pendingRemoteTracks.splice(_i,1)}),A=A.concat(_e)}if(!p.connection)return void A.forEach($=>{let{user:j,kind:_e}=$;var K;if(_e===o1.AUDIO)null===(K=j._audioTrack)||void 0===K||K._destroy(),j._audioTrack=void 0;else if(_e===o1.VIDEO){var _i;null===(_i=j._videoTrack)||void 0===_i||_i._destroy(),j._videoTrack=void 0}});T0("debug",p,"batchUnsubscribe",s.map($=>{let{user:j,mediaType:_e}=$;return{uid:j.uid,mediaType:_e}}));const y=BP(s).call(s,($,j)=>{let{user:_e,mediaType:K}=j;const _i=p.filterTobeUnSubscribedTracks(_e,K);return $.concat(_i)},[]);if(0===y.length)return;yield p.connection.stopReceiving(y.map($=>{let[,{id:j}]=$;return j}));const w=p.createUnsubscribeAllMessage(y);return p.withdrawRemoteTracks(y),0===p.remoteUserMap.size&&p.statsUploader.stopUploadDownlinkStats(),y.forEach($=>{let[j,{kind:_e}]=$;var K,_i;if(_e===o1.VIDEO&&j._videoSSRC&&(null===(K=p.connection)||void 0===K||K.setStatsRemoteVideoIsReady(j._videoSSRC,!1)),_e===o1.VIDEO)p.unbindRemoteTrackEvents(j._videoTrack),null===(_i=j._videoTrack)||void 0===_i||_i._destroy(),j._videoTrack=void 0;else if(_e===o1.AUDIO){var _o;p.unbindRemoteTrackEvents(j._audioTrack),null===(_o=j._audioTrack)||void 0===_o||_o._destroy(),j._audioTrack=void 0}}),w})()}muteRemote(s,p){var A=this;return f(function*(){if(!A.connection)return;T0("debug",A,"muteRemote",{uid:s.uid,kind:p});const y=A.remoteUserMap.get(s);if(!y)return h_.warning("P2PChannel.muteRemote has no remote user ".concat(s.uid,".")),void aI("warning",A,"P2PChannel.muteRemote has no remote user ".concat(s.uid,"."));if(!y.get(p))return h_.warning("P2PChannel.muteRemote has no remote user ".concat(s.uid," media type ").concat(p,".")),void aI("warning",A,"P2PChannel.muteRemote has no remote user ".concat(s.uid," media type ").concat(p,"."));const w=p===o1.VIDEO?s._videoSSRC:s._audioSSRC;void 0!==w&&A.connection.setStatsRemoteVideoIsReady(w,!1)})()}unmuteRemote(s,p){var A=this;return f(function*(){return A.unmuteRemoteNoLock(s,p)})()}unmuteRemoteNoLock(s,p){var A=this;return f(function*(){if(!A.connection)return;T0("debug",A,"unmuteRemote",{uid:s.uid,kind:p});const y=A.remoteUserMap.get(s);return y?y.get(p)?void 0:(h_.warning("P2PChannel.unmuteRemote has no remote user ".concat(s.uid," media type ").concat(p,".")),void aI("warning",A,"unmuteRemote has no remote user ".concat(s.uid," media type ").concat(p))):(h_.warning("P2PChannel.unmuteRemote has no remote user ".concat(s.uid,".")),void aI("warning",A,"unmuteRemote has no remote user ".concat(s.uid)))})()}getAllTracks(s){const p=this.localTrackMap.get(eI.LocalAudioTrack);if((null==p?void 0:p.track)instanceof tP){const A=p.track;return Array.from(this.localTrackMap.entries()).filter(y=>{let[w]=y;return w!==eI.LocalAudioTrack}).filter(y=>{let[w]=y;return!(s&&w===eI.LocalVideoLowTrack)}).map(y=>{let[,{track:w}]=y;return w}).concat(A.trackList)}return Array.from(this.localTrackMap.entries()).filter(A=>{let[y]=A;return!(s&&y===eI.LocalVideoLowTrack)}).map(A=>{let[,{track:y}]=A;return y})}reportPublishEvent(s,p,A,y,w){if(s){const j=this.localTrackMap.get(eI.LocalAudioTrack),_e=this.localTrackMap.get(y?eI.LocalVideoLowTrack:eI.LocalVideoTrack);w0.publish(this.store.sessionId,{eventElapse:VL.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:s,ec:p,audioName:null==j?void 0:j.track.getTrackLabel(),videoName:null==_e?void 0:_e.track.getTrackLabel(),screenshare:-1!==(null==_e?void 0:_e.track._hints.indexOf(FS.SCREEN_TRACK)),audio:!!j,video:!!_e,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:w})}else{var $;A||(A=[]);const j=A.find(K=>K instanceof pR),_e=y?null===($=this.localTrackMap.get(eI.LocalVideoTrack))||void 0===$?void 0:$.track:A.find(K=>K instanceof UR);w0.publish(this.store.sessionId,{eventElapse:VL.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:s,ec:p,audioName:null==j?void 0:j.getTrackLabel(),videoName:null==_e?void 0:_e.getTrackLabel(),screenshare:-1!==(null==_e?void 0:_e._hints.indexOf(FS.SCREEN_TRACK)),audio:!!j,video:!!_e,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:w})}}reportSubscribeEvent(s,p,A,y){const w=y===o1.VIDEO?A._videoSSRC:A._audioSSRC;w&&w0.subscribe(this.store.sessionId,{succ:s,ec:p,video:y===o1.VIDEO,audio:y===o1.AUDIO,peerid:A.uid,subscribeRequestid:y===o1.VIDEO?A._videoSSRC:A._audioSSRC,p2pid:this.store.p2pId,eventElapse:VL.measureFromSubscribeStart(this.store.clientId,w)})}reset(){h_.debug("P2PChannel.reset"),this.mutex=new MR("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=HO.Disconnected}getStats(){var s;return null===(s=this.connection)||void 0===s?void 0:s.getStats()}getRemoteVideoIsReady(s){var p;return(null===(p=this.connection)||void 0===p?void 0:p.getRemoteVideoIsReady(s))||!1}getLocalAudioVolume(){const s=this.localTrackMap.get(eI.LocalAudioTrack);if(s)return s.track.getVolumeLevel()}getLocalVideoSize(){const s=this.localTrackMap.get(eI.LocalVideoTrack);if(s)return{width:s.track._videoWidth||0,height:s.track._videoHeight||0}}getEncoderConfig(s){const p=this.localTrackMap.get(s);return p&&p.track instanceof UR||p&&p.track instanceof pR?p.track._encoderConfig:void 0}getLocalMedia(s){return this.localTrackMap.get(s)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(s,p){if(!s)return this.remoteUserMap.size>0;const A=this.remoteUserMap.get(s);return!!A&&(!p||A.has(p))}hasRemoteMediaWithLock(s,p){var A=this;return f(function*(){if(!s)return A.remoteUserMap.size>0;const y=A.remoteUserMap.get(s);return!!y&&(!p||y.has(p))})()}getRemoteMedia(s){var p;const A=Array.from(tG(p=this.remoteUserMap).call(p)).find(y=>y.uid===s);return A?{audioTrack:A.audioTrack,audioSSRC:A._audioSSRC,videoTrack:A.videoTrack,videoSSRC:A._videoSSRC}:{}}getAudioLevels(){let s=Array.from(this.remoteUserMap.entries()).map(A=>{let[y]=A;return{uid:y.uid,level:y.audioTrack?100*y.audioTrack._source.getAccurateVolumeLevel():0}});const p=this.localTrackMap.get(eI.LocalAudioTrack);return p&&s.push({level:100*p.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),s=ece(s).call(s,(A,y)=>A.level-y.level),s}disconnectForReconnect(){var s=this;return f(function*(){s.connection&&(T0("debug",s,"disconnectForReconnect"),h_.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),s.state=HO.Reconnecting,s.connection.close(),s.unbindConnectionEvents(s.connection),s.connection=void 0,0!==s.localTrackMap.size&&(Array.from(s.localTrackMap.entries()).forEach(p=>{let[A,{track:y}]=p;switch(A){case eI.LocalVideoTrack:y._hints.includes(FS.LOW_STREAM)?y.close():s.pendingLocalTracks.push(y);break;case eI.LocalAudioTrack:y instanceof tP?s.pendingLocalTracks=s.pendingLocalTracks.concat(y.trackList):s.pendingLocalTracks.push(y)}}),s.emit(h1.MediaReconnectStart,s.store.uid)),s.unbindLocalTrackEvents(),s.localTrackMap.clear(),0!==s.remoteUserMap.size&&Array.from(s.remoteUserMap.entries()).forEach(p=>{let[A,y]=p;Array.from(tG(y).call(y)).forEach(w=>{s.setPendingRemoteMedia(A,w)}),s.emit(h1.MediaReconnectStart,A.uid)}),s.unbindAllRemoteTrackEvents(),s.remoteUserMap.clear(),s.statsUploader.stopUploadUplinkStats(),s.statsUploader.stopUploadDownlinkStats(),s.statsUploader.stopUploadTransportStats(),h_.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(s,p){for(const A of this.pendingRemoteTracks){const{user:y,kind:w}=A;if((s instanceof wye?s.uid:s)===y.uid&&p===w)return!0}return!1}setPendingRemoteMedia(s,p){this.hasPendingRemoteMedia(s,p)||this.pendingRemoteTracks.push({user:s,kind:p})}reEstablish(){var s=this;return f(function*(){if(s.connection)return s.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const s=this.connection.getStats(),p=this.localTrackMap.get(eI.LocalVideoTrack),A=this.localTrackMap.get(eI.LocalAudioTrack),y=s.videoSend.find(_f=>_f.ssrc===(null==p?void 0:p.ssrcs[0].ssrcId)),w=s.audioSend.find(_f=>_f.ssrc===(null==A?void 0:A.ssrcs[0].ssrcId));if(!y||!w)return 1;const $=x6(this,h1.NeedSignalRTT),j=y?y.rttMs:void 0,_e=w?w.rttMs:void 0,K=j&&_e?(j+_e)/2:j||_e,_o=100*s.sendPacketLossRate*.7/50+.3*((K&&$?(K+$)/2:K||$)||0)/1500,_u=_o<.17?1:_o<.36?2:_o<.59?3:_o<.1?4:5,ch=null==p?void 0:p.track;if(ch&&ch._encoderConfig&&-1===ch._hints.indexOf(FS.SCREEN_TRACK)){const _f=ch._encoderConfig.bitrateMax,o_=s.bitrate.actualEncoded;if(_f&&o_){const i_=(1e3*_f-o_)/(1e3*_f);return Cfe[i_<.15?0:i_<.3?1:i_<.45?2:i_<.6?3:4][_u]}}return _u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const s=this.connection.getStats();let p=0;return Array.from(this.remoteUserMap.entries()).forEach(A=>{let[y]=A;const w=y._audioSSRC,$=y._videoSSRC,j=s.audioRecv.find(o_=>o_.ssrc===w),_e=s.videoRecv.find(o_=>o_.ssrc===$);if(!j&&!_e)return void(p+=1);const K=x6(this,h1.NeedSignalRTT),_i=s.rtt,_o=(_i&&K?(_i+K)/2:_i||K)||0,_u=j?j.jitterMs:void 0,ch=s.recvPacketLossRate;let _f=.7*ch*100/50+.3*_o/1500;_u&&(_f=.6*ch*100/50+.2*_o/1500+.2*_u/400),p+=_f<.1?1:_f<.17?2:_f<.36?3:_f<.59?4:5}),this.remoteUserMap.size>0?Math.round(p/this.remoteUserMap.size):p}muteLocalTrack(s){var p=this;return f(function*(){return new sI((A,y)=>{p.handleMuteLocalTrack(s,A,y)})})()}filterTobePublishedTracks(s,p,A){const y=[],w=jS(),$=this.getAllTracks();s=Ure(s=s.filter(K=>-1===$.indexOf(K)));let j=!1,_e=!1;for(const K of s){if(K instanceof UR&&(this.localTrackMap.has(eI.LocalVideoTrack)||j?new U_(D_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(y.push({track:K,type:eI.LocalVideoTrack}),j=!0),p)){const _i=this.getLowVideoTrack(K,A);y.push({track:_i,type:eI.LocalVideoLowTrack})}if(K instanceof pR){const _i=this.localTrackMap.get(eI.LocalAudioTrack);if(_i){if(!(_i.track instanceof tP))throw new U_(D_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(K._bypassWebAudio)throw new U_(D_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");_i.track.addAudioTrack(K),this.bindLocalAudioTrackEvents(K,!0)}else if(_e){const _o=y.find(_u=>{let{type:ch}=_u;return ch===eI.LocalAudioTrack});if(!(_o.track instanceof tP))throw new U_(D_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(K._bypassWebAudio)throw new U_(D_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");_o.track.addAudioTrack(K)}else{if(!w.webAudioMediaStreamDest||K instanceof tP||K._bypassWebAudio)y.push({track:K,type:eI.LocalAudioTrack});else{const _o=new tP;_o.addAudioTrack(K),y.push({track:_o,type:eI.LocalAudioTrack})}_e=!0}}}return y}filterTobeUnpublishedTracks(s){const p=[],A=this.getAllTracks();s=Ure(s=s.filter(y=>-1!==A.indexOf(y)));for(const y of s){if(y instanceof pR){const w=this.localTrackMap.get(eI.LocalAudioTrack);if(!w)continue;w.track instanceof tP?(w.track.removeAudioTrack(y),this.unbindLocalAudioTrackEvents(y),0===w.track.trackList.length&&(p.push([eI.LocalAudioTrack,w]),w.track.close())):p.push([eI.LocalAudioTrack,w])}if(y instanceof UR){const w=this.localTrackMap.get(eI.LocalVideoTrack);if(!w)continue;p.push([eI.LocalVideoTrack,w]);const $=this.localTrackMap.get(eI.LocalVideoLowTrack);$&&p.push([eI.LocalVideoLowTrack,$])}}return p}bindLocalTrackEvents(s){s.forEach(p=>{let{track:A,type:y}=p;switch(y){case eI.LocalVideoTrack:A.addListener(wI.GET_STATS,this.handleGetLocalVideoStats),A.addListener(wI.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),A.addListener(wI.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),A.addListener(wI.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),A.addListener(wI.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),A.addListener(wI.NEED_REPLACE_TRACK,this.handleReplaceTrack),A.addListener(wI.NEED_MUTE_TRACK,this.handleMuteLocalTrack),A.addListener(wI.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case eI.LocalAudioTrack:this.bindLocalAudioTrackEvents(A)}})}bindLocalAudioTrackEvents(s,p){s instanceof tP?s.trackList.forEach(A=>{A.addListener(wI.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),A.addListener(wI.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),A.addListener(wI.GET_STATS,this.handleGetLocalAudioStats),A.addListener(wI.NEED_MUTE_TRACK,this.handleMuteLocalTrack),A.addListener(wI.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(s.addListener(wI.GET_STATS,this.handleGetLocalAudioStats),s.addListener(wI.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(wI.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(wI.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(wI.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),p||s.addListener(wI.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(s){s||(s=Array.from(this.localTrackMap.entries()).map(p=>{let[A,{track:y}]=p;return{track:y,type:A}})),s.forEach(p=>{let{track:A,type:y}=p;switch(y){case eI.LocalVideoTrack:A.off(wI.GET_STATS,this.handleGetLocalVideoStats),A.off(wI.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),A.off(wI.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),A.off(wI.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),A.off(wI.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),A.off(wI.NEED_REPLACE_TRACK,this.handleReplaceTrack),A.off(wI.NEED_MUTE_TRACK,this.handleMuteLocalTrack),A.off(wI.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case eI.LocalAudioTrack:this.unbindLocalAudioTrackEvents(A)}})}unbindLocalAudioTrackEvents(s){s instanceof tP?s.trackList.forEach(p=>{p.off(wI.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),p.off(wI.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),p.off(wI.GET_STATS,this.handleGetLocalAudioStats),p.off(wI.NEED_MUTE_TRACK,this.handleMuteLocalTrack),p.off(wI.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(s.off(wI.GET_STATS,this.handleGetLocalAudioStats),s.off(wI.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.off(wI.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.off(wI.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.off(wI.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.off(wI.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(s,p){p instanceof Zme&&p.addListener(wI.GET_STATS,A=>{A(this.handleGetRemoteVideoStats(s))}),p instanceof Xme&&p.addListener(wI.GET_STATS,A=>{A(this.handleGetRemoteAudioStats(s))})}unbindRemoteTrackEvents(s){s&&s.removeAllListeners(wI.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(s=>{let[p,A]=s;A.has(o1.AUDIO)&&this.unbindRemoteTrackEvents(p._audioTrack),A.has(o1.VIDEO)&&this.unbindRemoteTrackEvents(p._videoTrack)})}createGatewayPublishMessage(s,p){return s.map((A,y)=>{let w,$,{track:j,type:_e}=A;switch(_e){case eI.LocalAudioTrack:w=gT.Audio,$={dtx:j instanceof HZ&&j._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case eI.LocalVideoTrack:w=j._hints.includes(FS.SCREEN_TRACK)?gT.Screen:gT.High,$=OY(OY({},Lre(j)),{},{codec:this.store.codec});break;case eI.LocalVideoLowTrack:w=gT.Low,$=OY(OY({},Lre(j)),{},{codec:this.store.codec})}return{stream_type:w,attributes:$,ssrcs:p[y]}})}createGatewayUnpublishMessage(s){return s.map(p=>{let A,[y,{track:w,ssrcs:$,id:j}]=p;switch(y){case eI.LocalVideoTrack:A=w._hints.includes(FS.SCREEN_TRACK)?gT.Screen:gT.High;break;case eI.LocalAudioTrack:A=gT.Audio;break;case eI.LocalVideoLowTrack:A=gT.Low}return{stream_type:A,ssrcs:$,mid:j}})}assignLocalTracks(s,p){s.forEach((A,y)=>{let{track:w,type:$}=A;this.localTrackMap.set($,{track:w,id:p[y].id,ssrcs:p[y].localSSRC})})}withdrawLocalTracks(s){s.forEach(p=>{let[A]=p;this.localTrackMap.delete(A)})}waitTillConnected(){var s=this;return f(function*(){return new sI((p,A)=>{switch(s.state){case HO.New:case HO.Reconnecting:{const y=(w,$)=>$===HO.Disconnected?(s.off(h1.StateChange,y),void A(new U_(D_.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):$===HO.Connected?(s.off(h1.StateChange,y),void p(void 0)):void 0;s.on(h1.StateChange,y);break}case HO.Connected:p(void 0);break;case HO.Disconnected:A(new U_(D_.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(s){var p=this;s.onConnectionStateChange=function(){var A=f(function*(y){h_.info("[p2pId: ".concat(p.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(y,")")),vT("info",p,"connectionStateChange",y),p.emit(h1.PeerConnectionStateChange,y),"connected"!==y||p.store.keyMetrics.peerConnectionEnd||p.store.peerConnectionEnd(),"failed"===y&&("failed"===s.iceConnectionState?(setTimeout(()=>p.emit(h1.P2PLost),0),p.iceFailedCount+=1,yield cO(Fae(p.iceFailedCount,US)),p.emit(h1.RequestRestartICE)):yield p.requestReconnect())});return function(y){return A.apply(this,arguments)}}(),s.onICEConnectionStateChange=A=>{h_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(A,")")),vT("info",this,"iceConnectionStateChange",A),w0.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:A,tag:AI.TRACER}).onSuccess(),this.emit(h1.IceConnectionStateChange,A)},s.onICETransportStateChange=A=>{h_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(A,")")),vT("info",this,"ICETransportStateChange",A)},s.onDTLSTransportStateChange=A=>{h_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(A,")")),vT("info",this,"DTLSTransportStateChange",A)},s.onDTLSTransportError=A=>{h_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(A,")")),vT("info",this,"DTLSTransportError",A)},s.onFirstAudioDecoded=A=>{var y;const w=Array.from(tG(y=this.remoteUserMap).call(y)).find(j=>j._audioSSRC===A);var $;w&&(null===($=w.audioTrack)||void 0===$||$.emit(UK.FIRST_FRAME_DECODED),w0.firstRemoteFrame(this.store.sessionId,rO.FIRST_AUDIO_DECODE,pT.FIRST_AUDIO_DECODE,{peer:w._uintid,subscribeElapse:VL.measureFromSubscribeStart(this.store.clientId,A),subscribeRequestid:A,p2pid:this.store.p2pId}))},s.onFirstAudioReceived=A=>{var y;const w=Array.from(tG(y=this.remoteUserMap).call(y)).find($=>$._audioSSRC===A);w&&w0.firstRemoteFrame(this.store.sessionId,rO.FIRST_AUDIO_RECEIVED,pT.FIRST_AUDIO_RECEIVED,{peer:w._uintid,subscribeElapse:VL.measureFromSubscribeStart(this.store.clientId,A),subscribeRequestid:A,p2pid:this.store.p2pId})},s.onFirstVideoDecoded=(A,y,w)=>{var $;const j=Array.from(tG($=this.remoteUserMap).call($)).find(_e=>_e._videoSSRC===A);j&&w0.firstRemoteFrame(this.store.sessionId,rO.FIRST_VIDEO_DECODE,pT.FIRST_VIDEO_DECODE,{peer:j._uintid,videowidth:y,videoheight:w,subscribeElapse:VL.measureFromSubscribeStart(this.store.clientId,A),subscribeRequestid:A,p2pid:this.store.p2pId})},s.onFirstVideoReceived=A=>{var y;const w=Array.from(tG(y=this.remoteUserMap).call(y)).find($=>$._videoSSRC===A);w&&w0.firstRemoteFrame(this.store.sessionId,rO.FIRST_VIDEO_RECEIVED,pT.FIRST_VIDEO_RECEIVED,{peer:w._uintid,subscribeElapse:VL.measureFromSubscribeStart(this.store.clientId,A),subscribeRequestid:A,p2pid:this.store.p2pId})},s.onSelectedLocalCandidateChanged=(A,y)=>{const w="relay"===A.candidateType;"unknown"!==y.candidateType&&w===("relay"===y.candidateType)||this.emit(h1.ConnectionTypeChange,w),h_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(P6(y))," -> ").concat(JSON.stringify(P6(A)),")")),vT("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(P6(y))," -> ").concat(JSON.stringify(P6(A))))},s.onSelectedRemoteCandidateChanged=(A,y)=>{h_.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(P6(y))," -> ").concat(JSON.stringify(P6(A)),")")),vT("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(P6(y))," -> ").concat(JSON.stringify(P6(A))))}}unbindConnectionEvents(s){s.onConnectionStateChange=void 0,s.onICEConnectionStateChange=void 0,s.onICETransportStateChange=void 0,s.onDTLSTransportStateChange=void 0,s.onDTLSTransportError=void 0,s.onFirstAudioDecoded=void 0,s.onFirstAudioReceived=void 0,s.onFirstVideoDecoded=void 0,s.onFirstVideoReceived=void 0,s.onSelectedLocalCandidateChanged=void 0,s.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(s){const p=[];if(-1===this.getAllTracks().indexOf(s))return p;const A=this.localTrackMap.get(eI.LocalAudioTrack);if(s instanceof pR&&(null==A?void 0:A.track)instanceof tP)return A.track.isActive||p.push([eI.LocalAudioTrack,A]),p;const y=Array.from(this.localTrackMap.entries()).find(w=>{let[,{track:$}]=w;return s===$});if(y&&(p.push(y),y[0]===eI.LocalVideoTrack)){const w=this.localTrackMap.get(eI.LocalVideoLowTrack);w&&p.push([eI.LocalVideoLowTrack,w])}return p}filterTobeUnmutedTracks(s){const p=[],A=this.localTrackMap.get(eI.LocalAudioTrack);if(s instanceof pR&&(null==A?void 0:A.track)instanceof tP)return A.track.isActive&&p.push([eI.LocalAudioTrack,A]),p;const y=Array.from(this.localTrackMap.entries()).find(w=>{let[,{track:$}]=w;return s===$});if(y)if(y[0]===eI.LocalVideoTrack){p.push(y);const w=this.localTrackMap.get(eI.LocalVideoLowTrack);w&&p.push([eI.LocalVideoLowTrack,w])}else p.push(y);return p}createMuteMessage(s){return s.map(p=>{let A,[y,{track:w,ssrcs:$,id:j}]=p;switch(y){case eI.LocalAudioTrack:A=gT.Audio;break;case eI.LocalVideoTrack:A=w._hints.includes(FS.SCREEN_TRACK)?gT.Screen:gT.High;break;case eI.LocalVideoLowTrack:A=gT.Low}return{stream_type:A,ssrcs:$,mid:j}})}createUnmuteMessage(s){return s.map(p=>{let A,[y,{track:w,ssrcs:$,id:j}]=p;switch(y){case eI.LocalAudioTrack:A=gT.Audio;break;case eI.LocalVideoTrack:A=w._hints.includes(FS.SCREEN_TRACK)?gT.Screen:gT.High;break;case eI.LocalVideoLowTrack:A=gT.Low}return{stream_type:A,ssrcs:$,mid:j}})}filterTobeUnSubscribedTracks(s,p){const A=[],y=this.remoteUserMap.get(s);if(!y)return A;if(p){const w=y.get(p);if(!w)return A;A.push([s,{kind:p,id:w}])}else Array.from(y.entries()).forEach(w=>{let[$,j]=w;A.push([s,{kind:$,id:j}])});return A}createUnsubscribeMessage(s){const p=[];return s.forEach(A=>{let[y,{kind:w}]=A;switch(w){case o1.VIDEO:return void(y._videoSSRC&&p.push({stream_type:o1.VIDEO,ssrcId:y._videoSSRC}));case o1.AUDIO:return void(y._audioSSRC&&p.push({stream_type:o1.AUDIO,ssrcId:y._audioSSRC}))}}),p}createUnsubscribeAllMessage(s){const p=new Map;return s.forEach(A=>{let[y,{kind:w}]=A;if(p.has(y)){let $=p.get(y);$|=w===o1.VIDEO?GT.Video:GT.Audio,p.set(y,$)}else p.set(y,w===o1.VIDEO?GT.Video:GT.Audio)}),{users:Array.from(p.entries()).map(A=>{let[y,w]=A;return{stream_id:y.uid,stream_type:w}})}}withdrawRemoteTracks(s){s.forEach(p=>{let[A,{kind:y}]=p;const w=this.remoteUserMap.get(A);w&&(w.delete(y),0===Array.from(w.entries()).length&&this.remoteUserMap.delete(A))})}updateBitrateLimit(s){var p=this;return f(function*(){const A=p.localTrackMap.get(eI.LocalVideoTrack),y=p.localTrackMap.get(eI.LocalVideoLowTrack);A&&(yield A.track.setBitrateLimit(s.uplink)),y&&s.low_stream_uplink&&(yield y.track.setBitrateLimit({max_bitrate:s.low_stream_uplink.bitrate,min_bitrate:s.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(s,p){return s.map((A,y)=>{var w;let{stream_type:$}=A;return null===(w=p.find(j=>{let{stream_type:_e}=j;return $===_e}))||void 0===w?void 0:w.attributes})}tryToUnmuteAudio(s){var p=this;return f(function*(){for(let y=0;y<s.length;y++)if(s[y]instanceof pR){var A;const w=p.filterTobeUnmutedTracks(s[y]);if(0===w.length)continue;yield null===(A=p.connection)||void 0===A?void 0:A.unmuteLocal(w.map(j=>{let[,{id:_e}]=j;return _e}));const $=p.createUnmuteMessage(w);return void(yield oT(p,h1.RequestUnmuteLocal,$))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=s=>{var p;return!(null===(p=this.connection)||void 0===p||!p.getRemoteVideoIsReady(s))},this.statsUploader.requestUpload=(s,p)=>this.emit(h1.RequestUploadStats,s,p),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var s=this;return f(function*(){s.dtlsFailedCount+=1,yield cO(Fae(s.dtlsFailedCount,US)),s.emit(h1.RequestReconnect)})()}reconnectP2P(){var s=this;return f(function*(){const p=Array.from(s.localTrackMap.entries()),A=s.createGatewayUnpublishMessage(p);Array.from(s.remoteUserMap.entries()),A.length>0&&(yield o2(s,h1.RequestUnpublishForReconnectPC,A)),s.disconnectForReconnect(),s.emit(h1.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(eI.LocalVideoTrack)||this.pendingLocalTracks.some(s=>s instanceof UR)}throwIfTrackTypeNotMatch(s){if(s.filter(p=>p instanceof UR).length>1)throw new U_(D_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(s.filter(p=>p instanceof pR).length>1&&(s.some(p=>p instanceof pR&&p._bypassWebAudio)||!jS().webAudioMediaStreamDest))throw new U_(D_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const p of s){if(p instanceof UR&&this.pendingLocalTracks.some(A=>A instanceof UR))throw new U_(D_.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(p instanceof pR&&this.pendingLocalTracks.some(A=>A instanceof pR)&&(!jS().webAudioMediaStreamDest||p._bypassWebAudio||this.pendingLocalTracks.some(A=>A instanceof pR&&A._bypassWebAudio)))throw new U_(D_.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(s,p){const A=jS().supportDualStreamEncoding,y=OY(OY({},{width:160,height:120,framerate:15,bitrate:50}),p);let w;w=A?s._mediaStreamTrack.clone():function pbe(s,p){let A=document.createElement("video"),y=document.createElement("canvas");A.setAttribute("style","display:none"),y.setAttribute("style","display:none"),A.setAttribute("muted",""),A.muted=!0,A.setAttribute("autoplay",""),A.autoplay=!0,A.setAttribute("playsinline",""),y.width=M4(p.width),y.height=M4(p.height);const w=M4(p.framerate||15);document.body.append(A),document.body.append(y);let $=s._mediaStreamTrack;A.srcObject=new MediaStream([$]),A.play();const j=y.getContext("2d");if(!j)throw new U_(D_.UNEXPECTED_ERROR,"can not get canvas context");const _e=jS(),K=y.captureStream(_e.supportRequestFrame?0:w).getVideoTracks()[0],_i=i2(()=>(()=>{if(A.paused&&A.play(),A.videoHeight>2&&A.videoWidth>2){const _f=y.width*(A.videoHeight/A.videoWidth);Math.abs(_f-y.height)>=2&&(h_.debug("adjust low stream resolution","".concat(y.width,"x").concat(y.height," -> ").concat(y.width,"x").concat(_f)),y.height=_f)}j.drawImage(A,0,0,y.width,y.height),K.requestFrame&&K.requestFrame(),$!==s._mediaStreamTrack&&($=s._mediaStreamTrack,A.srcObject=new MediaStream([$]))})(),w),_o=K.stop;return K.stop=()=>{_o.call(K),_i(),A.remove(),y.width=0,y.remove(),y=null,A=null,h_.debug("clean low stream renderer")},K}(s,y);const $=new UR(w,OY(OY({},A&&{scaleResolutionDownBy:Nve(y,s)}),{},{frameRate:y.framerate,bitrateMax:y.bitrate,bitrateMin:y.bitrate}));return $._hints.push(FS.LOW_STREAM),$}globalLock(){var s=this;return f(function*(){return s.mutex.lock("From P2PChannel.globalLock")})()}}).prototype,"startP2PConnection",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"startP2PConnection"),M1.prototype),cI(M1.prototype,"connect",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"connect"),M1.prototype),cI(M1.prototype,"unpublish",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"unpublish"),M1.prototype),cI(M1.prototype,"unpublishLowStream",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"unpublishLowStream"),M1.prototype),cI(M1.prototype,"subscribe",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"subscribe"),M1.prototype),cI(M1.prototype,"massSubscribe",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"massSubscribe"),M1.prototype),cI(M1.prototype,"unsubscribe",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"unsubscribe"),M1.prototype),cI(M1.prototype,"massUnsubscribe",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"massUnsubscribe"),M1.prototype),cI(M1.prototype,"muteRemote",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"muteRemote"),M1.prototype),cI(M1.prototype,"unmuteRemote",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"unmuteRemote"),M1.prototype),cI(M1.prototype,"hasRemoteMediaWithLock",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"hasRemoteMediaWithLock"),M1.prototype),cI(M1.prototype,"disconnectForReconnect",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"disconnectForReconnect"),M1.prototype),cI(M1.prototype,"reEstablish",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"reEstablish"),M1.prototype),cI(M1.prototype,"updateBitrateLimit",[HM],Object.getOwnPropertyDescriptor(M1.prototype,"updateBitrateLimit"),M1.prototype),S0e=M1))||S0e;function HM(s,p,A){const y=s[p];if("function"!=typeof y)throw new Error("Cannot use mutex on object property.");return A.value=f(function*(){const w=this.mutex,$=yield w.lock("From P2PChannel.".concat(p));try{for(var j=arguments.length,_e=new Array(j),K=0;K<j;K++)_e[K]=arguments[K];return yield y.apply(this,_e)}finally{$()}}),A}function Q4(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var k1,D0e="function"==typeof Symbol&&Symbol.observable||"@@observable",Jye=function(){return Math.random().toString(36).substring(7).split("").join(".")},N0e={INIT:"@@redux/INIT"+Jye(),REPLACE:"@@redux/REPLACE"+Jye(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jye()}};function Abe(s){if("object"!=typeof s||null===s)return!1;for(var p=s;null!==Object.getPrototypeOf(p);)p=Object.getPrototypeOf(p);return Object.getPrototypeOf(s)===p}function k0e(s,p,A){var y;if("function"==typeof p&&"function"==typeof A||"function"==typeof A&&"function"==typeof arguments[3])throw new Error(Q4(0));if("function"==typeof p&&void 0===A&&(A=p,p=void 0),void 0!==A){if("function"!=typeof A)throw new Error(Q4(1));return A(k0e)(s,p)}if("function"!=typeof s)throw new Error(Q4(2));var w=s,$=p,j=[],_e=j,K=!1;function _i(){_e===j&&(_e=j.slice())}function _o(){if(K)throw new Error(Q4(3));return $}function _u(i_){if("function"!=typeof i_)throw new Error(Q4(4));if(K)throw new Error(Q4(5));var u_=!0;return _i(),_e.push(i_),function(){if(u_){if(K)throw new Error(Q4(6));u_=!1,_i();var g_=_e.indexOf(i_);_e.splice(g_,1),j=null}}}function ch(i_){if(!Abe(i_))throw new Error(Q4(7));if(void 0===i_.type)throw new Error(Q4(8));if(K)throw new Error(Q4(9));try{K=!0,$=w($,i_)}finally{K=!1}for(var u_=j=_e,g_=0;g_<u_.length;g_++)(0,u_[g_])();return i_}function _f(i_){if("function"!=typeof i_)throw new Error(Q4(10));w=i_,ch({type:N0e.REPLACE})}function o_(){var i_,u_=_u;return(i_={subscribe:function(g_){if("object"!=typeof g_||null===g_)throw new Error(Q4(11));function __(){g_.next&&g_.next(_o())}return __(),{unsubscribe:u_(__)}}})[D0e]=function(){return this},i_}return ch({type:N0e.INIT}),(y={dispatch:ch,subscribe:_u,getState:_o,replaceReducer:_f})[D0e]=o_,y}function P0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function vI(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?P0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):P0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}!function(s){s.SET_SESSION_ID="SET_SESSION_ID",s.SET_P2P_ID="SET_P2P_id",s.SET_UID="SET_UID",s.SET_PUB_ID="SET_PUB_ID",s.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",s.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",s.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",s.AVOID_JOIN_START="AVOID_JOIN_START",s.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",s.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",s.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",s.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",s.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",s.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",s.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",s.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",s.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",s.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",s.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",s.RESET_KEY_METRICS="RESET_KEY_METRICS"}(k1||(k1={}));class _be{constructor(p,A,y,w){a_(this,"store",void 0),a_(this,"reducer",void 0);const $={codec:p,audioCodec:A,mode:y,clientId:w,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,_e=arguments.length>1?arguments[1]:void 0;switch(_e.type){case k1.SET_SESSION_ID:return vI(vI({},j),{},{sessionId:_e.sessionId});case k1.SET_P2P_ID:return vI(vI({},j),{},{p2pId:_e.p2pId});case k1.SET_UID:return vI(vI({},j),{},{uid:_e.uid});case k1.SET_PUB_ID:return vI(vI({},j),{},{pubId:_e.pubId});case k1.KEY_METRIC_CLIENT_CREATED:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{clientCreated:_e.metric})});case k1.KEY_METRIC_JOIN_START:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{joinStart:_e.metric})});case k1.AVOID_JOIN_START:return vI(vI({},j),{},{avoidJoinStart:_e.avoidJoinStart});case k1.KEY_METRIC_JOIN_END:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{joinEnd:_e.metric})});case k1.KEY_METRIC_REQUEST_AP_START:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{requestAPStart:_e.metric})});case k1.KEY_METRIC_REQUEST_AP_END:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{requestAPEnd:_e.metric})});case k1.KEY_METRIC_JOIN_GATEWAY_START:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{joinGatewayStart:_e.metric})});case k1.KEY_METRIC_JOIN_GATEWAY_END:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{joinGatewayEnd:_e.metric})});case k1.KEY_METRIC_PEER_CONNECTION_START:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{peerConnectionStart:_e.metric})});case k1.KEY_METRIC_PEER_CONNECTION_END:return vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{peerConnectionEnd:_e.metric})});case k1.KEY_METRIC_PUBLISH:{const K=j.keyMetrics.publish,_i=K.findIndex(_o=>_o.trackId===_e.metric.trackId);return-1!==_i?(K[_i]=vI(vI({},K[_i]),_e.metric),vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{publish:[...K]})})):vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{publish:[...j.keyMetrics.publish,_e.metric]})})}case k1.KEY_METRIC_SUBSCRIBE:{const K=j.keyMetrics.subscribe,_i=K.findIndex(_o=>_o.userId===_e.metric.userId&&_o.type===_e.metric.type);return-1!==_i?(K[_i]=vI(vI({},K[_i]),_e.metric),vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{subscribe:[...K]})})):vI(vI({},j),{},{keyMetrics:vI(vI({},j.keyMetrics),{},{subscribe:[...j.keyMetrics.subscribe,_e.metric]})})}case k1.SET_CLOUD_PROXY_SERVER_MODE:return j.cloudProxyServerMode=_e.mode,j;case k1.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof _e.index?j.joinChannelServiceRecords=[...j.joinChannelServiceRecords,_e.record]:(j.joinChannelServiceRecords[_e.index]=vI(vI({},j.joinChannelServiceRecords[_e.index]),_e.record),j.joinChannelServiceRecords=[...j.joinChannelServiceRecords]),j;case k1.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return j.joinChannelServiceRecords=[],j;case k1.RESET_KEY_METRICS:return j.keyMetrics={publish:[],subscribe:[]},j;default:return j}},this.store=k0e(this.reducer)}set sessionId(p){this.store.dispatch({type:k1.SET_SESSION_ID,sessionId:p})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(p){this.store.dispatch({type:k1.SET_P2P_ID,p2pId:p})}get p2pId(){return this.store.getState().p2pId}set uid(p){this.store.dispatch({type:k1.SET_UID,uid:p})}get uid(){return this.store.getState().uid}set pubId(p){this.store.dispatch({type:k1.SET_PUB_ID,pubId:p})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(p){this.store.dispatch({type:k1.SET_CLOUD_PROXY_SERVER_MODE,mode:p})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:k1.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:k1.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(p){this.store.dispatch({type:k1.AVOID_JOIN_START,avoidJoinStart:p})}joinEnd(){this.store.dispatch({type:k1.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:k1.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:k1.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:k1.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:k1.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:k1.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:k1.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(p,A,y,w){this.store.dispatch({type:k1.KEY_METRIC_PUBLISH,metric:vI(vI({trackId:p,type:A},y&&{publishStart:y}),w&&{publishEnd:w})})}subscribe(p,A,y,w,$){this.store.dispatch({type:k1.KEY_METRIC_SUBSCRIBE,metric:vI(vI(vI({userId:p,type:A},y&&{subscribeStart:y}),w&&{subscribeEnd:w}),$&&{firstFrame:$})})}massSubscribe(p,A,y,w){p.forEach($=>{this.store.dispatch({type:k1.KEY_METRIC_SUBSCRIBE,metric:vI(vI(vI({userId:$.userId,type:$.type},A&&{subscribeStart:A}),y&&{subscribeEnd:y}),w&&{firstFrame:w})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(p,A){"gateway"===p.service&&Array.isArray(p.urls)&&(p.urls=p.urls.map(y=>y.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof A?(this.store.dispatch({type:k1.RECORD_JOIN_CHANNEL_SERVICE,record:vI(vI({},p),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(A<0||A>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:k1.RECORD_JOIN_CHANNEL_SERVICE,record:p,index:A}),A)}catch(y){return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:k1.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:k1.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch(p){return[]}}}let eAe;const x0e=()=>void 0!==window.isSecureContext;class ybe{constructor(p,A){a_(this,"time",void 0),a_(this,"sequence",void 0),a_(this,"name",void 0),a_(this,"elapse",void 0),this.name=p,this.time=performance.now(),this.sequence=O_e[A].indexOf(p)}setElapse(p){this.elapse=p}}const Ebe=new Map;class Ibe{constructor(p,A){a_(this,"records",[]),a_(this,"_id",void 0),a_(this,"_group",void 0),a_(this,"_localTimeStamp",void 0),a_(this,"_performanceTimeStamp",void 0),this._id=p,this._group=A,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(p){const A=new ybe(p,this._group);-1===A.sequence&&h_.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(A);const y=this.records.find(w=>w.sequence===A.sequence-1);y&&A.setElapse(A.time-y.time)}getRecord(p){return this.records.find(A=>A&&A.name===p)}resetRecords(){this.records.length=0}}var L0e,M0e,B0e,U0e,F0e,j0e,V0e,G0e,Q0e,hO;function H0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function nde(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?H0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):H0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}let bbe=(L0e=dI("AgoraRTCClient","store.clientId"),M0e=LM({report:w0}),B0e=LM(),U0e=LM({report:w0}),F0e=Ere(),j0e=LM({report:w0}),V0e=Ere({report:w0}),G0e=LM({reportResult:!0,report:w0}),L0e((cI((hO=class extends hS{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(s){var p;let A;if(super(),p=this,a_(this,"store",void 0),a_(this,"_uid",void 0),a_(this,"_channelName",void 0),a_(this,"_uintUid",void 0),a_(this,"_users",[]),a_(this,"_codec",void 0),a_(this,"_mode",void 0),a_(this,"_config",void 0),a_(this,"_clientId",void 0),a_(this,"_appId",void 0),a_(this,"_sessionId",null),a_(this,"_key",void 0),a_(this,"_joinInfo",void 0),a_(this,"_gateway",void 0),a_(this,"_statsCollector",void 0),a_(this,"_configDistribute",void 0),a_(this,"_leaveMutex",new MR("client-leave")),a_(this,"_publishMutex",new MR("client-publish")),a_(this,"_renewTokenMutex",new MR("client-renewtoken")),a_(this,"_subscribeMutex",new MR("client-subscribe")),a_(this,"_encryptionMode","none"),a_(this,"_encryptionSecret",null),a_(this,"_encryptionSalt",null),a_(this,"_proxyServer",void 0),a_(this,"_performanceRecorder",void 0),a_(this,"_turnServer",{servers:[],mode:"auto"}),a_(this,"_cloudProxyServerMode","disabled"),a_(this,"_isDualStreamEnabled",!1),a_(this,"_defaultStreamFallbackType",void 0),a_(this,"_lowStreamParameter",void 0),a_(this,"_streamFallbackTypeCacheMap",new Map),a_(this,"_remoteStreamTypeCacheMap",new Map),a_(this,"_axiosCancelSource",GU.CancelToken.source()),a_(this,"_audioVolumeIndicationInterval",void 0),a_(this,"_networkQualityInterval",void 0),a_(this,"_userOfflineTimeout",void 0),a_(this,"_streamRemovedTimeout",void 0),a_(this,"_injectStreamingClient",void 0),a_(this,"_liveTranscodeStreamingClient",void 0),a_(this,"_liveRawStreamingClient",void 0),a_(this,"_channelMediaRelayClient",void 0),a_(this,"_networkQualitySensitivity","normal"),a_(this,"_p2pChannel",void 0),a_(this,"_useLocalAccessPoint",!1),a_(this,"_joinAndNotLeaveYet",!1),a_(this,"_numberOfJoinCount",0),a_(this,"_remoteDefaultVideoStreamType",void 0),a_(this,"_handleLocalTrackEnable",(y,w,$)=>{this.publish(y,!1).then(w).catch($)}),a_(this,"_handleLocalTrackDisable",(y,w,$)=>{this.unpublish(y).then(w).catch($)}),a_(this,"_handleUserOnline",y=>{this.isStringUID&&"string"!=typeof y.uid&&(h_.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),aI("error",this,"StringUID is Mixed with UintUID"));const w=this._users.find($=>$.uid===y.uid);if(w)w._trust_in_room_=!0;else{const $=new wye(y.uid,y.uint_id||y.uid);this._users.push($),h_.debug("[".concat(this._clientId,"] user online"),y.uid),BL("info",this,"user-joined",{uid:y.uid}),this.emit(u1.USER_JOINED,$)}}),a_(this,"_handleUserOffline",y=>{const w=this._users.find($=>$.uid===y.uid);w&&(this._handleRemoveStream(y),I9(this._users,w),this._remoteStreamTypeCacheMap.delete(w.uid),this._streamFallbackTypeCacheMap.delete(w.uid),h_.debug("[".concat(this._clientId,"] user offline"),y.uid,"reason:",y.reason),BL("info",this,"user-left",{reason:y.reason,uid:y.uid}),this.emit(u1.USER_LEAVED,w,y.reason))}),a_(this,"_handleAddAudioOrVideoStream",(y,w,$,j,_e,K,_i)=>{const _o=this._users.find(ch=>ch.uid===w);if(!_o)return h_.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void vT("error",["AgoraRTCGateway",this._clientId],"add_".concat(y,"_stream"),"can not find target user!");h_.debug("[".concat(this._clientId,"] stream added with uid ").concat(w,", type ").concat(y)),vT("debug",["AgoraRTCGateway",this._clientId],"add_".concat(y,"_stream"),{uid:w,mediaType:y});const _u="audio"===y?_o.hasAudio:_o.hasVideo;_o._uintid||(_o._uintid=_e||w),_o._trust_stream_added_state_=!0,"audio"===y?(_o._audio_added_=!0,void 0!==$&&(_o._audioSSRC=$),void 0!==j&&(_o._cname=j),K&&(_o._audioOrtc=K)):(_o._video_added_=!0,void 0!==$&&(_o._videoSSRC=$),void 0!==j&&(_o._cname=j),void 0!==_i&&(_o._rtxSsrcId=_i),K&&(_o._videoOrtc=K)),("audio"===y?_o.hasAudio:_o.hasVideo)&&!_u&&(h_.info("[".concat(this._clientId,"] remote user ").concat(_o.uid," published ").concat(y)),aI("info",this,"remote user ".concat(_o.uid," published ").concat(y)),BL("info",this,"user-published",{uid:_o.uid,mediaType:y}),this.emit(u1.USER_PUBLISHED,_o,y)),"video"===y?w0.onGatewayStream(this._sessionId,rO.ON_ADD_VIDEO_STREAM,pT.ON_ADD_VIDEO_STREAM,{peer:_e||w}):w0.onGatewayStream(this._sessionId,rO.ON_ADD_AUDIO_STREAM,pT.ON_ADD_AUDIO_STREAM,{peer:_e||w}),this._p2pChannel.hasPendingRemoteMedia(_o,y)&&this.subscribe(_o,y).catch(ch=>{h_.error("[".concat(this._clientId,"] resubscribe error"),ch.toString()),aI("error",this,"resubscribe error: ".concat(ch.toString()))})}),a_(this,"_handleRemoveStream",y=>{const w=this._users.find(j=>j.uid===y.uid);if(!w)return h_.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void vT("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:y.uid,info:"can not find target user!"});h_.debug("[".concat(this._clientId,"] stream removed with uid ").concat(y.uid)),vT("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:y.uid});let $=()=>{};w.hasAudio&&w.hasVideo?$=()=>{h_.info("[".concat(this._clientId,"] remote user ").concat(w.uid," unpublished audio track")),BL("info",this,"user-unpublished",{uid:w.uid,mediaType:"audio"}),this.emit(u1.USER_UNPUBLISHED,w,"audio"),h_.info("[".concat(this._clientId,"] remote user ").concat(w.uid," unpublished video track")),BL("info",this,"user-unpublished",{uid:w.uid,mediaType:"video"}),this.emit(u1.USER_UNPUBLISHED,w,"video")}:w.hasVideo?$=()=>{h_.info("[".concat(this._clientId,"] remote user ").concat(w.uid," unpublished video track")),BL("info",this,"user-unpublished",{uid:w.uid,mediaType:"video"}),this.emit(u1.USER_UNPUBLISHED,w,"video")}:w.hasAudio&&($=()=>{h_.info("[".concat(this._clientId,"] remote user ").concat(w.uid," unpublished audio track")),BL("info",this,"user-unpublished",{uid:w.uid,mediaType:"audio"}),this.emit(u1.USER_UNPUBLISHED,w,"audio")}),w._trust_stream_added_state_=!0,w._audio_added_=!1,w._video_added_=!1,this._p2pChannel.unsubscribe(w).then(j=>{if(j)return this._gateway.unsubscribe(j,w.uid)}),w._audioSSRC=void 0,w._videoSSRC=void 0,w._audioOrtc=void 0,w._videoOrtc=void 0,w._rtxSsrcId=void 0,w0.onGatewayStream(this._sessionId,rO.ON_REMOVE_STREAM,pT.ON_REMOVE_STREAM,{peer:y.uint_id||y.uid}),$()}),a_(this,"_handleSetStreamLocalEnable",(y,w,$)=>{const j=this._users.find(_i=>_i.uid===w);if(!j)return h_.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void vT("error",this,"disable_local_video","can not find target user!(disable_local)");h_.debug("[".concat(this._clientId,"] local ").concat(y," ").concat($?"enabled":"disabled"," with uid ").concat(w)),vT("debug",this,"disable_local_video","local ".concat(y," ").concat($?"enabled":"disabled"," with uid ").concat(w));const _e="audio"===y?j.hasAudio:j.hasVideo;if("audio"===y){j._trust_audio_enabled_state_=!0;const _i=j._audio_enabled_;if(j._audio_enabled_=$,j._audio_enabled_===_i)return;{const _o=j._audio_enabled_?"enable-local-audio":"disable-local-audio";h_.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(w,", msg: ").concat(_o)),pI("debug",this,"user-info-updated",{uid:w,msg:_o}),this.emit(u1.USER_INFO_UPDATED,w,_o)}}else{j._trust_video_enabled_state_=!0;const _i=j._video_enabled_;if(j._video_enabled_=$,j._video_enabled_===_i)return;{const _o=j._video_enabled_?"enable-local-video":"disable-local-video";h_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(w,", msg: ").concat(_o)),pI("debug",this,"user-info-updated",{uid:w,msg:_o}),this.emit(u1.USER_INFO_UPDATED,w,_o)}}const K="audio"===y?j.hasAudio:j.hasVideo;return _e!==K?!_e&&K?(h_.info("[".concat(this._clientId,"] remote user ").concat(w," published ").concat(y)),BL("info",this,"user-published",{uid:w,mediaType:y}),void this.emit(u1.USER_PUBLISHED,j,y)):("video"===y&&j._videoTrack&&j._videoTrack._destroy(),this._p2pChannel.muteRemote(j,y),h_.info("[".concat(this._clientId,"] remote user ").concat(w," unpublished ").concat(y)),BL("info",this,"user-unpublished",{uid:w,mediaType:y}),void this.emit(u1.USER_UNPUBLISHED,j,y)):void 0}),a_(this,"_handleMuteStream",(y,w,$)=>{h_.debug("[".concat(this._clientId,"] receive mute message"),y,w,$),vT("debug",this,"mute_".concat(w),$);const j=this._users.find(_i=>_i.uid===y);if(!j)return h_.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(y)),void vT("warning",this,"mute_".concat(w),"can not find remote user, ignore mute event, uid: ".concat(y));const _e="audio"===w?j.hasAudio:j.hasVideo;if("audio"===w){j._trust_audio_mute_state_=!0;const _i=j._audio_muted_;if(j._audio_muted_=$,j._audio_muted_===_i)return;{const _o=j._audio_muted_?"mute-audio":"unmute-audio";h_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(y,", msg: ").concat(_o)),pI("debug",this,"user-info-updated",{uid:y,msg:_o}),this.emit(u1.USER_INFO_UPDATED,y,_o)}}else{j._trust_video_mute_state_=!0;const _i=j._video_muted_;if(j._video_muted_=$,j._video_muted_===_i)return;{const _o=j._video_muted_?"mute-video":"unmute-video";h_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(y,", msg: ").concat(_o)),pI("debug",this,"user-info-updated",{uid:y,msg:_o}),this.emit(u1.USER_INFO_UPDATED,y,_o)}}const K="audio"===w?j.hasAudio:j.hasVideo;return _e!==K?!_e&&K?(h_.info("[".concat(this._clientId,"] remote user ").concat(y," published ").concat(w)),BL("info",this,"user-published",{uid:j.uid,mediaType:w}),void this.emit(u1.USER_PUBLISHED,j,w)):("video"===w&&j._videoTrack&&j._videoTrack._destroy(),this._p2pChannel.muteRemote(j,w),h_.info("[".concat(this._clientId,"] remote user ").concat(y," unpublished ").concat(w)),BL("info",this,"user-unpublished",{uid:y,mediaType:w}),void this.emit(u1.USER_UNPUBLISHED,j,w)):void 0}),a_(this,"_handleP2PLost",function(){var y=f(function*(w){if(h_.debug("[".concat(p._clientId,"] receive p2p lost"),w),vT("debug",p,"p2p_lost",w),parseInt(w.p2pid,10)!==p.store.p2pId)return h_.warning("P2PLost stream not found",w),void vT("warning",p,"p2p_lost","P2PLost stream not found, ".concat(w));yield p._p2pChannel.requestReconnect()});return function(w){return y.apply(this,arguments)}}()),a_(this,"_handleTokenWillExpire",()=>{h_.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),vT("debug",this,"token_privilege_will_expire"),this.emit(u1.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),a_(this,"_handleBeforeUnload",y=>{"beforeunload"===y.type&&void 0!==y.returnValue&&""!==y.returnValue||(this.leave(),h_.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),m6("info",["window",this.store.clientId],H2()?"beforeunload":"pagehide"))}),a_(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(u1.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const y={downlinkNetworkQuality:0,uplinkNetworkQuality:0};y.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),y.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(u1.NETWORK_QUALITY,y)}),this._codec=s.codec,this._mode=s.mode,this._clientId=pS(5,"client-"),this.store=new _be(s.codec,s.audioCodec,s.mode,this._clientId),this.store.clientCreated(),s.proxyServer&&this.setProxyServer(s.proxyServer,!0),s.turnServer&&this.setTurnServer(s.turnServer,!0),h_.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(GO," build: ").concat(U7,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),pI("info",this,"constructor",{version:GO,build:U7,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(y,w){const $=new Ibe(y,"join");return Ebe.set(y,$),$}(this._clientId),s.clientRoleOptions)try{Bne(s.clientRoleOptions),A=Object.assign({},s.clientRoleOptions)}catch(y){h_.warning("[".concat(this._clientId,"] ").concat(y.toString())),aI("warning",this,y.toString())}this._statsCollector=new lG(this.store),this._statsCollector.onStatsException=(y,w,$)=>{h_.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(y,", msg: ").concat(w,", uid: ").concat($)),BL("debug",this,u1.EXCEPTION,{code:y,message:w,uid:$}),this.emit(u1.EXCEPTION,{code:y,msg:w,uid:$})},this._statsCollector.onUploadPublishDuration=(y,w,$,j)=>{const _e=this._users.find(K=>K.uid===y);_e&&w0.peerPublishStatus(this._sessionId,{subscribeElapse:j,audioPublishDuration:w,videoPublishDuration:$,peer:_e._uintid})},this._gateway=new fye(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:s.websocketRetryConfig||US,httpRetryConfig:s.httpRetryConfig||US,forceWaitGatewayResponse:void 0===s.forceWaitGatewayResponse||s.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:s.role,clientRoleOptions:A}),this._config=s,this._configDistribute=new Tme,this._p2pChannel=new mbe(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(s,p,A,y,w){var $=this;return f(function*(){const j=++$._numberOfJoinCount;$._performanceRecorder.checkPoint("startJoin"),$.store.joinStart(),y&&($.store.uid=y);const _e="HTTPS"===(eAe||eAe||(eAe=(window.location.protocol.split(":")[0]||"").toUpperCase(),eAe)),K=x0e()?window.isSecureContext:"Browser Not Support";if(!x0e()&&!_e||!window.isSecureContext){const o_="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";h_.warning(o_),T0("warning",$,o_)}const _i=Tge();"DISCONNECTED"===$.connectionState&&($.store.avoidJoinStart=Math.round(Date.now()),h_.debug("[".concat($._clientId,"] set avoidJoinStart to ").concat($.store.avoidJoinStart)),T0("debug",$,"join",void 0,"[".concat($._clientId,"] set avoidJoinStart to ").concat($.store.avoidJoinStart)));const _o=w0.reportApiInvoke(_i,{name:bI.JOIN,options:[s,p,A,y],states:{isHttps:_e,isSecureContext:K},tag:AI.TRACER});try{if(!A&&null!==A)throw new U_(D_.INVALID_PARAMS,"Invalid token: ".concat(A,". If you don not use token, set it to null"));A&&rT(A,"token",1,2047),rT(s,"appid",1,2047),xK(p),y&&tZ(y),w&&rT(w,"optionalInfo",1,2047)}catch(o_){throw _o.onError(o_),o_}if(h_.info("[".concat($._clientId,"] start join channel ").concat(p,", join number: ").concat(j)),pI("info",$,"join",{channel:p}),$._leaveMutex.isLocked&&(h_.debug("[".concat($._clientId,"] join: waiting leave operation")),aI("debug",$,"join: waiting leave operation"),(yield $._leaveMutex.lock())(),h_.debug("[".concat($._clientId,"] join: continue")),aI("debug",$,"join: continue")),$._joinAndNotLeaveYet=!0,"DISCONNECTED"!==$.connectionState){const o_=new U_(D_.INVALID_OPERATION,"[".concat($._clientId,"] Client already in connecting/connected state"));throw _o.onError(o_),o_}$._sessionId||($._sessionId=_i,$.store.sessionId=$._sessionId),$._gateway.state="CONNECTING";const _u=nde({clientId:$._clientId,appId:s,sid:$._sessionId,cname:p,uid:"string"!=typeof y?y:null,turnServer:$._turnServer,proxyServer:$._proxyServer,token:A||s,cloudProxyServer:$._cloudProxyServerMode,optionalInfo:w,useLocalAccessPoint:$._useLocalAccessPoint},void 0!==$._remoteDefaultVideoStreamType&&{defaultVideoStream:$._remoteDefaultVideoStreamType});if("string"==typeof y&&(_u.stringUid=y,$._uintUid?(_u.uid=$._uintUid,$._uintUid=void 0):_u.uid=0),"none"!==$._encryptionMode&&$._encryptionSecret){if(_u.aesmode=$._encryptionMode,_u.aespassword=yield(o_=f(function*(i_){const u_=jre("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),g_=yield window.crypto.subtle.importKey("spki",u_,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),__=Rue(i_),w_=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},g_,__);return Vre(new Uint8Array(w_))}),function(i_){return o_.apply(this,arguments)})($._encryptionSecret),!$._joinAndNotLeaveYet)throw new U_(D_.INVALID_OPERATION,"[".concat($._clientId,"] Client already left"));$._encryptionSalt&&(_u.aessalt=$._encryptionSalt)}var o_;$._startSession($._sessionId,{channel:p,appId:s});const ch=$._sessionId;setTimeout(()=>{"CONNECTING"===$.connectionState&&ch===$._sessionId&&w0.joinChannelTimeout($._sessionId,5)},5e3);try{let o_;const i_=_u.cloudProxyServer;if("443only"===i_)_u.proxyServer=S0("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(i_)){const __=S0("PROXY_SERVER_TYPE3");_u.proxyServer=Array.isArray(__)?__[0]:__}if(w0.setProxyServer(_u.proxyServer),h_.setProxyServer(_u.proxyServer),B7(_u.proxyServer),$._performanceRecorder.checkPoint("startRequestAp"),$.store.requestAPStart(),_u.stringUid&&!_u.uid&&"normal"===i_){yield Lle(_u,$._axiosCancelSource.token,$._config.httpRetryConfig||US,!1,$.store);const __=yield Ble(_u.stringUid,_u,$._axiosCancelSource.token,$._config.httpRetryConfig||US,$.store);h_.debug("getUserAccount Success ".concat(_u.stringUid," => ").concat(__)),aI("debug",$,"getUserAccount Success ".concat(_u.stringUid," => ").concat(__)),_u.uid=__,o_=yield CY(_u,$._axiosCancelSource.token,$._config.httpRetryConfig||US,$.store)}else if(_u.stringUid&&!_u.uid){const __=yield Ble(_u.stringUid,_u,$._axiosCancelSource.token,$._config.httpRetryConfig||US,$.store);h_.debug("getUserAccount Success ".concat(_u.stringUid," => ").concat(__)),aI("debug",$,"getUserAccount Success ".concat(_u.stringUid," => ").concat(__)),_u.uid=__,o_=yield Lle(_u,$._axiosCancelSource.token,$._config.httpRetryConfig||US,!0,$.store)}else o_=yield Lle(_u,$._axiosCancelSource.token,$._config.httpRetryConfig||US,!0,$.store);if(!$._joinAndNotLeaveYet)throw new U_(D_.INVALID_OPERATION,"[".concat($._clientId,"] Client already left"));$.store.requestAPEnd(),$._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{$._configDistribute.startGetConfigDistribute(_u,$._axiosCancelSource.token),$._configDistribute.on(QT.UPDATE_BITRATE_LIMIT,__=>{$._p2pChannel.updateBitrateLimit(__)})},0),$._key=A||s;const u_=o_.gatewayInfo;$._joinInfo=nde(nde({},_u),{},{cid:u_.cid,uid:_u.uid?_u.uid:u_.uid,vid:u_.vid,apResponse:u_.res,uni_lbs_ip:u_.uni_lbs_ip,gatewayAddrs:u_.gatewayAddrs});const g_=yield $._joinGateway();if(!$._joinAndNotLeaveYet)throw new U_(D_.INVALID_OPERATION,"[".concat($._clientId,"] Client already left"));return _o.onSuccess(g_),$._appId=s,$._channelName=_u.cname,$._uid=g_,$.store.uid=g_,setTimeout(()=>{$._networkQualityInterval&&window.clearInterval($._networkQualityInterval),$._networkQualityInterval=window.setInterval($._handleUpdateNetworkQuality,2e3),window.addEventListener(H2()?"beforeunload":"pagehide",$._handleBeforeUnload)},0),h_.info("[".concat($._clientId,"] Joining channel success: ").concat(p)),pI("info",$,"join",p,"success"),setTimeout(()=>{S0("USE_NEW_LOG")?RK():h_.startUpload()},5e3),$._performanceRecorder.checkPoint("finishJoin"),$.store.joinEnd(),nO.includes(_f=$)||nO.push(_f),g_}catch(o_){const i_=Array.isArray(o_)?o_[0]:o_;throw h_.error("[".concat($._clientId,"] join number: ").concat(j,", Joining channel failed, rollback"),i_),pI("error",$,"join",p,i_.toString()),i_.code!==D_.OPERATION_ABORTED&&$._numberOfJoinCount===j&&($._gateway.state="DISCONNECTED",$._reset()),_o.onError(i_),i_}var _f})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new U_(D_.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!S0("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(s=>s).catch(s=>{if(s.code===D_.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,YT.FALLBACK);throw s}).then(s=>{if(s)return s;if(h_.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new U_(D_.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const p=S0("PROXY_SERVER_TYPE3");if(Array.isArray(p))if(this._joinInfo.apUrl){const A=new AG(this._joinInfo.apUrl).host.split("."),y=A.slice(A.length-2).join(".");p.forEach(w=>{this._joinInfo&&w.includes(y)&&(this._joinInfo.proxyServer=w)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=p[0])}else this._joinInfo.proxyServer=p[0];else this._joinInfo.proxyServer=p;return h_.setProxyServer(this._joinInfo.proxyServer),w0.setProxyServer(this._joinInfo.proxyServer),B7(this._joinInfo.proxyServer),w0.reportApiInvoke(this._sessionId,{name:bI.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:AI.TRACER}).onSuccess(),this.emit(u1.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(s=>s)}leave(){var s=this;return f(function*(){const p=w0.reportApiInvoke(s._sessionId,{name:bI.LEAVE,options:[],tag:AI.TRACER});h_.info("[".concat(s._clientId,"] Leaving channel")),pI("info",s,"leave"),window.removeEventListener(H2()?"beforeunload":"pagehide",s._handleBeforeUnload),s._reset(),function(y){const w=nO.indexOf(y);-1!==w&&nO.splice(w,1)}(s);const A=yield s._leaveMutex.lock();if("DISCONNECTED"===s.connectionState)return h_.info("[".concat(s._clientId,"] Leaving channel repeated, success")),A(),p.onSuccess();yield s._gateway.leave("CONNECTED"!==s.connectionState),h_.info("[".concat(s._clientId,"] Leaving channel success")),pI("info",s,"leave",void 0,"success"),s._joinAndNotLeaveYet=!1,s.store.resetJoinChannelServiceRecords(),A(),p.onSuccess()})()}publish(s){var p=arguments,A=this;return f(function*(){let y=!(p.length>1&&void 0!==p[1])||p[1];Array.isArray(s)||(s=[s]);const w=w0.reportApiInvoke(A._sessionId,{name:bI.PUBLISH,options:s.map(j=>j?Object(j).toString():"null"),tag:AI.TRACER});if(0===s.length){const j=new U_(D_.INVALID_PARAMS,"track list is empty");return w.onError(j),j.throw()}if("audience"===A._gateway.role){const j=new U_(D_.INVALID_OPERATION,"audience can not publish stream");return w.onError(j),j.throw()}for(const j of s){if(!(j instanceof pue)){const _e=new U_(D_.INVALID_PARAMS,"parameter is not local track");return w.onError(_e),_e.throw()}if(!j._enabled&&y){const _e=new U_(D_.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(j.getTrackId()));return w.onError(_e),_e.throw()}}h_.info("[".concat(A._clientId,"] Publishing tracks, id ").concat(s.map(j=>"".concat(j.getTrackId()," ")))),pI("info",A,"publish",s.map(j=>"".concat(j.getTrackId()))),yield A._configDistribute.awaitConfigDistributeComplete(),y&&s.forEach(j=>{const _e=A._configDistribute.getBitrateLimit();j instanceof UR&&_e&&j.setBitrateLimit(_e.uplink)});const $=yield A._publishMutex.lock();try{yield A._publishHighStream(s),w.onSuccess(s.map(j=>j.trackMediaType+":"+j.getTrackLabel()).toString()),h_.info("[".concat(A._clientId,"] Publish success, id ").concat(s.map(j=>"".concat(j.getTrackId()," ")))),pI("info",A,"publish",s.map(j=>"".concat(j.getTrackId())),"success")}catch(j){throw w.onError(j),h_.error("[".concat(A._clientId,"] publish error"),j.toString()),pI("error",A,"publish",void 0,j.toString()),j}finally{$()}})()}unpublish(s){var p=this;return f(function*(){if(!p._joinInfo||void 0===p._uid)throw new U_(D_.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");s?Array.isArray(s)||(s=[s]):s=p._p2pChannel.getAllTracks(!0);const A=w0.reportApiInvoke(p._sessionId,{name:bI.UNPUBLISH,options:s.map(w=>w.getTrackId()),tag:AI.TRACER});h_.info("[".concat(p._clientId,"] Unpublish tracks, tracks ").concat(s.map(w=>"".concat(w.getTrackId()," "))," ")),pI("info",p,"unpublish",s.map(w=>"".concat(w.getTrackId())));const y=yield p._publishMutex.lock();try{const w=yield p._p2pChannel.unpublish(s);w&&(yield p._gateway.unpublish(w,p._uid)),h_.info("[".concat(p._clientId,"] Unpublish success,tracks ").concat(s.map($=>"".concat($.getTrackId())))),pI("info",p,"unpublish",s.map($=>"".concat($.getTrackId())),"success"),A.onSuccess()}catch(w){throw A.onError(w),h_.error("[".concat(p._clientId,"] unpublish error"),w.toString()),pI("error",p,"unpublish",void 0,w.toString()),w}finally{y&&y()}})()}subscribe(s,p){var A=this;return f(function*(){dR(p,"mediaType",["audio","video"]);const y=w0.reportApiInvoke(A._sessionId,{name:bI.SUBSCRIBE,options:[s.uid,p],tag:AI.TRACER});if(!A._joinInfo){const _i=new U_(D_.INVALID_OPERATION,"Can't subscribe stream, not joined");throw y.onError(_i),_i}if("CONNECTED"!==A.connectionState&&"RECONNECTING"!==A.connectionState){const _i=new U_(D_.INVALID_OPERATION,"Can't subscribe stream in ".concat(A.connectionState," state"));throw y.onError(_i),_i}if(!A._users.find(_i=>_i===s)){const _i=new U_(D_.INVALID_REMOTE_USER,"user is not in the channel");throw h_.error("[".concat(A._clientId,"] can not subscribe ").concat(s.uid,", this user is not in the channel")),pI("error",A,"subscribe",s.uid,"this user is not in the channel"),y.onError(_i),_i}if(!s.hasAudio&&!s.hasVideo){const _i=new U_(D_.INVALID_REMOTE_USER,"user is not published");throw h_.error("[".concat(A._clientId,"] can not subscribe ").concat(s.uid,", user is not published")),pI("error",A,"subscribe",s.uid,"this user is not published"),y.onError(_i),_i}if("audio"===p&&(!s.hasAudio||void 0===s._audioSSRC)||"video"===p&&(!s.hasVideo||void 0===s._videoSSRC)){const _i=new U_(D_.REMOTE_USER_IS_NOT_PUBLISHED);throw h_.error("[".concat(A._clientId,"] can not subscribe ").concat(s.uid," with mediaType ").concat(p,", remote track is not published")),pI("error",A,"subscribe",s.uid,"mediaType ".concat(p,", remote track is not published")),y.onError(_i),_i}const w="audio"===p?s._audioSSRC:s._videoSSRC,$="audio"===p?s._audioOrtc:s._videoOrtc,j="video"===p?s._rtxSsrcId:void 0,_e={stream_type:"audio"===p?o1.AUDIO:o1.VIDEO,ssrcId:w},K=yield A._subscribeMutex.lock();h_.info("[".concat(A._clientId,"] subscribe user ").concat(s.uid,", mediaType: ").concat(p)),pI("info",A,"subscribe",{uid:s.uid,mediaType:p});try{if(yield A._p2pChannel.hasRemoteMediaWithLock(s,p))yield A._p2pChannel.unmuteRemote(s,p);else try{VL.markSubscribeStart(A.store.clientId,w),A.store.subscribe(s.uid,p,performance.now()),yield A._p2pChannel.subscribe(s,p,w,j,$);try{yield A._gateway.subscribe(s.uid,_e,!0)}catch(_o){throw yield A._p2pChannel.unsubscribe(s,p),_o}A.store.subscribe(s.uid,p,void 0,performance.now()),A._p2pChannel.reportSubscribeEvent(!0,null,s,p)}catch(_o){throw A._p2pChannel.reportSubscribeEvent(!1,null==_o?void 0:_o.code,s,p),_o}h_.info("[".concat(A._clientId,"] subscribe success user ").concat(s.uid,", mediaType: ").concat(p)),pI("info",A,"subscribe",{uid:s.uid,mediaType:p},"success"),A._defaultStreamFallbackType&&A.setStreamFallbackOption(s.uid,A._defaultStreamFallbackType).catch(_o=>{h_.warning("[".concat(A._clientId,"] auto set fallback failed"),_o),aI("warning",A,"auto set fallback failed, ".concat(_o.toString()))});const _i="audio"===p?s._audioTrack:s._videoTrack;if(!_i){const _o=new U_(D_.UNEXPECTED_ERROR,"can not find remote track in user object");return y.onError(_o),_o.throw()}return y.onSuccess(_i.getTrackId()),_i}catch(_i){throw y.onError(_i),h_.error("[".concat(A._clientId,"] subscribe user ").concat(s.uid," error"),_i),pI("error",A,"subscribe",{uid:s.uid,mediaType:p},_i.toString()),_i}finally{K()}})()}massSubscribe(s){var p=this;return f(function*(){OR(s,"subscribeList");const A=w0.reportApiInvoke(p._sessionId,{name:bI.MASS_SUBSCRIBE,options:s.map(_i=>{let{user:_o,mediaType:_u}=_i;return[null==_o?void 0:_o.uid,_u]}),tag:AI.TRACER});if(!p._joinInfo){const _i=new U_(D_.INVALID_OPERATION,"Can't subscribe stream, not joined");throw A.onError(_i),_i}if("CONNECTED"!==p.connectionState&&"RECONNECTING"!==p.connectionState){const _i=new U_(D_.INVALID_OPERATION,"Can't subscribe stream in ".concat(p.connectionState," state"));throw A.onError(_i),_i}const y=performance.now(),w=new Map,$=yield p._subscribeMutex.lock();h_.info("[".concat(p._clientId,"]start massSubscribe user ").concat(s.map(_i=>{let{user:_o,mediaType:_u}=_i;return"user: ".concat(null==_o?void 0:_o.uid,", mediaType: ").concat(_u)}).join("; "))),pI("info",p,"massSubscribe",s);const j=(s=[...s]).map(_i=>{let{user:_o,mediaType:_u}=_i;return{user:_o,mediaType:_u}}),_e=yield p._p2pChannel.globalLock();try{var K;for(let _o=s.length-1;_o>=0;_o--){const _u=s[_o],{user:ch,mediaType:_f}=_u;if(dR(_f,"mediaType",["audio","video"]),!ch){const u_=new U_(D_.INVALID_PARAMS,"user property does not exist in subscribeList item");throw h_.error("[".concat(p._clientId,"] user property does not exist in subscribeList item")),A.onError(u_),u_}if(!p._users.find(u_=>u_===ch)){const u_=new U_(D_.INVALID_REMOTE_USER,"user is not in the channel");h_.error("[".concat(p._clientId,"] can not massSubscribe ").concat(ch.uid,", this user is not in the channel")),pI("error",p,"massSubscribe",ch.uid,"this user is not in the channel"),j[_o].error=u_,s.splice(_o,1);continue}if("audio"===_f&&(!ch.hasAudio||void 0===ch._audioSSRC)||"video"===_f&&(!ch.hasVideo||void 0===ch._videoSSRC)){const u_=new U_(D_.REMOTE_USER_IS_NOT_PUBLISHED);h_.error("[".concat(p._clientId,"] can not subscribe ").concat(ch.uid," with mediaType ").concat(_f,", remote user is not published")),pI("error",p,"subscribe",ch.uid,"mediaType ".concat(_f,", remote user is not published")),j[_o].error=u_,s.splice(_o,1);continue}const o_=GT.Video|GT.LwoVideo,i_=w.get(ch);if(i_){if("video"===_f?i_&o_:i_&GT.Audio){s.splice(_o,1),h_.warning("repeat massSubscribe user:".concat(ch.uid,", mediaType:").concat(_f," twice"));continue}w.set(ch,i_|("video"===_f?o_:GT.Audio))}else w.set(ch,"video"===_f?o_:GT.Audio)}for(let _o=s.length-1;_o>=0;_o--){const _u=s[_o],{user:ch,mediaType:_f}=_u,o_=GT.Video|GT.LwoVideo;if(p._p2pChannel.hasRemoteMedia(ch,_f)){yield p._p2pChannel.unmuteRemoteNoLock(ch,_f);const i_=w.get(ch);w.set(ch,"video"===_f?i_^o_:i_^GT.Audio),s.splice(_o,1)}}p.store.massSubscribe(s.map(_o=>({userId:_o.user.uid,type:_o.mediaType})),y);const _i=BP(K=Array.from(w.entries())).call(K,(_o,_u)=>{let[ch,_f]=_u;if(0===_f)return _o;const o_={stream_id:ch.uid,stream_type:_f};return _f&GT.Audio&&(o_.audio_ssrc=ch._audioSSRC),_f&GT.Video&&(o_.video_ssrc=ch._videoSSRC),_o.push(o_),_o},[]);try{s.length>0&&(yield p._p2pChannel.massSubscribeNoLock(s.map(_u=>{let{user:ch,mediaType:_f}=_u;return{user:ch,mediaType:_f,ssrcId:_f===o1.VIDEO?ch._videoSSRC:ch._audioSSRC,rtxSsrcId:ch._rtxSsrcId}})));const _o=new Map;if(_i.length>0){const _u=yield p._gateway.subscribeAll(_i,!0);((null==_u?void 0:_u.users)||[]).forEach(ch=>{let{stream_id:_f,video_error_code:o_,audio_error_code:i_,error_code:u_}=ch;(o_||i_||u_)&&_o.set(_f,{video_error_code:o_,audio_error_code:i_,error_code:u_})})}if(Array.from(_o.entries()).length>0){const _u=Array.from(_o.entries()).map(ch=>{let _f,[o_,i_]=ch;return i_.error_code||i_.video_error_code&&i_.audio_error_code?_f=void 0:i_.video_error_code?_f=o1.VIDEO:i_.audio_error_code&&(_f=o1.AUDIO),{user:p.remoteUsers.find(u_=>u_.uid===o_),mediaType:_f}});yield p._p2pChannel.massUnsubscribeNoLock(_u)}for(const _u of j){const ch=_o.get(_u.user.uid);if(ch){const _f=ch.error_code||"audio"===_u.mediaType&&ch.audio_error_code||"video"===_u.mediaType&&ch.video_error_code;if(_f){const o_=Cle(_f);h_.error("user:".concat(_u.user.uid," mediaType:").concat(_u.mediaType," has massSubscribe error ").concat(o_.desc)),_u.error=new U_(D_.SUBSCRIBE_FAILED,"code ".concat(_f,": ").concat(o_.desc))}}_u.error||(_u.track="video"===_u.mediaType?_u.user.videoTrack:_u.user.audioTrack)}return p.store.massSubscribe(j.filter(_u=>!_u.error).map(_u=>({userId:_u.user.uid,type:_u.mediaType})),void 0,performance.now()),j.forEach(_u=>{var ch;w0.subscribe(p.store.sessionId,{succ:!!_u.error,ec:(null===(ch=_u.error)||void 0===ch?void 0:ch.code)||null,video:_u.mediaType===o1.VIDEO,audio:_u.mediaType===o1.AUDIO,peerid:_u.user.uid,subscribeRequestid:_u.mediaType===o1.VIDEO?_u.user._videoSSRC:_u.user._audioSSRC,p2pid:p.store.p2pId,eventElapse:Math.floor(performance.now()-y)},!0)}),A.onSuccess(),h_.info("[".concat(p._clientId,"] massSubscribe success ").concat(s.map(_u=>{let{user:ch,mediaType:_f}=_u;return"user: ".concat(null==ch?void 0:ch.uid,", mediaType: ").concat(_f)}).join("; "))),pI("info",p,"massSubscribe",s,"success"),j}catch(_o){throw yield p._p2pChannel.massUnsubscribeNoLock(s),A.onError(_o),_o}}finally{_e(),$()}})()}unsubscribe(s,p){var A=this;return f(function*(){if(p&&dR(p,"mediaType",["audio","video"]),!A._joinInfo)throw new U_(D_.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const y=w0.reportApiInvoke(A._sessionId,{name:bI.UNSUBSCRIBE,options:[s.uid,p],tag:AI.TRACER});if(!A._users.find(w=>w===s)){const w=new U_(D_.INVALID_REMOTE_USER,"user is not in the channel");throw h_.error("[".concat(A._clientId,"] can not subscribe ").concat(s.uid,", user is not in the channel")),pI("error",A,"unsubscribe",{uid:s.uid,mediaType:p},"user is not in the channel"),y.onError(w),w}h_.info("[".concat(A._clientId,"] unsubscribe uid: ").concat(s.uid,", mediaType: ").concat(p)),pI("info",A,"unsubscribe",{uid:s.uid,mediaType:p});try{const w=yield A._p2pChannel.unsubscribe(s,p);w&&(yield A._gateway.unsubscribe(w,s.uid)),h_.info("[".concat(A._clientId,"] unsubscribe success uid: ").concat(s.uid,", mediaType: ").concat(p)),pI("info",A,"unsubscribe",{uid:s.uid,mediaType:p},"success"),y.onSuccess()}catch(w){if(w.code===D_.DISCONNECT_P2P)return h_.warning("disconnecting p2p, abort unsubscribe request."),void y.onSuccess();throw h_.error("[".concat(A._clientId,"] unsubscribe user ").concat(s.uid," error"),w.toString()),pI("error",A,"unsubscribe",{uid:s.uid,mediaType:p},w.toString()),y.onError(w),w}})()}massUnsubscribe(s){var p=this;return f(function*(){OR(s,"unsubscribeList");const A=w0.reportApiInvoke(p._sessionId,{name:bI.UNSUBSCRIBE,options:s.map(w=>{let{user:$,mediaType:j}=w;return{uid:null==$?void 0:$.uid,mediaType:j}}),tag:AI.TRACER});if(!p._joinInfo){const w=new U_(D_.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw A.onError(w),w}h_.info("[".concat(p._clientId,"] start massUnsubscribe ").concat(s.map(w=>{let{user:$,mediaType:j}=w;return"user: ".concat(null==$?void 0:$.uid,", mediaType: ").concat(j,";")}).join())),pI("info",p,"massUnsubscribe",s),s=[...s];const y=new Map;for(let w=s.length-1;w>=0;w--){const{user:$,mediaType:j}=s[w];if(!$){const K=new U_(D_.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw h_.error("[".concat(p._clientId,"] user property does not exist in unsubscribeList item")),A.onError(K),K}if(dR(j,"mediaType",["video","audio",void 0]),!p._users.find(K=>K===$)){h_.warning("[".concat(p._clientId,"] can not subscribe ").concat($.uid,", user is not in the channel")),pI("error",p,"unsubscribe",{uid:$.uid,mediaType:j},"user is not in the channel"),s.splice(w,1);continue}const _e=GT.Video|GT.LwoVideo;if(y.has($)){const K=y.get($);let _i;switch(j){case"video":_i=K&_e;break;case"audio":_i=K&GT.Audio;break;default:_i=K&(GT.Audio|_e)}if(_i){h_.warning("repeat massUnsubscribe user:".concat($.uid,",mediaType:").concat(j," twice.")),s.splice(w,1);continue}j?"audio"===j?y.set($,K|GT.Audio):"video"===j&&y.set($,K|_e):y.set($,K|GT.Audio|_e)}else j?"audio"===j?y.set($,GT.Audio):"video"===j&&y.set($,_e):y.set($,GT.Audio|_e)}try{const w=yield p._p2pChannel.massUnsubscribe(s);w&&(yield p._gateway.massUnsubscribe(w)),h_.info("[".concat(p._clientId,"] massUnsubscribe success ").concat(s.map($=>{let{user:j,mediaType:_e}=$;return"user: ".concat(null==j?void 0:j.uid,", mediaType: ").concat(_e,";")}).join())),pI("info",p,"massUnsubscribe",s,"success"),A.onSuccess()}catch(w){if(w.code===D_.DISCONNECT_P2P)return h_.warning("disconnecting p2p, abort unsubscribe request."),void A.onSuccess();throw h_.error("[".concat(p._clientId,"] massUnsubscribe error"),w.toString()),pI("error",p,"massUnsubscribe",s,w.toString()),A.onError(w),w}})()}setLowStreamParameter(s){!function(y){if(!y)throw new U_(D_.INVALID_PARAMS);lT(y.width)||$1(y.width,"streamParameter.width"),lT(y.height)||$1(y.height,"streamParameter.height"),lT(y.framerate)||$1(y.framerate,"streamParameter.framerate"),lT(y.bitrate)||$1(y.bitrate,"streamParameter.bitrate")}(s);const p=w0.reportApiInvoke(this._sessionId,{name:bI.SET_LOW_STREAM_PARAMETER,options:[s],tag:AI.TRACER});(!s.width&&s.height||s.width&&!s.height)&&(h_.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),aI("warning",this,"The width and height parameters take effect only when both are set")),h_.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(s)),pI("info",this,"setLowStreamParameter",s);const A=this._configDistribute.getLowStreamConfigDistribute();A&&A.bitrate&&s.bitrate&&A.bitrate<s.bitrate&&(s.bitrate=A.bitrate),this._lowStreamParameter=s,p.onSuccess()}enableDualStream(){var s=this;return f(function*(){const p=w0.reportApiInvoke(s._sessionId,{name:bI.ENABLE_DUAL_STREAM,options:[],tag:AI.TRACER});if(!jS().supportDualStream){w0.streamSwitch(s._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const A=new U_(D_.NOT_SUPPORTED,"Your browser is not support dual stream");throw p.onError(A),A}if(s._isDualStreamEnabled){const A=new U_(D_.INVALID_OPERATION,"Dual stream is already enabled");throw p.onError(A),A}if(s._p2pChannel.canPublishLowStream())try{yield s._publishLowStream()}catch(A){throw w0.streamSwitch(s._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),p.onError(A),A}s._isDualStreamEnabled=!0,w0.streamSwitch(s._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),h_.info("[".concat(s._clientId,"] enable dual stream")),pI("info",s,"enableDualStream"),p.onSuccess()})()}disableDualStream(){var s=this;return f(function*(){if(!s._isDualStreamEnabled)return;if(!s._joinInfo)throw new U_(D_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const p=w0.reportApiInvoke(s._sessionId,{name:bI.DISABLE_DUAL_STREAM,options:[],tag:AI.TRACER});if(s._p2pChannel.getLocalMedia(eI.LocalVideoLowTrack))try{const A=yield s._p2pChannel.unpublishLowStream();A&&(yield s._gateway.unpublish(A,s._joinInfo.stringUid||s._joinInfo.uid))}catch(A){throw w0.streamSwitch(s._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),p.onError(A),A}s._isDualStreamEnabled=!1,w0.streamSwitch(s._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),h_.info("[".concat(s._clientId,"] disable dual stream")),pI("info",s,"disableDualStream"),p.onSuccess()})()}setClientRole(s,p){var A=this;return f(function*(){var w;dR(w=s,"role",["audience","host"]),p&&Bne(p);const y=w0.reportApiInvoke(A._sessionId,{name:bI.SET_CLIENT_ROLE,options:[s,p],tag:AI.TRACER});if("rtc"===A._mode){h_.warning("[".concat(A._clientId,"]rtc mode can not use setClientRole")),pI("warning",A,"setClientRole",s,"rtc mode can not use setClientRole");const w=new U_(D_.INVALID_OPERATION,"rtc mode can not use setClientRole");return y.onError(w),w.throw()}if(p&&p.level&&"host"===s){const w=new U_(D_.INVALID_OPERATION,"host mode can not set audience latency level");return y.onError(w),w.throw()}try{if("audience"===s&&A._p2pChannel.hasLocalMedia()){const w=new U_(D_.INVALID_OPERATION,"can not set client role to audience when publishing stream");return y.onError(w),w.throw()}yield A._gateway.setClientRole(s,p),h_.info("[".concat(A._clientId,"] set client role to ").concat(s,", level: ").concat(p&&p.level)),pI("info",A,"setClientRole",{role:s,level:p&&p.level}),y.onSuccess()}catch(w){throw y.onError(w),w}})()}setProxyServer(s,p){if(rT(s,"proxyServer"),!p){if("DISCONNECTED"!==this.connectionState)throw new U_(D_.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new U_(D_.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=s,w0.setProxyServer(this._proxyServer),h_.setProxyServer(this._proxyServer),B7(this._proxyServer),h_.info("[".concat(this._clientId,"] Set proxy server ").concat(p?"by initialize call":""," success.")),pI("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(s,p){if(Array.isArray(s)||(s=[s]),!p){if("DISCONNECTED"!==this.connectionState)throw new U_(D_.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new U_(D_.INVALID_OPERATION,"You have already set the proxy")}if(MK(s))return this._turnServer={servers:s,mode:"original-manual"},h_.info("[".concat(this._clientId,"] Set original turnserver ").concat(p?"by initialize call":""," success: ").concat(s.map(A=>A.urls).join(","),".")),void pI("info",this,"setOriginalTurnServer",[...arguments],"success");s.forEach(A=>sce(A)),this._turnServer={servers:s,mode:"manual"},h_.info("[".concat(this._clientId,"] Set turnserver ").concat(p?"by initialize call":""," success.")),pI("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(s){const p=w0.reportApiInvoke(this._sessionId,{name:bI.START_PROXY_SERVER,options:[],tag:AI.TRACER});if("DISCONNECTED"!==this.connectionState){const w=new U_(D_.INVALID_OPERATION,"Start proxy server before join channel");throw p.onError(w),w}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const w=new U_(D_.INVALID_OPERATION,"You have already set the proxy");throw p.onError(w),w}const A=[1,2,3,4,5];let y;switch(void 0===s&&(s=1),s){case 1:y="normal";break;case 2:y="443only";break;case 3:y="proxy3";break;case 4:y="proxy4";break;case 5:y="proxy5";break;default:{const w=new U_(D_.INVALID_PARAMS,"proxy server mode must be ".concat(A.join("|")));throw p.onError(w),w}}this._cloudProxyServerMode=y,this.store.cloudProxyServerMode=y,h_.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),pI("info",this,"startProxyServer",this._cloudProxyServerMode),p.onSuccess()}stopProxyServer(){const s=w0.reportApiInvoke(this._sessionId,{name:bI.STOP_PROXY_SERVER,options:[],tag:AI.TRACER});if("DISCONNECTED"!==this.connectionState)throw new U_(D_.INVALID_OPERATION,"Stop proxy server after leave channel");w0.setProxyServer(),h_.setProxyServer(),B7(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",h_.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),pI("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},s.onSuccess()}setLocalAccessPoints(s,p){if(OR(s,"serverList"),rT(p,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new U_(D_.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const A=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;s=s.map(y=>A.test(y)?"".concat(y.replace(/\./g,"-"),".").concat(p):y),this._useLocalAccessPoint=!0,QO("WEBCS_DOMAIN",s),QO("WEBCS_DOMAIN_BACKUP_LIST",s),QO("GATEWAY_DOMAINS",[p]),QO("EVENT_REPORT_DOMAIN",s[0]),QO("EVENT_REPORT_BACKUP_DOMAIN",s[1]||s[0]),QO("LOG_UPLOAD_SERVER","".concat(s[0],":6444")),h_.info("set local access point success"),pI("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(s){var p=this;return f(function*(){if(dR(s,"streamType",[0,1]),p._remoteDefaultVideoStreamType=s,p._joinInfo)try{yield p._gateway.setDefaultRemoteVideoStreamType(s),p._joinInfo.defaultVideoStream=p._remoteDefaultVideoStreamType}catch(A){throw h_.error("[".concat(p._clientId,"] set default remote video stream type error"),A.toString()),A}else h_.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(s))})()}setRemoteVideoStreamType(s,p){var A=this;return f(function*(){dR(p,"streamType",[0,1]);const y=w0.reportApiInvoke(A._sessionId,{name:bI.SET_REMOTE_VIDEO_STREAM_TYPE,options:[s,p],tag:AI.TRACER});try{yield A._gateway.setRemoteVideoStreamType(s,p),setTimeout(()=>{const w=A._users.find($=>$.uid===s);w&&w.videoTrack&&w.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(w){throw y.onError(w),h_.error("[".concat(A._clientId,"] set remote video stream type error"),w.toString()),pI("error",A,"setRemoteVideoStreamType",void 0,w.toString()),w}h_.info("[".concat(A._clientId,"] set remote ").concat(s," video stream type to ").concat(p)),pI("info",A,"setRemoteVideoStreamType",{uid:s,streamType:p}),A._remoteStreamTypeCacheMap.set(s,p),y.onSuccess()})()}setStreamFallbackOption(s,p){var A=this;return f(function*(){dR(p,"fallbackType",[0,1,2]);const y=w0.reportApiInvoke(A._sessionId,{name:bI.SET_STREAM_FALLBACK_OPTION,options:["too long to show",p],tag:AI.TRACER});try{yield A._gateway.setStreamFallbackOption(s,p)}catch(w){throw y.onError(w),h_.error("[".concat(A._clientId,"] set stream fallback option"),w.toString()),pI("error",A,"setStreamFallbackOption",void 0,w.toString()),w}h_.info("[".concat(A._clientId,"] set remote ").concat(s," stream fallback type to ").concat(p)),pI("info",A,"setStreamFallbackOption",{uid:s,fallbackType:p}),A._streamFallbackTypeCacheMap.set(s,p),y.onSuccess()})()}setEncryptionConfig(s,p,A){if(dR(s,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),rT(p,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(s)){if(!A||!(A instanceof Uint8Array&&32===A.length))throw new U_(D_.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(A)throw new U_(D_.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(p)||(h_.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),aI("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=s,this._encryptionSecret=p,A&&(this._encryptionSalt=Vre(A))}renewToken(s){var p=this;return f(function*(){rT(s,"token",1,2047);const A=w0.reportApiInvoke(p._sessionId,{name:bI.RENEW_TOKEN,options:[s],tag:AI.TRACER});if(!p._key||!p._joinInfo){const $=new U_(D_.INVALID_OPERATION,"renewToken should not be called before user join");return A.onError($),$.throw()}const y=p._key;p._key=s,p._joinInfo&&(p._joinInfo.token=s);const w=yield p._renewTokenMutex.lock();try{if(S0("USE_NEW_TOKEN")){h_.debug("start renew token with ticket from unilbs"),pI("debug",p,"renewToken","unilbs");const $=yield function mye(s,p,A){return Gle.apply(this,arguments)}(p._joinInfo,p._axiosCancelSource.token,p._config.httpRetryConfig||US);h_.debug("[".concat(p._clientId,"] get ticket from unilbs success")),pI("debug",p,"renewToken","unilbs","success"),yield p._gateway.renewToken({token:s,ticket:$})}else h_.debug("start renew token without ticket"),pI("debug",p,"renewToken"),yield p._gateway.renewToken({token:s});h_.debug("[".concat(p._clientId,"] renewToken success")),pI("debug",p,"renewToken",void 0,"success"),A.onSuccess()}catch($){throw p._key=y,p._joinInfo.token=y,A.onError($),h_.error("[".concat(p._clientId,"] renewToken failed"),$.toString()),pI("error",p,"renewToken",void 0,$.toString()),$}finally{w()}})()}enableAudioVolumeIndicator(){const s=w0.reportApiInvoke(this._sessionId,{name:bI.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:AI.TRACER});if(this._audioVolumeIndicationInterval)return h_.warning("you have already enabled audio volume indicator!"),pI("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),s.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const p=this._p2pChannel.getAudioLevels();this.emit(u1.VOLUME_INDICATOR,p)},S0("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),s.onSuccess()}getRTCStats(){const s=this._statsCollector.getRTCStats(),p=this._gateway.getInChannelInfo();return s.Duration=Math.round(p.duration/1e3),s}startLiveStreaming(s,p){const A=w0.reportApiInvoke(this._sessionId,{name:bI.START_LIVE_STREAMING,options:[s,p],tag:AI.TRACER});if(!p){if("h264"!==this._codec){const w=new U_(D_.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return A.onError(w),sI.reject(w)}if(!this._p2pChannel.hasLocalMedia()){const w=new U_(D_.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return A.onError(w),sI.reject(w)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(s)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(s)){const w=new U_(D_.LIVE_STREAMING_TASK_CONFLICT);return A.onError(w),sI.reject(w)}const y=p?PT.TRANSCODE:PT.RAW;return this._createLiveStreamingClient(y).startLiveStreamingTask(s,y).then(()=>A.onSuccess()).catch(w=>{throw A.onError(w),w})}setLiveTranscoding(s){const p=w0.reportApiInvoke(this._sessionId,{name:bI.SET_LIVE_TRANSCODING,options:[s],tag:AI.TRACER});return this._createLiveStreamingClient(PT.TRANSCODE).setTranscodingConfig(s).then(()=>p.onSuccess()).catch(A=>{throw p.onError(A),A})}stopLiveStreaming(s){const p=w0.reportApiInvoke(this._sessionId,{name:bI.STOP_LIVE_STREAMING,options:[s],tag:AI.TRACER}),A=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(y=>y&&y.hasUrl(s));if(!A.length){const y=new U_(D_.INVALID_PARAMS,"can not find live streaming url to stop");return p.onError(y),sI.reject(y)}return sI.all(A.map(y=>y&&y.stopLiveStreamingTask(s))).then(()=>p.onSuccess()).catch(y=>{throw p.onError(y),y})}addInjectStreamUrl(s,p){var A=this;return f(function*(){const y=w0.reportApiInvoke(A._sessionId,{name:bI.ADD_INJECT_STREAM_URL,options:[s,p],tag:AI.TRACER});try{if(!A._joinInfo)throw new U_(D_.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const w=A._createLiveStreamingClient(PT.INJECT);w.setInjectStreamConfig(p,0),yield w.startLiveStreamingTask(s,PT.INJECT)}catch(w){throw y.onError(w),w}y.onSuccess()})()}removeInjectStreamUrl(){var s=this;return f(function*(){const p=w0.reportApiInvoke(s._sessionId,{name:bI.REMOVE_INJECT_STREAM_URL,options:[],tag:AI.TRACER});try{var A;const y=s._createLiveStreamingClient(PT.INJECT),w=Array.from(x4(A=y.streamingTasks).call(A)).find($=>$.mode===PT.INJECT);if(!s._joinInfo||!w)throw new U_(D_.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield y.stopLiveStreamingTask(w.url)}catch(y){throw p.onError(y),y}p.onSuccess()})()}startChannelMediaRelay(s){var p=this;return f(function*(){const A=w0.reportApiInvoke(p._sessionId,{name:bI.START_CHANNEL_MEDIA_RELAY,options:[s],tag:AI.TRACER});try{TY(s),yield p._createChannelMediaRelayClient().startChannelMediaRelay(s)}catch(y){return A.onError(y),y.throw()}A.onSuccess()})()}updateChannelMediaRelay(s){var p=this;return f(function*(){const A=w0.reportApiInvoke(p._sessionId,{name:bI.UPDATE_CHANNEL_MEDIA_RELAY,options:[s],tag:AI.TRACER});try{TY(s),yield p._createChannelMediaRelayClient().updateChannelMediaRelay(s)}catch(y){return A.onError(y),y.throw()}A.onSuccess()})()}stopChannelMediaRelay(){var s=this;return f(function*(){const p=w0.reportApiInvoke(s._sessionId,{name:bI.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:AI.TRACER});try{yield s._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(A){return p.onError(A),A.throw()}p.onSuccess()})()}sendStreamMessage(s){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new U_(D_.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof s&&(s=(new TextEncoder).encode(s)),new Blob([s]).size>1024)throw new U_(D_.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(r1.DATA_STREAM,{payload:Vre(s)},!p)}sendMetadata(s){if(!this._joinInfo)throw new U_(D_.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([s]).size>1024)throw new U_(D_.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(r1.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Vre(s)})}sendCustomReportMessage(s){var p=this;return f(function*(){Array.isArray(s)||(s=[s]),s.forEach(nce);const A=w0.reportApiInvoke(p._sessionId,{name:bI.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(s)],tag:AI.TRACER});if(!p._joinInfo){const y=new U_(D_.INVALID_OPERATION,"can not send custom report, not joined");return A.onError(y),y.throw()}yield w0.sendCustomReportMessage(p._joinInfo.sid,s),A.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(s,p){var A=this;return f(function*(){dR(p.spatialLayer,"spatialLayer",[0,1,2,3]),dR(p.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield A._gateway.pickSVCLayer(s,p)}catch(y){throw h_.error("[".concat(A._clientId,"] pick SVC layer failed"),y.toString()),T0("error",A,"pickSVCLayer",p,y.toString()),y}})()}_reset(){h_.debug("[".concat(this._clientId,"] reset client")),T0("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=GU.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(s=>{s._audioTrack&&s._audioTrack._destroy(),s._videoTrack&&s._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new MR("client-publish"),this._subscribeMutex=new MR("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(s,p){const A=s||Tge();h_.debug(s?"[".concat(this._clientId,"] new Session ").concat(A):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(A)),T0("debug",this,"_startSession",{newSid:A,sid:this._sessionId}),this._sessionId=A,this.store.sessionId=A,p?w0.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:p.channel,appid:p.appId,mode:this._mode}):this._joinInfo?w0.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&w0.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=A),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=A)}_publishHighStream(s){var p=this;return f(function*(){if(!p._joinInfo||void 0===p._uid)throw new U_(D_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==p.connectionState&&"RECONNECTING"!==p.connectionState)throw new U_(D_.INVALID_OPERATION,"can not publish stream in ".concat(p.connectionState," state"));if("auto"===p._turnServer.mode&&S0("FORCE_TURN")&&!S0("TURN_ENABLE_TCP")&&!S0("TURN_ENABLE_UDP"))throw new U_(D_.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");h_.debug("[".concat(p._clientId,"] publish high stream")),T0("debug",p,"_publishHighStream");try{const y=yield p._p2pChannel.publish(s,p._isDualStreamEnabled,p._lowStreamParameter),w=(yield y.next()).value;if(w){var A;let $;try{$=yield p._gateway.publish(p._uid,w,!0)}catch(j){if(j.code!==D_.DISCONNECT_P2P)throw y.throw(j),j}yield y.next((null===(A=$)||void 0===A?void 0:A.ortc)||[])}p._p2pChannel.reportPublishEvent(!0,null);for(const $ of s)$ instanceof UR&&$._encoderConfig&&p._gateway.setVideoProfile($._encoderConfig),!$.muted&&$.enabled||(yield p._p2pChannel.muteLocalTrack($))}catch(y){if(p._p2pChannel.reportPublishEvent(!1,null==y?void 0:y.code,s),(null==y?void 0:y.code)===D_.WS_ABORT)return;throw y}})()}_publishLowStream(){var s=this;return f(function*(){if(!s._joinInfo||void 0===s._uid)throw new U_(D_.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==s.connectionState&&"RECONNECTING"!==s.connectionState)throw new U_(D_.INVALID_OPERATION,"can not publish stream in ".concat(s.connectionState," state"));h_.debug("[".concat(s._clientId,"] publish low stream")),T0("debug",s,"_publishLowStream");const p=s._configDistribute.getLowStreamConfigDistribute();p&&p.bitrate&&(s._lowStreamParameter||(s._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),s._lowStreamParameter&&s._lowStreamParameter.bitrate&&p.bitrate<s._lowStreamParameter.bitrate&&(s._lowStreamParameter.bitrate=p.bitrate));try{const y=yield s._p2pChannel.publishLowStream(s._lowStreamParameter),w=(yield y.next()).value;if(w){var A;let $;try{$=yield s._gateway.publish(s._uid,w,!0)}catch(j){if(j.code!==D_.DISCONNECT_P2P)throw y.throw(j),j}y.next((null===(A=$)||void 0===A?void 0:A.ortc)||[]),s._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(y){if(s._p2pChannel.reportPublishEvent(!1,null==y?void 0:y.code,void 0,!0),(null==y?void 0:y.code)===D_.WS_ABORT)return;throw y}})()}_createLiveStreamingClient(s){if(!this._joinInfo||!this._appId)return new U_(D_.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const p=()=>new Sme(this._joinInfo,this._config.websocketRetryConfig||US,this._config.httpRetryConfig||US),A=y=>{y.onLiveStreamError=(w,$)=>{w0.reportApiInvoke(this._sessionId,{name:bI.ON_LIVE_STREAM_ERROR,options:[w,$],tag:AI.TRACER}).onSuccess(),this.emit(u1.LIVE_STREAMING_ERROR,w,$)},y.onLiveStreamWarning=(w,$)=>{w0.reportApiInvoke(this._sessionId,{name:bI.ON_LIVE_STREAM_WARNING,options:[w,$],tag:AI.TRACER}).onSuccess(),this.emit(u1.LIVE_STREAMING_WARNING,w,$)},y.on(W7.REQUEST_WORKER_MANAGER_LIST,(w,$,j)=>{if(!this._joinInfo)return j(new U_(D_.INVALID_OPERATION,"can not find join info to get worker manager"));Vle(w,this._joinInfo,this._axiosCancelSource.token,US).then($).catch(j)})};switch(s){case PT.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=p(),A(this._liveRawStreamingClient)),this._liveRawStreamingClient;case PT.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=p(),A(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case PT.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=p(),this._injectStreamingClient.on(W7.REQUEST_WORKER_MANAGER_LIST,(y,w,$)=>{if(!this._joinInfo)return $(new U_(D_.INVALID_OPERATION,"can not find join info to get worker manager"));Vle(y,this._joinInfo,this._axiosCancelSource.token,US).then(w).catch($)}),this._injectStreamingClient.onInjectStatusChange=(y,w,$)=>{this.emit(u1.INJECT_STREAM_STATUS,y,w,$)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new Aye(this._joinInfo,this._clientId,this._config.websocketRetryConfig||US,this._config.httpRetryConfig||US),this._channelMediaRelayClient.on("state",s=>{s===iO.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(u1.CHANNEL_MEDIA_RELAY_STATE,s)}),this._channelMediaRelayClient.on("event",s=>{this.emit(u1.CHANNEL_MEDIA_RELAY_EVENT,s)})),this._channelMediaRelayClient):new U_(D_.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var s=this;this._gateway.on(JT.DISCONNECT_P2P,f(function*(){yield s._p2pChannel.disconnectForReconnect()})),this._gateway.on(JT.CONNECTION_STATE_CHANGE,(p,A,y)=>{var w;if(y===YT.FALLBACK)return;const $=()=>{this.emit(u1.CONNECTION_STATE_CHANGE,p,A,y)};if(w0.reportApiInvoke(this._sessionId||(null===(w=this._gateway.joinInfo)||void 0===w?void 0:w.sid)||null,{name:bI.CONNECTION_STATE_CHANGE,options:[p,A,y],tag:AI.TRACER}).onSuccess(JSON.stringify({cur:p,prev:A,reason:y})),h_.info("[".concat(this._clientId,"] connection state change: ").concat(A," -> ").concat(p)),vT("info",this,"connection-state-change","".concat(A," -> ").concat(p)),"DISCONNECTED"===p)return this._reset(),void $();if("RECONNECTING"===p)this._users.forEach(_e=>{_e._trust_in_room_=!1,_e._trust_audio_enabled_state_=!1,_e._trust_video_enabled_state_=!1,_e._trust_audio_mute_state_=!1,_e._trust_video_mute_state_=!1,_e._trust_stream_added_state_=!1}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===p){var j;this._streamFallbackTypeCacheMap.forEach((_e,K)=>{this._gateway.setStreamFallbackOption(K,_e).catch(_i=>{h_.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),_i),aI("warning",this,"auto set stream fallback option failed, ".concat(_i.toString()))})}),this._remoteStreamTypeCacheMap.forEach((_e,K)=>{this._gateway.setRemoteVideoStreamType(K,_e).catch(_i=>{h_.warning("[".concat(this._clientId,"] auto set remote stream type failed"),_i),aI("warning",this,"auto set remote stream type failed, ".concat(_i.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(j=this._joinInfo)||void 0===j?void 0:j.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{h_.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(_e=>{h_.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(_e))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(_e=>!_e._trust_in_room_).forEach(_e=>{h_.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(_e.uid)),aI("debug",this,"user offline timeout, emit user offline ".concat(_e.uid)),this._handleUserOffline({uid:_e.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(_e=>{_e._trust_audio_mute_state_||(h_.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(_e.uid)),aI("debug",this,"auto dispatch audio unmute event ".concat(_e.uid)),this._handleMuteStream(_e.uid,"audio",!1)),_e._trust_video_mute_state_||(h_.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(_e.uid)),aI("debug",this,"auto dispatch video unmute event ".concat(_e.uid)),this._handleMuteStream(_e.uid,"video",!1)),_e._trust_audio_enabled_state_||(h_.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(_e.uid)),aI("debug",this,"auto dispatch enable local audio ".concat(_e.uid)),this._handleSetStreamLocalEnable("audio",_e.uid,!0)),!_e._trust_video_enabled_state_&&_e._video_enabled_&&(h_.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(_e.uid)),aI("debug",this,"auto dispatch enable local video ".concat(_e.uid)),this._handleSetStreamLocalEnable("video",_e.uid,!0)),_e._trust_stream_added_state_||(h_.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(_e.uid)),aI("debug",this,"auto dispatch stream remove ".concat(_e.uid)),this._handleRemoveStream({uid:_e.uid,uint_id:_e._uintid}))}))},1e3)}$()}),this._gateway.on(JT.REQUEST_NEW_GATEWAY_LIST,(p,A)=>{if(!this._joinInfo)return A(new U_(D_.UNEXPECTED_ERROR,"can not recover, no join info"));CY(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||US,this.store).then(y=>{this._joinInfo&&(this._joinInfo.apResponse=y.gatewayInfo.res,this._joinInfo.gatewayAddrs=y.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=y.gatewayInfo.uni_lbs_ip),p(y.gatewayInfo.gatewayAddrs.map(w=>{if(this._joinInfo&&this._joinInfo.proxyServer){const $=w.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat($[0],"&p=").concat($[1])}return"wss://".concat(w.address)}))}).catch(A)}),this._gateway.on(JT.NETWORK_QUALITY,p=>{"normal"===this._networkQualitySensitivity&&this.emit(u1.NETWORK_QUALITY,p)}),this._gateway.on(JT.STREAM_TYPE_CHANGE,(p,A)=>{this.emit(u1.STREAM_TYPE_CHANGED,p,A),w0.reportApiInvoke(this._sessionId,{name:bI.STREAM_TYPE_CHANGE,options:[p,A],tag:AI.TRACER}).onSuccess(JSON.stringify({uid:p,streamType:A}))}),this._gateway.on(JT.IS_P2P_DISCONNECTED,p=>{this._p2pChannel.isP2PDisconnected()?p(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?p(!1):p(!0)}),this._gateway.on(JT.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(JT.REQUEST_P2P_CONNECTION_PARAMS,function(){var p=f(function*(A,y,w){try{y(yield s._p2pChannel.startP2PConnection(A))}catch($){w($)}});return function(A,y,w){return p.apply(this,arguments)}}()),this._gateway.on(JT.JOIN_RESPONSE,(p,A,y)=>{const{dtlsParameters:w,iceParameters:$,candidates:j,rtpCapabilities:_e,setup:K,cname:_i}=e0e(p.ortc,A,y);this._p2pChannel.connect($,w,j,_e,K,_i)}),this._gateway.signal.on(D1.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(D1.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(D1.ON_ADD_AUDIO_STREAM,p=>this._handleAddAudioOrVideoStream("audio",p.uid,p.ssrcId,p.cname,p.uint_id,p.ortc)),this._gateway.signal.on(D1.ON_ADD_VIDEO_STREAM,p=>this._handleAddAudioOrVideoStream("video",p.uid,p.ssrcId,p.cname,p.uint_id,p.ortc,p.rtxSsrcId)),this._gateway.signal.on(D1.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(D1.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(D1.MUTE_AUDIO,p=>(vT("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:p.uid}),this._handleMuteStream(p.uid,"audio",!0))),this._gateway.signal.on(D1.UNMUTE_AUDIO,p=>(vT("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:p.uid}),this._handleMuteStream(p.uid,"audio",!1))),this._gateway.signal.on(D1.MUTE_VIDEO,p=>(vT("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:p.uid}),this._handleMuteStream(p.uid,"video",!0))),this._gateway.signal.on(D1.UNMUTE_VIDEO,p=>(vT("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:p.uid}),this._handleMuteStream(p.uid,"video",!1))),this._gateway.signal.on(D1.RECEIVE_METADATA,p=>{const A=jre(p.metadata);this.emit(u1.RECEIVE_METADATA,p.uid,A)}),this._gateway.signal.on(D1.ON_DATA_STREAM,p=>{p.seq&&delete p.seq,p.payload=jre(p.payload),this.emit(u1.STREAM_MESSAGE,p.uid,p.payload),this.onStreamMessage&&this.onStreamMessage(p)}),this._gateway.signal.on(D1.ON_CRYPT_ERROR,()=>{BM(()=>{h_.warning("[".concat(this._clientId,"] on crypt error")),vT("warning",this,"crypt_error"),this.emit(u1.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(D1.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(D1.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{h_.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),vT("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(u1.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(D1.ON_STREAM_FALLBACK_UPDATE,p=>{h_.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(p.stream_id,", attr: ").concat(p.stream_type)),vT("debug",this,"stream_fallback_update",{peerId:p.stream_id,attr:p.stream_type}),this.emit(u1.STREAM_FALLBACK,p.stream_id,1===p.stream_type?"fallback":"recover")}),this._gateway.signal.on(D1.ON_PUBLISH_STREAM,p=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:p.proxy})),h_.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(p))),vT("info",this,"publish_stream",p))}),this._gateway.signal.on(D1.ENABLE_LOCAL_VIDEO,p=>{this._handleSetStreamLocalEnable("video",p.uid,!0)}),this._gateway.signal.on(D1.DISABLE_LOCAL_VIDEO,p=>{this._handleSetStreamLocalEnable("video",p.uid,!1)}),this._gateway.signal.on(n1.REQUEST_TIMEOUT,(p,A)=>{if(this._joinInfo)switch(p){case r1.PUBLISH:{if(!A)return;const _e=(A=A).ortc;if(_e){var y,w,$,j;const K=_e.some(_u=>{let{stream_type:ch}=_u;return ch===gT.Audio}),_i=_e.some(_u=>{let{stream_type:ch}=_u;return ch!==gT.Audio}),_o=_e.some(_u=>{let{stream_type:ch}=_u;return ch===gT.Screen||ch===gT.ScreenLow});"offer"===A.state&&w0.publish(this._joinInfo.sid,{eventElapse:VL.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:D_.TIMEOUT,audio:K,video:_i,p2pid:A.p2p_id,publishRequestid:this.store.pubId,screenshare:_o,audioName:K?null===(y=_e.find(_u=>{let{stream_type:ch}=_u;return ch===gT.Audio}))||void 0===y||null===(w=y.ssrcs[0])||void 0===w?void 0:w.ssrcId.toString():void 0,videoName:_i?null===($=_e.find(_u=>{let{stream_type:ch}=_u;return ch!==gT.Audio}))||void 0===$||null===(j=$.ssrcs[0])||void 0===j?void 0:j.ssrcId.toString():void 0})}break}case r1.SUBSCRIBE:(A=A)&&w0.subscribe(this._joinInfo.sid,{succ:!1,ec:D_.TIMEOUT,audio:A.stream_type===o1.AUDIO,video:A.stream_type===o1.VIDEO,peerid:A.stream_id,subscribeRequestid:A.ssrcId,p2pid:this.store.p2pId,eventElapse:VL.measureFromSubscribeStart(this.store.clientId,A.ssrcId)})}}),this._gateway.signal.on(D1.ON_P2P_OK,p=>{}),this._gateway.signal.on(D1.ON_PUBLISHED_USER_LIST,p=>{if(null==p||!p.users)return;const A=[],y=[];for(const w of p.users){let $=this._users.find(_o=>_o.uid===w.stream_id);$?$._trust_in_room_=!0:($=new wye(w.stream_id,w.stream_id),this._users.push($),0===this.getListeners(u1.PUBLISHED_USER_LIST).length&&(h_.debug("[".concat(this._clientId,"] user online"),w.stream_id),BL("info",this,"user-joined",{uid:w.stream_id}),this.emit(u1.USER_JOINED,$)));const j=GT.Audio&w.stream_type,_e=(GT.Video|GT.LwoVideo)&w.stream_type,K=j&&$.hasAudio,_i=_e&&$.hasVideo;w.stream_type!==GT.Nothing&&($._trust_stream_added_state_=!0),_e&&($._video_added_=!0,$._videoSSRC=w.video_ssrc),j&&($._audio_added_=!0,$._audioSSRC=w.audio_ssrc),j&&!K&&0===this.getListeners(u1.PUBLISHED_USER_LIST).length&&(h_.info("[".concat(this._clientId,"] remote user ").concat($.uid," published audio")),aI("info",this,"remote user ".concat($.uid," published audio")),this.emit(u1.USER_PUBLISHED,$,"audio")),_e&&!_i&&0===this.getListeners(u1.PUBLISHED_USER_LIST).length&&(h_.info("[".concat(this._clientId,"] remote user ").concat($.uid," published video")),aI("info",this,"remote user ".concat($.uid," published video")),this.emit(u1.USER_PUBLISHED,$,"video")),(j&&!K||_e&&!_i)&&A.push($),_e&&this._p2pChannel.hasPendingRemoteMedia($,"video")&&y.push({user:$,mediaType:"video"}),j&&this._p2pChannel.hasPendingRemoteMedia($,"audio")&&y.push({user:$,mediaType:"audio"})}y.length>0&&(h_.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(y.map(w=>"user: ".concat(w.user.uid,", mediaType: ").concat(w.mediaType)).join("; ")," ")),this.massSubscribe(y).catch(w=>{h_.error("[".concat(this._clientId,"] mass resubscribe error"),w.toString())})),this.getListeners(u1.PUBLISHED_USER_LIST).length>0?(h_.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(A.map(w=>w.uid).join(", "))),this.emit(u1.PUBLISHED_USER_LIST,A)):h_.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(A.map(w=>w.uid).join(", ")))})}_handleP2PChannelEvents(){var s=this;this._p2pChannel.on(h1.RequestMuteLocal,function(){var p=f(function*(A,y,w){if(s._joinInfo)try{yield s._gateway.muteLocal(A,s._joinInfo.stringUid||s._joinInfo.uid),y()}catch($){$.code===D_.DISCONNECT_P2P?y():w($)}else y()});return function(A,y,w){return p.apply(this,arguments)}}()),this._p2pChannel.on(h1.RequestUnmuteLocal,function(){var p=f(function*(A,y,w){if(s._joinInfo)try{yield s._gateway.unmuteLocal(A,s._joinInfo.stringUid||s._joinInfo.uid),y()}catch($){$.code===D_.DISCONNECT_P2P?y():w($)}else y()});return function(A,y,w){return p.apply(this,arguments)}}()),this._p2pChannel.on(h1.RequestRePublish,(p,A,y)=>{this.publish(p,!1).then(A).catch(y)}),this._p2pChannel.on(h1.RequestReSubscribe,function(){var p=f(function*(A,y,w){try{for(const{user:$,kind:j}of A)j===o1.VIDEO?yield s.subscribe($,"video"):yield s.subscribe($,"audio");y()}catch($){w($)}});return function(A,y,w){return p.apply(this,arguments)}}()),this._p2pChannel.on(h1.RequestUploadStats,(p,A)=>{this._gateway.uploadStats(p,A)}),this._p2pChannel.on(h1.MediaReconnectStart,p=>{this.emit(u1.MEDIA_RECONNECT_START,p)}),this._p2pChannel.on(h1.MediaReconnectEnd,p=>{this.emit(u1.MEDIA_RECONNECT_END,p)}),this._p2pChannel.on(h1.NeedSignalRTT,p=>{p(this._gateway.getSignalRTT())}),this._p2pChannel.on(h1.RequestRestartICE,f(function*(){const p=yield s._p2pChannel.reEstablish();if(p){const{restartICEResponse:A,gatewayIP:y,gatewayPort:w}=yield s._gateway.restartICE({iceParameters:p.iceParameters}),{candidates:$,iceParameters:j}=function(_e,K,_i){const _o=_e.ice;let _u;return void 0!==K&&void 0!==_i?(_u=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:K,port:_i.toString(),type:"host",extension:{}}],h_.debug("Using remote candidate from AP ".concat(K,":").concat(_i)),aI("debug",[],"Using remote candidate from AP ".concat(K,":").concat(_i))):_u=_o.candidates.map(ch=>({foundation:ch.foundation,componentId:"1",transport:ch.protocol,priority:ch.priority.toString(),connectionAddress:ch.ip,port:ch.port.toString(),type:ch.type,extension:{}})),{candidates:_u,iceParameters:{iceUfrag:_o.iceUfrag,icePwd:_o.icePwd}}}(A,y,w);yield p.restartICE(j,$)}})),this._p2pChannel.on(h1.RequestReconnect,f(function*(){s._gateway.reconnect()})),this._p2pChannel.on(h1.RequestReconnectPC,f(function*(){var p;const{iceParameters:A,dtlsParameters:y,rtpCapabilities:w}=yield s._p2pChannel.startP2PConnection({turnServer:null===(p=s._joinInfo)||void 0===p?void 0:p.turnServer}),{gatewayEstablishParams:$,gatewayIP:j,gatewayPort:_e}=yield s._gateway.reconnectPC({iceParameters:A,dtlsParameters:y,rtpCapabilities:w}),{dtlsParameters:K,iceParameters:_i,candidates:_o,rtpCapabilities:_u,setup:ch,cname:_f}=e0e($,j,_e);yield s._p2pChannel.connect(_i,K,_o,_u,ch,_f),yield s._p2pChannel.republish(),yield s._p2pChannel.reSubscribe()})),this._p2pChannel.on(h1.RequestUnpublishForReconnectPC,function(){var p=f(function*(A,y,w){s._joinInfo&&void 0!==s._uid?(yield s._gateway.unpublish(A,s._uid),y()):w()});return function(A,y,w){return p.apply(this,arguments)}}()),this._p2pChannel.on(h1.P2PLost,()=>{this.emit(u1.P2P_LOST,this.store.uid)}),this._p2pChannel.on(h1.UpdateVideoEncoder,p=>{p._encoderConfig&&this._gateway.setVideoProfile(p._encoderConfig)}),this._p2pChannel.on(h1.ConnectionTypeChange,p=>{this.emit(u1.IS_USING_CLOUD_PROXY,p)})}getKeyMetrics(){return this.store.keyMetrics}getJoinChannelServiceRecords(){return h_.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}}).prototype,"setProxyServer",[M0e],Object.getOwnPropertyDescriptor(hO.prototype,"setProxyServer"),hO.prototype),cI(hO.prototype,"setTurnServer",[B0e],Object.getOwnPropertyDescriptor(hO.prototype,"setTurnServer"),hO.prototype),cI(hO.prototype,"setLocalAccessPoints",[U0e],Object.getOwnPropertyDescriptor(hO.prototype,"setLocalAccessPoints"),hO.prototype),cI(hO.prototype,"setRemoteDefaultVideoStreamType",[F0e],Object.getOwnPropertyDescriptor(hO.prototype,"setRemoteDefaultVideoStreamType"),hO.prototype),cI(hO.prototype,"setEncryptionConfig",[j0e],Object.getOwnPropertyDescriptor(hO.prototype,"setEncryptionConfig"),hO.prototype),cI(hO.prototype,"pickSVCLayer",[V0e],Object.getOwnPropertyDescriptor(hO.prototype,"pickSVCLayer"),hO.prototype),cI(hO.prototype,"getJoinChannelServiceRecords",[G0e],Object.getOwnPropertyDescriptor(hO.prototype,"getJoinChannelServiceRecords"),hO.prototype),Q0e=hO))||Q0e);class Cbe extends Cre{set currentState(p){p!==this._currentState&&(this._currentState=p,this.emit(kT.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(p){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),a_(this,"audioBuffer",void 0),a_(this,"sourceNode",void 0),a_(this,"startPlayTime",0),a_(this,"startPlayOffset",0),a_(this,"pausePlayTime",0),a_(this,"options",void 0),a_(this,"currentLoopCount",0),a_(this,"_currentState","stopped"),this.audioBuffer=p,this.options=A,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(p){"stopped"===this.currentState?(this.options=p,this.startPlayOffset=this.options.startPlayTime||0):h_.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(p){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=p,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=p))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(p){}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const p=this.context.createBufferSource();return p.buffer=this.audioBuffer,p.loop=!!this.options.loop,p.connect(this.outputNode),p}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const q0e=new Map;function $ye(){return $ye=f(function*(s,p){let A=null;if("string"==typeof s){const w=q0e.get(s);if(w)return h_.debug("use cached audio resource: ",s),w;try{A=(yield wM(()=>GU.get(s,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch($){throw new U_(D_.FETCH_AUDIO_FILE_FAILED,$.toString())}}else A=yield new sI(($,j)=>{const _e=new FileReader;_e.onload=K=>{K.target?$(K.target.result):j(new U_(D_.READ_LOCAL_AUDIO_FILE_ERROR))},_e.onerror=()=>{j(new U_(D_.READ_LOCAL_AUDIO_FILE_ERROR))},_e.readAsArrayBuffer(s)});const y=yield function(w){const $=iG();return new sI((j,_e)=>{$.decodeAudioData(w,K=>{j(K)},K=>{_e(new U_(D_.DECODE_AUDIO_FILE_FAILED,K.toString()))})})}(A);return"string"==typeof s&&p&&q0e.set(s,y),y}),$ye.apply(this,arguments)}function W0e(s,p){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);p&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(s,w).enumerable})),A.push.apply(A,y)}return A}function tAe(s){for(var p=1;p<arguments.length;p++){var A=null!=arguments[p]?arguments[p]:{};p%2?W0e(Object(A),!0).forEach(function(y){a_(s,y,A[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):W0e(Object(A)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(A,y))})}return s}function Zye(s,p,A,y){A.optimizationMode&&(y&&y.width&&y.height?(A.encoderConfig=tAe(tAe({},y),{},{bitrateMin:y.bitrateMin,bitrateMax:y.bitrateMax}),"motion"!==A.optimizationMode&&"detail"!==A.optimizationMode||(p.contentHint=A.optimizationMode,p.contentHint===A.optimizationMode?(h_.debug("[".concat(s,"] set content hint to"),A.optimizationMode),pI("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[s,A,y])):(h_.debug("[".concat(s,"] set content hint failed")),pI("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[s,A,y],"failed")))):(h_.warning("[".concat(s,"] can not apply optimization mode bitrate config, no encoderConfig")),aI("warning",["AgoraRTC"],"[".concat(s,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const Tbe=J1().name;function Sbe(s,p,A,y){let w,$=0,j=null;return new sI((_e,K)=>{setTimeout(()=>{w&&(w(),_e($))},p),w=i2(()=>{!function(){$>y&&w&&(w(),_e($));const _i=A.getContext("2d");if(!_i){const ch=new U_(D_.UNEXPECTED_ERROR,"can not get canvas 2d context.");return h_.error(ch.toString()),void K(ch)}_i.drawImage(s,0,0,160,120);const _o=_i.getImageData(0,0,A.width,A.height),_u=Math.floor(_o.data.length/3);if(j){for(let ch=0;ch<_u;ch+=3)if(_o.data[ch]!==j[ch])return $+=1,void(j=_o.data);j=_o.data}else j=_o.data}()},30)})}class rde{constructor(p,A){a_(this,"id",0),a_(this,"element",void 0),a_(this,"peerPair",void 0),a_(this,"context",void 0),a_(this,"audioPlayerElement",void 0),a_(this,"audioTrack",void 0),rde.count+=1,this.id=rde.count,this.element=p,this.context=A}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=p=>{const A=document.createElement("audio");A.srcObject=new MediaStream([p.track]),A.play(),this.audioPlayerElement=A}}switchSdp(){var p=this;return f(function*(){if(!p.peerPair)return;const A=function(){var w=f(function*($,j){const _e="offer"===j?yield $.createOffer():yield $.createAnswer();return yield $.setLocalDescription(_e),"complete"===$.iceGatheringState?$.localDescription:new sI(K=>{$.onicegatheringstatechange=()=>{"complete"===$.iceGatheringState&&K($.localDescription)}})});return function(j,_e){return w.apply(this,arguments)}}(),y=function(){var w=f(function*($,j){return yield $.setRemoteDescription(j)});return function(j,_e){return w.apply(this,arguments)}}();try{const w=yield A(p.peerPair[0],"offer");yield y(p.peerPair[1],w);const $=yield A(p.peerPair[1],"answer");yield y(p.peerPair[0],$)}catch(w){throw new U_(D_.LOCAL_AEC_ERROR,w.toString()).print()}})()}getTracksFromMediaElement(p){var A=this;return f(function*(){if(A.audioTrack)return A.audioTrack;let y;try{p instanceof HTMLVideoElement&&(p.captureStream?p.captureStream():p.mozCaptureStream()),y=A.context.createMediaStreamDestination(),A.context.createMediaElementSource(p).connect(y)}catch($){throw new U_(D_.LOCAL_AEC_ERROR,$.toString()).print()}if(!y)throw new U_(D_.LOCAL_AEC_ERROR,"no dest node when local aec").print();const w=y.stream.getAudioTracks()[0];return A.audioTrack=w,w})()}getElement(){return this.element}startEchoCancellation(){var p=this;return f(function*(){p.context.resume(),p.peerPair&&p.close(),p.initPeers();const A=p.element,y=yield p.getTracksFromMediaElement(A);p.peerPair&&p.peerPair[0].addTrack(y),yield p.switchSdp()})()}close(){h_.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(p=>{p.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var K0e,nAe;a_(rde,"count",0);const Rbe=window.AudioContext||window.webkitAudioContext,Obe=new(K0e=LM({report:w0}),cI((nAe=class{constructor(){a_(this,"units",[]),a_(this,"context",void 0)}processExternalMediaAEC(s){if(!this._doesEnvironmentNeedAEC())return h_.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Rbe);let p=this.units.find(A=>A&&A.getElement()===s);return p||(p=new rde(s,this.context),this.units.push(p)),p.startEchoCancellation(),h_.debug("start processing local audio echo cancellation, id is",p.id),p.id}_doesEnvironmentNeedAEC(){return J1().name!==V1.SAFARI}}).prototype,"processExternalMediaAEC",[K0e],Object.getOwnPropertyDescriptor(nAe.prototype,"processExternalMediaAEC"),nAe.prototype),nAe);QO("PROCESS_ID","process-".concat(pS(8,""),"-").concat(pS(4,""),"-").concat(pS(4,""),"-").concat(pS(4,""),"-").concat(pS(12,""))),function(){const s=J1();NR.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),NR.getStreamFromExtension=s.name===V1.CHROME&&Number(s.version)>34,NR.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const p=new RTCPeerConnection;let A=!1;try{p.addTransceiver("audio"),A=!0}catch(y){}return p.close(),A}(),NR.supportMinBitrate=s.name===V1.CHROME||s.name===V1.EDGE,NR.supportSetRtpSenderParameters=function(){const p=J1();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!p6()||!(!H2()&&!EK())||p.name===V1.FIREFOX&&Number(p.version)>=64)}(),s.name===V1.SAFARI&&(NR.supportDualStream=Number(s.version)>=14),NR.webAudioMediaStreamDest=function(){const p=J1();return!(p.name===V1.SAFARI&&Number(p.version)<12)}(),NR.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,NR.supportWebGL="undefined"!=typeof WebGLRenderingContext,NR.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,p6()||(NR.webAudioWithAEC=!0),NR.supportShareAudio=function(){const p=J1();return(p.os===RR.WIN_10||p.os===RR.WIN_81||p.os===RR.WIN_7||p.os===RR.LINUX||p.os===RR.MAC_OS)&&p.name===V1.CHROME&&Number(p.version)>=74}(),NR.supportDualStreamEncoding=function(){const p=J1();return"Safari"===p.name&&Number(p.version)>=14}(),h_.info("browser compatibility",JSON.stringify(NR),JSON.stringify(s)),T0("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:NR,browserInfo:s})}(),function(){let s;try{s=window.localStorage.getItem("websdk_ng_global_parameter")}catch(p){return void h_.error("Error loading sdk config",p.message)}if(s)try{const p=JSON.parse(window.atob(s)),A=Date.now();h_.debug("Loading global parameters from cache",p),T0("debug",[],"loadConfigFromLocalStorage",p),Object.keys(p).forEach(y=>{if(Object.prototype.hasOwnProperty.call(AN,y)){const{value:w,expires:$}=p[y];if($&&$<=A)return;Nne[y]=w,AN[y]=w}})}catch(p){h_.error("Error loading mutableParamsCache: ".concat(s),p.message)}}();const M9={__CLIENT_LIST__:nO,__TRACK_LIST__:V7,VERSION:GO,BUILD:U7,setParameter:QO,getParameter:S0,getSupportedCodec:function(){var s=f(function*(){let p={audio:[],video:[]};try{let A=new RTCPeerConnection;A.addTransceiver("video",{direction:"recvonly"}),A.addTransceiver("audio",{direction:"recvonly"});const y=(yield A.createOffer()).sdp;if(!y)return p;A.close(),A=null,p=function(w){const $={video:[],audio:[]};return w.match(/ VP8/i)&&$.video.push("VP8"),w.match(/ VP9/i)&&$.video.push("VP9"),w.match(/ AV1/i)&&$.video.push("AV1"),w.match(/ H264/i)&&$.video.push("H264"),w.match(/ opus/i)&&$.audio.push("OPUS"),w.match(/ PCMU/i)&&$.audio.push("PCMU"),w.match(/ PCMA/i)&&$.audio.push("PCMA"),w.match(/ G722/i)&&$.audio.push("G722"),$}(y)}catch(A){throw new U_(D_.CREATE_OFFER_FAILED,A.toString&&A.toString()).print()}return p});return function(){return s.apply(this,arguments)}}(),checkSystemRequirements:function(){const s=w0.reportApiInvoke(null,{name:bI.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:AI.TRACER});let p=!1;try{const $=window.RTCPeerConnection,j=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,_e=window.WebSocket;p=!!($&&j&&_e)}catch($){return h_.error("check system requirement failed: ",$),!1}let A=!1;const y=J1();y.name===V1.CHROME&&Number(y.version)>=58&&(!function n_e(){return"WebKit"===f6.engine.name}()||function Whe(){const s=J1();if(EK()){if(s.os===RR.MAC_OS)return!0;if(s.os===RR.IOS){const p=f6.os.version&&f6.os.version.split(".");if(p&&14===Number(p[0])&&p[1]&&Number(p[1])>=3||p&&Number(p[0])>14)return!0}}return!1}())&&(A=!0),y.name===V1.FIREFOX&&Number(y.version)>=56&&(A=!0),y.name===V1.OPERA&&Number(y.version)>=45&&(A=!0),y.name===V1.SAFARI&&Number(y.version)>=11&&(A=!0),(Yhe()||J1().name===V1.QQ)&&(A=!0),h_.debug("checkSystemRequirements, api:",p,"browser",A);const w=p&&A;return s.onSuccess(w),w},getDevices:function(s){return eP.enumerateDevices(!0,!0,s)},getMicrophones:function(s){return eP.getRecordingDevices(s)},getCameras:function(s){return eP.getCamerasDevices(s)},getElectronScreenSources:hge,getPlaybackDevices:function(s){return eP.getSpeakers(s)},createClient:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const p=w0.reportApiInvoke(null,{name:bI.CREATE_CLIENT,options:[s],tag:AI.TRACER});try{nZ(s)}catch(A){throw p.onError(A),A}return void 0===s.audioCodec&&(s.audioCodec="opus"),p.onSuccess(),new bbe(nde(nde({forceWaitGatewayResponse:!0},s),{},{role:"rtc"===s.mode?"host":s.role}))},createCameraVideoTrack:function(){var s=f(function*(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_CAM_VIDEO_TRACK,options:[tAe({},p)]}),y=Wle(p),w=pS(8,"track-cam-");let $=null;h_.info("start create camera video track with config",JSON.stringify(p),"trackId",w),pI("info",["AgoraRTC"],"createCameraVideoTrack",p);try{$=(yield MM({video:y},w)).getVideoTracks()[0]||null}catch(_e){throw A.onError(_e),_e}if(!$){const _e=new U_(D_.UNEXPECTED_ERROR,"can not find track in media stream");return A.onError(_e),_e.throw()}p.optimizationMode&&Zye(w,$,p,p.encoderConfig&&OK(p.encoderConfig));const j=new _Ee($,p,y,p.scalabiltyMode?j7(p.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},p.optimizationMode,w);return A.onSuccess(j.getTrackId()),h_.info("create camera video success, trackId:",w),pI("info",["AgoraRTC"],"createCameraVideoTrack",void 0,w),j});return function(){return s.apply(this,arguments)}}(),createCustomVideoTrack:function(s){const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_CUSTOM_VIDEO_TRACK,options:[s]}),A=new UR(s.mediaStreamTrack,{bitrateMax:s.bitrateMax,bitrateMin:s.bitrateMin},s.scalabiltyMode?j7(s.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},s.optimizationMode);return p.onSuccess(A.getTrackId()),h_.info("create custom video track success with config",s,"trackId",A.getTrackId()),pI("info",["AgoraRTC"],"createCustomVideoTrack",s,A.getTrackId()),A},createScreenVideoTrack:function(){var s=f(function*(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const y=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_SCREEN_VIDEO_TRACK,options:[tAe({},p),A]});p.encoderConfig?"string"==typeof p.encoderConfig||p.encoderConfig.width&&p.encoderConfig.height||(p.encoderConfig.width={max:1920},p.encoderConfig.height={max:1080}):p.encoderConfig="1080p_2";const w=Cye(p),$=pS(8,"track-scr");let j=null,_e=null;const K=jS();if(!K.supportShareAudio&&"enable"===A){const _u=new U_(D_.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return y.onError(_u),_u.throw()}h_.info("start create screen video track with config",p,"withAudio",A,"trackId",$),pI("info",["AgoraRTC"],"createScreenVideoTrack",[p,A]);try{const _u=yield MM({screen:w,screenAudio:"auto"===A?K.supportShareAudio:"enable"===A},$);j=_u.getVideoTracks()[0]||null,_e=_u.getAudioTracks()[0]||null}catch(_u){throw y.onError(_u),_u}if(!j){const _u=new U_(D_.UNEXPECTED_ERROR,"can not find track in media stream");return y.onError(_u),_u.throw()}if(!_e&&"enable"===A){j&&j.stop();const _u=new U_(D_.SHARE_AUDIO_NOT_ALLOWED);return y.onError(_u),_u.throw()}p.optimizationMode||(p.optimizationMode="detail"),p.optimizationMode&&(Zye($,j,p,p.encoderConfig&&bO(p.encoderConfig)),p.encoderConfig&&"string"!=typeof p.encoderConfig&&(p.encoderConfig.bitrateMin=p.encoderConfig.bitrateMax));const _i=new UR(j,p.encoderConfig?bO(p.encoderConfig):{},p.scalabiltyMode?j7(p.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},p.optimizationMode,$,[FS.SCREEN_TRACK]);if(!_e)return y.onSuccess(_i.getTrackId()),h_.info("create screen video track success","video:",_i.getTrackId()),pI("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:_i.getTrackId()}),_i;const _o=new pR(_e);return y.onSuccess([_i.getTrackId(),_o.getTrackId()]),h_.info("create screen video track success","video:",_i.getTrackId(),"audio:",_o.getTrackId()),pI("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:_i.getTrackId(),audioTrack:_o.getTrackId()}),[_i,_o]});return function(){return s.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var s=f(function*(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const y=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_MIC_AND_CAM_TRACKS,options:[p,A]}),w=Wle(A),$=jme(p),j=pS(8,"track-mic-"),_e=pS(8,"track-cam-");let K=null,_i=null;h_.info("start create camera video track(".concat(_e,") and microphone audio track(").concat(j,") with config, audio: ").concat(JSON.stringify(p),", video: ").concat(JSON.stringify(A))),pI("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:A,audioConfig:p});try{const ch=yield MM({audio:$,video:w},"".concat(j,"-").concat(_e));K=ch.getAudioTracks()[0],_i=ch.getVideoTracks()[0]}catch(ch){throw y.onError(ch),ch}if(!K||!_i){const ch=new U_(D_.UNEXPECTED_ERROR,"can not find tracks in media stream");return y.onError(ch),ch.throw()}A.optimizationMode&&Zye(_e,_i,A,A.encoderConfig&&OK(A.encoderConfig));const _o=new HZ(K,p,$,j),_u=new _Ee(_i,A,w,A.scalabiltyMode?j7(A.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},A.optimizationMode,_e);return y.onSuccess([_o.getTrackId(),_u.getTrackId()]),h_.info("create camera video track(".concat(_e,") and microphone audio track(").concat(j,") success")),pI("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:_e,audioTrackId:j}),[_o,_u]});return function(){return s.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var s=f(function*(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_MIC_AUDIO_TRACK,options:[p]}),y=jme(p),w=pS(8,"track-mic-");let $=null;h_.info("start create microphone audio track with config",JSON.stringify(p),"trackId",w),pI("info",["AgoraRTC"],"createMicrophoneAudioTrack",p);try{$=(yield MM({audio:y},w)).getAudioTracks()[0]||null}catch(_e){throw A.onError(_e),_e}if(!$){const _e=new U_(D_.UNEXPECTED_ERROR,"can not find track in media stream");return A.onError(_e),_e.throw()}const j=new HZ($,p,y,w);return A.onSuccess(j.getTrackId()),h_.info("create microphone audio track success, trackId:",w),pI("info",["AgoraRTC"],"createMicrophoneAudioTrack",p,w),j});return function(){return s.apply(this,arguments)}}(),createCustomAudioTrack:function(s){const p=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_CUSTOM_AUDIO_TRACK,options:[s]}),A=new pR(s.mediaStreamTrack,s.encoderConfig?QU(s.encoderConfig):{});return h_.info("create custom audio track success with config",s,"trackId",A.getTrackId()),pI("info",["AgoraRTC"],"createCustomAudioTrack",s,A.getTrackId()),p.onSuccess(A.getTrackId()),A},createBufferSourceAudioTrack:function(){var s=f(function*(p){const A=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CREATE_BUFFER_AUDIO_TRACK,options:[p]}),y=pS(8,"track-buf-");h_.info("start create buffer source audio track with config",JSON.stringify(p),"trackId",y),pI("info",[],"createBufferSourceAudioTrack",p);const w=p.source;if(!(p.source instanceof AudioBuffer))try{p.source=yield function wbe(s,p){return $ye.apply(this,arguments)}(p.source,p.cacheOnlineFile)}catch(_e){return A.onError(_e),_e.throw()}const $=new Cbe(p.source),j=new Sve(w,$,p.encoderConfig?QU(p.encoderConfig):{},y);return h_.info("create buffer source audio track success, trackId:",y),pI("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,y),A.onSuccess(j.getTrackId()),j});return function(A){return s.apply(this,arguments)}}(),setLogLevel:function(s){S0("USE_NEW_LOG")?function(p){p=Math.min(Math.max(0,p),4),Ife=p}(s):h_.setLogLevel(s)},enableLogUpload:function(){S0("USE_NEW_LOG")?QO("UPLOAD_LOG",!0):h_.enableLogUpload()},disableLogUpload:function(){S0("USE_NEW_LOG")?QO("UPLOAD_LOG",!1):h_.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new wY},checkAudioTrackIsActive:function(){var s=f(function*(p){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const y=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[A]});if(!(p instanceof pR||p instanceof Xme)){const _i=new U_(D_.INVALID_TRACK,"the parameter is not a audio track");return y.onError(_i),_i.throw()}A&&A<1e3&&(A=1e3);const w=p instanceof pR?p.getTrackLabel():"remote_track",$=p.getVolumeLevel();let j=$,_e=$;const K=Date.now();return new sI(_i=>{const _o=setInterval(()=>{const _u=p.getVolumeLevel();j=_u>j?_u:j,_e=_u<_e?_u:_e;const ch=j-_e>1e-4,_f=Date.now()-K;if(ch||_f>A){clearInterval(_o);const o_=ch,i_={duration:_f,deviceLabel:w,maxVolumeLevel:j,result:o_};h_.info("[track-".concat(p.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(i_))),y.onSuccess(i_),_i(o_)}},200)})});return function(A){return s.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var s=f(function*(p){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const y=w0.reportApiInvoke(null,{tag:AI.TRACER,name:bI.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[A]});if(!(p instanceof UR||p instanceof Zme)){const _f=new U_(D_.INVALID_TRACK,"the parameter is not a video track");return y.onError(_f),_f.throw()}const w=4;A&&A<1e3&&(A=1e3);const $=p instanceof UR?p.getTrackLabel():"remote_track",j=p.getMediaStreamTrack(!0),_e=document.createElement("video");_e.style.width="1px",_e.style.height="1px",_e.setAttribute("muted",""),_e.muted=!0,_e.setAttribute("playsinline",""),_e.controls=!1,(H2()||EK())&&(_e.style.opacity="0.01",_e.style.position="fixed",_e.style.left="0",_e.style.top="0",document.body.appendChild(_e)),_e.srcObject=new MediaStream([j]),_e.play();const K=document.createElement("canvas");K.width=160,K.height=120;let _i=0,_o=0;try{const _f=Date.now();_i=yield Sbe(_e,A,K,w),_o=Date.now()-_f}catch(_f){throw y.onError(_f),_f}Tbe===V1.SAFARI&&(_e.pause(),_e.remove()),_e.srcObject=null;const _u=_i>w,ch={duration:_o,changedPicNum:_i,deviceLabel:$,result:_u};return h_.info("[track-".concat(p.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(ch))),y.onSuccess(ch),_u});return function(A){return s.apply(this,arguments)}}(),setArea:function(s){const p=w0.reportApiInvoke(null,{name:bI.SET_AREA,options:s,tag:AI.TRACER});try{let A=[];if("string"==typeof s&&(A=[s]),Array.isArray(s)&&(s.forEach(w=>{if(!Gne.includes(w))throw new U_(D_.INVALID_PARAMS,"invalid area code")}),A=s),"[object Object]"===Object.prototype.toString.call(s)){const{areaCode:w,excludedArea:$}=s;if(!w)throw new U_(D_.INVALID_PARAMS,"area code is needed");let j=w;"string"==typeof w&&(j=[w]),A=$?function(s,p){let A=[];if(s.includes(a1.GLOBAL)){const $=[a1.GLOBAL,a1.OVERSEA],j=Object.keys(Qne);if(p===a1.GLOBAL)throw new U_(D_.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(p===a1.CHINA)A=[a1.OVERSEA];else if(yG.includes(p)){const _e=gie[a1.GLOBAL][p]||[],K=[...$,p,..._e];A=j.filter(_i=>!K.includes(_i))}else if(function(_e){let K=!1;return yG.forEach(_i=>{gie[a1.GLOBAL][_i].includes(_e)&&(K=!0)}),K}(p)){const _e=function(_i){let _o;return yG.forEach(_u=>{gie[a1.GLOBAL][_u].includes(_i)&&(_o=_u)}),_o}(p),K=[...$,_e,p];A=j.filter(_i=>!K.includes(_i))}else A=s;A=function(_e){const K=[];return mie.forEach(_i=>{_e.includes(_i)&&K.push(_i)}),K.concat(_e.filter(_i=>!mie.includes(_i)))}(A)}else A=s;return A}(j,$):j}QO("AREAS",A);const y=(w=>{const $={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return w.map(j=>{const _e=Qne[j],K=Object.keys(_e);K&&K.map(_i=>{"CODE"!==_i&&($[_i]=$[_i].concat(_e[_i]))})}),$})(A);Object.keys(y).map(w=>{QO(w,"LOG_UPLOAD_SERVER"===w||"EVENT_REPORT_DOMAIN"===w||"EVENT_REPORT_BACKUP_DOMAIN"===w||"PROXY_SERVER_TYPE3"===w?y[w][0]:y[w])}),h_.debug("set area success:",A.join(","))}catch(A){throw p.onError(A),A}p.onSuccess()},loadModule:function(){var s=f(function*(p,A){if(h_.debug("loadModule: ".concat(p.name,", loadOption: ").concat(JSON.stringify(A))),!p.moduleInit)throw h_.debug("Invalid Plugin"),new U_(D_.INVALID_PLUGIN,"invalid plugin");try{nY.installPlugin(p),yield p.moduleInit({logger:h_,report:w0,pluginCenter:nY,getParameter:S0},A)}catch(y){throw new U_(D_.UNEXPECTED_ERROR,"unexpected error in loadModule",y)}});return function(A,y){return s.apply(this,arguments)}}(),audioElementPlayCenter:wO,processExternalMediaAEC:function(s){Obe.processExternalMediaAEC(s)},registerExtensions:function(s){s.forEach(p=>{const A=p;A.__registered__=!0,A.logger.hookLog=h_.extLog,A.reporter.hookApiInvoke=w0.extApiInvoke,A.parameters&&Object.keys(A.parameters).forEach(y=>{A.parameters[y]=S0(y)})})},ChannelMediaRelayError:OM,ChannelMediaRelayEvent:RM,ChannelMediaRelayState:iO,RemoteStreamFallbackType:A6,RemoteStreamType:iZ,ConnectionDisconnectedReason:YT,AudienceLatencyLevelType:rce,AREAS:a1};return Object.defineProperties(M9,{onAudioAutoplayFailed:{get:()=>_x.onAudioAutoplayFailed,set:s=>{_x.onAudioAutoplayFailed=s}},onAutoplayFailed:{get:()=>_x.onAutoplayFailed,set:s=>{_x.onAutoplayFailed=s}}}),eP.on(UL.CAMERA_DEVICE_CHANGED,s=>{h_.info("camera device changed",JSON.stringify(s)),M9.onCameraChanged&&M9.onCameraChanged(s)}),eP.on(UL.RECORDING_DEVICE_CHANGED,s=>{h_.info("microphone device changed",JSON.stringify(s)),M9.onMicrophoneChanged&&M9.onMicrophoneChanged(s)}),eP.on(UL.PLAYOUT_DEVICE_CHANGED,s=>{h_.debug("playout device changed",JSON.stringify(s)),M9.onPlaybackDeviceChanged&&M9.onPlaybackDeviceChanged(s)}),wO.onAutoplayFailed=()=>{h_.info("detect audio element autoplay failed"),_x.onAudioAutoplayFailed&&_x.onAudioAutoplayFailed()},m1.on("autoplay-failed",()=>{h_.info("detect webaudio autoplay failed"),_x.onAudioAutoplayFailed&&_x.onAudioAutoplayFailed()}),window&&(window.__ARTC__=M9),M9}()},3528:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var l;module=__webpack_require__.nmd(module),l=function(){function oe(h,l){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);l&&(f=f.filter(function(k){return Object.getOwnPropertyDescriptor(h,k).enumerable})),g.push.apply(g,f)}return g}function wa(h){for(var l=1;l<arguments.length;l++){var g=null!=arguments[l]?arguments[l]:{};l%2?oe(Object(g),!0).forEach(function(f){m(h,f,g[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):oe(Object(g)).forEach(function(f){Object.defineProperty(h,f,Object.getOwnPropertyDescriptor(g,f))})}return h}function V(h){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(h)}function um(h,l,g,f,k,q,_r){try{var _s=h[q](_r),_a=_s.value}catch(_l){return void g(_l)}_s.done?l(_a):Promise.resolve(_a).then(f,k)}function J(h){return function(){var l=this,g=arguments;return new Promise(function(f,k){function q(_a){um(_s,f,k,q,_r,"next",_a)}function _r(_a){um(_s,f,k,q,_r,"throw",_a)}var _s=h.apply(l,g);q(void 0)})}}function X(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function vm(h,l){for(var g=0;g<l.length;g++){var f=l[g];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}function Ia(h,l,g){return l&&vm(h.prototype,l),g&&vm(h,g),h}function m(h,l,g){return l in h?Object.defineProperty(h,l,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[l]=g,h}function ja(h,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),l&&wf(h,l)}function Fd(h){return(Fd=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(h)}function wf(h,l){return(wf=Object.setPrototypeOf||function(g,f){return g.__proto__=f,g})(h,l)}function wm(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function wi(h,l,g){return(wi=wm()?Reflect.construct:function(f,k,q){var _r=[null];return _r.push.apply(_r,k),f=new(Function.bind.apply(f,_r)),q&&wf(f,q.prototype),f}).apply(null,arguments)}function xf(h){var l="function"==typeof Map?new Map:void 0;return(xf=function(g){function f(){return wi(g,arguments,Fd(this).constructor)}if(null===g||-1===Function.toString.call(g).indexOf("[native code]"))return g;if("function"!=typeof g)throw new TypeError("Super expression must either be null or a function");if(void 0!==l){if(l.has(g))return l.get(g);l.set(g,f)}return f.prototype=Object.create(g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),wf(f,g)})(h)}function yf(h,l){if(null==h)return{};if(null==h)var g={};else{g={};var f,k=Object.keys(h);for(f=0;f<k.length;f++){var q=k[f];0<=l.indexOf(q)||(g[q]=h[q])}}if(Object.getOwnPropertySymbols)for(f=Object.getOwnPropertySymbols(h),q=0;q<f.length;q++)0<=l.indexOf(k=f[q])||Object.prototype.propertyIsEnumerable.call(h,k)&&(g[k]=h[k]);return g}function n(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function ka(h){var l=wm();return function(){var g=Fd(h);if(l){var f=Fd(this).constructor;g=Reflect.construct(g,arguments,f)}else g=g.apply(this,arguments);return!g||"object"!=typeof g&&"function"!=typeof g?n(this):g}}function xi(h,l,g){return(xi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(f,k,q){for(;!Object.prototype.hasOwnProperty.call(f,k)&&null!==(f=Fd(f)););if(f)return(k=Object.getOwnPropertyDescriptor(f,k)).get?k.get.call(q):k.value})(h,l,g||h)}function ua(h,l){var g=Array.isArray(h)?h:void 0;if(!g)if(null==(g=h&&("undefined"!=typeof Symbol&&h[Symbol.iterator]||h["@@iterator"])))g=void 0;else{var f,k=[],q=!0,_r=!1;try{for(g=g.call(h);!(q=(f=g.next()).done)&&(k.push(f.value),!l||k.length!==l);q=!0);}catch(_a){_r=!0;var _s=_a}finally{try{q||null==g.return||g.return()}finally{if(_r)throw _s}}g=k}if(!(h=g||xm(h,l)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return h}function G(h){var l=Array.isArray(h)?yi(h):void 0;if(l||(l="undefined"!=typeof Symbol&&null!=h[Symbol.iterator]||null!=h["@@iterator"]?Array.from(h):void 0),!(h=l||xm(h)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return h}function xm(h,l){if(h){if("string"==typeof h)return yi(h,l);var g=Object.prototype.toString.call(h).slice(8,-1);if("Object"===g&&h.constructor&&(g=h.constructor.name),"Map"===g||"Set"===g)return Array.from(h);if("Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return yi(h,l)}}function yi(h,l){(null==l||l>h.length)&&(l=h.length);for(var g=0,f=Array(l);g<l;g++)f[g]=h[g];return f}function la(h,l,g,f,k){var q={};return Object.keys(f).forEach(function(_r){q[_r]=f[_r]}),q.enumerable=!!q.enumerable,q.configurable=!!q.configurable,("value"in q||q.initializer)&&(q.writable=!0),q=g.slice().reverse().reduce(function(_r,_s){return _s(h,l,_r)||_r},q),k&&void 0!==q.initializer&&(q.value=q.initializer?q.initializer.call(k):void 0,q.initializer=void 0),void 0===q.initializer&&(Object.defineProperty(h,l,q),q=null),q}function cb(h){var l={exports:{}};return h(l,l.exports),l.exports}function pe(h){h||(h={});var l=h.ua;if(l||"undefined"==typeof navigator||(l=navigator.userAgent),l&&l.headers&&"string"==typeof l.headers["user-agent"]&&(l=l.headers["user-agent"]),"string"!=typeof l)return!1;var g=iu.test(l)&&!ju.test(l)||!!h.tablet&&ku.test(l);return!g&&h.tablet&&h.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==l.indexOf("Macintosh")&&-1!==l.indexOf("Safari")&&(g=!0),g}function ym(h,l){var g,f=3>arguments.length?h:arguments[2];return sa(h)===f?h[l]:(g=Jb.f(h,l))?Q(g,"value")?g.value:void 0===g.get?void 0:g.get.call(f):ha(g=ac(h))?ym(g,l,f):void 0}function lu(h){var l=h.charCodeAt(0)<<24,g=0|mu(~l),f=0,k=0|h.length,q="";if(5>g&&k>=g){for(l=l<<g>>>24+g,f=1;f<g;f=f+1|0)l=l<<6|63&h.charCodeAt(f);65535>=l?q+=Gd(l):1114111>=l?q+=Gd(55296+((l=l-65536|0)>>10)|0,56320+(1023&l)|0):f=0}for(;f<k;f=f+1|0)q+="\ufffd";return q}function zm(){}function nu(h){var l=0|h.charCodeAt(0);if(55296<=l&&56319>=l){var g=0|h.charCodeAt(1);if(!(g==g&&56320<=g&&57343>=g))return Gd(239,191,189);if(65535<(l=(l-55296<<10)+g-56320+65536|0))return Gd(240|l>>>18,128|l>>>12&63,128|l>>>6&63,128|63&l)}return 127>=l?h:2047>=l?Gd(192|l>>>6,128|63&l):Gd(224|l>>>12,128|l>>>6&63,128|63&l)}function Am(){}function ia(){ia.init.call(this)}function Kg(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+V(h))}function Bm(h,l,g,f){Kg(g);var k=h._events;if(void 0===k)k=h._events=Object.create(null),h._eventsCount=0;else{void 0!==k.newListener&&(h.emit("newListener",l,g.listener?g.listener:g),k=h._events);var q=k[l]}return void 0===q?(k[l]=g,++h._eventsCount):("function"==typeof q?q=k[l]=f?[g,q]:[q,g]:f?q.unshift(g):q.push(g),0<(g=void 0===h._maxListeners?ia.defaultMaxListeners:h._maxListeners)&&q.length>g&&!q.warned&&(q.warned=!0,(g=Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(l)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",g.emitter=h,g.type=l,g.count=q.length,console&&console.warn&&console.warn(g))),h}function ou(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Cm(h,l,g){return(l=ou.bind(h={fired:!1,wrapFn:void 0,target:h,type:l,listener:g})).listener=g,h.wrapFn=l}function Dm(h,l,g){if(void 0===(h=h._events))return[];if(void 0===(l=h[l]))return[];if("function"==typeof l)return g?[l.listener||l]:[l];if(g)for(g=Array(l.length),h=0;h<g.length;++h)g[h]=l[h].listener||l[h];else g=Em(l,l.length);return g}function Fm(h){var l=this._events;if(void 0!==l){if("function"==typeof(h=l[h]))return 1;if(void 0!==h)return h.length}return 0}function Em(h,l){for(var g=Array(l),f=0;f<l;++f)g[f]=h[f];return g}function pu(h,l,g){"function"==typeof h.on&&Gm(h,"error",l,g)}function Gm(h,l,g,f){if("function"==typeof h.on)f.once?h.once(l,g):h.on(l,g);else{if("function"!=typeof h.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+V(h));h.addEventListener(l,function k(q){f.once&&h.removeEventListener(l,k),g(q)})}}function qu(h){return h?G(h):ru(function(){return[]},function(l,g){return l.push(g),l})}function Hm(h,l){var g,f,q;return x.wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:g=Im(h)([Jm,Jm,function(_s,_a){return _a}])[2],f=0;case 2:if(!(f<l.length)){_r.next=17;break}if(!((q=g(zi,l[f]))instanceof Lg)){_r.next=11;break}if((q=Ai(q.deref()))===zi){_r.next=10;break}return _r.next=10,q;case 10:return _r.abrupt("return");case 11:if(q===zi){_r.next=14;break}return _r.next=14,q;case 14:f++,_r.next=2;break;case 17:case"end":return _r.stop()}},su)}function Mg(h,l){return null!=l&&"function"==typeof l[Symbol.iterator]?Hm(Mg(h),l):function(g){var f=g[2];return tu(g,function(k,q){return f(k,h(q))})}}function Jc(h){return Object.prototype.toString.call(h).slice(8,-1)}function Hd(h){return"Object"===Jc(h)&&h.constructor===Object&&Object.getPrototypeOf(h)===Object.prototype}function Km(h){var l;return(l="Boolean"===Jc(h)||"Null"===Jc(h)||"Undefined"===Jc(h))||(l="Number"===Jc(h)&&!isNaN(h)),l||"String"===Jc(h)||"Symbol"===Jc(h)}function Id(h){var l=-1,g=null==h?0:h.length;for(this.clear();++l<g;){var f=h[l];this.set(f[0],f[1])}}function qe(h){var l=-1,g=null==h?0:h.length;for(this.clear();++l<g;){var f=h[l];this.set(f[0],f[1])}}function re(h){var l=-1,g=null==h?0:h.length;for(this.clear();++l<g;){var f=h[l];this.set(f[0],f[1])}}function zf(h){var l=-1,g=null==h?0:h.length;for(this.__data__=new Ng;++l<g;)this.add(h[l])}function se(h){this.size=(this.__data__=new Og(h)).size}function te(h,l,g,f,k,q){var _r,_s=1&l,_a=2&l,_l=4&l;if(g&&(_r=k?g(h,f,k,q):g(h)),void 0!==_r)return _r;if(!ob(h))return h;if(f=Za(h)){if(_r=uu(h),!_s)return Bi(h,_r)}else{var bh=Af(h),n_="[object Function]"==bh||"[object GeneratorFunction]"==bh;if(Bf(h))return Lm(h,_s);if("[object Object]"==bh||"[object Arguments]"==bh||n_&&!k){if(_r=_a||n_?{}:Mm(h),!_s)return _a?vu(h,wu(_r,h)):xu(h,yu(_r,h))}else{if(!xa[bh])return k?h:{};_r=zu(h,bh,_s)}}if(q||(q=new ue),k=q.get(h))return k;q.set(h,_r),Au(h)?h.forEach(function(r_){_r.add(te(r_,l,g,r_,h,q))}):Bu(h)&&h.forEach(function(r_,p_){_r.set(p_,te(r_,l,g,p_,h,q))}),_a=_l?_a?Nm:Ci:_a?Cf:Jd;var _A=f?void 0:_a(h);return Cu(_A||h,function(r_,p_){_A&&(r_=h[p_=r_]),Om(_r,p_,te(r_,l,g,p_,h,q))}),_r}function Di(h,l){if("function"!=typeof h||null!=l&&"function"!=typeof l)throw new TypeError("Expected a function");var g=function f(){var k=arguments,q=l?l.apply(this,k):k[0],_r=f.cache;return _r.has(q)?_r.get(q):(k=h.apply(this,k),f.cache=_r.set(q,k)||_r,k)};return g.cache=new(Di.Cache||Ng),g}function Pm(h){if("string"==typeof h)return h;if(Za(h))return ve(h,Pm)+"";if(we(h))return Qm?Qm.call(h):"";var l=h+"";return"0"==l&&1/h==-Du?"-0":l}function Ei(h,l,g,f,k){var q=-1,_r=h.length;for(g||(g=Eu),k||(k=[]);++q<_r;){var _s=h[q];0<l&&g(_s)?1<l?Ei(_s,l-1,g,f,k):Fi(k,_s):f||(k[k.length]=_s)}return k}function xe(h,l,g,f,k){if(h===l)l=!0;else if(null==h||null==l||!oc(h)&&!oc(l))l=h!=h&&l!=l;else e:{var q=Za(h),_r=Za(l),_s=q?"[object Array]":Af(h),_a=_r?"[object Array]":Af(l),_l="[object Object]"==(_s="[object Arguments]"==_s?"[object Object]":_s);if(_r="[object Object]"==(_a="[object Arguments]"==_a?"[object Object]":_a),(_a=_s==_a)&&Bf(h)){if(!Bf(l)){l=!1;break e}q=!0,_l=!1}if(_a&&!_l)k||(k=new ue),l=q||Gi(h)?Rm(h,l,g,f,xe,k):Fu(h,l,_s,g,f,xe,k);else{if(!(1&g)&&(q=_l&&Sm.call(h,"__wrapped__"),_s=_r&&Sm.call(l,"__wrapped__"),q||_s)){h=q?h.value():h,l=_s?l.value():l,k||(k=new ue),l=xe(h,l,g,f,k);break e}if(_a)t:if(k||(k=new ue),q=1&g,_s=Ci(h),_r=_s.length,_a=Ci(l).length,_r==_a||q){for(_a=_r;_a--;){var bh=_s[_a];if(!(q?bh in l:Gu.call(l,bh))){l=!1;break t}}if(_l=k.get(h),bh=k.get(l),_l&&bh)l=_l==l&&bh==h;else{_l=!0,k.set(h,l),k.set(l,h);for(var n_=q;++_a<_r;){var _A=h[bh=_s[_a]],r_=l[bh];if(f)var p_=q?f(r_,_A,bh,l,h,k):f(_A,r_,bh,h,l,k);if(void 0===p_?_A!==r_&&!xe(_A,r_,g,f,k):!p_){_l=!1;break}n_||(n_="constructor"==bh)}_l&&!n_&&(g=h.constructor)!=(f=l.constructor)&&"constructor"in h&&"constructor"in l&&!("function"==typeof g&&g instanceof g&&"function"==typeof f&&f instanceof f)&&(_l=!1),k.delete(h),k.delete(l),l=_l}}else l=!1;else l=!1}}return l}function ya(h,l,g){this.low=0|h,this.high=0|l,this.unsigned=!!g}function pb(h){return!0===(h&&h.__isLong__)}function Kd(h,l){var g;if(l){if((l=0<=(h>>>=0)&&256>h)&&(g=Tm[h]))return g;g=za(h,0>(0|h)?-1:0,!0),l&&(Tm[h]=g)}else{if((l=-128<=(h|=0)&&128>h)&&(g=Um[h]))return g;g=za(h,0>h?-1:0,!1),l&&(Um[h]=g)}return g}function Kb(h,l){if(isNaN(h))return l?Ld:Lb;if(l){if(0>h)return Ld;if(h>=Vm)return Wm}else{if(h<=-Xm)return qb;if(h+1>=Xm)return Ym}return 0>h?Kb(-h,l).neg():za(h%ye|0,h/ye|0,l)}function za(h,l,g){return new ya(h,l,g)}function Hi(h,l,g){if(0===h.length)throw Error("empty string");if("NaN"===h||"Infinity"===h||"+Infinity"===h||"-Infinity"===h)return Lb;if("number"==typeof l?(g=l,l=!1):l=!!l,2>(g=g||10)||36<g)throw RangeError("radix");var f;if(0<(f=h.indexOf("-")))throw Error("interior hyphen");if(0===f)return Hi(h.substring(1),l,g).neg();f=Kb(Pg(g,8));for(var k=Lb,q=0;q<h.length;q+=8){var _r=Math.min(8,h.length-q),_s=parseInt(h.substring(q,q+_r),g);8>_r?(_r=Kb(Pg(g,_r)),k=k.mul(_r).add(Kb(_s))):k=(k=k.mul(f)).add(Kb(_s))}return k.unsigned=l,k}function bc(h,l){return"number"==typeof h?Kb(h,l):"string"==typeof h?Hi(h,l):za(h.low,h.high,"boolean"==typeof l?l:h.unsigned)}function O(h,l){function g(){this.constructor=h}Ii(h,l),h.prototype=null===l?Object.create(l):(g.prototype=l.prototype,new g)}function ze(h){return"function"==typeof h}function Ae(h){setTimeout(function(){throw h},0)}function Ji(h){return null!==h&&"object"===V(h)}function Zm(h){return h.reduce(function(l,g){return l.concat(g instanceof Df?g.errors:g)},[])}function Ki(h){for(;h;){var l=h.destination;if(h.closed||h.isStopped)return!1;h=l&&l instanceof ma?l:null}return!0}function ed(h){return h}function Li(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return $m(h)}function $m(h){return 0===h.length?ed:1===h.length?h[0]:function(l){return h.reduce(function(g,f){return f(g)},l)}}function an(h){if(h||(h=Mb.Promise||Promise),!h)throw Error("no Promise impl found");return h}function bn(){return function(h){return h.lift(new Hu(h))}}function Ef(h){return h?Iu(h):yb}function Iu(h){return new Y(function(l){return h.schedule(function(){return l.complete()})})}function fd(h){return h&&"function"==typeof h.schedule}function Mi(h,l){return new Y(function(g){var f=new Ta,k=0;return f.add(l.schedule(function(){k===h.length?g.complete():(g.next(h[k++]),g.closed||f.add(this.schedule()))})),f})}function Ff(h,l){return l?Mi(h,l):new Y(cn(h))}function eb(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return fd(l=h[h.length-1])?(h.pop(),Mi(h,l)):Ff(h)}function Z(h,l){return new Y(l?function(g){return l.schedule(Ju,0,{error:h,subscriber:g})}:function(g){return g.error(h)})}function Ju(h){h.subscriber.error(h.error)}function Ku(h,l){return void 0===l&&(l=0),function(g){return g.lift(new Lu(h,l))}}function dn(h){return h in Ni&&(delete Ni[h],!0)}function pc(){}function ea(h,l){return function(g){if("function"!=typeof h)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return g.lift(new Mu(h,l))}}function en(h,l,g){if(l){if(!fd(l))return function(){for(var f=[],k=0;k<arguments.length;k++)f[k]=arguments[k];return en(h,g).apply(void 0,f).pipe(ea(function(q){return Nb(q)?l.apply(void 0,q):l(q)}))};g=l}return function(){for(var f=[],k=0;k<arguments.length;k++)f[k]=arguments[k];var q,_r=this,_s={context:_r,subject:q,callbackFunc:h,scheduler:g};return new Y(function(_a){if(g)return g.schedule(Nu,0,{args:f,subscriber:_a,params:_s});if(!q){q=new Gf;try{h.apply(_r,f.concat([function(){for(var _l=[],bh=0;bh<arguments.length;bh++)_l[bh]=arguments[bh];q.next(1>=_l.length?_l[0]:_l),q.complete()}]))}catch(_l){Ki(q)?q.error(_l):console.warn(_l)}}return q.subscribe(_a)})}}function Nu(h){var l=this,g=h.args,f=h.subscriber,k=h.params;h=k.callbackFunc;var q=k.context,_r=k.scheduler,_s=k.subject;if(!_s){_s=k.subject=new Gf,k=function(){for(var _a=[],_l=0;_l<arguments.length;_l++)_a[_l]=arguments[_l];l.add(_r.schedule(Ou,0,{value:1>=_a.length?_a[0]:_a,subject:_s}))};try{h.apply(q,g.concat([k]))}catch(_a){_s.error(_a)}}this.add(_s.subscribe(f))}function Ou(h){var l=h.subject;l.next(h.value),l.complete()}function fn(h,l,g){if(l){if(!fd(l))return function(){for(var f=[],k=0;k<arguments.length;k++)f[k]=arguments[k];return fn(h,g).apply(void 0,f).pipe(ea(function(q){return Nb(q)?l.apply(void 0,q):l(q)}))};g=l}return function(){for(var f=[],k=0;k<arguments.length;k++)f[k]=arguments[k];var q={subject:void 0,args:f,callbackFunc:h,scheduler:g,context:this};return new Y(function(_r){var _s=q.context,_a=q.subject;if(g)return g.schedule(Pu,0,{params:q,subscriber:_r,context:_s});if(!_a){_a=q.subject=new Gf;try{h.apply(_s,f.concat([function(){for(var _l=[],bh=0;bh<arguments.length;bh++)_l[bh]=arguments[bh];(bh=_l.shift())?_a.error(bh):(_a.next(1>=_l.length?_l[0]:_l),_a.complete())}]))}catch(_l){Ki(_a)?_a.error(_l):console.warn(_l)}}return _a.subscribe(_r)})}}function Pu(h){var l=this,g=h.params,f=h.subscriber;h=h.context;var k=g.callbackFunc,q=g.args,_r=g.scheduler,_s=g.subject;if(!_s){_s=g.subject=new Gf,g=function(){for(var _a=[],_l=0;_l<arguments.length;_l++)_a[_l]=arguments[_l];(_l=_a.shift())?l.add(_r.schedule(gn,0,{err:_l,subject:_s})):l.add(_r.schedule(Qu,0,{value:1>=_a.length?_a[0]:_a,subject:_s}))};try{k.apply(h,q.concat([g]))}catch(_a){this.add(_r.schedule(gn,0,{err:_a,subject:_s}))}}this.add(_s.subscribe(f))}function Qu(h){var l=h.subject;l.next(h.value),l.complete()}function gn(h){h.subject.error(h.err)}function hn(h){return!!h&&"function"!=typeof h.subscribe&&"function"==typeof h.then}function Oi(h,l,g,f,k){if(void 0===k&&(k=new Ru(h,g,f)),!k.closed)return l instanceof Y?l.subscribe(k):Hf(l)(k)}function Su(h,l){return new Y(function(g){var f=new Ta;return f.add(l.schedule(function(){var k=h[Be]();f.add(k.subscribe({next:function(q){f.add(l.schedule(function(){return g.next(q)}))},error:function(q){f.add(l.schedule(function(){return g.error(q)}))},complete:function(){f.add(l.schedule(function(){return g.complete()}))}}))})),f})}function Tu(h,l){return new Y(function(g){var f=new Ta;return f.add(l.schedule(function(){return h.then(function(k){f.add(l.schedule(function(){g.next(k),f.add(l.schedule(function(){return g.complete()}))}))},function(k){f.add(l.schedule(function(){return g.error(k)}))})})),f})}function Uu(h,l){if(!h)throw Error("Iterable cannot be null");return new Y(function(g){var f,k=new Ta;return k.add(function(){f&&"function"==typeof f.return&&f.return()}),k.add(l.schedule(function(){f=h[gd](),k.add(l.schedule(function(){if(!g.closed){try{var q=f.next(),_r=q.value,_s=q.done}catch(_a){return void g.error(_a)}_s?g.complete():(g.next(_r),this.schedule())}}))})),k})}function jn(h,l){if(null!=h){if(h&&"function"==typeof h[Be])return Su(h,l);if(hn(h))return Tu(h,l);if(kn(h))return Mi(h,l);if(h&&"function"==typeof h[gd]||"string"==typeof h)return Uu(h,l)}throw new TypeError((null!==h&&V(h)||h)+" is not observable")}function Ob(h,l){return l?jn(h,l):h instanceof Y?h:new Y(Hf(h))}function qc(h,l){if(!l.closed){if(h instanceof Y)return h.subscribe(l);try{var g=Hf(h)(l)}catch(f){l.error(f)}return g}}function fb(h,l,g){return void 0===g&&(g=Number.POSITIVE_INFINITY),"function"==typeof l?function(f){return f.pipe(fb(function(k,q){return Ob(h(k,q)).pipe(ea(function(_r,_s){return l(k,_r,q,_s)}))},g))}:("number"==typeof l&&(g=l),function(f){return f.lift(new Vu(h,g))})}function Qg(h){return void 0===h&&(h=Number.POSITIVE_INFINITY),fb(ed,h)}function ln(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return Qg(1)(eb.apply(void 0,h))}function hd(h){return new Y(function(l){try{var g=h()}catch(f){return void l.error(f)}return(g?Ob(g):Ef()).subscribe(l)})}function mn(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];if(1===h.length){var g=h[0];if(Nb(g))return Rg(g,null);if(Ji(g)&&Object.getPrototypeOf(g)===Object.prototype)return Rg((h=Object.keys(g)).map(function(k){return g[k]}),h)}if("function"==typeof h[h.length-1]){var f=h.pop();return Rg(h=1===h.length&&Nb(h[0])?h[0]:h,null).pipe(ea(function(k){return f.apply(void 0,k)}))}return Rg(h,null)}function Rg(h,l){return new Y(function(g){var f=h.length;if(0===f)g.complete();else for(var k=Array(f),q=0,_r=0,_s=function(_l){var bh=Ob(h[_l]),n_=!1;g.add(bh.subscribe({next:function(_A){n_||(n_=!0,_r++),k[_l]=_A},error:function(_A){return g.error(_A)},complete:function(){++q!==f&&n_||(_r===f&&g.next(l?l.reduce(function(_A,r_,p_){return _A[r_]=k[p_],_A},{}):k),g.complete())}}))},_a=0;_a<f;_a++)_s(_a)})}function jb(h,l,g,f){return ze(g)&&(f=g,g=void 0),f?jb(h,l,g).pipe(ea(function(k){return Nb(k)?f.apply(void 0,k):f(k)})):new Y(function(k){nn(h,l,function(q){k.next(1<arguments.length?Array.prototype.slice.call(arguments):q)},k,g)})}function nn(h,l,g,f,k){if(h&&"function"==typeof h.addEventListener&&"function"==typeof h.removeEventListener){h.addEventListener(l,g,k);var q=function(){return h.removeEventListener(l,g,k)}}else if(h&&"function"==typeof h.on&&"function"==typeof h.off)h.on(l,g),q=function(){return h.off(l,g)};else if(h&&"function"==typeof h.addListener&&"function"==typeof h.removeListener)h.addListener(l,g),q=function(){return h.removeListener(l,g)};else{if(!h||!h.length)throw new TypeError("Invalid event target");for(var _r=0,_s=h.length;_r<_s;_r++)nn(h[_r],l,g,f,k)}f.add(q)}function on(h,l,g){return g?on(h,l).pipe(ea(function(f){return Nb(f)?g.apply(void 0,f):g(f)})):new Y(function(f){var k=function(){for(var _r=[],_s=0;_s<arguments.length;_s++)_r[_s]=arguments[_s];return f.next(1===_r.length?_r[0]:_r)};try{var q=h(k)}catch(_r){return void f.error(_r)}if(ze(l))return function(){return l(k,q)}})}function Wu(h){var l=h.subscriber,g=h.condition;if(!l.closed){if(h.needIterate)try{h.state=h.iterate(h.state)}catch(q){return void l.error(q)}else h.needIterate=!0;if(g){var f=void 0;try{f=g(h.state)}catch(q){return void l.error(q)}if(!f)return void l.complete();if(l.closed)return}try{var k=h.resultSelector(h.state)}catch(q){return void l.error(q)}if(!l.closed&&(l.next(k),!l.closed))return this.schedule(h)}}function Pi(h){return!Nb(h)&&0<=h-parseFloat(h)+1}function pn(h,l){return void 0===h&&(h=0),void 0===l&&(l=id),(!Pi(h)||0>h)&&(h=0),l&&"function"==typeof l.schedule||(l=id),new Y(function(g){return g.add(l.schedule(Xu,h,{subscriber:g,counter:0,period:h})),g})}function Xu(h){var l=h.subscriber,g=h.counter;h=h.period,l.next(g),this.schedule({subscriber:l,counter:g+1,period:h},h)}function cc(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];l=Number.POSITIVE_INFINITY;var g=null,f=h[h.length-1];return fd(f)?(g=h.pop(),1<h.length&&"number"==typeof h[h.length-1]&&(l=h.pop())):"number"==typeof f&&(l=h.pop()),null===g&&1===h.length&&h[0]instanceof Y?h[0]:Qg(l)(Ff(h,g))}function Qi(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];if(0===h.length)return yb;var g=h[0],f=h.slice(1);return 1===h.length&&Nb(g)?Qi.apply(void 0,g):new Y(function(k){var q=function(){return k.add(Qi.apply(void 0,f).subscribe(k))};return Ob(g).subscribe({next:function(_r){k.next(_r)},error:q,complete:q})})}function Yu(h){var l=h.keys,g=h.index,f=h.subscriber,k=h.subscription;if(h=h.obj,!f.closed)if(g<l.length){var q=l[g];f.next([q,h[q]]),k.add(this.schedule({keys:l,index:g+1,subscriber:f,subscription:k,obj:h}))}else f.complete()}function Zu(h,l){function g(){return!g.pred.apply(g.thisArg,arguments)}return g.pred=h,g.thisArg=l,g}function zb(h,l){return function(g){return g.lift(new $u(h,l))}}function Da(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];if(1===h.length){if(!Nb(h[0]))return h[0];h=h[0]}return Ff(h,void 0).lift(new av)}function bv(h){var l=h.start,g=h.index,f=h.subscriber;g>=h.count?f.complete():(f.next(l),f.closed||(h.index=g+1,h.start=l+1,this.schedule(h)))}function Kc(h,l,g){void 0===h&&(h=0);var f=-1;return Pi(l)?f=1>Number(l)?1:Number(l):fd(l)&&(g=l),fd(g)||(g=id),new Y(function(k){var q=Pi(h)?h:+h-g.now();return g.schedule(cv,q,{index:0,period:f,subscriber:k})})}function cv(h){var l=h.index,g=h.period,f=h.subscriber;if(f.next(l),!f.closed){if(-1===g)return f.complete();h.index=l+1,this.schedule(h,g)}}function Ri(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return"function"==typeof(l=h[h.length-1])&&h.pop(),Ff(h,void 0).lift(new dv(l))}function Ja(h){return function(l){var g=new ev(h);return l=l.lift(g),g.caught=l}}function Si(h,l){return fb(h,l,1)}function qn(h){return void 0===h&&(h=null),function(l){return l.lift(new fv(h))}}function jd(h,l){void 0===l&&(l=id);var g=h instanceof Date&&!isNaN(+h)?+h-l.now():Math.abs(h);return function(f){return f.lift(new gv(g,l))}}function rn(h,l){return function(g){return g.lift(new hv(h,l))}}function Md(h){return void 0===h&&(h=iv),function(l){return l.lift(new jv(h))}}function iv(){return new Sg}function Pa(h){return function(l){return 0===h?Ef():l.lift(new kv(h))}}function sn(h,l){return l?function(g){return g.pipe(sn(function(f,k){return Ob(h(f,k)).pipe(ea(function(q,_r){return l(f,q,k,_r)}))}))}:function(g){return g.lift(new lv(h))}}function Tg(h){return function(l){return l.lift(new mv(h))}}function aa(h,l){var g=2<=arguments.length;return function(f){return f.pipe(h?zb(function(k,q){return h(k,q,f)}):ed,Pa(1),g?qn(l):Md(function(){return new Sg}))}}function nv(){return function(h){return h.lift(new ov)}}function tn(h){return function(l){return 0===h?Ef():l.lift(new pv(h))}}function If(h){return function(l){return l.lift(new qv(h))}}function Ug(h,l){var g=!1;return 2<=arguments.length&&(g=!0),function(f){return f.lift(new rv(h,l,g))}}function un(h,l){return 2<=arguments.length?function(g){return Li(Ug(h,l),tn(1),qn(l))(g)}:function(g){return Li(Ug(function(f,k,q){return h(f,k,q+1)}),tn(1))(g)}}function sv(h,l){return function(g){var f="function"==typeof h?h:function(){return h};if("function"==typeof l)return g.lift(new tv(f,l));var k=Object.create(g,uv);return k.source=g,k.subjectFactory=f,k}}function Ce(h){return function(l){return l.lift(new vv(h,l))}}function wv(){return new Ua}function De(){return function(h){return bn()(sv(wv)(h))}}function vn(h,l,g){var f=h&&"object"===V(h)?h:{bufferSize:h,windowTime:l,refCount:!1,scheduler:g};return function(k){return k.lift(xv(f))}}function xv(h){var l,g,f=h.bufferSize,k=void 0===f?Number.POSITIVE_INFINITY:f,q=void 0===(f=h.windowTime)?Number.POSITIVE_INFINITY:f,_r=h.refCount,_s=h.scheduler,_a=0,_l=!1,bh=!1;return function(n_){if(_a++,!l||_l){_l=!1;var _A=(l=new Ee(k,q,_s)).subscribe(this);g=n_.subscribe({next:function(r_){l.next(r_)},error:function(r_){_l=!0,l.error(r_)},complete:function(){bh=!0,g=void 0,l.complete()}}),bh&&(g=void 0)}else _A=l.subscribe(this);this.add(function(){_a--,_A.unsubscribe(),_A=void 0,g&&!bh&&_r&&0===_a&&(g.unsubscribe(),l=g=void 0)})}}function Lc(h,l){return"function"==typeof l?function(g){return g.pipe(Lc(function(f,k){return Ob(h(f,k)).pipe(ea(function(q,_r){return l(f,q,k,_r)}))}))}:function(g){return g.lift(new yv(h))}}function rb(h){return function(l){return l.lift(new zv(h))}}function Av(h,l){return void 0===l&&(l=!1),function(g){return g.lift(new Bv(h,l))}}function ba(h,l,g){return function(f){return f.lift(new Cv(h,l,g))}}function Dv(h,l,g){return void 0===l&&(l=id),void 0===g&&(g=Ev),function(f){return f.lift(new Fv(h,l,g.leading,g.trailing))}}function Gv(h){h.subscriber.clearThrottle()}function Hv(h,l,g){return void 0===g&&(g=id),function(f){var k=h instanceof Date&&!isNaN(+h),q=k?+h-g.now():Math.abs(h);return f.lift(new Iv(q,k,l,g))}}function kb(h,l){return void 0===l&&(l=id),Hv(h,Z(new sb),l)}function Jv(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return function(g){var f;return"function"==typeof h[h.length-1]&&(f=h.pop()),g.lift(new Kv(h,f))}}function wn(h){(Ti||h)&&(xn.abort(),h&&(xn=new AbortController),Ti=h)}function yn(h,l,g,f,k){h!==l&&zn(l,function(q,_r){if(k||(k=new ue),ob(q)){q=k;var _s=Ui(h,_r),_a=Ui(l,_r),_l=q.get(_a);if(_l)Vi(h,_r,_l);else{var bh=void 0===(_l=f?f(_s,_a,_r+"",h,l,q):void 0);if(bh){var n_=Za(_a),_A=!n_&&Bf(_a),r_=!n_&&!_A&&Gi(_a);_l=_a,n_||_A||r_?Za(_s)?_l=_s:oc(_s)&&Nd(_s)?_l=Bi(_s):_A?(bh=!1,_l=Lm(_a,!0)):r_?(bh=!1,_l=An(_a,!0)):_l=[]:Bn(_a)||Jf(_a)?(_l=_s,Jf(_s)?_l=Fe(_s,Cf(_s)):ob(_s)&&!Wi(_s)||(_l=Mm(_a))):bh=!1}bh&&(q.set(_a,_l),yn(_l,_a,g,f,q),q.delete(_a)),Vi(h,_r,_l)}}else void 0===(_s=f?f(Ui(h,_r),q,_r+"",h,l,k):void 0)&&(_s=q),Vi(h,_r,_s)},Cf)}function Lv(h){var l=1,g=Xi;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?l=1>=arguments.length?void 0:arguments[1]:g=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(l=1>=arguments.length?void 0:arguments[1],g=2>=arguments.length?void 0:arguments[2]);var f=l||1;return function(k){return k.pipe(Ug(function(q,_r){var _s=g.now(),_a=_s-h;if((q=q.filter(function(n_){return n_.until>_a})).length>=f){var _l=q[q.length-1],bh=q[0].until+h*Math.floor(q.length/f);q.push({delay:_l.until<_s?bh-_s:bh-_l.until,until:bh,value:_r})}else q.push({delay:0,until:_s,value:_r});return q},[]),ea(function(q){return q[q.length-1]}),Si(function(q){var _r=eb(q.value);return q.delay?_r.pipe(jd(q.delay,g)):_r}))}}function Mv(h,l){var g=(l=void 0===l?{protocols:Cn,makeWebSocket:Dn}:l).protocols,f=void 0===g?Cn:g,k=void 0===(l=l.makeWebSocket)?Dn:l;return new Y(function(q){var _r,_s=new Ua,_a=k(h,f),_l=!1,bh=!1,n_=!1,_A=function(r_){if(_r)throw _l=!0,r_=Error("Web socket message factory function called more than once"),q.error(r_),r_;return _r=r_.subscribe(function(p_){_a.send(p_)}),_s};return _a.onopen=function(){n_=!0,bh?(_l=!0,_a.close()):q.next(_A)},_a.onmessage=function(r_){_s.next(r_.data)},_a.onerror=function(r_){_l=!0,q.error(Error(r_.message))},_a.onclose=function(r_){_l||(_l=!0,bh?(q.complete(),_s.complete()):q.error(Error(1e3===r_.code?"Normal closure":r_.reason)))},function(){bh=!0,_r&&_r.unsubscribe(),_l||(_l=!0,n_&&_a.close())}})}function Vg(){this._listeners={}}function En(h){return"undefined"!=typeof Float32Array?function(){function l(_a,_l,bh){q[0]=_a,_l[bh]=_r[0],_l[bh+1]=_r[1],_l[bh+2]=_r[2],_l[bh+3]=_r[3]}function g(_a,_l,bh){q[0]=_a,_l[bh]=_r[3],_l[bh+1]=_r[2],_l[bh+2]=_r[1],_l[bh+3]=_r[0]}function f(_a,_l){return _r[0]=_a[_l],_r[1]=_a[_l+1],_r[2]=_a[_l+2],_r[3]=_a[_l+3],q[0]}function k(_a,_l){return _r[3]=_a[_l],_r[2]=_a[_l+1],_r[1]=_a[_l+2],_r[0]=_a[_l+3],q[0]}var q=new Float32Array([-0]),_r=new Uint8Array(q.buffer),_s=128===_r[3];h.writeFloatLE=_s?l:g,h.writeFloatBE=_s?g:l,h.readFloatLE=_s?f:k,h.readFloatBE=_s?k:f}():function(){function l(f,k,q,_r){var _s=0>k?1:0;if(_s&&(k=-k),0===k)f(0<1/k?0:2147483648,q,_r);else if(isNaN(k))f(2143289344,q,_r);else if(34028234663852886e22<k)f((_s<<31|2139095040)>>>0,q,_r);else if(11754943508222875e-54>k)f((_s<<31|Math.round(k/1401298464324817e-60))>>>0,q,_r);else{var _a=Math.floor(Math.log(k)/Math.LN2);f((_s<<31|_a+127<<23|8388607&Math.round(k*Math.pow(2,-_a)*8388608))>>>0,q,_r)}}function g(f,k,q){return q=f(k,q),f=2*(q>>31)+1,k=q>>>23&255,q&=8388607,255===k?q?NaN:1/0*f:0===k?1401298464324817e-60*f*q:f*Math.pow(2,k-150)*(q+8388608)}h.writeFloatLE=l.bind(null,Fn),h.writeFloatBE=l.bind(null,Gn),h.readFloatLE=g.bind(null,Hn),h.readFloatBE=g.bind(null,In)}(),"undefined"!=typeof Float64Array?function(){function l(_a,_l,bh){q[0]=_a,_l[bh]=_r[0],_l[bh+1]=_r[1],_l[bh+2]=_r[2],_l[bh+3]=_r[3],_l[bh+4]=_r[4],_l[bh+5]=_r[5],_l[bh+6]=_r[6],_l[bh+7]=_r[7]}function g(_a,_l,bh){q[0]=_a,_l[bh]=_r[7],_l[bh+1]=_r[6],_l[bh+2]=_r[5],_l[bh+3]=_r[4],_l[bh+4]=_r[3],_l[bh+5]=_r[2],_l[bh+6]=_r[1],_l[bh+7]=_r[0]}function f(_a,_l){return _r[0]=_a[_l],_r[1]=_a[_l+1],_r[2]=_a[_l+2],_r[3]=_a[_l+3],_r[4]=_a[_l+4],_r[5]=_a[_l+5],_r[6]=_a[_l+6],_r[7]=_a[_l+7],q[0]}function k(_a,_l){return _r[7]=_a[_l],_r[6]=_a[_l+1],_r[5]=_a[_l+2],_r[4]=_a[_l+3],_r[3]=_a[_l+4],_r[2]=_a[_l+5],_r[1]=_a[_l+6],_r[0]=_a[_l+7],q[0]}var q=new Float64Array([-0]),_r=new Uint8Array(q.buffer),_s=128===_r[7];h.writeDoubleLE=_s?l:g,h.writeDoubleBE=_s?g:l,h.readDoubleLE=_s?f:k,h.readDoubleBE=_s?k:f}():function(){function l(f,k,q,_r,_s,_a){var _l=0>_r?1:0;if(_l&&(_r=-_r),0===_r)f(0,_s,_a+k),f(0<1/_r?0:2147483648,_s,_a+q);else if(isNaN(_r))f(0,_s,_a+k),f(2146959360,_s,_a+q);else if(17976931348623157e292<_r)f(0,_s,_a+k),f((_l<<31|2146435072)>>>0,_s,_a+q);else if(22250738585072014e-324>_r)f((_r/=5e-324)>>>0,_s,_a+k),f((_l<<31|_r/4294967296)>>>0,_s,_a+q);else{var bh=Math.floor(Math.log(_r)/Math.LN2);1024===bh&&(bh=1023),f(4503599627370496*(_r*=Math.pow(2,-bh))>>>0,_s,_a+k),f((_l<<31|bh+1023<<20|1048576*_r&1048575)>>>0,_s,_a+q)}}function g(f,k,q,_r,_s){return k=f(_r,_s+k),_r=f(_r,_s+q),f=2*(_r>>31)+1,k=4294967296*(1048575&_r)+k,2047==(q=_r>>>20&2047)?k?NaN:1/0*f:0===q?5e-324*f*k:f*Math.pow(2,q-1075)*(k+4503599627370496)}h.writeDoubleLE=l.bind(null,Fn,0,4),h.writeDoubleBE=l.bind(null,Gn,4,0),h.readDoubleLE=g.bind(null,Hn,0,4),h.readDoubleBE=g.bind(null,In,4,0)}(),h}function Fn(h,l,g){l[g]=255&h,l[g+1]=h>>>8&255,l[g+2]=h>>>16&255,l[g+3]=h>>>24}function Gn(h,l,g){l[g]=h>>>24,l[g+1]=h>>>16&255,l[g+2]=h>>>8&255,l[g+3]=255&h}function Hn(h,l){return(h[l]|h[l+1]<<8|h[l+2]<<16|h[l+3]<<24)>>>0}function In(h,l){return(h[l]<<24|h[l+1]<<16|h[l+2]<<8|h[l+3])>>>0}function $a(h,l){this.lo=h>>>0,this.hi=l>>>0}function Kf(h,l,g){this.fn=h,this.len=l,this.next=void 0,this.val=g}function Yi(){}function Nv(h){this.head=h.head,this.tail=h.tail,this.len=h.len,this.next=h.states}function na(){this.len=0,this.tail=this.head=new Kf(Yi,0,0),this.states=null}function Zi(h,l,g){l[g]=255&h}function $i(h,l){this.len=h,this.next=void 0,this.val=l}function aj(h,l,g){for(;h.hi;)l[g++]=127&h.lo|128,h.lo=(h.lo>>>7|h.hi<<25)>>>0,h.hi>>>=7;for(;127<h.lo;)l[g++]=127&h.lo|128,h.lo>>>=7;l[g++]=h.lo}function bj(h,l,g){l[g]=255&h,l[g+1]=h>>>8&255,l[g+2]=h>>>16&255,l[g+3]=h>>>24}function rc(){cj.call(this)}function Ov(h,l,g){40>h.length?W.utf8.write(h,l,g):l.utf8Write?l.utf8Write(h,g):l.write(h,g)}function dc(h,l){return RangeError("index out of range: "+h.pos+" + "+(l||1)+" > "+h.len)}function Qa(h){this.buf=h,this.pos=0,this.len=h.length}function dj(){var h=new Jn(0,0),l=0;if(!(4<this.len-this.pos)){for(;3>l;++l){if(this.pos>=this.len)throw dc(this);if(h.lo=(h.lo|(127&this.buf[this.pos])<<7*l)>>>0,128>this.buf[this.pos++])return h}return h.lo=(h.lo|(127&this.buf[this.pos++])<<7*l)>>>0,h}for(;4>l;++l)if(h.lo=(h.lo|(127&this.buf[this.pos])<<7*l)>>>0,128>this.buf[this.pos++])return h;if(h.lo=(h.lo|(127&this.buf[this.pos])<<28)>>>0,h.hi=(h.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return h;if(l=0,4<this.len-this.pos){for(;5>l;++l)if(h.hi=(h.hi|(127&this.buf[this.pos])<<7*l+3)>>>0,128>this.buf[this.pos++])return h}else for(;5>l;++l){if(this.pos>=this.len)throw dc(this);if(h.hi=(h.hi|(127&this.buf[this.pos])<<7*l+3)>>>0,128>this.buf[this.pos++])return h}throw Error("invalid varint encoding")}function Wg(h,l){return(h[l-4]|h[l-3]<<8|h[l-2]<<16|h[l-1]<<24)>>>0}function Kn(){if(this.pos+8>this.len)throw dc(this,8);return new Jn(Wg(this.buf,this.pos+=4),Wg(this.buf,this.pos+=4))}function Od(h){ej.call(this,h)}function Lf(h,l,g){if("function"!=typeof h)throw TypeError("rpcImpl must be a function");W.EventEmitter.call(this),this.rpcImpl=h,this.requestDelimited=!!l,this.responseDelimited=!!g}function Aa(h){return"string"==typeof h&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(h)&&"null"!==h}function Ln(h){try{var l=h.split(".").map(function(f){return Number(f)})}catch(f){return!1}if(4!==l.length||0===l[0])return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Number.isInteger(g)||0>g||255<g)return!1}return!0}function Mn(h,l){if(!Array.isArray(l)||0===l.length||32<l.length||l.some(function(g){return 0===g.length||32<g.length}))throw new H("arguments is not valid",Oa);if(!Aa(h))throw new H("ID is invalid",Oa)}function Mf(h){var l=h.attributes,g=h.attrSizeMap,f=h.maxAttrsCount,k=h.maxAttrValueSize;if(h=h.maxTotalSize,!Hd(l))throw new H("attributes must be an object",Oa);if(Object.keys(l).length>f)throw new lb("Exceed the limit of ".concat(f," attributes"),Ge);if(0===Object.keys(l).length)throw new H("The attributes is an empty object",Oa);var q=0,_r=0;for(l=Object.entries(l);_r<l.length;_r++){var _s=ua(l[_r],2),_a=_s[1];_s=new Blob([_s[0]]).size;var _l=new Blob([_a]).size;if(0===_s||32<_s)throw new H("Invalid attribute key",Oa);if(_l>k)throw new lb("Invalid attribute value, over the limit of ".concat(k," bytes"),Ge);if("string"!=typeof _a||0===_a.length)throw new H("Invalid attribute value",Oa);q+=_s,q+=_l}if(q>h)throw new lb("The attributes size overflow",Ge);if(void 0!==g){if(Object.keys(g).length>f)throw new lb("Exceed the limit of ".concat(f," attributes"),Ge);for(q=f=0,g=Object.entries(g);q<g.length;q++){if(_r=(l=ua(g[q],2))[1],0===(l=new Blob([l[0]]).size))throw new H("Invalid attribute key",Oa);if(_r>k)throw new lb("Invalid attribute value, over the limit of ".concat(k," bytes"),Ge);f+=l,f+=_r}if(f>h)throw new lb("The attributes size overflow",Ge)}}function Xg(h,l){return Math.floor(Math.random()*(Math.floor(l)-Math.ceil(h)+1))+h}function Yg(){var h=Xg(0,4294967295),l=Xg(1,4294967295);return new U(h,l,!0)}function ab(h){return h.toString().padEnd(32,"0")}function Nn(h,l){return new TypeError("Unexpected ".concat(h,": ").concat(l))}function On(h,l){return h=h.split(".").map(function(g){return Number(g)}),l=l.split(".").map(function(g){return Number(g)}),Math.sqrt(1e3*Math.pow(h[0]-l[0],2)+100*Math.pow(h[1]-l[1],2)+10*Math.pow(h[2]-l[2],2)+1*Math.pow(h[3]-l[3],2))}function Pn(h){return h.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?h.toNumber():h.toString()}function fj(h,l){l="".concat(h).concat(l||"");var g=Qn.get(l)||1;return Qn.set(l,g+1),"".concat(h).concat(g)}function Rn(h,l){var g="number"==typeof l?l:void 0!==l&&"string"!=typeof l?l.code:void 0;return l="number"!=typeof l&&"string"!=typeof l&&void 0!==l&&void 0!==l.serverCode?l.serverCode:void 0,g="".concat(void 0!==g?" Error Code ".concat(g):"").concat(void 0!==l?", server Code ".concat(l):""),h="string"==typeof h&&h?Zg(h):Array.isArray(h)&&"string"==typeof h[0]&&h[0]?Zg(Sn.apply(void 0,[h[0]].concat(G(h.slice(1))))):"","".concat(""===g?"":"".concat(g," - ")).concat(h)}function gj(h,l){return hj.apply(this,arguments)}function hj(){return(hj=J(x.mark(function h(l,g){return x.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!g||!g.aborted){f.next=2;break}return f.abrupt("return");case 2:return f.abrupt("return",new Promise(function(k){setTimeout(k,l),null==g||g.addEventListener("abort",k)}));case 3:case"end":return f.stop()}},h)}))).apply(this,arguments)}function Tn(h){return h instanceof Blob||"[object Blob]"===Object.prototype.toString.call(h)}function $g(h){var l=255&h,g=h>>8&255,f=h>>16&255;return"".concat(h>>24&255,".").concat(f,".").concat(g,".").concat(l)}function He(h,l,g){return ij.apply(this,arguments)}function ij(){return(ij=J(x.mark(function h(l,g,f){var k,q,_r,_s,_a,_l,bh,n_,_A,r_,p_,I_,v_,S_,x_,B_,c0,Qv,h0,E0,H_,Rv;return x.wrap(function(E_){for(;;)switch(E_.prev=E_.next){case 0:if(k=g.body,_r=void 0===(q=g.headers)?{}:q,_a=void 0===(_s=g.timeout)?1e4:_s,_l=g.signal,n_=void 0!==(bh=g.withCredentials)&&bh,r_=void 0!==(_A=(f||{}).useBinaryResponse)&&_A,(p_=new XMLHttpRequest).open("POST",l,!0),p_.responseType=r_?"arraybuffer":"text",p_.withCredentials=n_,p_.timeout=_a,I_=k instanceof FormData,v_=k instanceof Uint8Array,!(1<(S_=Object.keys(_r).filter(function(L_){return"content-type"===L_.toLowerCase()})).length)){E_.next=14;break}throw new RangeError("multiple content-type");case 14:0===S_.length&&(v_?_r["Content-Type"]="application/octet-stream":I_||(_r["Content-Type"]="application/json"));case 15:if("setRequestHeader"in p_){E_.next=46;break}return p_.abort(),E_.next=19,fetch(l,{body:I_||v_?k:JSON.stringify(k),cache:"no-cache",credentials:n_?"include":"same-origin",headers:_r,method:"POST",mode:"cors",referrer:"no-referrer",signal:_l});case 19:if(!(200<=(B_=(x_=E_.sent).status)&&300>B_||304===B_)){E_.next=31;break}if(!r_){E_.next=27;break}return E_.next=25,x_.arrayBuffer();case 25:return E_.abrupt("return",{status:B_,responseData:E_.sent});case 27:return E_.next=29,x_.text();case 29:return E_.abrupt("return",{status:B_,responseText:E_.sent});case 31:return c0=new da(["Post XHR failure, status %d",B_]),E_.prev=32,E_.next=35,x_.text();case 35:throw Qv=E_.sent,c0.statusCode=B_,c0.message=Qv||"Request failed, status ".concat(B_),c0;case 41:throw E_.prev=41,E_.t0=E_.catch(32),c0.statusCode=B_,c0.message="Request failed, status ".concat(B_),c0;case 46:if(0!==Object.keys(_r).length)for(h0=0,E0=Object.entries(_r);h0<E0.length;h0++)H_=ua(E0[h0],2),p_.setRequestHeader(H_[0],H_[1]);return void 0!==_l&&(Rv=function L_(){p_.abort(),_l.removeEventListener("abort",L_)},_l.addEventListener("abort",Rv)),p_.send(I_||v_?k:JSON.stringify(k)),E_.abrupt("return",new Promise(function(L_,F_){p_.onload=function(){var J_=p_.status;if(200<=J_&&300>J_||304===J_)L_(r_?{status:J_,responseData:p_.response}:{status:J_,responseText:p_.responseText});else{var z_=new da(["Post XHR failure, status %d",J_]);z_.statusCode=J_,z_.message=p_.response||"Request failed, status ".concat(p_.status),F_(z_)}},p_.ontimeout=function(J_){F_(new gb(["XHR request timed out after %d ms",_a],{originalError:J_}))},p_.onerror=function(){var J_=new da(["Post XHR failure, status %d",p_.status]);J_.statusCode=p_.status,J_.message=p_.response||"Request failed, status ".concat(p_.status),F_(J_)},p_.onabort=function(){try{F_(new DOMException("The request aborted.","AbortError"))}catch(z_){var J_=Error("The request aborted.");J_.name="AbortError",F_(J_)}}}));case 50:case"end":return E_.stop()}},h,null,[[32,41]])}))).apply(this,arguments)}function Un(h){return nj.apply(this,arguments)}function nj(){return(nj=J(x.mark(function h(l){var g;return x.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(g=new Image).src=l,f.abrupt("return",new Promise(function(k,q){g.onload=function(){k({width:g.width,height:g.height})},g.onerror=q}));case 3:case"end":return f.stop()}},h)}))).apply(this,arguments)}function Sv(h,l){return oj.apply(this,arguments)}function oj(){return(oj=J(x.mark(function h(l,g){var f,k,q,_r,_s,_a,_l,bh,n_,_A;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:if(_r=void 0===(q=l.thumbnailWidth)?0:q,_a=void 0===(_s=l.width)?0:_s,bh=void 0===(_l=l.height)?0:_l,n_=l.thumbnail,_A=[],"number"==typeof(k=void 0===(f=l.thumbnailHeight)?0:f)&&"number"==typeof _r&&"number"==typeof _a&&"number"==typeof bh){r_.next=5;break}throw new H("Invalid message params",Of);case 5:return 0>=_a&&0>=bh&&_A.push(Un(Vn(g)).then(function(p_){_a=p_.width,bh=p_.height})),0>=_r&&0>=k&&void 0!==n_&&_A.push(pj(n_).then(function(){var p_=J(x.mark(function I_(v_){var S_;return x.wrap(function(x_){for(;;)switch(x_.prev=x_.next){case 0:return x_.next=2,Un(Vn(v_));case 2:_r=(S_=x_.sent).width,k=S_.height;case 5:case"end":return x_.stop()}},I_)}));return function(I_){return p_.apply(this,arguments)}}())),r_.next=9,Promise.all(_A).catch(function(){});case 9:return r_.abrupt("return",{width:_a,height:bh,thumbnailWidth:_r,thumbnailHeight:k});case 10:case"end":return r_.stop()}},h)}))).apply(this,arguments)}function Wn(h,l){if(!Hd(h))throw new H("message object is not a plain object",l);if(void 0===h.messageType)if(h.rawMessage instanceof Uint8Array){if(h.messageType="RAW",void 0!==h.text)throw new H("Raw messages cannot have text property. Use description instead",l)}else{if("string"!=typeof h.text)throw new H("messageType is undefined",l);if(h.messageType="TEXT",void 0!==h.rawMessage)throw new H("Text messages cannot have rawMessage property",l)}}function dh(h){return qj.apply(this,arguments)}function qj(){return(qj=J(x.mark(function h(l){var g,f,k,q,_r,_s,_a,_l,bh,n_,_A,r_,p_,I_,v_,S_,x_,B_,Q_,_0,c0;return x.wrap(function(Qv){for(;;)switch(Qv.prev=Qv.next){case 0:if(g=l.message,f=l.peerId,k=l.toPeer,_r=l.errorCodes,_s=l.diff,_a=l.logger,_l=l.options,void 0!==(q=l.session)){Qv.next=3;break}throw new L("The client is not logged in. Cannot do the operation",_r.NOT_LOGGED_IN);case 3:if(bh=!1,"TEXT"!==g.messageType||!g.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!k){Qv.next=11;break}if(n_=g.text.split("_"),_A=ua(n_,3),r_=_A[0],p_=_A[1],void 0!==_A[2]&&Aa(p_)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===r_){Qv.next=10;break}throw new H("Message is not valid",Ie);case 10:bh=!0;case 11:if(I_=Date.now(),!((S_=q.messageSentTimes[v_=q.messageSentTimes.length-1])&&S_+3e3<I_)){Qv.next=18;break}q.messageSentTimes=[I_],Qv.next=29;break;case 18:x_=v_;case 19:if(!(0<=x_)){Qv.next=28;break}if(!(q.messageSentTimes[x_]+3e3<I_)){Qv.next=23;break}return q.messageSentTimes=q.messageSentTimes.slice(x_+1,v_+1),Qv.abrupt("break",28);case 23:if(!(180<=v_-x_+1)){Qv.next=25;break}throw new lb("Message sent failed, exceeded the 180 message in 3 seconds",_r.TOO_OFTEN);case 25:x_--,Qv.next=19;break;case 28:q.messageSentTimes.push(I_);case 29:Qv.t0=g.messageType,Qv.next="TEXT"===Qv.t0?32:"RAW"===Qv.t0?37:"FILE"===Qv.t0||"IMAGE"===Qv.t0?39:40;break;case 32:if(!bh){Qv.next=36;break}return B_=g.text.split("_"),Q_=ua(B_,3),_0=Q_[1],c0=Q_[2],_a.info("[rtm-API] EndCall message send api is called"),Qv.abrupt("return",q.sendInvitationMessage({peerId:f,type:"CallCancel",extra:c0,channelId:_0,callId:"0"}));case 36:return Qv.abrupt("return",q.sendTextMessage(g.text,f,k,_l,1e4-_s));case 37:return void 0===g.description&&(g.description=""),Qv.abrupt("return",q.sendRawMessage(g.rawMessage,g.description,f,k,_l,1e4-_s));case 39:return Qv.abrupt("return",q.sendMediaMessage(g.messageType,g,f,k,_l,1e4-_s));case 40:throw new H("Invalid message type",Ie);case 41:case"end":return Qv.stop()}},h)}))).apply(this,arguments)}function Tv(h){var l=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],g=h.replace(/(https?:\/\/)?(www.)?/i,"");return l||(g=g.split(".").slice(h.length-2).join(".")),-1!==g.indexOf("/")?g.split("/")[0]:g}function pa(h){if("string"!=typeof h)return"[Sensitive Info]";var l=Math.floor(.7*h.length),g=h.length;return Xn(h,l,g,"*".repeat(g-l))}function Yn(h,l,g){function f(k){if(void 0===h)return h;if(Km(k))return k;if(Array.isArray(k))return k.map(f);var q={},_r=0;for(k=eh(k);_r<k.length;_r++){var _s=ua(k[_r],2),_a=_s[0];if("string"==typeof(_s=_s[1])&&g.includes(_a)){q[_a]="string"==typeof _s?pa(_s):"[Sensitive Info]";break}q[_a]=l.includes(_a)?"[Hidden Info]":null==_s?_s:g.includes(_a)?"[Sensitive Info]":f(_s)}return q}return Array.isArray(h)?h.map(f):f(h)}function Zn(h){return Object.getOwnPropertyNames(h).forEach(function(l){"object"==V(l=h[l])&&null!==l&&Zn(l)}),Object.freeze(h)}function ra(h){return new TextDecoder("utf-8").decode(h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength))}function fh(h){return(new TextEncoder).encode(h).length}function $n(){for(var h=0,l=arguments.length,g=Array(l),f=0;f<l;f++)g[f]=arguments[f];for(l=0;l<g.length;l++)h+=g[l].length;for(h=new Uint8Array(h),f=l=0;f<g.length;f++){var k=g[f];h.set(k,l),l+=k.length}return h}function Je(h,l,g){var f=h.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(h=null==f?void 0:f[1],f=null==f?void 0:f[2]){var k;for(f=f.substr(1).split("&"),k=0;k<f.length;k++)if(f[k].split("=")[0]==l){f[k]=l+"="+encodeURIComponent(g);break}return k==f.length&&f.push(l+"="+encodeURIComponent(g)),h+"?"+f.join("&")}return h+"?"+l+"="+encodeURIComponent(g)}function pj(h){return new Promise(function(l,g){var f=new FileReader;f.onloadend=function(){var k=f.result||new ArrayBuffer(0);l(k)},f.onerror=g,f.readAsArrayBuffer(h)})}function Uv(h,l){h=h=[h],"string"==typeof(l=l||{})&&(l={type:l});try{var g=new Blob(h,l)}catch(k){if("TypeError"!==k.name)throw k;g=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder);for(var f=0;f<h.length;f+=1)g.append(h[f]);g=g.getBlob(l.type)}return g}function Xn(h,l,g,f){return"string"!=typeof h?"[Sensitive Info]":h.substring(0,l)+f+h.substring(g)}function Pd(h){return"string"==typeof h&&0!==h.length&&"false"!==h&&"null"!==h&&"undefined"!==h}function ao(h){var l=[];return function g(f){if(null===f||"object"!==V(f))return f;if(-1!==l.indexOf(f))return"[Circular]";if(l.push(f),"function"==typeof f.toJSON)try{var k=g(f.toJSON());return l.pop(),k}catch(q){return"[Throws: "+(q?q.message:"?")+"]"}return Array.isArray(f)?(k=f.map(g),l.pop(),k):(k=Object.keys(f).reduce(function(q,_r){e:{if(Vv.call(f,_r))try{var _s=f[_r];break e}catch(_a){_s="[Throws: "+(_a?_a.message:"?")+"]";break e}_s=f[_r]}return q[_r]=g(_s),q},{}),l.pop(),k)}(h)}function Wv(h){if(!(100<(h=String(h)).length)&&(h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h))){var l=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return 864e5*l;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*l;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*l;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l}}}function gh(h,l,g,f){return Math.round(h/g)+" "+f+(l>=1.5*g?"s":"")}function Xv(h){var l=h.areas,g=h.excludedArea;if(1===l.length&&l[0]===D.GLOBAL&&g===D.CHINA)return Ke([D.OVERSEA]);if(l.includes(D.GLOBAL)){if(h=Pf(hh).filter(function(q){return q!==D.GLOBAL&&q!==D.OVERSEA}),g in Qf){var f=[].concat(G(null!=(l=Qf[g])?l:[]),[g]);return Ke(h.filter(function(q){return!f.includes(q)}))}if(bo(g)){var k=Yv(g);return Ke(h.filter(function(q){return q!==g&&q!==k}))}}if(bo(g)||g in Qf)return Ke(l);throw new H("Invalid excludedArea area config")}function Ra(h,l,g){void 0===g&&(g=Object.getOwnPropertyDescriptor(h,l));var f=g.value;return g.value=function(){for(var k=this,q=arguments.length,_r=Array(q),_s=0;_s<q;_s++)_r[_s]=arguments[_s];this.invokeTracker.apply(this,["%s: ".concat(0<_r.length?"%s with args: ".concat(_r.map(function(){return"%o"})):"%s"),this.name,l].concat(G(_r.map(Le))));try{var _a=f.apply(this,_r)}catch(bh){throw this.logError.apply(this,["".concat(void 0!==bh.code?"Error Code ".concat(bh.code,": "):"","%s failed").concat(0<_r.length?" with args: ".concat(_r.map(function(){return"%o"})):""),l].concat(G(_r.map(Le)))),bh.originalError&&this.logError(bh.originalError),this.errorTracker(bh),bh}var _l=Date.now();return J(x.mark(function bh(){var n_,_A;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:return r_.prev=0,r_.next=3,_a;case 3:n_=r_.sent,r_.next=12;break;case 6:return r_.prev=6,r_.t0=r_.catch(0),k.logError.apply(k,["".concat(void 0!==r_.t0.code?"Error Code ".concat(r_.t0.code,": "):"","%s failed").concat(0<_r.length?" with args: ".concat(_r.map(function(){return"%o"})):""),l].concat(G(_r.map(Le)))),r_.t0.originalError&&k.logError(r_.t0.originalError),k.errorTracker(r_.t0),r_.abrupt("return");case 12:n_!==_a?void 0===n_?k.resultTracker("%s promise resolves after %dms",l,Date.now()-_l):k.resultTracker("%s promise resolves after %dms, result is %o",l,Date.now()-_l,Le(n_)):"Object"!==Jc(n_)||Hd(n_)?k.resultTracker("%s result is %o",l,Le(n_)):k.resultTracker("%s result is %s",l,n_.name||(null===(_A=n_.constructor)||void 0===_A?void 0:_A.name));case 13:case"end":return r_.stop()}},bh,null,[[0,6]])}))(),_a},g}function Qb(h,l,g){void 0===g&&(g=Object.getOwnPropertyDescriptor(h,l));var f=g.value;return g.value=function(){for(var k=this,q=arguments.length,_r=Array(q),_s=0;_s<q;_s++)_r[_s]=arguments[_s];this.invokeTracker.apply(this,["%s: ".concat(0<_r.length?"%s with args: ".concat(_r.map(function(){return"%o"})):"%s"),this.name,l].concat(_r));try{var _a=f.apply(this,_r)}catch(bh){throw this.logError.apply(this,["".concat(void 0!==bh.code?"Error Code ".concat(bh.code,": "):"","%s failed").concat(0<_r.length?" with args: ".concat(_r.map(function(){return"%o"})):""),l].concat(_r)),bh.originalError&&this.logError(bh.originalError),this.errorTracker(bh),bh}var _l=Date.now();return J(x.mark(function bh(){var n_,_A;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:return r_.prev=0,r_.next=3,_a;case 3:n_=r_.sent,r_.next=12;break;case 6:return r_.prev=6,r_.t0=r_.catch(0),k.logError.apply(k,["".concat(void 0!==r_.t0.code?"Error Code ".concat(r_.t0.code,": "):"","%s failed").concat(0<_r.length?" with args: ".concat(_r.map(function(){return"%o"})):""),l].concat(_r)),r_.t0.originalError&&k.logError(r_.t0.originalError),k.errorTracker(r_.t0),r_.abrupt("return");case 12:n_!==_a?void 0===n_?k.resultTracker("%s promise resolves after %dms",l,Date.now()-_l):k.resultTracker("%s promise resolves after %dms, result is %o",l,Date.now()-_l,n_):"Object"!==Jc(n_)||Hd(n_)?k.resultTracker("%s result is %o",l,n_):k.resultTracker("%s result is %s",l,n_.name||(null===(_A=n_.constructor)||void 0===_A?void 0:_A.name));case 13:case"end":return r_.stop()}},bh,null,[[0,6]])}))(),_a},g}function Zv(h,l){var g="".concat(h,"Uri");if("number"!=typeof(g=rj[g])||0===g)throw new TypeError("Got Unknown URI Name");return l=new(h=co[h])(l),l=h.encode(l).finish(),new $v({uri:g,data:l})}function eo(h,l){var g=Pd(null);return"".concat(h.split(".").join("-"),".edge.").concat(g?null:l?"sd-rtn.com":"agora.io")}function hb(h,l,g){return sj.apply(this,arguments)}function sj(){return(sj=J(x.mark(function h(l,g,f){var k,q,_r,_s=arguments;return x.wrap(function(_a){for(;;)switch(_a.prev=_a.next){case 0:return k=3<_s.length&&void 0!==_s[3]&&_s[3],q=aw[l].encode(g).finish(),_r=function(){var _l=J(x.mark(function bh(n_){var _A,r_,p_,I_=arguments;return x.wrap(function(v_){for(;;)switch(v_.prev=v_.next){case 0:if(!(3<(r_=1<I_.length&&void 0!==I_[1]?I_[1]:0))){v_.next=3;break}return v_.abrupt("return");case 3:if(p_=Je(p_=f?"https://".concat(null!==(_A=null==P?void 0:P.PROXY_NGINX[0])&&void 0!==_A?_A:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(n_,"&p=443&d=events/proto-raw"):"https://".concat(n_,"/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),p_=Je(p_,"id",bw[l].toString()),!k){v_.next=9;break}return v_.next=9,gj(1e4);case 9:return v_.next=11,He(p_,{body:q,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch(function(S_){return _r(n_,r_+1)});case 11:case"end":return v_.stop()}},bh)}));return function(bh){return _l.apply(this,arguments)}}(),_a.prev=3,_a.next=6,_r((null==P?void 0:P.EVENT_REPORT_DOMAIN[0])||Pd(null)&&null||"webcollector-rtm.agora.io");case 6:_a.next=12;break;case 8:return _a.prev=8,_a.t0=_a.catch(3),_a.next=12,_r(P&&fo(1<(null==P?void 0:P.EVENT_REPORT_DOMAIN.length)?null==P?void 0:P.EVENT_REPORT_DOMAIN.slice(1):null==P?void 0:P.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 12:case"end":return _a.stop()}},h,null,[[3,8]])}))).apply(this,arguments)}function ib(h){return U.fromNumber(void 0===h?0:Date.now()-h)}function cw(h){return btoa(String.fromCharCode.apply({},h.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(function(l){return parseInt(l,16)}))).replace(/={1,2}$/,"")}function ih(h,l){return U.fromValue(h).eq(l)}function jh(h,l){var g=void 0===l?h.val:l,f=h.isBoolean,k=h.oneof,q=h.len;if(2!==[f,l=h.isNumber,k].filter(function(_r){return!_r}).length)throw new TypeError("invalid field type");if(void 0!==g&&(h=!1,void 0!==k&&(k=tj(k),dw(k,ih).length===k.length&&void 0!==ew(k,function(_r){return ih(g,_r)})&&(h=!0)),f=void 0!==f&&(0===g||1===g)&&1===q,l=void 0!==l&&g.toString(2).length<=q,!(h||f||l)))throw Error("invalid field value")}function go(h){return h.reduce(function(l,g){return l.concat(g instanceof kh.UnsubscriptionError?g.errors:g)},[])}function fw(h,l){do{2147483647==Rf?Rf=0:Rf++}while(Me.hasOwnProperty(Rf));var g=Rf;return Me[g]={callback:h,parameters:Array.prototype.slice.call(arguments,2)},uj.postMessage({name:"setInterval",fakeId:g,time:l}),g}function ho(h){return function(){var l=h();if(!l)throw new L("Client is not logged in. Cannot do the operation");return l}}var Ka="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lh=function(h){return h&&h.Math==Math&&h},C=lh("object"==typeof globalThis&&globalThis)||lh("object"==typeof window&&window)||lh("object"==typeof self&&self)||lh("object"==typeof Ka&&Ka)||function(){return this}()||Function("return this")(),R=function(h){try{return!!h()}catch(l){return!0}},fa=!R(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),io={}.propertyIsEnumerable,jo=Object.getOwnPropertyDescriptor,Sf=jo&&!io.call({1:2},1)?function(h){return!!(h=jo(this,h))&&h.enumerable}:io,sc=function(h,l){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:l}},gw={}.toString,ec=function(h){return gw.call(h).slice(8,-1)},hw="".split,Tf=R(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return"String"==ec(h)?hw.call(h,""):Object(h)}:Object,mb=function(h){if(null==h)throw TypeError("Can't call method on "+h);return h},tb=function(h){return Tf(mb(h))},ha=function(h){return"object"==typeof h?null!==h:"function"==typeof h},tc=function(h,l){if(!ha(h))return h;var g,f;if(l&&"function"==typeof(g=h.toString)&&!ha(f=g.call(h))||"function"==typeof(g=h.valueOf)&&!ha(f=g.call(h))||!l&&"function"==typeof(g=h.toString)&&!ha(f=g.call(h)))return f;throw TypeError("Can't convert object to primitive value")},Va=function(h){return Object(mb(h))},iw={}.hasOwnProperty,Q=function(h,l){return iw.call(Va(h),l)},Ne=C.document,mh=ha(Ne)&&ha(Ne.createElement),ko=!fa&&!R(function(){return 7!=Object.defineProperty(mh?Ne.createElement("div"):{},"a",{get:function(){return 7}}).a}),lo=Object.getOwnPropertyDescriptor,Jb={f:fa?lo:function(h,l){if(h=tb(h),l=tc(l,!0),ko)try{return lo(h,l)}catch(g){}if(Q(h,l))return sc(!Sf.call(h,l),h[l])}},sa=function(h){if(!ha(h))throw TypeError(String(h)+" is not an object");return h},mo=Object.defineProperty,Wa={f:fa?mo:function(h,l,g){if(sa(h),l=tc(l,!0),sa(g),ko)try{return mo(h,l,g)}catch(f){}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(h[l]=g.value),h}},Sa=fa?function(h,l,g){return Wa.f(h,l,sc(1,g))}:function(h,l,g){return h[l]=g,h},vj=function(h,l){try{Sa(C,h,l)}catch(g){C[h]=l}return l},kd=C["__core-js_shared__"]||vj("__core-js_shared__",{}),jw=Function.toString;"function"!=typeof kd.inspectSource&&(kd.inspectSource=function(h){return jw.call(h)});var wj=kd.inspectSource,no=C.WeakMap,kw="function"==typeof no&&/native code/.test(wj(no)),ld=cb(function(h){(h.exports=function(l,g){return kd[l]||(kd[l]=void 0!==g?g:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),lw=0,mw=Math.random(),Oe=function(h){return"Symbol("+String(void 0===h?"":h)+")_"+(++lw+mw).toString(36)},oo=ld("keys"),nh=function(h){return oo[h]||(oo[h]=Oe(h))},Pe={},nw=C.WeakMap;if(kw||kd.state)var Qd=kd.state||(kd.state=new nw),ow=Qd.get,po=Qd.has,pw=Qd.set,xj=function(h,l){if(po.call(Qd,h))throw new TypeError("Object already initialized");return l.facade=h,pw.call(Qd,h,l),l},oh=function(h){return ow.call(Qd,h)||{}},yj=function(h){return po.call(Qd,h)};else{var Qe=nh("state");Pe[Qe]=!0,xj=function(h,l){if(Q(h,Qe))throw new TypeError("Object already initialized");return l.facade=h,Sa(h,Qe,l),l},oh=function(h){return Q(h,Qe)?h[Qe]:{}},yj=function(h){return Q(h,Qe)}}var La={set:xj,get:oh,has:yj,enforce:function(h){return yj(h)?oh(h):xj(h,{})},getterFor:function(h){return function(l){var g;if(!ha(l)||(g=oh(l)).type!==h)throw TypeError("Incompatible receiver, "+h+" required");return g}}},Ea=cb(function(h){var l=La.get,g=La.enforce,f=String(String).split("String");(h.exports=function(k,q,_r,_s){var _a=!!_s&&!!_s.unsafe,_l=!!_s&&!!_s.enumerable;if(_s=!!_s&&!!_s.noTargetGet,"function"==typeof _r){"string"!=typeof q||Q(_r,"name")||Sa(_r,"name",q);var bh=g(_r);bh.source||(bh.source=f.join("string"==typeof q?q:""))}k===C?_l?k[q]=_r:vj(q,_r):(_a?!_s&&k[q]&&(_l=!0):delete k[q],_l?k[q]=_r:Sa(k,q,_r))})(Function.prototype,"toString",function(){return"function"==typeof this&&l(this).source||wj(this)})}),qo=function(h){return"function"==typeof h?h:void 0},Rb=function(h,l){return 2>arguments.length?qo(C[h])||qo(C[h]):C[h]&&C[h][l]||C[h]&&C[h][l]},qw=Math.ceil,rw=Math.floor,fc=function(h){return isNaN(h=+h)?0:(0<h?rw:qw)(h)},sw=Math.min,va=function(h){return 0<h?sw(fc(h),9007199254740991):0},tw=Math.max,uw=Math.min,Ab=function(h,l){return 0>(h=fc(h))?tw(h+l,0):uw(h,l)},ro=function(h){return function(l,g,f){l=tb(l);var k=va(l.length);if(f=Ab(f,k),h&&g!=g){for(;k>f;)if((g=l[f++])!=g)return!0}else for(;k>f;f++)if((h||f in l)&&l[f]===g)return h||f||0;return!h&&-1}},so=ro(!0),zj=ro(!1),to=function(h,l){h=tb(h);var g,f=0,k=[];for(g in h)!Q(Pe,g)&&Q(h,g)&&k.push(g);for(;l.length>f;)Q(h,g=l[f++])&&(~zj(k,g)||k.push(g));return k},ph="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),vw=ph.concat("length","prototype"),Rd={f:Object.getOwnPropertyNames||function(h){return to(h,vw)}},Uf={f:Object.getOwnPropertySymbols},uo=Rb("Reflect","ownKeys")||function(h){var l=Rd.f(sa(h)),g=Uf.f;return g?l.concat(g(h)):l},vo=function(h,l){for(var g=uo(l),f=Wa.f,k=Jb.f,q=0;q<g.length;q++){var _r=g[q];Q(h,_r)||f(h,_r,k(l,_r))}},ww=/#|\.prototype\./,uc=function(h,l){return(h=xw[yw(h)])==zw||h!=Aw&&("function"==typeof l?R(l):!!l)},yw=uc.normalize=function(h){return String(h).replace(ww,".").toLowerCase()},xw=uc.data={},Aw=uc.NATIVE="N",zw=uc.POLYFILL="P",Bw=Jb.f,M=function(h,l){var g,f,k,q=h.target,_r=h.global,_s=h.stat;if(f=_r?C:_s?C[q]||vj(q,{}):(C[q]||{}).prototype)for(k in l){var _a=l[k],_l=h.noTargetGet?(g=Bw(f,k))&&g.value:f[k];if(!(g=uc(_r?k:q+(_s?".":"#")+k,h.forced))&&void 0!==_l){if(typeof _a==typeof _l)continue;vo(_a,_l)}(h.sham||_l&&_l.sham)&&Sa(_a,"sham",!0);try{Ea(f,k,_a,h)}catch(bh){}}},Aj=function(){var h=sa(this),l="";return h.global&&(l+="g"),h.ignoreCase&&(l+="i"),h.multiline&&(l+="m"),h.dotAll&&(l+="s"),h.unicode&&(l+="u"),h.sticky&&(l+="y"),l},vc=R(function(){var h=RegExp("a","y");return h.lastIndex=2,null!=h.exec("abcd")}),Cw=R(function(){var h=RegExp("^r","gy");return h.lastIndex=2,null!=h.exec("str")}),qh=RegExp.prototype.exec,Dw=ld("native-string-replace",String.prototype.replace),wo=qh,Bj=(c=/a/,a=/b*/g,qh.call(c,"a"),qh.call(a,"a"),0!==c.lastIndex||0!==a.lastIndex),xo=vc||Cw,Cj=void 0!==/()??/.exec("")[1],c,a;(Bj||Cj||xo)&&(wo=function(h){var l,g=xo&&this.sticky,f=Aj.call(this),k=this.source,q=0,_r=h;if(g){-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),_r=String(h).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==h[this.lastIndex-1])&&(k="(?: "+k+")",_r=" "+_r,q++);var _s=new RegExp("^(?:"+k+")",f)}if(Cj&&(_s=new RegExp("^"+k+"$(?!\\s)",f)),Bj)var _a=this.lastIndex;var _l=qh.call(g?_s:this,_r);return g?_l?(_l.input=_l.input.slice(q),_l[0]=_l[0].slice(q),_l.index=this.lastIndex,this.lastIndex+=_l[0].length):this.lastIndex=0:Bj&&_l&&(this.lastIndex=this.global?_l.index+_l[0].length:_a),Cj&&_l&&1<_l.length&&Dw.call(_l[0],_s,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(_l[l]=void 0)}),_l});var Vf=wo;M({target:"RegExp",proto:!0,forced:/./.exec!==Vf},{exec:Vf});var Re=Rb("navigator","userAgent")||"",yo=C.process,zo=yo&&yo.versions,Ao=zo&&zo.v8;if(Ao)var md=Ao.split("."),Dj=4>md[0]?1:md[0]+md[1];else Re&&(md=Re.match(/Edge\/(\d+)/),(!md||74<=md[1])&&(md=Re.match(/Chrome\/(\d+)/))&&(Dj=md[1]));var nd=Dj&&+Dj,wc=!!Object.getOwnPropertySymbols&&!R(function(){return!String(Symbol())||!Symbol.sham&&nd&&41>nd}),Bo=wc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wf=ld("wks"),Xf=C.Symbol,Ew=Bo?Xf:Xf&&Xf.withoutSetter||Oe,qa=function(h){return Q(Wf,h)&&(wc||"string"==typeof Wf[h])||(Wf[h]=wc&&Q(Xf,h)?Xf[h]:Ew("Symbol."+h)),Wf[h]},Fw=qa("species"),Ej=RegExp.prototype,Gw=!R(function(){var h=/./;return h.exec=function(){var l=[];return l.groups={a:"7"},l},"7"!=="".replace(h,"$<a>")}),Co="$0"==="a".replace(/./,"$0"),Do=qa("replace"),Eo=!!/./[Do]&&""===/./[Do]("a","$0"),Hw=!R(function(){var h=/(?:)/,l=h.exec;return h.exec=function(){return l.apply(this,arguments)},2!==(h="ab".split(h)).length||"a"!==h[0]||"b"!==h[1]}),rh=function(h,l,g,f){var k=qa(h),q=!R(function(){var _l={};return _l[k]=function(){return 7},7!=""[h](_l)}),_r=q&&!R(function(){var _l=!1,bh=/a/;return"split"===h&&((bh={constructor:{}}).constructor[Fw]=function(){return bh},bh.flags="",bh[k]=/./[k]),bh.exec=function(){return _l=!0,null},bh[k](""),!_l});if(!q||!_r||"replace"===h&&(!Gw||!Co||Eo)||"split"===h&&!Hw){var _s=/./[k],_a=(g=g(k,""[h],function(_l,bh,n_,_A,r_){var p_=bh.exec;return p_===Vf||p_===Ej.exec?q&&!r_?{done:!0,value:_s.call(bh,n_,_A)}:{done:!0,value:_l.call(n_,bh,_A)}:{done:!1}},{REPLACE_KEEPS_$0:Co,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Eo}))[1];Ea(String.prototype,h,g[0]),Ea(Ej,k,2==l?function(_l,bh){return _a.call(_l,this,bh)}:function(_l){return _a.call(_l,this)})}f&&Sa(Ej[k],"sham",!0)},Iw=qa("match"),Fj=function(h){var l;return ha(h)&&(void 0!==(l=h[Iw])?!!l:"RegExp"==ec(h))},Bb=function(h){if("function"!=typeof h)throw TypeError(String(h)+" is not a function");return h},Jw=qa("species"),od=function(h,l){var g;return void 0===(h=sa(h).constructor)||null==(g=sa(h)[Jw])?l:Bb(g)},Fo=function(h){return function(l,g){l=String(mb(l)),g=fc(g);var f,k=l.length;if(0>g||g>=k)return h?"":void 0;var q=l.charCodeAt(g);return 55296>q||56319<q||g+1===k||56320>(f=l.charCodeAt(g+1))||57343<f?h?l.charAt(g):q:h?l.slice(g,g+2):f-56320+(q-55296<<10)+65536}},Kw=Fo(!1),Go=Fo(!0),Gj=function(h,l,g){return l+(g?Go(h,l).length:1)},Se=function(h,l){var g=h.exec;if("function"==typeof g){if("object"!=typeof(h=g.call(h,l)))throw TypeError("RegExp exec method returned something other than an Object or null");return h}if("RegExp"!==ec(h))throw TypeError("RegExp#exec called on incompatible receiver");return Vf.call(h,l)},Lw=[].push,Mw=Math.min;rh("split",2,function(h,l,g){var f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(k,q){var _r=String(mb(this));if(0==(q=void 0===q?4294967295:q>>>0))return[];if(void 0===k)return[_r];if(!Fj(k))return l.call(_r,k,q);var _s,_a,_l,bh=[],n_=0;for(k=new RegExp(k.source,(k.ignoreCase?"i":"")+(k.multiline?"m":"")+(k.unicode?"u":"")+(k.sticky?"y":"")+"g");(_s=Vf.call(k,_r))&&!((_a=k.lastIndex)>n_&&(bh.push(_r.slice(n_,_s.index)),1<_s.length&&_s.index<_r.length&&Lw.apply(bh,_s.slice(1)),_l=_s[0].length,n_=_a,bh.length>=q));)k.lastIndex===_s.index&&k.lastIndex++;return n_===_r.length?(_l||!k.test(""))&&bh.push(""):bh.push(_r.slice(n_)),bh.length>q?bh.slice(0,q):bh}:"0".split(void 0,0).length?function(k,q){return void 0===k&&0===q?[]:l.call(this,k,q)}:l;return[function(k,q){var _r=mb(this),_s=null==k?void 0:k[h];return void 0!==_s?_s.call(k,_r,q):f.call(String(_r),k,q)},function(k,q){var _r=g(f,k,this,q,f!==l);if(_r.done)return _r.value;var _s=sa(k);k=String(this);var _a=od(_s,RegExp);if(_r=_s.unicode,_s=new _a(vc?"^(?:"+_s.source+")":_s,(_s.ignoreCase?"i":"")+(_s.multiline?"m":"")+(_s.unicode?"u":"")+(vc?"g":"y")),0==(q=void 0===q?4294967295:q>>>0))return[];if(0===k.length)return null===Se(_s,k)?[k]:[];var _l=0,bh=0;for(_a=[];bh<k.length;){_s.lastIndex=vc?0:bh;var n_,_A=Se(_s,vc?k.slice(bh):k);if(null===_A||(n_=Mw(va(_s.lastIndex+(vc?bh:0)),k.length))===_l)bh=Gj(k,bh,_r);else{if(_a.push(k.slice(_l,bh)),_a.length===q)return _a;for(_l=1;_l<=_A.length-1;_l++)if(_a.push(_A[_l]),_a.length===q)return _a;bh=_l=n_}}return _a.push(k.slice(_l)),_a}]},vc);var Nw=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,Ow=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Hj=function(h){return function(l){return l=String(mb(l)),1&h&&(l=l.replace(Nw,"")),2&h&&(l=l.replace(Ow,"")),l}};Hj(1),Hj(2);var Ij=Hj(3),sh=C.parseInt,Pw=/^[+-]?0[Xx]/,Ho=8!==sh("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==sh("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16")?function(h,l){return h=Ij(String(h)),sh(h,l>>>0||(Pw.test(h)?16:10))}:sh;M({global:!0,forced:parseInt!=Ho},{parseInt:Ho});var pd=function(h,l,g){if(Bb(h),void 0===l)return h;switch(g){case 0:return function(){return h.call(l)};case 1:return function(f){return h.call(l,f)};case 2:return function(f,k){return h.call(l,f,k)};case 3:return function(f,k,q){return h.call(l,f,k,q)}}return function(){return h.apply(l,arguments)}},qd=Array.isArray||function(h){return"Array"==ec(h)},Qw=qa("species"),th=function(h,l){if(qd(h)){var g=h.constructor;"function"!=typeof g||g!==Array&&!qd(g.prototype)?ha(g)&&null===(g=g[Qw])&&(g=void 0):g=void 0}return new(void 0===g?Array:g)(0===l?0:l)},Io=[].push,rd=function(h){var l=1==h,g=2==h,f=3==h,k=4==h,q=6==h,_r=7==h,_s=5==h||q;return function(_a,_l,bh,n_){var _A=Va(_a),r_=Tf(_A);_l=pd(_l,bh,3),bh=va(r_.length);var p_,I_=0;for(n_=n_||th,_a=l?n_(_a,bh):g||_r?n_(_a,0):void 0;bh>I_;I_++)if((_s||I_ in r_)&&(p_=_l(n_=r_[I_],I_,_A),h))if(l)_a[I_]=p_;else if(p_)switch(h){case 3:return!0;case 5:return n_;case 6:return I_;case 2:Io.call(_a,n_)}else switch(h){case 4:return!1;case 7:Io.call(_a,n_)}return q?-1:f||k?k:_a}},Sd=rd(0),Jo=rd(1),Ko=rd(2),Rw=rd(3),Sw=rd(4),Lo=rd(5),Mo=rd(6);rd(7);var Tw=qa("species"),Yf=function(h){return 51<=nd||!R(function(){var l=[];return(l.constructor={})[Tw]=function(){return{foo:1}},1!==l[h](Boolean).foo})},Uw=Yf("filter");M({target:"Array",proto:!0,forced:!Uw},{filter:function(h){return Ko(this,h,1<arguments.length?arguments[1]:void 0)}});var Mc=Object.keys||function(h){return to(h,ph)},Vw=R(function(){Mc(1)});M({target:"Object",stat:!0,forced:Vw},{keys:function(h){return Mc(Va(h))}});var Te=function(h,l){var g=[][h];return!!g&&R(function(){g.call(null,l||function(){throw 1},1)})},Ww=[].join,Xw=Tf!=Object,Yw=Te("join",",");M({target:"Array",proto:!0,forced:Xw||!Yw},{join:function(h){return Ww.call(tb(this),void 0===h?",":h)}});var Zw=Yf("map");M({target:"Array",proto:!0,forced:!Zw},{map:function(h){return Jo(this,h,1<arguments.length?arguments[1]:void 0)}});var Jj=function(h){var l=h.return;if(void 0!==l)return sa(l.call(h)).value},Ue={},$w=qa("iterator"),ax=Array.prototype,Kj=function(h){return void 0!==h&&(Ue.Array===h||ax[$w]===h)},Ve=function(h,l,g){(l=tc(l))in h?Wa.f(h,l,sc(0,g)):h[l]=g},bx=qa("toStringTag"),No={};No[bx]="z";var Lj="[object z]"===String(No),cx=qa("toStringTag"),dx="Arguments"==ec(function(){return arguments}()),We=Lj?ec:function(h){var l;if(void 0===h)var g="Undefined";else{if(null===h)var f="Null";else{e:{var k=h=Object(h);try{f=k[cx];break e}catch(q){}f=void 0}f="string"==typeof(g=f)?g:dx?ec(h):"Object"==(l=ec(h))&&"function"==typeof h.callee?"Arguments":l}g=f}return g},ex=qa("iterator"),Zf=function(h){if(null!=h)return h[ex]||h["@@iterator"]||Ue[We(h)]},Td=function(h){var l,g=Va(h),f="function"==typeof this?this:Array,k=arguments.length,q=1<k?arguments[1]:void 0,_r=void 0!==q,_s=Zf(g),_a=0;if(_r&&(q=pd(q,2<k?arguments[2]:void 0,2)),null==_s||f==Array&&Kj(_s)){var _l=va(g.length);for(f=new f(_l);_l>_a;_a++)_s=_r?q(g[_a],_a):g[_a],Ve(f,_a,_s)}else for(k=(g=_s.call(g)).next,f=new f;!(l=k.call(g)).done;_a++){if(_r){_s=g;var bh=q;l=[l.value,_a];try{_l=bh(sa(l)[0],l[1])}catch(n_){throw Jj(_s),n_}}else _l=l.value;Ve(f,_a,_s=_l)}return f.length=_a,f},Oo=qa("iterator"),Po=!1;try{var fx=0,Qo={next:function(){return{done:!!fx++}},return:function(){Po=!0}};Qo[Oo]=function(){return this},Array.from(Qo,function(){throw 2})}catch(h){}var uh=function(h,l){if(!l&&!Po)return!1;var g=!1;try{(l={})[Oo]=function(){return{next:function(){return{done:g=!0}}}},h(l)}catch(f){}return g},gx=!uh(function(h){Array.from(h)});M({target:"Array",stat:!0,forced:gx},{from:Td});var Ro=!R(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype}),So=nh("IE_PROTO"),hx=Object.prototype,ac=Ro?Object.getPrototypeOf:function(h){return h=Va(h),Q(h,So)?h[So]:"function"==typeof h.constructor&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?hx:null},Mj=qa("iterator"),To=!1,ix=function(){return this},Ud;if([].keys){var Uo=[].keys();if("next"in Uo){var Vo=ac(ac(Uo));Vo!==Object.prototype&&(Ud=Vo)}else To=!0}(null==Ud||R(function(){var h={};return Ud[Mj].call(h)!==h}))&&(Ud={}),Q(Ud,Mj)||Sa(Ud,Mj,ix);var vh=Ud,wh=To,Wo=fa?Object.defineProperties:function(h,l){sa(h);for(var g,f=Mc(l),k=f.length,q=0;k>q;)Wa.f(h,g=f[q++],l[g]);return h},Nj=Rb("document","documentElement"),Xo=nh("IE_PROTO"),Oj=function(){},Pj,xh=function(){try{Pj=document.domain&&new ActiveXObject("htmlfile")}catch(l){}if(Pj){var h=Pj;h.write("<script><\/script>"),h.close(),h=h.parentWindow.Object}else(h=mh?Ne.createElement("iframe"):{}).style.display="none",Nj.appendChild(h),h.src="javascript:",(h=h.contentWindow.document).open(),h.write("<script>document.F=Object<\/script>"),h.close(),h=h.F;for(xh=h,h=ph.length;h--;)delete xh.prototype[ph[h]];return xh()};Pe[Xo]=!0;var Sb=Object.create||function(h,l){if(null!==h){Oj.prototype=sa(h);var g=new Oj;Oj.prototype=null,g[Xo]=h}else g=xh();return void 0===l?g:Wo(g,l)},jx=Wa.f,Yo=qa("toStringTag"),gc=function(h,l,g){h&&!Q(h=g?h:h.prototype,Yo)&&jx(h,Yo,{configurable:!0,value:l})},kx=function(){return this},Zo=function(h,l,g){return l+=" Iterator",h.prototype=Sb(vh,{next:sc(1,g)}),gc(h,l,!1),Ue[l]=kx,h},Ya=Object.setPrototypeOf||("__proto__"in{}?function(){var h=!1,l={};try{var g=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;g.call(l,[]),h=l instanceof Array}catch(f){}return function(f,k){if(sa(f),!ha(k)&&null!==k)throw TypeError("Can't set "+String(k)+" as a prototype");return h?g.call(f,k):f.__proto__=k,f}}():void 0),$f=qa("iterator"),lx=function(){return this},Qj=function(h,l,g,f,k,q,_r){Zo(g,l,f),f=function(I_){if(I_===k&&_A)return _A;if(!wh&&I_ in bh)return bh[I_];switch(I_){case"keys":case"values":case"entries":return function(){return new g(this,I_)}}return function(){return new g(this)}};var _s,_a=l+" Iterator",_l=!1,bh=h.prototype,n_=bh[$f]||bh["@@iterator"]||k&&bh[k],_A=!wh&&n_||f(k),r_="Array"==l&&bh.entries||n_;if(r_&&(h=ac(r_.call(new h)),vh!==Object.prototype&&h.next&&(ac(h)!==vh&&(Ya?Ya(h,vh):"function"!=typeof h[$f]&&Sa(h,$f,lx)),gc(h,_a,!0))),"values"==k&&n_&&"values"!==n_.name&&(_l=!0,_A=function(){return n_.call(this)}),bh[$f]!==_A&&Sa(bh,$f,_A),Ue[l]=_A,k){var p_={values:f("values"),keys:q?_A:f("keys"),entries:f("entries")};if(_r)for(_s in p_)!wh&&!_l&&_s in bh||Ea(bh,_s,p_[_s]);else M({target:l,proto:!0,forced:wh||_l},p_)}return p_},mx=La.set,nx=La.getterFor("String Iterator");Qj(String,"String",function(h){mx(this,{type:"String Iterator",string:String(h),index:0})},function(){var h=nx(this),l=h.string,g=h.index;return g>=l.length?{value:void 0,done:!0}:(l=Go(l,g),h.index+=l.length,{value:l,done:!1})});var Rj=qa("unscopables"),Sj=Array.prototype;null==Sj[Rj]&&Wa.f(Sj,Rj,{configurable:!0,value:Sb(null)});var Vd=function(h){Sj[Rj][h]=!0},$o=!0;"find"in[]&&Array(1).find(function(){$o=!1}),M({target:"Array",proto:!0,forced:$o},{find:function(h){return Lo(this,h,1<arguments.length?arguments[1]:void 0)}}),Vd("find");var ap=function(h){var l=String(mb(this)),g="";if(0>(h=fc(h))||1/0==h)throw RangeError("Wrong number of repetitions");for(;0<h;(h>>>=1)&&(l+=l))1&h&&(g+=l);return g};M({target:"String",proto:!0},{repeat:ap});var bp=[].indexOf,cp=!!bp&&0>1/[1].indexOf(1,-0),ox=Te("indexOf");M({target:"Array",proto:!0,forced:cp||!ox},{indexOf:function(h){return cp?bp.apply(this,arguments)||0:zj(this,h,1<arguments.length?arguments[1]:void 0)}});var iu=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,ju=/CrOS/,ku=/android|ipad|playbook|silk/i;pe.isMobile=pe,pe.default=pe,M({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),M({target:"Number",stat:!0},{isNaN:function(h){return h!=h}});var px=Lj?{}.toString:function(){return"[object "+We(this)+"]"};Lj||Ea(Object.prototype,"toString",px,{unsafe:!0});var Nc=C.Promise,Xe=function(h,l,g){for(var f in l)Ea(h,f,l[f],g);return h},dp=qa("species"),ag=function(h){h=Rb(h),fa&&h&&!h[dp]&&(0,Wa.f)(h,dp,{configurable:!0,get:function(){return this}})},hc=function(h,l,g){if(!(h instanceof l))throw TypeError("Incorrect "+(g?g+" ":"")+"invocation");return h},bg=function(h,l){this.stopped=h,this.result=l},yh=function(h,l,g){var f,k=!(!g||!g.AS_ENTRIES),q=!(!g||!g.IS_ITERATOR),_r=!(!g||!g.INTERRUPTED),_s=pd(l,g&&g.that,1+k+_r),_a=function(bh){return _l&&Jj(_l),new bg(!0,bh)};if(l=function(bh){return k?(sa(bh),_r?_s(bh[0],bh[1],_a):_s(bh[0],bh[1])):_r?_s(bh,_a):_s(bh)},q)var _l=h;else{if("function"!=typeof(q=Zf(h)))throw TypeError("Target is not iterable");if(Kj(q)){for(q=0,g=va(h.length);g>q;q++)if((f=l(h[q]))&&f instanceof bg)return f;return new bg(!1)}_l=q.call(h)}for(h=_l.next;!(q=h.call(_l)).done;){try{f=l(q.value)}catch(bh){throw Jj(_l),bh}if("object"==typeof f&&f&&f instanceof bg)return f}return new bg(!1)},ep=/(?:iphone|ipod|ipad).*applewebkit/i.test(Re),Oc="process"==ec(C.process),zh=C.location,Tj=C.setImmediate,fp=C.clearImmediate,qx=C.process,gp=C.MessageChannel,Uj=C.Dispatch,Vj=0,cg={},Wj=function(h){if(cg.hasOwnProperty(h)){var l=cg[h];delete cg[h],l()}},Xj=function(h){return function(){Wj(h)}},hp=function(h){Wj(h.data)},ip=function(h){C.postMessage(h+"",zh.protocol+"//"+zh.host)};if(!Tj||!fp)if(Tj=function(h){for(var l=[],g=1;arguments.length>g;)l.push(arguments[g++]);return cg[++Vj]=function(){("function"==typeof h?h:Function(h)).apply(void 0,l)},dg(Vj),Vj},fp=function(h){delete cg[h]},Oc)var dg=function(h){qx.nextTick(Xj(h))};else if(Uj&&Uj.now)dg=function(h){Uj.now(Xj(h))};else if(gp&&!ep){var jp=new gp,kp=jp.port2;jp.port1.onmessage=hp,dg=pd(kp.postMessage,kp,1)}else C.addEventListener&&"function"==typeof postMessage&&!C.importScripts&&zh&&"file:"!==zh.protocol&&!R(ip)?(dg=ip,C.addEventListener("message",hp,!1)):dg="onreadystatechange"in(mh?Ne.createElement("script"):{})?function(h){Nj.appendChild(mh?Ne.createElement("script"):{}).onreadystatechange=function(){Nj.removeChild(this),Wj(h)}}:function(h){setTimeout(Xj(h),0)};var Yj=Tj,rx=/web0s(?!.*chrome)/i.test(Re),sx=Jb.f,lp=C.MutationObserver||C.WebKitMutationObserver,mp=C.document,np=C.process,Ah=C.Promise,op=sx(C,"queueMicrotask"),pp=op&&op.value,Wd,eg;if(!pp){var Ch=function(){var h;for(Oc&&(h=np.domain)&&h.exit();Wd;){var l=Wd.fn;Wd=Wd.next;try{l()}catch(g){throw Wd?Bh():eg=void 0,g}}eg=void 0,h&&h.enter()};if(ep||Oc||rx||!lp||!mp)if(Ah&&Ah.resolve){var Zj=Ah.resolve(void 0);Zj.constructor=Ah;var tx=Zj.then,Bh=function(){tx.call(Zj,Ch)}}else Bh=Oc?function(){np.nextTick(Ch)}:function(){Yj.call(C,Ch)};else{var qp=!0,rp=mp.createTextNode("");new lp(Ch).observe(rp,{characterData:!0}),Bh=function(){rp.data=qp=!qp}}}var sp=pp||function(h){h={fn:h,next:void 0},eg&&(eg.next=h),Wd||(Wd=h,Bh()),eg=h},ux=function(h){var l,g;this.promise=new h(function(f,k){if(void 0!==l||void 0!==g)throw TypeError("Bad Promise constructor");l=f,g=k}),this.resolve=Bb(l),this.reject=Bb(g)},ak={f:function(h){return new ux(h)}},bk=function(h,l){return sa(h),ha(l)&&l.constructor===h?l:((0,(h=ak.f(h)).resolve)(l),h.promise)},vx=function(h,l){var g=C.console;g&&g.error&&(1===arguments.length?g.error(h):g.error(h,l))},ck=function(h){try{return{error:!1,value:h()}}catch(l){return{error:!0,value:l}}},wx="object"==typeof window,xx=qa("species"),tp=La.get,yx=La.set,zx=La.getterFor("Promise"),Xd=Nc&&Nc.prototype,Cb=Nc,Dh=Xd,up=C.TypeError,dk=C.document,ek=C.process,Ye=ak.f,Ax=Ye,Bx=!!(dk&&dk.createEvent&&C.dispatchEvent),vp="function"==typeof PromiseRejectionEvent,wp=!1,fg=uc("Promise",function(){var h=wj(Cb)!==String(Cb);if(!h&&66===nd)return!0;if(51<=nd&&/native code/.test(Cb))return!1;var l=new Cb(function(f){f(1)}),g=function(f){f(function(){},function(){})};return(l.constructor={})[xx]=g,!(wp=l.then(function(){})instanceof g)||!h&&wx&&!vp}),Cx=fg||!uh(function(h){Cb.all(h).catch(function(){})}),xp=function(h){var l;return!(!ha(h)||"function"!=typeof(l=h.then))&&l},fk=function(h,l){if(!h.notified){h.notified=!0;var g=h.reactions;sp(function(){for(var f=h.value,k=1==h.state,q=0;g.length>q;){var _r,_s=g[q++],_a=k?_s.ok:_s.fail,_l=_s.resolve,bh=_s.reject,n_=_s.domain;try{if(_a){if(k||(2===h.rejection&&Dx(h),h.rejection=1),!0===_a)var _A=f;else if(n_&&n_.enter(),_A=_a(f),n_){n_.exit();var r_=!0}_A===_s.promise?bh(up("Promise-chain cycle")):(_r=xp(_A))?_r.call(_A,_l,bh):_l(_A)}else bh(f)}catch(p_){n_&&!r_&&n_.exit(),bh(p_)}}h.reactions=[],h.notified=!1,l&&!h.rejection&&Ex(h)})}},yp=function(h,l,g){var f;if(Bx){var k=dk.createEvent("Event");k.promise=l,k.reason=g,k.initEvent(h,!1,!0),C.dispatchEvent(k)}else k={promise:l,reason:g};!vp&&(f=C["on"+h])?f(k):"unhandledrejection"===h&&vx("Unhandled promise rejection",g)},Ex=function(h){Yj.call(C,function(){var l=h.facade,g=h.value;if(1!==h.rejection&&!h.parent){var f=ck(function(){Oc?ek.emit("unhandledRejection",g,l):yp("unhandledrejection",l,g)});if(h.rejection=Oc||1!==h.rejection&&!h.parent?2:1,f.error)throw f.value}})},Dx=function(h){Yj.call(C,function(){var l=h.facade;Oc?ek.emit("rejectionHandled",l):yp("rejectionhandled",l,h.value)})},Ze=function(h,l,g){return function(f){h(l,f,g)}},$e=function(h,l,g){h.done||(h.done=!0,g&&(h=g),h.value=l,h.state=2,fk(h,!0))},gk=function(h,l,g){if(!h.done){h.done=!0,g&&(h=g);try{if(h.facade===l)throw up("Promise can't be resolved itself");var f=xp(l);f?sp(function(){var k={done:!1};try{f.call(l,Ze(gk,k,h),Ze($e,k,h))}catch(q){$e(k,q,h)}}):(h.value=l,h.state=1,fk(h,!1))}catch(k){$e({done:!1},k,h)}}};if(fg){Cb=function(h){hc(this,Cb,"Promise"),Bb(h),hk.call(this);var l=tp(this);try{h(Ze(gk,l),Ze($e,l))}catch(g){$e(l,g)}},Dh=Cb.prototype;var hk=function(h){yx(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};hk.prototype=Xe(Dh,{then:function(h,l){var g=zx(this),f=Ye(od(this,Cb));return f.ok="function"!=typeof h||h,f.fail="function"==typeof l&&l,f.domain=Oc?ek.domain:void 0,g.parent=!0,g.reactions.push(f),0!=g.state&&fk(g,!1),f.promise},catch:function(h){return this.then(void 0,h)}});var Fx=function(){var h=new hk,l=tp(h);this.promise=h,this.resolve=Ze(gk,l),this.reject=Ze($e,l)};if(ak.f=Ye=function(h){return h===Cb||h===Gx?new Fx(h):Ax(h)},"function"==typeof Nc&&Xd!==Object.prototype){var Hx=Xd.then;wp||(Ea(Xd,"then",function(h,l){var g=this;return new Cb(function(f,k){Hx.call(g,f,k)}).then(h,l)},{unsafe:!0}),Ea(Xd,"catch",Dh.catch,{unsafe:!0}));try{delete Xd.constructor}catch(h){}Ya&&Ya(Xd,Dh)}}M({global:!0,wrap:!0,forced:fg},{Promise:Cb}),gc(Cb,"Promise",!1),ag("Promise");var Gx=Rb("Promise");M({target:"Promise",stat:!0,forced:fg},{reject:function(h){var l=Ye(this);return l.reject.call(void 0,h),l.promise}}),M({target:"Promise",stat:!0,forced:fg},{resolve:function(h){return bk(this,h)}}),M({target:"Promise",stat:!0,forced:Cx},{all:function(h){var l=this,g=Ye(l),f=g.resolve,k=g.reject,q=ck(function(){var _r=Bb(l.resolve),_s=[],_a=0,_l=1;yh(h,function(bh){var n_=_a++,_A=!1;_s.push(void 0),_l++,_r.call(l,bh).then(function(r_){_A||(_A=!0,_s[n_]=r_,--_l||f(_s))},k)}),--_l||f(_s)});return q.error&&k(q.value),g.promise},race:function(h){var l=this,g=Ye(l),f=g.reject,k=ck(function(){var q=Bb(l.resolve);yh(h,function(_r){q.call(l,_r).then(g.resolve,f)})});return k.error&&f(k.value),g.promise}});var Ix=Math.floor,Jx="".replace,Kx=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Lx=/\$([$&'`]|\d{1,2})/g,Mx=function(h,l,g,f,k,q){var _r=g+h.length,_s=f.length,_a=Lx;return void 0!==k&&(k=Va(k),_a=Kx),Jx.call(q,_a,function(_l,bh){switch(bh.charAt(0)){case"$":return"$";case"&":return h;case"`":return l.slice(0,g);case"'":return l.slice(_r);case"<":_l=k[bh.slice(1,-1)];break;default:var n_=+bh;if(0===n_)return _l;if(n_>_s)return 0===(n_=Ix(n_/10))?_l:n_<=_s?void 0===f[n_-1]?bh.charAt(1):f[n_-1]+bh.charAt(1):_l;_l=f[n_-1]}return void 0===_l?"":_l})},Nx=Math.max,Ox=Math.min,Px=function(h){return void 0===h?h:String(h)};rh("replace",2,function(h,l,g,f){var k=f.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,q=f.REPLACE_KEEPS_$0,_r=k?"$":"$0";return[function(_s,_a){var _l=mb(this),bh=null==_s?void 0:_s[h];return void 0!==bh?bh.call(_s,_l,_a):l.call(String(_l),_s,_a)},function(_s,_a){if(!k&&q||"string"==typeof _a&&-1===_a.indexOf(_r)){var _l=g(l,_s,this,_a);if(_l.done)return _l.value}var bh=sa(_s);_s=String(this),(_l="function"==typeof _a)||(_a=String(_a));var n_=bh.global;if(n_){var _A=bh.unicode;bh.lastIndex=0}for(var r_=[];;){var p_=Se(bh,_s);if(null===p_||(r_.push(p_),!n_))break;""===String(p_[0])&&(bh.lastIndex=Gj(_s,va(bh.lastIndex),_A))}for(_A="",n_=bh=0;n_<r_.length;n_++){p_=r_[n_];for(var I_=String(p_[0]),v_=Nx(Ox(fc(p_.index),_s.length),0),S_=[],x_=1;x_<p_.length;x_++)S_.push(Px(p_[x_]));p_=p_.groups,_l?(S_=[I_].concat(S_,v_,_s),void 0!==p_&&S_.push(p_),p_=String(_a.apply(void 0,S_))):p_=Mx(I_,_s,v_,S_,p_,_a),v_>=bh&&(_A+=_s.slice(bh,v_)+p_,bh=v_+I_.length)}return _A+_s.slice(bh)}]});var Qx=Yf("slice"),Rx=qa("species"),Sx=[].slice,Tx=Math.max;M({target:"Array",proto:!0,forced:!Qx},{slice:function(h,l){var g=tb(this),f=va(g.length);if(h=Ab(h,f),l=Ab(void 0===l?f:l,f),qd(g)){var k=g.constructor;if("function"!=typeof k||k!==Array&&!qd(k.prototype)?ha(k)&&null===(k=k[Rx])&&(k=void 0):k=void 0,k===Array||void 0===k)return Sx.call(g,h,l)}for(k=new(void 0===k?Array:k)(Tx(l-h,0)),f=0;h<l;h++,f++)h in g&&Ve(k,f,g[h]);return k.length=f,k}});var Ux=La.set,Vx=La.getterFor("Array Iterator"),sd=Qj(Array,"Array",function(h,l){Ux(this,{type:"Array Iterator",target:tb(h),index:0,kind:l})},function(){var h=Vx(this),l=h.target,g=h.kind,f=h.index++;return!l||f>=l.length?(h.target=void 0,{value:void 0,done:!0}):"keys"==g?{value:f,done:!1}:"values"==g?{value:l[f],done:!1}:{value:[f,l[f]],done:!1}},"values");Ue.Arguments=Ue.Array,Vd("keys"),Vd("values"),Vd("entries");var zp="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,af=function(h){if(void 0===h)return 0;h=fc(h);var l=va(h);if(h!==l)throw RangeError("Wrong length or index");return l},Wx=Math.abs,Pc=Math.pow,Xx=Math.floor,Yx=Math.log,Zx=Math.LN2,ik=function(h){var l=Va(this),g=va(l.length),f=arguments.length,k=Ab(1<f?arguments[1]:void 0,g);for(g=void 0===(f=2<f?arguments[2]:void 0)?g:Ab(f,g);g>k;)l[k++]=h;return l},$x=Rd.f,ay=Wa.f,bf=La.get,Ap=La.set,ic=C.ArrayBuffer,Db=ic,jc=C.DataView,Eh=jc&&jc.prototype,Bp=Object.prototype,Fh=C.RangeError,Cp=function(h,l,g){var f,k=Array(g),q=(1<<(g=8*g-l-1))-1,_r=q>>1,_s=23===l?Pc(2,-24)-Pc(2,-77):0,_a=0>h||0===h&&0>1/h?1:0,_l=0;if((h=Wx(h))!=h||1/0===h){h=h!=h?1:0;var bh=q}else bh=Xx(Yx(h)/Zx),1>h*(f=Pc(2,-bh))&&(bh--,f*=2),2<=(h=1<=bh+_r?h+_s/f:h+_s*Pc(2,1-_r))*f&&(bh++,f/=2),bh+_r>=q?(h=0,bh=q):1<=bh+_r?(h=(h*f-1)*Pc(2,l),bh+=_r):(h=h*Pc(2,_r-1)*Pc(2,l),bh=0);for(;8<=l;k[_l++]=255&h,h/=256,l-=8);for(bh=bh<<l|h,g+=l;0<g;k[_l++]=255&bh,bh/=256,g-=8);return k[--_l]|=128*_a,k},Dp=function(h,l){var g=h.length,f=8*g-l-1,k=(1<<f)-1,q=k>>1;f-=7,--g;var _r=h[g--],_s=127&_r;for(_r>>=7;0<f;_s=256*_s+h[g],g--,f-=8);var _a=_s&(1<<-f)-1;for(_s>>=-f,f+=l;0<f;_a=256*_a+h[g],g--,f-=8);if(0===_s)_s=1-q;else{if(_s===k)return _a?NaN:_r?-1/0:1/0;_a+=Pc(2,l),_s-=q}return(_r?-1:1)*_a*Pc(2,_s-l)},Ep=function(h){return[255&h]},Fp=function(h){return[255&h,h>>8&255]},Gp=function(h){return[255&h,h>>8&255,h>>16&255,h>>24&255]},Hp=function(h){return h[3]<<24|h[2]<<16|h[1]<<8|h[0]},by=function(h){return Cp(h,23,4)},cy=function(h){return Cp(h,52,8)},Gh=function(h,l){ay(h.prototype,l,{get:function(){return bf(this)[l]}})},td=function(h,l,g,f){g=af(g);var k=bf(h);if(g+l>k.byteLength)throw Fh("Wrong index");return l=(h=bf(k.buffer).bytes).slice(g+=k.byteOffset,g+l),f?l:l.reverse()},ud=function(h,l,g,f,k,q){g=af(g);var _r=bf(h);if(g+l>_r.byteLength)throw Fh("Wrong index");for(h=bf(_r.buffer).bytes,g+=_r.byteOffset,f=f(+k),k=0;k<l;k++)h[g+k]=f[q?k:l-k-1]};if(zp){if(!R(function(){ic(1)})||!R(function(){new ic(-1)})||R(function(){return new ic,new ic(1.5),new ic(NaN),"ArrayBuffer"!=ic.name})){Db=function(h){return hc(this,Db),new ic(af(h))};for(var dy=Db.prototype=ic.prototype,Ip=$x(ic),Jp=0,jk;Ip.length>Jp;)(jk=Ip[Jp++])in Db||Sa(Db,jk,ic[jk]);dy.constructor=Db}Ya&&ac(Eh)!==Bp&&Ya(Eh,Bp);var Hh=new jc(new Db(2)),Kp=Eh.setInt8;Hh.setInt8(0,2147483648),Hh.setInt8(1,2147483649),!Hh.getInt8(0)&&Hh.getInt8(1)||Xe(Eh,{setInt8:function(h,l){Kp.call(this,h,l<<24>>24)},setUint8:function(h,l){Kp.call(this,h,l<<24>>24)}},{unsafe:!0})}else Db=function(h){hc(this,Db,"ArrayBuffer"),h=af(h),Ap(this,{bytes:ik.call(Array(h),0),byteLength:h}),fa||(this.byteLength=h)},jc=function(h,l,g){hc(this,jc,"DataView"),hc(h,Db,"DataView");var f=bf(h).byteLength;if(0>(l=fc(l))||l>f)throw Fh("Wrong offset");if(l+(g=void 0===g?f-l:va(g))>f)throw Fh("Wrong length");Ap(this,{buffer:h,byteLength:g,byteOffset:l}),fa||(this.buffer=h,this.byteLength=g,this.byteOffset=l)},fa&&(Gh(Db,"byteLength"),Gh(jc,"buffer"),Gh(jc,"byteLength"),Gh(jc,"byteOffset")),Xe(jc.prototype,{getInt8:function(h){return td(this,1,h)[0]<<24>>24},getUint8:function(h){return td(this,1,h)[0]},getInt16:function(h){var l=td(this,2,h,1<arguments.length?arguments[1]:void 0);return(l[1]<<8|l[0])<<16>>16},getUint16:function(h){var l=td(this,2,h,1<arguments.length?arguments[1]:void 0);return l[1]<<8|l[0]},getInt32:function(h){return Hp(td(this,4,h,1<arguments.length?arguments[1]:void 0))},getUint32:function(h){return Hp(td(this,4,h,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(h){return Dp(td(this,4,h,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(h){return Dp(td(this,8,h,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(h,l){ud(this,1,h,Ep,l)},setUint8:function(h,l){ud(this,1,h,Ep,l)},setInt16:function(h,l){ud(this,2,h,Fp,l,2<arguments.length?arguments[2]:void 0)},setUint16:function(h,l){ud(this,2,h,Fp,l,2<arguments.length?arguments[2]:void 0)},setInt32:function(h,l){ud(this,4,h,Gp,l,2<arguments.length?arguments[2]:void 0)},setUint32:function(h,l){ud(this,4,h,Gp,l,2<arguments.length?arguments[2]:void 0)},setFloat32:function(h,l){ud(this,4,h,by,l,2<arguments.length?arguments[2]:void 0)},setFloat64:function(h,l){ud(this,8,h,cy,l,2<arguments.length?arguments[2]:void 0)}});gc(Db,"ArrayBuffer"),gc(jc,"DataView");var gg={ArrayBuffer:Db,DataView:jc},kk=gg.ArrayBuffer,Lp=gg.DataView,Mp=kk.prototype.slice,ey=R(function(){return!new kk(2).slice(1,void 0).byteLength});M({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:ey},{slice:function(h,l){if(void 0!==Mp&&void 0===l)return Mp.call(sa(this),h);var g=sa(this).byteLength;h=Ab(h,g),l=Ab(void 0===l?g:l,g),g=new(od(this,kk))(va(l-h));for(var f=new Lp(this),k=new Lp(g),q=0;h<l;)k.setUint8(q++,f.getUint8(h++));return g}});var fy=Wa.f,Ih=C.Int8Array,lk=Ih&&Ih.prototype,Np=C.Uint8ClampedArray,Op=Np&&Np.prototype,xc=Ih&&ac(Ih),kc=lk&&ac(lk),Pp=Object.prototype,Qp=Pp.isPrototypeOf,Rp=qa("toStringTag"),mk=Oe("TYPED_ARRAY_TAG"),Qc=zp&&!!Ya&&"Opera"!==We(C.opera),Sp=!1,Eb,yc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},gy={BigInt64Array:8,BigUint64Array:8},Jh=function(h){return!!ha(h)&&(h=We(h),Q(yc,h)||Q(gy,h))};for(Eb in yc)C[Eb]||(Qc=!1);if((!Qc||"function"!=typeof xc||xc===Function.prototype)&&(xc=function(){throw TypeError("Incorrect invocation")},Qc))for(Eb in yc)C[Eb]&&Ya(C[Eb],xc);if((!Qc||!kc||kc===Pp)&&(kc=xc.prototype,Qc))for(Eb in yc)C[Eb]&&Ya(C[Eb].prototype,kc);if(Qc&&ac(Op)!==kc&&Ya(Op,kc),fa&&!Q(kc,Rp))for(Eb in Sp=!0,fy(kc,Rp,{get:function(){return ha(this)?this[mk]:void 0}}),yc)C[Eb]&&Sa(C[Eb],mk,Eb);var hg=Qc,Tp=Sp&&mk,Fa=function(h){if(Jh(h))return h;throw TypeError("Target is not a typed array")},cf=function(h){if(Ya){if(Qp.call(xc,h))return h}else for(var l in yc)if(Q(yc,Eb)){var g=C[l];if(g&&(h===g||Qp.call(g,h)))return h}throw TypeError("Target is not a typed array constructor")},Ba=function(h,l,g){if(fa){if(g)for(var f in yc){var k=C[f];if(k&&Q(k.prototype,h))try{delete k.prototype[h]}catch(q){}}kc[h]&&!g||Ea(kc,h,g?l:Qc&&lk[h]||l)}},Up=function(h,l,g){var f,k;if(fa){if(Ya){if(g)for(f in yc)if((k=C[f])&&Q(k,h))try{delete k[h]}catch(q){}if(xc[h]&&!g)return;try{return Ea(xc,h,g?l:Qc&&xc[h]||l)}catch(q){}}for(f in yc)!(k=C[f])||k[h]&&!g||Ea(k,h,l)}},Vp=xc,ig=kc,hy=C.ArrayBuffer,Yd=C.Int8Array,nk=!hg||!R(function(){Yd(1)})||!R(function(){new Yd(-1)})||!uh(function(h){new Yd,new Yd(null),new Yd(1.5),new Yd(h)},!0)||R(function(){return 1!==new Yd(new hy(2),1,void 0).length}),Kh=function(h,l){if(0>(h=fc(h)))throw RangeError("The argument can't be less than 0");if(h%l)throw RangeError("Wrong offset");return h},ok=function(h){var l=Va(h),g=arguments.length,f=1<g?arguments[1]:void 0,k=void 0!==f,q=Zf(l);if(null!=q&&!Kj(q)){var _r=q.call(l),_s=_r.next;for(l=[];!(q=_s.call(_r)).done;)l.push(q.value)}for(k&&2<g&&(f=pd(f,arguments[2],2)),q=va(l.length),_r=new(cf(this))(q),g=0;q>g;g++)_r[g]=k?f(l[g],g):l[g];return _r},Lh=function(h,l,g){var f,k;return Ya&&"function"==typeof(f=l.constructor)&&f!==g&&ha(k=f.prototype)&&k!==g.prototype&&Ya(h,k),h},jg=cb(function(h){var l=Rd.f,g=La.get,f=La.set,k=Wa.f,q=Jb.f,_r=Math.round,_s=C.RangeError,_a=gg.ArrayBuffer,_l=gg.DataView,bh=function(v_,S_){var x_=0,B_=S_.length;for(v_=new(cf(v_))(B_);B_>x_;)v_[x_]=S_[x_++];return v_},n_=function(v_,S_){k(v_,S_,{get:function(){return g(this)[S_]}})},_A=function(v_){var S_;return v_ instanceof _a||"ArrayBuffer"==(S_=We(v_))||"SharedArrayBuffer"==S_},r_=function(v_,S_){return Jh(v_)&&"symbol"!=typeof S_&&S_ in v_&&String(+S_)==String(S_)},p_=function(v_,S_){return r_(v_,S_=tc(S_,!0))?sc(2,v_[S_]):q(v_,S_)},I_=function(v_,S_,x_){return!(r_(v_,S_=tc(S_,!0))&&ha(x_)&&Q(x_,"value"))||Q(x_,"get")||Q(x_,"set")||x_.configurable||Q(x_,"writable")&&!x_.writable||Q(x_,"enumerable")&&!x_.enumerable?k(v_,S_,x_):(v_[S_]=x_.value,v_)};fa?(hg||(Jb.f=p_,Wa.f=I_,n_(ig,"buffer"),n_(ig,"byteOffset"),n_(ig,"byteLength"),n_(ig,"length")),M({target:"Object",stat:!0,forced:!hg},{getOwnPropertyDescriptor:p_,defineProperty:I_}),h.exports=function(v_,S_,x_){var B_=v_.match(/\d+$/)[0]/8,Q_=v_+(x_?"Clamped":"")+"Array",_0="get"+v_,c0="set"+v_,Qv=C[Q_],h0=Qv;v_=h0&&h0.prototype;var E0={},H_=function(e0,P_){k(e0,P_,{get:function(){var Rv=g(this);return Rv.view[_0](P_*B_+Rv.byteOffset,!0)},set:function(Rv){var E_=g(this);x_&&(Rv=0>(Rv=_r(Rv))?0:255<Rv?255:255&Rv),E_.view[c0](P_*B_+E_.byteOffset,Rv,!0)},enumerable:!0})};hg?nk&&(h0=S_(function(e0,P_,Rv,E_){return hc(e0,h0,Q_),Lh(ha(P_)?_A(P_)?void 0!==E_?new Qv(P_,Kh(Rv,B_),E_):void 0!==Rv?new Qv(P_,Kh(Rv,B_)):new Qv(P_):Jh(P_)?bh(h0,P_):ok.call(h0,P_):new Qv(af(P_)),e0,h0)}),Ya&&Ya(h0,Vp),Sd(l(Qv),function(e0){e0 in h0||Sa(h0,e0,Qv[e0])}),h0.prototype=v_):(h0=S_(function(e0,P_,Rv,E_){hc(e0,h0,Q_);var L_=0,F_=0;if(ha(P_)){if(!_A(P_))return Jh(P_)?bh(h0,P_):ok.call(h0,P_);var J_=P_;if(F_=Kh(Rv,B_),P_=P_.byteLength,void 0===E_){if(P_%B_||0>(E_=P_-F_))throw _s("Wrong length")}else if((E_=va(E_)*B_)+F_>P_)throw _s("Wrong length");P_=E_/B_}else P_=af(P_),J_=new _a(E_=P_*B_);for(f(e0,{buffer:J_,byteOffset:F_,byteLength:E_,length:P_,view:new _l(J_)});L_<P_;)H_(e0,L_++)}),Ya&&Ya(h0,Vp),v_=h0.prototype=Sb(ig)),v_.constructor!==h0&&Sa(v_,"constructor",h0),Tp&&Sa(v_,Tp,Q_),E0[Q_]=h0,M({global:!0,forced:h0!=Qv,sham:!hg},E0),"BYTES_PER_ELEMENT"in h0||Sa(h0,"BYTES_PER_ELEMENT",B_),"BYTES_PER_ELEMENT"in v_||Sa(v_,"BYTES_PER_ELEMENT",B_),ag(Q_)}):h.exports=function(){}});jg("Uint8",function(h){return function(l,g,f){return h(this,l,g,f)}});var iy=Math.min,jy=[].copyWithin||function(h,l){var g=Va(this),f=va(g.length),k=Ab(h,f),q=Ab(l,f),_r=2<arguments.length?arguments[2]:void 0;for(f=iy((void 0===_r?f:Ab(_r,f))-q,f-k),_r=1,q<k&&k<q+f&&(_r=-1,q+=f-1,k+=f-1);0<f--;)q in g?g[k]=g[q]:delete g[k],k+=_r,q+=_r;return g};Ba("copyWithin",function(h,l){return jy.call(Fa(this),h,l,2<arguments.length?arguments[2]:void 0)}),Ba("every",function(h){return Sw(Fa(this),h,1<arguments.length?arguments[1]:void 0)}),Ba("fill",function(h){return ik.apply(Fa(this),arguments)}),Ba("filter",function(h){var l=Ko(Fa(this),h,1<arguments.length?arguments[1]:void 0),g=od(this,this.constructor),f=0,k=l.length;for(g=new(cf(g))(k);k>f;)g[f]=l[f++];return g}),Ba("find",function(h){return Lo(Fa(this),h,1<arguments.length?arguments[1]:void 0)}),Ba("findIndex",function(h){return Mo(Fa(this),h,1<arguments.length?arguments[1]:void 0)}),Ba("forEach",function(h){Sd(Fa(this),h,1<arguments.length?arguments[1]:void 0)}),Ba("includes",function(h){return so(Fa(this),h,1<arguments.length?arguments[1]:void 0)}),Ba("indexOf",function(h){return zj(Fa(this),h,1<arguments.length?arguments[1]:void 0)});var Wp=qa("iterator"),Xp=C.Uint8Array,ky=sd.values,ly=sd.keys,my=sd.entries,pk=Xp&&Xp.prototype[Wp],Yp=!!pk&&("values"==pk.name||null==pk.name),Zp=function(){return ky.call(Fa(this))};Ba("entries",function(){return my.call(Fa(this))}),Ba("keys",function(){return ly.call(Fa(this))}),Ba("values",Zp,!Yp),Ba(Wp,Zp,!Yp);var ny=[].join;Ba("join",function(h){return ny.apply(Fa(this),arguments)});var oy=Math.min,qk=[].lastIndexOf,$p=!!qk&&0>1/[1].lastIndexOf(1,-0),py=Te("lastIndexOf"),qy=$p||!py?function(h){if($p)return qk.apply(this,arguments)||0;var l=tb(this),g=va(l.length),f=g-1;for(1<arguments.length&&(f=oy(f,fc(arguments[1]))),0>f&&(f=g+f);0<=f;f--)if(f in l&&l[f]===h)return f||0;return-1}:qk;Ba("lastIndexOf",function(h){return qy.apply(Fa(this),arguments)}),Ba("map",function(h){return Jo(Fa(this),h,1<arguments.length?arguments[1]:void 0,function(l,g){return new(cf(od(l,l.constructor)))(g)})});var aq=function(h){return function(l,g,f,k){Bb(g),l=Va(l);var q=Tf(l),_r=va(l.length),_s=h?_r-1:0,_a=h?-1:1;if(2>f)for(;;){if(_s in q){k=q[_s],_s+=_a;break}if(_s+=_a,h?0>_s:_r<=_s)throw TypeError("Reduce of empty array with no initial value")}for(;h?0<=_s:_r>_s;_s+=_a)_s in q&&(k=g(k,q[_s],_s,l));return k}},bq=aq(!1),ry=aq(!0);Ba("reduce",function(h){return bq(Fa(this),h,arguments.length,1<arguments.length?arguments[1]:void 0)}),Ba("reduceRight",function(h){return ry(Fa(this),h,arguments.length,1<arguments.length?arguments[1]:void 0)});var sy=Math.floor;Ba("reverse",function(){for(var h,l=Fa(this).length,g=sy(l/2),f=0;f<g;)h=this[f],this[f++]=this[--l],this[l]=h;return this});var ty=R(function(){new Int8Array(1).set({})});Ba("set",function(h){Fa(this);var l=Kh(1<arguments.length?arguments[1]:void 0,1),g=this.length,f=Va(h),k=va(f.length),q=0;if(k+l>g)throw RangeError("Wrong length");for(;q<k;)this[l+q]=f[q++]},ty);var uy=[].slice,vy=R(function(){new Int8Array(1).slice()});Ba("slice",function(h,l){h=uy.call(Fa(this),h,l);var g=od(this,this.constructor);l=0;var f=h.length;for(g=new(cf(g))(f);f>l;)g[l]=h[l++];return g},vy),Ba("some",function(h){return Rw(Fa(this),h,1<arguments.length?arguments[1]:void 0)});var wy=[].sort;Ba("sort",function(h){return wy.call(Fa(this),h)}),Ba("subarray",function(h,l){var g=Fa(this),f=g.length;return h=Ab(h,f),new(od(g,g.constructor))(g.buffer,g.byteOffset+h*g.BYTES_PER_ELEMENT,va((void 0===l?f:Ab(l,f))-h))});var Mh=C.Int8Array,cq=[].toLocaleString,xy=[].slice,yy=!!Mh&&R(function(){cq.call(new Mh(1))}),zy=R(function(){return[1,2].toLocaleString()!=new Mh([1,2]).toLocaleString()})||!R(function(){Mh.prototype.toLocaleString.call([1,2])});Ba("toLocaleString",function(){return cq.apply(yy?xy.call(Fa(this)):Fa(this),arguments)},zy);var dq=C.Uint8Array,Ay=dq&&dq.prototype||{},Nh=[].toString,By=[].join;R(function(){Nh.call({})})&&(Nh=function(){return By.call(this)}),Ba("toString",Nh,Ay.toString!=Nh);var eq=gg.ArrayBuffer;M({global:!0,forced:C.ArrayBuffer!==eq},{ArrayBuffer:eq}),ag("ArrayBuffer");var Cy=Wa.f,rk=Function.prototype,Dy=rk.toString,Ey=/^\s*function ([^ (]*)/;!fa||"name"in rk||Cy(rk,"name",{configurable:!0,get:function(){try{return Dy.call(this).match(Ey)[1]}catch(h){return""}}});var fq=RegExp.prototype,gq=fq.toString,Fy=R(function(){return"/a/b"!=gq.call({source:"a",flags:"b"})}),Gy="toString"!=gq.name;(Fy||Gy)&&Ea(RegExp.prototype,"toString",function(){var h=sa(this),l=String(h.source),g=h.flags;return"/"+l+"/"+String(void 0===g&&h instanceof RegExp&&!("flags"in fq)?Aj.call(h):g)},{unsafe:!0});var Hy=Yf("splice"),Iy=Math.max,Jy=Math.min;M({target:"Array",proto:!0,forced:!Hy},{splice:function(h,l){var g,f,k=Va(this),q=va(k.length),_r=Ab(h,q),_s=arguments.length;if(0===_s?_s=g=0:1===_s?(_s=0,g=q-_r):(_s-=2,g=Jy(Iy(fc(l),0),q-_r)),9007199254740991<q+_s-g)throw TypeError("Maximum allowed length exceeded");var _a=th(k,g);for(f=0;f<g;f++){var _l=_r+f;_l in k&&Ve(_a,f,k[_l])}if(_a.length=g,_s<g){for(f=_r;f<q-g;f++){var bh=f+_s;(_l=f+g)in k?k[bh]=k[_l]:delete k[bh]}for(f=q;f>q-g+_s;f--)delete k[f-1]}else if(_s>g)for(f=q-g;f>_r;f--)bh=f+_s-1,(_l=f+g-1)in k?k[bh]=k[_l]:delete k[bh];for(f=0;f<_s;f++)k[f+_r]=arguments[f+2];return k.length=q-g+_s,_a}});var sk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},tk=qa("iterator"),hq=qa("toStringTag"),uk=sd.values,Oh;for(Oh in sk){var iq=C[Oh],Rc=iq&&iq.prototype;if(Rc){if(Rc[tk]!==uk)try{Sa(Rc,tk,uk)}catch(h){Rc[tk]=uk}if(Rc[hq]||Sa(Rc,hq,Oh),sk[Oh])for(var df in sd)if(Rc[df]!==sd[df])try{Sa(Rc,df,sd[df])}catch(h){Rc[df]=sd[df]}}}var jq=Object.is||function(h,l){return h===l?0!==h||1/h==1/l:h!=h&&l!=l};rh("search",1,function(h,l,g){return[function(f){var k=mb(this),q=null==f?void 0:f[h];return void 0!==q?q.call(f,k):new RegExp(f)[h](String(k))},function(f){var k=g(l,f,this);if(k.done)return k.value;f=sa(f);var q=String(this);return jq(k=f.lastIndex,0)||(f.lastIndex=0),q=Se(f,q),jq(f.lastIndex,k)||(f.lastIndex=k),null===q?-1:q.index}]}),cb(function(h){var l,g;l="undefined"!=typeof self?self:Ka,g=function(l){function g(H_){return btoa(H_).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(H_){return H_=(H_+="===").slice(0,-H_.length%4),atob(H_.replace(/-/g,"+").replace(/_/g,"/"))}function k(H_){for(var e0=new Uint8Array(H_.length),P_=0;P_<H_.length;P_++)e0[P_]=H_.charCodeAt(P_);return e0}function q(H_){return H_ instanceof ArrayBuffer&&(H_=new Uint8Array(H_)),String.fromCharCode.apply(String,H_)}function _r(H_){var e0={name:(H_.name||H_||"").toUpperCase().replace("V","v")};switch(e0.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":H_.length&&(e0.length=H_.length);break;case"HMAC":H_.hash&&(e0.hash=_r(H_.hash)),H_.length&&(e0.length=H_.length);break;case"RSAES-PKCS1-v1_5":H_.publicExponent&&(e0.publicExponent=new Uint8Array(H_.publicExponent)),H_.modulusLength&&(e0.modulusLength=H_.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":H_.hash&&(e0.hash=_r(H_.hash)),H_.publicExponent&&(e0.publicExponent=new Uint8Array(H_.publicExponent)),H_.modulusLength&&(e0.modulusLength=H_.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return e0}function _s(H_){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[H_.name][(H_.hash||{}).name||H_.length||""]}function _a(H_){(H_ instanceof ArrayBuffer||H_ instanceof Uint8Array)&&(H_=JSON.parse(decodeURIComponent(escape(q(H_)))));var e0={kty:H_.kty,alg:H_.alg,ext:H_.ext||H_.extractable};switch(e0.kty){case"oct":e0.k=H_.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach(function(P_){P_ in H_&&(e0[P_]=H_[P_])});break;default:throw new TypeError("Unsupported key type")}return e0}function _l(H_){return H_=_a(H_),_0&&(H_.extractable=H_.ext,delete H_.ext),k(unescape(encodeURIComponent(JSON.stringify(H_)))).buffer}function bh(H_){var e0=n_(H_),P_=!1;if("1.2.840.113549.1.1.1"!==(2<e0.length&&(P_=!0,e0.shift()),H_={ext:!0},e0[0][0]))throw new TypeError("Unsupported key type");var Rv="n e d p q dp dq qi".split(" ");for(e0=n_(e0[1]),P_&&e0.shift(),P_=0;P_<e0.length;P_++)e0[P_][0]||(e0[P_]=e0[P_].subarray(1)),H_[Rv[P_]]=g(q(e0[P_]));return H_.kty="RSA",H_}function n_(H_,e0){if(H_ instanceof ArrayBuffer&&(H_=new Uint8Array(H_)),e0||(e0={pos:0,end:H_.length}),2>e0.end-e0.pos||e0.end>H_.length)throw new RangeError("Malformed DER");var P_=H_[e0.pos++],Rv=H_[e0.pos++];if(128<=Rv){if(e0.end-e0.pos<(Rv&=127))throw new RangeError("Malformed DER");for(var E_=0;Rv--;)E_<<=8,E_|=H_[e0.pos++];Rv=E_}if(e0.end-e0.pos<Rv)throw new RangeError("Malformed DER");switch(P_){case 2:P_=H_.subarray(e0.pos,e0.pos+=Rv);break;case 3:if(H_[e0.pos++])throw Error("Unsupported bit string");Rv--;case 4:P_=new Uint8Array(H_.subarray(e0.pos,e0.pos+=Rv)).buffer;break;case 5:P_=null;break;case 6:if(!((H_=btoa(q(H_.subarray(e0.pos,e0.pos+=Rv))))in Qv))throw Error("Unsupported OBJECT ID "+H_);P_=Qv[H_];break;case 48:for(P_=[],Rv=e0.pos+Rv;e0.pos<Rv;)P_.push(n_(H_,e0));break;default:throw Error("Unsupported DER tag 0x"+P_.toString(16))}return P_}function _A(H_,e0){e0||(e0=[]);var P_=e0.length+2;if(e0.push(0,0),H_ instanceof Uint8Array)for(var Rv=2,E_=H_.length,L_=0;L_<E_;L_++)e0.push(H_[L_]);else if(H_ instanceof ArrayBuffer)for(Rv=4,E_=H_.byteLength,H_=new Uint8Array(H_),L_=0;L_<E_;L_++)e0.push(H_[L_]);else if(null===H_)Rv=5,E_=0;else if("string"==typeof H_&&H_ in h0)for(Rv=6,E_=(H_=k(atob(h0[H_]))).length,L_=0;L_<E_;L_++)e0.push(H_[L_]);else if(H_ instanceof Array){for(L_=0;L_<H_.length;L_++)_A(H_[L_],e0);Rv=48,E_=e0.length-P_}else{if(!("object"===V(H_)&&3===H_.tag&&H_.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+H_);for(Rv=3,E_=(H_=new Uint8Array(H_.value)).byteLength,e0.push(0),L_=0;L_<E_;L_++)e0.push(H_[L_]);E_++}if(128<=E_){for(L_=E_,E_=4,e0.splice(P_,0,L_>>24&255,L_>>16&255,L_>>8&255,255&L_);1<E_&&!(L_>>24);)L_<<=8,E_--;4>E_&&e0.splice(P_,4-E_),E_|=128}return e0.splice(P_-2,2,Rv,E_),e0}function r_(H_,e0,P_,Rv){Object.defineProperties(this,{_key:{value:H_},type:{value:H_.type,enumerable:!0},extractable:{value:void 0===P_?H_.extractable:P_,enumerable:!0},algorithm:{value:void 0===e0?H_.algorithm:e0,enumerable:!0},usages:{value:void 0===Rv?H_.usages:Rv,enumerable:!0}})}function p_(H_){return"verify"===H_||"encrypt"===H_||"wrapKey"===H_}function I_(H_){return"sign"===H_||"decrypt"===H_||"unwrapKey"===H_}if("function"!=typeof Promise)throw"Promise support required";var v_=l.crypto||l.msCrypto;if(v_){var S_=v_.subtle||v_.webkitSubtle;if(S_){var x_=l.Crypto||v_.constructor||Object,B_=l.SubtleCrypto||S_.constructor||Object,Q_=-1<l.navigator.userAgent.indexOf("Edge/"),_0=!!l.msCrypto&&!Q_,c0=!v_.subtle&&!!v_.webkitSubtle;if(_0||c0){var Qv={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},h0={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(H_){var e0=S_[H_];S_[H_]=function(P_,Rv,E_){var L_=[].slice.call(arguments);switch(H_){case"generateKey":var F_=_r(P_),J_=Rv,z_=E_;break;case"importKey":F_=_r(E_),J_=L_[3],z_=L_[4],"jwk"===P_&&((Rv=_a(Rv)).alg||(Rv.alg=_s(F_)),Rv.key_ops||(Rv.key_ops="oct"!==Rv.kty?z_.filter("d"in Rv?I_:p_):z_.slice()),L_[1]=_l(Rv));break;case"unwrapKey":F_=L_[4],J_=L_[5],z_=L_[6],L_[2]=E_._key}if("generateKey"===H_&&"HMAC"===F_.name&&F_.hash)return F_.length=F_.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[F_.hash.name],S_.importKey("raw",v_.getRandomValues(new Uint8Array(F_.length+7>>3)),F_,J_,z_);if(c0&&"generateKey"===H_&&"RSASSA-PKCS1-v1_5"===F_.name&&(!F_.modulusLength||2048<=F_.modulusLength))return(P_=_r(P_)).name="RSAES-PKCS1-v1_5",delete P_.hash,S_.generateKey(P_,!0,["encrypt","decrypt"]).then(function(O0){return Promise.all([S_.exportKey("jwk",O0.publicKey),S_.exportKey("jwk",O0.privateKey)])}).then(function(O0){return O0[0].alg=O0[1].alg=_s(F_),O0[0].key_ops=z_.filter(p_),O0[1].key_ops=z_.filter(I_),Promise.all([S_.importKey("jwk",O0[0],F_,!0,O0[0].key_ops),S_.importKey("jwk",O0[1],F_,J_,O0[1].key_ops)])}).then(function(O0){return{publicKey:O0[0],privateKey:O0[1]}});if((c0||_0&&"SHA-1"===(F_.hash||{}).name)&&"importKey"===H_&&"jwk"===P_&&"HMAC"===F_.name&&"oct"===Rv.kty)return S_.importKey("raw",k(f(Rv.k)),E_,L_[3],L_[4]);if(c0&&"importKey"===H_&&("spki"===P_||"pkcs8"===P_))return S_.importKey("jwk",bh(Rv),E_,L_[3],L_[4]);if(_0&&"unwrapKey"===H_)return S_.decrypt(L_[3],E_,Rv).then(function(O0){return S_.importKey(P_,O0,L_[4],L_[5],L_[6])});try{var D0=e0.apply(S_,L_)}catch(O0){return Promise.reject(O0)}return _0&&(D0=new Promise(function(O0,CI){D0.onabort=D0.onerror=function(tI){CI(tI)},D0.oncomplete=function(tI){O0(tI.target.result)}})),D0=D0.then(function(O0){return"HMAC"!==F_.name||F_.length||(F_.length=8*O0.algorithm.length),0==F_.name.search("RSA")&&(F_.modulusLength||(F_.modulusLength=(O0.publicKey||O0).algorithm.modulusLength),F_.publicExponent||(F_.publicExponent=(O0.publicKey||O0).algorithm.publicExponent)),O0.publicKey&&O0.privateKey?{publicKey:new r_(O0.publicKey,F_,J_,z_.filter(p_)),privateKey:new r_(O0.privateKey,F_,J_,z_.filter(I_))}:new r_(O0,F_,J_,z_)})}}),["exportKey","wrapKey"].forEach(function(H_){var e0=S_[H_];S_[H_]=function(P_,Rv,E_){var L_=[].slice.call(arguments);switch(H_){case"exportKey":L_[1]=Rv._key;break;case"wrapKey":L_[1]=Rv._key,L_[2]=E_._key}if((c0||_0&&"SHA-1"===(Rv.algorithm.hash||{}).name)&&"exportKey"===H_&&"jwk"===P_&&"HMAC"===Rv.algorithm.name&&(L_[0]="raw"),!c0||"exportKey"!==H_||"spki"!==P_&&"pkcs8"!==P_||(L_[0]="jwk"),_0&&"wrapKey"===H_)return S_.exportKey(P_,Rv).then(function(J_){return"jwk"===P_&&(J_=k(unescape(encodeURIComponent(JSON.stringify(_a(J_)))))),S_.encrypt(L_[3],E_,J_)});try{var F_=e0.apply(S_,L_)}catch(J_){return Promise.reject(J_)}return _0&&(F_=new Promise(function(J_,z_){F_.onabort=F_.onerror=function(D0){z_(D0)},F_.oncomplete=function(D0){J_(D0.target.result)}})),"exportKey"===H_&&"jwk"===P_&&(F_=F_.then(function(J_){return(c0||_0&&"SHA-1"===(Rv.algorithm.hash||{}).name)&&"HMAC"===Rv.algorithm.name?{kty:"oct",alg:_s(Rv.algorithm),key_ops:Rv.usages.slice(),ext:!0,k:g(q(J_))}:((J_=_a(J_)).alg||(J_.alg=_s(Rv.algorithm)),J_.key_ops||(J_.key_ops="public"===Rv.type?Rv.usages.filter(p_):"private"===Rv.type?Rv.usages.filter(I_):Rv.usages.slice()),J_)})),!c0||"exportKey"!==H_||"spki"!==P_&&"pkcs8"!==P_||(F_=F_.then(function(J_){var z_=[["",null]],D0=!1;if("RSA"!==(J_=_a(J_)).kty)throw new TypeError("Unsupported key type");for(var O0="n e d p q dp dq qi".split(" "),CI=[],tI=0;tI<O0.length&&O0[tI]in J_;tI++){var K0=CI[tI]=k(f(J_[O0[tI]]));128&K0[0]&&(CI[tI]=new Uint8Array(K0.length+1),CI[tI].set(K0,1))}return 2<CI.length&&(D0=!0,CI.unshift(new Uint8Array([0]))),z_[0][0]="1.2.840.113549.1.1.1",z_.push(new Uint8Array(_A(CI)).buffer),D0?z_.unshift(new Uint8Array([0])):z_[1]={tag:3,value:z_[1]},new Uint8Array(_A(z_)).buffer})),F_}}),["encrypt","decrypt","sign","verify"].forEach(function(H_){var e0=S_[H_];S_[H_]=function(P_,Rv,E_,L_){if(_0&&(!E_.byteLength||L_&&!L_.byteLength))throw Error("Empty input is not allowed");var F_=[].slice.call(arguments),J_=_r(P_);if(!_0||"sign"!==H_&&"verify"!==H_||"RSASSA-PKCS1-v1_5"!==P_&&"HMAC"!==P_||(F_[0]={name:P_}),_0&&Rv.algorithm.hash&&(F_[0].hash=F_[0].hash||Rv.algorithm.hash),_0&&"decrypt"===H_&&"AES-GCM"===J_.name){var z_=P_.tagLength>>3;F_[2]=(E_.buffer||E_).slice(0,E_.byteLength-z_),P_.tag=(E_.buffer||E_).slice(E_.byteLength-z_)}_0&&"AES-GCM"===J_.name&&void 0===F_[0].tagLength&&(F_[0].tagLength=128),F_[1]=Rv._key;try{var D0=e0.apply(S_,F_)}catch(O0){return Promise.reject(O0)}return _0&&(D0=new Promise(function(O0,CI){D0.onabort=D0.onerror=function(tI){CI(tI)},D0.oncomplete=function(tI){if(tI=tI.target.result,"encrypt"===H_&&tI instanceof AesGcmEncryptResult){var K0=tI.ciphertext,B1=tI.tag;(tI=new Uint8Array(K0.byteLength+B1.byteLength)).set(new Uint8Array(K0),0),tI.set(new Uint8Array(B1),K0.byteLength),tI=tI.buffer}O0(tI)}})),D0}}),_0){var E0=S_.digest;S_.digest=function(H_,e0){if(!e0.byteLength)throw Error("Empty input is not allowed");try{var P_=E0.call(S_,H_,e0)}catch(Rv){return Promise.reject(Rv)}return P_=new Promise(function(Rv,E_){P_.onabort=P_.onerror=function(L_){E_(L_)},P_.oncomplete=function(L_){Rv(L_.target.result)}})},l.crypto=Object.create(v_,{getRandomValues:{value:function(H_){return v_.getRandomValues(H_)}},subtle:{value:S_}}),l.CryptoKey=r_}c0&&(v_.subtle=S_,l.Crypto=x_,l.SubtleCrypto=B_,l.CryptoKey=r_)}}}},h.exports?h.exports=g(l):g(l)}),function(h){h.console||(h.console={}),h=h.console;for(var l,g=function(){},f=["memory"],k="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");l=f.pop();)h[l]||(h[l]={});for(;l=k.pop();)h[l]||(h[l]=g)}("undefined"==typeof window?Ka:window),M({target:"Object",stat:!0},{setPrototypeOf:Ya});var Ky=R(function(){ac(1)});M({target:"Object",stat:!0,forced:Ky,sham:!Ro},{getPrototypeOf:function(h){return ac(Va(h))}});var kq=[].slice,vk={},Ly=Function.bind||function(h){var l=Bb(this),g=kq.call(arguments,1),f=function(){var k=g.concat(kq.call(arguments));if(this instanceof f){var q=k.length;if(!(q in vk)){for(var _r=[],_s=0;_s<q;_s++)_r[_s]="a["+_s+"]";vk[q]=Function("C,a","return new C("+_r.join(",")+")")}k=vk[q](l,k)}else k=l.apply(h,k);return k};return ha(l.prototype)&&(f.prototype=l.prototype),f},wk=Rb("Reflect","construct"),lq=R(function(){function h(){}return!(wk(function(){},[],h)instanceof h)}),mq=!R(function(){wk(function(){})}),nq=lq||mq;M({target:"Reflect",stat:!0,forced:nq,sham:nq},{construct:function(h,l){Bb(h),sa(l);var g=3>arguments.length?h:Bb(arguments[2]);if(mq&&!lq)return wk(h,l,g);if(h==g){switch(l.length){case 0:return new h;case 1:return new h(l[0]);case 2:return new h(l[0],l[1]);case 3:return new h(l[0],l[1],l[2]);case 4:return new h(l[0],l[1],l[2],l[3])}return(g=[null]).push.apply(g,l),new(Ly.apply(h,g))}g=Sb(ha(g=g.prototype)?g:Object.prototype);var f=Function.apply.call(h,g,l);return ha(f)?f:g}}),M({target:"Reflect",stat:!0},{get:ym});var oq=Jb.f,My=R(function(){oq(1)});M({target:"Object",stat:!0,forced:!fa||My,sham:!fa},{getOwnPropertyDescriptor:function(h,l){return oq(tb(h),l)}});var pq=Rd.f,Ny={}.toString,qq="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],xk=function(h){if(qq&&"[object Window]"==Ny.call(h))try{var l=pq(h)}catch(g){l=qq.slice()}else l=pq(tb(h));return l},rq={f:qa},Oy=Wa.f,Ph=function(h){var l=C.Symbol||(C.Symbol={});Q(l,h)||Oy(l,h,{value:rq.f(h)})},ub=nh("hidden"),sq=qa("toPrimitive"),Py=La.set,tq=La.getterFor("Symbol"),Tb=Object.prototype,vb=C.Symbol,kg=Rb("JSON","stringify"),uq=Jb.f,vd=Wa.f,vq=xk,Qy=Sf,Sc=ld("symbols"),lg=ld("op-symbols"),yk=ld("string-to-symbol-registry"),zk=ld("symbol-to-string-registry"),Ry=ld("wks"),Ak=C.QObject,Bk=!Ak||!Ak.prototype||!Ak.prototype.findChild,Ck=fa&&R(function(){return 7!=Sb(vd({},"a",{get:function(){return vd(this,"a",{value:7}).a}})).a})?function(h,l,g){var f=uq(Tb,l);f&&delete Tb[l],vd(h,l,g),f&&h!==Tb&&vd(Tb,l,f)}:vd,Dk=function(h,l){var g=Sc[h]=Sb(vb.prototype);return Py(g,{type:"Symbol",tag:h,description:l}),fa||(g.description=l),g},Ek=Bo?function(h){return"symbol"==typeof h}:function(h){return Object(h)instanceof vb},Qh=function(h,l,g){return h===Tb&&Qh(lg,l,g),sa(h),l=tc(l,!0),sa(g),Q(Sc,l)?(g.enumerable?(Q(h,ub)&&h[ub][l]&&(h[ub][l]=!1),g=Sb(g,{enumerable:sc(0,!1)})):(Q(h,ub)||vd(h,ub,sc(1,{})),h[ub][l]=!0),Ck(h,l,g)):vd(h,l,g)},wq=function(h,l){sa(h);var g=tb(l);return l=Mc(g).concat(Fk(g)),Sd(l,function(f){fa&&!Gk.call(g,f)||Qh(h,f,g[f])}),h},Gk=function(h){h=tc(h,!0);var l=Qy.call(this,h);return!(this===Tb&&Q(Sc,h)&&!Q(lg,h))&&(!(l||!Q(this,h)||!Q(Sc,h)||Q(this,ub)&&this[ub][h])||l)},xq=function(h,l){if(h=tb(h),l=tc(l,!0),h!==Tb||!Q(Sc,l)||Q(lg,l)){var g=uq(h,l);return!g||!Q(Sc,l)||Q(h,ub)&&h[ub][l]||(g.enumerable=!0),g}},yq=function(h){h=vq(tb(h));var l=[];return Sd(h,function(g){Q(Sc,g)||Q(Pe,g)||l.push(g)}),l},Fk=function(h){var l=h===Tb;h=vq(l?lg:tb(h));var g=[];return Sd(h,function(f){!Q(Sc,f)||l&&!Q(Tb,f)||g.push(Sc[f])}),g};if(wc||(vb=function(){if(this instanceof vb)throw TypeError("Symbol is not a constructor");var h=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,l=Oe(h),g=function(f){this===Tb&&g.call(lg,f),Q(this,ub)&&Q(this[ub],l)&&(this[ub][l]=!1),Ck(this,l,sc(1,f))};return fa&&Bk&&Ck(Tb,l,{configurable:!0,set:g}),Dk(l,h)},Ea(vb.prototype,"toString",function(){return tq(this).tag}),Ea(vb,"withoutSetter",function(h){return Dk(Oe(h),h)}),Sf=Gk,Wa.f=Qh,Jb.f=xq,Rd.f=xk=yq,Uf.f=Fk,rq.f=function(h){return Dk(qa(h),h)},fa&&(vd(vb.prototype,"description",{configurable:!0,get:function(){return tq(this).description}}),Ea(Tb,"propertyIsEnumerable",Gk,{unsafe:!0}))),M({global:!0,wrap:!0,forced:!wc,sham:!wc},{Symbol:vb}),Sd(Mc(Ry),function(h){Ph(h)}),M({target:"Symbol",stat:!0,forced:!wc},{for:function(h){if(h=String(h),Q(yk,h))return yk[h];var l=vb(h);return yk[h]=l,zk[l]=h,l},keyFor:function(h){if(!Ek(h))throw TypeError(h+" is not a symbol");if(Q(zk,h))return zk[h]},useSetter:function(){Bk=!0},useSimple:function(){Bk=!1}}),M({target:"Object",stat:!0,forced:!wc,sham:!fa},{create:function(h,l){return void 0===l?Sb(h):wq(Sb(h),l)},defineProperty:Qh,defineProperties:wq,getOwnPropertyDescriptor:xq}),M({target:"Object",stat:!0,forced:!wc},{getOwnPropertyNames:yq,getOwnPropertySymbols:Fk}),M({target:"Object",stat:!0,forced:R(function(){Uf.f(1)})},{getOwnPropertySymbols:function(h){return Uf.f(Va(h))}}),kg){var Sy=!wc||R(function(){var h=vb();return"[null]"!=kg([h])||"{}"!=kg({a:h})||"{}"!=kg(Object(h))});M({target:"JSON",stat:!0,forced:Sy},{stringify:function(h,l,g){for(var f,k=[h],q=1;arguments.length>q;)k.push(arguments[q++]);if(f=l,(ha(l)||void 0!==h)&&!Ek(h))return qd(l)||(l=function(_r,_s){if("function"==typeof f&&(_s=f.call(this,_r,_s)),!Ek(_s))return _s}),k[1]=l,kg.apply(null,k)}})}vb.prototype[sq]||Sa(vb.prototype,sq,vb.prototype.valueOf),gc(vb,"Symbol"),Pe[ub]=!0;var Ty=Wa.f,Tc=C.Symbol;if(fa&&"function"==typeof Tc&&(!("description"in Tc.prototype)||void 0!==Tc().description)){var zq={},mg=function(){var h=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),l=this instanceof mg?new Tc(h):void 0===h?Tc():Tc(h);return""===h&&(zq[l]=!0),l};vo(mg,Tc);var Hk=mg.prototype=Tc.prototype;Hk.constructor=mg;var Uy=Hk.toString,Vy="Symbol(test)"==String(Tc("test")),Wy=/^Symbol\((.*)\)[^)]+$/;Ty(Hk,"description",{configurable:!0,get:function(){var h=ha(this)?this.valueOf():this,l=Uy.call(h);return Q(zq,h)?"":""===(h=Vy?l.slice(7,-1):l.replace(Wy,"$1"))?void 0:h}}),M({global:!0,forced:!0},{Symbol:mg})}Ph("toStringTag"),gc(C.JSON,"JSON",!0),gc(Math,"Math",!0),function(){function h(_A,r_){if(!(_A instanceof r_))throw new TypeError("Cannot call a class as a function")}function l(_A,r_){for(var p_=0;p_<r_.length;p_++){var I_=r_[p_];I_.enumerable=I_.enumerable||!1,I_.configurable=!0,"value"in I_&&(I_.writable=!0),Object.defineProperty(_A,I_.key,I_)}}function g(_A,r_,p_){return r_&&l(_A.prototype,r_),p_&&l(_A,p_),_A}function f(_A,r_){if("function"!=typeof r_&&null!==r_)throw new TypeError("Super expression must either be null or a function");_A.prototype=Object.create(r_&&r_.prototype,{constructor:{value:_A,writable:!0,configurable:!0}}),r_&&q(_A,r_)}function k(_A){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(r_){return r_.__proto__||Object.getPrototypeOf(r_)})(_A)}function q(_A,r_){return(q=Object.setPrototypeOf||function(p_,I_){return p_.__proto__=I_,p_})(_A,r_)}function _r(_A){if(void 0===_A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _A}function _a(_A,r_,p_){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(I_,v_,S_){for(;!Object.prototype.hasOwnProperty.call(I_,v_)&&null!==(I_=k(I_)););if(I_)return(v_=Object.getOwnPropertyDescriptor(I_,v_)).get?v_.get.call(S_):v_.value})(_A,r_,p_||_A)}var _l=function(){function _A(){h(this,_A),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return g(_A,[{key:"addEventListener",value:function(r_,p_,I_){r_ in this.listeners||(this.listeners[r_]=[]),this.listeners[r_].push({callback:p_,options:I_})}},{key:"removeEventListener",value:function(r_,p_){if(r_ in this.listeners)for(var I_=0,v_=(r_=this.listeners[r_]).length;I_<v_;I_++)if(r_[I_].callback===p_){r_.splice(I_,1);break}}},{key:"dispatchEvent",value:function(r_){if(r_.type in this.listeners){for(var p_=this.listeners[r_.type].slice(),I_=0,v_=p_.length;I_<v_;I_++){var S_=p_[I_];try{S_.callback.call(this,r_)}catch(x_){Promise.resolve().then(function(){throw x_})}S_.options&&S_.options.once&&this.removeEventListener(r_.type,S_.callback)}return!r_.defaultPrevented}}}]),_A}(),bh=function(_A){function r_(){h(this,r_);var I_=p_.call(this);return I_.listeners||_l.call(_r(I_)),Object.defineProperty(_r(I_),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(_r(I_),"onabort",{value:null,writable:!0,configurable:!0}),I_}f(r_,_A);var p_=function _s(_A){var r_=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(p_){return!1}}();return function(){var p_=k(_A);if(r_){var I_=k(this).constructor;p_=Reflect.construct(p_,arguments,I_)}else p_=p_.apply(this,arguments);return!p_||"object"!==V(p_)&&"function"!=typeof p_?_r(this):p_}}(r_);return g(r_,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(I_){"abort"===I_.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,I_)),_a(k(r_.prototype),"dispatchEvent",this).call(this,I_)}}]),r_}(_l),n_=function(){function _A(){h(this,_A),Object.defineProperty(this,"signal",{value:new bh,writable:!0,configurable:!0})}return g(_A,[{key:"abort",value:function(){try{var r_=new Event("abort")}catch(p_){"undefined"!=typeof document?document.createEvent?(r_=document.createEvent("Event")).initEvent("abort",!1,!1):(r_=document.createEventObject()).type="abort":r_={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(r_)}},{key:"toString",value:function(){return"[object AbortController]"}}]),_A}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(n_.prototype[Symbol.toStringTag]="AbortController",bh.prototype[Symbol.toStringTag]="AbortSignal"),function(_A){if(_A.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var r_=!0}else r_="function"==typeof _A.Request&&!_A.Request.prototype.hasOwnProperty("signal")||!_A.AbortController;r_&&(_A.AbortController=n_,_A.AbortSignal=bh)}("undefined"!=typeof self?self:Ka)}();var Xy=Math.floor,Yy=Math.log,Zy=Math.LOG2E;M({target:"Math",stat:!0},{clz32:function(h){return(h>>>=0)?31-Xy(Yy(h+.5)*Zy):32}});var $y=Math.log,az=Math.LN2,mu=Math.clz32||function(h){return 31-$y(h>>>0)/az|0},Gd=String.fromCharCode,Aq={}.toString,Ik=window.Uint8Array,Jk=Ik||Array,bz=Aq.call((window.ArrayBuffer||Jk).prototype),Kk,h,l,g,f,k,q,_r,_s,_a,_l,bh,n_,_A;zm.prototype.decode=function(h){if(Aq.call(h=h&&h.buffer||h)!==bz)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var l="",g=0,f=0|(h=Ik?new Jk(h):h).length;g<f;g=g+32768|0)l+=Gd.apply(0,h[Ik?"slice":"subarray"](g,g+32768|0));return l.replace(/[\xc0-\xff][\x80-\xbf]*/g,lu)},window.TextDecoder||(window.TextDecoder=zm),Am.prototype.encode=function(h){for(var l=0|(h=void 0===h?"":(""+h).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,nu)).length,g=new Jk(l),f=0;f<l;f=f+1|0)g[f]=h.charCodeAt(f);return g},window.TextEncoder||(window.TextEncoder=Am),h=Kk||(Kk={}),(_A=l||(l={})).LOGIN="LOGIN",_A.LOGIN_SUCCESS="LOGIN_SUCCESS",_A.LOGIN_FAILURE="LOGIN_FAILURE",_A.LOGIN_TIMEOUT="LOGIN_TIMEOUT",_A.INTERRUPTED="INTERRUPTED",_A.LOGOUT="LOGOUT",_A.BANNED_BY_SERVER="BANNED_BY_SERVER",_A.REMOTE_LOGIN="REMOTE_LOGIN",h.ConnectionChangeReason=l,function(_A){_A.DISCONNECTED="DISCONNECTED",_A.CONNECTING="CONNECTING",_A.CONNECTED="CONNECTED",_A.RECONNECTING="RECONNECTING",_A.ABORTED="ABORTED"}(g||(g={})),h.ConnectionState=g,function(_A){_A.IDLE="IDLE",_A.SENT_TO_REMOTE="SENT_TO_REMOTE",_A.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",_A.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",_A.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",_A.CANCELED="CANCELED",_A.FAILURE="FAILURE"}(f||(f={})),h.LocalInvitationState=f,function(_A){_A.INVITATION_RECEIVED="INVITATION_RECEIVED",_A.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",_A.REFUSED="REFUSED",_A.ACCEPTED="ACCEPTED",_A.CANCELED="CANCELED",_A.FAILURE="FAILURE"}(k||(k={})),h.RemoteInvitationState=k,function(_A){_A.UNKNOWN="UNKNOWN",_A.PEER_NO_RESPONSE="PEER_NO_RESPONSE",_A.INVITATION_EXPIRE="INVITATION_EXPIRE",_A.PEER_OFFLINE="PEER_OFFLINE",_A.NOT_LOGGEDIN="NOT_LOGGEDIN"}(q||(q={})),h.LocalInvitationFailureReason=q,function(_A){_A.UNKNOWN="UNKNOWN",_A.PEER_OFFLINE="PEER_OFFLINE",_A.ACCEPT_FAILURE="ACCEPT_FAILURE",_A.INVITATION_EXPIRE="INVITATION_EXPIRE"}(_r||(_r={})),h.RemoteInvitationFailureReason=_r,function(_A){_A.ONLINE="ONLINE",_A.UNREACHABLE="UNREACHABLE",_A.OFFLINE="OFFLINE"}(_s||(_s={})),h.PeerOnlineState=_s,(_a||(_a={})).ONLINE_STATUS="ONLINE_STATUS",h.PeerSubscriptionOption=_a,function(_A){_A.TEXT="TEXT",_A.RAW="RAW",_A.IMAGE="IMAGE",_A.FILE="FILE"}(_l||(_l={})),h.MessageType=_l,function(_A){_A.CN="CN",_A.NA="NA",_A.EU="EU",_A.AS="AS",_A.JP="JP",_A.IN="IN",_A.GLOB="GLOB",_A.OC="OC",_A.SA="SA",_A.AF="AF",_A.OVS="OVS"}(bh||(bh={})),h.LegacyAreaCode=bh,function(_A){_A.GLOBAL="GLOBAL",_A.INDIA="INDIA",_A.JAPAN="JAPAN",_A.ASIA="ASIA",_A.EUROPE="EUROPE",_A.CHINA="CHINA",_A.NORTH_AMERICA="NORTH_AMERICA"}(n_||(n_={})),h.AreaCode=n_;var S=Kk;M({target:"Array",proto:!0},{includes:function(h){return so(this,h,1<arguments.length?arguments[1]:void 0)}}),Vd("includes");var Lk=function(h){if(Fj(h))throw TypeError("The method doesn't accept regular expressions");return h},cz=qa("match"),Mk=function(h){var l=/./;try{"/./"[h](l)}catch(g){try{return l[cz]=!1,"/./"[h](l)}catch(f){}}return!1};M({target:"String",proto:!0,forced:!Mk("includes")},{includes:function(h){return!!~String(mb(this)).indexOf(Lk(h),1<arguments.length?arguments[1]:void 0)}});var lc={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0,ENABLE_EDGE_AUTO_FALLBACK:!0};Ph("iterator"),Ph("asyncIterator");var Nk=Te("forEach")?[].forEach:function(h){return Sd(this,h,1<arguments.length?arguments[1]:void 0)},Bq;for(Bq in sk){var Cq=C[Bq],Rh=Cq&&Cq.prototype;if(Rh&&Rh.forEach!==Nk)try{Sa(Rh,"forEach",Nk)}catch(h){Rh.forEach=Nk}}var dz=[].reverse,Dq=[1,2];M({target:"Array",proto:!0,forced:String(Dq)===String(Dq.reverse())},{reverse:function(){return qd(this)&&(this.length=this.length),dz.call(this)}});var x=cb(function(h){h=function(l){function g(E_,L_,F_){return Object.defineProperty(E_,L_,{value:F_,enumerable:!0,configurable:!0,writable:!0}),E_[L_]}function f(E_,L_,F_,J_){return L_=Object.create((L_&&L_.prototype instanceof q?L_:q).prototype),J_=new r_(J_||[]),L_._invoke=(z_=E_,D0=F_,O0=J_,CI=Qv,function(tI,K0){if(CI===E0)throw Error("Generator is already running");if(CI===H_){if("throw"===tI)throw K0;return I_()}for(O0.method=tI,O0.arg=K0;;){if((tI=O0.delegate)&&(tI=bh(tI,O0))){if(tI===e0)continue;return tI}if("next"===O0.method)O0.sent=O0._sent=O0.arg;else if("throw"===O0.method){if(CI===Qv)throw CI=H_,O0.arg;O0.dispatchException(O0.arg)}else"return"===O0.method&&O0.abrupt("return",O0.arg);if(CI=E0,"normal"===(tI=k(z_,D0,O0)).type){if(CI=O0.done?H_:h0,tI.arg===e0)continue;return{value:tI.arg,done:O0.done}}"throw"===tI.type&&(CI=H_,O0.method="throw",O0.arg=tI.arg)}}),L_;var z_,D0,O0,CI}function k(E_,L_,F_){try{return{type:"normal",arg:E_.call(L_,F_)}}catch(J_){return{type:"throw",arg:J_}}}function q(){}function _r(){}function _s(){}function _a(E_){["next","throw","return"].forEach(function(L_){g(E_,L_,function(F_){return this._invoke(L_,F_)})})}function _l(E_,L_){function F_(z_,D0,O0,CI){if("throw"!==(z_=k(E_[z_],E_,D0)).type){var tI=z_.arg;return(z_=tI.value)&&"object"===V(z_)&&x_.call(z_,"__await")?L_.resolve(z_.__await).then(function(K0){F_("next",K0,O0,CI)},function(K0){F_("throw",K0,O0,CI)}):L_.resolve(z_).then(function(K0){tI.value=K0,O0(tI)},function(K0){return F_("throw",K0,O0,CI)})}CI(z_.arg)}var J_;this._invoke=function(z_,D0){function O0(){return new L_(function(CI,tI){F_(z_,D0,CI,tI)})}return J_=J_?J_.then(O0,O0):O0()}}function bh(E_,L_){var F_=E_.iterator[L_.method];if(F_===v_){if(L_.delegate=null,"throw"===L_.method){if(E_.iterator.return&&(L_.method="return",L_.arg=v_,bh(E_,L_),"throw"===L_.method))return e0;L_.method="throw",L_.arg=new TypeError("The iterator does not provide a 'throw' method")}return e0}return"throw"===(F_=k(F_,E_.iterator,L_.arg)).type?(L_.method="throw",L_.arg=F_.arg,L_.delegate=null,e0):(F_=F_.arg)?F_.done?(L_[E_.resultName]=F_.value,L_.next=E_.nextLoc,"return"!==L_.method&&(L_.method="next",L_.arg=v_),L_.delegate=null,e0):F_:(L_.method="throw",L_.arg=new TypeError("iterator result is not an object"),L_.delegate=null,e0)}function n_(E_){var L_={tryLoc:E_[0]};1 in E_&&(L_.catchLoc=E_[1]),2 in E_&&(L_.finallyLoc=E_[2],L_.afterLoc=E_[3]),this.tryEntries.push(L_)}function _A(E_){var L_=E_.completion||{};L_.type="normal",delete L_.arg,E_.completion=L_}function r_(E_){this.tryEntries=[{tryLoc:"root"}],E_.forEach(n_,this),this.reset(!0)}function p_(E_){if(E_){var L_=E_[Q_];if(L_)return L_.call(E_);if("function"==typeof E_.next)return E_;if(!isNaN(E_.length)){var F_=-1;return(L_=function J_(){for(;++F_<E_.length;)if(x_.call(E_,F_))return J_.value=E_[F_],J_.done=!1,J_;return J_.value=v_,J_.done=!0,J_}).next=L_}}return{next:I_}}function I_(){return{value:v_,done:!0}}var v_,S_=Object.prototype,x_=S_.hasOwnProperty,B_="function"==typeof Symbol?Symbol:{},Q_=B_.iterator||"@@iterator",_0=B_.asyncIterator||"@@asyncIterator",c0=B_.toStringTag||"@@toStringTag";try{g({},"")}catch(E_){g=function(L_,F_,J_){return L_[F_]=J_}}l.wrap=f;var Qv="suspendedStart",h0="suspendedYield",E0="executing",H_="completed",e0={};g(B_={},Q_,function(){return this});var P_=Object.getPrototypeOf;(P_=P_&&P_(P_(p_([]))))&&P_!==S_&&x_.call(P_,Q_)&&(B_=P_);var Rv=_s.prototype=q.prototype=Object.create(B_);return _r.prototype=_s,g(Rv,"constructor",_s),g(_s,"constructor",_r),_r.displayName=g(_s,c0,"GeneratorFunction"),l.isGeneratorFunction=function(E_){return!!(E_="function"==typeof E_&&E_.constructor)&&(E_===_r||"GeneratorFunction"===(E_.displayName||E_.name))},l.mark=function(E_){return Object.setPrototypeOf?Object.setPrototypeOf(E_,_s):(E_.__proto__=_s,g(E_,c0,"GeneratorFunction")),E_.prototype=Object.create(Rv),E_},l.awrap=function(E_){return{__await:E_}},_a(_l.prototype),g(_l.prototype,_0,function(){return this}),l.AsyncIterator=_l,l.async=function(E_,L_,F_,J_,z_){void 0===z_&&(z_=Promise);var D0=new _l(f(E_,L_,F_,J_),z_);return l.isGeneratorFunction(L_)?D0:D0.next().then(function(O0){return O0.done?O0.value:D0.next()})},_a(Rv),g(Rv,c0,"Generator"),g(Rv,Q_,function(){return this}),g(Rv,"toString",function(){return"[object Generator]"}),l.keys=function(E_){var L_,F_=[];for(L_ in E_)F_.push(L_);return F_.reverse(),function J_(){for(;F_.length;){var z_=F_.pop();if(z_ in E_)return J_.value=z_,J_.done=!1,J_}return J_.done=!0,J_}},l.values=p_,r_.prototype={constructor:r_,reset:function(E_){if(this.next=this.prev=0,this.sent=this._sent=v_,this.done=!1,this.delegate=null,this.method="next",this.arg=v_,this.tryEntries.forEach(_A),!E_)for(var L_ in this)"t"===L_.charAt(0)&&x_.call(this,L_)&&!isNaN(+L_.slice(1))&&(this[L_]=v_)},stop:function(){this.done=!0;var E_=this.tryEntries[0].completion;if("throw"===E_.type)throw E_.arg;return this.rval},dispatchException:function(E_){function L_(tI,K0){return D0.type="throw",D0.arg=E_,F_.next=tI,K0&&(F_.method="next",F_.arg=v_),!!K0}if(this.done)throw E_;for(var F_=this,J_=this.tryEntries.length-1;0<=J_;--J_){var z_=this.tryEntries[J_],D0=z_.completion;if("root"===z_.tryLoc)return L_("end");if(z_.tryLoc<=this.prev){var O0=x_.call(z_,"catchLoc"),CI=x_.call(z_,"finallyLoc");if(O0&&CI){if(this.prev<z_.catchLoc)return L_(z_.catchLoc,!0);if(this.prev<z_.finallyLoc)return L_(z_.finallyLoc)}else if(O0){if(this.prev<z_.catchLoc)return L_(z_.catchLoc,!0)}else{if(!CI)throw Error("try statement without catch or finally");if(this.prev<z_.finallyLoc)return L_(z_.finallyLoc)}}}},abrupt:function(E_,L_){for(var F_=this.tryEntries.length-1;0<=F_;--F_){var J_=this.tryEntries[F_];if(J_.tryLoc<=this.prev&&x_.call(J_,"finallyLoc")&&this.prev<J_.finallyLoc){var z_=J_;break}}return z_&&("break"===E_||"continue"===E_)&&z_.tryLoc<=L_&&L_<=z_.finallyLoc&&(z_=null),(F_=z_?z_.completion:{}).type=E_,F_.arg=L_,z_?(this.method="next",this.next=z_.finallyLoc,e0):this.complete(F_)},complete:function(E_,L_){if("throw"===E_.type)throw E_.arg;return"break"===E_.type||"continue"===E_.type?this.next=E_.arg:"return"===E_.type?(this.rval=this.arg=E_.arg,this.method="return",this.next="end"):"normal"===E_.type&&L_&&(this.next=L_),e0},finish:function(E_){for(var L_=this.tryEntries.length-1;0<=L_;--L_){var F_=this.tryEntries[L_];if(F_.finallyLoc===E_)return this.complete(F_.completion,F_.afterLoc),_A(F_),e0}},catch:function(E_){for(var L_=this.tryEntries.length-1;0<=L_;--L_){var F_=this.tryEntries[L_];if(F_.tryLoc===E_){if("throw"===(E_=F_.completion).type){var J_=E_.arg;_A(F_)}return J_}}throw Error("illegal catch attempt")},delegateYield:function(E_,L_,F_){return this.delegate={iterator:p_(E_),resultName:L_,nextLoc:F_},"next"===this.method&&(this.arg=v_),e0}},l}(h.exports);try{regeneratorRuntime=h}catch(l){"object"===("undefined"==typeof globalThis?"undefined":V(globalThis))?globalThis.regeneratorRuntime=h:Function("r","regeneratorRuntime = r")(h)}}),Eq=!R(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ok=cb(function(h){var l=Wa.f,g=Oe("meta"),f=0,k=Object.isExtensible||function(){return!0},q=function(_s){l(_s,g,{value:{objectID:"O"+ ++f,weakData:{}}})},_r=h.exports={REQUIRED:!1,fastKey:function(_s,_a){if(!ha(_s))return"symbol"==typeof _s?_s:("string"==typeof _s?"S":"P")+_s;if(!Q(_s,g)){if(!k(_s))return"F";if(!_a)return"E";q(_s)}return _s[g].objectID},getWeakData:function(_s,_a){if(!Q(_s,g)){if(!k(_s))return!0;if(!_a)return!1;q(_s)}return _s[g].weakData},onFreeze:function(_s){return Eq&&_r.REQUIRED&&k(_s)&&!Q(_s,g)&&q(_s),_s}};Pe[g]=!0}),Fq=function(h,l,g){var f=-1!==h.indexOf("Map"),k=-1!==h.indexOf("Weak"),q=f?"set":"add",_r=C[h],_s=_r&&_r.prototype,_a=_r,_l={},bh=function(v_){var S_=_s[v_];Ea(_s,v_,"add"==v_?function(x_){return S_.call(this,0===x_?0:x_),this}:"delete"==v_?function(x_){return!(k&&!ha(x_))&&S_.call(this,0===x_?0:x_)}:"get"==v_?function(x_){return k&&!ha(x_)?void 0:S_.call(this,0===x_?0:x_)}:"has"==v_?function(x_){return!(k&&!ha(x_))&&S_.call(this,0===x_?0:x_)}:function(x_,B_){return S_.call(this,0===x_?0:x_,B_),this})};if(uc(h,"function"!=typeof _r||!(k||_s.forEach&&!R(function(){(new _r).entries().next()}))))_a=g.getConstructor(l,h,f,q),Ok.REQUIRED=!0;else if(uc(h,!0)){var n_=new _a,_A=n_[q](k?{}:-0,1)!=n_,r_=R(function(){n_.has(1)}),p_=uh(function(v_){new _r(v_)}),I_=!k&&R(function(){for(var v_=new _r,S_=5;S_--;)v_[q](S_,S_);return!v_.has(-0)});p_||((_a=l(function(v_,S_){return hc(v_,_a,h),v_=Lh(new _r,v_,_a),null!=S_&&yh(S_,v_[q],{that:v_,AS_ENTRIES:f}),v_})).prototype=_s,_s.constructor=_a),(r_||I_)&&(bh("delete"),bh("has"),f&&bh("get")),(I_||_A)&&bh(q),k&&_s.clear&&delete _s.clear}return _l[h]=_a,M({global:!0,forced:_a!=_r},_l),gc(_a,h),k||g.setStrong(_a,h,f),_a},ez=Wa.f,Gq=Ok.fastKey,Hq=La.set,Pk=La.getterFor,Iq={getConstructor:function(h,l,g,f){var k=h(function(_a,_l){hc(_a,k,l),Hq(_a,{type:l,index:Sb(null),first:void 0,last:void 0,size:0}),fa||(_a.size=0),null!=_l&&yh(_l,_a[f],{that:_a,AS_ENTRIES:g})}),q=Pk(l),_r=function(_a,_l,bh){var n_,_A=q(_a),r_=_s(_a,_l);return r_?r_.value=bh:(_A.last=r_={index:n_=Gq(_l,!0),key:_l,value:bh,previous:_l=_A.last,next:void 0,removed:!1},_A.first||(_A.first=r_),_l&&(_l.next=r_),fa?_A.size++:_a.size++,"F"!==n_&&(_A.index[n_]=r_)),_a},_s=function(_a,_l){_a=q(_a);var bh=Gq(_l);if("F"!==bh)return _a.index[bh];for(_a=_a.first;_a;_a=_a.next)if(_a.key==_l)return _a};return Xe(k.prototype,{clear:function(){for(var _a=q(this),_l=_a.index,bh=_a.first;bh;)bh.removed=!0,bh.previous&&(bh.previous=bh.previous.next=void 0),delete _l[bh.index],bh=bh.next;_a.first=_a.last=void 0,fa?_a.size=0:this.size=0},delete:function(_a){var _l=q(this);if(_a=_s(this,_a)){var bh=_a.next,n_=_a.previous;delete _l.index[_a.index],_a.removed=!0,n_&&(n_.next=bh),bh&&(bh.previous=n_),_l.first==_a&&(_l.first=bh),_l.last==_a&&(_l.last=n_),fa?_l.size--:this.size--}return!!_a},forEach:function(_a){for(var _l,bh=q(this),n_=pd(_a,1<arguments.length?arguments[1]:void 0,3);_l=_l?_l.next:bh.first;)for(n_(_l.value,_l.key,this);_l&&_l.removed;)_l=_l.previous},has:function(_a){return!!_s(this,_a)}}),Xe(k.prototype,g?{get:function(_a){return(_a=_s(this,_a))&&_a.value},set:function(_a,_l){return _r(this,0===_a?0:_a,_l)}}:{add:function(_a){return _r(this,_a=0===_a?0:_a,_a)}}),fa&&ez(k.prototype,"size",{get:function(){return q(this).size}}),k},setStrong:function(h,l,g){var f=l+" Iterator",k=Pk(l),q=Pk(f);Qj(h,l,function(_r,_s){Hq(this,{type:f,target:_r,state:k(_r),kind:_s,last:void 0})},function(){for(var _r=q(this),_s=_r.kind,_a=_r.last;_a&&_a.removed;)_a=_a.previous;return _r.target&&(_r.last=_a=_a?_a.next:_r.state.first)?"keys"==_s?{value:_a.key,done:!1}:"values"==_s?{value:_a.value,done:!1}:{value:[_a.key,_a.value],done:!1}:(_r.target=void 0,{value:void 0,done:!0})},g?"entries":"values",!g,!0),ag(l)}};Fq("Set",function(h){return function(){return h(this,arguments.length?arguments[0]:void 0)}},Iq);var fz=Rd.f,gz=Jb.f,hz=Wa.f,wd=C.Number,Sh=wd.prototype,iz="Number"==ec(Sb(Sh)),Jq=function(h){var l,g=tc(h,!1);if("string"==typeof g&&2<g.length)if(43===(h=(g=Ij(g)).charCodeAt(0))||45===h){if(88===(h=g.charCodeAt(2))||120===h)return NaN}else if(48===h){switch(g.charCodeAt(1)){case 66:case 98:h=2;var f=49;break;case 79:case 111:h=8,f=55;break;default:return+g}var k=(g=g.slice(2)).length;for(l=0;l<k;l++){var q=g.charCodeAt(l);if(48>q||q>f)return NaN}return parseInt(g,h)}return+g};if(uc("Number",!wd(" 0o1")||!wd("0b1")||wd("+0x1"))){for(var Zd=function(h){var l=1>arguments.length?0:h,g=this;return g instanceof Zd&&(iz?R(function(){Sh.valueOf.call(g)}):"Number"!=ec(g))?Lh(new wd(Jq(l)),g,Zd):Jq(l)},Kq=fa?fz(wd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),Qk=0,Th;Kq.length>Qk;Qk++)Q(wd,Th=Kq[Qk])&&!Q(Zd,Th)&&hz(Zd,Th,gz(wd,Th));Zd.prototype=Sh,Sh.constructor=Zd,Ea(C,"Number",Zd)}var Lq=qa("isConcatSpreadable"),jz=51<=nd||!R(function(){var h=[];return h[Lq]=!1,h.concat()[0]!==h}),kz=Yf("concat");M({target:"Array",proto:!0,forced:!jz||!kz},{concat:function(h){var l,g=Va(this),f=th(g,0),k=0,q=-1;for(l=arguments.length;q<l;q++){var _r=-1===q?g:arguments[q],_s=_r;if(ha(_s)){var _a=_s[Lq];_s=void 0!==_a?!!_a:qd(_s)}else _s=!1;if(_s){if(9007199254740991<k+(_a=va(_r.length)))throw TypeError("Maximum allowed index exceeded");for(_s=0;_s<_a;_s++,k++)_s in _r&&Ve(f,k,_r[_s])}else{if(9007199254740991<=k)throw TypeError("Maximum allowed index exceeded");Ve(f,k++,_r)}}return f.length=k,f}});var Rk=Rb("Reflect","apply"),lz=Function.apply,mz=!R(function(){Rk(function(){})});M({target:"Reflect",stat:!0,forced:mz},{apply:function(h,l,g){return Bb(h),sa(g),Rk?Rk(h,l,g):lz.call(h,l,g)}}),M({target:"Reflect",stat:!0},{ownKeys:uo});var nz=xk,oz=R(function(){return!Object.getOwnPropertyNames(1)});M({target:"Object",stat:!0,forced:oz},{getOwnPropertyNames:nz});var ef="object"===("undefined"==typeof Reflect?"undefined":V(Reflect))?Reflect:null,Mq=ef&&"function"==typeof ef.apply?ef.apply:function(h,l,g){return Function.prototype.apply.call(h,l,g)},pz=ef&&"function"==typeof ef.ownKeys?ef.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)},Nq=Number.isNaN||function(h){return h!=h};ia.EventEmitter=ia,ia.prototype._events=void 0,ia.prototype._eventsCount=0,ia.prototype._maxListeners=void 0;var Oq=10;Object.defineProperty(ia,"defaultMaxListeners",{enumerable:!0,get:function(){return Oq},set:function(h){if("number"!=typeof h||0>h||Nq(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");Oq=h}}),ia.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ia.prototype.setMaxListeners=function(h){if("number"!=typeof h||0>h||Nq(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},ia.prototype.getMaxListeners=function(){return void 0===this._maxListeners?ia.defaultMaxListeners:this._maxListeners},ia.prototype.emit=function(h){for(var l=[],g=1;g<arguments.length;g++)l.push(arguments[g]);g="error"===h;var k,f=this._events;if(void 0!==f)g=g&&void 0===f.error;else if(!g)return!1;if(g)throw 0<l.length&&(k=l[0]),k instanceof Error?k:((l=Error("Unhandled error."+(k?" ("+k.message+")":""))).context=k,l);if(void 0===(g=f[h]))return!1;if("function"==typeof g)Mq(g,this,l);else for(f=Em(g,k=g.length),g=0;g<k;++g)Mq(f[g],this,l);return!0},ia.prototype.addListener=function(h,l){return Bm(this,h,l,!1)},ia.prototype.on=ia.prototype.addListener,ia.prototype.prependListener=function(h,l){return Bm(this,h,l,!0)},ia.prototype.once=function(h,l){return Kg(l),this.on(h,Cm(this,h,l)),this},ia.prototype.prependOnceListener=function(h,l){return Kg(l),this.prependListener(h,Cm(this,h,l)),this},ia.prototype.removeListener=function(h,l){var g;Kg(l);var f=this._events;if(void 0===f)return this;var k=f[h];if(void 0===k)return this;if(k===l||k.listener===l)0==--this._eventsCount?this._events=Object.create(null):(delete f[h],f.removeListener&&this.emit("removeListener",h,k.listener||l));else if("function"!=typeof k){var q=-1;for(g=k.length-1;0<=g;g--)if(k[g]===l||k[g].listener===l){var _r=k[g].listener;q=g;break}if(0>q)return this;if(0===q)k.shift();else{for(;q+1<k.length;q++)k[q]=k[q+1];k.pop()}1===k.length&&(f[h]=k[0]),void 0!==f.removeListener&&this.emit("removeListener",h,_r||l)}return this},ia.prototype.off=ia.prototype.removeListener,ia.prototype.removeAllListeners=function(h){var l=this._events;if(void 0===l)return this;if(void 0===l.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==l[h]&&(0==--this._eventsCount?this._events=Object.create(null):delete l[h]),this;if(0===arguments.length){var g=Object.keys(l);for(l=0;l<g.length;++l){var f=g[l];"removeListener"!==f&&this.removeAllListeners(f)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(g=l[h]))this.removeListener(h,g);else if(void 0!==g)for(l=g.length-1;0<=l;l--)this.removeListener(h,g[l]);return this},ia.prototype.listeners=function(h){return Dm(this,h,!0)},ia.prototype.rawListeners=function(h){return Dm(this,h,!1)},ia.listenerCount=function(h,l){return"function"==typeof h.listenerCount?h.listenerCount(l):Fm.call(h,l)},ia.prototype.listenerCount=Fm,ia.prototype.eventNames=function(){return 0<this._eventsCount?pz(this._events):[]},ia.once=function(h,l){return new Promise(function(g,f){function k(_r){h.removeListener(l,q),f(_r)}function q(){"function"==typeof h.removeListener&&h.removeListener("error",k),g([].slice.call(arguments))}Gm(h,l,q,{once:!0}),"error"!==l&&pu(h,k,{once:!0})})};var ff=Object.assign,Pq=Object.defineProperty,ng=!ff||R(function(){if(fa&&1!==ff({b:1},ff(Pq({},"a",{enumerable:!0,get:function(){Pq(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var h={},l={},g=Symbol();return h[g]=7,"abcdefghijklmnopqrst".split("").forEach(function(f){l[f]=f}),7!=ff({},h)[g]||"abcdefghijklmnopqrst"!=Mc(ff({},l)).join("")})?function(h,l){for(var g=Va(h),f=arguments.length,k=1,q=Uf.f,_r=Sf;f>k;)for(var _s,_a=Tf(arguments[k++]),_l=q?Mc(_a).concat(q(_a)):Mc(_a),bh=_l.length,n_=0;bh>n_;)_s=_l[n_++],(!fa||_r.call(_a,_s))&&(g[_s]=_a[_s]);return g}:ff;M({target:"Object",stat:!0,forced:Object.assign!==ng},{assign:ng}),Fq("Map",function(h){return function(){return h(this,arguments.length?arguments[0]:void 0)}},Iq);var qz=Math.log,rz=Math.LN2;M({target:"Math",stat:!0},{log2:function(h){return qz(h)/rz}});var sz=Wa.f,tz=Rd.f,uz=La.enforce,vz=qa("match"),zc=C.RegExp,Sk=zc.prototype,og=/a/g,Tk=/a/g,Uk=new zc(og)!==og;if(fa&&uc("RegExp",!Uk||vc||R(function(){return Tk[vz]=!1,zc(og)!=og||zc(Tk)==Tk||"/a/i"!=zc(og,"i")}))){for(var Uc=function(h,l){var g,f=this instanceof Uc,k=Fj(h),q=void 0===l;return!f&&k&&h.constructor===Uc&&q||(Uk?k&&!q&&(h=h.source):h instanceof Uc&&(q&&(l=Aj.call(h)),h=h.source),vc&&(g=!!l&&-1<l.indexOf("y"))&&(l=l.replace(/y/g,"")),h=Lh(Uk?new zc(h,l):zc(h,l),f?this:Sk,Uc),vc&&g&&(uz(h).sticky=!0)),h},wz=function(h){h in Uc||sz(Uc,h,{configurable:!0,get:function(){return zc[h]},set:function(l){zc[h]=l}})},Qq=tz(zc),Rq=0;Qq.length>Rq;)wz(Qq[Rq++]);Sk.constructor=Uc,Uc.prototype=Sk,Ea(C,"RegExp",Uc)}ag("RegExp"),jg("Float32",function(h){return function(l,g,f){return h(this,l,g,f)}}),jg("Float64",function(h){return function(l,g,f){return h(this,l,g,f)}}),jg("Uint32",function(h){return function(l,g,f){return h(this,l,g,f)}}),jg("Uint16",function(h){return function(l,g,f){return h(this,l,g,f)}});var Vk=function(h,l){return h===l?0:null==h?null==l?0:-1:null==l?null==h?0:1:"function"==typeof h.compare?h.compare(l):"function"==typeof l.compare?-l.compare(h):h<l?-1:h>l?1:0},Wk=[],Sq=Wk.sort,xz=R(function(){Wk.sort(void 0)}),yz=R(function(){Wk.sort(null)}),zz=Te("sort");M({target:"Array",proto:!0,forced:xz||!yz||!zz},{sort:function(h){return void 0===h?Sq.call(Va(this)):Sq.call(Va(this),Bb(h))}});var Tq=Object.getPrototypeOf({}),pg=function(h,l){var g;return h===l||(null==h?h==l:"function"===V(h.equiv)?h.equiv(l):null==l?h==l:"function"===V(l.equiv)?l.equiv(h):"string"!==V(h)&&"string"!==V(l)&&(null!=(g=Object.getPrototypeOf(h))&&g!==Tq||null!=(g=Object.getPrototypeOf(l))&&g!==Tq?"function"!==V(h)&&void 0!==h.length&&"function"!==V(l)&&void 0!==l.length?Bz(h,l):h instanceof Set&&l instanceof Set?Cz(h,l):h instanceof Map&&l instanceof Map?Dz(h,l):h instanceof Date&&l instanceof Date?h.getTime()===l.getTime():h instanceof RegExp&&l instanceof RegExp?h.toString()===l.toString():h!=h&&l!=l:Az(h,l)))},Bz=function(h,l){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:pg,f=h.length;if(f===l.length)for(;0<=--f&&g(h[f],l[f]););return 0>f},Cz=function(h,l){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:pg;return h.size===l.size&&g(G(h.keys()).sort(),G(l.keys()).sort())},Dz=function(h,l){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:pg;return h.size===l.size&&g(G(h).sort(),G(l).sort())},Az=function(h,l){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:pg;if(Object.keys(h).length!==Object.keys(l).length)return!1;for(var f in h)if(!l.hasOwnProperty(f)||!g(h[f],l[f]))return!1;return!0},Uq=function(h){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(g){return void 0!==g?": "+g:""};return function(g){function f(q){return X(this,f),k.call(this,h(q)+l(q))}ja(f,g);var k=ka(f);return f}(xf(Error))},Ez=Uq(function(){return"illegal argument(s)"}),Uh=function(h){throw new Ez(h)},Xk=Uq(function(){return"index out of bounds"}),Vq=1/4294967295,Fz=function(){function h(){X(this,h)}return Ia(h,[{key:"float",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*Vq*l}},{key:"norm",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*Vq-.5)*l}},{key:"minmax",value:function(l,g){return this.float()*(g-l)+l}}]),h}(),Yk=Math.random,Gz=new(function(h){function l(){return X(this,l),g.apply(this,arguments)}ja(l,h);var g=ka(l);return Ia(l,[{key:"int",value:function(){return 4294967296*Yk()>>>0}},{key:"float",value:function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return Yk()*f}},{key:"norm",value:function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(Yk()-.5)*f}}]),l}(Fz)),zi=Symbol(),Jm=function(){},Hz=Ok.onFreeze,Zk=Object.freeze,Iz=R(function(){Zk(1)});M({target:"Object",stat:!0,forced:Iz,sham:!Eq},{freeze:function(h){return Zk&&ha(h)?Zk(Hz(h)):h}});var Jz=Te("reduce"),Kz=!Oc&&79<nd&&83>nd;M({target:"Array",proto:!0,forced:!Jz||Kz},{reduce:function(h){return bq(this,h,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Im=function(h){return null!=h&&"function"==typeof h.xform?h.xform():h},Lg=function(){function h(l){X(this,h),this.value=l}return Ia(h,[{key:"deref",value:function(){return this.value}}]),h}(),Ai=function(h){return h instanceof Lg?h.deref():h},ru=function(h,l){return[h,function(g){return g},l]},Lz=x.mark(function(h,l){var g,f,k,q,_s;return x.wrap(function(_a){for(;;)switch(_a.prev=_a.next){case 0:g=Im(h)(qu()),f=g[1],k=g[2],q=0;case 4:if(!(q<l.length)){_a.next=15;break}if(!((_s=k([],l[q]))instanceof Lg)){_a.next=10;break}return _a.delegateYield(Ai(f(_s.deref())),"t0",9);case 9:return _a.abrupt("return");case 10:if(!_s.length){_a.next=12;break}return _a.delegateYield(_s,"t1",12);case 12:q++,_a.next=4;break;case 15:return _a.delegateYield(Ai(f([])),"t2",16);case 16:case"end":return _a.stop()}},Lz)}),su=x.mark(Hm),tu=function(h,l){return[h[0],h[1],l]},Wq=!0;"findIndex"in[]&&Array(1).findIndex(function(){Wq=!1}),M({target:"Array",proto:!0,forced:Wq},{findIndex:function(h){return Mo(this,h,1<arguments.length?arguments[1]:void 0)}}),Vd("findIndex"),M({target:"Array",proto:!0},{fill:ik}),Vd("fill");var Mz=function(){function h(l){X(this,h),this._length=0,l&&this.into(l)}return Ia(h,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new h(this)}},{key:"empty",value:function(){return new h}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var l,g=this.head;g;)l=g.next,delete g.value,delete g.prev,delete g.next,g=l;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(l){var g=this._length;if(g<l._length)return-1;if(g>l._length)return 1;if(0===g)return 0;g=this.head,l=l.head;for(var f=0;g&&0==f;)f=Vk(g.value,l.value),g=g.next,l=l.next;return f}},{key:"equiv",value:function(l){if(!(l instanceof h||null!=l&&"function"!=typeof l&&void 0!==l.length)||this._length!==l.length)return!1;if(!this._length||this===l)return!0;for(var g=this.head,f=0;f<l.length;f++){if(!pg(g.value,l[f]))return!1;g=g.next}return!0}},{key:Symbol.iterator,value:x.mark(function l(){var g;return x.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:g=this.head;case 1:if(!g){f.next=7;break}return f.next=4,g.value;case 4:g=g.next,f.next=1;break;case 7:case"end":return f.stop()}},l,this)})},{key:"seq",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(l>=g||0>l)){l=this.nthCell(l);var f=this.nthCell(g-1);return g=function k(q){return{first:function(){return q.value},next:function(){return q!==f&&q.next?k(q.next):void 0}}},l?g(l):void 0}}},{key:"cycle",value:x.mark(function l(){return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.delegateYield(this,"t0",2);case 2:g.next=0;break;case 4:case"end":return g.stop()}},l,this)})},{key:"$reduce",value:function(l,g){for(var f=this.head;f&&!(g instanceof Lg);)g=l(g,f.value),f=f.next;return g}},{key:"drop",value:function(){var l=this.head;if(l)return(this.head=l.next)?delete this.head.prev:delete this.tail,this._length--,l.value}},{key:"cons",value:function(l){return l={value:l,next:this.head},this.head?this.head.prev=l:this.tail=l,this.head=l,this._length++,this}},{key:"insertBefore",value:function(l,g){return l||Uh("cell is undefined"),g={value:g,next:l,prev:l.prev},l.prev?l.prev.next=g:this.head=g,l.prev=g,this._length++,this}},{key:"insertAfter",value:function(l,g){return l||Uh("cell is undefined"),g={value:g,next:l.next,prev:l},l.next?l.next.prev=g:this.tail=g,l.next=g,this._length++,this}},{key:"insertBeforeNth",value:function(l,g){if(0>l&&(l+=this._length),0>=l)return this.cons(g);if(0>l||l>=this._length)throw new Xk(l);return this.insertBefore(this.nthCellUnsafe(l),g)}},{key:"insertAfterNth",value:function(l,g){if(0>l&&(l+=this._length),l>=this._length-1)return this.push(g);if(0>l||l>=this._length)throw new Xk(l);return this.insertAfter(this.nthCellUnsafe(l),g)}},{key:"insertSorted",value:function(l,g){g=g||Vk;for(var f=this.head;f;){if(0>=g(l,f.value))return this.insertBefore(f,l);f=f.next}return this.push(l)}},{key:"find",value:function(l){for(var g=this.head;g;){if(g.value===l)return g;g=g.next}}},{key:"findWith",value:function(l){for(var g=this.head;g;){if(l(g.value))return g;g=g.next}}},{key:"concat",value:function(){for(var l=this.copy(),g=arguments.length,f=Array(g),k=0;k<g;k++)f[k]=arguments[k];for(g=0;g<f.length;g++)l.into(f[g]);return l}},{key:"into",value:function(l){for(var g=0;g<l.length;g++)this.push(l[g])}},{key:"slice",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;g=0>g?g+this._length:g,(0>(l=0>l?l+this._length:l)||0>g)&&Uh("invalid indices: ${from} / ${to}");for(var f=new h,k=this.nthCell(l);k&&++l<=g;)f.push(k.value),k=k.next;return f}},{key:"splice",value:function(l){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length?arguments[2]:void 0;if("number"==typeof l){if(0>l&&(l+=this._length),0>l||l>=this._length)throw new Xk(l);var k=this.nthCellUnsafe(l)}else k=l;var q=new h;if(0<g)for(;k&&0<g--;)this.remove(k),q.push(k.value),k=k.next;else k&&(k=k.next);if(f)if(k)for(g=0;g<f.length;g++)this.insertBefore(k,f[g]);else for(k=0;k<f.length;k++)this.push(f[k]);return q}},{key:"remove",value:function(l){return l.prev?l.prev.next=l.next:this.head=l.next,l.next?l.next.prev=l.prev:this.tail=l.prev,this._length--,this}},{key:"swap",value:function(l,g){if(l!==g){var f=l.value;l.value=g.value,g.value=f}return this}},{key:"push",value:function(l){return this.tail?(this.tail=this.tail.next=l={value:l,prev:this.tail},this._length++,this):this.cons(l)}},{key:"pop",value:function(){var l=this.tail;if(l)return(this.tail=l.prev)?delete this.tail.next:delete this.head,this._length--,l.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(l){return this.head?(this.head.value=l,this):this.cons(l)}},{key:"setTail",value:function(l){return this.tail?(this.tail.value=l,this):this.push(l)}},{key:"setNth",value:function(l,g){var f=this.nthCell(l);return!f&&Uh("index out of bounds: ".concat(l)),f.value=g,this}},{key:"nth",value:function(l,g){return(l=this.nthCell(l))?l.value:g}},{key:"nthCell",value:function(l){if(0>l&&(l+=this._length),!(0>l||l>=this._length))return this.nthCellUnsafe(l)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var l=this.peek();return this.pop(),this.cons(l)}}},{key:"map",value:function(l){for(var g=new h,f=this.head;f;)g.push(l(f.value)),f=f.next;return g}},{key:"filter",value:function(l){for(var g=new h,f=this.head;f;)l(f.value)&&g.push(f.value),f=f.next;return g}},{key:"reduce",value:function(l,g){for(var f=this.head;f;)g=l(g,f.value),f=f.next;return g}},{key:"shuffle",value:function(l){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Gz;if(2>this._length)return this;for(l=null!=l?l:Math.ceil(1.5*Math.log2(this._length));0<l;l--)for(var f=this.head;f;){var k=f.next;.5>g.float()?this.asHead(f):this.asTail(f),f=k}return this}},{key:"sort",value:function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vk;if(!this._length)return this;for(var g=1;;){var f=this.head;this.tail=this.head=void 0;for(var k=0;f;){k++;for(var q=f,_r=0,_s=0;_s<g&&(_r++,q=q.next);_s++);for(_s=g;0<_r||0<_s&&q;){if(0===_r){var _a=q;q=q.next,_s--}else q&&0!==_s?0>=l(f.value,q.value)?(_a=f,f=f.next,_r--):(_a=q,q=q.next,_s--):(_a=f,f=f.next,_r--);this.tail?this.tail.next=_a:this.head=_a,_a.prev=this.tail,this.tail=_a}f=q}if(this.tail.next=void 0,1>=k)return this;g*=2}}},{key:"reverse",value:function(){for(var l=this.head,g=this.tail,f=(this._length>>>1)+(1&this._length);l&&g&&0<f;){var k=l.value;l.value=g.value,g.value=k,l=l.next,g=g.prev,f--}return this}},{key:"asHead",value:function(l){return l===this.head||(this.remove(l),this.head.prev=l,l.next=this.head,l.prev=void 0,this.head=l,this._length++),this}},{key:"asTail",value:function(l){return l===this.tail||(this.remove(l),this.tail.next=l,l.prev=this.tail,l.next=void 0,this.tail=l,this._length++),this}},{key:"toString",value:function(){for(var l=[],g=this.head;g;)l.push(String(g.value)),g=g.next;return l.join(", ")}},{key:"toJSON",value:function(){return G(this)}},{key:"nthCellUnsafe",value:function(l){if(l<=this._length>>1)var g=this.head,f="next";else g=this.tail,f="prev",l=this._length-l-1;for(;0<l--&&g;)g=g[f];return g}}]),h}(),Ac=function(){function h(l,g){X(this,h),g=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},g),this.map=g.map(),this.items=new Mz,this._size=0,this.opts=g,l&&this.into(l)}return Ia(h,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return Mg(function(l){return[l.k,l]},this.items)}},{key:"keys",value:function(){return Mg(function(l){return l.k},this.items)}},{key:"values",value:function(){return Mg(function(l){return l.v},this.items)}},{key:"copy",value:function(){var l=this.empty();l.items=this.items.copy();for(var g=l.items.head;g;)l.map.set(g.value.k,g),g=g.next;return l}},{key:"empty",value:function(){return new h(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var l=this.opts.release;if(l){for(var g;g=this.items.drop();)l(g.k,g.v);return!0}return this.items.release()}},{key:"has",value:function(l){return this.map.has(l)}},{key:"get",value:function(l,g){return(l=this.map.get(l))?this.resetEntry(l):g}},{key:"set",value:function(l,g){var f=this.opts.ksize(l)+this.opts.vsize(g),k=this.map.get(l);return this._size+=Math.max(0,f-(k?k.value.s:0)),this.ensureSize()&&this.doSetEntry(k,l,g,f),g}},{key:"into",value:function(l){for(var g=0;g<l.length;g++){var f=l[g];this.set(f[0],f[1])}return this}},{key:"getSet",value:function(l,g){var f=this,k=this.map.get(l);return k?Promise.resolve(this.resetEntry(k)):g().then(function(q){return f.set(l,q)})}},{key:"delete",value:function(l){return!!(l=this.map.get(l))&&(this.removeEntry(l),!0)}},{key:"resetEntry",value:function(l){return this.items.asTail(l),l.value.v}},{key:"ensureSize",value:function(){for(var l=this.opts.release,g=this.opts.maxsize,f=this.opts.maxlen;this._size>g||this.length>=f;){var k=this.items.drop();if(!k)return!1;this.map.delete(k.k),l&&l(k.k,k.v),this._size-=k.s}return!0}},{key:"removeEntry",value:function(l){var g=l.value;this.map.delete(g.k),this.items.remove(l),this.opts.release&&this.opts.release(g.k,g.v),this._size-=g.s}},{key:"doSetEntry",value:function(l,g,f,k){l?(l.value.v=f,l.value.s=k,this.items.asTail(l)):(this.items.push({k:g,v:f,s:k}),this.map.set(g,this.items.tail))}}]),h}(),Nz=function(h){function l(f,k){return X(this,l),k=Object.assign({ttl:36e5},k),g.call(this,f,k)}ja(l,h);var g=ka(l);return Ia(l,[{key:"empty",value:function(){return new l(null,this.opts)}},{key:"has",value:function(f){return void 0!==this.get(f)}},{key:"get",value:function(f,k){if(f=this.map.get(f)){if(f.value.t>=Date.now())return this.resetEntry(f);this.removeEntry(f)}return k}},{key:"set",value:function(f,k){var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,_r=this.opts.ksize(f)+this.opts.vsize(k),_s=this.map.get(f);return this._size+=Math.max(0,_r-(_s?_s.value.s:0)),this.ensureSize()&&(q=Date.now()+q,_s?(_s.value.v=k,_s.value.s=_r,_s.value.t=q,this.items.asTail(_s)):(this.items.push({k:f,v:k,s:_r,t:q}),this.map.set(f,this.items.tail))),k}},{key:"getSet",value:function(f,k){var q=this,_r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,_s=this.get(f);return _s?Promise.resolve(_s):k().then(function(_a){return q.set(f,_a,_r)})}},{key:"prune",value:function(){for(var f=Date.now(),k=this.items.head;k;)k.value.t<f&&this.removeEntry(k),k=k.next}},{key:"ensureSize",value:function(){for(var f=this.opts.maxsize,k=this.opts.maxlen,q=Date.now(),_r=this.items.head;_r&&(this._size>f||this.length>=k);)_r.value.t<q&&this.removeEntry(_r),_r=_r.next;return xi(Fd(l.prototype),"ensureSize",this).call(this)}}]),l}(Ac),Xq="object"==V(Ka)&&Ka&&Ka.Object===Object&&Ka,Oz="object"==("undefined"==typeof self?"undefined":V(self))&&self&&self.Object===Object&&self,Fb=Xq||Oz||Function("return this")(),Ub=Fb.Symbol,Yq=Object.prototype,Pz=Yq.hasOwnProperty,Qz=Yq.toString,qg=Ub?Ub.toStringTag:void 0,Rz=Object.prototype.toString,Zq=Ub?Ub.toStringTag:void 0,$d=function(h){if(null==h)h=void 0===h?"[object Undefined]":"[object Null]";else if(Zq&&Zq in Object(h)){var l=Pz.call(h,qg),g=h[qg];try{h[qg]=void 0;var f=!0}catch(q){}var k=Qz.call(h);f&&(l?h[qg]=g:delete h[qg]),h=k}else h=Rz.call(h);return h},ob=function(h){var l=V(h);return null!=h&&("object"==l||"function"==l)},Wi=function(h){return!!ob(h)&&("[object Function]"==(h=$d(h))||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h)},$k=Fb["__core-js_shared__"],$q=function(){var h=/[^.]+$/.exec($k&&$k.keys&&$k.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Sz=Function.prototype.toString,ae=function(h){if(null!=h){try{return Sz.call(h)}catch(l){}return h+""}return""},Tz=/^\[object .+?Constructor\]$/,Uz=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=function(h,l){return!ob(h=null==h?void 0:h[l])||$q&&$q in h||!(Wi(h)?Uz:Tz).test(ae(h))?void 0:h},rg=be(Object,"create"),Vz=Object.prototype.hasOwnProperty,Wz=Object.prototype.hasOwnProperty;Id.prototype.clear=function(){this.__data__=rg?rg(null):{},this.size=0},Id.prototype.delete=function(h){return h=this.has(h)&&delete this.__data__[h],this.size-=h?1:0,h},Id.prototype.get=function(h){var l=this.__data__;return rg?"__lodash_hash_undefined__"===(h=l[h])?void 0:h:Vz.call(l,h)?l[h]:void 0},Id.prototype.has=function(h){var l=this.__data__;return rg?void 0!==l[h]:Wz.call(l,h)},Id.prototype.set=function(h,l){var g=this.__data__;return this.size+=this.has(h)?0:1,g[h]=rg&&void 0===l?"__lodash_hash_undefined__":l,this};var sg=function(h,l){return h===l||h!=h&&l!=l},Vh=function(h,l){for(var g=h.length;g--;)if(sg(h[g][0],l))return g;return-1},Xz=Array.prototype.splice;qe.prototype.clear=function(){this.__data__=[],this.size=0},qe.prototype.delete=function(h){var l=this.__data__;return!(0>(h=Vh(l,h))||(h==l.length-1?l.pop():Xz.call(l,h,1),--this.size,0))},qe.prototype.get=function(h){var l=this.__data__;return 0>(h=Vh(l,h))?void 0:l[h][1]},qe.prototype.has=function(h){return-1<Vh(this.__data__,h)},qe.prototype.set=function(h,l){var g=this.__data__,f=Vh(g,h);return 0>f?(++this.size,g.push([h,l])):g[f][1]=l,this};var Og=qe,tg=be(Fb,"Map"),Wh=function(h,l){h=h.__data__;var g=V(l);return("string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==l:null===l)?h["string"==typeof l?"string":"hash"]:h.map};re.prototype.clear=function(){this.size=0,this.__data__={hash:new Id,map:new(tg||Og),string:new Id}},re.prototype.delete=function(h){return h=Wh(this,h).delete(h),this.size-=h?1:0,h},re.prototype.get=function(h){return Wh(this,h).get(h)},re.prototype.has=function(h){return Wh(this,h).has(h)},re.prototype.set=function(h,l){var g=Wh(this,h),f=g.size;return g.set(h,l),this.size+=g.size==f?0:1,this};var Ng=re;zf.prototype.add=zf.prototype.push=function(h){return this.__data__.set(h,"__lodash_hash_undefined__"),this},zf.prototype.has=function(h){return this.__data__.has(h)};var ar=function(h,l,g,f){var k=h.length;for(g+=f?1:-1;f?g--:++g<k;)if(l(h[g],g,h))return g;return-1},Yz=function(h){return h!=h},Zz=function(h,l){var g;if(g=!(null==h||!h.length)){if(l==l)e:{g=-1;for(var f=h.length;++g<f;)if(h[g]===l){h=g;break e}h=-1}else h=ar(h,Yz,0);g=-1<h}return g},$z=function(h,l,g){for(var f=-1,k=null==h?0:h.length;++f<k;)if(g(l,h[f]))return!0;return!1},aA=function(h,l){return h.has(l)},gf=be(Fb,"Set"),bA=function(){},al=function(h){var l=-1,g=Array(h.size);return h.forEach(function(f){g[++l]=f}),g},cA=1/0,dA=gf&&1/al(new gf([,-0]))[1]==cA?function(h){return new gf(h)}:bA,bl=function(h,l,g){var f=-1,k=Zz,q=h.length,_r=!0,_s=[],_a=_s;if(g)_r=!1,k=$z;else if(200<=q){if(k=l?null:dA(h))return al(k);_r=!1,k=aA,_a=new zf}else _a=l?[]:_s;e:for(;++f<q;){var _l=h[f],bh=l?l(_l):_l;if(_l=g||0!==_l?_l:0,_r&&bh==bh){for(var n_=_a.length;n_--;)if(_a[n_]===bh)continue e;l&&_a.push(bh),_s.push(_l)}else k(_a,bh,g)||(_a!==_s&&_a.push(bh),_s.push(_l))}return _s},br=function(h){for(var l=-1,g=null==h?0:h.length,f={};++l<g;){var k=h[l];f[k[0]]=k[1]}return f},ve=function(h,l){for(var g=-1,f=null==h?0:h.length,k=Array(f);++g<f;)k[g]=l(h[g],g,h);return k};se.prototype.clear=function(){this.__data__=new Og,this.size=0},se.prototype.delete=function(h){var l=this.__data__;return h=l.delete(h),this.size=l.size,h},se.prototype.get=function(h){return this.__data__.get(h)},se.prototype.has=function(h){return this.__data__.has(h)},se.prototype.set=function(h,l){var g=this.__data__;if(g instanceof Og){var f=g.__data__;if(!tg||199>f.length)return f.push([h,l]),this.size=++g.size,this;g=this.__data__=new Ng(f)}return g.set(h,l),this.size=g.size,this};var ue=se,Cu=function(h,l){for(var g=-1,f=null==h?0:h.length;++g<f&&!1!==l(h[g],g,h););return h},Xh=function(){try{var h=be(Object,"defineProperty");return h({},"",{}),h}catch(l){}}(),ug=function(h,l,g){"__proto__"==l&&Xh?Xh(h,l,{configurable:!0,enumerable:!0,value:g,writable:!0}):h[l]=g},eA=Object.prototype.hasOwnProperty,Om=function(h,l,g){var f=h[l];eA.call(h,l)&&sg(f,g)&&(void 0!==g||l in h)||ug(h,l,g)},Fe=function(h,l,g,f){var k=!g;g||(g={});for(var q=-1,_r=l.length;++q<_r;){var _s=l[q],_a=f?f(g[_s],h[_s],_s,g,h):void 0;void 0===_a&&(_a=h[_s]),k?ug(g,_s,_a):Om(g,_s,_a)}return g},oc=function(h){return null!=h&&"object"==V(h)},cr=function(h){return oc(h)&&"[object Arguments]"==$d(h)},dr=Object.prototype,fA=dr.hasOwnProperty,gA=dr.propertyIsEnumerable,Jf=cr(function(){return arguments}())?cr:function(h){return oc(h)&&fA.call(h,"callee")&&!gA.call(h,"callee")},Za=Array.isArray,hA=function(){return!1},Bf=cb(function(h,l){var g=(l=l&&!l.nodeType&&l)&&h&&!h.nodeType&&h;h.exports=((l=g&&g.exports===l?Fb.Buffer:void 0)?l.isBuffer:void 0)||hA}),iA=/^(?:0|[1-9]\d*)$/,cl=function(h,l){var g=V(h);return!!(l=null==l?9007199254740991:l)&&("number"==g||"symbol"!=g&&iA.test(h))&&-1<h&&h%1==0&&h<l},dl=function(h){return"number"==typeof h&&-1<h&&h%1==0&&9007199254740991>=h},Ga={};Ga["[object Float32Array]"]=Ga["[object Float64Array]"]=Ga["[object Int8Array]"]=Ga["[object Int16Array]"]=Ga["[object Int32Array]"]=Ga["[object Uint8Array]"]=Ga["[object Uint8ClampedArray]"]=Ga["[object Uint16Array]"]=Ga["[object Uint32Array]"]=!0,Ga["[object Arguments]"]=Ga["[object Array]"]=Ga["[object ArrayBuffer]"]=Ga["[object Boolean]"]=Ga["[object DataView]"]=Ga["[object Date]"]=Ga["[object Error]"]=Ga["[object Function]"]=Ga["[object Map]"]=Ga["[object Number]"]=Ga["[object Object]"]=Ga["[object RegExp]"]=Ga["[object Set]"]=Ga["[object String]"]=Ga["[object WeakMap]"]=!1;var jA=function(h){return oc(h)&&dl(h.length)&&!!Ga[$d(h)]},Yh=function(h){return function(l){return h(l)}},hf=cb(function(h,l){var g=l&&!l.nodeType&&l;g=(l=g&&h&&!h.nodeType&&h)&&l.exports===g&&Xq.process;e:{try{var f=l&&l.require&&l.require("util").types;if(f){var k=f;break e}k=g&&g.binding&&g.binding("util");break e}catch(q){}k=void 0}h.exports=k}),er=hf&&hf.isTypedArray,Gi=er?Yh(er):jA,kA=Object.prototype.hasOwnProperty,fr=function(h,l){var g=Za(h),f=!g&&Jf(h),k=!g&&!f&&Bf(h),q=!g&&!f&&!k&&Gi(h);if(g=g||f||k||q){f=h.length;for(var _r=String,_s=-1,_a=Array(f);++_s<f;)_a[_s]=_r(_s);f=_a}else f=[];for(var _l in _r=f.length,h)!l&&!kA.call(h,_l)||g&&("length"==_l||k&&("offset"==_l||"parent"==_l)||q&&("buffer"==_l||"byteLength"==_l||"byteOffset"==_l)||cl(_l,_r))||f.push(_l);return f},lA=Object.prototype,el=function(h){var l=h&&h.constructor;return h===("function"==typeof l&&l.prototype||lA)},gr=function(h,l){return function(g){return h(l(g))}},mA=gr(Object.keys,Object),nA=Object.prototype.hasOwnProperty,Nd=function(h){return null!=h&&dl(h.length)&&!Wi(h)},Jd=function(h){if(Nd(h))h=fr(h);else if(el(h)){var l,g=[];for(l in Object(h))nA.call(h,l)&&"constructor"!=l&&g.push(l);h=g}else h=mA(h);return h},yu=function(h,l){return h&&Fe(l,Jd(l),h)},oA=Object.prototype.hasOwnProperty,Cf=function(h){if(Nd(h))h=fr(h,!0);else if(ob(h)){var l=el(h),g=[];for(f in h)("constructor"!=f||!l&&oA.call(h,f))&&g.push(f);h=g}else{var f=[];if(null!=h)for(l in Object(h))f.push(l);h=f}return h},wu=function(h,l){return h&&Fe(l,Cf(l),h)},Lm=cb(function(h,l){var g=(l=l&&!l.nodeType&&l)&&h&&!h.nodeType&&h,f=(l=g&&g.exports===l?Fb.Buffer:void 0)?l.allocUnsafe:void 0;h.exports=function(k,q){return q?k.slice():(q=k.length,q=f?f(q):new k.constructor(q),k.copy(q),q)}}),Bi=function(h,l){var g=-1,f=h.length;for(l||(l=Array(f));++g<f;)l[g]=h[g];return l},pA=function(h,l){for(var g=-1,f=null==h?0:h.length,k=0,q=[];++g<f;){var _r=h[g];l(_r,g,h)&&(q[k++]=_r)}return q},hr=function(){return[]},qA=Object.prototype.propertyIsEnumerable,ir=Object.getOwnPropertySymbols,fl=ir?function(h){return null==h?[]:(h=Object(h),pA(ir(h),function(l){return qA.call(h,l)}))}:hr,xu=function(h,l){return Fe(h,fl(h),l)},Fi=function(h,l){for(var g=-1,f=l.length,k=h.length;++g<f;)h[k+g]=l[g];return h},gl=gr(Object.getPrototypeOf,Object),jr=Object.getOwnPropertySymbols?function(h){for(var l=[];h;)Fi(l,fl(h)),h=gl(h);return l}:hr,vu=function(h,l){return Fe(h,jr(h),l)},kr=function(h,l,g){return l=l(h),Za(h)?l:Fi(l,g(h))},Ci=function(h){return kr(h,Jd,fl)},Nm=function(h){return kr(h,Cf,jr)},hl=be(Fb,"DataView"),il=be(Fb,"Promise"),jl=be(Fb,"WeakMap"),rA=ae(hl),sA=ae(tg),tA=ae(il),uA=ae(gf),vA=ae(jl),ce=$d;(hl&&"[object DataView]"!=ce(new hl(new ArrayBuffer(1)))||tg&&"[object Map]"!=ce(new tg)||il&&"[object Promise]"!=ce(il.resolve())||gf&&"[object Set]"!=ce(new gf)||jl&&"[object WeakMap]"!=ce(new jl))&&(ce=function(h){var l=$d(h);if(h=(h="[object Object]"==l?h.constructor:void 0)?ae(h):"")switch(h){case rA:return"[object DataView]";case sA:return"[object Map]";case tA:return"[object Promise]";case uA:return"[object Set]";case vA:return"[object WeakMap]"}return l});var Af=ce,wA=Object.prototype.hasOwnProperty,uu=function(h){var l=h.length,g=new h.constructor(l);return l&&"string"==typeof h[0]&&wA.call(h,"index")&&(g.index=h.index,g.input=h.input),g},Zh=Fb.Uint8Array,kl=function(h){var l=new h.constructor(h.byteLength);return new Zh(l).set(new Zh(h)),l},xA=/\w*$/,lr=Ub?Ub.prototype:void 0,mr=lr?lr.valueOf:void 0,An=function(h,l){return l=l?kl(h.buffer):h.buffer,new h.constructor(l,h.byteOffset,h.length)},zu=function(h,l,g){var f=h.constructor;switch(l){case"[object ArrayBuffer]":return kl(h);case"[object Boolean]":case"[object Date]":return new f(+h);case"[object DataView]":return l=g?kl(h.buffer):h.buffer,new h.constructor(l,h.byteOffset,h.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return An(h,g);case"[object Map]":case"[object Set]":return new f;case"[object Number]":case"[object String]":return new f(h);case"[object RegExp]":return(l=new h.constructor(h.source,xA.exec(h))).lastIndex=h.lastIndex,l;case"[object Symbol]":return mr?Object(mr.call(h)):{}}},nr=Object.create,yA=function(){function h(){}return function(l){return ob(l)?nr?nr(l):(h.prototype=l,l=new h,h.prototype=void 0,l):{}}}(),Mm=function(h){return"function"!=typeof h.constructor||el(h)?{}:yA(gl(h))},zA=function(h){return oc(h)&&"[object Map]"==Af(h)},or=hf&&hf.isMap,Bu=or?Yh(or):zA,AA=function(h){return oc(h)&&"[object Set]"==Af(h)},pr=hf&&hf.isSet,Au=pr?Yh(pr):AA,xa={};xa["[object Arguments]"]=xa["[object Array]"]=xa["[object ArrayBuffer]"]=xa["[object DataView]"]=xa["[object Boolean]"]=xa["[object Date]"]=xa["[object Float32Array]"]=xa["[object Float64Array]"]=xa["[object Int8Array]"]=xa["[object Int16Array]"]=xa["[object Int32Array]"]=xa["[object Map]"]=xa["[object Number]"]=xa["[object Object]"]=xa["[object RegExp]"]=xa["[object Set]"]=xa["[object String]"]=xa["[object Symbol]"]=xa["[object Uint8Array]"]=xa["[object Uint8ClampedArray]"]=xa["[object Uint16Array]"]=xa["[object Uint32Array]"]=!0,xa["[object Error]"]=xa["[object Function]"]=xa["[object WeakMap]"]=!1;var we=function(h){return"symbol"==V(h)||oc(h)&&"[object Symbol]"==$d(h)},BA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CA=/^\w*$/,ll=function(h,l){if(Za(h))return!1;var g=V(h);return!("number"!=g&&"symbol"!=g&&"boolean"!=g&&null!=h&&!we(h))||CA.test(h)||!BA.test(h)||null!=l&&h in Object(l)};Di.Cache=Ng;var DA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EA=/\\(\\)?/g,FA=function(h){var l=(h=Di(h,function(g){return 500===l.size&&l.clear(),g})).cache;return h}(function(h){var l=[];return 46===h.charCodeAt(0)&&l.push(""),h.replace(DA,function(g,f,k,q){l.push(k?q.replace(EA,"$1"):f||g)}),l}),Du=1/0,qr=Ub?Ub.prototype:void 0,Qm=qr?qr.toString:void 0,$h=function(h,l){return Za(h)?h:ll(h,l)?[h]:FA(null==h?"":Pm(h))},GA=1/0,vg=function(h){if("string"==typeof h||we(h))return h;var l=h+"";return"0"==l&&1/h==-GA?"-0":l},ai=function(h,l){for(var g=0,f=(l=$h(l,h)).length;null!=h&&g<f;)h=h[vg(l[g++])];return g&&g==f?h:void 0},HA=function(h,l){if(!(2>(l=$h(l,h)).length)){var g=l,f=0,k=-1,q=-1,_r=g.length;for(0>f&&(f=-f>_r?0:_r+f),0>(k=k>_r?_r:k)&&(k+=_r),_r=f>k?0:k-f>>>0,f>>>=0,k=Array(_r);++q<_r;)k[q]=g[q+f];h=ai(h,k)}return(g=null==h)||(g=delete h[vg((g=null==l?0:l.length)?l[g-1]:void 0)]),g},rr=Function.prototype.toString,IA=Object.prototype.hasOwnProperty,JA=rr.call(Object),Bn=function(h){return!(!oc(h)||"[object Object]"!=$d(h))&&(null===(h=gl(h))||"function"==typeof(h=IA.call(h,"constructor")&&h.constructor)&&h instanceof h&&rr.call(h)==JA)},KA=function(h){return Bn(h)?void 0:h},sr=Ub?Ub.isConcatSpreadable:void 0,Eu=function(h){return Za(h)||Jf(h)||!!(sr&&h&&h[sr])},LA=function(h){return null!=h&&h.length?Ei(h,1):[]},MA=function(h,l,g){switch(g.length){case 0:return h.call(l);case 1:return h.call(l,g[0]);case 2:return h.call(l,g[0],g[1]);case 3:return h.call(l,g[0],g[1],g[2])}return h.apply(l,g)},tr=Math.max,ur=function(h,l,g){return l=tr(void 0===l?h.length-1:l,0),function(){for(var f=arguments,k=-1,q=tr(f.length-l,0),_r=Array(q);++k<q;)_r[k]=f[l+k];for(k=-1,q=Array(l+1);++k<l;)q[k]=f[k];return q[l]=g(_r),MA(h,this,q)}},NA=function(h){return function(){return h}},bi=function(h){return h},OA=Date.now,vr=function(h){var l=0,g=0;return function(){var f=OA(),k=16-(f-g);if(g=f,0<k){if(800<=++l)return arguments[0]}else l=0;return h.apply(void 0,arguments)}}(Xh?function(h,l){return Xh(h,"toString",{configurable:!0,enumerable:!1,value:NA(l),writable:!0})}:bi),ml=function(h){return vr(ur(h,void 0,LA),h+"")}(function(h,l){var g={};if(null==h)return g;var f=!1;l=ve(l,function(q){return q=$h(q,h),f||(f=1<q.length),q}),Fe(h,Nm(h),g),f&&(g=te(g,7,KA));for(var k=l.length;k--;)HA(g,l[k]);return g}),PA=function(h,l,g,f){for(var k=-1,q=null==h?0:h.length;++k<q;){var _r=h[k];l(f,_r,g(_r),h)}return f},zn=function(h,l,g){for(var f=-1,k=Object(h),q=(g=g(h)).length;q--;){var _r=g[++f];if(!1===l(k[_r],_r,k))break}return h},wr=function(h,l){return h&&zn(h,l,Jd)},nl=function(h,l){return function(g,f){if(null==g)return g;if(!Nd(g))return h(g,f);for(var k=g.length,q=-1,_r=Object(g);++q<k&&!1!==f(_r[q],q,_r););return g}}(wr),QA=function(h,l,g,f){return nl(h,function(k,q,_r){l(f,k,g(k),_r)}),f},xr=function(h,l){for(var g=-1,f=null==h?0:h.length;++g<f;)if(l(h[g],g,h))return!0;return!1},Rm=function(h,l,g,f,k,q){var _r=1&g,_s=h.length,_a=l.length;if(_s!=_a&&!(_r&&_a>_s))return!1;_a=q.get(h);var _l=q.get(l);if(_a&&_l)return _a==l&&_l==h;_a=-1,_l=!0;var bh=2&g?new zf:void 0;for(q.set(h,l),q.set(l,h);++_a<_s;){var n_=h[_a],_A=l[_a];if(f)var r_=_r?f(_A,n_,_a,l,h,q):f(n_,_A,_a,h,l,q);if(void 0!==r_){if(r_)continue;_l=!1;break}if(bh){if(!xr(l,function(p_,I_){if(!bh.has(I_)&&(n_===p_||k(n_,p_,g,f,q)))return bh.push(I_)})){_l=!1;break}}else if(n_!==_A&&!k(n_,_A,g,f,q)){_l=!1;break}}return q.delete(h),q.delete(l),_l},RA=function(h){var l=-1,g=Array(h.size);return h.forEach(function(f,k){g[++l]=[k,f]}),g},yr=Ub?Ub.prototype:void 0,ol=yr?yr.valueOf:void 0,Fu=function(h,l,g,f,k,q,_r){switch(g){case"[object DataView]":if(h.byteLength!=l.byteLength||h.byteOffset!=l.byteOffset)break;h=h.buffer,l=l.buffer;case"[object ArrayBuffer]":if(h.byteLength!=l.byteLength||!q(new Zh(h),new Zh(l)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return sg(+h,+l);case"[object Error]":return h.name==l.name&&h.message==l.message;case"[object RegExp]":case"[object String]":return h==l+"";case"[object Map]":var _s=RA;case"[object Set]":if(_s||(_s=al),h.size!=l.size&&!(1&f))break;return(g=_r.get(h))?g==l:(f|=2,_r.set(h,l),l=Rm(_s(h),_s(l),f,k,q,_r),_r.delete(h),l);case"[object Symbol]":if(ol)return ol.call(h)==ol.call(l)}return!1},Gu=Object.prototype.hasOwnProperty,Sm=Object.prototype.hasOwnProperty,SA=function(h,l,g,f){var k=g.length,q=k,_r=!f;if(null==h)return!q;for(h=Object(h);k--;){var _s=g[k];if(_r&&_s[2]?_s[1]!==h[_s[0]]:!(_s[0]in h))return!1}for(;++k<q;){var _a=(_s=g[k])[0],_l=h[_a],bh=_s[1];if(_r&&_s[2]){if(void 0===_l&&!(_a in h))return!1}else{if(_s=new ue,f)var n_=f(_l,bh,_a,h,l,_s);if(void 0===n_?!xe(bh,_l,3,f,_s):!n_)return!1}}return!0},TA=function(h){for(var l=Jd(h),g=l.length;g--;){var f=l[g],k=h[f];l[g]=[f,k,k==k&&!ob(k)]}return l},zr=function(h,l){return function(g){return null!=g&&g[h]===l&&(void 0!==l||h in Object(g))}},UA=function(h){var l=TA(h);return 1==l.length&&l[0][2]?zr(l[0][0],l[0][1]):function(g){return g===h||SA(g,h,l)}},VA=function(h,l){return ll(h)&&l==l&&!ob(l)?zr(vg(h),l):function(g){var f=null==g?void 0:ai(g,h);if(void 0===(f=void 0===f?void 0:f)&&f===l){if(f=null!=g){for(var k=-1,q=(f=$h(f=h,g)).length,_r=!1;++k<q;){var _s=vg(f[k]);if(!(_r=null!=g&&null!=g&&_s in Object(g)))break;g=g[_s]}f=_r||++k!=q?_r:!!(q=null==g?0:g.length)&&dl(q)&&cl(_s,q)&&(Za(g)||Jf(g))}_s=f}else _s=xe(l,f,3);return _s}},WA=function(h){return function(l){return null==l?void 0:l[h]}},XA=function(h){return function(l){return ai(l,h)}},jf=function(h){return"function"==typeof h?h:null==h?bi:"object"==V(h)?Za(h)?VA(h[0],h[1]):UA(h):ll(h)?WA(vg(h)):XA(h)},pl=function(h,l){return function(g,f){return(Za(g)?PA:QA)(g,h,jf(f),{})}}(function(h,l,g){ug(h,g,l)}),Bc=function(h,l){var g={};return l=jf(l),wr(h,function(f,k,q){ug(g,k,l(f,k,q))}),g};M({target:"String",proto:!0,forced:R(function(){var h="".sub('"');return h!==h.toLowerCase()||3<h.split('"').length})},{sub:function(){return"<sub>"+String(mb(this))+"</sub>"}});var U=ya,Vb=null;try{Vb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(h){}Object.defineProperty(ya.prototype,"__isLong__",{value:!0}),ya.isLong=pb;var Um={},Tm={};ya.fromInt=Kd,ya.fromNumber=Kb,ya.fromBits=za;var Pg=Math.pow;ya.fromString=Hi,ya.fromValue=bc;var ye=4294967296,Vm=ye*ye,Xm=Vm/2,Ar=Kd(16777216),Lb=Kd(0);ya.ZERO=Lb;var Ld=Kd(0,!0);ya.UZERO=Ld;var kf=Kd(1);ya.ONE=kf;var Br=Kd(1,!0);ya.UONE=Br;var ql=Kd(-1);ya.NEG_ONE=ql;var Ym=za(-1,2147483647,!1);ya.MAX_VALUE=Ym;var Wm=za(-1,-1,!0);ya.MAX_UNSIGNED_VALUE=Wm;var qb=za(0,-2147483648,!1);ya.MIN_VALUE=qb;var z=ya.prototype;z.toInt=function(){return this.unsigned?this.low>>>0:this.low},z.toNumber=function(){return this.unsigned?(this.high>>>0)*ye+(this.low>>>0):this.high*ye+(this.low>>>0)},z.toString=function(h){if(2>(h=h||10)||36<h)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(qb)){var l=Kb(h),g=this.div(l);return l=g.mul(l).sub(this),g.toString(h)+l.toInt().toString(h)}return"-"+this.neg().toString(h)}g=Kb(Pg(h,6),this.unsigned),l=this;for(var f="";;){var k=l.div(g),q=(l.sub(k.mul(g)).toInt()>>>0).toString(h);if((l=k).isZero())return q+f;for(;6>q.length;)q="0"+q;f=""+q+f}},z.getHighBits=function(){return this.high},z.getHighBitsUnsigned=function(){return this.high>>>0},z.getLowBits=function(){return this.low},z.getLowBitsUnsigned=function(){return this.low>>>0},z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qb)?64:this.neg().getNumBitsAbs();for(var h=0!=this.high?this.high:this.low,l=31;0<l&&0==(h&1<<l);l--);return 0!=this.high?l+33:l+1},z.isZero=function(){return 0===this.high&&0===this.low},z.eqz=z.isZero,z.isNegative=function(){return!this.unsigned&&0>this.high},z.isPositive=function(){return this.unsigned||0<=this.high},z.isOdd=function(){return 1==(1&this.low)},z.isEven=function(){return 0==(1&this.low)},z.equals=function(h){return pb(h)||(h=bc(h)),(this.unsigned===h.unsigned||this.high>>>31!=1||h.high>>>31!=1)&&this.high===h.high&&this.low===h.low},z.eq=z.equals,z.notEquals=function(h){return!this.eq(h)},z.neq=z.notEquals,z.ne=z.notEquals,z.lessThan=function(h){return 0>this.comp(h)},z.lt=z.lessThan,z.lessThanOrEqual=function(h){return 0>=this.comp(h)},z.lte=z.lessThanOrEqual,z.le=z.lessThanOrEqual,z.greaterThan=function(h){return 0<this.comp(h)},z.gt=z.greaterThan,z.greaterThanOrEqual=function(h){return 0<=this.comp(h)},z.gte=z.greaterThanOrEqual,z.ge=z.greaterThanOrEqual,z.compare=function(h){if(pb(h)||(h=bc(h)),this.eq(h))return 0;var l=this.isNegative(),g=h.isNegative();return l&&!g?-1:!l&&g?1:this.unsigned?h.high>>>0>this.high>>>0||h.high===this.high&&h.low>>>0>this.low>>>0?-1:1:this.sub(h).isNegative()?-1:1},z.comp=z.compare,z.negate=function(){return!this.unsigned&&this.eq(qb)?qb:this.not().add(kf)},z.neg=z.negate,z.add=function(h){pb(h)||(h=bc(h));var l=this.high>>>16,f=this.low>>>16,k=h.high>>>16,q=65535&h.high,_r=h.low>>>16;return f=(_r=((h=(65535&this.low)+(65535&h.low))>>>16)+(f+_r))>>>16,za((65535&_r)<<16|65535&h,(l=((f+=(65535&this.high)+q)>>>16)+(l+k)&65535)<<16|65535&f,this.unsigned)},z.subtract=function(h){return pb(h)||(h=bc(h)),this.add(h.neg())},z.sub=z.subtract,z.multiply=function(h){if(this.isZero())return Lb;if(pb(h)||(h=bc(h)),Vb){var l=Vb.mul(this.low,this.high,h.low,h.high);return za(l,Vb.get_high(),this.unsigned)}if(h.isZero())return Lb;if(this.eq(qb))return h.isOdd()?qb:Lb;if(h.eq(qb))return this.isOdd()?qb:Lb;if(this.isNegative())return h.isNegative()?this.neg().mul(h.neg()):this.neg().mul(h).neg();if(h.isNegative())return this.mul(h.neg()).neg();if(this.lt(Ar)&&h.lt(Ar))return Kb(this.toNumber()*h.toNumber(),this.unsigned);var g=65535&this.high,f=this.low>>>16,k=65535&this.low,q=h.high>>>16,_r=65535&h.high,_s=h.low>>>16,_a=k*(h=65535&h.low),_l=(_a>>>16)+f*h,bh=_l>>>16;bh+=(_l=(65535&_l)+k*_s)>>>16;var n_=(bh+=g*h)>>>16;return za((65535&_l)<<16|65535&_a,(n_=(n_+=(bh=(65535&bh)+f*_s)>>>16)+((bh=(65535&bh)+k*_r)>>>16)+((l=this.high>>>16)*h+g*_s+f*_r+k*q)&65535)<<16|65535&bh,this.unsigned)},z.mul=z.multiply,z.divide=function(h){if(pb(h)||(h=bc(h)),h.isZero())throw Error("division by zero");if(Vb)return this.unsigned||-2147483648!==this.high||-1!==h.low||-1!==h.high?za(h=(this.unsigned?Vb.div_u:Vb.div_s)(this.low,this.high,h.low,h.high),Vb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Ld:Lb;if(this.unsigned){if(h.unsigned||(h=h.toUnsigned()),h.gt(this))return Ld;if(h.gt(this.shru(1)))return Br;var l=Ld}else{if(this.eq(qb)){if(h.eq(kf)||h.eq(ql))return qb;if(h.eq(qb))return kf;var g=this.shr(1).div(h).shl(1);if(g.eq(Lb))return h.isNegative()?kf:ql;var f=this.sub(h.mul(g));return g.add(f.div(h))}if(h.eq(qb))return this.unsigned?Ld:Lb;if(this.isNegative())return h.isNegative()?this.neg().div(h.neg()):this.neg().div(h).neg();if(h.isNegative())return this.div(h.neg()).neg();l=Lb}for(f=this;f.gte(h);){g=Math.max(1,Math.floor(f.toNumber()/h.toNumber()));var k=Math.ceil(Math.log(g)/Math.LN2);k=48>=k?1:Pg(2,k-48);for(var q=Kb(g),_r=q.mul(h);_r.isNegative()||_r.gt(f);)_r=(q=Kb(g-=k,this.unsigned)).mul(h);q.isZero()&&(q=kf),l=l.add(q),f=f.sub(_r)}return l},z.div=z.divide,z.modulo=function(h){return pb(h)||(h=bc(h)),Vb?za(h=(this.unsigned?Vb.rem_u:Vb.rem_s)(this.low,this.high,h.low,h.high),Vb.get_high(),this.unsigned):this.sub(this.div(h).mul(h))},z.mod=z.modulo,z.rem=z.modulo,z.not=function(){return za(~this.low,~this.high,this.unsigned)},z.and=function(h){return pb(h)||(h=bc(h)),za(this.low&h.low,this.high&h.high,this.unsigned)},z.or=function(h){return pb(h)||(h=bc(h)),za(this.low|h.low,this.high|h.high,this.unsigned)},z.xor=function(h){return pb(h)||(h=bc(h)),za(this.low^h.low,this.high^h.high,this.unsigned)},z.shiftLeft=function(h){return pb(h)&&(h=h.toInt()),0==(h&=63)?this:32>h?za(this.low<<h,this.high<<h|this.low>>>32-h,this.unsigned):za(0,this.low<<h-32,this.unsigned)},z.shl=z.shiftLeft,z.shiftRight=function(h){return pb(h)&&(h=h.toInt()),0==(h&=63)?this:32>h?za(this.low>>>h|this.high<<32-h,this.high>>h,this.unsigned):za(this.high>>h-32,0<=this.high?0:-1,this.unsigned)},z.shr=z.shiftRight,z.shiftRightUnsigned=function(h){if(pb(h)&&(h=h.toInt()),0==(h&=63))return this;var l=this.high;return 32>h?za(this.low>>>h|l<<32-h,l>>>h,this.unsigned):za(32===h?l:l>>>h-32,0,this.unsigned)},z.shru=z.shiftRightUnsigned,z.shr_u=z.shiftRightUnsigned,z.toSigned=function(){return this.unsigned?za(this.low,this.high,!1):this},z.toUnsigned=function(){return this.unsigned?this:za(this.low,this.high,!0)},z.toBytes=function(h){return h?this.toBytesLE():this.toBytesBE()},z.toBytesLE=function(){var h=this.high,l=this.low;return[255&l,l>>>8&255,l>>>16&255,l>>>24,255&h,h>>>8&255,h>>>16&255,h>>>24]},z.toBytesBE=function(){var h=this.high,l=this.low;return[h>>>24,h>>>16&255,h>>>8&255,255&h,l>>>24,l>>>16&255,l>>>8&255,255&l]},ya.fromBytes=function(h,l,g){return g?ya.fromBytesLE(h,l):ya.fromBytesBE(h,l)},ya.fromBytesLE=function(h,l){return new ya(h[0]|h[1]<<8|h[2]<<16|h[3]<<24,h[4]|h[5]<<8|h[6]<<16|h[7]<<24,l)},ya.fromBytesBE=function(h,l){return new ya(h[4]<<24|h[5]<<16|h[6]<<8|h[7],h[0]<<24|h[1]<<16|h[2]<<8|h[3],l)};var Ii=function(h,l){return(Ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,f){g.__proto__=f}||function(g,f){for(var k in f)f.hasOwnProperty(k)&&(g[k]=f[k])})(h,l)},rl=!1,Mb={Promise:void 0,set useDeprecatedSynchronousErrorHandling(h){h?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):rl&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),rl=h},get useDeprecatedSynchronousErrorHandling(){return rl}},ci={closed:!0,next:function(h){},error:function(h){if(Mb.useDeprecatedSynchronousErrorHandling)throw h;Ae(h)},complete:function(){}},Nb=Array.isArray||function(h){return h&&"number"==typeof h.length},Df=function(){function h(l){return Error.call(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map(function(g,f){return f+1+") "+g.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l,this}return h.prototype=Object.create(Error.prototype),h}(),Ta=function(){function h(l){this.closed=!1,this._subscriptions=this._parentOrParents=null,l&&(this._ctorUnsubscribe=!0,this._unsubscribe=l)}return h.prototype.unsubscribe=function(){if(!this.closed){var l=this._parentOrParents,g=this._ctorUnsubscribe,f=this._unsubscribe,k=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,l instanceof h)l.remove(this);else if(null!==l)for(var q=0;q<l.length;++q)l[q].remove(this);if(ze(f)){g&&(this._unsubscribe=void 0);try{f.call(this)}catch(_s){var _r=_s instanceof Df?Zm(_s.errors):[_s]}}if(Nb(k))for(q=-1,l=k.length;++q<l;)if(Ji(g=k[q]))try{g.unsubscribe()}catch(_s){_r=_r||[],_s instanceof Df?_r=_r.concat(Zm(_s.errors)):_r.push(_s)}if(_r)throw new Df(_r)}},h.prototype.add=function(l){var g=l;if(!l)return h.EMPTY;switch(V(l)){case"function":g=new h(l);case"object":if(g===this||g.closed||"function"!=typeof g.unsubscribe)return g;if(this.closed)return g.unsubscribe(),g;g instanceof h||(l=g,(g=new h)._subscriptions=[l]);break;default:throw Error("unrecognized teardown "+l+" added to Subscription.")}if(null===(l=g._parentOrParents))g._parentOrParents=this;else if(l instanceof h){if(l===this)return g;g._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return g;l.push(this)}return null===(l=this._subscriptions)?this._subscriptions=[g]:l.push(g),g},h.prototype.remove=function(l){var g=this._subscriptions;g&&-1!==(l=g.indexOf(l))&&g.splice(l,1)},h.EMPTY=function(l){return l.closed=!0,l}(new h),h}(),di="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ma=function(h){function l(g,f,k){var q=h.call(this)||this;switch(q.syncErrorValue=null,q.syncErrorThrown=!1,q.syncErrorThrowable=!1,q.isStopped=!1,arguments.length){case 0:q.destination=ci;break;case 1:if(!g){q.destination=ci;break}if("object"===V(g)){g instanceof l?(q.syncErrorThrowable=g.syncErrorThrowable,q.destination=g,g.add(q)):(q.syncErrorThrowable=!0,q.destination=new Cr(q,g));break}default:q.syncErrorThrowable=!0,q.destination=new Cr(q,g,f,k)}return q}return O(l,h),l.prototype[di]=function(){return this},l.create=function(g,f,k){return(g=new l(g,f,k)).syncErrorThrowable=!1,g},l.prototype.next=function(g){this.isStopped||this._next(g)},l.prototype.error=function(g){this.isStopped||(this.isStopped=!0,this._error(g))},l.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,h.prototype.unsubscribe.call(this))},l.prototype._next=function(g){this.destination.next(g)},l.prototype._error=function(g){this.destination.error(g),this.unsubscribe()},l.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},l.prototype._unsubscribeAndRecycle=function(){var g=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=g,this},l}(Ta),Cr=function(h){function l(g,f,k,q){var _r=h.call(this)||this;if(_r._parentSubscriber=g,g=_r,ze(f))var _s=f;else f&&(_s=f.next,k=f.error,q=f.complete,f!==ci&&(ze((g=Object.create(f)).unsubscribe)&&_r.add(g.unsubscribe.bind(g)),g.unsubscribe=_r.unsubscribe.bind(_r)));return _r._context=g,_r._next=_s,_r._error=k,_r._complete=q,_r}return O(l,h),l.prototype.next=function(g){if(!this.isStopped&&this._next){var f=this._parentSubscriber;Mb.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable?this.__tryOrSetError(f,this._next,g)&&this.unsubscribe():this.__tryOrUnsub(this._next,g)}},l.prototype.error=function(g){if(!this.isStopped){var f=this._parentSubscriber,k=Mb.useDeprecatedSynchronousErrorHandling;if(this._error)k&&f.syncErrorThrowable?this.__tryOrSetError(f,this._error,g):this.__tryOrUnsub(this._error,g),this.unsubscribe();else if(f.syncErrorThrowable)k?(f.syncErrorValue=g,f.syncErrorThrown=!0):Ae(g),this.unsubscribe();else{if(this.unsubscribe(),k)throw g;Ae(g)}}},l.prototype.complete=function(){var g=this;if(!this.isStopped){var f=this._parentSubscriber;if(this._complete){var k=function(){return g._complete.call(g._context)};Mb.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable?this.__tryOrSetError(f,k):this.__tryOrUnsub(k)}this.unsubscribe()}},l.prototype.__tryOrUnsub=function(g,f){try{g.call(this._context,f)}catch(k){if(this.unsubscribe(),Mb.useDeprecatedSynchronousErrorHandling)throw k;Ae(k)}},l.prototype.__tryOrSetError=function(g,f,k){if(!Mb.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{f.call(this._context,k)}catch(q){return Mb.useDeprecatedSynchronousErrorHandling?(g.syncErrorValue=q,g.syncErrorThrown=!0):Ae(q),!0}return!1},l.prototype._unsubscribe=function(){var g=this._parentSubscriber;this._parentSubscriber=this._context=null,g.unsubscribe()},l}(ma),Be="function"==typeof Symbol&&Symbol.observable||"@@observable",Y=function(){function h(l){this._isScalar=!1,l&&(this._subscribe=l)}return h.prototype.lift=function(l){var g=new h;return g.source=this,g.operator=l,g},h.prototype.subscribe=function(l,g,f){var k=this.operator;e:{if(l){if(l instanceof ma)break e;if(l[di]){l=l[di]();break e}}l=l||g||f?new ma(l,g,f):new ma(ci)}if(l.add(k?k.call(l,this.source):this.source||Mb.useDeprecatedSynchronousErrorHandling&&!l.syncErrorThrowable?this._subscribe(l):this._trySubscribe(l)),Mb.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable&&(l.syncErrorThrowable=!1,l.syncErrorThrown))throw l.syncErrorValue;return l},h.prototype._trySubscribe=function(l){try{return this._subscribe(l)}catch(g){Mb.useDeprecatedSynchronousErrorHandling&&(l.syncErrorThrown=!0,l.syncErrorValue=g),Ki(l)?l.error(g):console.warn(g)}},h.prototype.forEach=function(l,g){var f=this;return new(g=an(g))(function(k,q){var _r=f.subscribe(function(_s){try{l(_s)}catch(_a){q(_a),_r&&_r.unsubscribe()}},q,k)})},h.prototype._subscribe=function(l){var g=this.source;return g&&g.subscribe(l)},h.prototype[Be]=function(){return this},h.prototype.pipe=function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return 0===l.length?this:$m(l)(this)},h.prototype.toPromise=function(l){var g=this;return new(l=an(l))(function(f,k){var q;g.subscribe(function(_r){return q=_r},function(_r){return k(_r)},function(){return f(q)})})},h.create=function(l){return new h(l)},h}(),xd=function(){function h(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return h.prototype=Object.create(Error.prototype),h}(),Dr=function(h){function l(g,f){var k=h.call(this)||this;return k.subject=g,k.subscriber=f,k.closed=!1,k}return O(l,h),l.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var g=this.subject,f=g.observers;this.subject=null,!f||0===f.length||g.isStopped||g.closed||-1!==(g=f.indexOf(this.subscriber))&&f.splice(g,1)}},l}(Ta),Er=function(h){function l(g){var f=h.call(this,g)||this;return f.destination=g,f}return O(l,h),l}(ma),Ua=function(h){function l(){var g=h.call(this)||this;return g.observers=[],g.closed=!1,g.isStopped=!1,g.hasError=!1,g.thrownError=null,g}return O(l,h),l.prototype[di]=function(){return new Er(this)},l.prototype.lift=function(g){var f=new Fr(this,this);return f.operator=g,f},l.prototype.next=function(g){if(this.closed)throw new xd;if(!this.isStopped){var f=this.observers,k=f.length;f=f.slice();for(var q=0;q<k;q++)f[q].next(g)}},l.prototype.error=function(g){if(this.closed)throw new xd;this.hasError=!0,this.thrownError=g,this.isStopped=!0;var f=this.observers,k=f.length;f=f.slice();for(var q=0;q<k;q++)f[q].error(g);this.observers.length=0},l.prototype.complete=function(){if(this.closed)throw new xd;this.isStopped=!0;var g=this.observers,f=g.length;g=g.slice();for(var k=0;k<f;k++)g[k].complete();this.observers.length=0},l.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},l.prototype._trySubscribe=function(g){if(this.closed)throw new xd;return h.prototype._trySubscribe.call(this,g)},l.prototype._subscribe=function(g){if(this.closed)throw new xd;return this.hasError?(g.error(this.thrownError),Ta.EMPTY):this.isStopped?(g.complete(),Ta.EMPTY):(this.observers.push(g),new Dr(this,g))},l.prototype.asObservable=function(){var g=new Y;return g.source=this,g},l.create=function(g,f){return new Fr(g,f)},l}(Y),Fr=function(h){function l(g,f){var k=h.call(this)||this;return k.destination=g,k.source=f,k}return O(l,h),l.prototype.next=function(g){var f=this.destination;f&&f.next&&f.next(g)},l.prototype.error=function(g){var f=this.destination;f&&f.error&&this.destination.error(g)},l.prototype.complete=function(){var g=this.destination;g&&g.complete&&this.destination.complete()},l.prototype._subscribe=function(g){return this.source?this.source.subscribe(g):Ta.EMPTY},l}(Ua),Hu=function(){function h(l){this.connectable=l}return h.prototype.call=function(l,g){var f=this.connectable;return f._refCount++,l=new YA(l,f),g=g.subscribe(l),l.closed||(l.connection=f.connect()),g},h}(),YA=function(h){function l(g,f){return(g=h.call(this,g)||this).connectable=f,g}return O(l,h),l.prototype._unsubscribe=function(){var g=this.connectable;if(g){this.connectable=null;var f=g._refCount;0>=f?this.connection=null:(g._refCount=f-1,1<f?this.connection=null:(f=this.connection,g=g._connection,this.connection=null,!g||f&&g!==f||g.unsubscribe()))}else this.connection=null},l}(ma),Gr=function(h){function l(g,f){var k=h.call(this)||this;return k.source=g,k.subjectFactory=f,k._refCount=0,k._isComplete=!1,k}return O(l,h),l.prototype._subscribe=function(g){return this.getSubject().subscribe(g)},l.prototype.getSubject=function(){var g=this._subject;return g&&!g.isStopped||(this._subject=this.subjectFactory()),this._subject},l.prototype.connect=function(){var g=this._connection;return g||(this._isComplete=!1,(g=this._connection=new Ta).add(this.source.subscribe(new ZA(this.getSubject(),this))),g.closed&&(this._connection=null,g=Ta.EMPTY)),g},l.prototype.refCount=function(){return bn()(this)},l}(Y),uv=function(){var h=Gr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}}}(),ZA=function(h){function l(g,f){return(g=h.call(this,g)||this).connectable=f,g}return O(l,h),l.prototype._error=function(g){this._unsubscribe(),h.prototype._error.call(this,g)},l.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),h.prototype._complete.call(this)},l.prototype._unsubscribe=function(){var g=this.connectable;if(g){this.connectable=null;var f=g._connection;g._refCount=0,g._subject=null,g._connection=null,f&&f.unsubscribe()}},l}(Er);(function(h){function l(g,f){return(g=h.call(this,g)||this).connectable=f,g}O(l,h),l.prototype._unsubscribe=function(){var g=this.connectable;if(g){this.connectable=null;var f=g._refCount;0>=f?this.connection=null:(g._refCount=f-1,1<f?this.connection=null:(f=this.connection,g=g._connection,this.connection=null,!g||f&&g!==f||g.unsubscribe()))}else this.connection=null}})(ma),function(h){function l(g,f,k,q,_r){return(g=h.call(this,g)||this).keySelector=f,g.elementSelector=k,g.durationSelector=q,g.subjectSelector=_r,g.groups=null,g.attemptedToUnsubscribe=!1,g.count=0,g}O(l,h),l.prototype._next=function(g){try{var f=this.keySelector(g)}catch(k){return void this.error(k)}this._group(g,f)},l.prototype._group=function(g,f){var k=this.groups;k||(k=this.groups=new Map);var q=k.get(f);if(this.elementSelector)try{var _r=this.elementSelector(g)}catch(_s){this.error(_s)}else _r=g;if(!q&&(q=this.subjectSelector?this.subjectSelector():new Ua,k.set(f,q),g=new sl(f,q,this),this.destination.next(g),this.durationSelector)){g=void 0;try{g=this.durationSelector(new sl(f,q))}catch(_s){return void this.error(_s)}this.add(g.subscribe(new $A(f,q,this)))}q.closed||q.next(_r)},l.prototype._error=function(g){var f=this.groups;f&&(f.forEach(function(k,q){k.error(g)}),f.clear()),this.destination.error(g)},l.prototype._complete=function(){var g=this.groups;g&&(g.forEach(function(f,k){f.complete()}),g.clear()),this.destination.complete()},l.prototype.removeGroup=function(g){this.groups.delete(g)},l.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&h.prototype.unsubscribe.call(this))}}(ma);var $A=function(h){function l(g,f,k){var q=h.call(this,f)||this;return q.key=g,q.group=f,q.parent=k,q}return O(l,h),l.prototype._next=function(g){this.complete()},l.prototype._unsubscribe=function(){var g=this.parent,f=this.key;this.key=this.parent=null,g&&g.removeGroup(f)},l}(ma),sl=function(h){function l(g,f,k){var q=h.call(this)||this;return q.key=g,q.groupSubject=f,q.refCountSubscription=k,q}return O(l,h),l.prototype._subscribe=function(g){var f=new Ta,k=this.refCountSubscription,q=this.groupSubject;return k&&!k.closed&&f.add(new aB(k)),f.add(q.subscribe(g)),f},l}(Y),aB=function(h){function l(g){var f=h.call(this)||this;return f.parent=g,g.count++,f}return O(l,h),l.prototype.unsubscribe=function(){var g=this.parent;g.closed||this.closed||(h.prototype.unsubscribe.call(this),--g.count,0===g.count&&g.attemptedToUnsubscribe&&g.unsubscribe())},l}(Ta),bB=function(h){function l(g){var f=h.call(this)||this;return f._value=g,f}return O(l,h),Object.defineProperty(l.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),l.prototype._subscribe=function(g){var f=h.prototype._subscribe.call(this,g);return f&&!f.closed&&g.next(this._value),f},l.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xd;return this._value},l.prototype.next=function(g){h.prototype.next.call(this,this._value=g)},l}(Ua),wg=function(h){function l(g,f){var k=h.call(this,g,f)||this;return k.scheduler=g,k.work=f,k.pending=!1,k}return O(l,h),l.prototype.schedule=function(g,f){if(void 0===f&&(f=0),this.closed)return this;this.state=g;var k=this.scheduler;return null!=(g=this.id)&&(this.id=this.recycleAsyncId(k,g,f)),this.pending=!0,this.delay=f,this.id=this.id||this.requestAsyncId(k,this.id,f),this},l.prototype.requestAsyncId=function(g,f,k){return void 0===k&&(k=0),setInterval(g.flush.bind(g,this),k)},l.prototype.recycleAsyncId=function(g,f,k){if(void 0===k&&(k=0),null!==k&&this.delay===k&&!1===this.pending)return f;clearInterval(f)},l.prototype.execute=function(g,f){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(g=this._execute(g,f))?g:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},l.prototype._execute=function(g,f){f=!1;var k=void 0;try{this.work(g)}catch(q){f=!0,k=!!q&&q||Error(q)}if(f)return this.unsubscribe(),k},l.prototype._unsubscribe=function(){var g=this.id,f=this.scheduler,k=f.actions,q=k.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==q&&k.splice(q,1),null!=g&&(this.id=this.recycleAsyncId(f,g,null)),this.delay=null},l}(function(h){function l(g,f){return h.call(this)||this}return O(l,h),l.prototype.schedule=function(g,f){return this},l}(Ta)),cB=function(h){function l(g,f){var k=h.call(this,g,f)||this;return k.scheduler=g,k.work=f,k}return O(l,h),l.prototype.schedule=function(g,f){return void 0===f&&(f=0),0<f?h.prototype.schedule.call(this,g,f):(this.delay=f,this.state=g,this.scheduler.flush(this),this)},l.prototype.execute=function(g,f){return 0<f||this.closed?h.prototype.execute.call(this,g,f):this._execute(g,f)},l.prototype.requestAsyncId=function(g,f,k){return void 0===k&&(k=0),null!==k&&0<k||null===k&&0<this.delay?h.prototype.requestAsyncId.call(this,g,f,k):g.flush(this)},l}(wg),tl=function(){function h(l,g){void 0===g&&(g=h.now),this.SchedulerAction=l,this.now=g}return h.prototype.schedule=function(l,g,f){return void 0===g&&(g=0),new this.SchedulerAction(this,l).schedule(f,g)},h.now=function(){return Date.now()},h}(),xg=function(h){function l(g,f){void 0===f&&(f=tl.now);var k=h.call(this,g,function(){return l.delegate&&l.delegate!==k?l.delegate.now():f()})||this;return k.actions=[],k.active=!1,k.scheduled=void 0,k}return O(l,h),l.prototype.schedule=function(g,f,k){return void 0===f&&(f=0),l.delegate&&l.delegate!==this?l.delegate.schedule(g,f,k):h.prototype.schedule.call(this,g,f,k)},l.prototype.flush=function(g){var f=this.actions;if(this.active)f.push(g);else{var k;this.active=!0;do{if(k=g.execute(g.state,g.delay))break}while(g=f.shift());if(this.active=!1,k){for(;g=f.shift();)g.unsubscribe();throw k}}},l}(tl),yg=new(function(h){function l(){return null!==h&&h.apply(this,arguments)||this}return O(l,h),l}(xg))(cB),yb=new Y(function(h){return h.complete()}),cn=function(h){return function(l){for(var g=0,f=h.length;g<f&&!l.closed;g++)l.next(h[g]);l.complete()}},ul;!function(h){h.NEXT="N",h.ERROR="E",h.COMPLETE="C"}(ul||(ul={}));var lf=function(){function h(l,g,f){this.kind=l,this.value=g,this.error=f,this.hasValue="N"===l}return h.prototype.observe=function(l){switch(this.kind){case"N":return l.next&&l.next(this.value);case"E":return l.error&&l.error(this.error);case"C":return l.complete&&l.complete()}},h.prototype.do=function(l,g,f){switch(this.kind){case"N":return l&&l(this.value);case"E":return g&&g(this.error);case"C":return f&&f()}},h.prototype.accept=function(l,g,f){return l&&"function"==typeof l.next?this.observe(l):this.do(l,g,f)},h.prototype.toObservable=function(){switch(this.kind){case"N":return eb(this.value);case"E":return Z(this.error);case"C":return Ef()}throw Error("unexpected notification kind value")},h.createNext=function(l){return void 0!==l?new h("N",l):h.undefinedValueNotification},h.createError=function(l){return new h("E",void 0,l)},h.createComplete=function(){return h.completeNotification},h.completeNotification=new h("C"),h.undefinedValueNotification=new h("N",void 0),h}(),Lu=function(){function h(l,g){void 0===g&&(g=0),this.scheduler=l,this.delay=g}return h.prototype.call=function(l,g){return g.subscribe(new Hr(l,this.scheduler,this.delay))},h}(),Hr=function(h){function l(g,f,k){return void 0===k&&(k=0),(g=h.call(this,g)||this).scheduler=f,g.delay=k,g}return O(l,h),l.dispatch=function(g){g.notification.observe(g.destination),this.unsubscribe()},l.prototype.scheduleMessage=function(g){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new dB(g,this.destination)))},l.prototype._next=function(g){this.scheduleMessage(lf.createNext(g))},l.prototype._error=function(g){this.scheduleMessage(lf.createError(g)),this.unsubscribe()},l.prototype._complete=function(){this.scheduleMessage(lf.createComplete()),this.unsubscribe()},l}(ma),dB=function(h,l){this.notification=h,this.destination=l},Ee=function(h){function l(g,f,k){void 0===g&&(g=Number.POSITIVE_INFINITY),void 0===f&&(f=Number.POSITIVE_INFINITY);var q=h.call(this)||this;return q.scheduler=k,q._events=[],q._infiniteTimeWindow=!1,q._bufferSize=1>g?1:g,q._windowTime=1>f?1:f,f===Number.POSITIVE_INFINITY?(q._infiniteTimeWindow=!0,q.next=q.nextInfiniteTimeWindow):q.next=q.nextTimeWindow,q}return O(l,h),l.prototype.nextInfiniteTimeWindow=function(g){if(!this.isStopped){var f=this._events;f.push(g),f.length>this._bufferSize&&f.shift()}h.prototype.next.call(this,g)},l.prototype.nextTimeWindow=function(g){this.isStopped||(this._events.push(new eB(this._getNow(),g)),this._trimBufferThenGetEvents()),h.prototype.next.call(this,g)},l.prototype._subscribe=function(g){var f=this._infiniteTimeWindow,k=f?this._events:this._trimBufferThenGetEvents(),q=this.scheduler,_r=k.length;if(this.closed)throw new xd;if(this.isStopped||this.hasError)var _s=Ta.EMPTY;else this.observers.push(g),_s=new Dr(this,g);if(q&&g.add(g=new Hr(g,q)),f)for(f=0;f<_r&&!g.closed;f++)g.next(k[f]);else for(f=0;f<_r&&!g.closed;f++)g.next(k[f].value);return this.hasError?g.error(this.thrownError):this.isStopped&&g.complete(),_s},l.prototype._getNow=function(){return(this.scheduler||yg).now()},l.prototype._trimBufferThenGetEvents=function(){for(var g=this._getNow(),f=this._bufferSize,k=this._windowTime,q=this._events,_r=q.length,_s=0;_s<_r&&!(g-q[_s].time<k);)_s++;return _r>f&&(_s=Math.max(_s,_r-f)),0<_s&&q.splice(0,_s),q},l}(Ua),eB=function(h,l){this.time=h,this.value=l},Gf=function(h){function l(){var g=null!==h&&h.apply(this,arguments)||this;return g.value=null,g.hasNext=!1,g.hasCompleted=!1,g}return O(l,h),l.prototype._subscribe=function(g){return this.hasError?(g.error(this.thrownError),Ta.EMPTY):this.hasCompleted&&this.hasNext?(g.next(this.value),g.complete(),Ta.EMPTY):h.prototype._subscribe.call(this,g)},l.prototype.next=function(g){this.hasCompleted||(this.value=g,this.hasNext=!0)},l.prototype.error=function(g){this.hasCompleted||h.prototype.error.call(this,g)},l.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&h.prototype.next.call(this,this.value),h.prototype.complete.call(this)},l}(Ua),fB=1,gB=Promise.resolve(),Ni={},Ir={setImmediate:function(h){var l=fB++;return Ni[l]=!0,gB.then(function(){return dn(l)&&h()}),l},clearImmediate:function(h){dn(h)}},hB=function(h){function l(g,f){var k=h.call(this,g,f)||this;return k.scheduler=g,k.work=f,k}return O(l,h),l.prototype.requestAsyncId=function(g,f,k){return void 0===k&&(k=0),null!==k&&0<k?h.prototype.requestAsyncId.call(this,g,f,k):(g.actions.push(this),g.scheduled||(g.scheduled=Ir.setImmediate(g.flush.bind(g,null))))},l.prototype.recycleAsyncId=function(g,f,k){if(void 0===k&&(k=0),null!==k&&0<k||null===k&&0<this.delay)return h.prototype.recycleAsyncId.call(this,g,f,k);0===g.actions.length&&(Ir.clearImmediate(f),g.scheduled=void 0)},l}(wg),Xi=new(function(h){function l(){return null!==h&&h.apply(this,arguments)||this}return O(l,h),l.prototype.flush=function(g){this.active=!0,this.scheduled=void 0;var f,k=this.actions,q=-1,_r=k.length;g=g||k.shift();do{if(f=g.execute(g.state,g.delay))break}while(++q<_r&&(g=k.shift()));if(this.active=!1,f){for(;++q<_r&&(g=k.shift());)g.unsubscribe();throw f}},l}(xg))(hB),iB=Xi,vl=new xg(wg),id=vl,jB=function(h){function l(g,f){var k=h.call(this,g,f)||this;return k.scheduler=g,k.work=f,k}return O(l,h),l.prototype.requestAsyncId=function(g,f,k){return void 0===k&&(k=0),null!==k&&0<k?h.prototype.requestAsyncId.call(this,g,f,k):(g.actions.push(this),g.scheduled||(g.scheduled=requestAnimationFrame(function(){return g.flush(null)})))},l.prototype.recycleAsyncId=function(g,f,k){if(void 0===k&&(k=0),null!==k&&0<k||null===k&&0<this.delay)return h.prototype.recycleAsyncId.call(this,g,f,k);0===g.actions.length&&(cancelAnimationFrame(f),g.scheduled=void 0)},l}(wg),Jr=new(function(h){function l(){return null!==h&&h.apply(this,arguments)||this}return O(l,h),l.prototype.flush=function(g){this.active=!0,this.scheduled=void 0;var f,k=this.actions,q=-1,_r=k.length;g=g||k.shift();do{if(f=g.execute(g.state,g.delay))break}while(++q<_r&&(g=k.shift()));if(this.active=!1,f){for(;++q<_r&&(g=k.shift());)g.unsubscribe();throw f}},l}(xg))(jB),kB=function(h){function l(g,f){void 0===g&&(g=Kr),void 0===f&&(f=Number.POSITIVE_INFINITY);var k=h.call(this,g,function(){return k.frame})||this;return k.maxFrames=f,k.frame=0,k.index=-1,k}return O(l,h),l.prototype.flush=function(){for(var g,f,k=this.actions,q=this.maxFrames;(f=k[0])&&f.delay<=q&&(k.shift(),this.frame=f.delay,!(g=f.execute(f.state,f.delay))););if(g){for(;f=k.shift();)f.unsubscribe();throw g}},l.frameTimeFactor=10,l}(xg),Kr=function(h){function l(g,f,k){void 0===k&&(k=g.index+=1);var q=h.call(this,g,f)||this;return q.scheduler=g,q.work=f,q.index=k,q.active=!0,q.index=g.index=k,q}return O(l,h),l.prototype.schedule=function(g,f){if(void 0===f&&(f=0),!this.id)return h.prototype.schedule.call(this,g,f);this.active=!1;var k=new l(this.scheduler,this.work);return this.add(k),k.schedule(g,f)},l.prototype.requestAsyncId=function(g,f,k){return void 0===k&&(k=0),this.delay=g.frame+k,(g=g.actions).push(this),g.sort(l.sortActions),!0},l.prototype.recycleAsyncId=function(g,f,k){},l.prototype._execute=function(g,f){if(!0===this.active)return h.prototype._execute.call(this,g,f)},l.sortActions=function(g,f){return g.delay===f.delay?g.index===f.index?0:g.index>f.index?1:-1:g.delay>f.delay?1:-1},l}(wg),wl=function(){function h(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return h.prototype=Object.create(Error.prototype),h}(),Sg=function(){function h(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return h.prototype=Object.create(Error.prototype),h}(),sb=function(){function h(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return h.prototype=Object.create(Error.prototype),h}(),Mu=function(){function h(l,g){this.project=l,this.thisArg=g}return h.prototype.call=function(l,g){return g.subscribe(new lB(l,this.project,this.thisArg))},h}(),lB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).project=f,g.count=0,g.thisArg=k||g,g}return O(l,h),l.prototype._next=function(g){try{var f=this.project.call(this.thisArg,g,this.count++)}catch(k){return void this.destination.error(k)}this.destination.next(f)},l}(ma),xl=function(h){function l(){return null!==h&&h.apply(this,arguments)||this}return O(l,h),l.prototype.notifyNext=function(g,f,k,q,_r){this.destination.next(f)},l.prototype.notifyError=function(g,f){this.destination.error(g)},l.prototype.notifyComplete=function(g){this.destination.complete()},l}(ma),Ru=function(h){function l(g,f,k){var q=h.call(this)||this;return q.parent=g,q.outerValue=f,q.outerIndex=k,q.index=0,q}return O(l,h),l.prototype._next=function(g){this.parent.notifyNext(this.outerValue,g,this.outerIndex,this.index++,this)},l.prototype._error=function(g){this.parent.notifyError(g,this),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},l}(ma),mB=function(h){return function(l){return h.then(function(g){l.closed||(l.next(g),l.complete())},function(g){return l.error(g)}).then(null,Ae),l}},gd="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",nB=function(h){return function(l){for(var g=h[gd]();;){var f=void 0;try{f=g.next()}catch(k){return l.error(k),l}if(f.done){l.complete();break}if(l.next(f.value),l.closed)break}return"function"==typeof g.return&&l.add(function(){g.return&&g.return()}),l}},oB=function(h){return function(l){var g=h[Be]();if("function"!=typeof g.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return g.subscribe(l)}},kn=function(h){return h&&"number"==typeof h.length&&"function"!=typeof h},Hf=function(h){if(h&&"function"==typeof h[Be])return oB(h);if(kn(h))return cn(h);if(hn(h))return mB(h);if(h&&"function"==typeof h[gd])return nB(h);throw h=Ji(h)?"an invalid object":"'"+h+"'",new TypeError("You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Lr={},qB=function(){function h(l){this.resultSelector=l}return h.prototype.call=function(l,g){return g.subscribe(new pB(l,this.resultSelector))},h}(),pB=function(h){function l(g,f){return(g=h.call(this,g)||this).resultSelector=f,g.active=0,g.values=[],g.observables=[],g}return O(l,h),l.prototype._next=function(g){this.values.push(Lr),this.observables.push(g)},l.prototype._complete=function(){var g=this.observables,f=g.length;if(0===f)this.destination.complete();else{this.toRespond=this.active=f;for(var k=0;k<f;k++)this.add(Oi(this,g[k],void 0,k))}},l.prototype.notifyComplete=function(g){0==--this.active&&this.destination.complete()},l.prototype.notifyNext=function(g,f,k){var q=(g=this.values)[k];q=this.toRespond?q===Lr?--this.toRespond:this.toRespond:0,g[k]=f,0===q&&(this.resultSelector?this._tryResultSelector(g):this.destination.next(g.slice()))},l.prototype._tryResultSelector=function(g){try{var f=this.resultSelector.apply(this,g)}catch(k){return void this.destination.error(k)}this.destination.next(f)},l}(xl),Cc=function(h){function l(g){var f=h.call(this)||this;return f.parent=g,f}return O(l,h),l.prototype._next=function(g){this.parent.notifyNext(g)},l.prototype._error=function(g){this.parent.notifyError(g),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},l}(ma);!function(h){function l(g,f,k){var q=h.call(this)||this;return q.parent=g,q.outerValue=f,q.outerIndex=k,q}O(l,h),l.prototype._next=function(g){this.parent.notifyNext(this.outerValue,g,this.outerIndex,this)},l.prototype._error=function(g){this.parent.notifyError(g),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(ma);var Dc=function(h){function l(){return null!==h&&h.apply(this,arguments)||this}return O(l,h),l.prototype.notifyNext=function(g){this.destination.next(g)},l.prototype.notifyError=function(g){this.destination.error(g)},l.prototype.notifyComplete=function(){this.destination.complete()},l}(ma);!function(h){function l(){return null!==h&&h.apply(this,arguments)||this}O(l,h),l.prototype.notifyNext=function(g,f,k,q){this.destination.next(f)},l.prototype.notifyError=function(g){this.destination.error(g)},l.prototype.notifyComplete=function(g){this.destination.complete()}}(ma);var Vu=function(){function h(l,g){void 0===g&&(g=Number.POSITIVE_INFINITY),this.project=l,this.concurrent=g}return h.prototype.call=function(l,g){return g.subscribe(new rB(l,this.project,this.concurrent))},h}(),rB=function(h){function l(g,f,k){return void 0===k&&(k=Number.POSITIVE_INFINITY),(g=h.call(this,g)||this).project=f,g.concurrent=k,g.hasCompleted=!1,g.buffer=[],g.active=0,g.index=0,g}return O(l,h),l.prototype._next=function(g){this.active<this.concurrent?this._tryNext(g):this.buffer.push(g)},l.prototype._tryNext=function(g){var f=this.index++;try{var k=this.project(g,f)}catch(q){return void this.destination.error(q)}this.active++,this._innerSub(k)},l.prototype._innerSub=function(g){var f=new Cc(this),k=this.destination;k.add(f),(g=qc(g,f))!==f&&k.add(g)},l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(g){this.destination.next(g)},l.prototype.notifyComplete=function(){var g=this.buffer;this.active--,0<g.length?this._next(g.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},l}(Dc),yl=C.parseFloat,Mr=-1/0!=1/yl("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0")?function(h){h=Ij(String(h));var l=yl(h);return 0===l&&"-"==h.charAt(0)?-0:l}:yl;M({global:!0,forced:parseFloat!=Mr},{parseFloat:Mr});var zl=new Y(pc),$u=function(){function h(l,g){this.predicate=l,this.thisArg=g}return h.prototype.call=function(l,g){return g.subscribe(new sB(l,this.predicate,this.thisArg))},h}(),sB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).predicate=f,g.thisArg=k,g.count=0,g}return O(l,h),l.prototype._next=function(g){try{var f=this.predicate.call(this.thisArg,g,this.count++)}catch(k){return void this.destination.error(k)}f&&this.destination.next(g)},l}(ma),av=function(){function h(){}return h.prototype.call=function(l,g){return g.subscribe(new tB(l))},h}(),tB=function(h){function l(g){return(g=h.call(this,g)||this).hasFirst=!1,g.observables=[],g.subscriptions=[],g}return O(l,h),l.prototype._next=function(g){this.observables.push(g)},l.prototype._complete=function(){var g=this.observables,f=g.length;if(0===f)this.destination.complete();else{for(var k=0;k<f&&!this.hasFirst;k++){var q=Oi(this,g[k],void 0,k);this.subscriptions&&this.subscriptions.push(q),this.add(q)}this.observables=null}},l.prototype.notifyNext=function(g,f,k){if(!this.hasFirst){for(this.hasFirst=!0,g=0;g<this.subscriptions.length;g++)if(g!==k){var q=this.subscriptions[g];q.unsubscribe(),this.remove(q)}this.subscriptions=null}this.destination.next(f)},l}(xl),dv=function(){function h(l){this.resultSelector=l}return h.prototype.call=function(l,g){return g.subscribe(new uB(l,this.resultSelector))},h}(),uB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).resultSelector=f,g.iterators=[],g.active=0,g.resultSelector="function"==typeof f?f:void 0,g}return O(l,h),l.prototype._next=function(g){var f=this.iterators;Nb(g)?f.push(new vB(g)):f.push("function"==typeof g[gd]?new wB(g[gd]()):new xB(this.destination,this,g))},l.prototype._complete=function(){var g=this.iterators,f=g.length;if(this.unsubscribe(),0===f)this.destination.complete();else{this.active=f;for(var k=0;k<f;k++){var q=g[k];q.stillUnsubscribed?this.destination.add(q.subscribe()):this.active--}}},l.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},l.prototype.checkIterators=function(){for(var g=this.iterators,f=g.length,k=this.destination,q=0;q<f;q++){var _r=g[q];if("function"==typeof _r.hasValue&&!_r.hasValue())return}var _s=!1,_a=[];for(q=0;q<f;q++){var _l=(_r=g[q]).next();if(_r.hasCompleted()&&(_s=!0),_l.done)return void k.complete();_a.push(_l.value)}this.resultSelector?this._tryresultSelector(_a):k.next(_a),_s&&k.complete()},l.prototype._tryresultSelector=function(g){try{var f=this.resultSelector.apply(this,g)}catch(k){return void this.destination.error(k)}this.destination.next(f)},l}(ma),wB=function(){function h(l){this.iterator=l,this.nextResult=l.next()}return h.prototype.hasValue=function(){return!0},h.prototype.next=function(){var l=this.nextResult;return this.nextResult=this.iterator.next(),l},h.prototype.hasCompleted=function(){var l=this.nextResult;return!(!l||!l.done)},h}(),vB=function(){function h(l){this.array=l,this.length=this.index=0,this.length=l.length}return h.prototype[gd]=function(){return this},h.prototype.next=function(l){return(l=this.index++)<this.length?{value:this.array[l],done:!1}:{value:null,done:!0}},h.prototype.hasValue=function(){return this.array.length>this.index},h.prototype.hasCompleted=function(){return this.array.length===this.index},h}(),xB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).parent=f,g.observable=k,g.stillUnsubscribed=!0,g.buffer=[],g.isComplete=!1,g}return O(l,h),l.prototype[gd]=function(){return this},l.prototype.next=function(){var g=this.buffer;return 0===g.length&&this.isComplete?{value:null,done:!0}:{value:g.shift(),done:!1}},l.prototype.hasValue=function(){return 0<this.buffer.length},l.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},l.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},l.prototype.notifyNext=function(g){this.buffer.push(g),this.parent.checkIterators()},l.prototype.subscribe=function(){return qc(this.observable,new Cc(this))},l}(Dc),yB=Object.freeze({__proto__:null,Observable:Y,ConnectableObservable:Gr,GroupedObservable:sl,observable:Be,Subject:Ua,BehaviorSubject:bB,ReplaySubject:Ee,AsyncSubject:Gf,asap:iB,asapScheduler:Xi,async:id,asyncScheduler:vl,queue:yg,queueScheduler:yg,animationFrame:Jr,animationFrameScheduler:Jr,VirtualTimeScheduler:kB,VirtualAction:Kr,Scheduler:tl,Subscription:Ta,Subscriber:ma,Notification:lf,get NotificationKind(){return ul},pipe:Li,noop:pc,identity:ed,isObservable:function(h){return!!h&&(h instanceof Y||"function"==typeof h.lift&&"function"==typeof h.subscribe)},ArgumentOutOfRangeError:wl,EmptyError:Sg,ObjectUnsubscribedError:xd,UnsubscriptionError:Df,TimeoutError:sb,bindCallback:en,bindNodeCallback:fn,combineLatest:function(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];var g=l=void 0;return fd(h[h.length-1])&&(g=h.pop()),"function"==typeof h[h.length-1]&&(l=h.pop()),1===h.length&&Nb(h[0])&&(h=h[0]),Ff(h,g).lift(new qB(l))},concat:ln,defer:hd,empty:Ef,forkJoin:mn,from:Ob,fromEvent:jb,fromEventPattern:on,generate:function(h,l,g,f,k){if(1==arguments.length){var q=h.initialState;l=h.condition,g=h.iterate;var _r=h.resultSelector||ed;k=h.scheduler}else void 0===f||fd(f)?(q=h,_r=ed,k=f):(q=h,_r=f);return new Y(function(_s){var _a=q;if(k)return k.schedule(Wu,0,{subscriber:_s,iterate:g,condition:l,resultSelector:_r,state:_a});for(;;){if(l){var _l=void 0;try{_l=l(_a)}catch(bh){_s.error(bh);break}if(!_l){_s.complete();break}}_l=void 0;try{_l=_r(_a)}catch(bh){_s.error(bh);break}if(_s.next(_l),_s.closed)break;try{_a=g(_a)}catch(bh){_s.error(bh);break}}})},iif:function(h,l,g){return void 0===l&&(l=yb),void 0===g&&(g=yb),hd(function(){return h()?l:g})},interval:pn,merge:cc,never:function(){return zl},of:eb,onErrorResumeNext:Qi,pairs:function(h,l){return new Y(l?function(g){var f=Object.keys(h),k=new Ta;return k.add(l.schedule(Yu,0,{keys:f,index:0,subscriber:g,subscription:k,obj:h})),k}:function(g){for(var f=Object.keys(h),k=0;k<f.length&&!g.closed;k++){var q=f[k];h.hasOwnProperty(q)&&g.next([q,h[q]])}g.complete()})},partition:function(h,l,g){return[zb(l,g)(new Y(Hf(h))),zb(Zu(l,g))(new Y(Hf(h)))]},race:Da,range:function(h,l,g){return void 0===h&&(h=0),new Y(function(f){void 0===l&&(l=h,h=0);var k=0,q=h;if(g)return g.schedule(bv,0,{index:k,count:l,start:h,subscriber:f});for(;;){if(k++>=l){f.complete();break}if(f.next(q++),f.closed)break}})},throwError:Z,timer:Kc,using:function(h,l){return new Y(function(g){try{var f=h()}catch(_r){return void g.error(_r)}try{var k=l(f)}catch(_r){return void g.error(_r)}var q=(k?Ob(k):yb).subscribe(g);return function(){q.unsubscribe(),f&&f.unsubscribe()}})},zip:Ri,scheduled:jn,EMPTY:yb,NEVER:zl,config:Mb}),ev=function(){function h(l){this.selector=l}return h.prototype.call=function(l,g){return g.subscribe(new zB(l,this.selector,this.caught))},h}(),zB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).selector=f,g.caught=k,g}return O(l,h),l.prototype.error=function(g){if(!this.isStopped){var f=void 0;try{f=this.selector(g,this.caught)}catch(k){return void h.prototype.error.call(this,k)}this._unsubscribeAndRecycle(),g=new Cc(this),this.add(g),(f=qc(f,g))!==g&&this.add(f)}},l}(Dc),fv=function(){function h(l){this.defaultValue=l}return h.prototype.call=function(l,g){return g.subscribe(new AB(l,this.defaultValue))},h}(),AB=function(h){function l(g,f){return(g=h.call(this,g)||this).defaultValue=f,g.isEmpty=!0,g}return O(l,h),l.prototype._next=function(g){this.isEmpty=!1,this.destination.next(g)},l.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},l}(ma),gv=function(){function h(l,g){this.delay=l,this.scheduler=g}return h.prototype.call=function(l,g){return g.subscribe(new BB(l,this.delay,this.scheduler))},h}(),BB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).delay=f,g.scheduler=k,g.queue=[],g.active=!1,g.errored=!1,g}return O(l,h),l.dispatch=function(g){for(var f=g.source,k=f.queue,q=g.scheduler,_r=g.destination;0<k.length&&0>=k[0].time-q.now();)k.shift().notification.observe(_r);0<k.length?(f=Math.max(0,k[0].time-q.now()),this.schedule(g,f)):(this.unsubscribe(),f.active=!1)},l.prototype._schedule=function(g){this.active=!0,this.destination.add(g.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:g}))},l.prototype.scheduleNotification=function(g){if(!0!==this.errored){var f=this.scheduler;g=new CB(f.now()+this.delay,g),this.queue.push(g),!1===this.active&&this._schedule(f)}},l.prototype._next=function(g){this.scheduleNotification(lf.createNext(g))},l.prototype._error=function(g){this.errored=!0,this.queue=[],this.destination.error(g),this.unsubscribe()},l.prototype._complete=function(){this.scheduleNotification(lf.createComplete()),this.unsubscribe()},l}(ma),CB=function(h,l){this.time=h,this.notification=l},hv=function(){function h(l,g){this.keySelector=l,this.flushes=g}return h.prototype.call=function(l,g){return g.subscribe(new DB(l,this.keySelector,this.flushes))},h}(),DB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).keySelector=f,g.values=new Set,k&&g.add(qc(k,new Cc(g))),g}return O(l,h),l.prototype.notifyNext=function(){this.values.clear()},l.prototype.notifyError=function(g){this._error(g)},l.prototype._next=function(g){this.keySelector?this._useKeySelector(g):this._finalizeNext(g,g)},l.prototype._useKeySelector=function(g){var f=this.destination;try{var k=this.keySelector(g)}catch(q){return void f.error(q)}this._finalizeNext(k,g)},l.prototype._finalizeNext=function(g,f){var k=this.values;k.has(g)||(k.add(g),this.destination.next(f))},l}(Dc),jv=function(){function h(l){this.errorFactory=l}return h.prototype.call=function(l,g){return g.subscribe(new EB(l,this.errorFactory))},h}(),EB=function(h){function l(g,f){return(g=h.call(this,g)||this).errorFactory=f,g.hasValue=!1,g}return O(l,h),l.prototype._next=function(g){this.hasValue=!0,this.destination.next(g)},l.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var g=void 0;try{g=this.errorFactory()}catch(f){g=f}this.destination.error(g)},l}(ma),kv=function(){function h(l){if(this.total=l,0>this.total)throw new wl}return h.prototype.call=function(l,g){return g.subscribe(new FB(l,this.total))},h}(),FB=function(h){function l(g,f){return(g=h.call(this,g)||this).total=f,g.count=0,g}return O(l,h),l.prototype._next=function(g){var f=this.total,k=++this.count;k<=f&&(this.destination.next(g),k===f&&(this.destination.complete(),this.unsubscribe()))},l}(ma),lv=function(){function h(l){this.project=l}return h.prototype.call=function(l,g){return g.subscribe(new GB(l,this.project))},h}(),GB=function(h){function l(g,f){return(g=h.call(this,g)||this).project=f,g.hasSubscription=!1,g.hasCompleted=!1,g.index=0,g}return O(l,h),l.prototype._next=function(g){this.hasSubscription||this.tryNext(g)},l.prototype.tryNext=function(g){var f=this.index++;try{var k=this.project(g,f)}catch(q){return void this.destination.error(q)}this.hasSubscription=!0,this._innerSub(k)},l.prototype._innerSub=function(g){var f=new Cc(this),k=this.destination;k.add(f),(g=qc(g,f))!==f&&k.add(g)},l.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(g){this.destination.next(g)},l.prototype.notifyError=function(g){this.destination.error(g)},l.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},l}(Dc),mv=function(){function h(l){this.callback=l}return h.prototype.call=function(l,g){return g.subscribe(new HB(l,this.callback))},h}(),HB=function(h){function l(g,f){return(g=h.call(this,g)||this).add(new Ta(f)),g}return O(l,h),l}(ma),ov=function(){function h(){}return h.prototype.call=function(l,g){return g.subscribe(new IB(l))},h}(),IB=function(h){function l(){return null!==h&&h.apply(this,arguments)||this}return O(l,h),l.prototype._next=function(g){},l}(ma),pv=function(){function h(l){if(this.total=l,0>this.total)throw new wl}return h.prototype.call=function(l,g){return g.subscribe(new JB(l,this.total))},h}(),JB=function(h){function l(g,f){return(g=h.call(this,g)||this).total=f,g.ring=[],g.count=0,g}return O(l,h),l.prototype._next=function(g){var f=this.ring,k=this.total,q=this.count++;f.length<k?f.push(g):f[q%k]=g},l.prototype._complete=function(){var g=this.destination,f=this.count;if(0<f)for(var k=this.count>=this.total?this.total:this.count,q=this.ring,_r=0;_r<k;_r++){var _s=f++%k;g.next(q[_s])}g.complete()},l}(ma),qv=function(){function h(l){this.value=l}return h.prototype.call=function(l,g){return g.subscribe(new KB(l,this.value))},h}(),KB=function(h){function l(g,f){return(g=h.call(this,g)||this).value=f,g}return O(l,h),l.prototype._next=function(g){this.destination.next(this.value)},l}(ma),rv=function(){function h(l,g,f){void 0===f&&(f=!1),this.accumulator=l,this.seed=g,this.hasSeed=f}return h.prototype.call=function(l,g){return g.subscribe(new LB(l,this.accumulator,this.seed,this.hasSeed))},h}(),LB=function(h){function l(g,f,k,q){return(g=h.call(this,g)||this).accumulator=f,g._seed=k,g.hasSeed=q,g.index=0,g}return O(l,h),Object.defineProperty(l.prototype,"seed",{get:function(){return this._seed},set:function(g){this.hasSeed=!0,this._seed=g},enumerable:!0,configurable:!0}),l.prototype._next=function(g){if(this.hasSeed)return this._tryNext(g);this.seed=g,this.destination.next(g)},l.prototype._tryNext=function(g){var f=this.index++;try{var k=this.accumulator(this.seed,g,f)}catch(q){this.destination.error(q)}this.seed=k,this.destination.next(k)},l}(ma),tv=function(){function h(l,g){this.subjectFactory=l,this.selector=g}return h.prototype.call=function(l,g){var f=this.selector,k=this.subjectFactory();return(l=f(k).subscribe(l)).add(g.subscribe(k)),l},h}(),vv=function(){function h(l,g){this.notifier=l,this.source=g}return h.prototype.call=function(l,g){return g.subscribe(new MB(l,this.notifier,this.source))},h}(),MB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).notifier=f,g.source=k,g}return O(l,h),l.prototype.error=function(g){if(!this.isStopped){var f=this.errors,k=this.retries,q=this.retriesSubscription;if(k)this.retriesSubscription=this.errors=void 0;else{f=new Ua;try{k=(0,this.notifier)(f)}catch(_r){return h.prototype.error.call(this,_r)}q=qc(k,new Cc(this))}this._unsubscribeAndRecycle(),this.errors=f,this.retries=k,this.retriesSubscription=q,f.next(g)}},l.prototype._unsubscribe=function(){var g=this.errors,f=this.retriesSubscription;g&&(g.unsubscribe(),this.errors=void 0),f&&(f.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},l.prototype.notifyNext=function(){var g=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=g,this.source.subscribe(this)},l}(Dc),yv=function(){function h(l){this.project=l}return h.prototype.call=function(l,g){return g.subscribe(new NB(l,this.project))},h}(),NB=function(h){function l(g,f){return(g=h.call(this,g)||this).project=f,g.index=0,g}return O(l,h),l.prototype._next=function(g){var f=this.index++;try{var k=this.project(g,f)}catch(q){return void this.destination.error(q)}this._innerSub(k)},l.prototype._innerSub=function(g){var f=this.innerSubscription;f&&f.unsubscribe(),f=new Cc(this);var k=this.destination;k.add(f),this.innerSubscription=qc(g,f),this.innerSubscription!==f&&k.add(this.innerSubscription)},l.prototype._complete=function(){var g=this.innerSubscription;g&&!g.closed||h.prototype._complete.call(this),this.unsubscribe()},l.prototype._unsubscribe=function(){this.innerSubscription=void 0},l.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&h.prototype._complete.call(this)},l.prototype.notifyNext=function(g){this.destination.next(g)},l}(Dc),zv=function(){function h(l){this.notifier=l}return h.prototype.call=function(l,g){l=new OB(l);var f=qc(this.notifier,new Cc(l));return f&&!l.seenValue?(l.add(f),g.subscribe(l)):l},h}(),OB=function(h){function l(g){return(g=h.call(this,g)||this).seenValue=!1,g}return O(l,h),l.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},l.prototype.notifyComplete=function(){},l}(Dc),Bv=function(){function h(l,g){this.predicate=l,this.inclusive=g}return h.prototype.call=function(l,g){return g.subscribe(new PB(l,this.predicate,this.inclusive))},h}(),PB=function(h){function l(g,f,k){return(g=h.call(this,g)||this).predicate=f,g.inclusive=k,g.index=0,g}return O(l,h),l.prototype._next=function(g){var f=this.destination;try{var k=this.predicate(g,this.index++)}catch(q){return void f.error(q)}this.nextOrComplete(g,k)},l.prototype.nextOrComplete=function(g,f){var k=this.destination;f?k.next(g):(this.inclusive&&k.next(g),k.complete())},l}(ma),Cv=function(){function h(l,g,f){this.nextOrObserver=l,this.error=g,this.complete=f}return h.prototype.call=function(l,g){return g.subscribe(new QB(l,this.nextOrObserver,this.error,this.complete))},h}(),QB=function(h){function l(g,f,k,q){return(g=h.call(this,g)||this)._tapNext=pc,g._tapError=pc,g._tapComplete=pc,g._tapError=k||pc,g._tapComplete=q||pc,ze(f)?(g._context=g,g._tapNext=f):f&&(g._context=f,g._tapNext=f.next||pc,g._tapError=f.error||pc,g._tapComplete=f.complete||pc),g}return O(l,h),l.prototype._next=function(g){try{this._tapNext.call(this._context,g)}catch(f){return void this.destination.error(f)}this.destination.next(g)},l.prototype._error=function(g){try{this._tapError.call(this._context,g)}catch(f){return void this.destination.error(f)}this.destination.error(g)},l.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(g){return void this.destination.error(g)}return this.destination.complete()},l}(ma),Ev={leading:!0,trailing:!1};!function(h){function l(g,f,k,q){var _r=h.call(this,g)||this;return _r.destination=g,_r.durationSelector=f,_r._leading=k,_r._trailing=q,_r._hasValue=!1,_r}O(l,h),l.prototype._next=function(g){this._hasValue=!0,this._sendValue=g,this._throttled||(this._leading?this.send():this.throttle(g))},l.prototype.send=function(){var g=this._sendValue;this._hasValue&&(this.destination.next(g),this.throttle(g)),this._hasValue=!1,this._sendValue=void 0},l.prototype.throttle=function(g){(g=this.tryDurationSelector(g))&&this.add(this._throttled=qc(g,new Cc(this)))},l.prototype.tryDurationSelector=function(g){try{return this.durationSelector(g)}catch(f){return this.destination.error(f),null}},l.prototype.throttlingDone=function(){var g=this._throttled,f=this._trailing;g&&g.unsubscribe(),this._throttled=void 0,f&&this.send()},l.prototype.notifyNext=function(){this.throttlingDone()},l.prototype.notifyComplete=function(){this.throttlingDone()}}(Dc);for(var Fv=function(){function h(l,g,f,k){this.duration=l,this.scheduler=g,this.leading=f,this.trailing=k}return h.prototype.call=function(l,g){return g.subscribe(new RB(l,this.duration,this.scheduler,this.leading,this.trailing))},h}(),RB=function(h){function l(g,f,k,q,_r){return(g=h.call(this,g)||this).duration=f,g.scheduler=k,g.leading=q,g.trailing=_r,g._hasTrailingValue=!1,g._trailingValue=null,g}return O(l,h),l.prototype._next=function(g){this.throttled?this.trailing&&(this._trailingValue=g,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Gv,this.duration,{subscriber:this})),this.leading?this.destination.next(g):this.trailing&&(this._trailingValue=g,this._hasTrailingValue=!0))},l.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},l.prototype.clearThrottle=function(){var g=this.throttled;g&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),g.unsubscribe(),this.remove(g),this.throttled=null)},l}(ma),Iv=function(){function h(l,g,f,k){this.waitFor=l,this.absoluteTimeout=g,this.withObservable=f,this.scheduler=k}return h.prototype.call=function(l,g){return g.subscribe(new SB(l,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},h}(),SB=function(h){function l(g,f,k,q,_r){return(g=h.call(this,g)||this).absoluteTimeout=f,g.waitFor=k,g.withObservable=q,g.scheduler=_r,g.scheduleTimeout(),g}return O(l,h),l.dispatchTimeout=function(g){var f=g.withObservable;g._unsubscribeAndRecycle(),g.add(qc(f,new Cc(g)))},l.prototype.scheduleTimeout=function(){var g=this.action;g?this.action=g.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(l.dispatchTimeout,this.waitFor,this))},l.prototype._next=function(g){this.absoluteTimeout||this.scheduleTimeout(),h.prototype._next.call(this,g)},l.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},l}(Dc),Kv=function(){function h(l,g){this.observables=l,this.project=g}return h.prototype.call=function(l,g){return g.subscribe(new TB(l,this.observables,this.project))},h}(),TB=function(h){function l(g,f,k){(g=h.call(this,g)||this).observables=f,g.project=k,g.toRespond=[],k=f.length,g.values=Array(k);for(var q=0;q<k;q++)g.toRespond.push(q);for(q=0;q<k;q++)g.add(Oi(g,f[q],void 0,q));return g}return O(l,h),l.prototype.notifyNext=function(g,f,k){this.values[k]=f,0<(g=this.toRespond).length&&-1!==(k=g.indexOf(k))&&g.splice(k,1)},l.prototype.notifyComplete=function(){},l.prototype._next=function(g){0===this.toRespond.length&&(g=[g].concat(this.values),this.project?this._tryProject(g):this.destination.next(g))},l.prototype._tryProject=function(g){try{var f=this.project.apply(this,g)}catch(k){return void this.destination.error(k)}this.destination.next(f)},l}(xl),Nr=cb(function(h){var l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(l){var g=new Uint8Array(16);h.exports=function(){return l(g),g}}else{var f=Array(16);h.exports=function(){for(var k,q=0;16>q;q++)0==(3&q)&&(k=4294967296*Math.random()),f[q]=k>>>((3&q)<<3)&255;return f}}}),db=[],ei=0;256>ei;++ei)db[ei]=(ei+256).toString(16).substr(1);var Or=function(h,l){return l=l||0,[db[h[l++]],db[h[l++]],db[h[l++]],db[h[l++]],"-",db[h[l++]],db[h[l++]],"-",db[h[l++]],db[h[l++]],"-",db[h[l++]],db[h[l++]],"-",db[h[l++]],db[h[l++]],db[h[l++]],db[h[l++]],db[h[l++]],db[h[l++]]].join("")},de=function(h,l,g){if(g=l&&g||0,"string"==typeof h&&(l="binary"===h?Array(16):null,h=null),(h=(h=h||{}).random||(h.rng||Nr)())[6]=15&h[6]|64,h[8]=63&h[8]|128,l)for(var f=0;16>f;++f)l[g+f]=h[f];return l||Or(h)},zg=de(),Ti=!1,xn=new AbortController,Vc,yd,Al,Bl,zd,ee,mc,mf,Wb,Cl,Wc,fe,Xc,Yc,Zc,nf,$c,ad;(function(h){h[h.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",h[h.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",h[h.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",h[h.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",h[h.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",h[h.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",h[h.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"})(Vc||(Vc={})),function(h){h[h.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",h[h.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",h[h.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",h[h.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",h[h.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",h[h.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(yd||(yd={})),function(h){h[h.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Al||(Al={})),function(h){h[h.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Bl||(Bl={})),function(h){h[h.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",h[h.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",h[h.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",h[h.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",h[h.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",h[h.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(zd||(zd={})),function(h){h[h.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",h[h.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",h[h.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",h[h.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",h[h.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(ee||(ee={})),function(h){h[h.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",h[h.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",h[h.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",h[h.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",h[h.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",h[h.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",h[h.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",h[h.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",h[h.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",h[h.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",h[h.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(mc||(mc={})),function(h){h[h.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",h[h.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",h[h.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",h[h.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(mf||(mf={})),function(h){h[h.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",h[h.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",h[h.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",h[h.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",h[h.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",h[h.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",h[h.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",h[h.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",h[h.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",h[h.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",h[h.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Wb||(Wb={})),function(h){h[h.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Cl||(Cl={})),function(h){h[h.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",h[h.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",h[h.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",h[h.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",h[h.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",h[h.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",h[h.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Wc||(Wc={})),function(h){h[h.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",h[h.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",h[h.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",h[h.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",h[h.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(fe||(fe={})),function(h){h[h.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",h[h.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",h[h.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",h[h.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",h[h.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",h[h.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",h[h.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",h[h.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Xc||(Xc={})),function(h){h[h.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",h[h.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",h[h.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",h[h.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",h[h.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",h[h.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",h[h.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Yc||(Yc={})),function(h){h[h.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",h[h.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",h[h.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",h[h.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",h[h.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",h[h.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",h[h.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Zc||(Zc={})),function(h){h[h.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",h[h.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",h[h.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",h[h.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(nf||(nf={})),function(h){h[h.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",h[h.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",h[h.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",h[h.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",h[h.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",h[h.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",h[h.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}($c||($c={})),function(h){h[h.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",h[h.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",h[h.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",h[h.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",h[h.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",h[h.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",h[h.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(ad||(ad={}));var Xb=Vc.ATTRIBUTE_OPERATION_ERR_FAILURE,Oa=Vc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,Ge=Vc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW,Pr=Vc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Yb=Vc.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Zb=Vc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,Ag=yd.CHANNEL_MESSAGE_ERR_FAILURE,Dl=yd.CHANNEL_MESSAGE_ERR_TIMEOUT,Qr=yd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,fi=yd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE,UB=yd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL,El=yd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,VB=Al.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Rr=Bl.CREATE_INSTANCE_ERR_INVALID_ARGUMENT,Sr=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT,Tr=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,WB=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT,XB=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,YB=zd.GET_MEMBERS_ERR_FAILURE,ZB=zd.GET_MEMBERS_ERR_REJECTED,$B=zd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,aC=zd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,Ec=ee.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,bC=ee.INVITATION_API_CALL_ERR_NOT_STARTED,gi=ee.INVITATION_API_CALL_ERR_ALREADY_END,Ur=ee.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,cC=ee.INVITATION_API_CALL_ERR_ALREADY_SENT,Vr=mc.JOIN_CHANNEL_ERR_FAILURE,dC=mc.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Wr=mc.JOIN_CHANNEL_TIMEOUT,Xr=mc.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Yr=mc.JOIN_CHANNEL_ERR_ALREADY_JOINED,Zr=mc.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,$r=mc.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,as=mf.LEAVE_CHANNEL_ERR_FAILURE,bs=mf.LEAVE_CHANNEL_ERR_REJECTED,eC=mf.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,fC=mf.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,cs=Wb.LOGIN_ERR_UNKNOWN,Bg=Wb.LOGIN_ERR_REJECTED,hi=Wb.LOGIN_ERR_INVALID_ARGUMENT,ds=Wb.LOGIN_ERR_INVALID_APP_ID,es=Wb.LOGIN_ERR_INVALID_TOKEN,ii=Wb.LOGIN_ERR_TOKEN_EXPIRED,gC=Wb.LOGIN_ERR_ALREADY_LOGIN,hC=Wb.LOGIN_ERR_TIMEOUT,iC=Wb.LOGIN_ERR_TOO_OFTEN,fs=Cl.LOGOUT_ERR_USER_NOT_LOGGED_IN,gs=Wc.PEER_MESSAGE_ERR_FAILURE,Fl=Wc.PEER_MESSAGE_ERR_TIMEOUT,hs=Wc.PEER_MESSAGE_ERR_TOO_OFTEN,Gl=Wc.PEER_MESSAGE_ERR_INVALID_USERID,Ie=Wc.PEER_MESSAGE_ERR_INVALID_MESSAGE,Hl=Wc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,jC=Wc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,is=fe.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT,kC=fe.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT,lC=fe.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,mC=Xc.RENEW_TOKEN_ERR_FAILURE,nC=Xc.RENEW_TOKEN_ERR_INVALID_ARGUMENT,oC=Xc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,pC=Xc.RENEW_TOKEN_ERR_INVALID_TOKEN,qC=Xc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,js=Zc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,Cg=Zc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT,rC=Zc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT,ks=Zc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,Il=Zc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN,Dg=$c.UPLOAD_MEDIA_ERR_FAILURE,Of=$c.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,ji=$c.UPLOAD_MEDIA_ERR_TIMEOUT,sC=$c.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,tC=$c.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ls=$c.UPLOAD_MEDIA_ERR_INTERRUPTED,uC=$c.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,Eg=ad.DOWNLOAD_MEDIA_ERR_FAILURE,Jl=ad.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,vC=ad.DOWNLOAD_MEDIA_ERR_TIMEOUT,wC=ad.DOWNLOAD_MEDIA_ERR_NOT_EXIST,xC=ad.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ms=ad.DOWNLOAD_MEDIA_ERR_INTERRUPTED,yC=ad.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,zC=function(h,l){var g;return nl(h,function(f,k,q){return!(g=l(f,k,q))}),!!g},ki=function(h,l,g){if(!ob(g))return!1;var f=V(l);return!!("number"==f?Nd(g)&&cl(l,g.length):"string"==f&&l in g)&&sg(g[l],h)},Kl=function(h,l,g){var f=Za(h)?xr:zC;return g&&ki(h,l,g)&&(l=void 0),f(h,jf(l))},AC=function(h,l){var g=-1,f=Nd(h)?Array(h.length):[];return nl(h,function(k,q,_r){f[++g]=l(k,q,_r)}),f},BC=function(h,l){var g=h.length;for(h.sort(l);g--;)h[g]=h[g].value;return h},CC=function(h,l,g){l=l.length?ve(l,function(k){return Za(k)?function(q){return ai(q,1===k.length?k[0]:k)}:k}):[bi];var f=-1;return l=ve(l,Yh(jf)),h=AC(h,function(k,q,_r){return{criteria:ve(l,function(_s){return _s(k)}),index:++f,value:k}}),BC(h,function(k,q){e:{for(var _r=-1,_s=k.criteria,_a=q.criteria,_l=_s.length,bh=g.length;++_r<_l;){t:{var n_=_s[_r],_A=_a[_r];if(n_!==_A){var r_=void 0!==n_,p_=null===n_,I_=n_==n_,v_=we(n_),S_=void 0!==_A,x_=null===_A,B_=_A==_A,Q_=we(_A);if(!x_&&!Q_&&!v_&&n_>_A||v_&&S_&&B_&&!x_&&!Q_||p_&&S_&&B_||!r_&&B_||!I_){n_=1;break t}if(!p_&&!v_&&!Q_&&n_<_A||Q_&&r_&&I_&&!p_&&!v_||x_&&r_&&I_||!S_&&I_||!B_){n_=-1;break t}}n_=0}if(n_){k=_r>=bh?n_:n_*("desc"==g[_r]?-1:1);break e}}k=k.index-q.index}return k})},ns=function(h,l){return vr(ur(h,l,bi),h+"")},os=ns(function(h,l){if(null==h)return[];var g=l.length;return 1<g&&ki(h,l[0],l[1])?l=[]:2<g&&ki(l[0],l[1],l[2])&&(l=[l[0]]),CC(h,Ei(l,1),[])}),ps=function(h){if(h.__esModule)return h;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(h).forEach(function(g){var f=Object.getOwnPropertyDescriptor(h,g);Object.defineProperty(l,g,f.get?f:{enumerable:!0,get:function(){return h[g]}})}),l}(yB),qs=cb(function(h,l){Object.defineProperty(l,"__esModule",{value:!0});var g=[],f=function(k,q){return new WebSocket(k,q)};l.normalClosureMessage="Normal closure",l.default=function(k,q){var _r=(q=void 0===q?{protocols:g,makeWebSocket:f}:q).protocols,_s=void 0===_r?g:_r,_a=void 0===(q=q.makeWebSocket)?f:q;return new ps.Observable(function(_l){var bh,n_=new ps.Subject,_A=_a(k,_s),r_=!1,p_=!1,I_=function(v_){if(bh)throw r_=!0,v_=Error("Web socket message factory function called more than once"),_l.error(v_),v_;return bh=v_.subscribe(function(S_){_A.send(S_)}),n_};return _A.onopen=function(){p_?(r_=!0,_A.close()):_l.next(I_)},_A.onmessage=function(v_){n_.next(v_.data)},_A.onerror=function(v_){r_=!0,_l.error(Error(v_.message))},_A.onclose=function(v_){r_||(r_=!0,p_?(_l.complete(),n_.complete()):_l.error(Error(1e3===v_.code?l.normalClosureMessage:v_.reason)))},function(){p_=!0,bh&&bh.unsubscribe(),r_||(r_=!0,_A.close())}})}});!function(h){h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")}(qs);var Vi=function(h,l,g){(void 0===g||sg(h[l],g))&&(void 0!==g||l in h)||ug(h,l,g)},Ui=function(h,l){if(("constructor"!==l||"function"!=typeof h[l])&&"__proto__"!=l)return h[l]},DC=function(h){return ns(function(l,g){var f=-1,k=g.length,q=1<k?g[k-1]:void 0,_r=2<k?g[2]:void 0;for(q=3<h.length&&"function"==typeof q?(k--,q):void 0,_r&&ki(g[0],g[1],_r)&&(q=3>k?void 0:q,k=1),l=Object(l);++f<k;)(_r=g[f])&&h(l,_r,f,q);return l})}(function(h,l,g,f){yn(h,l,g,f)}),EC=Math.floor,FC=Math.random,rs=function(h,l){return h+EC(FC()*(l-h+1))},ss=function(h){var l=h.length;return l?h[rs(0,l-1)]:void 0},GC=function(h,l){return ve(l,function(g){return h[g]})},tj=function(h){return null==h?[]:GC(h,Jd(h))},HC=function(h){return ss(tj(h))},fo=function(h){return(Za(h)?ss:HC)(h)},Cn=[],Dn=function(h,l){return new WebSocket(h,l)},IC=Math.floor;M({target:"Number",stat:!0},{isInteger:function(h){return!ha(h)&&isFinite(h)&&IC(h)===h}}),Up("from",ok,nk);var JC=function(h,l){for(var g=Array(arguments.length-1),f=0,k=2,q=!0;k<arguments.length;)g[f++]=arguments[k++];return new Promise(function(_r,_s){g[f]=function(_a){if(q)if(q=!1,_a)_s(_a);else{for(var _l=Array(arguments.length-1),bh=0;bh<_l.length;)_l[bh++]=arguments[bh];_r.apply(null,_l)}};try{h.apply(l||null,g)}catch(_a){q&&(q=!1,_s(_a))}})},KC=cb(function(h,l){l.length=function(k){var q=k.length;if(!q)return 0;for(var _r=0;1<--q%4&&"="===k.charAt(q);)++_r;return Math.ceil(3*k.length)/4-_r};var g=Array(64),f=Array(123);for(h=0;64>h;)f[g[h]=26>h?h+65:52>h?h+71:62>h?h-4:h-59|43]=h++;l.encode=function(k,q,_r){for(var _s,_a=null,_l=[],bh=0,n_=0;q<_r;){var _A=k[q++];switch(n_){case 0:_l[bh++]=g[_A>>2],_s=(3&_A)<<4,n_=1;break;case 1:_l[bh++]=g[_s|_A>>4],_s=(15&_A)<<2,n_=2;break;case 2:_l[bh++]=g[_s|_A>>6],_l[bh++]=g[63&_A],n_=0}8191<bh&&((_a||(_a=[])).push(String.fromCharCode.apply(String,_l)),bh=0)}return n_&&(_l[bh++]=g[_s],_l[bh++]=61,1===n_&&(_l[bh++]=61)),_a?(bh&&_a.push(String.fromCharCode.apply(String,_l.slice(0,bh))),_a.join("")):String.fromCharCode.apply(String,_l.slice(0,bh))},l.decode=function(k,q,_r){for(var _s,_a=_r,_l=0,bh=0;bh<k.length;){var n_=k.charCodeAt(bh++);if(61===n_&&1<_l)break;if(void 0===(n_=f[n_]))throw Error("invalid encoding");switch(_l){case 0:_s=n_,_l=1;break;case 1:q[_r++]=_s<<2|(48&n_)>>4,_s=n_,_l=2;break;case 2:q[_r++]=(15&_s)<<4|(60&n_)>>2,_s=n_,_l=3;break;case 3:q[_r++]=(3&_s)<<6|n_,_l=0}}if(1===_l)throw Error("invalid encoding");return _r-_a},l.test=function(k){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(k)}});Vg.prototype.on=function(h,l,g){return(this._listeners[h]||(this._listeners[h]=[])).push({fn:l,ctx:g||this}),this},Vg.prototype.off=function(h,l){if(void 0===h)this._listeners={};else if(void 0===l)this._listeners[h]=[];else{h=this._listeners[h];for(var g=0;g<h.length;)h[g].fn===l?h.splice(g,1):++g}return this},Vg.prototype.emit=function(h){var l=this._listeners[h];if(l){for(var g=[],f=1;f<arguments.length;)g.push(arguments[f++]);for(f=0;f<l.length;)l[f].fn.apply(l[f++].ctx,g)}return this};var LC=En(En),MC=function(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(h){}return null},NC=cb(function(h,l){l.length=function(g){for(var f,k=0,q=0;q<g.length;++q)128>(f=g.charCodeAt(q))?k+=1:2048>f?k+=2:55296==(64512&f)&&56320==(64512&g.charCodeAt(q+1))?(++q,k+=4):k+=3;return k},l.read=function(g,f,k){if(1>k-f)return"";for(var q,_r=null,_s=[],_a=0;f<k;)128>(q=g[f++])?_s[_a++]=q:191<q&&224>q?_s[_a++]=(31&q)<<6|63&g[f++]:239<q&&365>q?(q=((7&q)<<18|(63&g[f++])<<12|(63&g[f++])<<6|63&g[f++])-65536,_s[_a++]=55296+(q>>10),_s[_a++]=56320+(1023&q)):_s[_a++]=(15&q)<<12|(63&g[f++])<<6|63&g[f++],8191<_a&&((_r||(_r=[])).push(String.fromCharCode.apply(String,_s)),_a=0);return _r?(_a&&_r.push(String.fromCharCode.apply(String,_s.slice(0,_a))),_r.join("")):String.fromCharCode.apply(String,_s.slice(0,_a))},l.write=function(g,f,k){for(var q,_r,_s=k,_a=0;_a<g.length;++_a)128>(q=g.charCodeAt(_a))?f[k++]=q:(2048>q?f[k++]=q>>6|192:(55296==(64512&q)&&56320==(64512&(_r=g.charCodeAt(_a+1)))?(++_a,f[k++]=(q=65536+((1023&q)<<10)+(1023&_r))>>18|240,f[k++]=q>>12&63|128):f[k++]=q>>12|224,f[k++]=q>>6&63|128),f[k++]=63&q|128);return k-_s}}),OC=function(h,l,g){var f=g||8192,k=f>>>1,q=null,_r=f;return function(_s){return 1>_s||_s>k?h(_s):(_r+_s>f&&(q=h(f),_r=0),_s=l.call(q,_r,_r+=_s),7&_r&&(_r=1+(7|_r)),_s)}},ge=$a.zero=new $a(0,0);ge.toNumber=function(){return 0},ge.zzEncode=ge.zzDecode=function(){return this},ge.length=function(){return 1};var PC=$a.zeroHash="\0\0\0\0\0\0\0\0";$a.fromNumber=function(h){if(0===h)return ge;var l=0>h;l&&(h=-h);var g=h>>>0;return h=(h-g)/4294967296>>>0,l&&(h=~h>>>0,g=~g>>>0,4294967295<++g&&(g=0,4294967295<++h&&(h=0))),new $a(g,h)},$a.from=function(h){if("number"==typeof h)return $a.fromNumber(h);if(W.isString(h)){if(!W.Long)return $a.fromNumber(parseInt(h,10));h=W.Long.fromString(h)}return h.low||h.high?new $a(h.low>>>0,h.high>>>0):ge},$a.prototype.toNumber=function(h){if(!h&&this.hi>>>31){var l=~this.hi>>>0;return(h=1+~this.lo>>>0)||(l=l+1>>>0),-(h+4294967296*l)}return this.lo+4294967296*this.hi},$a.prototype.toLong=function(h){return W.Long?new W.Long(0|this.lo,0|this.hi,!!h):{low:0|this.lo,high:0|this.hi,unsigned:!!h}};var Ad=String.prototype.charCodeAt;$a.fromHash=function(h){return h===PC?ge:new $a((Ad.call(h,0)|Ad.call(h,1)<<8|Ad.call(h,2)<<16|Ad.call(h,3)<<24)>>>0,(Ad.call(h,4)|Ad.call(h,5)<<8|Ad.call(h,6)<<16|Ad.call(h,7)<<24)>>>0)},$a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},$a.prototype.zzEncode=function(){var h=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^h)>>>0,this.lo=(this.lo<<1^h)>>>0,this},$a.prototype.zzDecode=function(){var h=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^h)>>>0,this.hi=(this.hi>>>1^h)>>>0,this},$a.prototype.length=function(){var h=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return 0===g?0===l?16384>h?128>h?1:2:2097152>h?3:4:16384>l?128>l?5:6:2097152>l?7:8:128>g?9:10};var W=cb(function(h,l){function g(k,q,_r){for(var _s=Object.keys(q),_a=0;_a<_s.length;++_a)void 0!==k[_s[_a]]&&_r||(k[_s[_a]]=q[_s[_a]]);return k}function f(k){function q(_r,_s){if(!(this instanceof q))return new q(_r,_s);Object.defineProperty(this,"message",{get:function(){return _r}}),Error.captureStackTrace?Error.captureStackTrace(this,q):Object.defineProperty(this,"stack",{value:Error().stack||""}),_s&&g(this,_s)}return(q.prototype=Object.create(Error.prototype)).constructor=q,Object.defineProperty(q.prototype,"name",{get:function(){return k}}),q.prototype.toString=function(){return this.name+": "+this.message},q}l.asPromise=JC,l.base64=KC,l.EventEmitter=Vg,l.float=LC,l.inquire=MC,l.utf8=NC,l.pool=OC,l.LongBits=$a,l.isNode=!!(void 0!==Ka&&Ka&&Ka.process&&Ka.process.versions&&Ka.process.versions.node),l.global=l.isNode&&Ka||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ka,l.emptyArray=Object.freeze?Object.freeze([]):[],l.emptyObject=Object.freeze?Object.freeze({}):{},l.isInteger=Number.isInteger||function(k){return"number"==typeof k&&isFinite(k)&&Math.floor(k)===k},l.isString=function(k){return"string"==typeof k||k instanceof String},l.isObject=function(k){return k&&"object"===V(k)},l.isset=l.isSet=function(k,q){var _r=k[q];return!(null==_r||!k.hasOwnProperty(q))&&("object"!==V(_r)||0<(Array.isArray(_r)?_r.length:Object.keys(_r).length))},l.Buffer=function(){try{var k=l.inquire("buffer").Buffer;return k.prototype.utf8Write?k:null}catch(q){return null}}(),l._Buffer_from=null,l._Buffer_allocUnsafe=null,l.newBuffer=function(k){return"number"==typeof k?l.Buffer?l._Buffer_allocUnsafe(k):new l.Array(k):l.Buffer?l._Buffer_from(k):"undefined"==typeof Uint8Array?k:new Uint8Array(k)},l.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,l.Long=l.global.dcodeIO&&l.global.dcodeIO.Long||l.global.Long||l.inquire("long"),l.key2Re=/^true|false|0|1$/,l.key32Re=/^-?(?:0|[1-9][0-9]*)$/,l.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,l.longToHash=function(k){return k?l.LongBits.from(k).toHash():l.LongBits.zeroHash},l.longFromHash=function(k,q){return k=l.LongBits.fromHash(k),l.Long?l.Long.fromBits(k.lo,k.hi,q):k.toNumber(!!q)},l.merge=g,l.lcFirst=function(k){return k.charAt(0).toLowerCase()+k.substring(1)},l.newError=f,l.ProtocolError=f("ProtocolError"),l.oneOfGetter=function(k){for(var q={},_r=0;_r<k.length;++_r)q[k[_r]]=1;return function(){for(var _s=Object.keys(this),_a=_s.length-1;-1<_a;--_a)if(1===q[_s[_a]]&&null!=this[_s[_a]])return _s[_a]}},l.oneOfSetter=function(k){return function(q){for(var _r=0;_r<k.length;++_r)k[_r]!==q&&delete this[k[_r]]}},l.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},l._configure=function(){var k=l.Buffer;k?(l._Buffer_from=k.from!==Uint8Array.from&&k.from||function(q,_r){return new k(q,_r)},l._Buffer_allocUnsafe=k.allocUnsafe||function(q){return new k(q)}):l._Buffer_from=l._Buffer_allocUnsafe=null}}),cj=na,Ll,li=W.LongBits,ts=W.base64,us=W.utf8,vs=function(){return W.Buffer?function(){return(na.create=function(){return new Ll})()}:function(){return new na}};na.create=vs(),na.alloc=function(h){return new W.Array(h)},W.Array!==Array&&(na.alloc=W.pool(na.alloc,W.Array.prototype.subarray)),na.prototype._push=function(h,l,g){return this.tail=this.tail.next=new Kf(h,l,g),this.len+=l,this},$i.prototype=Object.create(Kf.prototype),$i.prototype.fn=function(h,l,g){for(;127<h;)l[g++]=127&h|128,h>>>=7;l[g]=h},na.prototype.uint32=function(h){return this.len+=(this.tail=this.tail.next=new $i(128>(h>>>=0)?1:16384>h?2:2097152>h?3:268435456>h?4:5,h)).len,this},na.prototype.int32=function(h){return 0>h?this._push(aj,10,li.fromNumber(h)):this.uint32(h)},na.prototype.sint32=function(h){return this.uint32((h<<1^h>>31)>>>0)},na.prototype.uint64=function(h){return h=li.from(h),this._push(aj,h.length(),h)},na.prototype.int64=na.prototype.uint64,na.prototype.sint64=function(h){return h=li.from(h).zzEncode(),this._push(aj,h.length(),h)},na.prototype.bool=function(h){return this._push(Zi,1,h?1:0)},na.prototype.fixed32=function(h){return this._push(bj,4,h>>>0)},na.prototype.sfixed32=na.prototype.fixed32,na.prototype.fixed64=function(h){return h=li.from(h),this._push(bj,4,h.lo)._push(bj,4,h.hi)},na.prototype.sfixed64=na.prototype.fixed64,na.prototype.float=function(h){return this._push(W.float.writeFloatLE,4,h)},na.prototype.double=function(h){return this._push(W.float.writeDoubleLE,8,h)};var QC=W.Array.prototype.set?function(h,l,g){l.set(h,g)}:function(h,l,g){for(var f=0;f<h.length;++f)l[g+f]=h[f]};na.prototype.bytes=function(h){var l=h.length>>>0;if(!l)return this._push(Zi,1,0);if(W.isString(h)){var g=na.alloc(l=ts.length(h));ts.decode(h,g,0),h=g}return this.uint32(l)._push(QC,l,h)},na.prototype.string=function(h){var l=us.length(h);return l?this.uint32(l)._push(us.write,l,h):this._push(Zi,1,0)},na.prototype.fork=function(){return this.states=new Nv(this),this.head=this.tail=new Kf(Yi,0,0),this.len=0,this},na.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Kf(Yi,0,0),this.len=0),this},na.prototype.ldelim=function(){var h=this.head,l=this.tail,g=this.len;return this.reset().uint32(g),g&&(this.tail.next=h.next,this.tail=l,this.len+=g),this},na.prototype.finish=function(){for(var h=this.head.next,l=this.constructor.alloc(this.len),g=0;h;)h.fn(h.val,l,g),g+=h.len,h=h.next;return l},na._configure=function(h){Ll=h,na.create=vs(),Ll._configure()},(rc.prototype=Object.create(cj.prototype)).constructor=rc,rc._configure=function(){rc.alloc=W._Buffer_allocUnsafe,rc.writeBytesBuffer=W.Buffer&&W.Buffer.prototype instanceof Uint8Array&&"set"===W.Buffer.prototype.set.name?function(h,l,g){l.set(h,g)}:function(h,l,g){if(h.copy)h.copy(l,g,0,h.length);else for(var f=0;f<h.length;)l[g++]=h[f++]}},rc.prototype.bytes=function(h){W.isString(h)&&(h=W._Buffer_from(h,"base64"));var l=h.length>>>0;return this.uint32(l),l&&this._push(rc.writeBytesBuffer,l,h),this},rc.prototype.string=function(h){var l=W.Buffer.byteLength(h);return this.uint32(l),l&&this._push(Ov,l,h),this},rc._configure();var ej=Qa,Ml,Jn=W.LongBits,RC=W.utf8,ws="undefined"!=typeof Uint8Array?function(h){if(h instanceof Uint8Array||Array.isArray(h))return new Qa(h);throw Error("illegal buffer")}:function(h){if(Array.isArray(h))return new Qa(h);throw Error("illegal buffer")},xs=function(){return W.Buffer?function(h){return(Qa.create=function(l){return W.Buffer.isBuffer(l)?new Ml(l):ws(l)})(h)}:ws};Qa.create=xs(),Qa.prototype._slice=W.Array.prototype.subarray||W.Array.prototype.slice,Qa.prototype.uint32=function(){var h=4294967295;return function(){if(h=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++]||(h=(h|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])||(h=(h|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])||(h=(h|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])||(h=(h|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++]))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,dc(this,10);return h}}(),Qa.prototype.int32=function(){return 0|this.uint32()},Qa.prototype.sint32=function(){var h=this.uint32();return h>>>1^-(1&h)|0},Qa.prototype.bool=function(){return 0!==this.uint32()},Qa.prototype.fixed32=function(){if(this.pos+4>this.len)throw dc(this,4);return Wg(this.buf,this.pos+=4)},Qa.prototype.sfixed32=function(){if(this.pos+4>this.len)throw dc(this,4);return 0|Wg(this.buf,this.pos+=4)},Qa.prototype.float=function(){if(this.pos+4>this.len)throw dc(this,4);var h=W.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},Qa.prototype.double=function(){if(this.pos+8>this.len)throw dc(this,4);var h=W.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},Qa.prototype.bytes=function(){var h=this.uint32(),l=this.pos,g=this.pos+h;if(g>this.len)throw dc(this,h);return this.pos+=h,Array.isArray(this.buf)?this.buf.slice(l,g):l===g?new this.buf.constructor(0):this._slice.call(this.buf,l,g)},Qa.prototype.string=function(){var h=this.bytes();return RC.read(h,0,h.length)},Qa.prototype.skip=function(h){if("number"==typeof h){if(this.pos+h>this.len)throw dc(this,h);this.pos+=h}else do{if(this.pos>=this.len)throw dc(this)}while(128&this.buf[this.pos++]);return this},Qa.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(h=7&this.uint32());)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},Qa._configure=function(h){Ml=h,Qa.create=xs(),Ml._configure();var l=W.Long?"toLong":"toNumber";W.merge(Qa.prototype,{int64:function(){return dj.call(this)[l](!1)},uint64:function(){return dj.call(this)[l](!0)},sint64:function(){return dj.call(this).zzDecode()[l](!1)},fixed64:function(){return Kn.call(this)[l](!0)},sfixed64:function(){return Kn.call(this)[l](!1)}})},(Od.prototype=Object.create(ej.prototype)).constructor=Od,Od._configure=function(){W.Buffer&&(Od.prototype._slice=W.Buffer.prototype.slice)},Od.prototype.string=function(){var h=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+h,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+h,this.len))},Od._configure(),(Lf.prototype=Object.create(W.EventEmitter.prototype)).constructor=Lf,Lf.prototype.rpcCall=function h(l,g,f,k,q){if(!k)throw TypeError("request must be specified");var _r=this;if(!q)return W.asPromise(h,_r,l,g,f,k);if(_r.rpcImpl)try{return _r.rpcImpl(l,g[_r.requestDelimited?"encodeDelimited":"encode"](k).finish(),function(_s,_a){if(_s)return _r.emit("error",_s,l),q(_s);if(null!==_a){if(!(_a instanceof f))try{_a=f[_r.responseDelimited?"decodeDelimited":"decode"](_a)}catch(_l){return _r.emit("error",_l,l),q(_l)}return _r.emit("data",_a,l),q(null,_a)}_r.end(!0)})}catch(_s){_r.emit("error",_s,l),setTimeout(function(){q(_s)},0)}else setTimeout(function(){q(Error("already ended"))},0)},Lf.prototype.end=function(h){return this.rpcImpl&&(h||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var SC=cb(function(h,l){l.Service=Lf}),TC={},nc=cb(function(h,l){function g(){f.util._configure(),f.Writer._configure(f.BufferWriter),f.Reader._configure(f.BufferReader)}var f=l;f.build="minimal",f.Writer=cj,f.BufferWriter=rc,f.Reader=ej,f.BufferReader=Od,f.util=W,f.rpc=SC,f.roots=TC,f.configure=g,g()});nc.util.Long=U,nc.configure();var u=nc.Reader,N=nc.Writer,r=nc.util,t=nc.roots.default||(nc.roots.default={}),UC=t.URI=function(){var h={},l=Object.create(h);return l[h[0]="Unknown"]=0,l[h[1]="PingUri"]=1,l[h[2]="PongUri"]=2,l[h[11]="UserJoinUri"]=11,l[h[12]="UserRespUri"]=12,l[h[21]="UserQuitUri"]=21,l[h[22]="UserDropUri"]=22,l[h[31]="GroupEnterUri"]=31,l[h[32]="GroupLeaveUri"]=32,l[h[33]="GroupReplyUri"]=33,l[h[36]="GroupEnterNoticeUri"]=36,l[h[37]="GroupLeaveNoticeUri"]=37,l[h[38]="GroupEventNoticeUri"]=38,l[h[39]="GroupCountNoticeUri"]=39,l[h[41]="UserStatusListUri"]=41,l[h[42]="UserStatusResultUri"]=42,l[h[51]="GroupStatusListUri"]=51,l[h[52]="GroupStatusResultUri"]=52,l[h[55]="GroupAllUsersListUri"]=55,l[h[56]="GroupAllUsersResultUri"]=56,l[h[100]="MessageUri"]=100,l[h[101]="AckUri"]=101,l[h[115]="FileUploadIndexGetUri"]=115,l[h[116]="FileUploadIndexRetUri"]=116,l[h[117]="FileUploadIndexSetUri"]=117,l[h[118]="FileUploadIndexFinUri"]=118,l[h[119]="FileUploadIndexErrUri"]=119,l[h[125]="FileDownloadIndexGetUri"]=125,l[h[126]="FileDownloadIndexRetUri"]=126,l[h[127]="FileDownloadIndexErrUri"]=127,l[h[201]="UserJoinNoticeUri"]=201,l[h[202]="UserQuitNoticeUri"]=202,l[h[203]="UserWaitNoticeUri"]=203,l[h[301]="UserAttributeGetUri"]=301,l[h[302]="UserAttributeRetUri"]=302,l[h[303]="UserAttributeSetUri"]=303,l[h[304]="UserAttributeModUri"]=304,l[h[305]="UserAttributeDelUri"]=305,l[h[307]="UserAttributeRspUri"]=307,l[h[308]="UserAttributeErrUri"]=308,l[h[311]="UserAttributeKeysGetUri"]=311,l[h[312]="UserAttributeKeysRetUri"]=312,l[h[351]="GroupAttributeGetUri"]=351,l[h[352]="GroupAttributeRetUri"]=352,l[h[353]="GroupAttributeSetUri"]=353,l[h[354]="GroupAttributeModUri"]=354,l[h[355]="GroupAttributeDelUri"]=355,l[h[356]="GroupAttributeAltUri"]=356,l[h[357]="GroupAttributeRspUri"]=357,l[h[358]="GroupAttributeErrUri"]=358,l[h[361]="GroupAttributeKeysGetUri"]=361,l[h[362]="GroupAttributeKeysRetUri"]=362,l[h[401]="SubscribeUserStatusUri"]=401,l[h[402]="UnsubscribeUserStatusUri"]=402,l[h[499]="SubscribeResponseUri"]=499,l}(),mi=t.Wrapper=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.uri=0,h.prototype.data=r.newBuffer([]),h.encode=function(l,g){return g||(g=N.create()),null!=l.uri&&Object.hasOwnProperty.call(l,"uri")&&g.uint32(8).int32(l.uri),null!=l.data&&Object.hasOwnProperty.call(l,"data")&&g.uint32(18).bytes(l.data),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.Wrapper;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.uri=l.int32();break;case 2:f.data=l.bytes();break;default:l.skipType(7&k)}}return f},h}(),VC=t.Ping=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.ms&&Object.hasOwnProperty.call(l,"ms")&&g.uint32(16).uint64(l.ms),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.Ping;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.ms=l.uint64();break;default:l.skipType(7&k)}}return f},h}(),WC=t.Pong=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.ms&&Object.hasOwnProperty.call(l,"ms")&&g.uint32(16).uint64(l.ms),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.Pong;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.ms=l.uint64();break;default:l.skipType(7&k)}}return f},h}(),XC=t.UserJoin=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.opt=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.ticket="",h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.opt&&Object.hasOwnProperty.call(l,"opt")&&g.uint32(16).uint64(l.opt),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(24).uint64(l.instance),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(34).string(l.account),null!=l.ticket&&Object.hasOwnProperty.call(l,"ticket")&&g.uint32(42).string(l.ticket),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserJoin;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.opt=l.uint64();break;case 3:f.instance=l.uint64();break;case 4:f.account=l.string();break;case 5:f.ticket=l.string();break;default:l.skipType(7&k)}}return f},h}(),YC=t.UserResp=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(24).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserResp;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;case 3:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),ZC=t.UserQuit=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.encode=function(l,g){return g||(g=N.create()),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserQuit;l.pos<g;){var k=l.uint32();l.skipType(7&k)}return f},h}(),$C=t.UserDrop=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(8).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserDrop;l.pos<g;){var k=l.uint32();k>>>3==1?f.code=l.uint32():l.skipType(7&k)}return f},h}(),aD=t.GroupEnter=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupEnter;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;default:l.skipType(7&k)}}return f},h}(),bD=t.GroupLeave=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.account="",h.encode=function(l,g){return g||(g=N.create()),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(10).string(l.account),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupLeave;l.pos<g;){var k=l.uint32();k>>>3==1?f.account=l.string():l.skipType(7&k)}return f},h}(),cD=t.GroupReply=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(24).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupReply;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;case 3:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),ys=t.GroupLeaveNotice=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.user="",h.prototype.group="",h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.size=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.user&&Object.hasOwnProperty.call(l,"user")&&g.uint32(18).string(l.user),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(26).string(l.group),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(32).uint64(l.instance),null!=l.size&&Object.hasOwnProperty.call(l,"size")&&g.uint32(40).uint32(l.size),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupLeaveNotice;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.user=l.string();break;case 3:f.group=l.string();break;case 4:f.instance=l.uint64();break;case 5:f.size=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),zs=t.GroupEnterNotice=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.user="",h.prototype.group="",h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.size=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.user&&Object.hasOwnProperty.call(l,"user")&&g.uint32(18).string(l.user),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(26).string(l.group),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(32).uint64(l.instance),null!=l.size&&Object.hasOwnProperty.call(l,"size")&&g.uint32(40).uint32(l.size),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupEnterNotice;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.user=l.string();break;case 3:f.group=l.string();break;case 4:f.instance=l.uint64();break;case 5:f.size=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),As=t.Message=function(){function h(l){if(this.MiscMap={},l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.dialogue=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.sequence=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.options=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.src="",h.prototype.dst="",h.prototype.payload=r.newBuffer([]),h.prototype.MiscMap=r.emptyObject,h.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,h.encode=function(l,g){if(g||(g=N.create()),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(8).uint64(l.instance),null!=l.dialogue&&Object.hasOwnProperty.call(l,"dialogue")&&g.uint32(16).uint64(l.dialogue),null!=l.sequence&&Object.hasOwnProperty.call(l,"sequence")&&g.uint32(24).uint64(l.sequence),null!=l.options&&Object.hasOwnProperty.call(l,"options")&&g.uint32(32).uint64(l.options),null!=l.src&&Object.hasOwnProperty.call(l,"src")&&g.uint32(42).string(l.src),null!=l.dst&&Object.hasOwnProperty.call(l,"dst")&&g.uint32(50).string(l.dst),null!=l.payload&&Object.hasOwnProperty.call(l,"payload")&&g.uint32(58).bytes(l.payload),null!=l.MiscMap&&Object.hasOwnProperty.call(l,"MiscMap"))for(var f=Object.keys(l.MiscMap),k=0;k<f.length;++k)g.uint32(66).fork().uint32(10).string(f[k]).uint32(18).bytes(l.MiscMap[f[k]]).ldelim();return null!=l.ms&&Object.hasOwnProperty.call(l,"ms")&&g.uint32(72).uint64(l.ms),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f,k,q=new t.Message;l.pos<g;)switch(f=l.uint32(),f>>>3){case 1:q.instance=l.uint64();break;case 2:q.dialogue=l.uint64();break;case 3:q.sequence=l.uint64();break;case 4:q.options=l.uint64();break;case 5:q.src=l.string();break;case 6:q.dst=l.string();break;case 7:q.payload=l.bytes();break;case 8:q.MiscMap===r.emptyObject&&(q.MiscMap={});var _r=l.uint32()+l.pos;for(f="",k=[];l.pos<_r;){var _s=l.uint32();switch(_s>>>3){case 1:f=l.string();break;case 2:k=l.bytes();break;default:l.skipType(7&_s)}}q.MiscMap[f]=k;break;case 9:q.ms=l.uint64();break;default:l.skipType(7&f)}return q},h}(),Bs=t.Ack=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.dialogue=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.sequence=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(8).uint64(l.instance),null!=l.dialogue&&Object.hasOwnProperty.call(l,"dialogue")&&g.uint32(16).uint64(l.dialogue),null!=l.sequence&&Object.hasOwnProperty.call(l,"sequence")&&g.uint32(24).uint64(l.sequence),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(32).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.Ack;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.instance=l.uint64();break;case 2:f.dialogue=l.uint64();break;case 3:f.sequence=l.uint64();break;case 4:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),dD=t.FileUploadIndexGet=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.hash=r.newBuffer([]),h.prototype.size=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.hash&&Object.hasOwnProperty.call(l,"hash")&&g.uint32(18).bytes(l.hash),null!=l.size&&Object.hasOwnProperty.call(l,"size")&&g.uint32(24).uint32(l.size),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileUploadIndexGet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.hash=l.bytes();break;case 3:f.size=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),eD=t.FileUploadIndexRet=function(){function h(l){if(this.servers=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.unit=0,h.prototype.servers=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.unit&&Object.hasOwnProperty.call(l,"unit")&&g.uint32(16).uint32(l.unit),null!=l.servers&&l.servers.length){g.uint32(26).fork();for(var f=0;f<l.servers.length;++f)g.uint32(l.servers[f]);g.ldelim()}return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileUploadIndexRet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.unit=l.uint32();break;case 3:if(f.servers&&f.servers.length||(f.servers=[]),2==(7&k))for(k=l.uint32()+l.pos;l.pos<k;)f.servers.push(l.uint32());else f.servers.push(l.uint32());break;default:l.skipType(7&k)}}return f},h}(),fD=t.FileUploadIndexSet=function(){function h(l){if(this.servers=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.hash=r.newBuffer([]),h.prototype.unit=0,h.prototype.servers=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.hash&&Object.hasOwnProperty.call(l,"hash")&&g.uint32(18).bytes(l.hash),null!=l.unit&&Object.hasOwnProperty.call(l,"unit")&&g.uint32(24).uint32(l.unit),null!=l.servers&&l.servers.length){g.uint32(34).fork();for(var f=0;f<l.servers.length;++f)g.uint32(l.servers[f]);g.ldelim()}return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileUploadIndexSet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.hash=l.bytes();break;case 3:f.unit=l.uint32();break;case 4:if(f.servers&&f.servers.length||(f.servers=[]),2==(7&k))for(k=l.uint32()+l.pos;l.pos<k;)f.servers.push(l.uint32());else f.servers.push(l.uint32());break;default:l.skipType(7&k)}}return f},h}(),gD=t.FileUploadIndexFin=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.zone=0,h.prototype.unit=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.zone&&Object.hasOwnProperty.call(l,"zone")&&g.uint32(16).uint32(l.zone),null!=l.unit&&Object.hasOwnProperty.call(l,"unit")&&g.uint32(24).uint32(l.unit),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileUploadIndexFin;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.zone=l.uint32();break;case 3:f.unit=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),hD=t.FileUploadIndexErr=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(16).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileUploadIndexErr;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),iD=t.FileDownloadIndexGet=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.zone=0,h.prototype.hash=r.newBuffer([]),h.prototype.size=0,h.prototype.unit=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.zone&&Object.hasOwnProperty.call(l,"zone")&&g.uint32(16).uint32(l.zone),null!=l.hash&&Object.hasOwnProperty.call(l,"hash")&&g.uint32(26).bytes(l.hash),null!=l.size&&Object.hasOwnProperty.call(l,"size")&&g.uint32(32).uint32(l.size),null!=l.unit&&Object.hasOwnProperty.call(l,"unit")&&g.uint32(40).uint32(l.unit),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileDownloadIndexGet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.zone=l.uint32();break;case 3:f.hash=l.bytes();break;case 4:f.size=l.uint32();break;case 5:f.unit=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),jD=t.FileDownloadIndexRet=function(){function h(l){if(this.servers=[],this.backups=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.unit=0,h.prototype.zone=0,h.prototype.servers=r.emptyArray,h.prototype.backups=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.unit&&Object.hasOwnProperty.call(l,"unit")&&g.uint32(16).uint32(l.unit),null!=l.zone&&Object.hasOwnProperty.call(l,"zone")&&g.uint32(24).uint32(l.zone),null!=l.servers&&l.servers.length){g.uint32(34).fork();for(var f=0;f<l.servers.length;++f)g.uint32(l.servers[f]);g.ldelim()}if(null!=l.backups&&l.backups.length){for(g.uint32(42).fork(),f=0;f<l.backups.length;++f)g.uint32(l.backups[f]);g.ldelim()}return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileDownloadIndexRet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.unit=l.uint32();break;case 3:f.zone=l.uint32();break;case 4:if(f.servers&&f.servers.length||(f.servers=[]),2==(7&k))for(k=l.uint32()+l.pos;l.pos<k;)f.servers.push(l.uint32());else f.servers.push(l.uint32());break;case 5:if(f.backups&&f.backups.length||(f.backups=[]),2==(7&k))for(k=l.uint32()+l.pos;l.pos<k;)f.backups.push(l.uint32());else f.backups.push(l.uint32());break;default:l.skipType(7&k)}}return f},h}(),kD=t.FileDownloadIndexErr=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(16).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.FileDownloadIndexErr;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),lD=t.GroupAllUsersList=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.pageSize=0,h.prototype.pageNumber=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.pageSize&&Object.hasOwnProperty.call(l,"pageSize")&&g.uint32(24).uint32(l.pageSize),null!=l.pageNumber&&Object.hasOwnProperty.call(l,"pageNumber")&&g.uint32(32).uint32(l.pageNumber),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAllUsersList;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.pageSize=l.uint32();break;case 4:f.pageNumber=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),mD=t.GroupAllUsersResult=function(){function h(l){if(this.memberInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.totalSize=0,h.prototype.pageSize=0,h.prototype.pageNumber=0,h.prototype.memberInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.totalSize&&Object.hasOwnProperty.call(l,"totalSize")&&g.uint32(24).uint32(l.totalSize),null!=l.pageSize&&Object.hasOwnProperty.call(l,"pageSize")&&g.uint32(32).uint32(l.pageSize),null!=l.pageNumber&&Object.hasOwnProperty.call(l,"pageNumber")&&g.uint32(40).uint32(l.pageNumber),null!=l.memberInfos&&l.memberInfos.length)for(var f=0;f<l.memberInfos.length;++f)t.GroupAllUsersResult.MemberInfo.encode(l.memberInfos[f],g.uint32(50).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAllUsersResult;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.totalSize=l.uint32();break;case 4:f.pageSize=l.uint32();break;case 5:f.pageNumber=l.uint32();break;case 6:f.memberInfos&&f.memberInfos.length||(f.memberInfos=[]),f.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.MemberInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.account="",l.prototype.ts=0,l.encode=function(g,f){return f||(f=N.create()),null!=g.account&&Object.hasOwnProperty.call(g,"account")&&f.uint32(10).string(g.account),null!=g.ts&&Object.hasOwnProperty.call(g,"ts")&&f.uint32(16).uint32(g.ts),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.GroupAllUsersResult.MemberInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.account=g.string();break;case 2:k.ts=g.uint32();break;default:g.skipType(7&q)}}return k},l}(),h}(),nD=t.UserStatusList=function(){function h(l){if(this.users=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.users=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.users&&l.users.length)for(var f=0;f<l.users.length;++f)g.uint32(18).string(l.users[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserStatusList;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.users&&f.users.length||(f.users=[]),f.users.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),oD=t.UserStatusResult=function(){function h(l){if(this.userInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.userInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.userInfos&&l.userInfos.length)for(var f=0;f<l.userInfos.length;++f)t.UserStatusResult.UserStatusInfo.encode(l.userInfos[f],g.uint32(18).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserStatusResult;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.userInfos&&f.userInfos.length||(f.userInfos=[]),f.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.UserStatusInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.account="",l.prototype.ts=0,l.encode=function(g,f){return f||(f=N.create()),null!=g.account&&Object.hasOwnProperty.call(g,"account")&&f.uint32(10).string(g.account),null!=g.ts&&Object.hasOwnProperty.call(g,"ts")&&f.uint32(16).uint32(g.ts),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.UserStatusResult.UserStatusInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.account=g.string();break;case 2:k.ts=g.uint32();break;default:g.skipType(7&q)}}return k},l}(),h}(),pD=t.UserAttributeGet=function(){function h(l){if(this.attributes=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.attributes=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),null!=l.attributes&&l.attributes.length)for(var f=0;f<l.attributes.length;++f)g.uint32(26).string(l.attributes[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeGet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;case 3:f.attributes&&f.attributes.length||(f.attributes=[]),f.attributes.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),qD=t.UserAttributeRet=function(){function h(l){if(this.attributeInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.attributeInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.attributeInfos&&l.attributeInfos.length)for(var f=0;f<l.attributeInfos.length;++f)t.UserAttributeRet.AttributeInfo.encode(l.attributeInfos[f],g.uint32(18).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeRet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.attributeInfos&&f.attributeInfos.length||(f.attributeInfos=[]),f.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.UserAttributeRet.AttributeInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;default:g.skipType(7&q)}}return k},l}(),h}(),rD=t.UserAttributeSet=function(){function h(l){if(this.attributeInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.attributeInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),null!=l.attributeInfos&&l.attributeInfos.length)for(var f=0;f<l.attributeInfos.length;++f)t.UserAttributeSet.AttributeInfo.encode(l.attributeInfos[f],g.uint32(26).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeSet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;case 3:f.attributeInfos&&f.attributeInfos.length||(f.attributeInfos=[]),f.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.UserAttributeSet.AttributeInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;default:g.skipType(7&q)}}return k},l}(),h}(),sD=t.UserAttributeMod=function(){function h(l){if(this.attributeInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.attributeInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),null!=l.attributeInfos&&l.attributeInfos.length)for(var f=0;f<l.attributeInfos.length;++f)t.UserAttributeMod.AttributeInfo.encode(l.attributeInfos[f],g.uint32(26).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeMod;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;case 3:f.attributeInfos&&f.attributeInfos.length||(f.attributeInfos=[]),f.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.UserAttributeMod.AttributeInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;default:g.skipType(7&q)}}return k},l}(),h}(),tD=t.UserAttributeDel=function(){function h(l){if(this.attributes=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.prototype.attributes=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),null!=l.attributes&&l.attributes.length)for(var f=0;f<l.attributes.length;++f)g.uint32(26).string(l.attributes[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeDel;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;case 3:f.attributes&&f.attributes.length||(f.attributes=[]),f.attributes.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),uD=t.UserAttributeErr=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(16).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeErr;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),vD=t.UserAttributeKeysGet=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.account="",h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.account&&Object.hasOwnProperty.call(l,"account")&&g.uint32(18).string(l.account),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeKeysGet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.account=l.string();break;default:l.skipType(7&k)}}return f},h}(),wD=t.UserAttributeKeysRet=function(){function h(l){if(this.keys=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.keys=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.keys&&l.keys.length)for(var f=0;f<l.keys.length;++f)g.uint32(18).string(l.keys[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeKeysRet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.keys&&f.keys.length||(f.keys=[]),f.keys.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),xD=t.UserAttributeRsp=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserAttributeRsp;l.pos<g;){var k=l.uint32();k>>>3==1?f.seq=l.uint64():l.skipType(7&k)}return f},h}(),yD=t.GroupStatusList=function(){function h(l){if(this.groups=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.groups=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.groups&&l.groups.length)for(var f=0;f<l.groups.length;++f)g.uint32(18).string(l.groups[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupStatusList;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.groups&&f.groups.length||(f.groups=[]),f.groups.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),zD=t.GroupStatusResult=function(){function h(l){if(this.groupInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.groupInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.groupInfos&&l.groupInfos.length)for(var f=0;f<l.groupInfos.length;++f)t.GroupStatusResult.GroupInfo.encode(l.groupInfos[f],g.uint32(18).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupStatusResult;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.groupInfos&&f.groupInfos.length||(f.groupInfos=[]),f.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.GroupInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.group="",l.prototype.memberCount=0,l.encode=function(g,f){return f||(f=N.create()),null!=g.group&&Object.hasOwnProperty.call(g,"group")&&f.uint32(10).string(g.group),null!=g.memberCount&&Object.hasOwnProperty.call(g,"memberCount")&&f.uint32(16).uint32(g.memberCount),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.GroupStatusResult.GroupInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.group=g.string();break;case 2:k.memberCount=g.uint32();break;default:g.skipType(7&q)}}return k},l}(),h}(),AD=t.GroupCountNotice=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.size=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(8).uint64(l.instance),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(16).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(26).string(l.group),null!=l.size&&Object.hasOwnProperty.call(l,"size")&&g.uint32(32).uint32(l.size),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupCountNotice;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.instance=l.uint64();break;case 2:f.seq=l.uint64();break;case 3:f.group=l.string();break;case 4:f.size=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),BD=t.GroupAttributeGet=function(){function h(l){if(this.attributes=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.attributes=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.attributes&&l.attributes.length)for(var f=0;f<l.attributes.length;++f)g.uint32(26).string(l.attributes[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeGet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.attributes&&f.attributes.length||(f.attributes=[]),f.attributes.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),CD=t.GroupAttributeRet=function(){function h(l){if(this.attributeMaps=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.attributeMaps=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.attributeMaps&&l.attributeMaps.length)for(var f=0;f<l.attributeMaps.length;++f)t.GroupAttributeRet.AttributeMap.encode(l.attributeMaps[f],g.uint32(18).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeRet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.attributeMaps&&f.attributeMaps.length||(f.attributeMaps=[]),f.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeMap=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.prototype.origin="",l.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),null!=g.origin&&Object.hasOwnProperty.call(g,"origin")&&f.uint32(26).string(g.origin),null!=g.ms&&Object.hasOwnProperty.call(g,"ms")&&f.uint32(32).uint64(g.ms),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.GroupAttributeRet.AttributeMap;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;case 3:k.origin=g.string();break;case 4:k.ms=g.uint64();break;default:g.skipType(7&q)}}return k},l}(),h}(),DD=t.GroupAttributeSet=function(){function h(l){if(this.attributeInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.broadcast=!1,h.prototype.attributeInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.broadcast&&Object.hasOwnProperty.call(l,"broadcast")&&g.uint32(24).bool(l.broadcast),null!=l.attributeInfos&&l.attributeInfos.length)for(var f=0;f<l.attributeInfos.length;++f)t.GroupAttributeSet.AttributeInfo.encode(l.attributeInfos[f],g.uint32(34).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeSet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.broadcast=l.bool();break;case 4:f.attributeInfos&&f.attributeInfos.length||(f.attributeInfos=[]),f.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.GroupAttributeSet.AttributeInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;default:g.skipType(7&q)}}return k},l}(),h}(),ED=t.GroupAttributeMod=function(){function h(l){if(this.attributeInfos=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.broadcast=!1,h.prototype.attributeInfos=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.broadcast&&Object.hasOwnProperty.call(l,"broadcast")&&g.uint32(24).bool(l.broadcast),null!=l.attributeInfos&&l.attributeInfos.length)for(var f=0;f<l.attributeInfos.length;++f)t.GroupAttributeMod.AttributeInfo.encode(l.attributeInfos[f],g.uint32(34).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeMod;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.broadcast=l.bool();break;case 4:f.attributeInfos&&f.attributeInfos.length||(f.attributeInfos=[]),f.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeInfo=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.GroupAttributeMod.AttributeInfo;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;default:g.skipType(7&q)}}return k},l}(),h}(),FD=t.GroupAttributeDel=function(){function h(l){if(this.attributes=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.broadcast=!1,h.prototype.attributes=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.broadcast&&Object.hasOwnProperty.call(l,"broadcast")&&g.uint32(24).bool(l.broadcast),null!=l.attributes&&l.attributes.length)for(var f=0;f<l.attributes.length;++f)g.uint32(34).string(l.attributes[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeDel;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.broadcast=l.bool();break;case 4:f.attributes&&f.attributes.length||(f.attributes=[]),f.attributes.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),GD=t.GroupAttributeAlt=function(){function h(l){if(this.attributeMaps=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.attributeMaps=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(24).uint64(l.instance),null!=l.attributeMaps&&l.attributeMaps.length)for(var f=0;f<l.attributeMaps.length;++f)t.GroupAttributeAlt.AttributeMap.encode(l.attributeMaps[f],g.uint32(34).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeAlt;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;case 3:f.instance=l.uint64();break;case 4:f.attributeMaps&&f.attributeMaps.length||(f.attributeMaps=[]),f.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.AttributeMap=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.key="",l.prototype.value="",l.prototype.origin="",l.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,l.encode=function(g,f){return f||(f=N.create()),null!=g.key&&Object.hasOwnProperty.call(g,"key")&&f.uint32(10).string(g.key),null!=g.value&&Object.hasOwnProperty.call(g,"value")&&f.uint32(18).string(g.value),null!=g.origin&&Object.hasOwnProperty.call(g,"origin")&&f.uint32(26).string(g.origin),null!=g.ms&&Object.hasOwnProperty.call(g,"ms")&&f.uint32(32).uint64(g.ms),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.GroupAttributeAlt.AttributeMap;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.key=g.string();break;case 2:k.value=g.string();break;case 3:k.origin=g.string();break;case 4:k.ms=g.uint64();break;default:g.skipType(7&q)}}return k},l}(),h}(),HD=t.GroupAttributeRsp=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeRsp;l.pos<g;){var k=l.uint32();k>>>3==1?f.seq=l.uint64():l.skipType(7&k)}return f},h}(),ID=t.GroupAttributeErr=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.code=0,h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(16).uint32(l.code),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeErr;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.code=l.uint32();break;default:l.skipType(7&k)}}return f},h}(),JD=t.GroupAttributeKeysGet=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.group="",h.encode=function(l,g){return g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.group&&Object.hasOwnProperty.call(l,"group")&&g.uint32(18).string(l.group),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeKeysGet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.group=l.string();break;default:l.skipType(7&k)}}return f},h}(),KD=t.GroupAttributeKeysRet=function(){function h(l){if(this.keys=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.keys=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.keys&&l.keys.length)for(var f=0;f<l.keys.length;++f)g.uint32(18).string(l.keys[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.GroupAttributeKeysRet;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.keys&&f.keys.length||(f.keys=[]),f.keys.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),LD=t.SubscribeUserStatus=function(){function h(l){if(this.users=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.users=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.users&&l.users.length)for(var f=0;f<l.users.length;++f)g.uint32(18).string(l.users[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.SubscribeUserStatus;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.users&&f.users.length||(f.users=[]),f.users.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),MD=t.UnsubscribeUserStatus=function(){function h(l){if(this.users=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.users=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.users&&l.users.length)for(var f=0;f<l.users.length;++f)g.uint32(18).string(l.users[f]);return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UnsubscribeUserStatus;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.users&&f.users.length||(f.users=[]),f.users.push(l.string());break;default:l.skipType(7&k)}}return f},h}(),ND=t.UserJoinNotice=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.user="",h.encode=function(l,g){return g||(g=N.create()),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(8).uint64(l.instance),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(16).uint64(l.seq),null!=l.user&&Object.hasOwnProperty.call(l,"user")&&g.uint32(26).string(l.user),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserJoinNotice;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.instance=l.uint64();break;case 2:f.seq=l.uint64();break;case 3:f.user=l.string();break;default:l.skipType(7&k)}}return f},h}(),OD=t.UserQuitNotice=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.user="",h.encode=function(l,g){return g||(g=N.create()),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(8).uint64(l.instance),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(16).uint64(l.seq),null!=l.user&&Object.hasOwnProperty.call(l,"user")&&g.uint32(26).string(l.user),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserQuitNotice;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.instance=l.uint64();break;case 2:f.seq=l.uint64();break;case 3:f.user=l.string();break;default:l.skipType(7&k)}}return f},h}(),PD=t.UserWaitNotice=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.user="",h.encode=function(l,g){return g||(g=N.create()),null!=l.instance&&Object.hasOwnProperty.call(l,"instance")&&g.uint32(8).uint64(l.instance),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(16).uint64(l.seq),null!=l.user&&Object.hasOwnProperty.call(l,"user")&&g.uint32(26).string(l.user),g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.UserWaitNotice;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.instance=l.uint64();break;case 2:f.seq=l.uint64();break;case 3:f.user=l.string();break;default:l.skipType(7&k)}}return f},h}(),QD=t.SubscribeResponse=function(){function h(l){if(this.errors=[],l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,h.prototype.errors=r.emptyArray,h.encode=function(l,g){if(g||(g=N.create()),null!=l.seq&&Object.hasOwnProperty.call(l,"seq")&&g.uint32(8).uint64(l.seq),null!=l.errors&&l.errors.length)for(var f=0;f<l.errors.length;++f)t.SubscribeResponse.SubscribeErrorsType.encode(l.errors[f],g.uint32(18).fork()).ldelim();return g},h.decode=function(l,g){l instanceof u||(l=u.create(l)),g=void 0===g?l.len:l.pos+g;for(var f=new t.SubscribeResponse;l.pos<g;){var k=l.uint32();switch(k>>>3){case 1:f.seq=l.uint64();break;case 2:f.errors&&f.errors.length||(f.errors=[]),f.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(l,l.uint32()));break;default:l.skipType(7&k)}}return f},h.SubscribeErrorsType=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.account="",l.prototype.code=0,l.encode=function(g,f){return f||(f=N.create()),null!=g.account&&Object.hasOwnProperty.call(g,"account")&&f.uint32(10).string(g.account),null!=g.code&&Object.hasOwnProperty.call(g,"code")&&f.uint32(16).uint32(g.code),f},l.decode=function(g,f){g instanceof u||(g=u.create(g)),f=void 0===f?g.len:g.pos+f;for(var k=new t.SubscribeResponse.SubscribeErrorsType;g.pos<f;){var q=g.uint32();switch(q>>>3){case 1:k.account=g.string();break;case 2:k.code=g.uint32();break;default:g.skipType(7&q)}}return k},l}(),h}(),RD=Object.freeze({__proto__:null,URI:UC,Wrapper:mi,Ping:VC,Pong:WC,UserJoin:XC,UserResp:YC,UserQuit:ZC,UserDrop:$C,GroupEnter:aD,GroupLeave:bD,GroupReply:cD,GroupLeaveNotice:ys,GroupEnterNotice:zs,Message:As,Ack:Bs,FileUploadIndexGet:dD,FileUploadIndexRet:eD,FileUploadIndexSet:fD,FileUploadIndexFin:gD,FileUploadIndexErr:hD,FileDownloadIndexGet:iD,FileDownloadIndexRet:jD,FileDownloadIndexErr:kD,GroupAllUsersList:lD,GroupAllUsersResult:mD,UserStatusList:nD,UserStatusResult:oD,UserAttributeGet:pD,UserAttributeRet:qD,UserAttributeSet:rD,UserAttributeMod:sD,UserAttributeDel:tD,UserAttributeErr:uD,UserAttributeKeysGet:vD,UserAttributeKeysRet:wD,UserAttributeRsp:xD,GroupStatusList:yD,GroupStatusResult:zD,GroupCountNotice:AD,GroupAttributeGet:BD,GroupAttributeRet:CD,GroupAttributeSet:DD,GroupAttributeMod:ED,GroupAttributeDel:FD,GroupAttributeAlt:GD,GroupAttributeRsp:HD,GroupAttributeErr:ID,GroupAttributeKeysGet:JD,GroupAttributeKeysRet:KD,SubscribeUserStatus:LD,UnsubscribeUserStatus:MD,UserJoinNotice:ND,UserQuitNotice:OD,UserWaitNotice:PD,SubscribeResponse:QD,default:t}),SD=Math.ceil,Cs=function(h){return function(l,g,f){var k=(l=String(mb(l))).length;return f=void 0===f?" ":String(f),(g=va(g))<=k||""==f?l:((k=ap.call(f,SD((g-=k)/f.length))).length>g&&(k=k.slice(0,g)),h?l+k:k+l)}},TD=Cs(!1),UD=Cs(!0),Ds=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Re);M({target:"String",proto:!0,forced:Ds},{padEnd:function(h){return UD(this,h,1<arguments.length?arguments[1]:void 0)}});var VD=Sf,Es=function(h){return function(l){l=tb(l);for(var g,f=Mc(l),k=f.length,q=0,_r=[];k>q;)g=f[q++],fa&&!VD.call(l,g)||_r.push(h?[g,l[g]]:l[g]);return _r}},WD=Es(!0),XD=Es(!1);M({target:"Object",stat:!0},{entries:function(h){return WD(h)}});var YD=Jb.f,Fs="".endsWith,ZD=Math.min,Gs=Mk("endsWith"),$D=!Gs&&!!function(){var h=YD(String.prototype,"endsWith");return h&&!h.writable}();M({target:"String",proto:!0,forced:!$D&&!Gs},{endsWith:function(h){var l=String(mb(this));Lk(h);var g=1<arguments.length?arguments[1]:void 0,f=va(l.length);return g=void 0===g?f:ZD(va(g),f),f=String(h),Fs?Fs.call(l,f,g):l.slice(g-f.length,g)===f}}),rh("match",1,function(h,l,g){return[function(f){var k=mb(this),q=null==f?void 0:f[h];return void 0!==q?q.call(f,k):new RegExp(f)[h](String(k))},function(f){var k=g(l,f,this);if(k.done)return k.value;if(f=sa(f),k=String(this),!f.global)return Se(f,k);var q=f.unicode;f.lastIndex=0;for(var _r,_s=[],_a=0;null!==(_r=Se(f,k));)_r=String(_r[0]),_s[_a]=_r,""===_r&&(f.lastIndex=Gj(k,va(f.lastIndex),q)),_a++;return 0===_a?null:_s}]});var aE=Jb.f,Hs="".startsWith,bE=Math.min,Is=Mk("startsWith"),cE=!Is&&!!function(){var h=aE(String.prototype,"startsWith");return h&&!h.writable}();M({target:"String",proto:!0,forced:!cE&&!Is},{startsWith:function(h){var l=String(mb(this));Lk(h);var g=va(bE(1<arguments.length?arguments[1]:void 0,l.length)),f=String(h);return Hs?Hs.call(l,f,g):l.slice(g,g+f.length)===f}});var Sn=function(h){var l=/(%?)(%([jds]))/g,g=Array.prototype.slice.call(arguments,1);return g.length&&(h=h.replace(l,function(f,k,q,_r){switch(q=g.shift(),_r){case"s":q=""+q;break;case"d":q=Number(q);break;case"j":q=JSON.stringify(q)}return k?(g.unshift(q),f):q})),g.length&&(h+=" "+g.join(" ")),""+h.replace(/%{2,2}/g,"%")},dE=/\s/,eE=function(h){for(var l=h.length;l--&&dE.test(h.charAt(l)););return l},fE=/^\s+/,Js=NaN,gE=/^[-+]0x[0-9a-f]+$/i,hE=/^0b[01]+$/i,iE=/^0o[0-7]+$/i,jE=parseInt,Nl=function(h){if("number"==typeof h)return h;if(we(h))return Js;if(ob(h)&&(h="function"==typeof h.valueOf?h.valueOf():h,h=ob(h)?h+"":h),"string"!=typeof h)return 0===h?h:+h;h=h&&h.slice(0,eE(h)+1).replace(fE,"");var l=hE.test(h);return l||iE.test(h)?jE(h.slice(2),l?2:8):gE.test(h)?Js:+h},kE=Math.max,lE=Math.min,mE=function(h,l,g){function f(x_){var B_=_a,Q_=_l;return _a=_l=void 0,r_=x_,bh=h.apply(Q_,B_)}function k(x_){var B_=x_-_A;return x_-=r_,void 0===_A||B_>=l||0>B_||I_&&x_>=S_}function q(){var x_=Fb.Date.now();if(k(x_))return _r(x_);var B_=setTimeout,Q_=x_-r_;x_=l-(x_-_A),Q_=I_?lE(x_,S_-Q_):x_,n_=B_(q,Q_)}function _r(x_){return n_=void 0,v_&&_a?f(x_):(_a=_l=void 0,bh)}function _s(){var x_=Fb.Date.now(),B_=k(x_);if(_a=arguments,_l=this,_A=x_,B_){if(void 0===n_)return r_=x_=_A,n_=setTimeout(q,l),p_?f(x_):bh;if(I_)return clearTimeout(n_),n_=setTimeout(q,l),f(_A)}return void 0===n_&&(n_=setTimeout(q,l)),bh}var _a,_l,bh,n_,_A,r_=0,p_=!1,I_=!1,v_=!0;if("function"!=typeof h)throw new TypeError("Expected a function");if(l=Nl(l)||0,ob(g)){p_=!!g.leading;var S_=(I_="maxWait"in g)?kE(Nl(g.maxWait)||0,l):S_;v_="trailing"in g?!!g.trailing:v_}return _s.cancel=function(){void 0!==n_&&clearTimeout(n_),r_=0,_a=_A=_l=n_=void 0},_s.flush=function(){return void 0===n_?bh:_r(Fb.Date.now())},_s},Fc=function(h){function l(f,k){return X(this,l),m(n(f=g.call(this,Rn(f,k))),"originalError",void 0),m(n(f),"code",void 0),m(n(f),"serverCode",void 0),"number"==typeof k?f.code=k:"string"==typeof k?f.name=k:void 0!==k&&(k.originalError&&(f.originalError=k.originalError),void 0!==k.code&&(f.code=k.code),void 0!==k.serverCode&&(f.serverCode=k.serverCode)),f}ja(l,h);var g=ka(l);return l}(xf(Error)),Ma=function(h){function l(f,k){return X(this,l),m(n(f=g.call(this,Rn(f,k))),"name","RtmInternalError"),m(n(f),"code",void 0),f.code=k,f}ja(l,h);var g=ka(l);return l}(xf(Error)),ni=function(){return function(h){function l(f){X(this,l);var k=Object.keys(f);return g.call(this,f[k[0]],k[0])}ja(l,h);var g=ka(l);return l}(Ma)},Ha=ni(),gb=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmTimeoutError"),f}ja(l,h);var g=ka(l);return l}(Fc),H=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmInvalidArgumentError"),f}ja(l,h);var g=ka(l);return l}(Fc),L=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmInvalidStatusError"),f}ja(l,h);var g=ka(l);return l}(Fc),Ol=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmInterruptedError"),f}ja(l,h);var g=ka(l);return l}(Fc),lb=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmLimitExceededError"),f}ja(l,h);var g=ka(l);return l}(Fc),nE=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmInvokeTooOftenError"),f}ja(l,h);var g=ka(l);return l}(Fc),da=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmUnavailableError"),m(n(f),"serverCode",void 0),m(n(f),"statusCode",void 0),f}ja(l,h);var g=ka(l);return l}(Fc),of=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmUnauthenticatedError"),m(n(f),"serverCode",void 0),f}ja(l,h);var g=ka(l);return l}(Fc),bd=function(h){function l(){X(this,l);for(var f=arguments.length,k=Array(f),q=0;q<f;q++)k[q]=arguments[q];return m(n(f=g.call.apply(g,[this].concat(k))),"name","RtmUnknownError"),f}ja(l,h);var g=ka(l);return l}(Fc),Xa=function(h){return h instanceof gb||h instanceof sb},ta=function(h){return h instanceof Fc},he=function(h,l,g){return['Executing "%s.%s" timed out after %ds',h,l,g/1e3]},Qn=new Map,oE=function(){var h=new Date;return"".concat(h.toISOString().split("T")[1].replace(/\..+/,""),".").concat(h.getMilliseconds())},Pf=Object.keys,eh=Object.entries.bind(Object),Zg=function(h){return"string"==typeof h?h.endsWith(".")?h:"".concat(h,"."):h},Vn=function(h){for(var l="",g=(h=new Uint8Array(h)).byteLength,f=-1;++f<g;)l+=String.fromCharCode(h[f]);return l=btoa(l),"data:;base64,".concat(l)},pE=R(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})});M({target:"Date",proto:!0,forced:pE},{toJSON:function(h){h=Va(this);var l=tc(h);return"number"!=typeof l||isFinite(l)?h.toISOString():null}}),M({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Vv=Object.prototype.hasOwnProperty,Ks=function(h,l,g){return JSON.stringify(ao(h),l,g)};Ks.ensureProperties=ao;var qE=function(h,l){l=l||{};var g=V(h);if("string"===g&&0<h.length)return Wv(h);if("number"===g&&isFinite(h))return l.long?864e5<=(l=Math.abs(h))?gh(h,l,864e5,"day"):36e5<=l?gh(h,l,36e5,"hour"):6e4<=l?gh(h,l,6e4,"minute"):1e3<=l?gh(h,l,1e3,"second"):h+" ms":864e5<=(l=Math.abs(h))?Math.round(h/864e5)+"d":36e5<=l?Math.round(h/36e5)+"h":6e4<=l?Math.round(h/6e4)+"m":1e3<=l?Math.round(h/1e3)+"s":h+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))},rE=function(h){function l(k){function q(){for(var _a=arguments.length,_l=Array(_a),bh=0;bh<_a;bh++)_l[bh]=arguments[bh];if(q.enabled){_a=Number(new Date),q.diff=_a-(_r||_a),q.prev=_r,_r=q.curr=_a,_l[0]=l.coerce(_l[0]),"string"!=typeof _l[0]&&_l.unshift("%O");var n_=0;_l[0]=_l[0].replace(/%([a-zA-Z%])/g,function(_A,r_){return"%%"===_A?"%":(n_++,"function"==typeof(r_=l.formatters[r_])&&(_A=r_.call(q,_l[n_]),_l.splice(n_,1),n_--),_A)}),l.formatArgs.call(q,_l),(q.log||l.log).apply(q,_l)}}var _r,_s=null;return q.namespace=k,q.useColors=l.useColors(),q.color=l.selectColor(k),q.extend=g,q.destroy=l.destroy,Object.defineProperty(q,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===_s?l.enabled(k):_s},set:function(_a){_s=_a}}),"function"==typeof l.init&&l.init(q),q}function g(k,q){return(k=l(this.namespace+(void 0===q?":":q)+k)).log=this.log,k}function f(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}return l.debug=l,l.default=l,l.coerce=function(k){return k instanceof Error?k.stack||k.message:k},l.disable=function(){var k=[].concat(G(l.names.map(f)),G(l.skips.map(f).map(function(q){return"-"+q}))).join(",");return l.enable(""),k},l.enable=function(k){l.save(k),l.names=[],l.skips=[];var q,_r=("string"==typeof k?k:"").split(/[\s,]+/),_s=_r.length;for(q=0;q<_s;q++)_r[q]&&("-"===(k=_r[q].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+k.substr(1)+"$")):l.names.push(new RegExp("^"+k+"$")))},l.enabled=function(k){if("*"===k[k.length-1])return!0;var q,_r=0;for(q=l.skips.length;_r<q;_r++)if(l.skips[_r].test(k))return!1;for(_r=0,q=l.names.length;_r<q;_r++)if(l.names[_r].test(k))return!0;return!1},l.humanize=qE,l.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(h).forEach(function(k){l[k]=h[k]}),l.names=[],l.skips=[],l.formatters={},l.selectColor=function(k){for(var q=0,_r=0;_r<k.length;_r++)q=(q<<5)-q+k.charCodeAt(_r),q|=0;return l.colors[Math.abs(q)%l.colors.length]},l.enable(l.load()),l},Ls=cb(function(h,l){l.formatArgs=function(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+h.exports.humanize(this.diff),this.useColors){var k="color: "+this.color;f.splice(1,0,k,"color: inherit");var q=0,_r=0;f[0].replace(/%[a-zA-Z%]/g,function(_s){"%%"!==_s&&(q++,"%c"===_s&&(_r=q))}),f.splice(_r,0,k)}},l.save=function(f){try{f?l.storage.setItem("debug",f):l.storage.removeItem("debug")}catch(k){}},l.load=function(){try{var f=l.storage.getItem("debug")}catch(k){}return!f&&"undefined"!=typeof process&&"env"in process&&(f=process.env.DEBUG),f},l.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var g=localStorage;break e}catch(f){}g=void 0}l.storage=g,l.destroy=function(){var f=!1;return function(){f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),l.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),l.log=console.debug||console.log||function(){},h.exports=rE(l),h.exports.formatters.j=function(f){try{return JSON.stringify(f)}catch(k){return"[UnexpectedJSONParseError]: "+k.message}}}),Ms=Ls("RTM:DEBUG"),pf;Ms.enabled=!1,function(h){h[h.Uploading=0]="Uploading",h[h.Free=1]="Free"}(pf||(pf={}));var sE=function(){function h(l){X(this,h),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),m(this,"rtmConfig",void 0),this.processId=l.processId,this.sdkVersion=l.sdkVersion,this.rtmConfig=l.rtmConfig,this.uploadRequest=l.uploadRequest,this.uploadState=pf.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ia(h,[{key:"upload",value:function(l){this.LogCache.push(l),this.uploadState===pf.Free&&(this.LogsToPost=this.LogCache.splice(0,40>this.LogCache.length?this.LogCache.length:40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(l){var g=this;this.uploadState=pf.Uploading,setTimeout(J(x.mark(function f(){var k,q,_r;return x.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:return k={sdk_version:g.sdkVersion,process_id:g.processId,payload:JSON.stringify(l)},_s.prev=1,_s.next=4,g.uploadRequest(k,null!==(q=g.rtmConfig.enableCloudProxy)&&void 0!==q&&q);case 4:if(!Ti){_s.next=6;break}throw Error("RTM is busy");case 6:_s.next=13;break;case 8:return _s.prev=8,_s.t0=_s.catch(1),_r=2>g.uploadResendCount++?2e3:1e4,setTimeout(function(){return g.postLog(g.LogsToPost)},_r),_s.abrupt("return");case 13:if(Ms('The logs uploaded for "process-'.concat(zg,'"')),0!==g.LogCache.length){_s.next=17;break}return g.uploadState=pf.Free,_s.abrupt("return");case 17:g.uploadResendCount=0,g.LogsToPost=g.LogCache.splice(0,40>g.LogCache.length?g.LogCache.length:40),g.postLog(g.LogsToPost);case 20:case"end":return _s.stop()}},f,null,[[1,8]])})),ie.getParameter("LOG_UPLOAD_INTERVAL"))}}]),h}(),Ns=function(h,l,g,f,k,q,_r,_s){var _a=0;for(_r=!!_r&&pd(_r,_s,3);_a<f;){if(_a in g){if(_s=_r?_r(g[_a],_a,l):g[_a],0<q&&qd(_s))k=Ns(h,l,_s,va(_s.length),k,q-1)-1;else{if(9007199254740991<=k)throw TypeError("Exceed the acceptable array length");h[k]=_s}k++}_a++}return k},tE=Ns;M({target:"Array",proto:!0},{flat:function(){var h=arguments.length?arguments[0]:void 0,l=Va(this),g=va(l.length),f=th(l,0);return f.length=tE(f,l,l,g,0,void 0===h?1:fc(h)),f}}),M({target:"Object",stat:!0},{values:function(h){return XD(h)}});var uE=["CODE"],Gb,Bd,D;!function(h){h.CHINA="CN",h.ASIA="AS",h.NORTH_AMERICA="NA",h.EUROPE="EU",h.JAPAN="JP",h.INDIA="IN",h.OCEANIA="OC",h.SOUTH_AMERICA="SA",h.AFRICA="AF",h.OVERSEA="OVERSEA",h.GLOBAL="GLOBAL"}(D||(D={}));var vE={CN:D.CHINA,NA:D.NORTH_AMERICA,EU:D.EUROPE,AS:D.ASIA,JP:D.JAPAN,IN:D.INDIA,GLOB:D.GLOBAL,AF:D.AFRICA,OC:D.OVERSEA,OVS:D.OVERSEA,SA:D.SOUTH_AMERICA},hh=Zn((Gb={},m(Gb,D.ASIA,{CODE:D.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.NORTH_AMERICA,{CODE:D.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.EUROPE,{CODE:D.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.JAPAN,{CODE:D.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.INDIA,{CODE:D.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.OVERSEA,{CODE:D.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),m(Gb,D.GLOBAL,{CODE:D.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.OCEANIA,{CODE:D.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.SOUTH_AMERICA,{CODE:D.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.AFRICA,{CODE:D.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.CHINA,{CODE:D.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),Gb)),Qf=(Bd={},m(Bd,D.ASIA,[D.CHINA,D.JAPAN,D.INDIA]),m(Bd,D.EUROPE,[]),m(Bd,D.NORTH_AMERICA,[]),m(Bd,D.SOUTH_AMERICA,[]),m(Bd,D.OCEANIA,[]),m(Bd,D.AFRICA,[]),Bd),Os=[D.OVERSEA,D.GLOBAL,D.CHINA,D.NORTH_AMERICA,D.EUROPE,D.ASIA,D.JAPAN,D.INDIA,D.OCEANIA,D.SOUTH_AMERICA,D.AFRICA],bo=function(h){return Object.values(Qf).flat().includes(h)},Yv=function(h){var l;return null===(l=eh(Qf).find(function(g){return(g=ua(g,2))[1].includes(h)}))||void 0===l?void 0:l[0]},wE=function(h){return h.sort(function(l,g){return Os.indexOf(l)-Os.indexOf(g)})},Ke=function(h){var l=new Set;if(0===(h=wE(h).slice(0,3).map(function(g){var f=hh[g];if(void 0===f)throw new Ma("invalid area key");return g=f.CODE,f=yf(f,uE),l.add(g),f})).length)throw new Ma("areas cannot be empty");return wa({CODES:l},h.reduce(function(g,f){for(var k=0,q=eh(g);k<q.length;k++){var _r=ua(q[k],2),_s=_r[0];_r=_r[1],g[_s]=Array.from(new Set([].concat(G(f[_s]),G(_r))))}return g}))},P,Ps=function(){var h=J(x.mark(function l(g,f){var k,q,_r,_s,_a,_l=arguments;return x.wrap(function(bh){for(;;)switch(bh.prev=bh.next){case 0:if(!(2<(q=2<_l.length&&void 0!==_l[2]?_l[2]:0))){bh.next=3;break}return bh.abrupt("return");case 3:return _r={withCredentials:!0,body:g,timeout:2e4},_s=0<q?(null==P?void 0:P.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==P?void 0:P.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",_a=f?"https://".concat(null!==(k=null==P?void 0:P.PROXY_NGINX[0])&&void 0!==k?k:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(_s,"&p=443&d=upload/v1"):"https://".concat(_s,"/upload/v1"),bh.next=8,He(_a,_r).catch(function(n_){return Ps(g,f,q+1)});case 8:case"end":return bh.stop()}},l)}));return function(l,g){return h.apply(this,arguments)}}(),Qs=new sE({processId:"process-".concat(zg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.5-0-g9cf39592"),uploadRequest:Ps,rtmConfig:{}}),Pl="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Rs="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Ss="serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "),xE="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),Le=function(h){if("string"==typeof h)return pa(h);if(Array.isArray(h)&&h.every(function(q){return"string"==typeof q}))return h.map(function(q){return pa(q)});if(!Km(h)){for(var l={},g=0;g<Ss.length;g++){var f=Ss[g];f in h&&(l[f]=h[f])}if(0<Object.keys(l).length)return l;if(5>Object.keys(h).length){for(g=0,h=Object.entries(h);g<h.length;g++){var k=ua(h[g],2);f=k[0],k=k[1],Pl.includes(f)?l[f]="[Hidden Info]":l[pa(f)]="string"==typeof k?pa(k):"[Sensitive Info]"}return l}return"[Sensitive Info]"}return h},Ts=function(h){return"object"===V(h)?Hd(h)?Yn(te(h,5),Pl,Rs):h.constructor&&h.constructor.name:h},Us=function(h,l){return h instanceof Error?h.message:"string"!=typeof h?JSON.stringify(Yn(te(h,5),Pl,Rs)):(l=l.map(function(g){return g instanceof Error?g.message:"object"===V(g)?Ks(Array.isArray(g)?g.map(Ts):Ts(g)):g}),Sn.apply(void 0,[h.replace(/%[%Oo]/g,function(g){return"%%"===g?"%":"%o"===g||"%O"===g?"%s":g})].concat(G(l))))},yE=1,Vs=function(h,l,g){var f=Ls(h);return f.enabled=!0,f.log=g,f.useColors=!1,function(k){for(var q=arguments.length,_r=Array(1<q?q-1:0),_s=1;_s<q;_s++)_r[_s-1]=arguments[_s];if(l.enableLogUpload){q=Zg(k);var _a=Us(q,_r);Qs.upload({log_item_id:"".concat(yE++),log_level:h,payload_str:"[".concat(oE(),"] ").concat(h," - ").concat(256<_a.length?_a.slice(0,256):_a)})}switch(q=function(_l){var bh=_a||Us(Zg(k),_r),n_=lc.LOG_HANDLER;"function"==typeof n_&&n_({level:_l,message:bh}),f(bh)},h){case"RTM:INFO":l.logFilter.info&&q("log");break;case"RTM:WARN":l.logFilter.warn&&q("warning");break;case"RTM:ERROR":l.logFilter.error&&q("error");break;case"RTM:TRACK":l.logFilter.track&&q("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":l.logFilter.debug&&q("debug")}}},Ql,Ws=function(h){return function(l){var g=1===Ql||void 0===h?"":"Ins#".concat(h," ");return"".concat(g).concat(l)}},Rl=function(h,l,g){var f=Ws(Ql);return Vs("RTM:".concat(l),g,function(k){return h(f(k))})},wb=function(){return function(h){function l(f,k){var q=2<arguments.length&&void 0!==arguments[2]&&arguments[2];X(this,l);var _r=g.call(this);if(m(n(_r),"logError",void 0),m(n(_r),"invokeTracker",void 0),m(n(_r),"resultTracker",void 0),m(n(_r),"errorTracker",void 0),m(n(_r),"eventTracker",void 0),m(n(_r),"info",void 0),m(n(_r),"warn",void 0),m(n(_r),"log",void 0),m(n(_r),"genLogger",void 0),m(n(_r),"loggerId",void 0),m(n(_r),"logger",void 0),m(n(_r),"name",void 0),_r.logger=f,_r.name=k,_r.loggerId=f.loggerId,_r.info=f.info,_r.warn=f.warn,_r.logError=f.logError,_r.genLogger=f.genLogger,_r.log=f.genLogger("RTM:DEBUG","<".concat(k,"> ")),_r.invokeTracker=f.genTracker("Invoke"),_r.eventTracker=f.genTracker("Event"),_r.resultTracker=f.genTracker("Result"),_r.errorTracker=f.genTracker("Error"),q){var _s=_r.emit.bind(n(_r));_r.emit=function(){for(var _a=arguments.length,_l=Array(_a),bh=0;bh<_a;bh++)_l[bh]=arguments[bh];_a=_l[0],bh=_l.slice(1);var n_=xE.includes(_a);_r.eventTracker.apply(_r,["%s: ".concat(0<bh.length?"%s emitted with args: ".concat(bh.map(function(){return"%o"})):"%s emitted"),k,_a].concat(G(n_?bh.map(Le):bh)));try{_s.apply(void 0,_l)}catch(_A){_r.logError("Caught in the callback function of the event %s",_a,_A)}}}return _r}ja(l,h);var g=ka(l);return l}(ia)},zE=function(h){return Rl(console.log.bind(console),"INFO",h)},AE=function(h){return Rl(console.warn.bind(console),"WARN",h)},BE=function(h){return Rl(console.error.bind(console),"ERROR",h)},Xs=function(h,l){return function(g){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",k=Ws(h),q=console.debug.bind(console),_r=Vs(g,l,function(_s){return q(k(_s))});return function(_s){for(var _a=arguments.length,_l=Array(1<_a?_a-1:0),bh=1;bh<_a;bh++)_l[bh-1]=arguments[bh];return _r.apply(void 0,[f+_s].concat(_l))}}},CE=function(h,l){return function(g){return Xs(h,l)("RTM:TRACK","[".concat(g,"] "))}},rj=t.URI,$v=mi,DE=yf(RD,["Wrapper"]),co=ml(DE,"URI"),Ys=function(h,l){var g=-1,f=h.length,k=f-1;for(l=void 0===l?f:l;++g<l;){var q=h[f=rs(g,k)];h[f]=h[g],h[g]=q}return h.length=l,h},EE=function(h){return Ys(Bi(h))},FE=function(h){return Ys(tj(h))},qf=function(h){return(Za(h)?EE:FE)(h)},rf={0:9591,1:9593},je=function(h){var l=Pd(null);return"https://".concat(l?null:h,"/api/v1")},GE=eb.apply(void 0,G(qf(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map(je)))),HE=eb.apply(void 0,G(qf(["ap-web-1.agora.io","ap-web-2.agora.io"].map(je)))),IE=eb.apply(void 0,G(qf(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map(je)))),JE=eb.apply(void 0,G(qf(["ap-web-3.agora.io","ap-web-4.agora.io"].map(je)))),Zs=ni(),Sl=function(h){function l(f,k,q,_r,_s,_a){X(this,l);var _l=g.call(this,_s,fj("Socket-",_s.loggerId));if(m(n(_l),"isActiveClose",!1),m(n(_l),"loggedIn",!1),m(n(_l),"useNewDomain",void 0),m(n(_l),"receivedPacket",new Ua),m(n(_l),"open$",void 0),m(n(_l),"input$",new Ua),m(n(_l),"userJoin$",new Ua),m(n(_l),"attemptsSinceLastError",0),m(n(_l),"message$",new Ua),m(n(_l),"socket$",void 0),m(n(_l),"toClose",new Ua),m(n(_l),"toReconnect",new Ua),m(n(_l),"sendLogger",void 0),m(n(_l),"receiveLogger",void 0),m(n(_l),"ip",void 0),m(n(_l),"env",void 0),m(n(_l),"ticket",void 0),m(n(_l),"context",void 0),m(n(_l),"getDomain",function(){return eo(_l.ip,_l.useNewDomain)}),m(n(_l),"socketReconnector",function(_A){var r_=function(p_){return _l.attemptsSinceLastError+=1,_l.warn("The %s of Env %d reconnecting %s",_l.name,_l.env,p_.message),Kc(3e3)};return _A.pipe(Ja(function(p_){return _l.log("socket connection closed"),_l.loggedIn=!1,2<=_l.attemptsSinceLastError?(_l.warn("socket connection failure"),_l.emit("connectionFailure"),_l.close(),Z(p_)):_l.isActiveClose?yb:(_l.emit("reconnect"),_l.useNewDomain=!_l.useNewDomain,Z(p_))}),Ce(function(p_){return p_.pipe(Lc(r_))}))}),_l.ip=f,_l.env=k,_l.ticket=q,_l.context=_r,_l.useNewDomain=null!=_a?_a:.5<=Math.random(),_l.sendLogger=_l.genLogger("RTM:MSG:SEND"),_l.receiveLogger=_l.genLogger("RTM:MSG:RECV"),0!==k&&1!==k)throw new Zs({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});var bh=rf[k];_l.log("Opening websocket address %s for the Env %d",_l.ip,_l.env);var n_=cc(_l.input$,_l.userJoin$.pipe(Lv(2)),_l.message$).pipe(ea(function(_A){return mi.encode(_A).finish()}));return f=cc(Mv("",{protocols:[],makeWebSocket:function(){if(_l.context.config.enableCloudProxy||_l.context.socketUseProxy){if(0===_l.context.cloudProxyServers.length)throw _l.logError("No cloud proxy server to connect"),new da;var _A=Pd(null)?JSON.parse(null.replace(/-/g,".")):_l.context.cloudProxyServers;_A=Je(_A="wss://".concat(eo(fo(_A),!1),"/"),"sid",_l.context.sid),_A=Je(_A,"remote_port",bh.toString()),_A=Je(_A,"remote_ip",_l.ip),_A=Je(_A,"token",_l.context.key),_A=new WebSocket(_A)}else _A=new WebSocket("wss://".concat(_l.getDomain(),":").concat(bh));return _A.binaryType="arraybuffer",_A}}),_l.toReconnect),_l.socket$=Da(f,zl.pipe(kb(7e3),Ja(function(_A){return Xa(_A)&&_l.warn("socket open timed out"),Z(_A)}))).pipe(ea(function(_A){if(_A instanceof Error)throw _l.warn("Env_%d: Force reconnect the socket",_l.env),_A;return _A(n_).pipe(ea(function(r_){return mi.decode(new Uint8Array(r_))}))}),_l.socketReconnector),_l.open$=_l.socket$.pipe(ba(function(_A){_l.log("Websocket opened",_l.name),_A.subscribe(function(r_){var p_=r_.data;r_=rj[r_.uri].slice(0,-3),p_=co[r_].decode(p_);var I_=DC({},ml(p_,"toJSON"),function(B_,Q_){return Q_ instanceof U?Pn(Q_):Q_}),v_=!1;if((p_ instanceof zs||p_ instanceof ys)&&p_.instance.lessThanOrEqual(4294967295)&&(v_=!0),p_ instanceof As||p_ instanceof Bs){var S_=p_.instance,x_=p_.sequence;(p_.dialogue.lessThanOrEqual(4294967295)||S_.lessThanOrEqual(4294967295)||x_.lessThan(1))&&(v_=!0)}v_?_l.warn("Env_%d: Illegal %s, abandoned %o",_l.env,r_,I_):("Pong"!==r_&&_l.receiveLogger("Env_%d: %s %o",_l.env,r_,I_),_l.receivedPacket.next([r_,p_]))},function(){})}),If(void 0),rb(_l.toClose),De()),_l}ja(l,h);var g=ka(l);return Ia(l,[{key:"address",get:function(){return"".concat(this.ip,":").concat(rf[this.env])}},{key:"sendPacket",value:function(f,k){if("Ping"!==f){var q=Bc(k,function(_r){return _r instanceof U?Pn(_r):_r});this.sendLogger("Env_%d: %s %o",this.env,f,q)}k=Zv(f,k),"UserJoin"===f?this.userJoin$.next(k):"Message"===f?this.message$.next(k):this.input$.next(k)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(f){return this.receivedPacket.pipe(zb(function(k){return ua(k,1)[0]===f}),ea(function(k){return ua(k,2)[1]}))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Zs({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),l}(wb());M({target:"String",proto:!0,forced:Ds},{padStart:function(h){return TD(this,h,1<arguments.length?arguments[1]:void 0)}});var KE=function(h){var l=Pf(hh);h=Tv(h);for(var g=0;g<l.length;g++){var f=hh[l[g]];if(null!=f&&f.AP_DOMAINS.includes(h)||null!=f&&f.AP_BACKUP_DOMAINS.includes(h)||null!=f&&f.PROXY_AP.includes(h))return[f.CODE]}return[D.CHINA,D.GLOBAL]},LE={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},$s={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},ME=[100,101,102],oi=/web-(\d)/,at=function(h){function l(f,k){var q=2<arguments.length&&void 0!==arguments[2]&&arguments[2];X(this,l);var _r=g.call(this,k,"AccessPoint");return m(n(_r),"handleUniLbsError",function(_s,_a){var _l=_s;if(4<_s.toString().length){var bh=_s.toString().padStart(8,"0"),n_=parseInt(bh.slice(0,4),10);if(bh=parseInt(bh.slice(4,8),10),201===n_)_l=bh;else if(101===n_&&!ME.includes(bh))return Z(Error("service is currently unavailable"))}if(n_=_l.toString(),!Object.keys($s).includes(n_))return(_s=new da(["Login is rejected by the server. The response code is %d",_s],Bg)).serverCode=_l,Z(_s);switch(_l=LE[n_=$s[n_]],n_){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(_a=new of(_l,ds)).serverCode=_s,Z(_a);case"INVALID_USER_ID":return(_a=new of(_l,hi)).serverCode=_s,Z(_a);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(_a=new of(_l,ii)).serverCode=_s,Z(_a);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(_a=new of(_l,es)).serverCode=_s,Z(_a);case"CANNOT_MEET_AREA_DEMAND":return(_a=KE(_a)).forEach(function(_A){return _r.failedAreas.add(_A)}),_r.failedAreas.size===(void 0===P?2:P.CODES.size)?((_a=new H(_l,Bg)).serverCode=_s,Z(_a)):Z(Error("ap ".concat(_a.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(_a=new da(_l,Bg)).serverCode=_s,Z(_a);default:return Z(Nn("ApResErrType",n_))}}),m(n(_r),"getApEdgeInfo$",void 0),m(n(_r),"getApEdgeInfoEndFirst$",void 0),m(n(_r),"apFinish$",new Ua),m(n(_r),"retryCount",0),m(n(_r),"failedAreas",new Set),m(n(_r),"usedUrl",[]),m(n(_r),"newDomainUsed",!1),m(n(_r),"backupNewDomainUsed",!1),m(n(_r),"genUrl",function(){return void 0===P?Ri.apply(void 0,G(qf([GE,HE]))).pipe(Si(function(_s){return eb.apply(void 0,G(_s))})):eb.apply(void 0,G(P.AP_DOMAINS.slice(0,3).map(je)))}),m(n(_r),"genBackupUrl",function(){return void 0===P?Ri.apply(void 0,G(qf([IE,JE]))).pipe(Si(function(_s){return eb.apply(void 0,G(_s))})):eb.apply(void 0,G(P.AP_BACKUP_DOMAINS.slice(0,3).map(je)))}),m(n(_r),"getApUrl$",function(_s){var _a,_l;return _r.genUrl().pipe(zb(function(bh){return!(_r.newDomainUsed&&bh.includes("sd-rtn.com")||(bh.includes("sd-rtn.com")&&(_r.newDomainUsed=!0),Kl(_r.usedUrl,function(n_){var _A;return n_===(null===(_A=bh.match(oi))||void 0===_A?void 0:_A[1])})))}),ba(function(bh){var n_;void 0===P&&"string"==typeof(bh=null===(n_=bh.match(oi))||void 0===n_?void 0:n_[1])&&_r.usedUrl.push(bh)}),Pa(_s?Math.max(lc.RECONNECTING_AP_NUM,null!==(_a=null==P?void 0:P.CODES.size)&&void 0!==_a?_a:0):null!==(_l=null==P?void 0:P.CODES.size)&&void 0!==_l?_l:2),Md(function(){return l.runOutOfUrlSymbol}),Ja(function(bh,n_){return _r.newDomainUsed=!1,bh===l.runOutOfUrlSymbol?(_r.usedUrl=[],n_):Z(bh)}))}),m(n(_r),"getBackupApUrl$",function(_s){var _a,_l;return _r.genBackupUrl().pipe(zb(function(bh){return!(_r.backupNewDomainUsed&&bh.includes("sd-rtn.com")||(bh.includes("sd-rtn.com")&&(_r.backupNewDomainUsed=!0),Kl(_r.usedUrl,function(n_){var _A;return n_===(null===(_A=bh.match(oi))||void 0===_A?void 0:_A[1])})))}),ba(function(bh){var n_;void 0===P&&"string"==typeof(bh=null===(n_=bh.match(oi))||void 0===n_?void 0:n_[1])&&_r.usedUrl.push(bh)}),Pa(_s?Math.max(lc.RECONNECTING_AP_NUM,null!==(_a=null==P?void 0:P.CODES.size)&&void 0!==_a?_a:0):null!==(_l=null==P?void 0:P.CODES.size)&&void 0!==_l?_l:2),Md(function(){return l.runOutOfUrlSymbol}),Ja(function(bh,n_){return _r.backupNewDomainUsed=!1,bh===l.runOutOfUrlSymbol?(_r.usedUrl=[],n_):Z(bh)}))}),m(n(_r),"getProxyApUrl$",function(_s){var _a,_l;return eb.apply(void 0,G(((null==P?void 0:P.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map(je))).pipe(Pa(_s?Math.max(lc.RECONNECTING_AP_NUM,null!==(_a=null==P?void 0:P.CODES.size)&&void 0!==_a?_a:0):null!==(_l=null==P?void 0:P.CODES.size)&&void 0!==_l?_l:2))}),m(n(_r),"context",void 0),m(n(_r),"fetchCloudProxy",function(_s,_a){var _l=fj("AP-",_r.loggerId);_r.log("The AccessPoint requests %s(%s)",_s,_l);var bh=new AbortController;return _r.apFinish$.pipe(Pa(1)).subscribe(function(){return bh.abort()}),hd(J(x.mark(function n_(){var _A;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:return _A=Xg(0,Number.MAX_SAFE_INTEGER),_r.log("%s request opid: %d",_l,_A),r_.abrupt("return",He(_s,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:_r.context.sid,opid:_A,appid:_r.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=_a?_a:_r.context.key,cname:_r.context.uid,uid:0,detail:wa({},void 0===P?{11:[D.CHINA,D.GLOBAL].join()}:{11:Array.from(P.CODES).map(function(p_){return p_===D.OVERSEA?"".concat(D.ASIA,",").concat(D.EUROPE,",").concat(D.AFRICA,",").concat(D.NORTH_AMERICA,",").concat(D.SOUTH_AMERICA,",").concat(D.OCEANIA):p_}).join(",")})}}]},signal:bh.signal}));case 3:case"end":return r_.stop()}},n_)}))).pipe(Ja(function(n_){return"AbortError"!==n_.name&&(_r.logError(n_),_r.warn("The AP server %s request failure",_s,n_)),yb}),fb(function(){var n_=J(x.mark(function _A(r_){var I_,v_,S_,x_,B_,Q_,_0,c0,Qv,h0,E0,H_,e0,P_,Rv,E_,L_,F_;return x.wrap(function(J_){for(;;)switch(J_.prev=J_.next){case 0:if(I_=JSON.parse(r_.responseText),_r.log("The %s response is %o",_l,I_),(void 0===(v_=I_.response_body)||0===v_.length||v_.some(function(z_){var D0;return void 0===(null===(D0=z_.buffer)||void 0===D0?void 0:D0.code)||23!==z_.uri}))&&Z(new da("cloud proxy response_body not valid",Bg)),0===(S_=v_.filter(function(z_){return 0!==z_.buffer.code})).length){J_.next=14;break}if(void 0===(x_=S_.find(function(z_){return 128===z_.buffer.flag}))){J_.next=12;break}return J_.abrupt("return",_r.handleUniLbsError(x_.buffer.code,_s));case 12:return _r.logError("cloud proxy error response"),J_.abrupt("return",_r.handleUniLbsError(S_[0].buffer.code,_s));case 14:for(B_=[],Q_=0;Q_<v_.length;Q_++)if(262144===(null==(Qv=v_[Q_])||null===(_0=Qv.buffer)||void 0===_0?void 0:_0.flag))null===(h0=Qv.buffer)||void 0===h0||null===(E0=h0.edges_services)||void 0===E0||null===(H_=E0.forEach)||void 0===H_||H_.call(E0,function(z_){Ln(z_=z_.ip)&&-1===_r.context.cloudProxyServers.indexOf(z_)&&(_r.log("got cloud proxy server: %s",z_),_r.context.cloudProxyServers.push(z_))});else if(128===(null==Qv||null===(c0=Qv.buffer)||void 0===c0?void 0:c0.flag)){for(E_=function(z_,D0){var O0=D0[z_];B_.some(function(CI){return CI.ip===O0.ip})||B_.push({ip:O0.ip,ticket:Qv.buffer.cert})},L_=0,F_=Qv.buffer.edges_services;L_<F_.length;L_++)E_(L_,F_);_r.context.rtmArea=null!==(e0=null===(P_=Qv.buffer)||void 0===P_||null===(Rv=P_.detail)||void 0===Rv?void 0:Rv[9])&&void 0!==e0?e0:""}return J_.abrupt("return",eb.apply(void 0,G(B_).concat([yg])));case 19:case"end":return J_.stop()}},_A)}));return function(_A){return n_.apply(this,arguments)}}()),Ja(function(n_){return ta(n_)?Z(n_):yb}),Qg(),zb(function(n_){return void 0!==n_&&"string"==typeof n_.ip&&"string"==typeof n_.ticket&&Ln(n_.ip)}))}),m(n(_r),"fetchAp",function(_s,_a){var _l=fj("AP-",_r.loggerId);_r.log("The AccessPoint requests %s(%s)",_s,_l);var bh=new AbortController;return _r.apFinish$.pipe(Pa(1)).subscribe(function(){return bh.abort()}),hd(J(x.mark(function n_(){var _A;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:return _A=Xg(0,Number.MAX_SAFE_INTEGER),_r.log("%s request opid: %d",_l,_A),r_.abrupt("return",He(_s,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:_A,key:_a||_r.context.key,cname:_r.context.uid,detail:wa({},void 0===P?{11:[D.CHINA,D.GLOBAL].join()}:{11:Array.from(P.CODES).map(function(p_){return p_===D.OVERSEA?"".concat(D.ASIA,",").concat(D.EUROPE,",").concat(D.AFRICA,",").concat(D.NORTH_AMERICA,",").concat(D.SOUTH_AMERICA,",").concat(D.OCEANIA):p_}).join(",")}),uid:0,sid:_r.context.sid},signal:bh.signal}));case 3:case"end":return r_.stop()}},n_)}))).pipe(Ja(function(n_){return"AbortError"!==n_.name&&(_r.logError(n_),_r.warn("The AP server %s request failure",_s,n_)),yb}),fb(function(){var n_=J(x.mark(function _A(r_){var I_,v_,S_,x_,B_,Q_,_0;return x.wrap(function(c0){for(;;)switch(c0.prev=c0.next){case 0:if(I_=JSON.parse(r_.responseText),_r.log("The %s response is %o",_l,I_),S_=(v_=I_).code,x_=v_.addresses,B_=v_.detail,0===S_){c0.next=6;break}return c0.abrupt("return",_r.handleUniLbsError(S_,_s));case 6:if(Q_=x_,Pd(null)&&(_0=JSON.parse(null.replace(/-/g,".")),Q_=_0.map(function(Qv){return{ip:Qv,ticket:Q_[0].ticket}})),0!==Q_.length){c0.next=11;break}return c0.abrupt("return",Z(Error("No available edge address to connect")));case 11:return _r.context.rtmArea=null==B_?void 0:B_[9],c0.abrupt("return",eb.apply(void 0,G(Q_).concat([yg])));case 13:case"end":return c0.stop()}},_A)}));return function(_A){return n_.apply(this,arguments)}}()),Qg(),Ja(function(n_){return ta(n_)?Z(n_):yb}),zb(function(n_){return void 0!==n_&&"string"==typeof n_.ip&&"string"==typeof n_.ticket}))}),_r.context=f,_r.getApEdgeInfoEndFirst$=function(){var _s=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Kc(0,_s||q?lc.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(1),ba(function(){_r.retryCount+=1}),fb(function(){return _r.context.config.enableCloudProxy||_r.context.socketUseProxy?_r.getProxyApUrl$(_s||q):(4<=_r.retryCount&&(_r.retryCount=0),3>=_r.retryCount?_r.getApUrl$(_s||q):_r.getBackupApUrl$(_s||q))}),fb(function(_a){return _r.context.config.enableCloudProxy||_r.context.socketUseProxy?_r.fetchCloudProxy(_a):_r.fetchAp(_a)}),Ja(function(_a){return _a instanceof sb&&_r.warn("AP request timeout"),Z(_a)}),rn(function(_a){return _a.ip}),rb(_r.apFinish$))},_r.getApEdgeInfo$=function(_s){return Kc(0,_s||q?lc.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(8),ba(function(){_r.retryCount+=1}),fb(function(){return _r.context.config.enableCloudProxy||_r.context.socketUseProxy?_r.getProxyApUrl$(_s||q):3>=_r.retryCount?_r.getApUrl$(_s||q):_r.getBackupApUrl$(_s||q)}),fb(function(_a){return(_r.context.config.enableCloudProxy||_r.context.socketUseProxy?_r.fetchCloudProxy(_a):_r.fetchAp(_a)).pipe()}),Ja(function(_a){return _a instanceof sb&&_r.warn("AP request timeout"),Z(_a)}),rn(function(_a){return _a.ip}),rb(_r.apFinish$))},_r}ja(l,h);var g=ka(l);return Ia(l,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),l}(wb());m(at,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var bt=ni(),ct=function(h){function l(f,k,q){X(this,l);var _r=g.call(this,k,"Connection");m(n(_r),"apClient",void 0),m(n(_r),"lastOpenSockets",[new Ee(1),new Ee(1)]),m(n(_r),"curOpenSockets",[void 0,void 0]),m(n(_r),"ipIterator",0),m(n(_r),"loginSocketOpenFailureCount",0),m(n(_r),"firstEnv",.5<=Math.random()?1:0),m(n(_r),"firstSocketOpener",void 0),m(n(_r),"secondSocketOpener",void 0),m(n(_r),"firstOpenKeeperSubject",new Ua),m(n(_r),"secondOpenKeeperSubject",new Ua),m(n(_r),"blacklistedIP",{}),m(n(_r),"edgeInfoReplayed",void 0),m(n(_r),"firstEnvOpenSocket",void 0),m(n(_r),"firstOpenKeeperSub",void 0),m(n(_r),"secondOpenKeeperSub",void 0),m(n(_r),"context",void 0),m(n(_r),"logger",void 0),_r.context=f,_r.logger=k,_r.apClient=new at(_r.context,k),_r.apClient.apFinish$.subscribe(function(){_r.log("Ap client fetch finished")});var _s,_a=[];return _r.edgeInfoReplayed=_r.apClient.getApEdgeInfo$(q).pipe(Ce(function(_l){return _l.pipe(ba(function(bh){if(ta(bh))throw bh}),jd(q?ie.getParameter("RECONNECTING_AP_INTERVAL"):900),rb(Kc(2e4)))}),zb(function(_l){var bh;return!Kl(_a,_l)&&1>=(null!==(bh=_r.blacklistedIP[_l.ip])&&void 0!==bh?bh:0)}),Md(function(){return new bt({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),ba(function(_l){_a.push(_l),_r.log("An edge info got %o",_l)}),ba({error:function(_l){_r.emit("connectionInitFailure",_l)}}),Tg(function(){_r.apClient.clearUp()}),vn()),_r.firstEnvOpenSocket=_r.edgeInfoReplayed.pipe(fb(function(_l){if(void 0===_l)return Z(Error("Invalid edge info"));var bh=new Sl(_l.ip,_r.firstEnv,_l.ticket,_r.context,k,_s);if(_r.firstEnv=1===_r.firstEnv?0:1,bh.once("connectionFailure",function(){return _r.onSocketConnectionFailure(bh)}),!q&&lc.ENABLE_EDGE_AUTO_FALLBACK&&!_r.context.config.enableCloudProxy){var n_,_A=Date.now();bh.on("reconnect",function(){var r_;_r.loginSocketOpenFailureCount+=1,null!==(r_=n_)&&void 0!==r_||(n_=Date.now()-_A),500>n_&&1<_r.loginSocketOpenFailureCount&&(_r.context.socketUseProxy=!0)})}return _s=!bh.useNewDomain,bh.open$.pipe(If(bh))}),ba(function(_l){_r.log("The websocket of ENV_%d opened to %s:%d",_l.env,_l.ip,rf[_l.env]),_r.curOpenSockets[_l.env]=_l,_r.lastOpenSockets[_l.env].next(_l),_r.firstEnv=_l.env,_r.openSecondSocket(_l.env,_l.ip,_l.useNewDomain)}),Pa(1),De()),_r.firstSocketOpener=_r.firstEnvOpenSocket.pipe(fb(function(_l){return _l.open$.pipe(ba(function(){_r.log("The websocket of first ENV_%d re-opened to %s:%d",_l.env,_l.ip,rf[_l.env]),_r.curOpenSockets[_l.env]=_l,_r.lastOpenSockets[_l.env].next(_l)}))})),f=_r.firstOpenKeeperSubject.pipe(Lc(ed)),_r.firstOpenKeeperSub=f.subscribe({error:_r.logError}),_r}ja(l,h);var g=ka(l);return Ia(l,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(f,k){if(![0,1].includes(f))throw new Ha({INVALID_ENV:"The env argument is not 0 or 1"});var q=f===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var _r=this.curOpenSockets[f];this.curOpenSockets[f]=void 0,_r&&(_r.isActiveClose=!0,setTimeout(function(){_r.close()},k)),void 0!==q&&setTimeout(function(){null==q||q.unsubscribe()},k)}},{key:"waitClosing",value:function(f){var k=this;return f.isActiveClose=!0,f.open$.pipe(nv(),Ja(function(q){return q.message===qs.normalClosureMessage?yb:Z(q)}),kb(5e3),Ja(function(q){return q instanceof sb?(k.warn("Force closing the ENV_%d connection",f.env),yb):Z(q)}))}},{key:"onSocketConnectionFailure",value:function(f){var k=[0,1].filter(function(q){return q!==f.env})[0];(k=this.curOpenSockets[k])&&k.loggedIn?this.reopenSocketWithApRequest(f.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(f,k,q){var _r=this,_s=1===f?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(un(function(_a,_l){return[].concat(G(_a),[_l])},[]),ea(function(_a){return os(_a,function(_l){return On(k,_l.ip)}).slice(-1)[0]}),Pa(1),fb(function(_a){if(void 0===_a)return Z(Error("Invalid edge info"));var _l=new Sl(_a.ip,_s,_a.ticket,_r.context,_r.logger,q);return _l.on("connectionFailure",function(){return _r.onSocketConnectionFailure(_l)}),_l.open$.pipe(ba(function(){_r.lastOpenSockets[_s].next(_l),_r.curOpenSockets[_s]=_l}))}),De()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Lc(ed)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(f){var k=this,q=[0,1].filter(function(_a){return _a!==f})[0];if(void 0!==(q=this.curOpenSockets[q])){var _r,_s=q.ip;q=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Md(function(){return new bt({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),Ce(function(_a){return _a.pipe(ba(function(_l){if(_l.code===ii)k.emit("tokenExpired"),k.apClient.apFinish$.next(void 0);else if(ta(_l))throw _l}),jd(ie.getParameter("RECONNECTING_AP_INTERVAL")),rb(Kc(15e3)))}),ba(function(_a){k.log("An edge info got %o",_a)}),Tg(function(){k.apClient.clearUp()})).pipe(un(function(_a,_l){return[].concat(G(_a),[_l])},[]),ea(function(_a){return(_a=os(_a,function(_l){return On(_s,_l.ip)})).length-1>=k.ipIterator?_a.slice(-k.ipIterator++-1)[0]:(k.ipIterator=0,_a.slice(-1)[0])}),Md(),fb(function(_a){if(void 0===_a)return Z(Error("Invalid edge info"));var _l=new Sl(_a.ip,f,_a.ticket,k.context,k.logger,_r);return _l.on("connectionFailure",function(){return k.onSocketConnectionFailure(_l)}),_r=!_l.useNewDomain,_l.open$.pipe(If(_l))}),ba(function(_a){k.log("The websocket of ENV_%d re-opened to %s:%d using ap",_a.env,_a.ip,rf[_a.env]),k.curOpenSockets[f]=_a,k.lastOpenSockets[f].next(_a)}),fb(function(_a){return _a.open$.pipe(ba(function(){k.log("The websocket of ENV_%d re-opened to %s:%d",_a.env,_a.ip,rf[_a.env]),k.curOpenSockets[f]=_a,k.lastOpenSockets[f].next(_a)}))}),De()),f===this.firstEnv?this.firstOpenKeeperSubject.next(q):this.secondOpenKeeperSubject.next(q)}}}]),l}(wb()),cd=nc.Writer,oa=nc.util,Gc=nc.roots.default||(nc.roots.default={}),NE=Gc.Session=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.appId="",h.prototype.ver="",h.prototype.buildno=0,h.prototype.installId="",h.prototype.os=0,h.prototype.did="",h.prototype.index=null,h.prototype.token="",h.prototype.version=0,h.prototype.subVersion=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.appId&&Object.hasOwnProperty.call(l,"appId")&&g.uint32(42).string(l.appId),null!=l.ver&&Object.hasOwnProperty.call(l,"ver")&&g.uint32(50).string(l.ver),null!=l.buildno&&Object.hasOwnProperty.call(l,"buildno")&&g.uint32(56).int32(l.buildno),null!=l.installId&&Object.hasOwnProperty.call(l,"installId")&&g.uint32(66).string(l.installId),null!=l.os&&Object.hasOwnProperty.call(l,"os")&&g.uint32(128).int32(l.os),null!=l.did&&Object.hasOwnProperty.call(l,"did")&&g.uint32(138).string(l.did),null!=l.index&&Object.hasOwnProperty.call(l,"index")&&Gc.Session.CommonIndex.encode(l.index,g.uint32(162).fork()).ldelim(),null!=l.token&&Object.hasOwnProperty.call(l,"token")&&g.uint32(170).string(l.token),null!=l.version&&Object.hasOwnProperty.call(l,"version")&&g.uint32(176).int32(l.version),null!=l.subVersion&&Object.hasOwnProperty.call(l,"subVersion")&&g.uint32(184).int32(l.subVersion),g},h.CommonIndex=function(){function l(g){if(g)for(var f=Object.keys(g),k=0;k<f.length;++k)null!=g[f[k]]&&(this[f[k]]=g[f[k]])}return l.prototype.index1="",l.prototype.index2="",l.prototype.index3="",l.encode=function(g,f){return f||(f=cd.create()),null!=g.index1&&Object.hasOwnProperty.call(g,"index1")&&f.uint32(10).string(g.index1),null!=g.index2&&Object.hasOwnProperty.call(g,"index2")&&f.uint32(18).string(g.index2),null!=g.index3&&Object.hasOwnProperty.call(g,"index3")&&f.uint32(26).string(g.index3),f},l}(),h}(),OE=Gc.Link=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.ec=0,h.prototype.sc=0,h.prototype.destServerIp="",h.prototype.ackedServerIp="",h.prototype.responseTime=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.ec&&Object.hasOwnProperty.call(l,"ec")&&g.uint32(40).int32(l.ec),null!=l.sc&&Object.hasOwnProperty.call(l,"sc")&&g.uint32(48).int32(l.sc),null!=l.destServerIp&&Object.hasOwnProperty.call(l,"destServerIp")&&g.uint32(58).string(l.destServerIp),null!=l.ackedServerIp&&Object.hasOwnProperty.call(l,"ackedServerIp")&&g.uint32(66).string(l.ackedServerIp),null!=l.responseTime&&Object.hasOwnProperty.call(l,"responseTime")&&g.uint32(72).int32(l.responseTime),g},h}(),PE=Gc.Logout=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),g},h}(),QE=Gc.KickedOff=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.linkId=0,h.prototype.code=0,h.prototype.server="",h.prototype.serverCode=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.linkId&&Object.hasOwnProperty.call(l,"linkId")&&g.uint32(48).int32(l.linkId),null!=l.code&&Object.hasOwnProperty.call(l,"code")&&g.uint32(56).int32(l.code),null!=l.server&&Object.hasOwnProperty.call(l,"server")&&g.uint32(66).string(l.server),null!=l.serverCode&&Object.hasOwnProperty.call(l,"serverCode")&&g.uint32(72).int32(l.serverCode),g},h}(),RE=Gc.ChnJoin=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.cname="",h.prototype.errCode=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.cname&&Object.hasOwnProperty.call(l,"cname")&&g.uint32(50).string(l.cname),null!=l.errCode&&Object.hasOwnProperty.call(l,"errCode")&&g.uint32(56).int32(l.errCode),g},h}(),SE=Gc.ChnJoinRes=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.cname="",h.prototype.errCode=0,h.prototype.serverErrCode=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.cname&&Object.hasOwnProperty.call(l,"cname")&&g.uint32(50).string(l.cname),null!=l.errCode&&Object.hasOwnProperty.call(l,"errCode")&&g.uint32(56).int32(l.errCode),null!=l.serverErrCode&&Object.hasOwnProperty.call(l,"serverErrCode")&&g.uint32(64).int32(l.serverErrCode),g},h}(),TE=Gc.ChnLeave=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.cname="",h.prototype.errCode=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.cname&&Object.hasOwnProperty.call(l,"cname")&&g.uint32(50).string(l.cname),null!=l.errCode&&Object.hasOwnProperty.call(l,"errCode")&&g.uint32(56).int32(l.errCode),g},h}(),UE=Gc.ConnectionStateChange=function(){function h(l){if(l)for(var g=Object.keys(l),f=0;f<g.length;++f)null!=l[g[f]]&&(this[g[f]]=l[g[f]])}return h.prototype.sid="",h.prototype.userId="",h.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,h.prototype.oldState=0,h.prototype.newState=0,h.prototype.reason=0,h.prototype.reconnId=0,h.encode=function(l,g){return g||(g=cd.create()),null!=l.sid&&Object.hasOwnProperty.call(l,"sid")&&g.uint32(10).string(l.sid),null!=l.userId&&Object.hasOwnProperty.call(l,"userId")&&g.uint32(18).string(l.userId),null!=l.lts&&Object.hasOwnProperty.call(l,"lts")&&g.uint32(24).int64(l.lts),null!=l.elapse&&Object.hasOwnProperty.call(l,"elapse")&&g.uint32(32).int64(l.elapse),null!=l.oldState&&Object.hasOwnProperty.call(l,"oldState")&&g.uint32(40).int32(l.oldState),null!=l.newState&&Object.hasOwnProperty.call(l,"newState")&&g.uint32(48).int32(l.newState),null!=l.reason&&Object.hasOwnProperty.call(l,"reason")&&g.uint32(56).int32(l.reason),null!=l.reconnId&&Object.hasOwnProperty.call(l,"reconnId")&&g.uint32(64).int32(l.reconnId),g},h}(),aw=Object.freeze({__proto__:null,Session:NE,Link:OE,Logout:PE,KickedOff:QE,ChnJoin:RE,ChnJoinRes:SE,ChnLeave:TE,ConnectionStateChange:UE,default:Gc}),bw=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),VE=function(h){function l(f,k,q){return X(this,l),m(n(q=g.call(this,q,"Context")),"_token",void 0),m(n(q),"config",void 0),m(n(q),"_uid",void 0),m(n(q),"_sid",void 0),m(n(q),"_area","CN"),m(n(q),"_socketUseProxy",!1),m(n(q),"appId",void 0),m(n(q),"enableCloudProxy",!1),m(n(q),"cloudProxyServers",[]),q.appId=f,q.config=k,q}ja(l,h);var g=ka(l);return Ia(l,[{key:"socketUseProxy",get:function(){return this._socketUseProxy&&lc.ENABLE_EDGE_AUTO_FALLBACK},set:function(f){this.log("socketUseProxy is set to %s",f),this._socketUseProxy=f}},{key:"token",set:function(f){this._token="string"==typeof f&&f?f:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Ma("Cannot get illegal uid")},set:function(f){if(this.log("The user ID is set to %s",pa(f)),!Aa(f))throw new Ma;this._uid=f}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Ma("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Ma("Cannot get illegal sid")},set:function(f){if(this.log("sid is set to %s",f),"string"!=typeof f||!f)throw new Ma;this._sid=f}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Ma("Cannot get illegal area")},set:function(f){this.log("area is set to %s",f),"string"==typeof f&&f?this._area=f:this.warn("set area failed")}}]),l}(wb()),WE=!!Nc&&R(function(){Nc.prototype.finally.call({then:function(){}},function(){})});if(M({target:"Promise",proto:!0,real:!0,forced:WE},{finally:function(h){var l=od(this,Rb("Promise")),g="function"==typeof h;return this.then(g?function(f){return bk(l,h()).then(function(){return f})}:h,g?function(f){return bk(l,h()).then(function(){throw f})}:h)}}),"function"==typeof Nc){var dt=Rb("Promise").prototype.finally;Nc.prototype.finally!==dt&&Ea(Nc.prototype,"finally",dt,{unsafe:!0})}var XE=function(){var h=J(x.mark(function l(g){return x.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=Uint8Array,f.next=3,crypto.subtle.digest("SHA-256",g);case 3:return f.t1=f.sent,f.abrupt("return",new f.t0(f.t1));case 5:case"end":return f.stop()}},l)}));return function(l){return h.apply(this,arguments)}}(),et=function(h){return Array.from(h).map(function(l){return l.toString(16).padStart(2,"0")}).join("")},YE=function(h){if("string"!=typeof h)throw new TypeError("Expected input to be a string");if(h.length%2!=0)throw new RangeError("Expected string to be an even number of characters");for(var l=new Uint8Array(h.length/2),g=0;g<h.length;g+=2)l[g/2]=parseInt(h.substring(g,g+2),16);return l},ft=function(h){return btoa(String.fromCharCode.apply(String,G(h))).replace(/={1,2}$/,"")},gt=function(){var h=J(x.mark(function l(g){var f;return x.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,k.next=3,crypto.subtle.digest("SHA-1",g);case 3:f=k.sent,k.next=9;break;case 6:k.prev=6,k.t0=k.catch(0),f=sha1.arrayBuffer(g);case 9:return k.abrupt("return",ft(new Uint8Array(f)));case 10:case"end":return k.stop()}},l,null,[[0,6]])}));return function(l){return h.apply(this,arguments)}}(),ht=function(h,l,g,f){f[l]=!0,g.has(h)?g.get(h).add(l):g.set(h,new Set([l]))},ZE=function(h){switch(h){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},it=function(h){function l(f,k,q,_r){X(this,l);var _s=g.call(this,q,"ChunkDownloadManager");if(m(n(_s),"abortController",new AbortController),m(n(_s),"downloadedSize",0),m(n(_s),"successCount",0),m(n(_s),"timer",void 0),m(n(_s),"chunks",[]),m(n(_s),"retUnit",void 0),m(n(_s),"singleThread",!1),m(n(_s),"initialized",!1),m(n(_s),"ee",void 0),m(n(_s),"chunkCount",void 0),m(n(_s),"aborted",!1),m(n(_s),"serverToIndices",new Map),m(n(_s),"backupToIndices",new Map),m(n(_s),"indexToBackupServers",[]),m(n(_s),"busyBackupServers",new Map),m(n(_s),"downloadingChunks",new Set),m(n(_s),"metaInfo",void 0),m(n(_s),"transHandler",void 0),_s.metaInfo=f,_s.transHandler=k,_s.ee=void 0===_r?new ia:_r,q=f.size,f=f.unit,0===q)throw new Ma("size cannot be 0");return void 0!==k.cancelSignal&&k.cancelSignal.addEventListener("abort",function(){_s.abortController.abort()},{once:!0}),_s.abortController.signal.addEventListener("abort",function(){_s.aborted=!0},{once:!0}),_s.chunkCount=Math.ceil(q/(32768*f)),_s}ja(l,h);var g=ka(l);return Ia(l,[{key:"setInfoByResponse",value:function(f){var k=this,q=f.serverList,_r=f.backupList;if(f=f.unit,q.length<this.chunkCount&&_r.length<this.chunkCount)throw new Ma("servers is not enough");this.updateProgress(0),this.initialized=!0;var _s=Array(this.chunkCount).fill(!1);if(q.forEach(function(_a,_l){return _a.forEach(function(bh){return ht(bh,_l,k.serverToIndices,_s)})}),_r.forEach(function(_a,_l){return _a.forEach(function(bh){return ht(bh,_l,k.backupToIndices,_s)})}),_s.some(function(){return!1}))throw new da("Not enough servers to download",Eg);this.indexToBackupServers=_r.map(function(_a){return new Set(_a)}),this.retUnit=f}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):1===this.serverToIndices.size&&0===Array.from(this.serverToIndices.keys())[0]?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new da("not enough servers to download",Eg))}},{key:"updateProgress",value:function(f){var k=this,q=this.downloadedSize+f;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new bd("Invalid download size",Eg))):(this.downloadedSize=q,void 0!==this.timer&&0!==f&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&this.successCount!==this.chunkCount&&(this.timer=setTimeout(function(){k.ee.emit("timedOut"),k.abortController.abort()},12e4)),this.initialized&&0===f||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var f=0,k=0,q=this.chunks;k<q.length;k++)f+=q[k].byteLength;if(f!==this.metaInfo.size)throw new Ma("invalid chunks total size");f=new Uint8Array(f),q=k=0;for(var _r=this.chunks;q<_r.length;q++){var _s=_r[q];f.set(new Uint8Array(_s),k),k+=_s.byteLength}return k=Array.from(f.subarray(0,4)).map(function(_a){return _a.toString(16)}).join("").toUpperCase(),Uv(f.buffer,ZE(k))}},{key:"getDownloadUrl",value:function(f){var k=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat($g(f).split(".").join("-"),".edge.").concat(Pd(null)?null:k,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var f=J(x.mark(function k(q){var _r,_s=this,_a=arguments;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:return _r=1<_a.length&&void 0!==_a[1]&&_a[1],_l.next=3,Promise.all(Array.from(q.entries()).map(function(bh){return bh=ua(bh,2),_s.postDownloadRequest(bh[0],Array.from(bh[1]),_r).catch(function(n_){404===n_.statusCode?(_s.ee.emit("notExist"),_s.abortController.abort()):"AbortError"!==n_.name&&(Xa(n_)?_s.singleThread?(_s.abortController.abort(),_s.ee.emit("timedOut")):(_s.warn("%d download timed out after %d, retrying use single thread",n_.index,_s.singleThread?6e4:3e4),_s.abortController.abort(),_s.singleThread=!0,_s.ee.emit("multiTimeOut")):(_s.ee.emit("error",n_),_s.abortController.abort()))})}));case 3:case"end":return _l.stop()}},k)}));return function(k){return f.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var f=J(x.mark(function k(q,_r,_s){var _a,_l,bh,n_,_A,r_,p_,I_,v_,S_=this;return x.wrap(function(x_){for(;;)switch(x_.prev=x_.next){case 0:if(v_=function(){return(v_=J(x.mark(function B_(Q_){var _0,Qv,h0,E0,H_,e0,P_,Rv;return x.wrap(function(E_){for(;;)switch(E_.prev=E_.next){case 0:if(E_.prev=0,void 0!==Q_||0!==q){E_.next=5;break}throw new Ma("Invalid serverIp");case 5:_0=void 0===Q_?p_.getDownloadUrl(q):Q_;case 6:return p_.downloadingChunks.add(_a),E_.next=9,r_(_0);case 9:return Qv=E_.sent.responseData,p_.downloadingChunks.delete(_a),E_.abrupt("return",Qv);case 15:if(E_.prev=15,E_.t0=E_.catch(0),p_.downloadingChunks.delete(_a),_r.unshift(_a),p_.metaInfo.useNewDomain=!1,"AbortError"!==E_.t0.name){E_.next=22;break}throw E_.t0;case 22:if(!Xa(E_.t0)){E_.next=25;break}throw E_.t0.index=_a,E_.t0;case 25:if(h0=n_,n_+=1,!(2>h0)){E_.next=30;break}return E_.t0 instanceof Ma||p_.warn("%o, %d download failed, retrying",E_.t0,_a),E_.abrupt("return",I_());case 30:if(504!==E_.t0.statusCode){E_.next=34;break}throw(E0=new gb("download server timed out",{originalError:E_.t0,serverCode:504})).index=_a,E0;case 34:if(!_s||2!==h0||0===_A[0]){E_.next=45;break}return E_.t0 instanceof Ma||p_.warn("%d download failed, using backup: %d, %o",_a,_A[0],E_.t0),E_.next=38,p_.busyBackupServers.get(_A[0]);case 38:return H_=I_(p_.getDownloadUrl(_A[0])),p_.busyBackupServers.set(_A[0],H_),E_.next=42,H_;case 42:return e0=E_.sent,p_.busyBackupServers.delete(_A[0]),E_.abrupt("return",e0);case 45:if(!(_s&&2<h0&&void 0!==_A[1]&&0!==_A[1])){E_.next=56;break}return p_.warn("%d download failed, using backup 1: %d",_a,_A[1]),E_.next=49,p_.busyBackupServers.get(_A[1]);case 49:return P_=I_(p_.getDownloadUrl(_A[1])),p_.busyBackupServers.set(_A[1],P_),E_.next=53,P_;case 53:return Rv=E_.sent,p_.busyBackupServers.delete(_A[1]),E_.abrupt("return",Rv);case 56:throw E_.t0.index=_a,E_.t0;case 58:case"end":return E_.stop()}},B_,null,[[0,15]])}))).apply(this,arguments)},I_=function(B_){return v_.apply(this,arguments)},!this.aborted){x_.next=4;break}throw new Ma("download already aborted");case 4:if(void 0!==(_a=_r.shift())){x_.next=8;break}return this.log("%s download finished",q),x_.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){x_.next=10;break}return x_.abrupt("return");case 10:if(!this.downloadingChunks.has(_a)){x_.next=13;break}return this.log("%s already downloading, return",_a),x_.abrupt("return");case 13:if(void 0===this.chunks[_a]){x_.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",_a),x_.next=18,this.postDownloadRequest(q,_r,_s);case 18:return x_.abrupt("return");case 19:return _l=new FormData,bh={hash:cw(this.metaInfo.hashHexStr),unit:void 0===this.retUnit?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:_a},_l.append("parameter",JSON.stringify(bh)),n_=0,_A=Array.from(this.indexToBackupServers[_a]),r_=function(B_){return He(B_,{body:_l,signal:S_.abortController.signal,timeout:S_.singleThread?12e4:3e4},{useBinaryResponse:!0})},p_=this,x_.next=28,I_().then(function(B_){return void 0!==S_.chunks[_a]?S_.log("chunk %d download duplicated",_a):(S_.chunks[_a]=B_,S_.log("chunk %d downloaded",_a),S_.successCount+=1,S_.updateProgress(S_.chunks[_a].byteLength)),S_.successCount===S_.chunkCount&&(S_.log("chunks all download"),S_.ee.emit("finished")),S_.singleThread?(S_.downloadChunks(),Promise.resolve()):S_.postDownloadRequest(q,_r,_s)});case 28:case"end":return x_.stop()}},k,this)}));return function(k,q,_r){return f.apply(this,arguments)}}()}]),l}(wb()),jt=function(h){function l(f,k,q,_r){X(this,l);var _s=g.call(this,q,"ChunkUploadManager");if(m(n(_s),"chunkCount",0),m(n(_s),"chunks",[]),m(n(_s),"uploadedChunks",[]),m(n(_s),"totalFailures",0),m(n(_s),"timer",void 0),m(n(_s),"initState","uninitialized"),m(n(_s),"ee",void 0),m(n(_s),"unit",0),m(n(_s),"uploadedSize",0),m(n(_s),"singleThread",!1),m(n(_s),"abortController",new AbortController),m(n(_s),"servers",[]),m(n(_s),"aborted",!1),m(n(_s),"metaInfo",void 0),m(n(_s),"transHandler",void 0),_s.metaInfo=f,_s.transHandler=k,_s.ee=void 0===_r?new ia:_r,0===f.file.length)throw new H("file not found or is empty",Of);return void 0!==k.cancelSignal&&k.cancelSignal.addEventListener("abort",function(){_s.abortController.abort()},{once:!0}),_s.abortController.signal.addEventListener("abort",function(){_s.aborted=!0},{once:!0}),_s}ja(l,h);var g=ka(l);return Ia(l,[{key:"initChunks",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l,bh,n_=this;return x.wrap(function(_A){for(;;)switch(_A.prev=_A.next){case 0:if("initialized"!==this.initState&&"initializing"!==this.initState){_A.next=2;break}throw new Ma("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=q,_r=this.sliceFile(q,this.metaInfo.file),this.chunkCount=_r.length,_s=[],_a=function(r_,p_){var I_=(r_=ua(p_[r_],2))[0],v_=r_[1];r_=gt(v_).then(function(S_){n_.chunks[I_]={payload:v_,sha1:S_,uploadedTo:void 0,index:I_,processed:!1}}),_s.push(r_)},_l=0,bh=Array.from(_r.entries());_l<bh.length;_l++)_a(_l,bh);return _A.next=11,Promise.all(_s);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return _A.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var f=this;if(!this.aborted){for(var k=this.chunks.filter(function(_s){return!_s.processed}),q=function(_s){var _a=k[_s],_l=f.servers.filter(function(n_){return!n_.isUploading}).sort(function(n_,_A){return n_.successCount-_A.successCount}).sort(function(n_,_A){return n_.failureCount-_A.failureCount})[0];if(void 0===_l||1<_l.failureCount)return f.log("Upload server not available, waiting"),f.ee.emit("serverUsedUp"),gj(1e3).then(function(){f.totalFailures>2*f.chunkCount&&f.ee.emit("error"),f.totalFailures+=1,void 0!==_l&&(_l.failureCount=0),f.uploadToServers()}).catch(function(){}),"break";_a.processed=!0,_l.isUploading=!0,f.log("uploading chunk %d to server %s",_a.index,$g(_l.ip));var bh=f.getUploadUrl(_l.ip);return J(x.mark(function n_(){var _A;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:return r_.prev=0,r_.next=3,f.postChunk(_a.payload,bh,_a.index);case 3:_A=f.chunks.findIndex(function(p_){return p_===_a}),_a.uploadedTo=_l.ip,f.chunks.splice(_A,1),f.uploadedChunks.push(_a),_l.successCount+=1,_l.isUploading=!1,f.updateProgress(_a.payload.byteLength),f.log("upload chunk %d successfully",_a.index),r_.next=31;break;case 13:if(r_.prev=13,r_.t0=r_.catch(0),_l.isUploading=!1,_a.processed=!1,504!==r_.t0.statusCode&&!Xa(r_.t0)){r_.next=27;break}if(f.singleThread){r_.next=24;break}return f.warn("%d upload timed out after %d, retrying use single thread",_a.index,f.singleThread?12e4:3e4),f.abortController.abort(),f.singleThread=!0,f.ee.emit("multiTimeOut"),r_.abrupt("return");case 24:return f.ee.emit("timedOut"),f.abortController.abort(),r_.abrupt("return");case 27:return f.metaInfo.useNewDomain=!1,_l.failureCount+=1,r_.next=31,gj(1e3);case 31:f.uploadedChunks.length===f.chunkCount?(f.log("chunks uploaded"),f.ee.emit("finished")):(f.singleThread||1===f.chunks.filter(function(p_){return!p_.processed}).length)&&f.uploadToServers();case 32:case"end":return r_.stop()}},n_,null,[[0,13]])}))(),f.singleThread?"break":void 0},_r=0;_r<k.length&&"break"!==q(_r);_r++);0===k.length&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var f=!0,k=[],q=G(this.uploadedChunks).sort(function(_a,_l){return _a.index-_l.index}),_r=0;for(q=Array.from(q.values());_r<q.length;_r++){var _s=q[_r].uploadedTo;if(void 0===_s){f=!1;break}k.push(_s)}if(!f)throw new Ma("some chunks not uploaded, cannot get upload server ips");return k}},{key:"addServers",value:function(f){var k=this;f.forEach(function(q){var _r=k.servers.findIndex(function(_s){return _s.ip===q});-1!==_r?k.servers[_r].failureCount=0:(k.log("server %s added",$g(q)),k.servers.push({successCount:0,isUploading:!1,ip:q,failureCount:0}))})}},{key:"updateProgress",value:function(f){var k=this,q=void 0!==f?this.uploadedSize+f:this.metaInfo.file.length;q>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new bd("Invalid upload size",Dg))):(this.uploadedSize=q,void 0!==this.timer&&0!==f&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&void 0!==f&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout(function(){k.ee.emit("timedOut"),k.abortController.abort()},12e4)),"initialized"===this.initState&&0===f||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(f,k){var q=0,_r=[],_s=k.length;for(f*=32768;q<_s;)_r.push(k.slice(q,q+f)),q+=f;return this.log("chunks split into %d",_r.length),_r}},{key:"postChunk",value:function(){var f=J(x.mark(function k(q,_r,_s){var _a,_l,bh,n_,_A,r_,p_;return x.wrap(function(v_){for(;;)switch(v_.prev=v_.next){case 0:if(!this.aborted){v_.next=2;break}throw new Ma("upload already aborted");case 2:if(void 0!==this.unit){v_.next=4;break}throw new Ma("unit is undefined");case 4:return _l=(_a=this.metaInfo).ticket,bh=_a.instance,n_=_a.loginOpt,_A=_a.hashStr,v_.t0=_s,v_.t1=_A,v_.next=9,gt(q);case 9:return v_.t2=v_.sent,v_.t3=this.unit,v_.t4=_l,v_.t5=bh,v_.t6=n_,r_={index:v_.t0,hash:v_.t1,sha1:v_.t2,unit:v_.t3,ticket:v_.t4,instance:v_.t5,loginOpt:v_.t6},(p_=new FormData).append("parameter",JSON.stringify(r_)),p_.append("payload",new Blob([q])),v_.next=20,He(_r,{headers:{Accept:"application/json"},body:p_,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(201===v_.sent.status){v_.next=24;break}throw new da("uploading chunk ".concat(_s," failed"));case 24:case"end":return v_.stop()}},k,this)}));return function(k,q,_r){return f.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(f){var k=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat($g(f).split(".").join("-"),".edge.").concat(Pd(null)?null:k,":9601/api/v1/chuck/upload")}}]),l}(wb()),kt=function(h){function l(f){X(this,l);var k=g.call(this,f,"MediaTaskManager");return m(n(k),"isProcessing",!1),m(n(k),"authInfo",void 0),m(n(k),"taskFinishers",{}),m(n(k),"mediaTasks",new Map),m(n(k),"ongoingTask",void 0),k.on("connectionStateChanged",function(q){if(q===S.ConnectionState.ABORTED||q===S.ConnectionState.DISCONNECTED){void 0!==k.ongoingTask&&k.cancelTask(k.ongoingTask),q=0;for(var _r=Array.from(k.mediaTasks.entries());q<_r.length;q++){var _s=ua(_r[q],2)[1];k.cancelTask(_s)}k.mediaTasks.clear(),k.taskFinishers={}}else q===S.ConnectionState.RECONNECTING?void 0!==k.ongoingTask&&k.ongoingTask.manager.abortController.abort():q===S.ConnectionState.CONNECTED&&void 0!==k.ongoingTask&&k.ongoingTask.manager.ee.emit("reconnected")}),k}ja(l,h);var g=ka(l);return Ia(l,[{key:"setAuthInfo",value:function(f){this.authInfo=f}},{key:"waitMediaTask",value:function(f){var k=this;return new Promise(function(q,_r){k.taskFinishers[f]={resolve:q,reject:_r},k.isProcessing||k.processMediaTask()}).finally(function(){void 0!==k.ongoingTask&&void 0!==k.ongoingTask.manager.timer&&clearTimeout(k.ongoingTask.manager.timer),delete k.taskFinishers[f],0!==k.mediaTasks.size?k.processMediaTask():k.isProcessing=!1})}},{key:"addUploadTask",value:function(f,k,q,_r){var _s=f.file;if(f=f.hash,void 0===this.authInfo)throw new Ma("session not found");if(this.mediaTasks.size>=l.MAX_PENDING_TASK_COUNT-1)throw new lb("Upload media failed, exceed max pending jobs",tC);return _r=new jt({hashStr:ft(f),file:_s,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),useNewDomain:this.authInfo.useNewDomain},_r,this.logger),_s=de(),this.mediaTasks.set(_s,{type:"UPLOAD",manager:_r,hash:f,setter:q,fetcher:k,taskId:_s}),_s}},{key:"addDownloadTask",value:function(f,k,q){var _r=f.hashHexStr,_s=f.size,_a=f.unit;if(f=f.zone,void 0===this.authInfo)throw new Ma("session not found");if(this.mediaTasks.size>=l.MAX_PENDING_TASK_COUNT-1)throw new lb("Download media failed, exceed max pending jobs",xC);return q=new it({hashHexStr:_r,ticket:this.authInfo.ticket,useNewDomain:this.authInfo.useNewDomain,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:_s,zone:f,unit:_a},q,this.logger),_r=de(),this.mediaTasks.set(_r,{type:"DOWNLOAD",manager:q,fetcher:k,taskId:_r}),_r}},{key:"doDownloadTaskImpl",value:function(){var f=J(x.mark(function k(q,_r){var _s,_a,_l,bh,n_,_A,r_,p_,I_=this,v_=arguments;return x.wrap(function(S_){for(;;)switch(S_.prev=S_.next){case 0:return _l=_a=q.manager,(_s=2<v_.length&&void 0!==v_[2]&&v_[2])&&(_a=new it(_l.metaInfo,_l.transHandler,this.logger,_l.ee)),bh=q.fetcher,S_.next=7,bh();case 7:if(_A=(n_=S_.sent).serverList,r_=n_.backupList,p_=n_.unit,!_s||p_===_l.retUnit){S_.next=13;break}throw new da("download unit is different, reject to continue",Eg);case 13:_s&&(q.manager=_a,_a.downloadedSize=_l.downloadedSize,_a.successCount=_l.successCount,_a.timer=_l.timer,_a.chunks=_l.chunks,_a.initialized=_l.initialized,_a.singleThread=_l.singleThread,_a.updateProgress(0)),_a.ee.once("reconnected",function(){_a.ee.removeAllListeners(),I_.doDownloadTaskImpl(q,_r,!0).catch(function(x_){_r.reject(x_)})}),_a.ee.once("multiTimeOut",function(){_a.ee.removeAllListeners(),I_.doDownloadTaskImpl(q,_r,!0).catch(function(x_){_r.reject(x_)})}),_a.ee.once("error",function(x_){_a.ee.removeAllListeners(),_r.reject(new da(["download file file, index %d",x_.index],{code:Eg,originalError:x_}))}),_a.ee.once("notExist",function(){_a.abortController.abort(),_a.ee.removeAllListeners(),_r.reject(new da("download file not found",wC))}),_a.ee.once("timedOut",function(){_a.ee.removeAllListeners(),_a.abortController.abort(),_r.reject(new gb("download timed out",vC))}),void 0!==_a.transHandler.cancelSignal&&_a.transHandler.cancelSignal.addEventListener("abort",function(){_r.reject(new Ol("Downloading canceled",ms))},{once:!0}),_a.ee.once("finished",function(){_r.resolve({type:"DOWNLOAD",payload:_a.getPayload()})}),_a.setInfoByResponse({serverList:_A,backupList:r_,unit:p_}),_a.downloadChunks();case 23:case"end":return S_.stop()}},k,this)}));return function(k,q){return f.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(f,k){var q=this,_r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_s=f.taskId;return _r||(this.mediaTasks.delete(_s),this.ongoingTask=f),new Promise(function(_a,_l){q.doDownloadTaskImpl(f,k,_r).then(_a).catch(_l)})}},{key:"doUploadTaskImpl",value:function(){var f=J(x.mark(function k(q,_r){var _s,_a,_l,bh,n_,_A,r_,I_,v_=this,S_=arguments;return x.wrap(function(x_){for(;;)switch(x_.prev=x_.next){case 0:return _l=_a=q.manager,(_s=2<S_.length&&void 0!==S_[2]&&S_[2])&&(_a=new jt(_l.metaInfo,_l.transHandler,this.logger,_l.ee)),bh=q.fetcher,n_=new Ua,r_=new Promise(function(B_,Q_){var E0,_0=bh(),c0=_0.ret,Qv=_0.err,h0=_0.timeout;_0.fin.pipe(rb(n_)).subscribe({next:function(E0){_r.resolve({type:"UPLOAD",retUnit:E0.unit,zone:E0.zone})},complete:function(){B_({hasExist:!0}),n_.next(),n_.complete()}}),c0.pipe(rb(n_),fb((E0=J(x.mark(function H_(e0){var P_,Rv;return x.wrap(function(E_){for(;;)switch(E_.prev=E_.next){case 0:if(P_=e0.servers,Rv=e0.unit,_s&&_l.unit!==Rv?_r.reject(new da("upload unit is different, reject to continue",Dg)):_s&&(q.manager=_a,_a.chunkCount=_l.chunkCount,_a.chunks=_l.chunks,_a.totalFailures=_l.totalFailures,_a.uploadedChunks=_l.uploadedChunks,_a.timer=_l.timer,_a.initState=_l.initState,_a.unit=_l.unit,_a.uploadedSize=_l.uploadedSize,_a.singleThread=_l.singleThread,_a.updateProgress(0)),_a.addServers(P_),"uninitialized"!==_a.initState){E_.next=7;break}return _A=_a.initChunks(Rv),E_.next=7,_A;case 7:case"end":return E_.stop()}},H_)})),function(H_){return E0.apply(this,arguments)}))).subscribe({complete:function(){return B_({hasExist:!1})},error:Q_}),_0=function(E0){"uninitialized"!==_a.initState&&_A?B_(_A.then(function(){return{hasExist:!1}})):Q_(E0)},Qv.pipe(rb(n_)).subscribe({error:_0}),h0.pipe(rb(n_)).subscribe({error:_0})}),x_.next=9,r_;case 9:if(!x_.sent.hasExist){x_.next=15;break}return _a.updateProgress(),this.log("file already exists, skipping upload"),x_.abrupt("return");case 15:n_.next(),n_.complete(),this.log("chunks initialization promise resolved"),I_=jb(_a.ee,"serverUsedUp").pipe(Av(function(){return _a.chunkCount!==_a.uploadedChunks.length}),Dv(5e3,void 0,{leading:!1}),sn(function(){return bh().ret})).subscribe(function(B_){_a.addServers(B_.servers)}),_a.ee.once("reconnected",function(){_a.ee.removeAllListeners(),v_.doUploadTask(q,_r,!0).catch(function(B_){_r.reject(B_)})}),_a.ee.once("multiTimeOut",function(){_a.ee.removeAllListeners(),v_.doUploadTask(q,_r,!0).catch(function(B_){_r.reject(B_)})}),_a.ee.once("timedOut",function(){I_.unsubscribe(),_a.ee.removeAllListeners(),_a.abortController.abort(),_r.reject(new gb("upload timed out",ji))}),_a.ee.once("error",function(B_){I_.unsubscribe(),_a.ee.removeAllListeners(),_a.abortController.abort(),_r.reject(B_||new da("upload error",Dg))}),void 0!==_a.transHandler.cancelSignal&&_a.transHandler.cancelSignal.addEventListener("abort",function(){_r.reject(new Ol("Uploading canceled",ls))},{once:!0}),_a.ee.once("finished",J(x.mark(function B_(){var Q_,_0,c0;return x.wrap(function(Qv){for(;;)switch(Qv.prev=Qv.next){case 0:return I_.unsubscribe(),Qv.next=3,q.setter(_a.unit,_a.getUploadServerIPs());case 3:_0=(Q_=Qv.sent).zone,c0=Q_.unit,_a.ee.removeAllListeners(),_r.resolve({type:"UPLOAD",retUnit:c0,zone:_0});case 8:case"end":return Qv.stop()}},B_)}))),_a.uploadToServers();case 26:case"end":return x_.stop()}},k,this)}));return function(k,q){return f.apply(this,arguments)}}()},{key:"doUploadTask",value:function(f,k){var q=this,_r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_s=f.taskId;return _r||(this.mediaTasks.delete(_s),this.ongoingTask=f),new Promise(function(_a,_l){q.doUploadTaskImpl(f,k,_r).then(_a).catch(_l)})}},{key:"processMediaTask",value:function(){var f=J(x.mark(function k(){var q,_r,_s;return x.wrap(function(_a){for(;;)switch(_a.prev=_a.next){case 0:if(0!==this.mediaTasks.size){_a.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,q=this.mediaTasks.keys().next().value,void 0!==(_r=this.taskFinishers[q])){_a.next=7;break}throw Error("top task not found");case 7:if(void 0!==(_s=this.mediaTasks.get(q))){_a.next=10;break}throw new Ma("task invalid");case 10:if("UPLOAD"!==_s.type){_a.next=15;break}return _a.next=13,this.doUploadTask(_s,_r).catch(function(_l){_s.manager.ee.removeAllListeners(),_r.reject(_l)});case 13:_a.next=18;break;case 15:if("DOWNLOAD"!==_s.type){_a.next=18;break}return _a.next=18,this.doDownloadTask(_s,_r).catch(function(_l){_s.manager.ee.removeAllListeners(),_r.reject(_l)});case 18:case"end":return _a.stop()}},k,this)}));return function(){return f.apply(this,arguments)}}()},{key:"cancelTask",value:function(f){var k="DOWNLOAD"===f.type?ms:ls;f.manager.ee.removeAllListeners(),f.manager.abortController.abort(),void 0!==this.taskFinishers[f.taskId]&&this.taskFinishers[f.taskId].reject(new Ol("User logged out or kicked off, media task canceled",k))}}]),l}(wb());m(kt,"MAX_PENDING_TASK_COUNT",9),Up("of",function(){for(var h=0,l=arguments.length,g=new(cf(this))(l);l>h;)g[h]=arguments[h++];return g},nk);var lt=1/0,$E=Math.max,ew=function(h,l,g){var f=Object(h);if(!Nd(h)){var k=jf(l);h=Jd(h),l=function(q){return k(f[q],q,f)}}return-1<(l=function(q,_r,_s){var _a=null==q?0:q.length;if(!_a)return-1;if(null==_s)_s=0;else{var _l=(_s=_s?(_s=Nl(_s))===lt||_s===-lt?17976931348623157e292*(0>_s?-1:1):_s==_s?_s:0:0===_s?_s:0)%1;_s=_s==_s?_l?_s-_l:_s:0}return 0>_s&&(_s=$E(_a+_s,0)),ar(q,jf(_r),_s)}(h,l,g))?f[k?h[l]:l]:void 0},dw=function(h,l){return h&&h.length?bl(h,void 0,"function"==typeof l?l:void 0):[]},mt=function(){function h(){X(this,h),m(this,"size",0),m(this,"fields",new Map)}return Ia(h,[{key:"define",value:function(l,g,f){if(this.size+=f,64<this.size)throw new RangeError("the struct over 64 bits is not supported");jh(g={val:0,isNumber:"number"===g,isBoolean:"boolean"===g,oneof:"number"===g||"boolean"===g?void 0:g,len:f}),this.fields.set(l,g)}},{key:"set",value:function(l,g){if(!(l=this.fields.get(l)))throw Error("field not found");var f=l.oneof;if(!U.isLong(g)&&"number"!=typeof g)if("boolean"==typeof g)g=g?1:0;else{if(void 0===f)throw Error("invalid field type");if(void 0===(g=f[g]))throw Error("field type not found")}jh(l,g),l.val=g}},{key:"toNumber",value:function(){for(var l=0,g=0,f=0,k=Array.from(this.fields);f<k.length;f++){var q=ua(k[f],2)[1],_r=q.len;void 0!==(q=q.val)&&(l+=U.fromValue(q).shiftLeft(g).toNumber(),g+=_r)}return l}},{key:"toLong",value:function(){for(var l=U.fromNumber(0,!0),g=0,f=0,k=Array.from(this.fields);f<k.length;f++){var q=ua(k[f],2)[1],_r=q.len;void 0!==(q=q.val)&&(l=U.fromValue(q).shiftLeft(g).add(l),g+=_r)}return l}},{key:"assert",value:function(l,g){function f(_r){if(!U.isLong(_r)&&"number"!=typeof _r)if("boolean"==typeof _r)_r=_r?1:0;else{if(void 0===q)throw Error("invalid field type");if(void 0===(_r=q[_r]))throw Error("field type not found")}return jh(k,_r),ih(_r,k.val)}var k=this.fields.get(l);if(!k)throw Error("field not found");var q=k.oneof;if(!Array.isArray(g))return f(g);if(1===g.length)return f(g[0]);if(g.every(function(_r){return"string"==typeof _r})&&void 0!==q)return g.some(function(_r){return f(_r)});throw Error("invalid valueTypes")}},{key:"from",value:function(l){l=U.fromValue(l);for(var g=0,f=0,k=Array.from(this.fields);f<k.length;f++){var q=ua(k[f],2)[1],_r=q.len,_s=U.fromNumber(Math.pow(2,_r)-1,!0).shiftLeft(g);jh(q,_s=l.and(_s).shiftRightUnsigned(g)),q.val=_s,g+=_r}}},{key:"typeOf",value:function(l){if(void 0!==(l=this.fields.get(l))){var g=l.oneof;if(l=l.val,void 0!==g){var f=0;for(g=Object.entries(g);f<g.length;f++){var k=ua(g[f],2),q=k[0];if(ih(l,k[1]))return q}}}throw new TypeError("can only get type of oneof type")}}]),h}(),nt=function(h){function l(f){X(this,l);var k=g.call(this);return k.define("Rejoin","boolean",1),k.define("Unused","number",31),k.define("Platform","number",8),k.define("Version","number",12),k.define("Subversion","number",12),k.set("Platform",7),k.set("Version",4),k.set("Subversion",15),k.set("Rejoin",f),k}ja(l,h);var g=ka(l);return l}(mt),aF=wa(wa(wa(wa({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),ot={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},bF=wa(wa({},aF),ot),cF={Uncompressed:0,Zlib:1},ke=function(h){function l(f){X(this,l);var k=g.call(this);if(k.define("MessageType",bF,8),k.define("BroadcastJumps","number",2),k.define("ToCache","boolean",1),k.define("FromCache","boolean",1),k.define("CompressionMethod",cF,2),k.define("IterationNumber","number",4),k.define("BufferedMessage","boolean",1),k.define("ToArchive","boolean",1),k.define("FromArchive","boolean",1),"number"==typeof f||U.isLong(f))k.from(f);else if(void 0!==f){var q=0;for(f=eh(f);q<f.length;q++){var _r=ua(f[q],2);k.set(_r[0],_r[1])}}return k}ja(l,h);var g=ka(l);return Ia(l,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(f){var k=this;return void 0!==f?this.assert("MessageType",f):Pf(ot).some(function(q){return k.assert("MessageType",q)})}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),l}(mt),dF=function(h){function l(f){return X(this,l),m(n(f=g.call(this,f,"ChatManager")),"dialogueLru",new Nz(void 0,{maxlen:1e4,ttl:1e4})),f}ja(l,h);var g=ka(l);return Ia(l,[{key:"getChatInfo",value:function(f){var k=this.dialogueLru.get(f);if(this.dialogueLru.prune(),k){var q=k.dialogue,_r={dialogue:q,sequence:k=k.sequence.add(1)};return this.dialogueLru.set(f,{dialogue:q,sequence:k}),_r}return q={dialogue:Yg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(f,q),q}}]),l}(wb()),v={};"object"==V(module)&&(module.exports=v),v.parse=function(h,l){var g,f=v.bin.readUshort,k=v.bin.readUint,q={};for(g=(h=new Uint8Array(h)).length-4;101010256!=k(h,g);)g--;var _r=f(h,g=g+4+4);f(h,g+=2),k(h,g+=2),g=k(h,g+=4);for(var _s=0;_s<_r;_s++){k(h,g),g+=4,g+=4,g+=4,k(h,g+=4);var _a=k(h,g+=4),_l=k(h,g+=4),bh=f(h,g+=4),n_=f(h,g+2),_A=f(h,g+4);g+=6;var r_=k(h,g+=8);g+=4,g+=bh+n_+_A,v._readLocal(h,r_,q,_a,_l,l)}return q},v._readLocal=function(h,l,g,f,k,q){var _r=v.bin.readUshort,_s=v.bin.readUint;_s(h,l),_r(h,l+=4),_r(h,l+=2);var _a=_r(h,l+=2);_s(h,l+=2),_s(h,l+=4),_s=_r(h,l=l+4+8);var _l=_r(h,l+=2);if(_r=v.bin.readUTF8(h,l+=2,_s),l=l+_s+_l,q)g[_r]={size:k,csize:f};else if(h=new Uint8Array(h.buffer,l),0==_a)g[_r]=new Uint8Array(h.buffer.slice(l,l+f));else{if(8!=_a)throw"unknown compression method: "+_a;l=new Uint8Array(k),v.inflateRaw(h,l),g[_r]=l}},v.inflateRaw=function(h,l){return v.F.inflate(h,l)},v.inflate=function(h,l){return v.inflateRaw(new Uint8Array(h.buffer,h.byteOffset+2,h.length-2),l)},v.deflate=function(h,l){null==l&&(l={level:6});var g=0,f=new Uint8Array(50+Math.floor(1.1*h.length));return f[g]=120,f[g+1]=156,g=v.F.deflateRaw(h,f,g+2,l.level),h=v.adler(h,0,h.length),f[g+0]=h>>>24&255,f[g+1]=h>>>16&255,f[g+2]=h>>>8&255,f[g+3]=h>>>0&255,new Uint8Array(f.buffer,0,g+4)},v.deflateRaw=function(h,l){null==l&&(l={level:6});var g=new Uint8Array(50+Math.floor(1.1*h.length)),f=v.F.deflateRaw(h,g,f,l.level);return new Uint8Array(g.buffer,0,f)},v.encode=function(h,l){null==l&&(l=!1);var g,f=0,k=v.bin.writeUint,q=v.bin.writeUshort,_r={};for(g in h){var _s=!v._noNeed(g)&&!l,_a=h[g],_l=v.crc.crc(_a,0,_a.length);_r[g]={cpr:_s,usize:_a.length,crc:_l,file:_s?v.deflateRaw(_a):_a}}for(g in _r)f+=_r[g].file.length+30+46+2*v.bin.sizeUTF8(g);for(g in h=new Uint8Array(f+22),l=0,_a=[],_r)_l=_r[g],_a.push(l),l=v._writeHeader(h,l,g,_l,0);for(g in f=0,_s=l,_r)_l=_r[g],_a.push(l),l=v._writeHeader(h,l,g,_l,1,_a[f++]);return _r=l-_s,k(h,l,101010256),q(h,l=l+4+4,f),q(h,l+=2,f),k(h,l+=2,_r),k(h,l+4,_s),h.buffer},v._noNeed=function(h){return h=h.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(h)},v._writeHeader=function(h,l,g,f,k,q){var _r=v.bin.writeUint,_s=v.bin.writeUshort,_a=f.file;return _r(h,l,0==k?67324752:33639248),l+=4,1==k&&(l+=2),_s(h,l,20),_s(h,l+=2,0),_s(h,l+=2,f.cpr?8:0),_r(h,l+=2,0),_r(h,l+=4,f.crc),_r(h,l+=4,_a.length),_r(h,l+=4,f.usize),_s(h,l+=4,v.bin.sizeUTF8(g)),_s(h,l+=2,0),l+=2,1==k&&(_r(h,l=l+2+2+6,q),l+=4),l+=g=v.bin.writeUTF8(h,l,g),0==k&&(h.set(_a,l),l+=_a.length),l},v.crc={table:function(){for(var h=new Uint32Array(256),l=0;256>l;l++){for(var g=l,f=0;8>f;f++)g=1&g?3988292384^g>>>1:g>>>1;h[l]=g}return h}(),update:function(h,l,g,f){for(var k=0;k<f;k++)h=v.crc.table[255&(h^l[g+k])]^h>>>8;return h},crc:function(h,l,g){return 4294967295^v.crc.update(4294967295,h,l,g)}},v.adler=function(h,l,g){var f=1,k=0,q=l;for(l+=g;q<l;){for(g=Math.min(q+5552,l);q<g;)k+=f+=h[q++];f%=65521,k%=65521}return k<<16|f},v.bin={readUshort:function(h,l){return h[l]|h[l+1]<<8},writeUshort:function(h,l,g){h[l]=255&g,h[l+1]=g>>8&255},readUint:function(h,l){return 16777216*h[l+3]+(h[l+2]<<16|h[l+1]<<8|h[l])},writeUint:function(h,l,g){h[l]=255&g,h[l+1]=g>>8&255,h[l+2]=g>>16&255,h[l+3]=g>>24&255},readASCII:function(h,l,g){for(var f="",k=0;k<g;k++)f+=String.fromCharCode(h[l+k]);return f},writeASCII:function(h,l,g){for(var f=0;f<g.length;f++)h[l+f]=g.charCodeAt(f)},pad:function(h){return 2>h.length?"0"+h:h},readUTF8:function(h,l,g){for(var f,k="",q=0;q<g;q++)k+="%"+v.bin.pad(h[l+q].toString(16));try{f=decodeURIComponent(k)}catch(_r){return v.bin.readASCII(h,l,g)}return f},writeUTF8:function(h,l,g){for(var f=g.length,k=0,q=0;q<f;q++){var _r=g.charCodeAt(q);if(0==(4294967168&_r))h[l+k]=_r,k++;else if(0==(4294965248&_r))h[l+k]=192|_r>>6,h[l+k+1]=128|_r>>0&63,k+=2;else if(0==(4294901760&_r))h[l+k]=224|_r>>12,h[l+k+1]=128|_r>>6&63,h[l+k+2]=128|_r>>0&63,k+=3;else{if(0!=(4292870144&_r))throw"e";h[l+k]=240|_r>>18,h[l+k+1]=128|_r>>12&63,h[l+k+2]=128|_r>>6&63,h[l+k+3]=128|_r>>0&63,k+=4}}return k},sizeUTF8:function(h){for(var l=h.length,g=0,f=0;f<l;f++){var k=h.charCodeAt(f);if(0==(4294967168&k))g++;else if(0==(4294965248&k))g+=2;else if(0==(4294901760&k))g+=3;else{if(0!=(4292870144&k))throw"e";g+=4}}return g}},v.F={},v.F.deflateRaw=function(h,l,g,f){var k=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],q=v.F.U,_r=v.F._goodIndex,_s=v.F._putsE,_a=0;g<<=3;var _l=0,bh=h.length;if(0==f){for(;_a<bh;){var n_=Math.min(65535,bh-_a);_s(l,g,_a+n_==bh?1:0),g=v.F._copyExact(h,_a,n_,l,g+8),_a+=n_}return g>>>3}_s=q.lits,f=q.strt;var _A=q.prev,r_=0,p_=0,I_=0,v_=0,S_=0;for(2<bh&&(f[S_=v.F._hash(h,0)]=0),_a=0;_a<bh;_a++){if(n_=S_,_a+1<bh-2){S_=v.F._hash(h,_a+1);var x_=_a+1&32767;_A[x_]=f[S_],f[S_]=x_}if(_l<=_a){if((14e3<r_||26697<p_)&&100<bh-_a&&(_l<_a&&(_s[r_]=_a-_l,r_+=2,_l=_a),g=v.F._writeBlock(_a==bh-1||_l==bh?1:0,_s,r_,v_,h,I_,_a-I_,l,g),r_=p_=v_=0,I_=_a),x_=0,_a<bh-2&&(x_=v.F._bestMatch(h,_a,_A,n_,Math.min(k[2],bh-_a),k[3])),0!=x_){n_=x_>>>16,x_&=65535;var B_=_r(n_,q.of0);q.lhst[257+B_]++;var Q_=_r(x_,q.df0);q.dhst[Q_]++,v_+=q.exb[B_]+q.dxb[Q_],_s[r_]=n_<<23|_a-_l,_s[r_+1]=x_<<16|B_<<8|Q_,r_+=2,_l=_a+n_}else q.lhst[h[_a]]++;p_++}}for(I_==_a&&0!=h.length||(_l<_a&&(_s[r_]=_a-_l,r_+=2),g=v.F._writeBlock(1,_s,r_,v_,h,I_,_a-I_,l,g));0!=(7&g);)g++;return g>>>3},v.F._bestMatch=function(h,l,g,f,k,q){var _r=32767&l,_s=g[_r],_a=_r-_s+32768&32767;if(_s==_r||f!=v.F._hash(h,l-_a))return 0;for(var _l=f=0,bh=Math.min(32767,l);_a<=bh&&0!=--q&&_s!=_r;){if((0==f||h[l+f]==h[l+f-_a])&&(_r=v.F._howLong(h,l,_a))>f){if(_l=_a,(f=_r)>=k)break;_a+2<_r&&(_r=_a+2);for(var n_=0,_A=0;_A<_r-2;_A++){var r_=l-_a+_A+32768&32767,p_=r_-g[r_]+32768&32767;p_>n_&&(n_=p_,_s=r_)}}_a+=(_r=_s)-(_s=g[_r])+32768&32767}return f<<16|_l},v.F._howLong=function(h,l,g){if(h[l]!=h[l-g]||h[l+1]!=h[l+1-g]||h[l+2]!=h[l+2-g])return 0;var f=l,k=Math.min(h.length,l+258);for(l+=3;l<k&&h[l]==h[l-g];)l++;return l-f},v.F._hash=function(h,l){return(h[l]<<8|h[l+1])+(h[l+2]<<4)&65535},v.saved=0,v.F._writeBlock=function(h,l,g,f,k,q,_r,_s,_a){var _l=v.F.U,bh=v.F._putsF,n_=v.F._putsE;_l.lhst[256]++;var _A=v.F.getTrees(),r_=_A[0],p_=_A[1],I_=_A[2],v_=_A[3],S_=_A[4],x_=_A[5],B_=_A[6];_A=_A[7];var Q_=32+(0==(_a+3&7)?0:8-(_a+3&7))+(_r<<3),_0=f+v.F.contSize(_l.fltree,_l.lhst)+v.F.contSize(_l.fdtree,_l.dhst);f=f+v.F.contSize(_l.ltree,_l.lhst)+v.F.contSize(_l.dtree,_l.dhst),f+=14+3*x_+v.F.contSize(_l.itree,_l.ihst)+(2*_l.ihst[16]+3*_l.ihst[17]+7*_l.ihst[18]);for(var c0=0;286>c0;c0++)_l.lhst[c0]=0;for(c0=0;30>c0;c0++)_l.dhst[c0]=0;for(c0=0;19>c0;c0++)_l.ihst[c0]=0;if(Q_=Q_<_0&&Q_<f?0:_0<f?1:2,bh(_s,_a,h),bh(_s,_a+1,Q_),_a+=3,0==Q_){for(;0!=(7&_a);)_a++;_a=v.F._copyExact(k,q,_r,_s,_a)}else{if(1==Q_)var Qv=_l.fltree,h0=_l.fdtree;if(2==Q_){for(v.F.makeCodes(_l.ltree,r_),v.F.revCodes(_l.ltree,r_),v.F.makeCodes(_l.dtree,p_),v.F.revCodes(_l.dtree,p_),v.F.makeCodes(_l.itree,I_),v.F.revCodes(_l.itree,I_),Qv=_l.ltree,h0=_l.dtree,n_(_s,_a,v_-257),n_(_s,_a+=5,S_-1),n_(_s,_a+=5,x_-4),_a+=4,h=0;h<x_;h++)n_(_s,_a+3*h,_l.itree[1+(_l.ordr[h]<<1)]);_a=v.F._codeTiny(B_,_l.itree,_s,_a+3*x_),_a=v.F._codeTiny(_A,_l.itree,_s,_a)}for(x_=0;x_<g;x_+=2){for(B_=(h=l[x_])>>>23,h=q+(8388607&h);q<h;)_a=v.F._writeLit(k[q++],Qv,_s,_a);0!=B_&&(h=(r_=l[x_+1])>>16,_r=r_>>8&255,r_&=255,n_(_s,_a=v.F._writeLit(257+_r,Qv,_s,_a),B_-_l.of0[_r]),bh(_s,_a=v.F._writeLit(r_,h0,_s,_a+=_l.exb[_r]),h-_l.df0[r_]),_a+=_l.dxb[r_],q+=B_)}_a=v.F._writeLit(256,Qv,_s,_a)}return _a},v.F._copyExact=function(h,l,g,f,k){var q=k>>>3;return f[q]=g,f[q+1]=g>>>8,f[q+2]=255-f[q],f[q+3]=255-f[q+1],q+=4,f.set(new Uint8Array(h.buffer,l,g),q),k+(g+4<<3)},v.F.getTrees=function(){for(var h=v.F.U,l=v.F._hufTree(h.lhst,h.ltree,15),g=v.F._hufTree(h.dhst,h.dtree,15),f=[],k=v.F._lenCodes(h.ltree,f),q=[],_r=v.F._lenCodes(h.dtree,q),_s=0;_s<f.length;_s+=2)h.ihst[f[_s]]++;for(_s=0;_s<q.length;_s+=2)h.ihst[q[_s]]++;_s=v.F._hufTree(h.ihst,h.itree,7);for(var _a=19;4<_a&&0==h.itree[1+(h.ordr[_a-1]<<1)];)_a--;return[l,g,_s,k,_r,_a,f,q]},v.F.getSecond=function(h){for(var l=[],g=0;g<h.length;g+=2)l.push(h[g+1]);return l},v.F.nonZero=function(h){for(var l="",g=0;g<h.length;g+=2)0!=h[g+1]&&(l+=(g>>1)+",");return l},v.F.contSize=function(h,l){for(var g=0,f=0;f<l.length;f++)g+=l[f]*h[1+(f<<1)];return g},v.F._codeTiny=function(h,l,g,f){for(var k=0;k<h.length;k+=2){var q=h[k],_r=h[k+1];f=v.F._writeLit(q,l,g,f);var _s=16==q?2:17==q?3:7;15<q&&(v.F._putsE(g,f,_r,_s),f+=_s)}return f},v.F._lenCodes=function(h,l){for(var g=h.length;2!=g&&0==h[g-1];)g-=2;for(var f=0;f<g;f+=2){var k=h[f+1],q=f+3<g?h[f+3]:-1,_r=f+5<g?h[f+5]:-1,_s=0==f?-1:h[f-1];if(0==k&&q==k&&_r==k){for(q=f+5;q+2<g&&h[q+2]==k;)q+=2;11>(k=Math.min(q+1-f>>>1,138))?l.push(17,k-3):l.push(18,k-11),f+=2*k-2}else if(k==_s&&q==k&&_r==k){for(q=f+5;q+2<g&&h[q+2]==k;)q+=2;k=Math.min(q+1-f>>>1,6),l.push(16,k-3),f+=2*k-2}else l.push(k,0)}return g>>>1},v.F._hufTree=function(h,l,g){var f=[],k=h.length,q=l.length,_r=0;for(_r=0;_r<q;_r+=2)l[_r]=0,l[_r+1]=0;for(_r=0;_r<k;_r++)0!=h[_r]&&f.push({lit:_r,f:h[_r]});if(h=f.length,k=f.slice(0),0==h)return 0;if(1==h)return l[1+((g=f[0].lit)<<1)]=1,l[1+((0==g?1:0)<<1)]=1;f.sort(function(bh,n_){return bh.f-n_.f});var _s=0,_a=1,_l=2;for(f[0]={lit:-1,f:(_r=f[0]).f+(q=f[1]).f,l:_r,r:q,d:0};_a!=h-1;)_r=_s!=_a&&(_l==h||f[_s].f<f[_l].f)?f[_s++]:f[_l++],q=_s!=_a&&(_l==h||f[_s].f<f[_l].f)?f[_s++]:f[_l++],f[_a++]={lit:-1,f:_r.f+q.f,l:_r,r:q};for((f=v.F.setDepth(f[_a-1],0))>g&&(v.F.restrictDepth(k,g,f),f=g),_r=0;_r<h;_r++)l[1+(k[_r].lit<<1)]=k[_r].d;return f},v.F.setDepth=function(h,l){return-1!=h.lit?h.d=l:Math.max(v.F.setDepth(h.l,l+1),v.F.setDepth(h.r,l+1))},v.F.restrictDepth=function(h,l,g){var f=0,k=1<<g-l,q=0;for(h.sort(function(_s,_a){return _a.d==_s.d?_s.f-_a.f:_a.d-_s.d}),f=0;f<h.length&&h[f].d>l;f++){var _r=h[f].d;h[f].d=l,q+=k-(1<<g-_r)}for(q>>>=g-l;0<q;)(_r=h[f].d)<l?(h[f].d++,q-=1<<l-_r-1):f++;for(;0<=f;f--)h[f].d==l&&0>q&&(h[f].d--,q++);0!=q&&console.log("debt left")},v.F._goodIndex=function(h,l){var g=0;return l[16|g]<=h&&(g|=16),l[8|g]<=h&&(g|=8),l[4|g]<=h&&(g|=4),l[2|g]<=h&&(g|=2),l[1|g]<=h&&(g|=1),g},v.F._writeLit=function(h,l,g,f){return v.F._putsF(g,f,l[h<<1]),f+l[1+(h<<1)]},v.F.inflate=function(h,l){var g=Uint8Array;if(3==h[0]&&0==h[1])return l||new g(0);var f=v.F,k=f._bitsF,q=f._bitsE,_r=f._decodeTiny,_s=f.makeCodes,_a=f.codes2map,_l=f._get17,bh=f.U,n_=null==l;n_&&(l=new g(h.length>>>2<<3));for(var _A,r_,p_,I_,v_=0,S_=0,x_=r_=0,B_=0;0==v_;)if(v_=k(h,B_,1),_A=k(h,B_+1,2),B_+=3,0==_A)0!=(7&B_)&&(B_+=8-(7&B_)),_A=h[(B_=4+(B_>>>3))-4]|h[B_-3]<<8,n_&&(l=v.F._check(l,x_+_A)),l.set(new g(h.buffer,h.byteOffset+B_,_A),x_),B_=B_+_A<<3,x_+=_A;else{if(n_&&(l=v.F._check(l,x_+131072)),1==_A&&(p_=bh.flmap,I_=bh.fdmap,S_=511,r_=31),2==_A){for(r_=q(h,B_,5)+257,_A=q(h,B_+5,5)+1,p_=q(h,B_+10,4)+4,B_+=14,I_=0;38>I_;I_+=2)bh.itree[I_]=0,bh.itree[I_+1]=0;for(S_=1,I_=0;I_<p_;I_++){var Q_=q(h,B_+3*I_,3);bh.itree[1+(bh.ordr[I_]<<1)]=Q_,Q_>S_&&(S_=Q_)}B_+=3*p_,_s(bh.itree,S_),_a(bh.itree,S_,bh.imap),p_=bh.lmap,I_=bh.dmap,B_=_r(bh.imap,(1<<S_)-1,r_+_A,h,B_,bh.ttree),S_=(1<<(Q_=f._copyOut(bh.ttree,0,r_,bh.ltree)))-1,r_=(1<<(_A=f._copyOut(bh.ttree,r_,_A,bh.dtree)))-1,_s(bh.ltree,Q_),_a(bh.ltree,Q_,p_),_s(bh.dtree,_A),_a(bh.dtree,_A,I_)}for(;;)if(B_+=15&(_A=p_[_l(h,B_)&S_]),(Q_=_A>>>4)>>>8==0)l[x_++]=Q_;else{if(256==Q_)break;_A=x_+Q_-254,264<Q_&&(_A=x_+((Q_=bh.ldef[Q_-257])>>>3)+q(h,B_,7&Q_),B_+=7&Q_),B_+=15&(Q_=I_[_l(h,B_)&r_]);var _0=((Q_=bh.ddef[Q_>>>4])>>>4)+k(h,B_,15&Q_);for(B_+=15&Q_,n_&&(l=v.F._check(l,x_+131072));x_<_A;)l[x_]=l[x_++-_0],l[x_]=l[x_++-_0],l[x_]=l[x_++-_0],l[x_]=l[x_++-_0];x_=_A}}return l.length==x_?l:l.slice(0,x_)},v.F._check=function(h,l){var g=h.length;return l<=g?h:((l=new Uint8Array(Math.max(g<<1,l))).set(h,0),l)},v.F._decodeTiny=function(h,l,g,f,k,q){for(var _r=v.F._bitsE,_s=v.F._get17,_a=0;_a<g;){var _l=h[_s(f,k)&l];k+=15&_l;var bh=_l>>>4;if(15>=bh)q[_a]=bh,_a++;else{var n_=_l=0;for(16==bh?(n_=3+_r(f,k,2),k+=2,_l=q[_a-1]):17==bh?(n_=3+_r(f,k,3),k+=3):18==bh&&(n_=11+_r(f,k,7),k+=7),bh=_a+n_;_a<bh;)q[_a]=_l,_a++}}return k},v.F._copyOut=function(h,l,g,f){for(var k=0,q=0,_r=f.length>>>1;q<g;){var _s=h[q+l];f[q<<1]=0,f[1+(q<<1)]=_s,_s>k&&(k=_s),q++}for(;q<_r;)f[q<<1]=0,f[1+(q<<1)]=0,q++;return k},v.F.makeCodes=function(h,l){var g,f,k=v.F.U,q=h.length,_r=k.bl_count;for(g=0;g<=l;g++)_r[g]=0;for(g=1;g<q;g+=2)_r[h[g]]++;for(k=k.next_code,g=0,_r[0]=0,f=1;f<=l;f++)k[f]=g=g+_r[f-1]<<1;for(l=0;l<q;l+=2)0!=(_r=h[l+1])&&(h[l]=k[_r],k[_r]++)},v.F.codes2map=function(h,l,g){for(var f=h.length,k=v.F.U.rev15,q=0;q<f;q+=2)if(0!=h[q+1]){var _r=h[q+1],_s=q>>1<<4|_r,_a=l-_r;for(_a=(_r=h[q]<<_a)+(1<<_a);_r!=_a;)g[k[_r]>>>15-l]=_s,_r++}},v.F.revCodes=function(h,l){for(var g=v.F.U.rev15,f=15-l,k=0;k<h.length;k+=2)h[k]=g[h[k]<<l-h[k+1]]>>>f},v.F._putsE=function(h,l,g){g<<=7&l,h[l>>>=3]|=g,h[l+1]|=g>>>8},v.F._putsF=function(h,l,g){g<<=7&l,h[l>>>=3]|=g,h[l+1]|=g>>>8,h[l+2]|=g>>>16},v.F._bitsE=function(h,l,g){return(h[l>>>3]|h[1+(l>>>3)]<<8)>>>(7&l)&(1<<g)-1},v.F._bitsF=function(h,l,g){return(h[l>>>3]|h[1+(l>>>3)]<<8|h[2+(l>>>3)]<<16)>>>(7&l)&(1<<g)-1},v.F._get17=function(h,l){return(h[l>>>3]|h[1+(l>>>3)]<<8|h[2+(l>>>3)]<<16)>>>(7&l)},v.F._get25=function(h,l){return(h[l>>>3]|h[1+(l>>>3)]<<8|h[2+(l>>>3)]<<16|h[3+(l>>>3)]<<24)>>>(7&l)},v.F.U=function(){var h=Uint16Array,l=Uint32Array;return{next_code:new h(16),bl_count:new h(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new h(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new l(32),flmap:new h(512),fltree:[],fdmap:new h(32),fdtree:[],lmap:new h(32768),ltree:[],ttree:[],dmap:new h(32768),dtree:[],imap:new h(512),itree:[],rev15:new h(32768),lhst:new l(286),dhst:new l(30),ihst:new l(19),lits:new l(15e3),strt:new h(65536),prev:new h(32768)}}(),function(){function h(k,q,_r){for(;0!=q--;)k.push(0,_r)}for(var l=v.F.U,g=0;32768>g;g++){var f=g;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,l.rev15[g]=(f>>>16|f<<16)>>>17}for(g=0;32>g;g++)l.ldef[g]=l.of0[g]<<3|l.exb[g],l.ddef[g]=l.df0[g]<<4|l.dxb[g];h(l.fltree,144,8),h(l.fltree,112,9),h(l.fltree,24,7),h(l.fltree,8,8),v.F.makeCodes(l.fltree,9),v.F.codes2map(l.fltree,9,l.flmap),v.F.revCodes(l.fltree,9),h(l.fdtree,32,5),v.F.makeCodes(l.fdtree,5),v.F.codes2map(l.fdtree,5,l.fdmap),v.F.revCodes(l.fdtree,5),h(l.itree,19,0),h(l.ltree,286,0),h(l.dtree,30,0),h(l.ttree,320,0)}();var eF=Array.isArray||function(h){return h&&"number"==typeof h.length},fF=Object.defineProperty({isArray:eF},"__esModule",{value:!0}),gF=Object.defineProperty({isObject:function(h){return null!==h&&"object"===V(h)}},"__esModule",{value:!0}),hF=Object.defineProperty({isFunction:function(h){return"function"==typeof h}},"__esModule",{value:!0}),iF=function(){function h(l){return Error.call(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map(function(g,f){return f+1+") "+g.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l,this}return h.prototype=Object.create(Error.prototype),h}(),kh=Object.defineProperty({UnsubscriptionError:iF},"__esModule",{value:!0}),jF=function(){function h(l){this.closed=!1,this._subscriptions=this._parentOrParents=null,l&&(this._ctorUnsubscribe=!0,this._unsubscribe=l)}return h.prototype.unsubscribe=function(){if(!this.closed){var l=this._parentOrParents,g=this._ctorUnsubscribe,f=this._unsubscribe,k=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,l instanceof h)l.remove(this);else if(null!==l)for(var q=0;q<l.length;++q)l[q].remove(this);if(hF.isFunction(f)){g&&(this._unsubscribe=void 0);try{f.call(this)}catch(_s){var _r=_s instanceof kh.UnsubscriptionError?go(_s.errors):[_s]}}if(fF.isArray(k))for(q=-1,l=k.length;++q<l;)if(gF.isObject(g=k[q]))try{g.unsubscribe()}catch(_s){_r=_r||[],_s instanceof kh.UnsubscriptionError?_r=_r.concat(go(_s.errors)):_r.push(_s)}if(_r)throw new kh.UnsubscriptionError(_r)}},h.prototype.add=function(l){var g=l;if(!l)return h.EMPTY;switch(V(l)){case"function":g=new h(l);case"object":if(g===this||g.closed||"function"!=typeof g.unsubscribe)return g;if(this.closed)return g.unsubscribe(),g;g instanceof h||(l=g,(g=new h)._subscriptions=[l]);break;default:throw Error("unrecognized teardown "+l+" added to Subscription.")}if(null===(l=g._parentOrParents))g._parentOrParents=this;else if(l instanceof h){if(l===this)return g;g._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return g;l.push(this)}return null===(l=this._subscriptions)?this._subscriptions=[g]:l.push(g),g},h.prototype.remove=function(l){var g=this._subscriptions;g&&-1!==(l=g.indexOf(l))&&g.splice(l,1)},h.EMPTY=function(l){return l.closed=!0,l}(new h),h}(),kF=Object.defineProperty({Subscription:jF},"__esModule",{value:!0}),lF=Ka&&Ka.__extends||function(){var h=function(l,g){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,k){f.__proto__=k}||function(f,k){for(var q in k)k.hasOwnProperty(q)&&(f[q]=k[q])})(l,g)};return function(l,g){function f(){this.constructor=l}h(l,g),l.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)}}(),mF=function(h){function l(g,f){return h.call(this)||this}return lF(l,h),l.prototype.schedule=function(g,f){return this},l}(kF.Subscription),nF=Object.defineProperty({Action:mF},"__esModule",{value:!0}),oF=Ka&&Ka.__extends||function(){var h=function(l,g){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,k){f.__proto__=k}||function(f,k){for(var q in k)k.hasOwnProperty(q)&&(f[q]=k[q])})(l,g)};return function(l,g){function f(){this.constructor=l}h(l,g),l.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)}}(),pt=function(h){function l(g,f){var k=h.call(this,g,f)||this;return k.scheduler=g,k.work=f,k.pending=!1,k}return oF(l,h),l.prototype.schedule=function(g,f){if(void 0===f&&(f=0),this.closed)return this;this.state=g;var k=this.scheduler;return null!=(g=this.id)&&(this.id=this.recycleAsyncId(k,g,f)),this.pending=!0,this.delay=f,this.id=this.id||this.requestAsyncId(k,this.id,f),this},l.prototype.requestAsyncId=function(g,f,k){return void 0===k&&(k=0),setInterval(g.flush.bind(g,this),k)},l.prototype.recycleAsyncId=function(g,f,k){if(void 0===k&&(k=0),null!==k&&this.delay===k&&!1===this.pending)return f;clearInterval(f)},l.prototype.execute=function(g,f){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(g=this._execute(g,f))?g:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},l.prototype._execute=function(g,f){f=!1;var k=void 0;try{this.work(g)}catch(q){f=!0,k=!!q&&q||Error(q)}if(f)return this.unsubscribe(),k},l.prototype._unsubscribe=function(){var g=this.id,f=this.scheduler,k=f.actions,q=k.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==q&&k.splice(q,1),null!=g&&(this.id=this.recycleAsyncId(f,g,null)),this.delay=null},l}(nF.Action);Object.defineProperty({AsyncAction:pt},"__esModule",{value:!0});var pF=function(){function h(l,g){void 0===g&&(g=h.now),this.SchedulerAction=l,this.now=g}return h.prototype.schedule=function(l,g,f){return void 0===g&&(g=0),new this.SchedulerAction(this,l).schedule(f,g)},h.now=function(){return Date.now()},h}(),qt=Object.defineProperty({Scheduler:pF},"__esModule",{value:!0}),qF=Ka&&Ka.__extends||function(){var h=function(l,g){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,k){f.__proto__=k}||function(f,k){for(var q in k)k.hasOwnProperty(q)&&(f[q]=k[q])})(l,g)};return function(l,g){function f(){this.constructor=l}h(l,g),l.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)}}(),rt=function(h){function l(g,f){void 0===f&&(f=qt.Scheduler.now);var k=h.call(this,g,function(){return l.delegate&&l.delegate!==k?l.delegate.now():f()})||this;return k.actions=[],k.active=!1,k.scheduled=void 0,k}return qF(l,h),l.prototype.schedule=function(g,f,k){return void 0===f&&(f=0),l.delegate&&l.delegate!==this?l.delegate.schedule(g,f,k):h.prototype.schedule.call(this,g,f,k)},l.prototype.flush=function(g){var f=this.actions;if(this.active)f.push(g);else{var k;this.active=!0;do{if(k=g.execute(g.state,g.delay))break}while(g=f.shift());if(this.active=!1,k){for(;g=f.shift();)g.unsubscribe();throw k}}},l}(qt.Scheduler);Object.defineProperty({AsyncScheduler:rt},"__esModule",{value:!0});var rF=qa("iterator"),Tl=!R(function(){var h=new URL("b?a=1&b=2&c=3","http://a"),l=h.searchParams,g="";return h.pathname="c%20d",l.forEach(function(f,k){l.delete("b"),g+=k+f}),!l.sort||"http://a/c%20d?a=1&c=3"!==h.href||"3"!==l.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!l[rF]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==g||"x"!==new URL("http://x",void 0).host}),sF=/[^\0-\u007E]/,tF=/[.\u3002\uFF0E\uFF61]/g,sf=Math.floor,Ul=String.fromCharCode,st=function(h){return h+22+75*(26>h)},uF=function(h){for(var l=[],g=[],f=0,k=h.length;f<k;){var q=h.charCodeAt(f++);if(55296<=q&&56319>=q&&f<k){var _r=h.charCodeAt(f++);56320==(64512&_r)?g.push(((1023&q)<<10)+(1023&_r)+65536):(g.push(q),f--)}else g.push(q)}g=(h=g).length,f=128;var _s=0,_a=72;for(k=0;k<h.length;k++){var _l=h[k];128>_l&&l.push(Ul(_l))}for((_r=q=l.length)&&l.push("-");_r<g;){var bh=2147483647;for(k=0;k<h.length;k++)(_l=h[k])>=f&&_l<bh&&(bh=_l);var n_=_r+1;if(bh-f>sf((2147483647-_s)/n_))throw RangeError("Overflow: input needs wider integers to process");for(_s+=(bh-f)*n_,f=bh,k=0;k<h.length;k++){if((_l=h[k])<f&&2147483647<++_s)throw RangeError("Overflow: input needs wider integers to process");if(_l==f){var _A=_s;for(_l=36;!(_A<(bh=_l<=_a?1:_l>=_a+26?26:_l-_a));_l+=36){var r_=36-bh;l.push(Ul(st(bh+(_A-=bh)%r_))),_A=sf(_A/r_)}for(l.push(Ul(st(_A))),_a=n_,_l=0,_s=_r==q?sf(_s/700):_s>>1,_s+=sf(_s/_a);455<_s;_l+=36)_s=sf(_s/35);_a=sf(_l+36*_s/(_s+38)),_s=0,++_r}}++_s,++f}return l.join("")},tt=function(h){var l=Zf(h);if("function"!=typeof l)throw TypeError(String(h)+" is not iterable");return sa(l.call(h))},ut=Rb("fetch"),Vl=Rb("Headers"),vF=qa("iterator"),vt=La.set,Hb=La.getterFor("URLSearchParams"),wF=La.getterFor("URLSearchParamsIterator"),xF=/\+/g,wt=Array(4),yF=function(h){return wt[h-1]||(wt[h-1]=RegExp("((?:%[\\da-f]{2}){"+h+"})","gi"))},zF=function(h){try{return decodeURIComponent(h)}catch(l){return h}},xt=function(h){h=h.replace(xF," ");var l=4;try{return decodeURIComponent(h)}catch(g){for(;l;)h=h.replace(yF(l--),zF);return h}},yt=/[!'()~]|%20/g,AF={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},zt=function(h){return AF[h]},At=function(h,l){if(l){l=l.split("&");for(var g,f=0;f<l.length;)(g=l[f++]).length&&(g=g.split("="),h.push({key:xt(g.shift()),value:xt(g.join("="))}))}},BF=function(h){this.entries.length=0,At(this.entries,h)},tf=function(h,l){if(h<l)throw TypeError("Not enough arguments")},Wl=Zo(function(h,l){vt(this,{type:"URLSearchParamsIterator",iterator:tt(Hb(h).entries),kind:l})},"Iterator",function(){var h=wF(this),l=h.kind,g=(h=h.iterator.next()).value;return h.done||(h.value="keys"===l?g.key:"values"===l?g.value:[g.key,g.value]),h}),Fg=function(){hc(this,Fg,"URLSearchParams");var h,l,g,f=0<arguments.length?arguments[0]:void 0,k=[];if(vt(this,{type:"URLSearchParams",entries:k,updateURL:function(){},updateSearchParams:BF}),void 0!==f)if(ha(f)){var q=Zf(f);if("function"==typeof q)for(f=q.call(f),q=f.next;!(h=q.call(f)).done;){var _r=(h=tt(sa(h.value))).next;if((l=_r.call(h)).done||(g=_r.call(h)).done||!_r.call(h).done)throw TypeError("Expected sequence with length 2");k.push({key:l.value+"",value:g.value+""})}else for(h in f)Q(f,h)&&k.push({key:h,value:f[h]+""})}else At(k,"string"==typeof f?"?"===f.charAt(0)?f.slice(1):f:f+"")},pi=Fg.prototype;Xe(pi,{append:function(h,l){tf(arguments.length,2);var g=Hb(this);g.entries.push({key:h+"",value:l+""}),g.updateURL()},delete:function(h){tf(arguments.length,1);for(var l=Hb(this),g=l.entries,f=h+"",k=0;k<g.length;)g[k].key===f?g.splice(k,1):k++;l.updateURL()},get:function(h){tf(arguments.length,1);for(var l=Hb(this).entries,g=h+"",f=0;f<l.length;f++)if(l[f].key===g)return l[f].value;return null},getAll:function(h){tf(arguments.length,1);for(var l=Hb(this).entries,g=h+"",f=[],k=0;k<l.length;k++)l[k].key===g&&f.push(l[k].value);return f},has:function(h){tf(arguments.length,1);for(var l=Hb(this).entries,g=h+"",f=0;f<l.length;)if(l[f++].key===g)return!0;return!1},set:function(h,l){tf(arguments.length,1);for(var g,f=Hb(this),k=f.entries,q=!1,_r=h+"",_s=l+"",_a=0;_a<k.length;_a++)(g=k[_a]).key===_r&&(q?k.splice(_a--,1):(q=!0,g.value=_s));q||k.push({key:_r,value:_s}),f.updateURL()},sort:function(){var h,l,g=Hb(this),f=g.entries,k=f.slice();for(l=f.length=0;l<k.length;l++){var q=k[l];for(h=0;h<l;h++)if(f[h].key>q.key){f.splice(h,0,q);break}h===l&&f.push(q)}g.updateURL()},forEach:function(h){for(var l,g=Hb(this).entries,f=pd(h,1<arguments.length?arguments[1]:void 0,3),k=0;k<g.length;)f((l=g[k++]).value,l.key,this)},keys:function(){return new Wl(this,"keys")},values:function(){return new Wl(this,"values")},entries:function(){return new Wl(this,"entries")}},{enumerable:!0}),Ea(pi,vF,pi.entries),Ea(pi,"toString",function(){for(var h,l=Hb(this).entries,g=[],f=0;f<l.length;)h=l[f++],g.push(encodeURIComponent(h.key).replace(yt,zt)+"="+encodeURIComponent(h.value).replace(yt,zt));return g.join("&")},{enumerable:!0}),gc(Fg,"URLSearchParams"),M({global:!0,forced:!Tl},{URLSearchParams:Fg}),Tl||"function"!=typeof ut||"function"!=typeof Vl||M({global:!0,enumerable:!0,forced:!0},{fetch:function(h){var l=[h];if(1<arguments.length){var g=arguments[1];if(ha(g)){var f=g.body;if("URLSearchParams"===We(f)){var k=g.headers?new Vl(g.headers):new Vl;k.has("content-type")||k.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),g=Sb(g,{body:sc(0,String(f)),headers:sc(0,k)})}}l.push(g)}return ut.apply(this,l)}});var Gg=C.URL,CF=Fg,DF=La.set,Na=La.getterFor("URL"),EF=Math.floor,Bt=Math.pow,Ct=/[A-Za-z]/,FF=/[\d+-.A-Za-z]/,Xl=/\d/,GF=/^(0x|0X)/,HF=/^[0-7]+$/,IF=/^\d+$/,Dt=/^[\dA-Fa-f]+$/,JF=/[\0\t\n\r #%/:?@[\\]]/,KF=/[\0\t\n\r #/:?@[\\]]/,LF=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,MF=/[\t\n\r]/g,Yl=function(h,l){var g;if("["==l.charAt(0)){if("]"!=l.charAt(l.length-1))return"Invalid host";var f=NF(l.slice(1,-1));if(!f)return"Invalid host"}else if(bb(h)){for(f=[],l=l.toLowerCase().replace(tF,".").split("."),g=0;g<l.length;g++){var k=l[g];f.push(sF.test(k)?"xn--"+uF(k):k)}if(l=f.join("."),JF.test(l)||null===(f=OF(l)))return"Invalid host"}else{if(KF.test(l))return"Invalid host";for(f="",l=Td(l),g=0;g<l.length;g++)f+=Cd(l[g],qi)}h.host=f},OF=function(h){var l,g=h.split(".");g.length&&""==g[g.length-1]&&g.pop();var f=g.length;if(4<f)return h;var k=[];for(l=0;l<f;l++){var q=g[l];if(""==q)return h;var _r=10;if(1<q.length&&"0"==q.charAt(0)&&(_r=GF.test(q)?16:8,q=q.slice(8==_r?1:2)),""===q)q=0;else{if(!(10==_r?IF:8==_r?HF:Dt).test(q))return h;q=parseInt(q,_r)}k.push(q)}for(l=0;l<f;l++)if(q=k[l],l==f-1){if(q>=Bt(256,5-f))return null}else if(255<q)return null;for(h=k.pop(),l=0;l<k.length;l++)h+=k[l]*Bt(256,3-l);return h},NF=function(h){var l,g,f=[0,0,0,0,0,0,0,0],k=0,q=null,_r=0,_s=function(){return h.charAt(_r)};if(":"==_s()){if(":"!=h.charAt(1))return;_r+=2,q=++k}for(;_s();){if(8==k)return;if(":"==_s()){if(null!==q)return;_r++,q=++k}else{for(l=g=0;4>g&&Dt.test(_s());)l=16*l+parseInt(_s(),16),_r++,g++;if("."==_s()){if(0==g||(_r-=g,6<k))return;for(l=0;_s();){if(g=null,0<l){if(!("."==_s()&&4>l))return;_r++}if(!Xl.test(_s()))return;for(;Xl.test(_s());){var _a=parseInt(_s(),10);if(null===g)g=_a;else{if(0==g)return;g=10*g+_a}if(255<g)return;_r++}f[k]=256*f[k]+g,2!=++l&&4!=l||k++}if(4!=l)return;break}if(":"==_s()){if(_r++,!_s())return}else if(_s())return;f[k++]=l}}if(null!==q)for(_s=k-q,k=7;0!=k&&0<_s;)l=f[k],f[k--]=f[q+_s-1],f[q+--_s]=l;else if(8!=k)return;return f},Hg=function(h){var l,g;if("number"==typeof h){var f=[];for(l=0;4>l;l++)f.unshift(h%256),h=EF(h/256);return f.join(".")}if("object"==typeof h){f="",l=null;for(var k=1,q=null,_r=0,_s=0;8>_s;_s++)0!==h[_s]?(_r>k&&(l=q,k=_r),q=null,_r=0):(null===q&&(q=_s),++_r);for(_r>k&&(l=q),k=l,l=0;8>l;l++)g&&0===h[l]||(g&&(g=!1),k===l?(f+=l?":":"::",g=!0):(f+=h[l].toString(16),7>l&&(f+=":")));return"["+f+"]"}return h},qi={},Et=ng({},qi,{" ":1,'"':1,"<":1,">":1,"`":1}),Ft=ng({},Et,{"#":1,"?":1,"{":1,"}":1}),Zl=ng({},Ft,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Cd=function(h,l){var g=Kw(h,0);return 32<g&&127>g&&!Q(l,h)?h:encodeURIComponent(h)},ri={ftp:21,file:null,http:80,https:443,ws:80,wss:443},bb=function(h){return Q(ri,h.scheme)},$l=function(h){return!h.host||h.cannotBeABaseURL||"file"==h.scheme},Ig=function(h,l){var g;return 2==h.length&&Ct.test(h.charAt(0))&&(":"==(g=h.charAt(1))||!l&&"|"==g)},Gt=function(h){var l;return 1<h.length&&Ig(h.slice(0,2))&&(2==h.length||"/"===(l=h.charAt(2))||"\\"===l||"?"===l||"#"===l)},Ht=function(h){var l=h.path,g=l.length;!g||"file"==h.scheme&&1==g&&Ig(l[0],!0)||l.pop()},am={},It={},bm={},Jt={},Kt={},cm={},Lt={},Mt={},si={},ti={},dm={},em={},fm={},gm={},Nt={},hm={},Jg={},Hc={},Ot={},le={},dd={},Ic=function(h,l,g,f){var k=g||am,q=0,_r="",_s=!1,_a=!1,_l=!1;for(g||(h.scheme="",h.username="",h.password="",h.host=null,h.port=null,h.path=[],h.query=null,h.fragment=null,h.cannotBeABaseURL=!1,l=l.replace(LF,"")),l=l.replace(MF,""),l=Td(l);q<=l.length;){var bh=l[q];switch(k){case am:if(!bh||!Ct.test(bh)){if(g)return"Invalid scheme";k=bm;continue}_r+=bh.toLowerCase(),k=It;break;case It:if(bh&&(FF.test(bh)||"+"==bh||"-"==bh||"."==bh))_r+=bh.toLowerCase();else{if(":"!=bh){if(g)return"Invalid scheme";_r="",k=bm,q=0;continue}if(g&&(bb(h)!=Q(ri,_r)||"file"==_r&&(""!=h.username||""!=h.password||null!==h.port)||"file"==h.scheme&&!h.host))return;if(h.scheme=_r,g)return void(bb(h)&&ri[h.scheme]==h.port&&(h.port=null));_r="","file"==h.scheme?k=gm:bb(h)&&f&&f.scheme==h.scheme?k=Jt:bb(h)?k=Mt:"/"==l[q+1]?(k=Kt,q++):(h.cannotBeABaseURL=!0,h.path.push(""),k=Ot)}break;case bm:if(!f||f.cannotBeABaseURL&&"#"!=bh)return"Invalid scheme";if(f.cannotBeABaseURL&&"#"==bh){h.scheme=f.scheme,h.path=f.path.slice(),h.query=f.query,h.fragment="",h.cannotBeABaseURL=!0,k=dd;break}k="file"==f.scheme?gm:cm;continue;case Jt:if("/"!=bh||"/"!=l[q+1]){k=cm;continue}k=si,q++;break;case Kt:if("/"==bh){k=ti;break}k=Hc;continue;case cm:if(h.scheme=f.scheme,null==bh)h.username=f.username,h.password=f.password,h.host=f.host,h.port=f.port,h.path=f.path.slice(),h.query=f.query;else if("/"==bh||"\\"==bh&&bb(h))k=Lt;else if("?"==bh)h.username=f.username,h.password=f.password,h.host=f.host,h.port=f.port,h.path=f.path.slice(),h.query="",k=le;else{if("#"!=bh){h.username=f.username,h.password=f.password,h.host=f.host,h.port=f.port,h.path=f.path.slice(),h.path.pop(),k=Hc;continue}h.username=f.username,h.password=f.password,h.host=f.host,h.port=f.port,h.path=f.path.slice(),h.query=f.query,h.fragment="",k=dd}break;case Lt:if(!bb(h)||"/"!=bh&&"\\"!=bh){if("/"!=bh){h.username=f.username,h.password=f.password,h.host=f.host,h.port=f.port,k=Hc;continue}k=ti}else k=si;break;case Mt:if(k=si,"/"!=bh||"/"!=_r.charAt(q+1))continue;q++;break;case si:if("/"!=bh&&"\\"!=bh){k=ti;continue}break;case ti:if("@"==bh){for(_s&&(_r="%40"+_r),_s=!0,_r=Td(_r),bh=0;bh<_r.length;bh++){var n_=_r[bh];":"!=n_||_l?(n_=Cd(n_,Zl),_l?h.password+=n_:h.username+=n_):_l=!0}_r=""}else if(null==bh||"/"==bh||"?"==bh||"#"==bh||"\\"==bh&&bb(h)){if(_s&&""==_r)return"Invalid authority";q-=Td(_r).length+1,_r="",k=dm}else _r+=bh;break;case dm:case em:if(g&&"file"==h.scheme){k=hm;continue}if(":"!=bh||_a){if(null==bh||"/"==bh||"?"==bh||"#"==bh||"\\"==bh&&bb(h)){if(bb(h)&&""==_r)return"Invalid host";if(g&&""==_r&&(""!=h.username||""!=h.password||null!==h.port))return;if(k=Yl(h,_r))return k;if(_r="",k=Jg,g)return;continue}"["==bh?_a=!0:"]"==bh&&(_a=!1),_r+=bh}else{if(""==_r)return"Invalid host";if(k=Yl(h,_r))return k;if(_r="",k=fm,g==em)return}break;case fm:if(!Xl.test(bh)){if(null==bh||"/"==bh||"?"==bh||"#"==bh||"\\"==bh&&bb(h)||g){if(""!=_r){if(65535<(k=parseInt(_r,10)))return"Invalid port";h.port=bb(h)&&k===ri[h.scheme]?null:k,_r=""}if(g)return;k=Jg;continue}return"Invalid port"}_r+=bh;break;case gm:if(h.scheme="file","/"==bh||"\\"==bh)k=Nt;else{if(!f||"file"!=f.scheme){k=Hc;continue}if(null==bh)h.host=f.host,h.path=f.path.slice(),h.query=f.query;else if("?"==bh)h.host=f.host,h.path=f.path.slice(),h.query="",k=le;else{if("#"!=bh){Gt(l.slice(q).join(""))||(h.host=f.host,h.path=f.path.slice(),Ht(h)),k=Hc;continue}h.host=f.host,h.path=f.path.slice(),h.query=f.query,h.fragment="",k=dd}}break;case Nt:if("/"==bh||"\\"==bh){k=hm;break}f&&"file"==f.scheme&&!Gt(l.slice(q).join(""))&&(Ig(f.path[0],!0)?h.path.push(f.path[0]):h.host=f.host),k=Hc;continue;case hm:if(null==bh||"/"==bh||"\\"==bh||"?"==bh||"#"==bh){if(!g&&Ig(_r))k=Hc;else{if(""==_r){if(h.host="",g)return}else{if(k=Yl(h,_r))return k;if("localhost"==h.host&&(h.host=""),g)return;_r=""}k=Jg}continue}_r+=bh;break;case Jg:if(bb(h)){if(k=Hc,"/"!=bh&&"\\"!=bh)continue}else if(g||"?"!=bh)if(g||"#"!=bh){if(null!=bh&&(k=Hc,"/"!=bh))continue}else h.fragment="",k=dd;else h.query="",k=le;break;case Hc:if(null==bh||"/"==bh||"\\"==bh&&bb(h)||!g&&("?"==bh||"#"==bh)){if(".."===(n_=(n_=_r).toLowerCase())||"%2e."===n_||".%2e"===n_||"%2e%2e"===n_?(Ht(h),"/"==bh||"\\"==bh&&bb(h)||h.path.push("")):"."===_r||"%2e"===_r.toLowerCase()?"/"==bh||"\\"==bh&&bb(h)||h.path.push(""):("file"==h.scheme&&!h.path.length&&Ig(_r)&&(h.host&&(h.host=""),_r=_r.charAt(0)+":"),h.path.push(_r)),_r="","file"==h.scheme&&(null==bh||"?"==bh||"#"==bh))for(;1<h.path.length&&""===h.path[0];)h.path.shift();"?"==bh?(h.query="",k=le):"#"==bh&&(h.fragment="",k=dd)}else _r+=Cd(bh,Ft);break;case Ot:"?"==bh?(h.query="",k=le):"#"==bh?(h.fragment="",k=dd):null!=bh&&(h.path[0]+=Cd(bh,qi));break;case le:g||"#"!=bh?null!=bh&&("'"==bh&&bb(h)?h.query+="%27":h.query="#"==bh?h.query+"%23":h.query+Cd(bh,qi)):(h.fragment="",k=dd);break;case dd:null!=bh&&(h.fragment+=Cd(bh,Et))}q++}},Dd=function(h){var l=hc(this,Dd,"URL"),g=1<arguments.length?arguments[1]:void 0,f=String(h),k=DF(l,{type:"URL"});if(void 0!==g)if(g instanceof Dd)var q=Na(g);else if(g=Ic(q={},String(g)))throw TypeError(g);if(g=Ic(k,f,null,q))throw TypeError(g);var _r=k.searchParams=new CF;(f=Hb(_r)).updateSearchParams(k.query),f.updateURL=function(){k.query=String(_r)||null},fa||(l.href=ui.call(l),l.origin=Pt.call(l),l.protocol=Qt.call(l),l.username=Rt.call(l),l.password=St.call(l),l.host=Tt.call(l),l.hostname=Ut.call(l),l.port=Vt.call(l),l.pathname=Wt.call(l),l.search=Xt.call(l),l.searchParams=Yt.call(l),l.hash=Zt.call(l))},im=Dd.prototype,ui=function(){var h=Na(this),l=h.scheme,f=h.password,k=h.host,q=h.port,_r=h.path,_s=h.query,_a=h.fragment,_l=l+":";return null!==k?(_l+="//",""==h.username&&""==h.password||(_l+=h.username+(f?":"+f:"")+"@"),_l+=Hg(k),null!==q&&(_l+=":"+q)):"file"==l&&(_l+="//"),_l+=h.cannotBeABaseURL?_r[0]:_r.length?"/"+_r.join("/"):"",null!==_s&&(_l+="?"+_s),null!==_a&&(_l+="#"+_a),_l},Pt=function(){var h=Na(this),l=h.scheme,g=h.port;if("blob"==l)try{return new Dd(l.path[0]).origin}catch(f){return"null"}return"file"!=l&&bb(h)?l+"://"+Hg(h.host)+(null!==g?":"+g:""):"null"},Qt=function(){return Na(this).scheme+":"},Rt=function(){return Na(this).username},St=function(){return Na(this).password},Tt=function(){var h=Na(this),l=h.host;return h=h.port,null===l?"":null===h?Hg(l):Hg(l)+":"+h},Ut=function(){var h=Na(this).host;return null===h?"":Hg(h)},Vt=function(){var h=Na(this).port;return null===h?"":String(h)},Wt=function(){var h=Na(this),l=h.path;return h.cannotBeABaseURL?l[0]:l.length?"/"+l.join("/"):""},Xt=function(){var h=Na(this).query;return h?"?"+h:""},Yt=function(){return Na(this).searchParams},Zt=function(){var h=Na(this).fragment;return h?"#"+h:""},$b=function(h,l){return{get:h,set:l,configurable:!0,enumerable:!0}};if(fa&&Wo(im,{href:$b(ui,function(h){var l=Na(this);if(h=Ic(l,String(h)))throw TypeError(h);Hb(l.searchParams).updateSearchParams(l.query)}),origin:$b(Pt),protocol:$b(Qt,function(h){var l=Na(this);Ic(l,String(h)+":",am)}),username:$b(Rt,function(h){var l=Na(this);if(h=Td(String(h)),!$l(l)){l.username="";for(var g=0;g<h.length;g++)l.username+=Cd(h[g],Zl)}}),password:$b(St,function(h){var l=Na(this);if(h=Td(String(h)),!$l(l)){l.password="";for(var g=0;g<h.length;g++)l.password+=Cd(h[g],Zl)}}),host:$b(Tt,function(h){var l=Na(this);l.cannotBeABaseURL||Ic(l,String(h),dm)}),hostname:$b(Ut,function(h){var l=Na(this);l.cannotBeABaseURL||Ic(l,String(h),em)}),port:$b(Vt,function(h){var l=Na(this);$l(l)||(""==(h=String(h))?l.port=null:Ic(l,h,fm))}),pathname:$b(Wt,function(h){var l=Na(this);l.cannotBeABaseURL||(l.path=[],Ic(l,h+"",Jg))}),search:$b(Xt,function(h){var l=Na(this);""==(h=String(h))?l.query=null:("?"==h.charAt(0)&&(h=h.slice(1)),l.query="",Ic(l,h,le)),Hb(l.searchParams).updateSearchParams(l.query)}),searchParams:$b(Yt),hash:$b(Zt,function(h){var l=Na(this);""==(h=String(h))?l.fragment=null:("#"==h.charAt(0)&&(h=h.slice(1)),l.fragment="",Ic(l,h,dd))})}),Ea(im,"toJSON",function(){return ui.call(this)},{enumerable:!0}),Ea(im,"toString",function(){return ui.call(this)},{enumerable:!0}),Gg){var $t=Gg.createObjectURL,au=Gg.revokeObjectURL;$t&&Ea(Dd,"createObjectURL",function(h){return $t.apply(Gg,arguments)}),au&&Ea(Dd,"revokeObjectURL",function(h){return au.apply(Gg,arguments)})}gc(Dd,"URL"),M({global:!0,forced:!Tl,sham:!fa},{URL:Dd});var PF=new Blob(["var fakeIdToId = {};onmessage = function (event) {\tvar data = event.data,\t\tname = data.name,\t\tfakeId = data.fakeId,\t\ttime;\tif(data.hasOwnProperty('time')) {\t\ttime = data.time;\t}\tswitch (name) {\t\tcase 'setInterval':\t\t\tfakeIdToId[fakeId] = setInterval(function () {\t\t\t\tpostMessage({fakeId: fakeId});\t\t\t}, time);\t\t\tbreak;\t\tcase 'clearInterval':\t\t\tif (fakeIdToId.hasOwnProperty (fakeId)) {\t\t\t\tclearInterval(fakeIdToId[fakeId]);\t\t\t\tdelete fakeIdToId[fakeId];\t\t\t}\t\t\tbreak;\t}}"]),QF=window.URL.createObjectURL(PF),Me={},Rf=0,uj=new Worker(QF);uj.onmessage=function(h){if(Me.hasOwnProperty(h=h.data.fakeId)){var l=Me[h];h=l.callback,l=l.parameters,h.apply(window,l)}};var RF=function(h){function l(){return X(this,l),g.apply(this,arguments)}ja(l,h);var g=ka(l);return Ia(l,[{key:"requestAsyncId",value:function(f,k){var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return fw(f.flush.bind(f,this),q)}},{key:"recycleAsyncId",value:function(f,k){var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null!==q&&this.delay===q&&!1===this.pending)return k;Me.hasOwnProperty(k)&&(delete Me[k],uj.postMessage({name:"clearInterval",fakeId:k}))}}]),l}(pt),SF=new rt(RF),TF=["backups","servers"],UF=["backups","servers"],VF=["group"],jm=v.inflate,bu=v.deflate,cu=function(h){function l(f,k,q,_r){X(this,l);var _s=g.call(this,_r,"Session");return m(n(_s),"chatManager",void 0),m(n(_s),"usedChannelIds",[]),m(n(_s),"msgDedupLru",new Ac(void 0,{maxlen:200})),m(n(_s),"startTime",Date.now()),m(n(_s),"seq",U.fromNumber(1,!0)),m(n(_s),"userJoinOptions",new nt(!1)),m(n(_s),"seqSentStatuses",[!1,!1]),m(n(_s),"dialogueSequenceLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"loggedOut",!1),m(n(_s),"messageSentTimes",[]),m(n(_s),"curLoginSockets",[void 0,void 0]),m(n(_s),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(_s),"lastLoginSockets",[new Ee(1),new Ee(1)]),m(n(_s),"dialPendingMsgSubjectMap",new Map),m(n(_s),"context",void 0),m(n(_s),"connection",void 0),m(n(_s),"instanceId",void 0),m(n(_s),"lastPingTime",void 0),m(n(_s),"registerSocketsFailureListener",function(){_s.connection.once("socketsFailure",function(){_s.log("socketsFailure, creating a new connection"),hd(function(){return _s.connection.removeAllListeners(),_s.connection=new ct(_s.context,_s.logger,!0),_s.loginHandler(15e3,!0)}).pipe(Ce(function(_a){return _a.pipe(jd(ie.getParameter("RECONNECTING_AP_INTERVAL")))}),rb(_s.connection.apClient.apFinish$)).subscribe(function(){_s.log("new connection connected")})}),0===_s.connection.listenerCount("tokenExpired")&&_s.connection.on("tokenExpired",function(){_s.emit("tokenExpired")})}),_s.context=f,_s.connection=k,_s.instanceId=q,_s.chatManager=new dF(_r),_s.lastPingTime=[0,0],_s.setMaxListeners(512),_s.log("The instanceId is %s",_s.instanceId.toString()),_s}ja(l,h);var g=ka(l);return Ia(l,[{key:"fetchFileUploadIndexGet",value:function(f){var k=f.hash,q=f.size;if(0===(f=this.getLoginSockets()).length)throw new L("Client is not logged in");var _r=this.incGetSeq();return f.forEach(function(_s){_s.sendPacket("FileUploadIndexGet",{seq:_r,hash:k,size:q})}),{ret:Da.apply(void 0,G(f.map(function(_s){return _s.fromReceived("FileUploadIndexRet").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))),fin:Da.apply(void 0,G(f.map(function(_s){return _s.fromReceived("FileUploadIndexFin").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))),err:cc.apply(void 0,G(f.map(function(_s){return _s.fromReceived("FileUploadIndexErr").pipe(aa(function(_a){return _r.eq(_a.seq)}),ea(function(_a){throw new da(["The media message upload failure, code %d",_a.code],Dg)}))}))),timeout:l.genTimeoutError(ji)}}},{key:"requestFileUploadIndexSet",value:function(f){var k=f.hash,q=f.unit,_r=f.servers;if(0===(f=this.getLoginSockets()).length)throw new L("Client is not logged in");var _s=this.incGetSeq();return f.forEach(function(_a){_a.sendPacket("FileUploadIndexSet",{seq:_s,servers:_r,hash:k,unit:q})}),Da.apply(void 0,[l.genTimeoutError(ji)].concat(G(f.map(function(_a){return _a.fromReceived("FileUploadIndexErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ea(function(_l){throw new da(["FileUploadIndexSet failure, code %d",_l.code],Dg)}))})),G(f.map(function(_a){return _a.fromReceived("FileUploadIndexFin").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestFileDownloadIndexGet",value:function(f){var k=f.size,q=f.zone,_r=f.unit,_s=f.hash,_a=this.getLoginSockets();if(0===_a.length)throw new L("Client is not logged in");var _l=this.incGetSeq();return _a.forEach(function(bh){bh.sendPacket("FileDownloadIndexGet",{seq:_l,size:k,zone:q,unit:_r,hash:_s})}),f=Da.apply(void 0,G(_a.map(function(bh){return bh.fromReceived("FileDownloadIndexRet").pipe(aa(function(n_){return _l.eq(n_.seq)}))}))).pipe(ea(function(bh){var n_=bh.backups,_A=bh.servers;return bh=yf(bh,TF),wa({backupList:n_.map(function(r_){return[r_]}),serverList:_A.map(function(r_){return[r_]})},bh)}),jd(500)),_a=mn(_a.map(function(bh){return bh.fromReceived("FileDownloadIndexRet").pipe(aa(function(n_){return _l.eq(n_.seq)}))})),Da(f,_a.pipe(ea(function(bh){return bh.reduce(function(n_,_A){var r_=n_.backupList,p_=n_.serverList;n_=_A.backups;var I_=_A.servers;return _A=yf(_A,UF),wa({backupList:n_.map(function(v_,S_){return[v_].concat(G(void 0!==r_&&Array.isArray(r_[S_])?r_[S_]:[]))}),serverList:I_.map(function(v_,S_){return[v_].concat(G(void 0!==r_&&Array.isArray(p_[S_])?p_[S_]:[]))})},_A)},{})})),l.genTimeoutError(ji))}},{key:"loginHandler",value:function(){var f=this,k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12e3,q=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&q)throw new L("Already logged out, request ignored");q&&this.registerSocketsFailureListener(),this.connection.initConnection();var _r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),_s=Date.now();return _r.forEach(function(_a,_l){var bh=f.loginSocketSubs[_l].login;void 0!==bh&&bh.unsubscribe(),f.loginSocketSubs[_l].login=_a.pipe(ba(function(n_){var _A;f.curLoginSockets[_l]=n_;var r_=Date.now();hb("Link",{ackedServerIp:n_.address,destServerIp:n_.ip,ec:0,sc:0,elapse:ib(f.startTime),lts:U.fromNumber(r_),responseTime:r_-_s,sid:ab(f.instanceId),userId:f.context.uid},null!==(_A=f.context.config.enableCloudProxy)&&void 0!==_A&&_A),f.emit("userJoined",n_.env),q&&f.connection.apClient.apFinish$.next(void 0)})).subscribe(f.lastLoginSockets[_l])}),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),cc.apply(void 0,G(_r).concat([jb(this.connection,"connectionInitFailure").pipe(ba(function(_a){throw ta(_a)||Xa(_a)?_a:new da("Login failure",{code:cs,originalError:_a})}))])).pipe(Pa(1),kb(k),Ja(function(_a){return _a instanceof sb&&f.warn("Client login timeout"),_a&&_a.code===ii&&(f.connection.emit("tokenExpired"),f.connection.apClient.apFinish$.next(void 0)),f.clearSockets(0,q),Z(_a)}),ba(function(){q||f.registerSocketsFailureListener()}),Tg(function(){q||f.connection.apClient.apFinish$.next(void 0)}))}},{key:"logoutHandler",value:function(){var f=J(x.mark(function k(){var q,_r,_s,_a=this;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),q=this.getLoginSockets(),_r=q.map(function(bh){return bh.sendPacket("UserQuit",{}),_a.connection.waitClosing(bh)}),this.clearSockets(5e3),_s=q.map(function(bh){return bh.env}),[0,1].filter(function(bh){return!_s.includes(bh)}).forEach(function(bh){_a.connection.closeSocket(bh,0)}),_l.abrupt("return",cc.apply(void 0,G(_r)).toPromise());case 9:case"end":return _l.stop()}},k,this)}));return function(){return f.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l=this;return x.wrap(function(bh){for(;;)switch(bh.prev=bh.next){case 0:if(0!==this.getLoginSockets().length){bh.next=2;break}throw new L("Client is not logged in. Cannot join the channel",Zr);case 2:return _r=jb(this,"channelLeft").pipe(zb(function(n_){return q===n_}),Pa(1)),_s=this.incGetSeq(),(_a=this.lastLoginSockets.map(function(n_){return n_.pipe(Lc(function(_A,r_){0!==r_&&_l.incSeqIfNeeded(_A.env);var p_=0===r_?_s:_l.seq;return _A.sendPacket("GroupEnter",{account:q,seq:p_}),_A.fromReceived("GroupReply").pipe(aa(function(I_){return p_.eq(I_.seq)}),ba(function(I_){if(0!==(I_=I_.code))throw new da(["Channel join failure. The response code is %d",I_],Vr)}))}),rb(_r),De())})).forEach(function(n_,_A){var r_=function(){return _l.loginSocketSubs[_A].channels.delete(q)};_l.loginSocketSubs[_A].channels.set(q,n_.subscribe({error:r_,complete:r_}))}),bh.next=8,cc.apply(void 0,G(_a)).pipe(Pa(1),kb(1e4),Ja(function(n_){return n_ instanceof sb&&_l.warn("Channel join timeout"),Z(n_)})).toPromise();case 8:case"end":return bh.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(f){this.getLoginSockets().forEach(function(k){k.sendPacket("GroupLeave",{account:f})})}},{key:"requestChannelMemberList",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in. Cannot get the channel members",ZB);var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("GroupAllUsersList",{group:f,pageNumber:0,pageSize:200,seq:q})}),Da.apply(void 0,[l.genTimeoutError(Tr)].concat(G(k.map(function(_r){return _r.fromReceived("GroupAllUsersResult").pipe(aa(function(_s){return _s.group===f&&q.eq(_s.seq)}))}))))}},{key:"requestPeersOnlineStatus",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("UserStatusList",{users:f,seq:q})}),Da.apply(void 0,[l.genTimeoutError(kC)].concat(G(k.map(function(_r){return _r.fromReceived("UserStatusResult").pipe(aa(function(_s){return q.eq(_s.seq)}))}))))}},{key:"requestSetLocalUserAttributes",value:function(f,k){var q=this,_r=this.getLoginSockets();if(0===_r.length)throw new L("Client is not logged in");var _s=this.incGetSeq();return _r.forEach(function(_a,_l){void 0!==k&&_l!==k||_a.sendPacket("UserAttributeSet",{account:q.context.uid,attributeInfos:Object.entries(f).map(function(bh){return{key:(bh=ua(bh,2))[0],value:bh[1]}}),seq:_s})}),Da.apply(void 0,G(_r.map(function(_a){return _a.fromReceived("UserAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ea(function(_l){throw new da(["The user attributes set failure, code %d",_l.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(_r.map(function(_a){return _a.fromReceived("UserAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestSetChannelAttributes",value:function(f,k,q){var _r=this.getLoginSockets();if(0===_r.length)throw new L("Client is not logged in");var _s=this.incGetSeq();return _r.forEach(function(_a){_a.sendPacket("GroupAttributeSet",{broadcast:q,group:f,attributeInfos:Object.entries(k).map(function(_l){return{key:(_l=ua(_l,2))[0],value:_l[1]}}),seq:_s})}),Da.apply(void 0,G(_r.map(function(_a){return _a.fromReceived("GroupAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ea(function(_l){throw new da(["The group attributes set failure, code %d",_l.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(_r.map(function(_a){return _a.fromReceived("GroupAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(f){var k=this,q=this.getLoginSockets();if(0===q.length)throw new L("Client is not logged in");var _r=this.incGetSeq();return q.forEach(function(_s){_s.sendPacket("UserAttributeMod",{account:k.context.uid,attributeInfos:Object.entries(f).map(function(_a){return{key:(_a=ua(_a,2))[0],value:_a[1]}}),seq:_r})}),Da.apply(void 0,G(q.map(function(_s){return _s.fromReceived("UserAttributeErr").pipe(aa(function(_a){return _r.eq(_a.seq)}),ea(function(_a){throw new da(["The user attributes add or update failure, code %d",_a.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(q.map(function(_s){return _s.fromReceived("UserAttributeRsp").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(f,k,q){var _r=this.getLoginSockets();if(0===_r.length)throw new L("Client is not logged in");var _s=this.incGetSeq();return _r.forEach(function(_a){_a.sendPacket("GroupAttributeMod",{broadcast:q,group:f,attributeInfos:Object.entries(k).map(function(_l){return{key:(_l=ua(_l,2))[0],value:_l[1]}}),seq:_s})}),Da.apply(void 0,G(_r.map(function(_a){return _a.fromReceived("GroupAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ea(function(_l){throw new da(["The group attributes add or update failure, code %d",_l.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(_r.map(function(_a){return _a.fromReceived("GroupAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(f){var k=this,q=this.getLoginSockets();if(0===q.length)throw new L("Client is not logged in");var _r=this.incGetSeq();return q.forEach(function(_s){_s.sendPacket("UserAttributeDel",{account:k.context.uid,attributes:f,seq:_r})}),Da.apply(void 0,G(q.map(function(_s){return _s.fromReceived("UserAttributeErr").pipe(aa(function(_a){return _r.eq(_a.seq)}),ea(function(_a){throw new da(["The user attributes delete failure, code %d",_a.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(q.map(function(_s){return _s.fromReceived("UserAttributeRsp").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(f,k,q){var _r=this.getLoginSockets();if(0===_r.length)throw new L("Client is not logged in");var _s=this.incGetSeq();return _r.forEach(function(_a){_a.sendPacket("GroupAttributeDel",{group:f,broadcast:q,attributes:k,seq:_s})}),Da.apply(void 0,G(_r.map(function(_a){return _a.fromReceived("GroupAttributeErr").pipe(aa(function(_l){return _s.eq(_l.seq)}),ea(function(_l){throw new da(["The channel attributes delete failure, code %d",_l.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(_r.map(function(_a){return _a.fromReceived("GroupAttributeRsp").pipe(aa(function(_l){return _s.eq(_l.seq)}))}))))}},{key:"requestClearLocalUserAttributes",value:function(){var f=this,k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("UserAttributeSet",{account:f.context.uid,seq:q,attributeInfos:[]})}),Da.apply(void 0,G(k.map(function(_r){return _r.fromReceived("UserAttributeErr").pipe(aa(function(_s){return q.eq(_s.seq)}),ea(function(_s){throw new da(["The user attributes clear failure, code %d",_s.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(k.map(function(_r){return _r.fromReceived("UserAttributeRsp").pipe(aa(function(_s){return q.eq(_s.seq)}))}))))}},{key:"requestClearChannelAttributes",value:function(f,k){var q=this.getLoginSockets();if(0===q.length)throw new L("Client is not logged in");var _r=this.incGetSeq();return q.forEach(function(_s){_s.sendPacket("GroupAttributeSet",{group:f,seq:_r,attributeInfos:[],broadcast:k})}),Da.apply(void 0,G(q.map(function(_s){return _s.fromReceived("GroupAttributeErr").pipe(aa(function(_a){return _r.eq(_a.seq)}),ea(function(_a){throw new da(["The channel attributes clear failure, code %d",_a.code],Xb)}))})).concat([l.genTimeoutError(Yb)],G(q.map(function(_s){return _s.fromReceived("GroupAttributeRsp").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))))}},{key:"requestGetUserAttributesByKeys",value:function(f,k){var q=this.getLoginSockets();if(0===q.length)throw new L("Client is not logged in");var _r=this.incGetSeq();return q.forEach(function(_s){_s.sendPacket("UserAttributeGet",{account:f,seq:_r,attributes:k})}),Da.apply(void 0,[l.genTimeoutError(Yb)].concat(G(q.map(function(_s){return _s.fromReceived("UserAttributeErr").pipe(aa(function(_a){return _r.eq(_a.seq)}),ea(function(_a){throw 10008===(_a=_a.code)?new da("The user requested is not online",Pr):new bd(["User attribute operation unknown error code: %d",_a],Xb)}))})),G(q.map(function(_s){return _s.fromReceived("UserAttributeRet").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))))}},{key:"requestGetChannelAttributesByKeys",value:function(f,k){var q=this.getLoginSockets();if(0===q.length)throw new L("Client is not logged in");var _r=this.incGetSeq();return q.forEach(function(_s){_s.sendPacket("GroupAttributeGet",{group:f,seq:_r,attributes:k})}),Da.apply(void 0,[l.genTimeoutError(Yb)].concat(G(q.map(function(_s){return _s.fromReceived("GroupAttributeErr").pipe(aa(function(_a){return _r.eq(_a.seq)}),ea(function(_a){throw new da(["The channel attributes get failure, code %d",_a.code],Xb)}))})),G(q.map(function(_s){return _s.fromReceived("GroupAttributeRet").pipe(aa(function(_a){return _r.eq(_a.seq)}))}))))}},{key:"requestGetUserAttributeKeys",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("UserAttributeKeysGet",{account:f,seq:q})}),Da.apply(void 0,[l.genTimeoutError(Yb)].concat(G(k.map(function(_r){return _r.fromReceived("UserAttributeErr").pipe(aa(function(_s){return q.eq(_s.seq)}),ea(function(_s){throw 10008===(_s=_s.code)?new da("The user requested is not online",Pr):new bd(["User attribute operation unknown error code: %d",_s],Xb)}))})),G(k.map(function(_r){return _r.fromReceived("UserAttributeKeysRet").pipe(aa(function(_s){return q.eq(_s.seq)}))}))))}},{key:"requestGetChannelAttributesKeys",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("GroupAttributeKeysGet",{group:f,seq:q})}),Da.apply(void 0,[l.genTimeoutError(Yb)].concat(G(k.map(function(_r){return _r.fromReceived("GroupAttributeErr").pipe(aa(function(_s){return q.eq(_s.seq)}),ea(function(_s){throw new bd(["Channel attribute operation unknown error code: %d",_s.code],Xb)}))})),G(k.map(function(_r){return _r.fromReceived("GroupAttributeKeysRet").pipe(aa(function(_s){return q.eq(_s.seq)}))}))))}},{key:"requestGetChannelMemberCount",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("GroupStatusList",{groups:f,seq:q})}),Da.apply(void 0,[l.genTimeoutError(Tr)].concat(G(k.map(function(_r){return _r.fromReceived("GroupStatusResult").pipe(aa(function(_s){return q.eq(_s.seq)}))}))))}},{key:"requestSubscribePeersOnlineStatus",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();return k.forEach(function(_r){_r.sendPacket("SubscribeUserStatus",{seq:q,users:f})}),Da.apply(void 0,[l.genTimeoutError(rC)].concat(G(k.map(function(_r){return _r.fromReceived("SubscribeResponse").pipe(aa(function(_s){return q.eq(_s.seq)}))}))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(f){var k=this.getLoginSockets();if(0===k.length)throw new L("Client is not logged in");var q=this.incGetSeq();k.forEach(function(_r){_r.sendPacket("UnsubscribeUserStatus",{seq:q,users:f})})}},{key:"sendInvitationMessage",value:function(){var f=J(x.mark(function k(q){var _r,_a,_l,bh,n_,_A,r_,p_,I_,x_=this;return x.wrap(function(B_){for(;;)switch(B_.prev=B_.next){case 0:if(_r=q.peerId,_a=q.extra,bh=q.channelId,n_=q.type,_A={callId:q.callId},void 0===(_l=q.isAcceptAck)){B_.next=6;break}if("CallAccept"===n_){B_.next=5;break}throw Error("invalid invitation type");case 5:_A.type=_l?"ack":"request";case 6:return _A.channel=bh,("CallInvite"===n_||"CallCancel"===n_||"CallReject"===n_||"CallAccept"===n_&&!1===_l)&&void 0!==_a&&(_A.extra=_a),r_=Yg(),this.log("The sent invitation body is %o",_A),p_=function(Q_){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:r_,instance:x_.instanceId,dst:_r,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:Q_,MessageType:n_}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(_A)),src:x_.context.uid}},B_.next=14,Ob(this.sendMessageToRetry(p_,!0)).pipe(kb(1e4),Ja(function(Q_){return Q_ instanceof sb&&x_.warn("Send invitation timeout"),Z(Q_)})).toPromise();case 14:return B_.abrupt("return",{hasPeerReceived:0===(I_=B_.sent).code,hasReSent:0!==I_.retryTimes});case 18:case"end":return B_.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var f=J(x.mark(function k(q,_r,_s,_a,_l,bh){var n_,_A,r_,p_,I_,v_,S_,x_,B_,Q_,_0,c0,Qv,h0,E0,H_,e0,P_,Rv,E_,L_,F_,J_,z_,D0,O0,CI,K0,B1=this;return x.wrap(function(A1){for(;;)switch(A1.prev=A1.next){case 0:if(r_=void 0===(_A=_r.width)?0:_A,I_=void 0===(p_=_r.height)?0:p_,S_=void 0===(v_=_r.fileName)?"":v_,B_=void 0===(x_=_r.description)?"":x_,_0=void 0===(Q_=_r.thumbnail)?new Blob:Q_,Qv=void 0===(c0=_r.thumbnailHeight)?0:c0,E0=void 0===(h0=_r.thumbnailWidth)?0:h0,e0=void 0===(H_=_r.size)?0:H_,P_=_r.mediaId,Rv=_l.enableOfflineMessaging,E_=_l.enableHistoricalMessaging,Aa(_s)){A1.next=4;break}throw new H("The send message arguments are not valid",_a?Gl:Ag);case 4:if(!(32768<new Blob([S_,_0,B_]).size)){A1.next=6;break}throw new H("The size of message overflowed ",_a?Ie:fi);case 6:return L_=this.chatManager.getChatInfo(_s),F_=L_.dialogue,J_=L_.sequence,this.log('A%s media message is sending to %s: "'.concat(z_=this.instanceId,"-").concat(F_,"#").concat(J_,'"'),_a?" peer":" channel",pa(_s)),m(n_={},"media_description",B_),m(n_,"media_width",r_),m(n_,"media_height",I_),m(n_,"media_thumbnailwidth",E0),m(n_,"media_thumbnailheight",Qv),m(n_,"media_size",e0),m(n_,"media_id",P_),m(n_,"media_filename",S_),D0=Bc(n_,function(FI){return(new TextEncoder).encode(FI.toString())}),A1.t0=Uint8Array,A1.next=14,pj(_0);case 14:return A1.t1=A1.sent,D0.media_thumbnail=new A1.t0(A1.t1),O0=_a&&"IMAGE"===q?"PeerImageMessage":_a&&"FILE"===q?"PeerFileMessage":_a||"IMAGE"!==q?"ChannelFileMessage":"ChannelImageMessage",CI=function(FI){return{MiscMap:D0,sequence:J_,dialogue:F_,instance:z_,dst:_s,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:FI,CompressionMethod:"Uncompressed",MessageType:O0,ToCache:Rv,ToArchive:E_}).toLong(),payload:new Uint8Array,src:B1.context.uid}},A1.next=20,Ob(this.sendMessageToRetry(CI,!0)).pipe(kb(void 0===bh?1e4:bh),Ja(function(FI){return FI instanceof sb&&B1.warn("Send message timeout"),Z(FI)})).toPromise();case 20:if(2!==(K0=A1.sent.code)){A1.next=24;break}throw new da("The peer does not support this type of message",jC);case 24:return A1.abrupt("return",{hasPeerReceived:0===K0});case 25:case"end":return A1.stop()}},k,this)}));return function(k,q,_r,_s,_a,_l){return f.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var f=J(x.mark(function k(q,_r,_s,_a,_l,bh){var n_,_A,r_,p_,I_,v_,S_,x_,_0=this;return x.wrap(function(c0){for(;;)switch(c0.prev=c0.next){case 0:if(n_=_l.enableOfflineMessaging,_A=_l.enableHistoricalMessaging,Aa(_s)&&q instanceof Uint8Array&&"string"==typeof _r){c0.next=3;break}throw new H("The send message arguments are not valid",_a?Gl:Ag);case 3:if(!(32768<q.byteLength+new Blob([_r]).size)){c0.next=5;break}throw new lb("The message size is over the 32KB limit",_a?Ie:fi);case 5:return r_=!ie.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=q.byteLength,p_=this.chatManager.getChatInfo(_s),I_=p_.dialogue,v_=p_.sequence,this.log('A%s %s raw message is sending to %s: "'.concat(S_=this.instanceId,"-").concat(I_,"#").concat(v_,'"'),r_?" compressed":"",_a?"peer":"channel",pa(_s)),x_=function(Qv){return{MiscMap:{description:(new TextEncoder).encode(_r)},sequence:v_,dialogue:I_,instance:S_,dst:_s,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:Qv,CompressionMethod:r_?"Zlib":"Uncompressed",MessageType:_a?"PeerRawMessage":"ChannelRawMessage",ToCache:n_,ToArchive:_A}).toLong(),payload:r_?bu(q):q,src:_0.context.uid}},c0.next=12,Ob(this.sendMessageToRetry(x_,!0)).pipe(kb(void 0===bh?1e4:bh),Ja(function(Qv){return Qv instanceof sb&&_0.warn("Send message timeout"),Z(Qv)})).toPromise();case 12:return c0.abrupt("return",{hasPeerReceived:0===c0.sent.code});case 15:case"end":return c0.stop()}},k,this)}));return function(k,q,_r,_s,_a,_l){return f.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var f=J(x.mark(function k(q,_r,_s,_a,_l){var bh,n_,_A,r_,p_,I_,v_,S_,x_,_0=this;return x.wrap(function(c0){for(;;)switch(c0.prev=c0.next){case 0:if(bh=_a.enableOfflineMessaging,n_=_a.enableHistoricalMessaging,Aa(_r)){c0.next=3;break}throw new H("The send message arguments are not valid",_s?Gl:Ag);case 3:if(!(32768<new Blob([q]).size)){c0.next=5;break}throw new lb("The message size is over the 32KB limit",_s?Ie:fi);case 5:return _A=!ie.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([q]).size,r_=this.chatManager.getChatInfo(_r),p_=r_.dialogue,I_=r_.sequence,this.log('A%s %s message is sending to %s: "'.concat(v_=this.instanceId,"-").concat(p_,"#").concat(I_,'"'),_A?" compressed":"",_s?"peer":"channel",pa(_r)),S_=(new TextEncoder).encode(q),x_=function(Qv){return{MiscMap:{},sequence:I_,dialogue:p_,instance:v_,dst:_r,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:Qv,CompressionMethod:_A?"Zlib":"Uncompressed",MessageType:_s?"PeerTextMessage":"ChannelTextMessage",ToCache:bh,ToArchive:n_}).toLong(),payload:_A?bu(S_):S_,src:_0.context.uid}},c0.next=13,Ob(this.sendMessageToRetry(x_,!0)).pipe(kb(void 0===_l?1e4:_l),Ja(function(Qv){return Qv instanceof sb&&_0.warn("Send message timeout"),Z(Qv)})).toPromise();case 13:return c0.abrupt("return",{hasPeerReceived:0===c0.sent.code});case 16:case"end":return c0.stop()}},k,this)}));return function(k,q,_r,_s,_a){return f.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(f,k){Object.entries(this.loginSocketSubs[f]).forEach(function(q){var _r=(q=ua(q,2))[1];"channels"===q[0]&&k||(Array.isArray(_r)||_r instanceof Map?_r.forEach(function(_s){return _s.unsubscribe()}):_r&&_r.unsubscribe())}),this.loginSocketSubs[f]={channels:k?this.loginSocketSubs[f].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var f=J(x.mark(function k(q,_r){var _s,_a,_l,bh,n_,_A,r_,I_,v_=this,S_=arguments;return x.wrap(function(x_){for(;;)switch(x_.prev=x_.next){case 0:if(_s=2<S_.length&&void 0!==S_[2]?S_[2]:0,this.log("Attempt to send the message ".concat(_r?" with retrying, %o":"without retrying"),{retryTimes:_s}),0!==(_a=this.getLoginSockets()).length){x_.next=5;break}throw Error("no logged-in sockets");case 5:return _l=q(_s),_a.forEach(function(B_){B_.sendPacket("Message",_l)}),bh=_l.dialogue,n_=_l.sequence,_A=_l.instance,r_=_a.map(function(B_){return B_.fromReceived("Ack").pipe(zb(function(Q_){return bh.eq(Q_.dialogue)&&n_.eq(Q_.sequence)&&_A.eq(Q_.instance)}))}),x_.prev=9,x_.next=12,cc.apply(void 0,G(r_)).pipe(kb(6e3),Ja(function(B_){return Xa(B_)&&v_.warn("Message send timeout, retry times %d",_s),Z(B_)}),Pa(1)).toPromise();case 12:return this.log("The message has been acked, %o",{code:I_=x_.sent.code}),x_.abrupt("return",{code:I_,retryTimes:_s});case 18:if(x_.prev=18,x_.t0=x_.catch(9),!(x_.t0 instanceof sb&&_r)){x_.next=22;break}return x_.abrupt("return",this.sendMessageToRetry(q,!1,_s+1));case 22:throw x_.t0;case 23:case"end":return x_.stop()}},k,this,[[9,18]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var f=this;this.lastLoginSockets.map(function(k){return k.pipe(Lc(function(q){return Kc(0,2500,pe()?void 0:SF).pipe(ba(function(){f.sendPing(q)}))}))}).forEach(function(k,q){var _r=f.loginSocketSubs[q].keepAlive;void 0!==_r&&_r.unsubscribe(),f.loginSocketSubs[q].keepAlive=k.subscribe({error:function(){}})})}},{key:"initKeepAliveReconnector",value:function(){var f=this;this.lastLoginSockets.map(function(k){return k.pipe(Lc(function(q){var _r,_s=!1,_a=q.userJoin$.pipe(ba(function(){_s=!0})),_l=q.input$.pipe(ba(function(bh){"Ping"!==rj[bh.uri].slice(0,-3)&&(_s=!1)}));return cc(Kc(6e3,1e4).pipe(Jv(q.receivedPacket),ba(function(bh){bh=ua(bh,2),bh=ua(bh[1],2)[1],_r!==bh||_s||q.forceReconnect(),_r=bh})),_a,_l)}))}).forEach(function(k,q){var _r=f.loginSocketSubs[q].keepAliveReconnector;void 0!==_r&&_r.unsubscribe(),f.loginSocketSubs[q].keepAliveReconnector=k.subscribe({error:function(){}})})}},{key:"initLoginReceiver",value:function(){var f=this;this.lastLoginSockets.map(function(k){return k.pipe(Lc(function(q){return cc(jb(q,"reconnect").pipe(ba(f.onSocketReconnect(q))),q.fromReceived("Message").pipe(ba(f.onMessage(q))),q.fromReceived("GroupEnterNotice").pipe(ba(f.onGroupEnterNotice())),q.fromReceived("GroupLeaveNotice").pipe(ba(f.onGroupLeaveNotice())),q.fromReceived("GroupCountNotice").pipe(ba(f.onGroupCountNotice())),q.fromReceived("GroupAttributeAlt").pipe(ba(f.onGroupAttributeAlt())),q.fromReceived("UserJoinNotice").pipe(ba(f.onUserNotice(S.PeerOnlineState.ONLINE))),q.fromReceived("UserQuitNotice").pipe(ba(f.onUserNotice(S.PeerOnlineState.OFFLINE))),q.fromReceived("UserWaitNotice").pipe(ba(f.onUserNotice(S.PeerOnlineState.UNREACHABLE))),q.fromReceived("Pong").pipe(ba(f.onPong())),q.fromReceived("UserDrop").pipe(ba(f.onUserDrop(q)))).pipe(If(void 0))}))}).forEach(function(k,q){f.loginSocketSubs[q].receivers.push(k.subscribe({error:function(){}}))})}},{key:"requestSocketLogin",value:function(f,k,q){var _r=this;return ln(hd(function(){_r.userJoinOptions=new nt(k),f.sendPacket("UserJoin",{account:_r.context.uid,instance:_r.instanceId,opt:_r.userJoinOptions.toLong(),seq:q,ticket:f.ticket})}),f.fromReceived("UserResp").pipe(aa(function(_s){return q.eq(_s.seq)}),ba(function(_s){if(0!==(_s=_s.code))throw _r.clearSockets(),_r.logError("Connected to gateway success but the Rtm server rejected login"),new da(["Login failure. The response code from the RTM service is %d",_s],Bg);f.attemptsSinceLastError=0,f.loggedIn=!0,_r.log("ENV_%d logged in",f.env)}),If(f),kb(6e3))).pipe(zb(function(_s){return void 0!==_s}),Ja(function(_s){return _s instanceof sb&&_r.warn("Login response timeout, rejoin: %s",k),_r.clearSockets(),_s.name="loginRespTimeout",_r.emit("banEdgeIP",f.ip),Z(_s)}))}},{key:"getSocketLoginObservables",value:function(f,k){var q=this;return f.map(function(_r){return _r.pipe(Lc(function(_s,_a){return q.incSeqIfNeeded(_s.env),q.requestSocketLogin(_s,0!==_a,0===_a?k:q.seq)}),De())})}},{key:"incSeqIfNeeded",value:function(f){if(![0,1].includes(f))throw new Ha({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[f]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[f]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var f=this.curLoginSockets,k=-1,q=null==f?0:f.length,_r=0,_s=[];++k<q;){var _a=f[k];_a&&(_s[_r++]=_a)}return _s}},{key:"emitMessage",value:function(f,k){var p_,q=f.options,_r=f.payload,_s=f.src,_a=f.dst,_l=f.instance,bh=f.dialogue,n_=f.sequence,_A=f.ms,r_=f.MiscMap;this.dialogueSequenceLru.set(bh.toString(),n_),_l="".concat(_l,"-").concat(bh,"#").concat(n_),this.msgDedupLru.has(_l)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",k,_l):(this.msgDedupLru.set(_l,void 0),k=new ke(q),this.lastLoginSockets.forEach((p_=J(x.mark(function I_(v_){return x.wrap(function(x_){for(;;)switch(x_.prev=x_.next){case 0:return x_.next=2,v_.pipe(Pa(1)).toPromise();case 2:l.sendMessageAck(f,x_.sent);case 4:case"end":return x_.stop()}},I_)})),function(I_){return p_.apply(this,arguments)})),q=k.isZlibCompressed(),k.isInvitation()?(_a=ra(q?jm($n(_r,Uint8Array.of(0,0,0,0))):_r),_a=JSON.parse(_a),this.log("The received invitation body is %o",_a),this.emit("invitationMessage",{body:_a,type:k.getInvitationType(),peerId:_s,serverReceivedTs:_A.toNumber()})):k.isTextMessage()?(r_=k.isPeerTextMessage(),_r=ra(q?jm($n(_r,Uint8Array.of(0,0,0,0))):_r),this.info("Received a %s %s text message from %s to %s, %s",q?" compressed":"",r_?"peer":"channel",pa(_s),pa(_a),_l),r_?(_s={text:_r,peerId:_s,properties:{serverReceivedTs:_A.toNumber(),isOfflineMessage:k.isFromCache()}},this.emit("peerTextMessage",_s)):this.emit("channelTextMessage",{channelId:_a,memberId:_s,text:_r,properties:{serverReceivedTs:_A.toNumber(),isOfflineMessage:!1}})):k.isRawMessage()?(bh=k.isRawPeerMessage(),r_=void 0===(r_=r_.description)?"":ra(r_),_r=q?jm(_r):_r,this.info("Received a %s %s raw message from %s to %s, %s",q?" compressed":"",bh?"peer":"channel",pa(_s),pa(_a),_l),bh?(_s={desc:r_,raw:_r,peerId:_s,properties:{serverReceivedTs:_A.toNumber(),isOfflineMessage:k.isFromCache()}},this.emit("peerRawMessage",_s)):this.emit("channelRawMessage",{desc:r_,raw:_r,channelId:_a,memberId:_s,properties:{serverReceivedTs:_A.toNumber(),isOfflineMessage:!1}})):(k.isImageMessage()||k.isFileMessage())&&(_r=k.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",_r?"peer":"channel",pa(_s),pa(_a),_l),_r?this.emit("peerMediaMessage",{messageType:k.isImageMessage()?"IMAGE":"FILE",details:r_,peerId:_s,properties:{serverReceivedTs:_A.toNumber(),isOfflineMessage:k.isFromCache()}}):this.emit("channelMediaMessage",{messageType:k.isImageMessage()?"IMAGE":"FILE",details:r_,memberId:_s,channelId:_a,properties:{serverReceivedTs:_A.toNumber(),isOfflineMessage:k.isFromCache()}})))}},{key:"onSocketReconnect",value:function(f){var k=this;return function(){var q=[0,1].filter(function(_r){return _r!==f.env})[0];(q=k.connection.curOpenSockets[q])&&!q.loggedIn&&k.emit("connectionLost")}}},{key:"onUserDrop",value:function(f){var k=this;return function(q){var _r;q=q.code,hb("KickedOff",{code:0,elapse:ib(k.startTime),linkId:parseInt(f.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:f.address,serverCode:q,sid:ab(k.instanceId),userId:k.context.uid},null!==(_r=k.context.config.enableCloudProxy)&&void 0!==_r&&_r),10006===q||10001===q?k.warn("Login too often and kicked off, reconnect and login"):10009===q?(k.warn("The instance ID conflicts, reconnecting"),k.instanceId=Yg(),k.context.sid=ab(k.instanceId),k.emit("instanceChanged",k.instanceId)):[11,14,15,16].includes(q)&&(k.emit("userDrop",q),k.clearSockets())}}},{key:"clearSockets",value:function(){var f=this,k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,q=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach(function(_r){f.cleanLoginSubs(_r,q),f.connection.closeSocket(_r,k)})}},{key:"onMessage",value:function(f){var k=this;return function(q){var _r=q.dialogue,_s=q.instance,_a=q.sequence,_l=q.options;if(q.src===k.context.uid)k.log("The message is from the local account, ignored");else{var bh=_r.toString(),n_=k.dialPendingMsgSubjectMap.get(bh);if(_r="".concat(_s,"-").concat(_r,"#").concat(_a),n_)n_.next(q),k.log("Env_%d: The dialogue has pending messages, next: %s",f.env,_r);else{var _A=k.dialogueSequenceLru.get(bh);if(n_=!_A&&_a.eq(1),_s=void 0!==_A&&_a.sub(_A).eq(1),n_||_s)k.emitMessage(q,f.env);else{if(_A){if(_a.lte(_A))return;k.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",f.env,_r)}else k.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",f.env,_r);_a=new Ua,k.dialPendingMsgSubjectMap.set(bh,_a);var r_=_a.pipe(Ku(vl),Ug(function(p_,I_){return[].concat(G(p_),[I_])},[]),ea(function(p_){return G(p_).sort(function(I_,v_){return(I_=I_.sequence).eq(v_=v_.sequence)?0:I_.gt(v_)?1:-1})}),vn(1));_l=!(_l=new ke(_l)).isFromCache()&&!_l.isBufferedMessage(),r_.pipe(rb(Kc(_l?750:1500)),aa(function(p_){if(2>p_.length)return!1;for(var I_=void 0===_A?U.fromNumber(1,!0):_A.add(1),v_=0;v_<p_.length;I_=I_.add(1),v_++)if(!p_[v_].sequence.eq(I_))return!1;return!0}),Tg(function(){k.dialPendingMsgSubjectMap.delete(bh)})).subscribe(function(p_){p_.forEach(function(I_){k.emitMessage(I_,f.env),k.log("Env_%d: The message queue has fully ordered, emitting: %s",f.env,"".concat(I_.instance,"-").concat(I_.dialogue,"#").concat(I_.sequence))})},function(p_){p_ instanceof Sg&&r_.pipe(Pa(1)).subscribe(function(I_){return I_.forEach(function(v_){k.log("Env_%d: The message pending queue expired, emitting: %s",f.env,"".concat(v_.instance,"-").concat(v_.dialogue,"#").concat(v_.sequence)),k.emitMessage(v_,f.env)})})}),_a.next(q)}}}}}},{key:"onPong",value:function(){var f=this;return function(){document.hidden&&f.getLoginSockets().forEach(function(k){f.sendPing(k)})}}},{key:"onGroupEnterNotice",value:function(){var f=this;return function(k){f.emit("memberNotice",{channelId:k.group,seq:k.seq,instance:k.instance,memberId:k.user,type:"MemberJoined",size:k.size})}}},{key:"onGroupLeaveNotice",value:function(){var f=this;return function(k){f.emit("memberNotice",{channelId:k.group,seq:k.seq,instance:k.instance,memberId:k.user,type:"MemberLeft",size:k.size})}}},{key:"onGroupCountNotice",value:function(){var f=this;return function(k){f.emit("memberNotice",{channelId:k.group,seq:k.seq,instance:k.instance,type:"MemberCountUpdated",size:k.size})}}},{key:"onGroupAttributeAlt",value:function(){var f=this;return function(k){var q=k.group;k=yf(k,VF),f.emit("channelAttributesUpdated",wa({channelId:q},k))}}},{key:"onUserNotice",value:function(f){var k=this;return function(q){k.emit("peerOnlineStatusChanged",{peerId:q.user,instance:q.instance,seq:q.seq,state:f})}}},{key:"sendPing",value:function(f){2500>=Date.now()-this.lastPingTime[f.env]||(this.incSeqIfNeeded(f.env),f.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:this.seq}),this.lastPingTime[f.env]=Date.now())}}],[{key:"sendMessageAck",value:function(f,k){var q=new ke(f.options);(q.isInvitation()||q.isPeerMessage())&&k.sendPacket("Ack",{code:0,dialogue:f.dialogue,instance:f.instance,sequence:f.sequence})}}]),l}(wb());m(cu,"genTimeoutError",function(h,l){return eb(void 0).pipe(jd(void 0===l?1e4:l),ea(function(){throw new gb(["Request timed out after %ds",void 0===l?1e4:l],h)}))});var du,km,lm=0,mm=0;de.v1=function(h,l,g){g=l&&g||0;var f=l||[],k=(h=h||{}).node||du,q=void 0!==h.clockseq?h.clockseq:km;if(null==k||null==q){var _r=Nr();null==k&&(k=du=[1|_r[0],_r[1],_r[2],_r[3],_r[4],_r[5]]),null==q&&(q=km=16383&(_r[6]<<8|_r[7]))}_r=void 0!==h.msecs?h.msecs:(new Date).getTime();var _s=void 0!==h.nsecs?h.nsecs:mm+1,_a=_r-lm+(_s-mm)/1e4;if(0>_a&&void 0===h.clockseq&&(q=q+1&16383),(0>_a||_r>lm)&&void 0===h.nsecs&&(_s=0),1e4<=_s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(lm=_r,mm=_s,km=q,h=(1e4*(268435455&(_r+=122192928e5))+_s)%4294967296,f[g++]=h>>>24&255,f[g++]=h>>>16&255,f[g++]=h>>>8&255,f[g++]=255&h,f[g++]=(h=_r/4294967296*1e4&268435455)>>>8&255,f[g++]=255&h,f[g++]=h>>>24&15|16,f[g++]=h>>>16&255,f[g++]=q>>>8|128,f[g++]=255&q,q=0;6>q;++q)f[g+q]=k[q];return l||Or(f)},de.v4=de;var nm=ni(),Ed,uf=S.LocalInvitationFailureReason,Ca=S.LocalInvitationState,WF=(Ed=function(h){function l(f,k,q){X(this,l);var _r=g.call(this,q,"RtmLocalInvitation",!0);return m(n(_r),"state",Ca.IDLE),m(n(_r),"localInvitationEnd$",Da(jb(n(_r),"LocalInvitationAccepted"),jb(n(_r),"LocalInvitationRefused"),jb(n(_r),"LocalInvitationFailure"),jb(n(_r),"LocalInvitationCanceled")).pipe(Pa(1))),m(n(_r),"callId",de.v4()),m(n(_r),"_content",""),m(n(_r),"_channelId",""),m(n(_r),"_response",""),m(n(_r),"calleeId",void 0),m(n(_r),"logger",void 0),m(n(_r),"getSession",void 0),_r.calleeId=f,_r.getSession=k,_r.logger=q,_r}ja(l,h);var g=ka(l);return Ia(l,[{key:"channelId",get:function(){return this._channelId},set:function(f){this.state!==Ca.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=f)}},{key:"content",get:function(){return this._content},set:function(f){this.log("set content for %s",this.callId),this._content=f}},{key:"response",get:function(){return this._response},set:function(f){throw new H('Cannot set the "response" of the LocalInvitation instance.',Ec)}},{key:"send",value:function(){var f,k=this;if(this.state===Ca.SENT_TO_REMOTE||this.state===Ca.RECEIVED_BY_REMOTE)throw new L("The local invitation send failure. The call invitation has already been sent.",cC);if(this.isLocalInvitationEnd())throw new L("The local invitation send failure. The call invitation has ended.",gi);if(0<this._channelId.length&&!Aa(this._channelId))throw new H("Illegal invitation channel ID",Ec);if(!Aa(this.calleeId))throw new H("Illegal invitation callee user ID",Ec);if(8192<fh(this._content))throw new H('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',Ec);this.state=Ca.SENT_TO_REMOTE,hd(J(x.mark(function q(){var _r,_s,_a;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:return _l.next=2,k.getSession().sendInvitationMessage({peerId:k.calleeId,callId:k.callId,extra:k._content,type:"CallInvite",channelId:k._channelId});case 2:if(_s=(_r=_l.sent).hasPeerReceived,_a=_r.hasReSent,!k.isLocalInvitationEnd()){_l.next=7;break}throw new gb("send invitation timeout");case 7:if(k.log("The local invitation has sent to the callee"),_s||_a){_l.next=11;break}throw f=new nm({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(_s){_l.next=14;break}throw f=new nm({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return _l.stop()}},q)}))).pipe(Ce(function(q){return q.pipe(ba(function(_r){if(!(_r instanceof nm))throw _r}),jd(2e3))}),kb(3e4),Ja(function(q){return Xa(q)&&k.warn("local invitation ack timed out"),Z(q)}),rb(this.localInvitationEnd$)).subscribe({next:function(){k.state===Ca.RECEIVED_BY_REMOTE?k.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):k.state!==Ca.SENT_TO_REMOTE?k.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(k.info("The peer received the local invitation %s.",k.callId),k.state=Ca.RECEIVED_BY_REMOTE,k.emit("LocalInvitationReceivedByPeer"),k.localInvitationEnd$.pipe(kb(6e4),Ja(function(q){return Xa(q)&&k.warn("local invitation expired"),Z(q)})).subscribe({error:function(){k.state=Ca.FAILURE,k.emit("LocalInvitationFailure",uf.INVITATION_EXPIRE)}}))},error:function(q){k.isLocalInvitationEnd()?k.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(k.state=Ca.FAILURE,Xa(q)&&f?"PEER_NOT_ONLINE"===f.code?k.emit("LocalInvitationFailure",uf.PEER_OFFLINE):"RESENT_AND_OFFLINE"===f.code&&k.emit("LocalInvitationFailure",uf.PEER_NO_RESPONSE):Xa(q)?k.emit("LocalInvitationFailure",uf.PEER_NO_RESPONSE):k.emit("LocalInvitationFailure","RtmInvalidStatusError"===q.name?uf.NOT_LOGGEDIN:uf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new L("The local invitation cancel failure",gi);if(this.state===Ca.IDLE)throw new L("The local invitation has not been sent",bC);if(8192<fh(this._content))throw new H('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',Ec);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ca.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(f){if(this.isLocalInvitationEnd()&&this.state!==Ca.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ca.IDLE)throw new L("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ca.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ca.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ca.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ca.ACCEPTED_BY_REMOTE,this._response=f,this.emit("LocalInvitationAccepted",f))}}},{key:"onRefuseReceived",value:function(f){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ca.IDLE)throw new L("the local have not sent the invitation, how can remote refuse it?");this.state===Ca.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ca.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=f,this.state=Ca.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",f)}}},{key:"isLocalInvitationEnd",value:function(){return[Ca.CANCELED,Ca.FAILURE,Ca.ACCEPTED_BY_REMOTE,Ca.REFUSED_BY_REMOTE].includes(this.state)}}]),l}(wb()),la(Ed.prototype,"send",[Qb],Object.getOwnPropertyDescriptor(Ed.prototype,"send"),Ed.prototype),la(Ed.prototype,"cancel",[Qb],Object.getOwnPropertyDescriptor(Ed.prototype,"cancel"),Ed.prototype),Ed),vi=S.RemoteInvitationFailureReason,nb=S.RemoteInvitationState,XF=function(h){function l(f){var k=f.invitationChannel,q=f.extraContent,_r=f.callId,_s=f.callerId,_a=f.logger;f=f.getSession,X(this,l);var _l=g.call(this,_a,"RtmRemoteInvitation",!0);return m(n(_l),"state",nb.INVITATION_RECEIVED),m(n(_l),"remoteInvitationEnd$",Da(jb(n(_l),"RemoteInvitationCanceled"),jb(n(_l),"RemoteInvitationRefused"),jb(n(_l),"RemoteInvitationAccepted"),jb(n(_l),"RemoteInvitationFailure")).pipe(Pa(1))),m(n(_l),"callerId",void 0),m(n(_l),"callId",void 0),m(n(_l),"_getSession",void 0),m(n(_l),"logger",void 0),m(n(_l),"_content",void 0),m(n(_l),"_channelId",void 0),m(n(_l),"_response",""),_l._channelId=k,_l._content=q,_l.callId=_r,_l.callerId=_s,_l._getSession=f,_l.logger=_a,_l.remoteInvitationEnd$.pipe(kb(6e4),Ja(function(bh){return Xa(bh)&&_l.warn("Remote invitation expired"),Z(bh)})).subscribe({error:function(){_l.state=nb.FAILURE,_l.emit("RemoteInvitationFailure",vi.INVITATION_EXPIRE)}}),_l}ja(l,h);var g=ka(l);return Ia(l,[{key:"channelId",get:function(){return this._channelId},set:function(f){throw new H('Cannot set the "response" of the RemoteInvitation instance.',Ec)}},{key:"content",get:function(){return this._content},set:function(f){throw new H('Cannot set the "content" of the RemoteInvitation instance.',Ec)}},{key:"response",get:function(){return this._response},set:function(f){this._response=f}},{key:"accept",value:function(){var f,k=this;if(this.isRemoteInvitationEnd())throw new L("The local invitation has ended. Cannot accept.",gi);if(this.state===nb.ACCEPT_SENT_TO_LOCAL)throw new L("The remote invitation is accepting. Cannot do the operation.",Ur);if(8192<fh(this._response))throw new H('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',Ec);this.state=nb.ACCEPT_SENT_TO_LOCAL,cc(pn(1e3).pipe(fb(function(){return hd(J(x.mark(function q(){return x.wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return _r.abrupt("return",k._getSession().sendInvitationMessage({peerId:k.callerId,callId:k.callId,extra:k.response,type:"CallAccept",isAcceptAck:!1,channelId:k.channelId}));case 1:case"end":return _r.stop()}},q)})))}),zb(function(q){return f=q.hasPeerReceived}),Pa(1)),jb(this,"RemoteInvitationAccepted")).pipe(kb(5e3),rb(this.remoteInvitationEnd$)).subscribe({error:function(q){if(k.logError(q),k.state=nb.FAILURE,Xa(q))switch(f){case void 0:case!0:return void k.emit("RemoteInvitationFailure",vi.ACCEPT_FAILURE);case!1:return void k.emit("RemoteInvitationFailure",vi.PEER_OFFLINE)}k.emit("RemoteInvitationFailure",vi.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===nb.ACCEPT_SENT_TO_LOCAL)throw new L("The remote invitation is accepting. Cannot do the operation.",Ur);if(this.isRemoteInvitationEnd())throw new L("The invitation is end. Cannot refuse",gi);if(8192<fh(this._response))throw new H('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',Ec);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=nb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(f){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===nb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=f,this.state=nb.CANCELED,this.emit("RemoteInvitationCanceled",f))}},{key:"onAcceptAckReceived",value:function(){this.state!==nb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=nb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[nb.ACCEPTED,nb.REFUSED,nb.CANCELED,nb.FAILURE].includes(this.state)}}]),l}(wb()),YF=function(h){function l(f,k){X(this,l);var q=g.call(this,k,"InvitationManager");return m(n(q),"getSession",void 0),m(n(q),"invitationDispatcher",new ia.EventEmitter),m(n(q),"outgoingLocalInvitations",new Map),m(n(q),"receivedRemoteInvitations",new Ac(void 0,{maxlen:1e4})),m(n(q),"logger",void 0),q.getSession=ho(f),q.logger=k,q.invitationDispatcher.on("remoteInvitationToManager",function(_r){var _s=_r.callId,_a=_r.extra,_l=_r.callerId;_r=_r.channelId,q.receivedRemoteInvitations.has(_s)||((_a=new XF({callerId:_l,callId:_s,getSession:q.getSession,logger:k,extraContent:_a,invitationChannel:_r})).remoteInvitationEnd$.subscribe(function(){q.receivedRemoteInvitations.delete(_s)}),q.receivedRemoteInvitations.set(_s,_a),q.emit("remoteInvitationInstance",_a))}),q.invitationDispatcher.on("acceptAckToRemoteInvitation",function(_r){(_r=q.receivedRemoteInvitations.get(_r.callId))&&_r.onAcceptAckReceived()}),q.invitationDispatcher.on("cancelToRemoteInvitation",function(_r){var _s=_r.extra;(_r=q.receivedRemoteInvitations.get(_r.callId))&&_r.onCancelReceived(_s)}),q.invitationDispatcher.on("acceptToLocalInvitation",function(_r){var _s=_r.extra;(_r=q.outgoingLocalInvitations.get(_r.callId))&&_r.onAcceptReceived(_s)}),q.invitationDispatcher.on("refuseToLocalInvitation",function(_r){var _s=_r.extra;(_r=q.outgoingLocalInvitations.get(_r.callId))&&_r.onRefuseReceived(_s)}),q}ja(l,h);var g=ka(l);return Ia(l,[{key:"invitationMessageHandler",value:function(f){var k=f.body,q=k.callId,_r=k.extra;_r=void 0===_r?"":_r;var _s=k.type,_a=void 0===(k=k.channel)?"":k,_l=f.type;switch(k=f.peerId,f=f.serverReceivedTs,_l){case"CallAccept":"ack"===_s?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:q}):"request"===_s&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:q,extra:_r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:q,callerId:k,extra:_r,channelId:_a});break;case"CallCancel":if("0"===q){q="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(_a,"_").concat(_r),this.getSession().emit("peerTextMessage",{peerId:k,properties:{serverReceivedTs:f,isOfflineMessage:!1},text:q});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:q,extra:_r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:q,extra:_r});break;default:throw Nn("invitationType",_l)}}},{key:"genLocalInvitation",value:function(f){var k=this,q=new WF(f,this.getSession,this.logger);return q.localInvitationEnd$.subscribe(function(){k.outgoingLocalInvitations.delete(q.callId)}),this.outgoingLocalInvitations.set(q.callId,q),q}}]),l}(wb()),ZF=function(h,l,g){var f=!0,k=!0;if("function"!=typeof h)throw new TypeError("Expected a function");return ob(g)&&(f="leading"in g?!!g.leading:f,k="trailing"in g?!!g.trailing:k),mE(h,l,{leading:f,maxWait:l,trailing:k})},xb,vf;!function(h){h[h.JOINED=0]="JOINED",h[h.LEFT=1]="LEFT"}(vf||(vf={}));var om=S.ConnectionState,$F=(xb=function(h){function l(f,k,q,_r){X(this,l);var _s=g.call(this,_r,"RtmChannel",!0);return m(n(_s),"onMemberCountUpdated",ZF(function(_a){_a!==_s.memberCount&&(_s.memberCount=_a,_s.emit("MemberCountUpdated",_a))},1e3)),m(n(_s),"getSession",void 0),m(n(_s),"memberCount",0),m(n(_s),"joinState","LEFT"),m(n(_s),"joinPromise",void 0),m(n(_s),"memberJoinedLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"memberLeftLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"memberJoinStateLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"attributesSeqLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"channelId",void 0),m(n(_s),"client",void 0),m(n(_s),"onChannelMemberCountUpdated",function(_a,_l){_s.channelId===_a&&_s.onMemberCountUpdated(_l)}),m(n(_s),"onLogout",function(){try{_s.clearChannel(_s.getSession())}catch(_a){}}),m(n(_s),"onAttributesUpdated",function(_a){var _l=_a.channelId,bh=_a.attributeMaps,n_=_a.seq;_a=_a.instance.toString();var _A=_s.attributesSeqLru.get(_a);if((!_A||n_.greaterThan(_A))&&(_s.attributesSeqLru.set(_a,n_),_l===_s.channelId)){for(_l={},n_=0;n_<bh.length;n_++){var r_=bh[n_];_a=r_.key,_A=r_.ms;var p_=r_.value;if(r_=r_.origin,"string"!=typeof _a||!U.isLong(_A)||"string"!=typeof p_||!Aa(r_))break;_l[_a]={value:p_,lastUpdateUserId:r_,lastUpdateTs:_A.toNumber()}}_s.emit("AttributesUpdated",_l)}}),m(n(_s),"onChannelTextMessage",function(_a){_a.channelId===_s.channelId&&_s.emit("ChannelMessage",{text:_a.text,messageType:S.MessageType.TEXT},_a.memberId,_a.properties)}),m(n(_s),"onChannelMediaMessage",function(_a){var _l=_a.memberId,bh=_a.properties,n_=_a.details,_A=_a.messageType;_a.channelId===_s.channelId&&("FILE"===_A?_s.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(ra(n_.media_size),10),description:ra(n_.media_description),fileName:ra(n_.media_filename),mediaId:ra(n_.media_id),thumbnail:new Blob([n_.media_thumbnail])},_l,bh):"IMAGE"===_A&&_s.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(ra(n_.media_size),10),description:ra(n_.media_description),fileName:ra(n_.media_filename),mediaId:ra(n_.media_id),thumbnail:new Blob([n_.media_thumbnail]),height:parseInt(ra(n_.media_height),10),width:parseInt(ra(n_.media_width),10),thumbnailHeight:parseInt(ra(n_.media_thumbnailheight),10),thumbnailWidth:parseInt(ra(n_.media_thumbnailwidth),10)},_l,bh))}),m(n(_s),"onChannelRawMessage",function(_a){_a.channelId===_s.channelId&&_s.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:_a.raw,description:_a.desc},_a.memberId,_a.properties)}),m(n(_s),"onMemberNotice",function(_a){var _l=_a.memberId,bh=_a.type,n_=_a.size;if(_a.channelId===_s.channelId){var _A=_a.instance.toString();_a=_a.seq.toString();var r_={MemberLeft:_s.memberLeftLru,MemberJoined:_s.memberJoinedLru,MemberCountUpdated:void 0}[bh];if(r_){if(r_.has(_A+_a))return void _s.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",bh,_a,pa(_s.channelId),pa(_l||""));if(r_.set(_A+_a,void 0),"string"!=typeof _l)return;if(_l!==_s.getSession().context.uid&&((_A=_s.memberJoinStateLru.get(_l))===vf.JOINED&&"MemberJoined"===bh||_A===vf.LEFT&&"MemberLeft"===bh))return void _s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",bh,_a,pa(_s.channelId),pa(_l||""));_s.memberJoinStateLru.set(_l,"MemberJoined"===bh?vf.JOINED:vf.LEFT)}_s.info("Channel %s - %s, memberId: %s",bh,pa(_s.channelId),"MemberCountUpdated"===bh?"[unknown]":pa(_l||"")),_A=_l===_s.getSession().context.uid,"MemberLeft"===bh&&Aa(_l)||"MemberJoined"===bh&&Aa(_l)?(_A||_s.emit(bh,_l),_s.onMemberCountUpdated(n_)):"MemberCountUpdated"===bh&&"number"==typeof n_&&_s.onMemberCountUpdated(n_)}}),_s.getSession=ho(k),_s.channelId=f,_s.client=q,_s.info("A channel created, id %s",pa(f)),_s}ja(l,h);var g=ka(l);return Ia(l,[{key:"join",value:function(){var f=J(x.mark(function k(){var q,_r,_s,_a,_l,bh,n_,_A=this;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:r_.prev=0,q=this.getSession(),r_.next=7;break;case 4:throw r_.prev=4,r_.t0=r_.catch(0),new L("The client is not logged in. Cannot do the operation",Zr);case 7:if(r_.prev=7,Aa(this.channelId)){r_.next=10;break}throw new H(["The %s in the arguments is invalid","channelId"],dC);case 10:if("LEFT"===this.joinState){r_.next=13;break}throw hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:q.context.uid,elapse:ib(q.startTime),errCode:Yr,sid:ab(q.instanceId)},null!==(_a=this.client.context.config.enableCloudProxy)&&void 0!==_a&&_a),new L("The channel has joined. Cannot rejoin",Yr);case 13:if(!q.usedChannelIds.includes(this.channelId)){r_.next=16;break}throw hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:q.context.uid,elapse:ib(q.startTime),errCode:$r,sid:ab(q.instanceId)},null!==(_l=this.client.context.config.enableCloudProxy)&&void 0!==_l&&_l),new L("A channel of the same channel ID has already joined. Cannot rejoin",$r);case 16:if(!(20<=q.usedChannelIds.length)){r_.next=19;break}throw hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:q.context.uid,elapse:ib(q.startTime),errCode:Xr,sid:ab(q.instanceId)},null!==(bh=this.client.context.config.enableCloudProxy)&&void 0!==bh&&bh),new lb("The joined channels has exceeded the limit of 20",Xr);case 19:return hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:q.context.uid,elapse:ib(q.startTime),errCode:0,sid:ab(q.instanceId)},null!==(_r=this.client.context.config.enableCloudProxy)&&void 0!==_r&&_r),this.log("Joining the channel %s",pa(this.channelId)),this.joinState="JOINING",q.usedChannelIds.push(this.channelId),this.joinPromise=q.requestChannelJoin(this.channelId).then(function(){_A.joinState="JOINED"}),r_.next=26,this.joinPromise;case 26:hb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(q.startTime),errCode:0,sid:ab(q.instanceId),serverErrCode:0,userId:q.context.uid},null!==(_s=this.client.context.config.enableCloudProxy)&&void 0!==_s&&_s),this.info("The channel %s joined successfully",pa(this.channelId)),q.on("channelTextMessage",this.onChannelTextMessage),q.on("channelRawMessage",this.onChannelRawMessage),q.on("channelMediaMessage",this.onChannelMediaMessage),q.on("memberNotice",this.onMemberNotice),q.on("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.on("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.once("LOGOUT",this.onLogout),r_.next=47;break;case 37:if(r_.prev=37,r_.t1=r_.catch(7),"JOINING"===this.joinState&&(this.joinState="LEFT"),this.logError(r_.t1),!ta(r_.t1)){r_.next=43;break}throw r_.t1;case 43:if(!Xa(r_.t1)){r_.next=46;break}throw hb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(q.startTime),errCode:Wr,sid:ab(q.instanceId),serverErrCode:0,userId:q.context.uid},null!==(n_=this.client.context.config.enableCloudProxy)&&void 0!==n_&&n_),new gb(["Join channel %s timed out",pa(this.channelId)],Wr);case 46:throw new bd(["The channel %s join failure",pa(this.channelId)],{code:Vr,originalError:r_.t1});case 47:case"end":return r_.stop()}},k,this,[[0,4],[7,37]])}));return function(){return f.apply(this,arguments)}}()},{key:"leave",value:function(){var f=J(x.mark(function k(){var q,_r,_s,_a;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:_l.prev=0,_r=this.getSession(),_l.next=7;break;case 4:throw _l.prev=4,_l.t0=_l.catch(0),new L("The client is not logged in. Cannot do the operation",fC);case 7:if("LEFT"!==this.joinState){_l.next=9;break}throw new L("The channel does not join. Cannot do the operation",eC);case 9:return _l.prev=9,_r.requestChannelLeave(this.channelId),_l.next=13,this.clearChannel(_r);case 13:_l.next=24;break;case 15:if(_l.prev=15,_l.t1=_l.catch(9),this.logError(_l.t1),!ta(_l.t1)){_l.next=22;break}throw void 0===_l.t1.code&&(_l.t1.code=bs),hb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(_r.startTime),errCode:bs,sid:ab(_r.instanceId),userId:_r.context.uid},null!==(_a=this.client.context.config.enableCloudProxy)&&void 0!==_a&&_a),_l.t1;case 22:throw hb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(_r.startTime),errCode:as,sid:ab(_r.instanceId),userId:_r.context.uid},null!==(_s=this.client.context.config.enableCloudProxy)&&void 0!==_s&&_s),new bd("The channel leave failure",{code:as,originalError:_l.t1});case 24:hb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(_r.startTime),errCode:0,sid:ab(_r.instanceId),userId:_r.context.uid},null!==(q=this.client.context.config.enableCloudProxy)&&void 0!==q&&q);case 25:case"end":return _l.stop()}},k,this,[[0,4],[9,15]])}));return function(){return f.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var f=J(x.mark(function k(q){var _s,_a,_l,bh=this,n_=arguments;return x.wrap(function(_A){for(;;)switch(_A.prev=_A.next){case 0:if(_a=void 0!==(_s=(1<n_.length&&void 0!==n_[1]?n_[1]:{}).enableHistoricalMessaging)&&_s,Wn(q,fi),"JOINED"===this.joinState){_A.next=4;break}throw new L("The channel does not join. Cannot do the operation",UB);case 4:if(this.client.connectionState!==om.RECONNECTING){_A.next=9;break}return _l=Date.now(),_A.next=8,new Promise(function(r_,p_){var S_,I_=(S_=J(x.mark(function x_(){var B_;return x.wrap(function(Q_){for(;;)switch(Q_.prev=Q_.next){case 0:return B_=Date.now()-_l,Q_.prev=1,Q_.next=4,dh({message:q,peerId:bh.channelId,toPeer:!1,session:bh.getSession(),errorCodes:{NOT_LOGGED_IN:El,TOO_OFTEN:Qr},diff:B_,logger:bh.logger,options:{enableHistoricalMessaging:_a,enableOfflineMessaging:!1}});case 4:r_(),Q_.next=12;break;case 7:Q_.prev=7,Q_.t0=Q_.catch(1),Xa(Q_.t0)&&p_(new gb(he(bh.name,"sendMessageToPeer",1e4),Dl)),ta(Q_.t0)&&p_(Q_.t0),p_(new da("Channel message send failure",{code:Ag,originalError:Q_.t0}));case 12:return Q_.prev=12,clearTimeout(v_),Q_.finish(12);case 15:case"end":return Q_.stop()}},x_,null,[[1,7,12,15]])})),function(){return S_.apply(this,arguments)});bh.client.internalEmitter.once("RECONNECTED",I_);var v_=setTimeout(function(){bh.client.internalEmitter.off("RECONNECTED",I_),p_(new gb(he(bh.name,"sendMessageToPeer",1e4),Dl))},9e3)});case 8:return _A.abrupt("return");case 9:if(this.client.connectionState===om.CONNECTED){_A.next=11;break}throw new L("The client is not logged in. Cannot do the operation",El);case 11:return _A.prev=11,_A.next=14,dh({message:q,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:El,TOO_OFTEN:Qr},diff:0,logger:this.logger,options:{enableHistoricalMessaging:_a,enableOfflineMessaging:!1}});case 14:_A.next=24;break;case 16:if(_A.prev=16,_A.t0=_A.catch(11),!Xa(_A.t0)){_A.next=20;break}throw new gb(he(this.name,"sendMessage",1e4),Dl);case 20:if(!ta(_A.t0)){_A.next=23;break}throw this.logError(_A.t0),_A.t0;case 23:throw new bd("The channel message send failure",Ag);case 24:case"end":return _A.stop()}},k,this,[[11,16]])}));return function(k){return f.apply(this,arguments)}}()},{key:"getMembers",value:function(){var f=J(x.mark(function k(){var q,_r;return x.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:if(_s.prev=0,this.client.connectionState===om.CONNECTED){_s.next=3;break}throw new L("The client is not logged in. Cannot do the operation",aC);case 3:if("JOINED"===this.joinState){_s.next=5;break}throw new L("The channel does not join. Cannot do the operation",$B);case 5:return q=this.getSession().requestChannelMemberList(this.channelId),_s.next=8,q.pipe(ea(function(_a){return _a.memberInfos.map(function(_l){return _l.account})})).toPromise();case 8:return _r=_s.sent,this.info("Channel %s - get members success, %o",pa(this.channelId),_r.map(pa)),_s.abrupt("return",_r);case 13:if(_s.prev=13,_s.t0=_s.catch(0),!ta(_s.t0)){_s.next=18;break}throw this.logError(_s.t0),_s.t0;case 18:throw new bd("The channel members get failure",YB);case 19:case"end":return _s.stop()}},k,this,[[0,13]])}));return function(){return f.apply(this,arguments)}}()},{key:"clearChannel",value:function(){var f=J(x.mark(function k(q){var _r=this;return x.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:if(q.emit("channelLeft",this.channelId),"JOINING"!==this.joinState){_s.next=4;break}return _s.next=4,this.joinPromise;case 4:this.joinState="LEFT",this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,q.removeListener("channelTextMessage",this.onChannelTextMessage),q.removeListener("channelRawMessage",this.onChannelRawMessage),q.removeListener("channelMediaMessage",this.onChannelMediaMessage),q.removeListener("memberNotice",this.onMemberNotice),q.removeListener("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.removeListener("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.removeListener("LOGOUT",this.onLogout),q.usedChannelIds=q.usedChannelIds.filter(function(_a){return _a!==_r.channelId});case 18:case"end":return _s.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()}]),l}(wb()),la(xb.prototype,"join",[Qb],Object.getOwnPropertyDescriptor(xb.prototype,"join"),xb.prototype),la(xb.prototype,"leave",[Qb],Object.getOwnPropertyDescriptor(xb.prototype,"leave"),xb.prototype),la(xb.prototype,"sendMessage",[Qb],Object.getOwnPropertyDescriptor(xb.prototype,"sendMessage"),xb.prototype),la(xb.prototype,"getMembers",[Ra],Object.getOwnPropertyDescriptor(xb.prototype,"getMembers"),xb.prototype),xb),E,Ib=S.ConnectionChangeReason,T=S.ConnectionState,eu={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},aG={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},bG=(E=function(h){function l(f,k,q,_r){X(this,l);var _s=g.call(this,k,"RtmClient",!0);return m(n(_s),"connectionState",T.DISCONNECTED),m(n(_s),"internalEmitter",new ia),m(n(_s),"context",void 0),m(n(_s),"attributes",{}),m(n(_s),"loginPromise",void 0),m(n(_s),"attributeDrafts",new Set),m(n(_s),"session",void 0),m(n(_s),"lastLoginTime",void 0),m(n(_s),"reconnId",0),m(n(_s),"channelAttributesCacheLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"invitationManager",void 0),m(n(_s),"subscribedPeerStatusCache",{}),m(n(_s),"pendingPeerStatusSubCount",0),m(n(_s),"peerStatusSeqLru",new Ac(void 0,{maxlen:1e4})),m(n(_s),"peerUnreachableTimers",{}),m(n(_s),"mediaTaskManager",void 0),m(n(_s),"setParameters",void 0),m(n(_s),"updateConfig",void 0),m(n(_s),"blacklistedIP",{}),m(n(_s),"userDropHandler",function(_a){if(_s.connectionState!==T.ABORTED)switch(_a){case 11:_s.logError("Kicked off by remote session"),_s.onConnectionStateChanged(T.ABORTED,Ib.REMOTE_LOGIN);break;case 14:case 15:case 16:_s.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[_a])),_s.onConnectionStateChanged(T.ABORTED,Ib.BANNED_BY_SERVER);break;default:_s.logError("User kicked off for unknown code: ".concat(_a)),_s.onConnectionStateChanged(T.ABORTED,Ib.INTERRUPTED)}}),_s.context=new VE(f,q,k),_s.mediaTaskManager=new kt(k),_s.context.config=q,_s.internalEmitter.setMaxListeners(512),_s.setParameters=_r.bind(n(_s)),_s.updateConfig=_r.bind(n(_s)),_s.invitationManager=new YF(function(){return _s.session},k),_s.invitationManager.on("remoteInvitationInstance",function(_a){_s.emit("RemoteInvitationReceived",_a)}),_s.setMaxListeners(512),_s.internalEmitter.setMaxListeners(512),_s}ja(l,h);var g=ka(l);return Ia(l,[{key:"renewToken",value:function(){var f=J(x.mark(function k(q){var _r,_a,_l=this;return x.wrap(function(bh){for(;;)switch(bh.prev=bh.next){case 0:if("string"==typeof q&&0!==q.length){bh.next=2;break}throw new H("Invalid argument",nC);case 2:if(this.connectionState!==T.ABORTED){bh.next=5;break}return bh.next=5,new Promise(function(){});case 5:if(this.connectionState===T.CONNECTED||this.connectionState===T.RECONNECTING){bh.next=7;break}throw new L("The client is not logged in",qC);case 7:if(void 0!==this.session){bh.next=9;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return bh.prev=9,_r=this.context.token,this.context.token=q,bh.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Md(function(){return Error("No available edge address to connect")}),Ce(function(n_){return n_.pipe(ba(function(_A){if(ta(_A))throw _A}),jd(2500),Pa(4))}),Pa(1),kb(2e4),Ja(function(n_){return Xa(n_)&&_l.warn("renewToken timed out"),Z(n_)})).toPromise();case 14:_a=bh.sent.ticket,bh.next=27;break;case 18:if(bh.prev=18,bh.t0=bh.catch(9),this.context.token=_r,bh.t0.code!==ds&&bh.t0.code!==es){bh.next=23;break}throw new of("Invalid token",pC);case 23:if(bh.t0.code!==ii){bh.next=25;break}throw new of("The token expired",oC);case 25:if(!Xa(bh.t0)){bh.next=27;break}throw new gb("Renew token timed out",mC);case 27:this.session.curLoginSockets.filter(function(n_){return void 0!==n_}).forEach(function(n_){return n_.ticket=_a});case 28:case"end":return bh.stop()}},k,this,[[9,18]])}));return function(k){return f.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var f=J(x.mark(function k(q){var _s,_a=this;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:if(this.connectionState===T.CONNECTED){_l.next=2;break}throw new L("The client is not logged in",lC);case 2:if(void 0!==this.session){_l.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(q)||0===q.length||q.some(function(bh){return!Aa(bh)})||256<q.length)){_l.next=6;break}throw new H("invalid arguments",is);case 6:return _l.next=8,this.session.requestPeersOnlineStatus(q).toPromise();case 8:return _s=Bc(pl(_l.sent.userInfos,"account"),function(bh){return!!bh.ts}),Object.keys(_s).forEach(function(bh){if(bh in _a.subscribedPeerStatusCache&&_a.subscribedPeerStatusCache[bh]!==S.PeerOnlineState.UNREACHABLE){var n_=_s[bh]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;_a.emit("PeersOnlineStatusChanged",m({},bh,n_)),_a.subscribedPeerStatusCache[bh]=n_}}),_l.abrupt("return",_s);case 12:case"end":return _l.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var f=J(x.mark(function k(q){var _r,_s,_l,bh,n_,_A,r_,p_;return x.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(this.connectionState===T.CONNECTED){I_.next=2;break}throw new L("The client is not logged in",XB);case 2:if(void 0!==this.session){I_.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(q)&&q.every(function(v_){return"string"==typeof v_})&&0!==q.length){I_.next=6;break}throw new H("Invalid arguments: channelIds",Sr);case 6:if(!(32<q.length)){I_.next=8;break}throw new H("getChannelMemberCount exceed limit of 32 channelIds",WB);case 8:_r=0;case 9:if(!(_r<q.length)){I_.next=16;break}if(Aa(_s=q[_r])){I_.next=13;break}throw new H(["getChannelMemberCount channel id %s is invalid",_s],Sr);case 13:_r++,I_.next=9;break;case 16:return I_.next=18,this.session.requestGetChannelMemberCount(q).toPromise();case 18:for(_l=I_.sent.groupInfos,bh={},n_=0;n_<_l.length;n_++)p_=(_A=_l[n_]).memberCount,Aa(r_=_A.group)&&"number"==typeof p_&&(this.internalEmitter.emit("channelMemberCountUpdated",r_,p_),bh[r_]=p_);return I_.abrupt("return",bh);case 23:case"end":return I_.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var f=J(x.mark(function k(q){var _r,_s;return x.wrap(function(_a){for(;;)switch(_a.prev=_a.next){case 0:if(Mf({attributes:q,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){_a.next=3;break}throw new L("The client is not logged in",Zb);case 3:if(void 0!==this.session){_a.next=5;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return _r=this.session.requestSetLocalUserAttributes(q).toPromise(),this.attributeDrafts.add(_s={attribute:q,promise:_r}),_a.prev=8,_a.next=11,_r;case 11:this.attributes=q,_a.next=19;break;case 14:if(_a.prev=14,_a.t0=_a.catch(8),!ta(_a.t0)){_a.next=18;break}throw _a.t0;case 18:throw new H("arguments is not valid",Oa);case 19:return _a.prev=19,this.attributeDrafts.delete(_s),_a.finish(19);case 22:case"end":return _a.stop()}},k,this,[[8,14,19,22]])}));return function(k){return f.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var f=J(x.mark(function k(q,_r){var _a,_l,bh,n_,_A=arguments;return x.wrap(function(r_){for(;;)switch(r_.prev=r_.next){case 0:if(_l=void 0!==(_a=(2<_A.length&&void 0!==_A[2]?_A[2]:{}).enableNotificationToChannelMembers)&&_a,Mf({attributes:_r,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){r_.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(void 0!==this.session){r_.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return bh=this.session.requestSetChannelAttributes(q,_r,_l).toPromise(),r_.prev=7,r_.next=10,bh;case 10:n_=Bc(_r,function(p_){return new Blob([p_]).size}),this.channelAttributesCacheLru.set(q,n_),r_.next=19;break;case 14:if(r_.prev=14,r_.t0=r_.catch(7),!ta(r_.t0)){r_.next=18;break}throw r_.t0;case 18:throw new H("arguments is not valid",Oa);case 19:case"end":return r_.stop()}},k,this,[[7,14]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:if(_r=wa(wa({},this.attributes),q),Mf({attributes:q,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),Mf({attributes:_r,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){_l.next=5;break}throw new L("The client is not logged in",Zb);case 5:if(void 0!==this.session){_l.next=7;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return _s=this.session.requestAddOrUpdateLocalUserAttributes(q).toPromise(),this.attributeDrafts.add(_a={attribute:_r,promise:_s}),_l.prev=10,_l.next=13,_s;case 13:this.attributes=_r,_l.next=21;break;case 16:if(_l.prev=16,_l.t0=_l.catch(10),!ta(_l.t0)){_l.next=20;break}throw _l.t0;case 20:throw new H("arguments is not valid",is);case 21:return _l.prev=21,this.attributeDrafts.delete(_a),_l.finish(21);case 24:case"end":return _l.stop()}},k,this,[[10,16,21,24]])}));return function(k){return f.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var f=J(x.mark(function k(q,_r){var _a,_l,bh,n_,_A,r_,p_=arguments;return x.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(_l=void 0!==(_a=(2<p_.length&&void 0!==p_[2]?p_[2]:{}).enableNotificationToChannelMembers)&&_a,bh=this.channelAttributesCacheLru.get(q,{}),n_=Bc(_r,function(v_){return new Blob([v_]).size}),_A=wa(wa({},bh),n_),Mf({attributes:_r,attrSizeMap:_A,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){I_.next=7;break}throw new L("The client is not logged in",Zb);case 7:if(void 0!==this.session){I_.next=9;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return r_=this.session.requestAddOrUpdateChannelAttributes(q,_r,_l).toPromise(),I_.prev=10,I_.next=13,r_;case 13:this.channelAttributesCacheLru.set(q,_A),I_.next=21;break;case 16:if(I_.prev=16,I_.t0=I_.catch(10),!ta(I_.t0)){I_.next=20;break}throw I_.t0;case 20:throw new H("arguments is not valid",Oa);case 21:case"end":return I_.stop()}},k,this,[[10,16]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a;return x.wrap(function(bh){for(;;)switch(bh.prev=bh.next){case 0:if(Array.isArray(q)&&0!==q.length&&!q.some(function(n_){return 0===n_.length})){bh.next=2;break}throw new L("arguments is not valid",Oa);case 2:if(this.connectionState===T.CONNECTED){bh.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(void 0!==this.session){bh.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return _r=this.session.requestDeleteLocalUserAttributesByKeys(q).toPromise(),_s={attribute:ml(this.attributes,q),promise:_r},this.attributeDrafts.add(_s),bh.prev=9,bh.next=12,_r;case 12:for(_a=0;_a<q.length;_a++)delete this.attributes[q[_a]];bh.next=20;break;case 15:if(bh.prev=15,bh.t0=bh.catch(9),!ta(bh.t0)){bh.next=19;break}throw bh.t0;case 19:throw new H("arguments is not valid",Oa);case 20:return bh.prev=20,this.attributeDrafts.delete(_s),bh.finish(20);case 23:case"end":return bh.stop()}},k,this,[[9,15,20,23]])}));return function(k){return f.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var f=J(x.mark(function k(q,_r){var _a,_l,bh,n_,_A,p_=arguments;return x.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(_l=void 0!==(_a=(2<p_.length&&void 0!==p_[2]?p_[2]:{}).enableNotificationToChannelMembers)&&_a,Array.isArray(_r)&&0!==_r.length&&Aa(q)&&!_r.some(function(v_){return 0===v_.length||512<v_.length})){I_.next=3;break}throw new L("arguments is not valid",Oa);case 3:if(this.connectionState===T.CONNECTED){I_.next=5;break}throw new L("The client is not logged in",Zb);case 5:if(void 0!==this.session){I_.next=7;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return bh=this.session.requestDeleteChannelAttributesByKeys(q,_r,_l).toPromise(),I_.prev=8,I_.next=11,bh;case 11:if(n_=this.channelAttributesCacheLru.get(q))for(_A=0;_A<_r.length;_A++)delete n_[_r[_A]];I_.next=20;break;case 15:if(I_.prev=15,I_.t0=I_.catch(8),!ta(I_.t0)){I_.next=19;break}throw I_.t0;case 19:throw new H("arguments is not valid",Oa);case 20:case"end":return I_.stop()}},k,this,[[8,15]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var f=J(x.mark(function k(){var q,_r;return x.wrap(function(_s){for(;;)switch(_s.prev=_s.next){case 0:if(this.connectionState===T.CONNECTED){_s.next=2;break}throw new L("The client is not logged in",Zb);case 2:if(void 0!==this.session){_s.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return q=this.session.requestClearLocalUserAttributes().toPromise(),this.attributeDrafts.add(_r={attribute:{},promise:q}),_s.prev=7,_s.next=10,q;case 10:this.attributes={},_s.next=18;break;case 13:if(_s.prev=13,_s.t0=_s.catch(7),!ta(_s.t0)){_s.next=17;break}throw _s.t0;case 17:throw new H("arguments is not valid",Oa);case 18:return _s.prev=18,this.attributeDrafts.delete(_r),_s.finish(18);case 21:case"end":return _s.stop()}},k,this,[[7,13,18,21]])}));return function(){return f.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var f=J(x.mark(function k(q){var _s,_a,_l,bh=arguments;return x.wrap(function(n_){for(;;)switch(n_.prev=n_.next){case 0:if(_a=void 0!==(_s=(1<bh.length&&void 0!==bh[1]?bh[1]:{}).enableNotificationToChannelMembers)&&_s,this.connectionState===T.CONNECTED){n_.next=3;break}throw new L("The client is not logged in",Zb);case 3:if(void 0!==this.session){n_.next=5;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return _l=this.session.requestClearChannelAttributes(q,_a).toPromise(),n_.prev=6,n_.next=9,_l;case 9:this.channelAttributesCacheLru.delete(q),n_.next=17;break;case 12:if(n_.prev=12,n_.t0=n_.catch(6),!ta(n_.t0)){n_.next=16;break}throw n_.t0;case 16:throw new H("arguments is not valid",Oa);case 17:case"end":return n_.stop()}},k,this,[[6,12]])}));return function(k){return f.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var f=J(x.mark(function k(q){var _s,_a;return x.wrap(function(_l){for(;;)switch(_l.prev=_l.next){case 0:if(Aa(q)){_l.next=2;break}throw new H("Not a valid user ID",Oa);case 2:if(this.connectionState===T.CONNECTED){_l.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(void 0!==this.session){_l.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return _l.prev=6,_l.next=9,this.session.requestGetUserAttributeKeys(q).toPromise();case 9:return _s=_l.sent.keys,_l.next=13,this.session.requestGetUserAttributesByKeys(q,_s.slice(0,512)).toPromise();case 13:_a=_l.sent,_l.next=21;break;case 16:if(_l.prev=16,_l.t0=_l.catch(6),!ta(_l.t0)){_l.next=20;break}throw _l.t0;case 20:throw new H("arguments is not valid",Oa);case 21:return _l.abrupt("return",br(_a.attributeInfos.map(function(bh){return[bh.key,bh.value]})));case 22:case"end":return _l.stop()}},k,this,[[6,16]])}));return function(k){return f.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var f=J(x.mark(function k(q){var _s,_l,bh,n_,_A,r_,p_,I_,v_;return x.wrap(function(S_){for(;;)switch(S_.prev=S_.next){case 0:if(Aa(q)){S_.next=2;break}throw new H("Not a valid channel ID",Oa);case 2:if(this.connectionState===T.CONNECTED){S_.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(void 0!==this.session){S_.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return S_.prev=6,S_.next=9,this.session.requestGetChannelAttributesKeys(q).toPromise();case 9:return _s=S_.sent.keys,S_.next=13,this.session.requestGetChannelAttributesByKeys(q,_s).toPromise();case 13:_l=S_.sent.attributeMaps,S_.next=22;break;case 17:if(S_.prev=17,S_.t0=S_.catch(6),!ta(S_.t0)){S_.next=21;break}throw S_.t0;case 21:throw new H("arguments is not valid",Oa);case 22:bh={},n_=0;case 24:if(!(n_<_l.length)){S_.next=32;break}if(p_=(_A=_l[n_]).ms,I_=_A.value,v_=_A.origin,"string"==typeof(r_=_A.key)&&U.isLong(p_)&&"string"==typeof I_&&Aa(v_)){S_.next=28;break}return S_.abrupt("break",32);case 28:bh[r_]={value:I_,lastUpdateUserId:v_,lastUpdateTs:p_.toNumber()};case 29:n_++,S_.next=24;break;case 32:return this.channelAttributesCacheLru.set(q,Bc(bh,function(x_){return new Blob([x_.value]).size})),S_.abrupt("return",bh);case 34:case"end":return S_.stop()}},k,this,[[6,17]])}));return function(k){return f.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var f=J(x.mark(function k(q,_r){var _a,_l,bh,n_,_A,r_,p_,I_,v_;return x.wrap(function(S_){for(;;)switch(S_.prev=S_.next){case 0:if(this.connectionState===T.CONNECTED){S_.next=2;break}throw new L("The client is not logged in",Zb);case 2:if(void 0!==this.session){S_.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Mn(q,_r),S_.prev=5,S_.next=8,this.session.requestGetChannelAttributesByKeys(q,_r).toPromise();case 8:_a=S_.sent.attributeMaps,S_.next=17;break;case 12:if(S_.prev=12,S_.t0=S_.catch(5),!ta(S_.t0)){S_.next=16;break}throw S_.t0;case 16:throw new H("arguments is not valid",Oa);case 17:_l={},bh=this.channelAttributesCacheLru.get(q,{}),n_=0;case 20:if(!(n_<_a.length)){S_.next=29;break}if(p_=(_A=_a[n_]).ms,I_=_A.value,v_=_A.origin,"string"==typeof(r_=_A.key)&&U.isLong(p_)&&"string"==typeof I_&&Aa(v_)){S_.next=24;break}return S_.abrupt("break",29);case 24:bh[r_]=new Blob([I_]).size,_l[r_]={value:I_,lastUpdateUserId:v_,lastUpdateTs:p_.toNumber()};case 26:n_++,S_.next=20;break;case 29:return this.channelAttributesCacheLru.set(q,bh),S_.abrupt("return",_l);case 31:case"end":return S_.stop()}},k,this,[[5,12]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var f=J(x.mark(function k(q,_r){var _s;return x.wrap(function(_a){for(;;)switch(_a.prev=_a.next){case 0:if(this.connectionState===T.CONNECTED){_a.next=2;break}throw new L("The client is not logged in",Zb);case 2:if(void 0!==this.session){_a.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Mn(q,_r),_a.prev=5,_a.next=8,this.session.requestGetUserAttributesByKeys(q,_r).toPromise();case 8:_s=_a.sent,_a.next=16;break;case 11:if(_a.prev=11,_a.t0=_a.catch(5),!ta(_a.t0)){_a.next=15;break}throw _a.t0;case 15:throw new H("arguments is not valid",Oa);case 16:return _a.abrupt("return",br(_s.attributeInfos.map(function(_l){return[_l.key,_l.value]})));case 17:case"end":return _a.stop()}},k,this,[[5,11]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"login",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l,bh;return x.wrap(function(n_){for(;;)switch(n_.prev=n_.next){case 0:if(wn(!0),_s=Yg(),_a=q.token,q.token===this.context.appId&&(_a=void 0),hb("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:ib(this.session&&this.session.startTime),index:{index1:q.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},installId:zg,lts:U.fromNumber(Date.now()),os:7,sid:ab(_s),token:_a||"",userId:q.uid,ver:"1.4.5",buildno:415,subVersion:15,version:4},null!==(_r=this.context.config.enableCloudProxy)&&void 0!==_r&&_r,!0),Hd(q)&&Aa(q.uid)){n_.next=7;break}throw new H("not a valid user id",hi);case 7:if("string"!=typeof _a||!_a){n_.next=11;break}this.context.token=_a,n_.next=13;break;case 11:if("string"==typeof _a||null==_a){n_.next=13;break}throw new H('The "token" is not a valid string.',hi);case 13:return _l=Date.now(),this.context.sid=ab(_s),this.loginPromise=this.loginImpl({uid:q.uid,instanceId:_s}),this.info("RTM Client logging in as ".concat(pa(q.uid))),n_.prev=17,n_.next=20,this.loginPromise;case 20:n_.next=28;break;case 22:throw n_.prev=22,n_.t0=n_.catch(17),ta(n_.t0)&&hb("Link",{ackedServerIp:"",destServerIp:"",ec:n_.t0.code||1,sc:n_.t0.serverCode,elapse:ib(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-_l,sid:ab(_s),userId:q.uid},null!==(bh=this.context.config.enableCloudProxy)&&void 0!==bh&&bh),this.context.token=void 0,this.context.socketUseProxy=!1,n_.t0;case 28:return n_.prev=28,this.loginPromise=void 0,n_.finish(28);case 31:this.context.socketUseProxy&&this.emit("FallbackProxyConnected"),wn(!1);case 33:case"end":return n_.stop()}},k,this,[[17,22,28,31]])}));return function(k){return f.apply(this,arguments)}}()},{key:"logout",value:function(){var f=J(x.mark(function k(){var q;return x.wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:if(!this.loginPromise){_r.next=3;break}return _r.next=3,this.loginPromise;case 3:if(this.connectionState!==T.DISCONNECTED){_r.next=6;break}throw this.logError("Already in logout state"),new L("Logout failure. The client has already been logged out",fs);case 6:if(this.internalEmitter.emit("LOGOUT"),this.connectionState!==T.ABORTED){_r.next=11;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT),_r.abrupt("return");case 11:if(void 0!==this.session){_r.next=14;break}return this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT),_r.abrupt("return");case 14:return hb("Logout",{elapse:ib(this.session.startTime),lts:U.fromNumber(Date.now()),sid:ab(this.session.instanceId),userId:this.context.uid},null!==(q=this.context.config.enableCloudProxy)&&void 0!==q&&q),_r.next=17,this.session.logoutHandler();case 17:this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT),this.log("Log out success");case 19:case"end":return _r.stop()}},k,this)}));return function(){return f.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var f,k=this;if(this.connectionState===T.DISCONNECTED)throw this.logError("Already in logout state"),new L("Logout failure. The client has already been logged out",fs);this.connectionState===T.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(hb("Logout",{elapse:ib(this.session.startTime),lts:U.fromNumber(Date.now()),sid:ab(this.session.instanceId),userId:this.context.uid},null!==(f=this.context.config.enableCloudProxy)&&void 0!==f&&f),this.session.logoutHandler().then(function(){k.log("Log out success")})),this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var f=J(x.mark(function k(q,_r){var _s,_a,_l,bh,n_,_A,r_=this,p_=arguments;return x.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(_l=void 0!==(_a=(_s=2<p_.length&&void 0!==p_[2]?p_[2]:{}).enableOfflineMessaging)&&_a,n_=void 0!==(bh=_s.enableHistoricalMessaging)&&bh,Wn(q,Ie),this.connectionState!==T.RECONNECTING){I_.next=5;break}return _A=Date.now(),I_.abrupt("return",new Promise(function(v_,S_){var Q_,x_=(Q_=J(x.mark(function _0(){var c0;return x.wrap(function(Qv){for(;;)switch(Qv.prev=Qv.next){case 0:if(void 0!==r_.session){Qv.next=2;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return c0=Date.now()-_A,Qv.prev=3,Qv.t0=v_,Qv.next=7,dh({message:q,peerId:_r,toPeer:!0,session:r_.session,errorCodes:{NOT_LOGGED_IN:Hl,TOO_OFTEN:hs},diff:c0,logger:r_.logger,options:{enableHistoricalMessaging:n_,enableOfflineMessaging:_l}});case 7:Qv.t1=Qv.sent,(0,Qv.t0)(Qv.t1),Qv.next=16;break;case 11:Qv.prev=11,Qv.t2=Qv.catch(3),Xa(Qv.t2)&&S_(new gb(he(r_.name,"sendMessageToPeer",1e4),Fl)),ta(Qv.t2)&&S_(Qv.t2),S_(new da("Peer-to-peer message send failure",{code:gs,originalError:Qv.t2}));case 16:return Qv.prev=16,clearTimeout(B_),Qv.finish(16);case 19:case"end":return Qv.stop()}},_0,null,[[3,11,16,19]])})),function(){return Q_.apply(this,arguments)});r_.internalEmitter.once("RECONNECTED",x_);var B_=setTimeout(function(){r_.internalEmitter.off("RECONNECTED",x_),S_(new gb(he(r_.name,"sendMessageToPeer",1e4),Fl))},9e3)}));case 5:if(this.connectionState===T.CONNECTED){I_.next=7;break}throw new L("Failed to send the peer-to-peer message. The client is not logged in",Hl);case 7:if(void 0!==this.session){I_.next=9;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return I_.prev=9,I_.next=12,dh({message:q,peerId:_r,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:Hl,TOO_OFTEN:hs},diff:0,logger:this.logger,options:{enableHistoricalMessaging:n_,enableOfflineMessaging:_l}});case 12:return I_.abrupt("return",I_.sent);case 15:if(I_.prev=15,I_.t0=I_.catch(9),!Xa(I_.t0)){I_.next=19;break}throw new gb(he(this.name,"sendMessageToPeer",1e4),Fl);case 19:if(!ta(I_.t0)){I_.next=21;break}throw I_.t0;case 21:throw new da("Peer-to-peer message send failure",{code:gs,originalError:I_.t0});case 22:case"end":return I_.stop()}},k,this,[[9,15]])}));return function(k,q){return f.apply(this,arguments)}}()},{key:"createChannel",value:function(f){var k=this;if(!Aa(f))throw new H(["The %s in the arguments is invalid",Object.keys({channelId:f})[0]],VB);return new $F(f,function(){return k.session},this,this.logger)}},{key:"createLocalInvitation",value:function(f){if(!Aa(f))throw new H(["The %s in the arguments is invalid",Object.keys({calleeId:f})[0]],Ec);return this.invitationManager.genLocalInvitation(f)}},{key:"subscribePeersOnlineStatus",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,bh,n_,_A,r_,p_,I_,v_,S_,x_,B_=this;return x.wrap(function(Q_){for(;;)switch(Q_.prev=Q_.next){case 0:if(this.connectionState===T.CONNECTED){Q_.next=2;break}throw new L("The client is not logged in",Il);case 2:if(void 0!==this.session){Q_.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(q)&&0!==q.length){Q_.next=6;break}throw new H("Invalid arguments: peerIds",Cg);case 6:_r=0;case 7:if(!(_r<q.length)){Q_.next=14;break}if(Aa(_s=q[_r])){Q_.next=11;break}throw new H(["subscribePeersOnlineStatus peer id %s is invalid",_s],Cg);case 11:_r++,Q_.next=7;break;case 14:if(!(512<(_a=q&&q.length?bl(q):[]).length+Object.keys(this.subscribedPeerStatusCache).length+this.pendingPeerStatusSubCount)){Q_.next=17;break}throw new lb("Subscribed peers overflows",ks);case 17:return this.pendingPeerStatusSubCount+=_a.length,Q_.next=20,this.session.requestSubscribePeersOnlineStatus(_a).toPromise();case 20:bh=Q_.sent.errors,this.pendingPeerStatusSubCount-=_a.length,n_=[],_A=[],r_=0;case 26:if(!(r_<bh.length)){Q_.next=34;break}if(I_=(p_=bh[r_]).code,"string"==typeof(v_=p_.account)){Q_.next=30;break}throw new da("Returned account is invalid",js);case 30:0!==I_&&n_.push(v_);case 31:r_++,Q_.next=26;break;case 34:for(S_=0;S_<_a.length;S_++)n_.includes(x_=_a[S_])||(_A.push(x_),this.subscribedPeerStatusCache[x_]=void 0);if(this.session.requestPeersOnlineStatus(_A).pipe(ea(function(_0){return Bc(pl(_0.userInfos,"account"),function(c0){return!!c0.ts})})).subscribe(function(_0){_0=Bc(_0,function(c0,Qv){return B_.subscribedPeerStatusCache[Qv]=c0?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE}),B_.emit("PeersOnlineStatusChanged",_0)}),0===n_.length){Q_.next=38;break}throw new da("Subscription failed",js);case 38:case"end":return Q_.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l;return x.wrap(function(n_){for(;;)switch(n_.prev=n_.next){case 0:if(this.connectionState===T.CONNECTED){n_.next=2;break}throw new L("The client is not logged in",Il);case 2:if(void 0!==this.session){n_.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(q)&&0!==q.length){n_.next=6;break}throw new H("Invalid arguments: peerIds",Cg);case 6:_r=0;case 7:if(!(_r<q.length)){n_.next=14;break}if(Aa(_s=q[_r])){n_.next=11;break}throw new H(["subscribePeersOnlineStatus peer id %s is invalid",_s],Cg);case 11:_r++,n_.next=7;break;case 14:if(!(512<q.length)){n_.next=16;break}throw new lb("Unsubscribed peers overflows",ks);case 16:for(_a=q&&q.length?bl(q):[],this.session.requestUnsubscribePeersOnlineStatus(_a),_l=0;_l<_a.length;_l++)delete this.subscribedPeerStatusCache[_a[_l]];case 19:case"end":return n_.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var f=J(x.mark(function k(q){return x.wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:if(this.connectionState===T.CONNECTED){_r.next=2;break}throw new L("The client is not logged in",Il);case 2:if(q!==S.PeerSubscriptionOption.ONLINE_STATUS){_r.next=4;break}return _r.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new H("Subscription option not supported",Cg);case 5:case"end":return _r.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"createMessage",value:function(f){return"IMAGE"===f.messageType?wa({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},f):"FILE"===f.messageType?wa({fileName:"",description:"",thumbnail:new Blob,size:0},f):f}},{key:"downloadMedia",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l,bh,n_,_A,r_,p_,I_,v_,S_,Q_=this,_0=arguments;return x.wrap(function(c0){for(;;)switch(c0.prev=c0.next){case 0:if(_r=1<_0.length&&void 0!==_0[1]?_0[1]:{},"string"==typeof q){c0.next=3;break}throw new H("invalid mediaId format",Jl);case 3:if(c0.prev=3,_s=q.split("z"),_a=ua(_s,3),bh=_a[1],n_=_a[2],_A=(_l=_a[0]).slice(1,65),r_=YE(_A),p_=parseInt(_l.slice(65),10),I_=parseInt(bh,10),v_=parseInt(n_,10),!(Number.isNaN(p_)||Number.isNaN(I_)||Number.isNaN(v_))){c0.next=12;break}throw new H("Invalid mediaId content",Jl);case 12:c0.next=19;break;case 14:if(c0.prev=14,c0.t0=c0.catch(3),!ta(c0.t0)){c0.next=18;break}throw c0.t0;case 18:throw new H("parse mediaId failure",{code:Jl,originalError:c0.t0});case 19:if(this.connectionState===T.CONNECTED){c0.next=21;break}throw new L("The client is not logged in, cannot download",yC);case 21:if(void 0!==this.session){c0.next=23;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return S_=this.mediaTaskManager.addDownloadTask({unit:I_,zone:p_,hashHexStr:_A,size:v_},function(){if(void 0===Q_.session)throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});return Q_.session.requestFileDownloadIndexGet({hash:r_,zone:p_,unit:I_,size:v_}).toPromise()},_r),c0.next=26,this.mediaTaskManager.waitMediaTask(S_);case 26:return c0.abrupt("return",c0.sent.payload);case 29:case"end":return c0.stop()}},k,this,[[3,14]])}));return function(k){return f.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l,bh,n_,_A,r_,p_,I_,v_,S_,x_,B_,Q_,_0,c0,Qv,h0,E0,H_,e0,P_,Rv,E_=this,L_=arguments;return x.wrap(function(F_){for(;;)switch(F_.prev=F_.next){case 0:if(_s=2<L_.length&&void 0!==L_[2]?L_[2]:{},Hd(_r=1<L_.length&&void 0!==L_[1]?L_[1]:{})){F_.next=4;break}throw new H("Invalid params",Of);case 4:if(_a="thumbnailWidth"in _r||"thumbnailHeight"in _r||"width"in _r||"height"in _r,bh=void 0===(_l=_r.messageType)?_a?"IMAGE":"FILE":_l,_A=void 0===(n_=_r.description)?"":n_,p_=void 0===(r_=_r.fileName)?"":r_,I_=_r.thumbnail,"string"==typeof _r.messageType&&"string"==typeof _A&&"string"==typeof p_&&(Tn(I_)||void 0===I_)&&Tn(q)){F_.next=8;break}throw new H("Invalid message params type",Of);case 8:if(!_a||"FILE"!==bh){F_.next=10;break}throw new H("Invalid message params, unexpected field in RtmFileMessage",Of);case 10:if(!(33554432<(v_=q.size))){F_.next=13;break}throw new lb("The payload size overflow 32 MB",sC);case 13:return F_.next=15,pj(q);case 15:return S_=F_.sent,F_.next=18,XE(S_);case 18:if(x_=F_.sent,this.connectionState===T.CONNECTED){F_.next=21;break}throw new L("The client is not logged in",uC);case 21:if("IMAGE"!==bh){F_.next=29;break}return F_.next=24,Sv(_r,S_);case 24:Q_=(B_=F_.sent).height,_0=B_.width,c0=B_.thumbnailWidth,Qv=B_.thumbnailHeight;case 29:return h0=this.mediaTaskManager.addUploadTask({file:new Uint8Array(S_),hash:x_},function(){if(void 0===E_.session)throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});return E_.session.fetchFileUploadIndexGet({hash:x_,size:v_})},function(J_,z_){if(void 0===E_.session)throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});return E_.session.requestFileUploadIndexSet({hash:x_,unit:J_,servers:z_}).toPromise()},_s),F_.next=32,this.mediaTaskManager.waitMediaTask(h0);case 32:if(H_=(E0=F_.sent).zone,e0=E0.retUnit,"IMAGE"!==bh){F_.next=38;break}return P_={height:Q_,width:_0,fileName:p_,size:v_,description:_A,thumbnail:I_,messageType:bh,thumbnailWidth:c0,thumbnailHeight:Qv,mediaId:"0".concat(et(x_)).concat(H_,"z").concat(e0,"z").concat(v_,"z").concat(Q_,"z").concat(_0)},F_.abrupt("return",P_);case 38:return Rv={fileName:p_,size:v_,description:_A,mediaId:"0".concat(et(x_)).concat(H_,"z").concat(e0,"z").concat(v_),thumbnail:I_,messageType:bh},F_.abrupt("return",Rv);case 40:case"end":return F_.stop()}},k,this)}));return function(k){return f.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var f=J(x.mark(function k(q){var _r,_s,_a,_l,bh,n_,_A,p_=this;return x.wrap(function(I_){for(;;)switch(I_.prev=I_.next){case 0:if(_r=q.uid,_l=void 0===(_a=q.forceLoginTime)?0:_a,bh=_s=q.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){I_.next=4;break}throw new nE(["The frequency of login exceeded the limit of %d queries per second",2],iC);case 4:if(this.connectionState===T.DISCONNECTED||0!==_l){I_.next=6;break}throw new L("The SDK is either logging in or has logged in the Agora RTM system",gC);case 6:I_.prev=6,this.context.uid=_r,I_.next=13;break;case 10:throw I_.prev=10,I_.t0=I_.catch(6),new H(["The %s in the arguments is invalid",Object.keys({uid:_r})[0]],hi);case 13:return 0===_l&&this.onConnectionStateChanged(T.CONNECTING,Ib.LOGIN),(n_=new ct(this.context,this.logger,!1)).blacklistedIP=this.blacklistedIP,this.session=_A=new cu(this.context,n_,bh,this.logger),_A.on("connectionLost",function(){p_.connectionState===T.CONNECTED&&(p_.onConnectionStateChanged(T.RECONNECTING,Ib.INTERRUPTED),p_.session)&&p_.session.once("userJoined",function(){p_.onConnectionStateChanged(T.CONNECTED,Ib.LOGIN_SUCCESS)})}),_A.on("tokenExpired",function(){p_.emit("TokenExpired")}),_A.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",function(v_){p_.emit("MessageFromPeer",{text:v_.text,messageType:S.MessageType.TEXT},v_.peerId,v_.properties)}),this.session.on("peerMediaMessage",function(v_){var S_=v_.peerId,x_=v_.properties,B_=v_.messageType;v_=v_.details,"FILE"===B_?p_.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(ra(v_.media_size),10),description:ra(v_.media_description),fileName:ra(v_.media_filename),mediaId:ra(v_.media_id),thumbnail:new Blob([v_.media_thumbnail])},S_,x_):"IMAGE"===B_&&p_.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(ra(v_.media_size),10),description:ra(v_.media_description),fileName:ra(v_.media_filename),mediaId:ra(v_.media_id),thumbnail:new Blob([v_.media_thumbnail]),height:parseInt(ra(v_.media_height),10),width:parseInt(ra(v_.media_width),10),thumbnailHeight:parseInt(ra(v_.media_thumbnailheight),10),thumbnailWidth:parseInt(ra(v_.media_thumbnailwidth),10)},S_,x_)}),this.session.on("peerRawMessage",function(v_){p_.emit("MessageFromPeer",{rawMessage:v_.raw,description:v_.desc,messageType:S.MessageType.RAW},v_.peerId,v_.properties)}),_A.on("instanceChanged",function(v_){return bh=v_}),_A.on("peerOnlineStatusChanged",function(v_){var S_=v_.instance.toString()+v_.state,x_=p_.peerStatusSeqLru.get(S_);!x_||v_.seq.greaterThan(x_)?(p_.peerStatusSeqLru.set(S_,v_.seq),v_.state!==p_.subscribedPeerStatusCache[v_.peerId]&&p_.emit("PeersOnlineStatusChanged",m({},v_.peerId,v_.state)),p_.subscribedPeerStatusCache[v_.peerId]=v_.state,clearTimeout(p_.peerUnreachableTimers[S_]),v_.state===S.PeerOnlineState.UNREACHABLE&&(p_.peerUnreachableTimers[S_]=setTimeout(function(){p_.subscribedPeerStatusCache[v_.peerId]===S.PeerOnlineState.UNREACHABLE&&(p_.subscribedPeerStatusCache[v_.peerId]=S.PeerOnlineState.ONLINE,p_.emit("PeersOnlineStatusChanged",m({},v_.peerId,S.PeerOnlineState.ONLINE)))},3e4))):p_.log("peerOnlineStatusChanged dedup for %s, %d",S_,v_.seq.toNumber())}),_A.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),_A.on("channelAttributesUpdated",function(v_){var S_=v_.channelId;v_=v_.attributeMaps;for(var x_={},B_=0;B_<v_.length;B_++){var Q_=v_[B_],_0=Q_.key,c0=Q_.ms,Qv=Q_.value;if(Q_=Q_.origin,"string"!=typeof _0||!U.isLong(c0)||"string"!=typeof Qv||!Aa(Q_))break;x_[_0]=new Blob([Qv]).size}p_.channelAttributesCacheLru.set(S_,x_)}),_A.on("userJoined",function(v_){if(0!==Object.keys(p_.attributes).length){if(void 0===p_.session)return;p_.session.requestSetLocalUserAttributes(p_.attributes,v_).toPromise()}if(0!==p_.attributeDrafts.size)for(var S_=function(Q_,_0){var c0=(Q_=_0[Q_]).attribute;Q_.promise.then(function(){void 0!==p_.session&&p_.session.requestSetLocalUserAttributes(c0,v_).toPromise()})},x_=0,B_=Array.from(p_.attributeDrafts);x_<B_.length;x_++)S_(x_,B_);0!==Object.keys(p_.subscribedPeerStatusCache).length&&_A.requestSubscribePeersOnlineStatus(Object.keys(p_.subscribedPeerStatusCache))}),_A.on("banEdgeIP",function(v_){p_.banIP(v_)}),this.lastLoginTime=Date.now(),I_.prev=32,I_.next=35,_A.loginHandler().toPromise();case 35:this.mediaTaskManager.setAuthInfo({ticket:_A.connection.curOpenSockets.filter(function(v_){return void 0!==v_})[0].ticket,instance:_A.instanceId,useNewDomain:.5<=Math.random(),loginOpt:_A.userJoinOptions.toLong()}),I_.next=54;break;case 38:if(I_.prev=38,I_.t1=I_.catch(32),!("loginRespTimeout"===I_.t1.name&&2>_l)){I_.next=47;break}return _A.removeAllListeners(),I_.next=44,this.loginImpl({uid:_r,instanceId:_s,forceLoginTime:_l+1});case 44:return I_.abrupt("return");case 47:if(!Xa(I_.t1)){I_.next=50;break}throw this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGIN_TIMEOUT),new gb(he(this.name,"login",12e3),hC);case 50:if(this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGIN_FAILURE),!ta(I_.t1)){I_.next=53;break}throw I_.t1;case 53:throw new da("Login failure",{code:cs,originalError:I_.t1});case 54:this.onConnectionStateChanged(T.CONNECTED,Ib.LOGIN_SUCCESS);case 55:case"end":return I_.stop()}},k,this,[[6,10],[32,38]])}));return function(k){return f.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(f,k){var q,_r=this;f===T.RECONNECTING&&(this.reconnId+=1),hb("ConnectionStateChange",{elapse:ib(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:eu[f],oldState:eu[this.connectionState],reason:aG[k],sid:ab(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null!==(q=this.context.config.enableCloudProxy)&&void 0!==q&&q),this.connectionState===T.RECONNECTING&&f===T.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ea(function(_s){return Bc(pl(_s.userInfos,"account"),function(_a){return!!_a.ts})})).subscribe(function(_s){_s=Bc(_s,function(_a,_l){return _r.subscribedPeerStatusCache[_l]=_a?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE}),_r.emit("PeersOnlineStatusChanged",_s)}),this.internalEmitter.emit("RECONNECTED")),this.connectionState=f,f!==T.ABORTED&&f!==T.DISCONNECTED||(this.pendingPeerStatusSubCount=this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",f),this.emit("ConnectionStateChanged",f,k)}},{key:"banIP",value:function(f){var k;this.log("ip banned",f);var q=null!==(k=this.blacklistedIP[f])&&void 0!==k?k:0;this.blacklistedIP[f]=q+1}}]),l}(wb()),la(E.prototype,"renewToken",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"renewToken"),E.prototype),la(E.prototype,"queryPeersOnlineStatus",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersOnlineStatus"),E.prototype),la(E.prototype,"getChannelMemberCount",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getChannelMemberCount"),E.prototype),la(E.prototype,"setLocalUserAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"setLocalUserAttributes"),E.prototype),la(E.prototype,"setChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"setChannelAttributes"),E.prototype),la(E.prototype,"addOrUpdateLocalUserAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateLocalUserAttributes"),E.prototype),la(E.prototype,"addOrUpdateChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateChannelAttributes"),E.prototype),la(E.prototype,"deleteLocalUserAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"deleteLocalUserAttributesByKeys"),E.prototype),la(E.prototype,"deleteChannelAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"deleteChannelAttributesByKeys"),E.prototype),la(E.prototype,"clearLocalUserAttributes",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"clearLocalUserAttributes"),E.prototype),la(E.prototype,"clearChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"clearChannelAttributes"),E.prototype),la(E.prototype,"getUserAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributes"),E.prototype),la(E.prototype,"getChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributes"),E.prototype),la(E.prototype,"getChannelAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributesByKeys"),E.prototype),la(E.prototype,"getUserAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributesByKeys"),E.prototype),la(E.prototype,"login",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"login"),E.prototype),la(E.prototype,"logout",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"logout"),E.prototype),la(E.prototype,"logoutSync",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"logoutSync"),E.prototype),la(E.prototype,"sendMessageToPeer",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"sendMessageToPeer"),E.prototype),la(E.prototype,"createChannel",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"createChannel"),E.prototype),la(E.prototype,"createLocalInvitation",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"createLocalInvitation"),E.prototype),la(E.prototype,"subscribePeersOnlineStatus",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"subscribePeersOnlineStatus"),E.prototype),la(E.prototype,"unsubscribePeersOnlineStatus",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"unsubscribePeersOnlineStatus"),E.prototype),la(E.prototype,"queryPeersBySubscriptionOption",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersBySubscriptionOption"),E.prototype),la(E.prototype,"createMessage",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"createMessage"),E.prototype),la(E.prototype,"downloadMedia",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"downloadMedia"),E.prototype),la(E.prototype,"createMediaMessageByUploading",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"createMediaMessageByUploading"),E.prototype),E),pm,qm,rm,sm,fu=null===(pm=/Chrome\/([0-9.]+)/.exec(null===(rm=window)||void 0===rm||null===(sm=rm.navigator)||void 0===sm?void 0:sm.userAgent))||void 0===pm||null===(qm=pm[1])||void 0===qm?void 0:qm.split(".")[0];if(fu&&88<=parseInt(fu,10)&&!pe()){var tm,me=document.createElement("video"),ne=document.createElement("canvas");me.setAttribute("style","display:none"),me.setAttribute("muted",""),me.muted=!0,me.setAttribute("autoplay",""),me.autoplay=!0,me.setAttribute("playsinline",""),ne.setAttribute("style","display:none"),ne.setAttribute("width","1"),ne.setAttribute("height","1"),null===(tm=ne.getContext("2d"))||void 0===tm||tm.fillRect(0,0,1,1),me.srcObject=null==ne?void 0:ne.captureStream()}var gu={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},hu={enableLogUpload:!1,logFilter:gu.LOG_FILTER_INFO,enableCloudProxy:!1},ie=wa(wa({createInstance:function(h){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(h))throw new H(["The %s in the arguments is invalid",Object.keys({appId:h})[0]],Rr);var f=Object.keys(l).filter(function(bh){return!(bh in hu)});if(0!==f.length)throw new H("Invalid RTM config: ".concat(f.join(", ")),Rr);var k=wa(wa({},hu),l);if(void 0!==g&&(!Array.isArray(g)||0===g.length))throw new H("Invalid area config");if(null!=g){if(!g.every(function(bh){return bh in S.LegacyAreaCode}))throw new H("Invalid area codes: ".concat(g.filter(function(bh){return!(bh in S)}).join(", ")));P=Ke(g.map(function(bh){return vE[bh]}))}g=Ql=Ka.__global_unique_id__=(Ka.__global_unique_id__||0)+1;var q=zE(k);f=AE(k);var _r=BE(k),_s=CE(g,k),_a=Xs(g,k),_l=_a("RTM:DEBUG","<Entry> ");return Qs.rtmConfig=k,q("The Agora RTM Web SDK version is %s","1.4.5"),l.enableCloudProxy&&q("RTM cloud proxy enabled"),l.enableLogUpload&&q("Log upload enabled"),P&&_l("Area is set to %s",Array.from(P.CODES).map(function(bh){return Pf(D).find(function(n_){return D[n_]===bh})}).join(", ")),_l("Creating an RtmClient instance"),_l('The Git commit ID is "'.concat("v1.4.5-0-g9cf39592",'"')),_l("The App ID is %s",Xn(h,4,10,"*".repeat(6))),q("The process ID is %s",zg),_l("The build is %s","v1.4.5-0-g9cf39592"),_l("NODE_ENV is %s","production"),new bG(h,{genLogger:_a,genTracker:_s,info:q,warn:f,logError:_r,loggerId:g},k,function(bh){for(var n_=0,_A=Pf(bh);n_<_A.length;n_++){var r_=_A[n_];try{var p_=bh[r_];null!=p_&&(bh.enableCloudProxy&&q("RTM cloud proxy enabled"),bh.enableLogUpload&&q("Log upload enabled"),k[r_]=p_)}catch(I_){throw new H(["The %s in the arguments is invalid",r_],void 0)}}})},BUILD:"v1.4.5-0-g9cf39592",VERSION:"1.4.5",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:zg,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},gu),{},{setParameter:function(h,l){Object.keys(lc).includes(h)&&(lc[h]=l)},getParameter:function(h){return lc[h]},setArea:function(h){var l=h.areaCodes;if(h=h.excludedArea,!Array.isArray(l)||0===l.length||!l.every(function(g){return g in S.AreaCode}))throw new H("Invalid area config");if(void 0!==h&&h===S.AreaCode.GLOBAL)throw new H("Excluded area cannot be global");if(void 0===h)P=Ke(l.map(function(g){return D[g]}));else{if(l.includes(h))throw new H("Excluded area cannot be in areaCodes");if(!(h in D))throw new H("Invalid excludedArea:",h);P=Xv({areas:l.map(function(g){return D[g]}),excludedArea:D[h]})}}});return ie},module.exports=l()},5867:(h,l,g)=>{"use strict";g.d(l,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=g(9681);(0,f.registerVersion)("firebase","9.8.1","app")},127:(h,l,g)=>{"use strict";g.d(l,{Z:()=>f.Z});var f=g(3942);f.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(h,l,g)=>{"use strict";g.r(l);var f=g(5861),k=g(3942),q=g(2090),_r=g(9681),_s=g(655),_a=g(1877),_l=g(4859);const S_=function I_(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},x_=function v_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},B_=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_0=new _a.Yd("@firebase/auth");function c0(Nf,..._c){_0.logLevel<=_a.in.ERROR&&_0.error(`Auth (${_r.SDK_VERSION}): ${Nf}`,..._c)}function Qv(Nf,..._c){throw e0(Nf,..._c)}function h0(Nf,..._c){return e0(Nf,..._c)}function E0(Nf,_c,ah){const _m=Object.assign(Object.assign({},x_()),{[_c]:ah});return new q.LL("auth","Firebase",_m).create(_c,{appName:Nf.name})}function H_(Nf,_c,ah){if(!(_c instanceof ah))throw ah.name!==_c.constructor.name&&Qv(Nf,"argument-error"),E0(Nf,"argument-error",`Type of ${_c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function e0(Nf,..._c){if("string"!=typeof Nf){const ah=_c[0],_m=[..._c.slice(1)];return _m[0]&&(_m[0].appName=Nf.name),Nf._errorFactory.create(ah,..._m)}return B_.create(Nf,..._c)}function P_(Nf,_c,...ah){if(!Nf)throw e0(_c,...ah)}function Rv(Nf){const _c="INTERNAL ASSERTION FAILED: "+Nf;throw c0(_c),new Error(_c)}function E_(Nf,_c){Nf||Rv(_c)}const L_=new Map;function F_(Nf){E_(Nf instanceof Function,"Expected a class definition");let _c=L_.get(Nf);return _c?(E_(_c instanceof Nf,"Instance stored in cache mismatched with class"),_c):(_c=new Nf,L_.set(Nf,_c),_c)}function D0(){var Nf;return"undefined"!=typeof self&&(null===(Nf=self.location)||void 0===Nf?void 0:Nf.href)||""}function O0(){return"http:"===CI()||"https:"===CI()}function CI(){var Nf;return"undefined"!=typeof self&&(null===(Nf=self.location)||void 0===Nf?void 0:Nf.protocol)||null}class B1{constructor(_c,ah){this.shortDelay=_c,this.longDelay=ah,E_(ah>_c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function tI(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(O0()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function A1(Nf,_c){E_(Nf.emulator,"Emulator should always be set here");const{url:ah}=Nf.emulator;return _c?`${ah}${_c.startsWith("/")?_c.slice(1):_c}`:ah}class FI{static initialize(_c,ah,_m){this.fetchImpl=_c,ah&&(this.headersImpl=ah),_m&&(this.responseImpl=_m)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Rv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Rv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Rv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _w={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},uT=new B1(3e4,6e4);function U1(Nf,_c){return Nf.tenantId&&!_c.tenantId?Object.assign(Object.assign({},_c),{tenantId:Nf.tenantId}):_c}function S1(Nf,_c,ah,_m){return wN.apply(this,arguments)}function wN(){return(wN=(0,f.Z)(function*(Nf,_c,ah,_m,m_={}){return ET(Nf,m_,(0,f.Z)(function*(){let O_={},s0={};_m&&("GET"===_c?s0=_m:O_={body:JSON.stringify(_m)});const N0=(0,q.xO)(Object.assign({key:Nf.config.apiKey},s0)).slice(1),nI=yield Nf._getAdditionalHeaders();return nI["Content-Type"]="application/json",Nf.languageCode&&(nI["X-Firebase-Locale"]=Nf.languageCode),FI.fetch()(TN(Nf,Nf.config.apiHost,ah,N0),Object.assign({method:_c,headers:nI,referrerPolicy:"no-referrer"},O_))}))})).apply(this,arguments)}function ET(Nf,_c,ah){return xT.apply(this,arguments)}function xT(){return(xT=(0,f.Z)(function*(Nf,_c,ah){Nf._canInitEmulator=!1;const _m=Object.assign(Object.assign({},_w),_c);try{const m_=new VR(Nf),O_=yield Promise.race([ah(),m_.promise]);m_.clearNetworkTimeout();const s0=yield O_.json();if("needConfirmation"in s0)throw _D(Nf,"account-exists-with-different-credential",s0);if(O_.ok&&!("errorMessage"in s0))return s0;{const N0=O_.ok?s0.errorMessage:s0.error.message,[nI,_I]=N0.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nI)throw _D(Nf,"credential-already-in-use",s0);if("EMAIL_EXISTS"===nI)throw _D(Nf,"email-already-in-use",s0);const GI=_m[nI]||nI.toLowerCase().replace(/[_\s]+/g,"-");if(_I)throw E0(Nf,GI,_I);Qv(Nf,GI)}}catch(m_){if(m_ instanceof q.ZR)throw m_;Qv(Nf,"network-request-failed")}})).apply(this,arguments)}function XT(Nf,_c,ah,_m){return XO.apply(this,arguments)}function XO(){return(XO=(0,f.Z)(function*(Nf,_c,ah,_m,m_={}){const O_=yield S1(Nf,_c,ah,_m,m_);return"mfaPendingCredential"in O_&&Qv(Nf,"multi-factor-auth-required",{_serverResponse:O_}),O_})).apply(this,arguments)}function TN(Nf,_c,ah,_m){const m_=`${_c}${ah}?${_m}`;return Nf.config.emulator?A1(Nf.config,m_):`${Nf.config.apiScheme}://${m_}`}class VR{constructor(_c){this.auth=_c,this.timer=null,this.promise=new Promise((ah,_m)=>{this.timer=setTimeout(()=>_m(h0(this.auth,"network-request-failed")),uT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _D(Nf,_c,ah){const _m={appName:Nf.name};ah.email&&(_m.email=ah.email),ah.phoneNumber&&(_m.phoneNumber=ah.phoneNumber);const m_=h0(Nf,_c,_m);return m_.customData._tokenResponse=ah,m_}function fO(){return(fO=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:delete",_c)})).apply(this,arguments)}function TT(Nf,_c){return qT.apply(this,arguments)}function qT(){return(qT=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:update",_c)})).apply(this,arguments)}function rP(Nf,_c){return GR.apply(this,arguments)}function GR(){return(GR=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:lookup",_c)})).apply(this,arguments)}function CS(Nf){if(Nf)try{const _c=new Date(Number(Nf));if(!isNaN(_c.getTime()))return _c.toUTCString()}catch(_c){}}function rL(){return(rL=(0,f.Z)(function*(Nf,_c=!1){const ah=(0,q.m9)(Nf),_m=yield ah.getIdToken(_c),m_=PI(_m);P_(m_&&m_.exp&&m_.auth_time&&m_.iat,ah.auth,"internal-error");const O_="object"==typeof m_.firebase?m_.firebase:void 0,s0=null==O_?void 0:O_.sign_in_provider;return{claims:m_,token:_m,authTime:CS(G1(m_.auth_time)),issuedAtTime:CS(G1(m_.iat)),expirationTime:CS(G1(m_.exp)),signInProvider:s0||null,signInSecondFactor:(null==O_?void 0:O_.sign_in_second_factor)||null}})).apply(this,arguments)}function G1(Nf){return 1e3*Number(Nf)}function PI(Nf){const[_c,ah,_m]=Nf.split(".");if(void 0===_c||void 0===ah||void 0===_m)return c0("JWT malformed, contained fewer than 3 sections"),null;try{const m_=(0,q.tV)(ah);return m_?JSON.parse(m_):(c0("Failed to decode base64 JWT payload"),null)}catch(m_){return c0("Caught error parsing JWT payload as JSON",m_),null}}function mR(Nf,_c){return iR.apply(this,arguments)}function iR(){return(iR=(0,f.Z)(function*(Nf,_c,ah=!1){if(ah)return _c;try{return yield _c}catch(_m){throw _m instanceof q.ZR&&P1(_m)&&Nf.auth.currentUser===Nf&&(yield Nf.auth.signOut()),_m}})).apply(this,arguments)}function P1({code:Nf}){return"auth/user-disabled"===Nf||"auth/user-token-expired"===Nf}class iL{constructor(_c){this.user=_c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_c){var ah;if(_c){const _m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_m}{this.errorBackoff=3e4;const m_=(null!==(ah=this.user.stsTokenManager.expirationTime)&&void 0!==ah?ah:0)-Date.now()-3e5;return Math.max(0,m_)}}schedule(_c=!1){var ah=this;if(!this.isRunning)return;const _m=this.getInterval(_c);this.timerId=setTimeout((0,f.Z)(function*(){yield ah.iteration()}),_m)}iteration(){var _c=this;return(0,f.Z)(function*(){try{yield _c.user.getIdToken(!0)}catch(ah){return void("auth/network-request-failed"===ah.code&&_c.schedule(!0))}_c.schedule()})()}}class AR{constructor(_c,ah){this.createdAt=_c,this.lastLoginAt=ah,this._initializeTime()}_initializeTime(){this.lastSignInTime=CS(this.lastLoginAt),this.creationTime=CS(this.createdAt)}_copy(_c){this.createdAt=_c.createdAt,this.lastLoginAt=_c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tS(Nf){return $_.apply(this,arguments)}function $_(){return($_=(0,f.Z)(function*(Nf){var _c;const ah=Nf.auth,_m=yield Nf.getIdToken(),m_=yield mR(Nf,rP(ah,{idToken:_m}));P_(null==m_?void 0:m_.users.length,ah,"internal-error");const O_=m_.users[0];Nf._notifyReloadListener(O_);const s0=(null===(_c=O_.providerUserInfo)||void 0===_c?void 0:_c.length)?_y(O_.providerUserInfo):[],N0=M0(Nf.providerData,s0),GI=!!Nf.isAnonymous&&!(Nf.email&&O_.passwordHash||(null==N0?void 0:N0.length)),QI={uid:O_.localId,displayName:O_.displayName||null,photoURL:O_.photoUrl||null,email:O_.email||null,emailVerified:O_.emailVerified||!1,phoneNumber:O_.phoneNumber||null,tenantId:O_.tenantId||null,providerData:N0,metadata:new AR(O_.createdAt,O_.lastLoginAt),isAnonymous:GI};Object.assign(Nf,QI)})).apply(this,arguments)}function r0(){return(r0=(0,f.Z)(function*(Nf){const _c=(0,q.m9)(Nf);yield tS(_c),yield _c.auth._persistUserIfCurrent(_c),_c.auth._notifyListenersIfCurrent(_c)})).apply(this,arguments)}function M0(Nf,_c){return[...Nf.filter(_m=>!_c.some(m_=>m_.providerId===_m.providerId)),..._c]}function _y(Nf){return Nf.map(_c=>{var{providerId:ah}=_c,_m=(0,_s._T)(_c,["providerId"]);return{providerId:ah,uid:_m.rawId||"",displayName:_m.displayName||null,email:_m.email||null,phoneNumber:_m.phoneNumber||null,photoURL:_m.photoUrl||null}})}function G0(){return(G0=(0,f.Z)(function*(Nf,_c){const ah=yield ET(Nf,{},(0,f.Z)(function*(){const _m=(0,q.xO)({grant_type:"refresh_token",refresh_token:_c}).slice(1),{tokenApiHost:m_,apiKey:O_}=Nf.config,s0=TN(Nf,m_,"/v1/token",`key=${O_}`),N0=yield Nf._getAdditionalHeaders();return N0["Content-Type"]="application/x-www-form-urlencoded",FI.fetch()(s0,{method:"POST",headers:N0,body:_m})}));return{accessToken:ah.access_token,expiresIn:ah.expires_in,refreshToken:ah.refresh_token}})).apply(this,arguments)}class II{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_c){P_(_c.idToken,"internal-error"),P_(void 0!==_c.idToken,"internal-error"),P_(void 0!==_c.refreshToken,"internal-error");const ah="expiresIn"in _c&&void 0!==_c.expiresIn?Number(_c.expiresIn):function JI(Nf){const _c=PI(Nf);return P_(_c,"internal-error"),P_(void 0!==_c.exp,"internal-error"),P_(void 0!==_c.iat,"internal-error"),Number(_c.exp)-Number(_c.iat)}(_c.idToken);this.updateTokensAndExpiration(_c.idToken,_c.refreshToken,ah)}getToken(_c,ah=!1){var _m=this;return(0,f.Z)(function*(){return P_(!_m.accessToken||_m.refreshToken,_c,"user-token-expired"),ah||!_m.accessToken||_m.isExpired?_m.refreshToken?(yield _m.refresh(_c,_m.refreshToken),_m.accessToken):null:_m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_c,ah){var _m=this;return(0,f.Z)(function*(){const{accessToken:m_,refreshToken:O_,expiresIn:s0}=yield function m0(Nf,_c){return G0.apply(this,arguments)}(_c,ah);_m.updateTokensAndExpiration(m_,O_,Number(s0))})()}updateTokensAndExpiration(_c,ah,_m){this.refreshToken=ah||null,this.accessToken=_c||null,this.expirationTime=Date.now()+1e3*_m}static fromJSON(_c,ah){const{refreshToken:_m,accessToken:m_,expirationTime:O_}=ah,s0=new II;return _m&&(P_("string"==typeof _m,"internal-error",{appName:_c}),s0.refreshToken=_m),m_&&(P_("string"==typeof m_,"internal-error",{appName:_c}),s0.accessToken=m_),O_&&(P_("number"==typeof O_,"internal-error",{appName:_c}),s0.expirationTime=O_),s0}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_c){this.accessToken=_c.accessToken,this.refreshToken=_c.refreshToken,this.expirationTime=_c.expirationTime}_clone(){return Object.assign(new II,this.toJSON())}_performRefresh(){return Rv("not implemented")}}function qI(Nf,_c){P_("string"==typeof Nf||void 0===Nf,"internal-error",{appName:_c})}class XI{constructor(_c){var{uid:ah,auth:_m,stsTokenManager:m_}=_c,O_=(0,_s._T)(_c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=ah,this.auth=_m,this.stsTokenManager=m_,this.accessToken=m_.accessToken,this.displayName=O_.displayName||null,this.email=O_.email||null,this.emailVerified=O_.emailVerified||!1,this.phoneNumber=O_.phoneNumber||null,this.photoURL=O_.photoURL||null,this.isAnonymous=O_.isAnonymous||!1,this.tenantId=O_.tenantId||null,this.providerData=O_.providerData?[...O_.providerData]:[],this.metadata=new AR(O_.createdAt||void 0,O_.lastLoginAt||void 0)}getIdToken(_c){var ah=this;return(0,f.Z)(function*(){const _m=yield mR(ah,ah.stsTokenManager.getToken(ah.auth,_c));return P_(_m,ah.auth,"internal-error"),ah.accessToken!==_m&&(ah.accessToken=_m,yield ah.auth._persistUserIfCurrent(ah),ah.auth._notifyListenersIfCurrent(ah)),_m})()}getIdTokenResult(_c){return function SO(Nf){return rL.apply(this,arguments)}(this,_c)}reload(){return function _E(Nf){return r0.apply(this,arguments)}(this)}_assign(_c){this!==_c&&(P_(this.uid===_c.uid,this.auth,"internal-error"),this.displayName=_c.displayName,this.photoURL=_c.photoURL,this.email=_c.email,this.emailVerified=_c.emailVerified,this.phoneNumber=_c.phoneNumber,this.isAnonymous=_c.isAnonymous,this.tenantId=_c.tenantId,this.providerData=_c.providerData.map(ah=>Object.assign({},ah)),this.metadata._copy(_c.metadata),this.stsTokenManager._assign(_c.stsTokenManager))}_clone(_c){return new XI(Object.assign(Object.assign({},this),{auth:_c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_c){P_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_c){this.reloadListener?this.reloadListener(_c):this.reloadUserInfo=_c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_c,ah=!1){var _m=this;return(0,f.Z)(function*(){let m_=!1;_c.idToken&&_c.idToken!==_m.stsTokenManager.accessToken&&(_m.stsTokenManager.updateFromServerResponse(_c),m_=!0),ah&&(yield tS(_m)),yield _m.auth._persistUserIfCurrent(_m),m_&&_m.auth._notifyListenersIfCurrent(_m)})()}delete(){var _c=this;return(0,f.Z)(function*(){const ah=yield _c.getIdToken();return yield mR(_c,function KI(Nf,_c){return fO.apply(this,arguments)}(_c.auth,{idToken:ah})),_c.stsTokenManager.clearRefreshToken(),_c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_c=>Object.assign({},_c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_c,ah){var _m,m_,O_,s0,N0,nI,_I,GI;const QI=null!==(_m=ah.displayName)&&void 0!==_m?_m:void 0,uS=null!==(m_=ah.email)&&void 0!==m_?m_:void 0,FO=null!==(O_=ah.phoneNumber)&&void 0!==O_?O_:void 0,M3=null!==(s0=ah.photoURL)&&void 0!==s0?s0:void 0,x5=null!==(N0=ah.tenantId)&&void 0!==N0?N0:void 0,zG=null!==(nI=ah._redirectEventId)&&void 0!==nI?nI:void 0,mU=null!==(_I=ah.createdAt)&&void 0!==_I?_I:void 0,pV=null!==(GI=ah.lastLoginAt)&&void 0!==GI?GI:void 0,{uid:OT,emailVerified:gV,isAnonymous:lS,providerData:L5,stsTokenManager:YG}=ah;P_(OT&&YG,_c,"internal-error");const B3=II.fromJSON(this.name,YG);P_("string"==typeof OT,_c,"internal-error"),qI(QI,_c.name),qI(uS,_c.name),P_("boolean"==typeof gV,_c,"internal-error"),P_("boolean"==typeof lS,_c,"internal-error"),qI(FO,_c.name),qI(M3,_c.name),qI(x5,_c.name),qI(zG,_c.name),qI(mU,_c.name),qI(pV,_c.name);const mV=new XI({uid:OT,auth:_c,email:uS,emailVerified:gV,displayName:QI,isAnonymous:lS,photoURL:M3,phoneNumber:FO,tenantId:x5,stsTokenManager:B3,createdAt:mU,lastLoginAt:pV});return L5&&Array.isArray(L5)&&(mV.providerData=L5.map(nT=>Object.assign({},nT))),zG&&(mV._redirectEventId=zG),mV}static _fromIdTokenResponse(_c,ah,_m=!1){return(0,f.Z)(function*(){const m_=new II;m_.updateFromServerResponse(ah);const O_=new XI({uid:ah.localId,auth:_c,stsTokenManager:m_,isAnonymous:_m});return yield tS(O_),O_})()}}const _b=(()=>{class Nf{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(ah,_m){var m_=this;return(0,f.Z)(function*(){m_.storage[ah]=_m})()}_get(ah){var _m=this;return(0,f.Z)(function*(){const m_=_m.storage[ah];return void 0===m_?null:m_})()}_remove(ah){var _m=this;return(0,f.Z)(function*(){delete _m.storage[ah]})()}_addListener(ah,_m){}_removeListener(ah,_m){}}return Nf.type="NONE",Nf})();function nS(Nf,_c,ah){return`firebase:${Nf}:${_c}:${ah}`}class _R{constructor(_c,ah,_m){this.persistence=_c,this.auth=ah,this.userKey=_m;const{config:m_,name:O_}=this.auth;this.fullUserKey=nS(this.userKey,m_.apiKey,O_),this.fullPersistenceKey=nS("persistence",m_.apiKey,O_),this.boundEventHandler=ah._onStorageEvent.bind(ah),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_c){return this.persistence._set(this.fullUserKey,_c.toJSON())}getCurrentUser(){var _c=this;return(0,f.Z)(function*(){const ah=yield _c.persistence._get(_c.fullUserKey);return ah?XI._fromJSON(_c.auth,ah):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_c){var ah=this;return(0,f.Z)(function*(){if(ah.persistence===_c)return;const _m=yield ah.getCurrentUser();return yield ah.removeCurrentUser(),ah.persistence=_c,_m?ah.setCurrentUser(_m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_c,ah,_m="authUser"){return(0,f.Z)(function*(){if(!ah.length)return new _R(F_(_b),_c,_m);const m_=(yield Promise.all(ah.map(function(){var _I=(0,f.Z)(function*(GI){if(yield GI._isAvailable())return GI});return function(GI){return _I.apply(this,arguments)}}()))).filter(_I=>_I);let O_=m_[0]||F_(_b);const s0=nS(_m,_c.config.apiKey,_c.name);let N0=null;for(const _I of ah)try{const GI=yield _I._get(s0);if(GI){const QI=XI._fromJSON(_c,GI);_I!==O_&&(N0=QI),O_=_I;break}}catch(GI){}const nI=m_.filter(_I=>_I._shouldAllowMigration);return O_._shouldAllowMigration&&nI.length?(O_=nI[0],N0&&(yield O_._set(s0,N0.toJSON())),yield Promise.all(ah.map(function(){var _I=(0,f.Z)(function*(GI){if(GI!==O_)try{yield GI._remove(s0)}catch(QI){}});return function(GI){return _I.apply(this,arguments)}}())),new _R(O_,_c,_m)):new _R(O_,_c,_m)})()}}function i3(Nf){const _c=Nf.toLowerCase();if(_c.includes("opera/")||_c.includes("opr/")||_c.includes("opios/"))return"Opera";if(wS(_c))return"IEMobile";if(_c.includes("msie")||_c.includes("trident/"))return"IE";if(_c.includes("edge/"))return"Edge";if(qM(_c))return"Firefox";if(_c.includes("silk/"))return"Silk";if(u2(_c))return"Blackberry";if(TS(_c))return"Webos";if(SN(_c))return"Safari";if((_c.includes("chrome/")||WM(_c))&&!_c.includes("edge/"))return"Chrome";if(eT(_c))return"Android";{const _m=Nf.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==_m?void 0:_m.length))return _m[1]}return"Other"}function qM(Nf=(0,q.z$)()){return/firefox\//i.test(Nf)}function SN(Nf=(0,q.z$)()){const _c=Nf.toLowerCase();return _c.includes("safari/")&&!_c.includes("chrome/")&&!_c.includes("crios/")&&!_c.includes("android")}function WM(Nf=(0,q.z$)()){return/crios\//i.test(Nf)}function wS(Nf=(0,q.z$)()){return/iemobile/i.test(Nf)}function eT(Nf=(0,q.z$)()){return/android/i.test(Nf)}function u2(Nf=(0,q.z$)()){return/blackberry/i.test(Nf)}function TS(Nf=(0,q.z$)()){return/webos/i.test(Nf)}function pO(Nf=(0,q.z$)()){return/iphone|ipad|ipod/i.test(Nf)}function iP(Nf=(0,q.z$)()){return pO(Nf)||eT(Nf)||TS(Nf)||u2(Nf)||/windows phone/i.test(Nf)||wS(Nf)}function HL(Nf,_c=[]){let ah;switch(Nf){case"Browser":ah=i3((0,q.z$)());break;case"Worker":ah=`${i3((0,q.z$)())}-${Nf}`;break;default:ah=Nf}const _m=_c.length?_c.join(","):"FirebaseCore-web";return`${ah}/JsCore/${_r.SDK_VERSION}/${_m}`}class QR{constructor(_c){this.auth=_c,this.queue=[]}pushCallback(_c,ah){const _m=O_=>new Promise((s0,N0)=>{try{s0(_c(O_))}catch(nI){N0(nI)}});_m.onAbort=ah,this.queue.push(_m);const m_=this.queue.length-1;return()=>{this.queue[m_]=()=>Promise.resolve()}}runMiddleware(_c){var ah=this;return(0,f.Z)(function*(){if(ah.auth.currentUser===_c)return;const _m=[];try{for(const m_ of ah.queue)yield m_(_c),m_.onAbort&&_m.push(m_.onAbort)}catch(m_){_m.reverse();for(const O_ of _m)try{O_()}catch(s0){}throw ah.auth._errorFactory.create("login-blocked",{originalMessage:m_.message})}})()}}class gI{constructor(_c,ah,_m){this.app=_c,this.heartbeatServiceProvider=ah,this.config=_m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q1(this),this.idTokenSubscription=new Q1(this),this.beforeStateQueue=new QR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_c.name,this.clientVersion=_m.sdkClientVersion}_initializeWithPersistence(_c,ah){var _m=this;return ah&&(this._popupRedirectResolver=F_(ah)),this._initializationPromise=this.queue((0,f.Z)(function*(){var m_,O_;if(!_m._deleted&&(_m.persistenceManager=yield _R.create(_m,_c),!_m._deleted)){if(null===(m_=_m._popupRedirectResolver)||void 0===m_?void 0:m_._shouldInitProactively)try{yield _m._popupRedirectResolver._initialize(_m)}catch(s0){}yield _m.initializeCurrentUser(ah),_m.lastNotifiedUid=(null===(O_=_m.currentUser)||void 0===O_?void 0:O_.uid)||null,!_m._deleted&&(_m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _c=this;return(0,f.Z)(function*(){if(_c._deleted)return;const ah=yield _c.assertedPersistence.getCurrentUser();if(_c.currentUser||ah){if(_c.currentUser&&ah&&_c.currentUser.uid===ah.uid)return _c._currentUser._assign(ah),void(yield _c.currentUser.getIdToken());yield _c._updateCurrentUser(ah,!0)}})()}initializeCurrentUser(_c){var ah=this;return(0,f.Z)(function*(){var _m;const m_=yield ah.assertedPersistence.getCurrentUser();let O_=m_,s0=!1;if(_c&&ah.config.authDomain){yield ah.getOrInitRedirectPersistenceManager();const N0=null===(_m=ah.redirectUser)||void 0===_m?void 0:_m._redirectEventId,nI=null==O_?void 0:O_._redirectEventId,_I=yield ah.tryRedirectSignIn(_c);(!N0||N0===nI)&&(null==_I?void 0:_I.user)&&(O_=_I.user,s0=!0)}if(!O_)return ah.directlySetCurrentUser(null);if(!O_._redirectEventId){if(s0)try{yield ah.beforeStateQueue.runMiddleware(O_)}catch(N0){O_=m_,ah._popupRedirectResolver._overrideRedirectResult(ah,()=>Promise.reject(N0))}return O_?ah.reloadAndSetCurrentUserOrClear(O_):ah.directlySetCurrentUser(null)}return P_(ah._popupRedirectResolver,ah,"argument-error"),yield ah.getOrInitRedirectPersistenceManager(),ah.redirectUser&&ah.redirectUser._redirectEventId===O_._redirectEventId?ah.directlySetCurrentUser(O_):ah.reloadAndSetCurrentUserOrClear(O_)})()}tryRedirectSignIn(_c){var ah=this;return(0,f.Z)(function*(){let _m=null;try{_m=yield ah._popupRedirectResolver._completeRedirectFn(ah,_c,!0)}catch(m_){yield ah._setRedirectUser(null)}return _m})()}reloadAndSetCurrentUserOrClear(_c){var ah=this;return(0,f.Z)(function*(){try{yield tS(_c)}catch(_m){if("auth/network-request-failed"!==_m.code)return ah.directlySetCurrentUser(null)}return ah.directlySetCurrentUser(_c)})()}useDeviceLanguage(){this.languageCode=function K0(){if("undefined"==typeof navigator)return null;const Nf=navigator;return Nf.languages&&Nf.languages[0]||Nf.language||null}()}_delete(){var _c=this;return(0,f.Z)(function*(){_c._deleted=!0})()}updateCurrentUser(_c){var ah=this;return(0,f.Z)(function*(){const _m=_c?(0,q.m9)(_c):null;return _m&&P_(_m.auth.config.apiKey===ah.config.apiKey,ah,"invalid-user-token"),ah._updateCurrentUser(_m&&_m._clone(ah))})()}_updateCurrentUser(_c,ah=!1){var _m=this;return(0,f.Z)(function*(){if(!_m._deleted)return _c&&P_(_m.tenantId===_c.tenantId,_m,"tenant-id-mismatch"),ah||(yield _m.beforeStateQueue.runMiddleware(_c)),_m.queue((0,f.Z)(function*(){yield _m.directlySetCurrentUser(_c),_m.notifyAuthListeners()}))})()}signOut(){var _c=this;return(0,f.Z)(function*(){return yield _c.beforeStateQueue.runMiddleware(null),(_c.redirectPersistenceManager||_c._popupRedirectResolver)&&(yield _c._setRedirectUser(null)),_c._updateCurrentUser(null,!0)})()}setPersistence(_c){var ah=this;return this.queue((0,f.Z)(function*(){yield ah.assertedPersistence.setPersistence(F_(_c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_c){this._errorFactory=new q.LL("auth","Firebase",_c())}onAuthStateChanged(_c,ah,_m){return this.registerStateListener(this.authStateSubscription,_c,ah,_m)}beforeAuthStateChanged(_c,ah){return this.beforeStateQueue.pushCallback(_c,ah)}onIdTokenChanged(_c,ah,_m){return this.registerStateListener(this.idTokenSubscription,_c,ah,_m)}toJSON(){var _c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_c=this._currentUser)||void 0===_c?void 0:_c.toJSON()}}_setRedirectUser(_c,ah){var _m=this;return(0,f.Z)(function*(){const m_=yield _m.getOrInitRedirectPersistenceManager(ah);return null===_c?m_.removeCurrentUser():m_.setCurrentUser(_c)})()}getOrInitRedirectPersistenceManager(_c){var ah=this;return(0,f.Z)(function*(){if(!ah.redirectPersistenceManager){const _m=_c&&F_(_c)||ah._popupRedirectResolver;P_(_m,ah,"argument-error"),ah.redirectPersistenceManager=yield _R.create(ah,[F_(_m._redirectPersistence)],"redirectUser"),ah.redirectUser=yield ah.redirectPersistenceManager.getCurrentUser()}return ah.redirectPersistenceManager})()}_redirectUserForId(_c){var ah=this;return(0,f.Z)(function*(){var _m,m_;return ah._isInitialized&&(yield ah.queue((0,f.Z)(function*(){}))),(null===(_m=ah._currentUser)||void 0===_m?void 0:_m._redirectEventId)===_c?ah._currentUser:(null===(m_=ah.redirectUser)||void 0===m_?void 0:m_._redirectEventId)===_c?ah.redirectUser:null})()}_persistUserIfCurrent(_c){var ah=this;return(0,f.Z)(function*(){if(_c===ah.currentUser)return ah.queue((0,f.Z)(function*(){return ah.directlySetCurrentUser(_c)}))})()}_notifyListenersIfCurrent(_c){_c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _c,ah;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _m=null!==(ah=null===(_c=this.currentUser)||void 0===_c?void 0:_c.uid)&&void 0!==ah?ah:null;this.lastNotifiedUid!==_m&&(this.lastNotifiedUid=_m,this.authStateSubscription.next(this.currentUser))}registerStateListener(_c,ah,_m,m_){if(this._deleted)return()=>{};const O_="function"==typeof ah?ah:ah.next.bind(ah),s0=this._isInitialized?Promise.resolve():this._initializationPromise;return P_(s0,this,"internal-error"),s0.then(()=>O_(this.currentUser)),"function"==typeof ah?_c.addObserver(ah,_m,m_):_c.addObserver(ah)}directlySetCurrentUser(_c){var ah=this;return(0,f.Z)(function*(){ah.currentUser&&ah.currentUser!==_c&&(ah._currentUser._stopProactiveRefresh(),_c&&ah.isProactiveRefreshEnabled&&_c._startProactiveRefresh()),ah.currentUser=_c,_c?yield ah.assertedPersistence.setCurrentUser(_c):yield ah.assertedPersistence.removeCurrentUser()})()}queue(_c){return this.operations=this.operations.then(_c,_c),this.operations}get assertedPersistence(){return P_(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_c){!_c||this.frameworks.includes(_c)||(this.frameworks.push(_c),this.frameworks.sort(),this.clientVersion=HL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _c=this;return(0,f.Z)(function*(){var ah;const _m={"X-Client-Version":_c.clientVersion};_c.app.options.appId&&(_m["X-Firebase-gmpid"]=_c.app.options.appId);const m_=yield null===(ah=_c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===ah?void 0:ah.getHeartbeatsHeader();return m_&&(_m["X-Firebase-Client"]=m_),_m})()}}function NI(Nf){return(0,q.m9)(Nf)}class Q1{constructor(_c){this.auth=_c,this.observer=null,this.addObserver=(0,q.ne)(ah=>this.observer=ah)}get next(){return P_(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function RN(Nf){const _c=Nf.indexOf(":");return _c<0?"":Nf.substr(0,_c+1)}function ON(Nf){if(!Nf)return null;const _c=Number(Nf);return isNaN(_c)?null:_c}class RO{constructor(_c,ah){this.providerId=_c,this.signInMethod=ah}toJSON(){return Rv("not implemented")}_getIdTokenResponse(_c){return Rv("not implemented")}_linkToIdToken(_c,ah){return Rv("not implemented")}_getReauthenticationResolver(_c){return Rv("not implemented")}}function rS(Nf,_c){return l1.apply(this,arguments)}function l1(){return(l1=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:resetPassword",U1(Nf,_c))})).apply(this,arguments)}function qL(Nf,_c){return oP.apply(this,arguments)}function oP(){return(oP=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:update",_c)})).apply(this,arguments)}function o3(Nf,_c){return sP.apply(this,arguments)}function sP(){return(sP=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:update",U1(Nf,_c))})).apply(this,arguments)}function DN(){return(DN=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithPassword",U1(Nf,_c))})).apply(this,arguments)}function d2(Nf,_c){return WT.apply(this,arguments)}function WT(){return(WT=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:sendOobCode",U1(Nf,_c))})).apply(this,arguments)}function hT(Nf,_c){return oL.apply(this,arguments)}function oL(){return(oL=(0,f.Z)(function*(Nf,_c){return d2(Nf,_c)})).apply(this,arguments)}function zM(Nf,_c){return qR.apply(this,arguments)}function qR(){return(qR=(0,f.Z)(function*(Nf,_c){return d2(Nf,_c)})).apply(this,arguments)}function NN(Nf,_c){return s3.apply(this,arguments)}function s3(){return(s3=(0,f.Z)(function*(Nf,_c){return d2(Nf,_c)})).apply(this,arguments)}function K6(Nf,_c){return kN.apply(this,arguments)}function kN(){return(kN=(0,f.Z)(function*(Nf,_c){return d2(Nf,_c)})).apply(this,arguments)}function H4(){return(H4=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithEmailLink",U1(Nf,_c))})).apply(this,arguments)}function z6(){return(z6=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithEmailLink",U1(Nf,_c))})).apply(this,arguments)}class oR extends RO{constructor(_c,ah,_m,m_=null){super("password",_m),this._email=_c,this._password=ah,this._tenantId=m_}static _fromEmailAndPassword(_c,ah){return new oR(_c,ah,"password")}static _fromEmailAndCode(_c,ah,_m=null){return new oR(_c,ah,"emailLink",_m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_c){const ah="string"==typeof _c?JSON.parse(_c):_c;if((null==ah?void 0:ah.email)&&(null==ah?void 0:ah.password)){if("password"===ah.signInMethod)return this._fromEmailAndPassword(ah.email,ah.password);if("emailLink"===ah.signInMethod)return this._fromEmailAndCode(ah.email,ah.password,ah.tenantId)}return null}_getIdTokenResponse(_c){var ah=this;return(0,f.Z)(function*(){switch(ah.signInMethod){case"password":return function HS(Nf,_c){return DN.apply(this,arguments)}(_c,{returnSecureToken:!0,email:ah._email,password:ah._password});case"emailLink":return function PN(Nf,_c){return H4.apply(this,arguments)}(_c,{email:ah._email,oobCode:ah._password});default:Qv(_c,"internal-error")}})()}_linkToIdToken(_c,ah){var _m=this;return(0,f.Z)(function*(){switch(_m.signInMethod){case"password":return qL(_c,{idToken:ah,returnSecureToken:!0,email:_m._email,password:_m._password});case"emailLink":return function B9(Nf,_c){return z6.apply(this,arguments)}(_c,{idToken:ah,email:_m._email,oobCode:_m._password});default:Qv(_c,"internal-error")}})()}_getReauthenticationResolver(_c){return this._getIdTokenResponse(_c)}}function bT(Nf,_c){return q4.apply(this,arguments)}function q4(){return(q4=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithIdp",U1(Nf,_c))})).apply(this,arguments)}class h2 extends RO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_c){const ah=new h2(_c.providerId,_c.signInMethod);return _c.idToken||_c.accessToken?(_c.idToken&&(ah.idToken=_c.idToken),_c.accessToken&&(ah.accessToken=_c.accessToken),_c.nonce&&!_c.pendingToken&&(ah.nonce=_c.nonce),_c.pendingToken&&(ah.pendingToken=_c.pendingToken)):_c.oauthToken&&_c.oauthTokenSecret?(ah.accessToken=_c.oauthToken,ah.secret=_c.oauthTokenSecret):Qv("argument-error"),ah}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_c){const ah="string"==typeof _c?JSON.parse(_c):_c,{providerId:_m,signInMethod:m_}=ah,O_=(0,_s._T)(ah,["providerId","signInMethod"]);if(!_m||!m_)return null;const s0=new h2(_m,m_);return s0.idToken=O_.idToken||void 0,s0.accessToken=O_.accessToken||void 0,s0.secret=O_.secret,s0.nonce=O_.nonce,s0.pendingToken=O_.pendingToken||null,s0}_getIdTokenResponse(_c){return bT(_c,this.buildRequest())}_linkToIdToken(_c,ah){const _m=this.buildRequest();return _m.idToken=ah,bT(_c,_m)}_getReauthenticationResolver(_c){const ah=this.buildRequest();return ah.autoCreate=!1,bT(_c,ah)}buildRequest(){const _c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_c.pendingToken=this.pendingToken;else{const ah={};this.idToken&&(ah.id_token=this.idToken),this.accessToken&&(ah.access_token=this.accessToken),this.secret&&(ah.oauth_token_secret=this.secret),ah.providerId=this.providerId,this.nonce&&!this.pendingToken&&(ah.nonce=this.nonce),_c.postBody=(0,q.xO)(ah)}return _c}}function U9(Nf,_c){return Y6.apply(this,arguments)}function Y6(){return(Y6=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:sendVerificationCode",U1(Nf,_c))})).apply(this,arguments)}function aP(){return(aP=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithPhoneNumber",U1(Nf,_c))})).apply(this,arguments)}function J6(){return(J6=(0,f.Z)(function*(Nf,_c){const ah=yield XT(Nf,"POST","/v1/accounts:signInWithPhoneNumber",U1(Nf,_c));if(ah.temporaryProof)throw _D(Nf,"account-exists-with-different-credential",ah);return ah})).apply(this,arguments)}const YM={USER_NOT_FOUND:"user-not-found"};function $6(){return($6=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithPhoneNumber",U1(Nf,Object.assign(Object.assign({},_c),{operation:"REAUTH"})),YM)})).apply(this,arguments)}class cP extends RO{constructor(_c){super("phone","phone"),this.params=_c}static _fromVerification(_c,ah){return new cP({verificationId:_c,verificationCode:ah})}static _fromTokenResponse(_c,ah){return new cP({phoneNumber:_c,temporaryProof:ah})}_getIdTokenResponse(_c){return function SS(Nf,_c){return aP.apply(this,arguments)}(_c,this._makeVerificationRequest())}_linkToIdToken(_c,ah){return function F9(Nf,_c){return J6.apply(this,arguments)}(_c,Object.assign({idToken:ah},this._makeVerificationRequest()))}_getReauthenticationResolver(_c){return function wG(Nf,_c){return $6.apply(this,arguments)}(_c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_c,phoneNumber:ah,verificationId:_m,verificationCode:m_}=this.params;return _c&&ah?{temporaryProof:_c,phoneNumber:ah}:{sessionInfo:_m,code:m_}}toJSON(){const _c={providerId:this.providerId};return this.params.phoneNumber&&(_c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_c.verificationCode=this.params.verificationCode),this.params.verificationId&&(_c.verificationId=this.params.verificationId),_c}static fromJSON(_c){"string"==typeof _c&&(_c=JSON.parse(_c));const{verificationId:ah,verificationCode:_m,phoneNumber:m_,temporaryProof:O_}=_c;return _m||ah||m_||O_?new cP({verificationId:ah,verificationCode:_m,phoneNumber:m_,temporaryProof:O_}):null}}class a3{constructor(_c){var ah,_m,m_,O_,s0,N0;const nI=(0,q.zd)((0,q.pd)(_c)),_I=null!==(ah=nI.apiKey)&&void 0!==ah?ah:null,GI=null!==(_m=nI.oobCode)&&void 0!==_m?_m:null,QI=function TG(Nf){switch(Nf){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m_=nI.mode)&&void 0!==m_?m_:null);P_(_I&&GI&&QI,"argument-error"),this.apiKey=_I,this.operation=QI,this.code=GI,this.continueUrl=null!==(O_=nI.continueUrl)&&void 0!==O_?O_:null,this.languageCode=null!==(s0=nI.languageCode)&&void 0!==s0?s0:null,this.tenantId=null!==(N0=nI.tenantId)&&void 0!==N0?N0:null}static parseLink(_c){const ah=function JM(Nf){const _c=(0,q.zd)((0,q.pd)(Nf)).link,ah=_c?(0,q.zd)((0,q.pd)(_c)).deep_link_id:null,_m=(0,q.zd)((0,q.pd)(Nf)).deep_link_id;return(_m?(0,q.zd)((0,q.pd)(_m)).link:null)||_m||ah||_c||Nf}(_c);try{return new a3(ah)}catch(_m){return null}}}let X6=(()=>{class Nf{constructor(){this.providerId=Nf.PROVIDER_ID}static credential(ah,_m){return oR._fromEmailAndPassword(ah,_m)}static credentialWithLink(ah,_m){const m_=a3.parseLink(_m);return P_(m_,"argument-error"),oR._fromEmailAndCode(ah,m_.code,m_.tenantId)}}return Nf.PROVIDER_ID="password",Nf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Nf.EMAIL_LINK_SIGN_IN_METHOD="emailLink",Nf})();class vR{constructor(_c){this.providerId=_c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_c){this.defaultLanguageCode=_c}setCustomParameters(_c){return this.customParameters=_c,this}getCustomParameters(){return this.customParameters}}class RS extends vR{constructor(){super(...arguments),this.scopes=[]}addScope(_c){return this.scopes.includes(_c)||this.scopes.push(_c),this}getScopes(){return[...this.scopes]}}class iS extends RS{static credentialFromJSON(_c){const ah="string"==typeof _c?JSON.parse(_c):_c;return P_("providerId"in ah&&"signInMethod"in ah,"argument-error"),h2._fromParams(ah)}credential(_c){return this._credential(Object.assign(Object.assign({},_c),{nonce:_c.rawNonce}))}_credential(_c){return P_(_c.idToken||_c.accessToken,"argument-error"),h2._fromParams(Object.assign(Object.assign({},_c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_c){return iS.oauthCredentialFromTaggedObject(_c)}static credentialFromError(_c){return iS.oauthCredentialFromTaggedObject(_c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_c}){if(!_c)return null;const{oauthIdToken:ah,oauthAccessToken:_m,oauthTokenSecret:m_,pendingToken:O_,nonce:s0,providerId:N0}=_c;if(!_m&&!m_&&!ah&&!O_||!N0)return null;try{return new iS(N0)._credential({idToken:ah,accessToken:_m,nonce:s0,pendingToken:O_})}catch(nI){return null}}}let WL=(()=>{class Nf extends RS{constructor(){super("facebook.com")}static credential(ah){return h2._fromParams({providerId:Nf.PROVIDER_ID,signInMethod:Nf.FACEBOOK_SIGN_IN_METHOD,accessToken:ah})}static credentialFromResult(ah){return Nf.credentialFromTaggedObject(ah)}static credentialFromError(ah){return Nf.credentialFromTaggedObject(ah.customData||{})}static credentialFromTaggedObject({_tokenResponse:ah}){if(!ah||!("oauthAccessToken"in ah)||!ah.oauthAccessToken)return null;try{return Nf.credential(ah.oauthAccessToken)}catch(_m){return null}}}return Nf.FACEBOOK_SIGN_IN_METHOD="facebook.com",Nf.PROVIDER_ID="facebook.com",Nf})(),c3=(()=>{class Nf extends RS{constructor(){super("google.com"),this.addScope("profile")}static credential(ah,_m){return h2._fromParams({providerId:Nf.PROVIDER_ID,signInMethod:Nf.GOOGLE_SIGN_IN_METHOD,idToken:ah,accessToken:_m})}static credentialFromResult(ah){return Nf.credentialFromTaggedObject(ah)}static credentialFromError(ah){return Nf.credentialFromTaggedObject(ah.customData||{})}static credentialFromTaggedObject({_tokenResponse:ah}){if(!ah)return null;const{oauthIdToken:_m,oauthAccessToken:m_}=ah;if(!_m&&!m_)return null;try{return Nf.credential(_m,m_)}catch(O_){return null}}}return Nf.GOOGLE_SIGN_IN_METHOD="google.com",Nf.PROVIDER_ID="google.com",Nf})(),SG=(()=>{class Nf extends RS{constructor(){super("github.com")}static credential(ah){return h2._fromParams({providerId:Nf.PROVIDER_ID,signInMethod:Nf.GITHUB_SIGN_IN_METHOD,accessToken:ah})}static credentialFromResult(ah){return Nf.credentialFromTaggedObject(ah)}static credentialFromError(ah){return Nf.credentialFromTaggedObject(ah.customData||{})}static credentialFromTaggedObject({_tokenResponse:ah}){if(!ah||!("oauthAccessToken"in ah)||!ah.oauthAccessToken)return null;try{return Nf.credential(ah.oauthAccessToken)}catch(_m){return null}}}return Nf.GITHUB_SIGN_IN_METHOD="github.com",Nf.PROVIDER_ID="github.com",Nf})();class eN extends RO{constructor(_c,ah){super(_c,_c),this.pendingToken=ah}_getIdTokenResponse(_c){return bT(_c,this.buildRequest())}_linkToIdToken(_c,ah){const _m=this.buildRequest();return _m.idToken=ah,bT(_c,_m)}_getReauthenticationResolver(_c){const ah=this.buildRequest();return ah.autoCreate=!1,bT(_c,ah)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_c){const ah="string"==typeof _c?JSON.parse(_c):_c,{providerId:_m,signInMethod:m_,pendingToken:O_}=ah;return _m&&m_&&O_&&_m===m_?new eN(_m,O_):null}static _create(_c,ah){return new eN(_c,ah)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qS extends vR{constructor(_c){P_(_c.startsWith("saml."),"argument-error"),super(_c)}static credentialFromResult(_c){return qS.samlCredentialFromTaggedObject(_c)}static credentialFromError(_c){return qS.samlCredentialFromTaggedObject(_c.customData||{})}static credentialFromJSON(_c){const ah=eN.fromJSON(_c);return P_(ah,"argument-error"),ah}static samlCredentialFromTaggedObject({_tokenResponse:_c}){if(!_c)return null;const{pendingToken:ah,providerId:_m}=_c;if(!ah||!_m)return null;try{return eN._create(_m,ah)}catch(m_){return null}}}let e5=(()=>{class Nf extends RS{constructor(){super("twitter.com")}static credential(ah,_m){return h2._fromParams({providerId:Nf.PROVIDER_ID,signInMethod:Nf.TWITTER_SIGN_IN_METHOD,oauthToken:ah,oauthTokenSecret:_m})}static credentialFromResult(ah){return Nf.credentialFromTaggedObject(ah)}static credentialFromError(ah){return Nf.credentialFromTaggedObject(ah.customData||{})}static credentialFromTaggedObject({_tokenResponse:ah}){if(!ah)return null;const{oauthAccessToken:_m,oauthTokenSecret:m_}=ah;if(!_m||!m_)return null;try{return Nf.credential(_m,m_)}catch(O_){return null}}}return Nf.TWITTER_SIGN_IN_METHOD="twitter.com",Nf.PROVIDER_ID="twitter.com",Nf})();function WR(Nf,_c){return aL.apply(this,arguments)}function aL(){return(aL=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signUp",U1(Nf,_c))})).apply(this,arguments)}class OO{constructor(_c){this.user=_c.user,this.providerId=_c.providerId,this._tokenResponse=_c._tokenResponse,this.operationType=_c.operationType}static _fromIdTokenResponse(_c,ah,_m,m_=!1){return(0,f.Z)(function*(){const O_=yield XI._fromIdTokenResponse(_c,_m,m_),s0=W4(_m);return new OO({user:O_,providerId:s0,_tokenResponse:_m,operationType:ah})})()}static _forOperation(_c,ah,_m){return(0,f.Z)(function*(){yield _c._updateTokensIfNecessary(_m,!0);const m_=W4(_m);return new OO({user:_c,providerId:m_,_tokenResponse:_m,operationType:ah})})()}}function W4(Nf){return Nf.providerId?Nf.providerId:"phoneNumber"in Nf?"phone":null}function u3(){return(u3=(0,f.Z)(function*(Nf){var _c;const ah=NI(Nf);if(yield ah._initializationPromise,null===(_c=ah.currentUser)||void 0===_c?void 0:_c.isAnonymous)return new OO({user:ah.currentUser,providerId:null,operationType:"signIn"});const _m=yield WR(ah,{returnSecureToken:!0}),m_=yield OO._fromIdTokenResponse(ah,"signIn",_m,!0);return yield ah._updateCurrentUser(m_.user),m_})).apply(this,arguments)}class uP extends q.ZR{constructor(_c,ah,_m,m_){var O_;super(ah.code,ah.message),this.operationType=_m,this.user=m_,Object.setPrototypeOf(this,uP.prototype),this.customData={appName:_c.name,tenantId:null!==(O_=_c.tenantId)&&void 0!==O_?O_:void 0,_serverResponse:ah.customData._serverResponse,operationType:_m}}static _fromErrorAndOperation(_c,ah,_m,m_){return new uP(_c,ah,_m,m_)}}function $M(Nf,_c,ah,_m){return("reauthenticate"===_c?ah._getReauthenticationResolver(Nf):ah._getIdTokenResponse(Nf)).catch(O_=>{throw"auth/multi-factor-auth-required"===O_.code?uP._fromErrorAndOperation(Nf,O_,_c,_m):O_})}function xN(Nf){return new Set(Nf.map(({providerId:_c})=>_c).filter(_c=>!!_c))}function tT(){return(tT=(0,f.Z)(function*(Nf,_c){const ah=(0,q.m9)(Nf);yield Y1(!0,ah,_c);const{providerUserInfo:_m}=yield TT(ah.auth,{idToken:yield ah.getIdToken(),deleteProvider:[_c]}),m_=xN(_m||[]);return ah.providerData=ah.providerData.filter(O_=>m_.has(O_.providerId)),m_.has("phone")||(ah.phoneNumber=null),yield ah.auth._persistUserIfCurrent(ah),ah})).apply(this,arguments)}function ZM(Nf,_c){return cL.apply(this,arguments)}function cL(){return(cL=(0,f.Z)(function*(Nf,_c,ah=!1){const _m=yield mR(Nf,_c._linkToIdToken(Nf.auth,yield Nf.getIdToken()),ah);return OO._forOperation(Nf,"link",_m)})).apply(this,arguments)}function Y1(Nf,_c,ah){return uL.apply(this,arguments)}function uL(){return(uL=(0,f.Z)(function*(Nf,_c,ah){yield tS(_c);const m_=!1===Nf?"provider-already-linked":"no-such-provider";P_(xN(_c.providerData).has(ah)===Nf,_c.auth,m_)})).apply(this,arguments)}function l3(Nf,_c){return lP.apply(this,arguments)}function lP(){return(lP=(0,f.Z)(function*(Nf,_c,ah=!1){const{auth:_m}=Nf,m_="reauthenticate";try{const O_=yield mR(Nf,$M(_m,m_,_c,Nf),ah);P_(O_.idToken,_m,"internal-error");const s0=PI(O_.idToken);P_(s0,_m,"internal-error");const{sub:N0}=s0;return P_(Nf.uid===N0,_m,"user-mismatch"),OO._forOperation(Nf,m_,O_)}catch(O_){throw"auth/user-not-found"===(null==O_?void 0:O_.code)&&Qv(_m,"user-mismatch"),O_}})).apply(this,arguments)}function WS(Nf,_c){return XM.apply(this,arguments)}function XM(){return(XM=(0,f.Z)(function*(Nf,_c,ah=!1){const m_=yield $M(Nf,"signIn",_c),O_=yield OO._fromIdTokenResponse(Nf,"signIn",m_);return ah||(yield Nf._updateCurrentUser(O_.user)),O_})).apply(this,arguments)}function LT(Nf,_c){return sR.apply(this,arguments)}function sR(){return(sR=(0,f.Z)(function*(Nf,_c){return WS(NI(Nf),_c)})).apply(this,arguments)}function aR(Nf,_c){return dP.apply(this,arguments)}function dP(){return(dP=(0,f.Z)(function*(Nf,_c){const ah=(0,q.m9)(Nf);return yield Y1(!1,ah,_c.providerId),ZM(ah,_c)})).apply(this,arguments)}function p2(Nf,_c){return LN.apply(this,arguments)}function LN(){return(LN=(0,f.Z)(function*(Nf,_c){return l3((0,q.m9)(Nf),_c)})).apply(this,arguments)}function MT(Nf,_c){return DO.apply(this,arguments)}function DO(){return(DO=(0,f.Z)(function*(Nf,_c){return XT(Nf,"POST","/v1/accounts:signInWithCustomToken",U1(Nf,_c))})).apply(this,arguments)}function zI(){return(zI=(0,f.Z)(function*(Nf,_c){const ah=NI(Nf),_m=yield MT(ah,{token:_c,returnSecureToken:!0}),m_=yield OO._fromIdTokenResponse(ah,"signIn",_m);return yield ah._updateCurrentUser(m_.user),m_})).apply(this,arguments)}class hP{constructor(_c,ah){this.factorId=_c,this.uid=ah.mfaEnrollmentId,this.enrollmentTime=new Date(ah.enrolledAt).toUTCString(),this.displayName=ah.displayName}static _fromServerResponse(_c,ah){return"phoneInfo"in ah?_B._fromServerResponse(_c,ah):Qv(_c,"internal-error")}}class _B extends hP{constructor(_c){super("phone",_c),this.phoneNumber=_c.phoneInfo}static _fromServerResponse(_c,ah){return new _B(ah)}}function lL(Nf,_c,ah){var _m;P_((null===(_m=ah.url)||void 0===_m?void 0:_m.length)>0,Nf,"invalid-continue-uri"),P_(void 0===ah.dynamicLinkDomain||ah.dynamicLinkDomain.length>0,Nf,"invalid-dynamic-link-domain"),_c.continueUrl=ah.url,_c.dynamicLinkDomain=ah.dynamicLinkDomain,_c.canHandleCodeInApp=ah.handleCodeInApp,ah.iOS&&(P_(ah.iOS.bundleId.length>0,Nf,"missing-ios-bundle-id"),_c.iOSBundleId=ah.iOS.bundleId),ah.android&&(P_(ah.android.packageName.length>0,Nf,"missing-android-pkg-name"),_c.androidInstallApp=ah.android.installApp,_c.androidMinimumVersionCode=ah.android.minimumVersion,_c.androidPackageName=ah.android.packageName)}function eU(){return(eU=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf),m_={requestType:"PASSWORD_RESET",email:_c};ah&&lL(_m,m_,ah),yield zM(_m,m_)})).apply(this,arguments)}function h3(){return(h3=(0,f.Z)(function*(Nf,_c,ah){yield rS((0,q.m9)(Nf),{oobCode:_c,newPassword:ah})})).apply(this,arguments)}function j0(){return(j0=(0,f.Z)(function*(Nf,_c){yield o3((0,q.m9)(Nf),{oobCode:_c})})).apply(this,arguments)}function R1(Nf,_c){return YL.apply(this,arguments)}function YL(){return(YL=(0,f.Z)(function*(Nf,_c){const ah=(0,q.m9)(Nf),_m=yield rS(ah,{oobCode:_c}),m_=_m.requestType;switch(P_(m_,ah,"internal-error"),m_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":P_(_m.newEmail,ah,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":P_(_m.mfaInfo,ah,"internal-error");default:P_(_m.email,ah,"internal-error")}let O_=null;return _m.mfaInfo&&(O_=hP._fromServerResponse(NI(ah),_m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_m.requestType?_m.newEmail:_m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_m.requestType?_m.email:_m.newEmail)||null,multiFactorInfo:O_},operation:m_}})).apply(this,arguments)}function f3(){return(f3=(0,f.Z)(function*(Nf,_c){const{data:ah}=yield R1((0,q.m9)(Nf),_c);return ah.email})).apply(this,arguments)}function NO(){return(NO=(0,f.Z)(function*(Nf,_c,ah){const _m=NI(Nf),m_=yield WR(_m,{returnSecureToken:!0,email:_c,password:ah}),O_=yield OO._fromIdTokenResponse(_m,"signIn",m_);return yield _m._updateCurrentUser(O_.user),O_})).apply(this,arguments)}function Y4(){return(Y4=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf),m_={requestType:"EMAIL_SIGNIN",email:_c};P_(ah.handleCodeInApp,_m,"argument-error"),ah&&lL(_m,m_,ah),yield NN(_m,m_)})).apply(this,arguments)}function kO(){return(kO=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf),m_=X6.credentialWithLink(_c,ah||D0());return P_(m_._tenantId===(_m.tenantId||null),_m,"tenant-id-mismatch"),LT(_m,m_)})).apply(this,arguments)}function yR(Nf,_c){return PO.apply(this,arguments)}function PO(){return(PO=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:createAuthUri",U1(Nf,_c))})).apply(this,arguments)}function fP(){return(fP=(0,f.Z)(function*(Nf,_c){const _m={identifier:_c,continueUri:O0()?D0():"http://localhost"},{signinMethods:m_}=yield yR((0,q.m9)(Nf),_m);return m_||[]})).apply(this,arguments)}function J4(){return(J4=(0,f.Z)(function*(Nf,_c){const ah=(0,q.m9)(Nf),m_={requestType:"VERIFY_EMAIL",idToken:yield Nf.getIdToken()};_c&&lL(ah.auth,m_,_c);const{email:O_}=yield hT(ah.auth,m_);O_!==Nf.email&&(yield Nf.reload())})).apply(this,arguments)}function g3(){return(g3=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf),O_={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield Nf.getIdToken(),newEmail:_c};ah&&lL(_m.auth,O_,ah);const{email:s0}=yield K6(_m.auth,O_);s0!==Nf.email&&(yield Nf.reload())})).apply(this,arguments)}function m3(Nf,_c){return tU.apply(this,arguments)}function tU(){return(tU=(0,f.Z)(function*(Nf,_c){return S1(Nf,"POST","/v1/accounts:update",_c)})).apply(this,arguments)}function A3(){return(A3=(0,f.Z)(function*(Nf,{displayName:_c,photoURL:ah}){if(void 0===_c&&void 0===ah)return;const _m=(0,q.m9)(Nf),O_={idToken:yield _m.getIdToken(),displayName:_c,photoUrl:ah,returnSecureToken:!0},s0=yield mR(_m,m3(_m.auth,O_));_m.displayName=s0.displayName||null,_m.photoURL=s0.photoUrl||null;const N0=_m.providerData.find(({providerId:nI})=>"password"===nI);N0&&(N0.displayName=_m.displayName,N0.photoURL=_m.photoURL),yield _m._updateTokensIfNecessary(s0)})).apply(this,arguments)}function nU(Nf,_c,ah){return pP.apply(this,arguments)}function pP(){return(pP=(0,f.Z)(function*(Nf,_c,ah){const{auth:_m}=Nf,O_={idToken:yield Nf.getIdToken(),returnSecureToken:!0};_c&&(O_.email=_c),ah&&(O_.password=ah);const s0=yield mR(Nf,qL(_m,O_));yield Nf._updateTokensIfNecessary(s0,!0)})).apply(this,arguments)}class $L{constructor(_c,ah,_m={}){this.isNewUser=_c,this.providerId=ah,this.profile=_m}}class s5 extends $L{constructor(_c,ah,_m,m_){super(_c,ah,_m),this.username=m_}}class rU extends $L{constructor(_c,ah){super(_c,"facebook.com",ah)}}class gO extends s5{constructor(_c,ah){super(_c,"github.com",ah,"string"==typeof(null==ah?void 0:ah.login)?null==ah?void 0:ah.login:null)}}class RG extends $L{constructor(_c,ah){super(_c,"google.com",ah)}}class $4 extends s5{constructor(_c,ah,_m){super(_c,"twitter.com",ah,_m)}}function KS(Nf){const{user:_c,_tokenResponse:ah}=Nf;return _c.isAnonymous&&!ah?{providerId:null,isNewUser:!1,profile:null}:function _3(Nf){var _c,ah;if(!Nf)return null;const{providerId:_m}=Nf,m_=Nf.rawUserInfo?JSON.parse(Nf.rawUserInfo):{},O_=Nf.isNewUser||"identitytoolkit#SignupNewUserResponse"===Nf.kind;if(!_m&&(null==Nf?void 0:Nf.idToken)){const s0=null===(ah=null===(_c=PI(Nf.idToken))||void 0===_c?void 0:_c.firebase)||void 0===ah?void 0:ah.sign_in_provider;if(s0)return new $L(O_,"anonymous"!==s0&&"custom"!==s0?s0:null)}if(!_m)return null;switch(_m){case"facebook.com":return new rU(O_,m_);case"github.com":return new gO(O_,m_);case"google.com":return new RG(O_,m_);case"twitter.com":return new $4(O_,m_,Nf.screenName||null);case"custom":case"anonymous":return new $L(O_,null);default:return new $L(O_,_m,m_)}}(ah)}class m2{constructor(_c,ah){this.type=_c,this.credential=ah}static _fromIdtoken(_c){return new m2("enroll",_c)}static _fromMfaPendingCredential(_c){return new m2("signin",_c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_c){var ah,_m;if(null==_c?void 0:_c.multiFactorSession){if(null===(ah=_c.multiFactorSession)||void 0===ah?void 0:ah.pendingCredential)return m2._fromMfaPendingCredential(_c.multiFactorSession.pendingCredential);if(null===(_m=_c.multiFactorSession)||void 0===_m?void 0:_m.idToken)return m2._fromIdtoken(_c.multiFactorSession.idToken)}return null}}class nN{constructor(_c,ah,_m){this.session=_c,this.hints=ah,this.signInResolver=_m}static _fromError(_c,ah){const _m=NI(_c),m_=ah.customData._serverResponse,O_=(m_.mfaInfo||[]).map(N0=>hP._fromServerResponse(_m,N0));P_(m_.mfaPendingCredential,_m,"internal-error");const s0=m2._fromMfaPendingCredential(m_.mfaPendingCredential);return new nN(s0,O_,function(){var N0=(0,f.Z)(function*(nI){const _I=yield nI._process(_m,s0);delete m_.mfaInfo,delete m_.mfaPendingCredential;const GI=Object.assign(Object.assign({},m_),{idToken:_I.idToken,refreshToken:_I.refreshToken});switch(ah.operationType){case"signIn":const QI=yield OO._fromIdTokenResponse(_m,ah.operationType,GI);return yield _m._updateCurrentUser(QI.user),QI;case"reauthenticate":return P_(ah.user,_m,"internal-error"),OO._forOperation(ah.user,ah.operationType,GI);default:Qv(_m,"internal-error")}});return function(nI){return N0.apply(this,arguments)}}())}resolveSignIn(_c){var ah=this;return(0,f.Z)(function*(){return ah.signInResolver(_c)})()}}function l5(Nf,_c){return S1(Nf,"POST","/v2/accounts/mfaEnrollment:start",U1(Nf,_c))}class gP{constructor(_c){this.user=_c,this.enrolledFactors=[],_c._onReload(ah=>{ah.mfaInfo&&(this.enrolledFactors=ah.mfaInfo.map(_m=>hP._fromServerResponse(_c.auth,_m)))})}static _fromUser(_c){return new gP(_c)}getSession(){var _c=this;return(0,f.Z)(function*(){return m2._fromIdtoken(yield _c.user.getIdToken())})()}enroll(_c,ah){var _m=this;return(0,f.Z)(function*(){const m_=_c,O_=yield _m.getSession(),s0=yield mR(_m.user,m_._process(_m.user.auth,O_,ah));return yield _m.user._updateTokensIfNecessary(s0),_m.user.reload()})()}unenroll(_c){var ah=this;return(0,f.Z)(function*(){const _m="string"==typeof _c?_c:_c.uid,m_=yield ah.user.getIdToken(),O_=yield mR(ah.user,function hL(Nf,_c){return S1(Nf,"POST","/v2/accounts/mfaEnrollment:withdraw",U1(Nf,_c))}(ah.user.auth,{idToken:m_,mfaEnrollmentId:_m}));ah.enrolledFactors=ah.enrolledFactors.filter(({uid:s0})=>s0!==_m),yield ah.user._updateTokensIfNecessary(O_);try{yield ah.user.reload()}catch(s0){if("auth/user-token-expired"!==s0.code)throw s0}})()}}const ZL=new WeakMap,BN="__sak";class oU{constructor(_c,ah){this.storageRetriever=_c,this.type=ah}_isAvailable(){try{return this.storage?(this.storage.setItem(BN,"1"),this.storage.removeItem(BN),Promise.resolve(!0)):Promise.resolve(!1)}catch(_c){return Promise.resolve(!1)}}_set(_c,ah){return this.storage.setItem(_c,JSON.stringify(ah)),Promise.resolve()}_get(_c){const ah=this.storage.getItem(_c);return Promise.resolve(ah?JSON.parse(ah):null)}_remove(_c){return this.storage.removeItem(_c),Promise.resolve()}get storage(){return this.storageRetriever()}}const BT=(()=>{class Nf extends oU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(ah,_m)=>this.onStorageEvent(ah,_m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function G9(){const Nf=(0,q.z$)();return SN(Nf)||pO(Nf)}()&&function QS(){try{return!(!window||window===window.top)}catch(Nf){return!1}}(),this.fallbackToPolling=iP(),this._shouldAllowMigration=!0}forAllChangedKeys(ah){for(const _m of Object.keys(this.listeners)){const m_=this.storage.getItem(_m),O_=this.localCache[_m];m_!==O_&&ah(_m,O_,m_)}}onStorageEvent(ah,_m=!1){if(!ah.key)return void this.forAllChangedKeys((N0,nI,_I)=>{this.notifyListeners(N0,_I)});const m_=ah.key;if(_m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const N0=this.storage.getItem(m_);if(ah.newValue!==N0)null!==ah.newValue?this.storage.setItem(m_,ah.newValue):this.storage.removeItem(m_);else if(this.localCache[m_]===ah.newValue&&!_m)return}const O_=()=>{const N0=this.storage.getItem(m_);!_m&&this.localCache[m_]===N0||this.notifyListeners(m_,N0)},s0=this.storage.getItem(m_);!function KM(){return(0,q.w1)()&&10===document.documentMode}()||s0===ah.newValue||ah.newValue===ah.oldValue?O_():setTimeout(O_,10)}notifyListeners(ah,_m){this.localCache[ah]=_m;const m_=this.listeners[ah];if(m_)for(const O_ of Array.from(m_))O_(_m&&JSON.parse(_m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((ah,_m,m_)=>{this.onStorageEvent(new StorageEvent("storage",{key:ah,oldValue:_m,newValue:m_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(ah,_m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[ah]||(this.listeners[ah]=new Set,this.localCache[ah]=this.storage.getItem(ah)),this.listeners[ah].add(_m)}_removeListener(ah,_m){this.listeners[ah]&&(this.listeners[ah].delete(_m),0===this.listeners[ah].size&&delete this.listeners[ah]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(ah,_m){var m_=()=>super._set,O_=this;return(0,f.Z)(function*(){yield m_().call(O_,ah,_m),O_.localCache[ah]=JSON.stringify(_m)})()}_get(ah){var _m=()=>super._get,m_=this;return(0,f.Z)(function*(){const O_=yield _m().call(m_,ah);return m_.localCache[ah]=JSON.stringify(O_),O_})()}_remove(ah){var _m=()=>super._remove,m_=this;return(0,f.Z)(function*(){yield _m().call(m_,ah),delete m_.localCache[ah]})()}}return Nf.type="LOCAL",Nf})(),UT=(()=>{class Nf extends oU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(ah,_m){}_removeListener(ah,_m){}}return Nf.type="SESSION",Nf})();let h5=(()=>{class Nf{constructor(ah){this.eventTarget=ah,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(ah){const _m=this.receivers.find(O_=>O_.isListeningto(ah));if(_m)return _m;const m_=new Nf(ah);return this.receivers.push(m_),m_}isListeningto(ah){return this.eventTarget===ah}handleEvent(ah){var _m=this;return(0,f.Z)(function*(){const m_=ah,{eventId:O_,eventType:s0,data:N0}=m_.data,nI=_m.handlersMap[s0];if(!(null==nI?void 0:nI.size))return;m_.ports[0].postMessage({status:"ack",eventId:O_,eventType:s0});const _I=Array.from(nI).map(function(){var QI=(0,f.Z)(function*(uS){return uS(m_.origin,N0)});return function(uS){return QI.apply(this,arguments)}}()),GI=yield function eM(Nf){return Promise.all(Nf.map(function(){var _c=(0,f.Z)(function*(ah){try{return{fulfilled:!0,value:yield ah}}catch(_m){return{fulfilled:!1,reason:_m}}});return function(ah){return _c.apply(this,arguments)}}()))}(_I);m_.ports[0].postMessage({status:"done",eventId:O_,eventType:s0,response:GI})})()}_subscribe(ah,_m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[ah]||(this.handlersMap[ah]=new Set),this.handlersMap[ah].add(_m)}_unsubscribe(ah,_m){this.handlersMap[ah]&&_m&&this.handlersMap[ah].delete(_m),(!_m||0===this.handlersMap[ah].size)&&delete this.handlersMap[ah],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return Nf.receivers=[],Nf})();function tM(Nf="",_c=10){let ah="";for(let _m=0;_m<_c;_m++)ah+=Math.floor(10*Math.random());return Nf+ah}class mP{constructor(_c){this.target=_c,this.handlers=new Set}removeMessageHandler(_c){_c.messageChannel&&(_c.messageChannel.port1.removeEventListener("message",_c.onMessage),_c.messageChannel.port1.close()),this.handlers.delete(_c)}_send(_c,ah,_m=50){var m_=this;return(0,f.Z)(function*(){const O_="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O_)throw new Error("connection_unavailable");let s0,N0;return new Promise((nI,_I)=>{const GI=tM("",20);O_.port1.start();const QI=setTimeout(()=>{_I(new Error("unsupported_event"))},_m);N0={messageChannel:O_,onMessage(uS){const FO=uS;if(FO.data.eventId===GI)switch(FO.data.status){case"ack":clearTimeout(QI),s0=setTimeout(()=>{_I(new Error("timeout"))},3e3);break;case"done":clearTimeout(s0),nI(FO.data.response);break;default:clearTimeout(QI),clearTimeout(s0),_I(new Error("invalid_response"))}}},m_.handlers.add(N0),O_.port1.addEventListener("message",N0.onMessage),m_.target.postMessage({eventType:_c,eventId:GI,data:ah},[O_.port2])}).finally(()=>{N0&&m_.removeMessageHandler(N0)})})()}}function oS(){return window}function rN(){return void 0!==oS().WorkerGlobalScope&&"function"==typeof oS().importScripts}function f5(){return(f5=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(Nf){return null}})).apply(this,arguments)}const fL="firebaseLocalStorageDb",_P="firebaseLocalStorage",nM="fbase_key";class vP{constructor(_c){this.request=_c}toPromise(){return new Promise((_c,ah)=>{this.request.addEventListener("success",()=>{_c(this.request.result)}),this.request.addEventListener("error",()=>{ah(this.request.error)})})}}function mS(Nf,_c){return Nf.transaction([_P],_c?"readwrite":"readonly").objectStore(_P)}function yP(){const Nf=indexedDB.open(fL,1);return new Promise((_c,ah)=>{Nf.addEventListener("error",()=>{ah(Nf.error)}),Nf.addEventListener("upgradeneeded",()=>{const _m=Nf.result;try{_m.createObjectStore(_P,{keyPath:nM})}catch(m_){ah(m_)}}),Nf.addEventListener("success",(0,f.Z)(function*(){const _m=Nf.result;_m.objectStoreNames.contains(_P)?_c(_m):(_m.close(),yield function pL(){const Nf=indexedDB.deleteDatabase(fL);return new vP(Nf).toPromise()}(),_c(yield yP()))}))})}function UN(Nf,_c,ah){return EP.apply(this,arguments)}function EP(){return(EP=(0,f.Z)(function*(Nf,_c,ah){const _m=mS(Nf,!0).put({[nM]:_c,value:ah});return new vP(_m).toPromise()})).apply(this,arguments)}function IP(){return(IP=(0,f.Z)(function*(Nf,_c){const ah=mS(Nf,!1).get(_c),_m=yield new vP(ah).toPromise();return void 0===_m?null:_m.value})).apply(this,arguments)}function FN(Nf,_c){const ah=mS(Nf,!0).delete(_c);return new vP(ah).toPromise()}const gL=(()=>{class Nf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var ah=this;return(0,f.Z)(function*(){return ah.db||(ah.db=yield yP()),ah.db})()}_withRetries(ah){var _m=this;return(0,f.Z)(function*(){let m_=0;for(;;)try{const O_=yield _m._openDb();return yield ah(O_)}catch(O_){if(m_++>3)throw O_;_m.db&&(_m.db.close(),_m.db=void 0)}})()}initializeServiceWorkerMessaging(){var ah=this;return(0,f.Z)(function*(){return rN()?ah.initializeReceiver():ah.initializeSender()})()}initializeReceiver(){var ah=this;return(0,f.Z)(function*(){ah.receiver=h5._getInstance(function v3(){return rN()?self:null}()),ah.receiver._subscribe("keyChanged",function(){var _m=(0,f.Z)(function*(m_,O_){return{keyProcessed:(yield ah._poll()).includes(O_.key)}});return function(m_,O_){return _m.apply(this,arguments)}}()),ah.receiver._subscribe("ping",function(){var _m=(0,f.Z)(function*(m_,O_){return["keyChanged"]});return function(m_,O_){return _m.apply(this,arguments)}}())})()}initializeSender(){var ah=this;return(0,f.Z)(function*(){var _m,m_;if(ah.activeServiceWorker=yield function RI(){return f5.apply(this,arguments)}(),!ah.activeServiceWorker)return;ah.sender=new mP(ah.activeServiceWorker);const O_=yield ah.sender._send("ping",{},800);!O_||(null===(_m=O_[0])||void 0===_m?void 0:_m.fulfilled)&&(null===(m_=O_[0])||void 0===m_?void 0:m_.value.includes("keyChanged"))&&(ah.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(ah){var _m=this;return(0,f.Z)(function*(){if(_m.sender&&_m.activeServiceWorker&&function p5(){var Nf;return(null===(Nf=null==navigator?void 0:navigator.serviceWorker)||void 0===Nf?void 0:Nf.controller)||null}()===_m.activeServiceWorker)try{yield _m.sender._send("keyChanged",{key:ah},_m.serviceWorkerReceiverAvailable?800:50)}catch(m_){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const ah=yield yP();return yield UN(ah,BN,"1"),yield FN(ah,BN),!0}catch(ah){}return!1})()}_withPendingWrite(ah){var _m=this;return(0,f.Z)(function*(){_m.pendingWrites++;try{yield ah()}finally{_m.pendingWrites--}})()}_set(ah,_m){var m_=this;return(0,f.Z)(function*(){return m_._withPendingWrite((0,f.Z)(function*(){return yield m_._withRetries(O_=>UN(O_,ah,_m)),m_.localCache[ah]=_m,m_.notifyServiceWorker(ah)}))})()}_get(ah){var _m=this;return(0,f.Z)(function*(){const m_=yield _m._withRetries(O_=>function rM(Nf,_c){return IP.apply(this,arguments)}(O_,ah));return _m.localCache[ah]=m_,m_})()}_remove(ah){var _m=this;return(0,f.Z)(function*(){return _m._withPendingWrite((0,f.Z)(function*(){return yield _m._withRetries(m_=>FN(m_,ah)),delete _m.localCache[ah],_m.notifyServiceWorker(ah)}))})()}_poll(){var ah=this;return(0,f.Z)(function*(){const _m=yield ah._withRetries(s0=>{const N0=mS(s0,!1).getAll();return new vP(N0).toPromise()});if(!_m)return[];if(0!==ah.pendingWrites)return[];const m_=[],O_=new Set;for(const{fbase_key:s0,value:N0}of _m)O_.add(s0),JSON.stringify(ah.localCache[s0])!==JSON.stringify(N0)&&(ah.notifyListeners(s0,N0),m_.push(s0));for(const s0 of Object.keys(ah.localCache))ah.localCache[s0]&&!O_.has(s0)&&(ah.notifyListeners(s0,null),m_.push(s0));return m_})()}notifyListeners(ah,_m){this.localCache[ah]=_m;const m_=this.listeners[ah];if(m_)for(const O_ of Array.from(m_))O_(_m)}startPolling(){var ah=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return ah._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(ah,_m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[ah]||(this.listeners[ah]=new Set,this._get(ah)),this.listeners[ah].add(_m)}_removeListener(ah,_m){this.listeners[ah]&&(this.listeners[ah].delete(_m),0===this.listeners[ah].size&&delete this.listeners[ah]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return Nf.type="LOCAL",Nf})();function aS(Nf,_c){return S1(Nf,"POST","/v2/accounts/mfaSignIn:start",U1(Nf,_c))}function KT(){return(KT=(0,f.Z)(function*(Nf){return(yield S1(Nf,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function jN(Nf){return new Promise((_c,ah)=>{const _m=document.createElement("script");_m.setAttribute("src",Nf),_m.onload=_c,_m.onerror=m_=>{const O_=h0("internal-error");O_.customData=m_,ah(O_)},_m.type="text/javascript",_m.charset="UTF-8",function mL(){var Nf,_c;return null!==(_c=null===(Nf=document.getElementsByTagName("head"))||void 0===Nf?void 0:Nf[0])&&void 0!==_c?_c:document}().appendChild(_m)})}function _2(Nf){return`__${Nf}${Math.floor(1e6*Math.random())}`}const cR=1e12;class NS{constructor(_c){this.auth=_c,this.counter=cR,this._widgets=new Map}render(_c,ah){const _m=this.counter;return this._widgets.set(_m,new LO(_c,this.auth.name,ah||{})),this.counter++,_m}reset(_c){var ah;const _m=_c||cR;null===(ah=this._widgets.get(_m))||void 0===ah||ah.delete(),this._widgets.delete(_m)}getResponse(_c){var ah;return(null===(ah=this._widgets.get(_c||cR))||void 0===ah?void 0:ah.getResponse())||""}execute(_c){var ah=this;return(0,f.Z)(function*(){var _m;return null===(_m=ah._widgets.get(_c||cR))||void 0===_m||_m.execute(),""})()}}class LO{constructor(_c,ah,_m){this.params=_m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m_="string"==typeof _c?document.getElementById(_c):_c;P_(m_,"argument-error",{appName:ah}),this.container=m_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function E3(Nf){const _c=[],ah="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _m=0;_m<Nf;_m++)_c.push(ah.charAt(Math.floor(Math.random()*ah.length)));return _c.join("")}(50);const{callback:_c,"expired-callback":ah}=this.params;if(_c)try{_c(this.responseToken)}catch(_m){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,ah)try{ah()}catch(_m){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Z4=_2("rcb"),RT=new B1(3e4,6e4);class xY{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!oS().grecaptcha}load(_c,ah=""){return P_(function iM(Nf){return Nf.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(Nf)}(ah),_c,"argument-error"),this.shouldResolveImmediately(ah)?Promise.resolve(oS().grecaptcha):new Promise((_m,m_)=>{const O_=oS().setTimeout(()=>{m_(h0(_c,"network-request-failed"))},RT.get());oS()[Z4]=()=>{oS().clearTimeout(O_),delete oS()[Z4];const N0=oS().grecaptcha;if(!N0)return void m_(h0(_c,"internal-error"));const nI=N0.render;N0.render=(_I,GI)=>{const QI=nI(_I,GI);return this.counter++,QI},this.hostLanguage=ah,_m(N0)},jN(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:Z4,render:"explicit",hl:ah})}`).catch(()=>{clearTimeout(O_),m_(h0(_c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_c){return!!oS().grecaptcha&&(_c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mO{load(_c){return(0,f.Z)(function*(){return new NS(_c)})()}clearedOneInstance(){}}const g5="recaptcha",wP={theme:"light",type:"image"};class X4{constructor(_c,ah=Object.assign({},wP),_m){this.parameters=ah,this.type=g5,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=NI(_m),this.isInvisible="invisible"===this.parameters.size,P_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const m_="string"==typeof _c?document.getElementById(_c):_c;P_(m_,this.auth,"argument-error"),this.container=m_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mO:new xY,this.validateStartingState()}verify(){var _c=this;return(0,f.Z)(function*(){_c.assertNotDestroyed();const ah=yield _c.render(),_m=_c.getAssertedRecaptcha();return _m.getResponse(ah)||new Promise(O_=>{const s0=N0=>{!N0||(_c.tokenChangeListeners.delete(s0),O_(N0))};_c.tokenChangeListeners.add(s0),_c.isInvisible&&_m.execute(ah)})})()}render(){try{this.assertNotDestroyed()}catch(_c){return Promise.reject(_c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_c=>{throw this.renderPromise=null,_c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_c=>{this.container.removeChild(_c)})}validateStartingState(){P_(!this.parameters.sitekey,this.auth,"argument-error"),P_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_c){return ah=>{if(this.tokenChangeListeners.forEach(_m=>_m(ah)),"function"==typeof _c)_c(ah);else if("string"==typeof _c){const _m=oS()[_c];"function"==typeof _m&&_m(ah)}}}assertNotDestroyed(){P_(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _c=this;return(0,f.Z)(function*(){if(yield _c.init(),!_c.widgetId){let ah=_c.container;if(!_c.isInvisible){const _m=document.createElement("div");ah.appendChild(_m),ah=_m}_c.widgetId=_c.getAssertedRecaptcha().render(ah,_c.parameters)}return _c.widgetId})()}init(){var _c=this;return(0,f.Z)(function*(){P_(O0()&&!rN(),_c.auth,"internal-error"),yield function v2(){let Nf=null;return new Promise(_c=>{"complete"!==document.readyState?(Nf=()=>_c(),window.addEventListener("load",Nf)):_c()}).catch(_c=>{throw Nf&&window.removeEventListener("load",Nf),_c})}(),_c.recaptcha=yield _c._recaptchaLoader.load(_c.auth,_c.auth.languageCode||void 0);const ah=yield function CP(Nf){return KT.apply(this,arguments)}(_c.auth);P_(ah,_c.auth,"internal-error"),_c.parameters.sitekey=ah})()}getAssertedRecaptcha(){return P_(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class I3{constructor(_c,ah){this.verificationId=_c,this.onConfirmation=ah}confirm(_c){const ah=cP._fromVerification(this.verificationId,_c);return this.onConfirmation(ah)}}function aU(){return(aU=(0,f.Z)(function*(Nf,_c,ah){const _m=NI(Nf),m_=yield zR(_m,_c,(0,q.m9)(ah));return new I3(m_,O_=>LT(_m,O_))})).apply(this,arguments)}function m5(){return(m5=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf);yield Y1(!1,_m,"phone");const m_=yield zR(_m.auth,_c,(0,q.m9)(ah));return new I3(m_,O_=>aR(_m,O_))})).apply(this,arguments)}function ER(){return(ER=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf),m_=yield zR(_m.auth,_c,(0,q.m9)(ah));return new I3(m_,O_=>p2(_m,O_))})).apply(this,arguments)}function zR(Nf,_c,ah){return oM.apply(this,arguments)}function oM(){return(oM=(0,f.Z)(function*(Nf,_c,ah){var _m;const m_=yield ah.verify();try{let O_;if(P_("string"==typeof m_,Nf,"argument-error"),P_(ah.type===g5,Nf,"argument-error"),O_="string"==typeof _c?{phoneNumber:_c}:_c,"session"in O_){const s0=O_.session;if("phoneNumber"in O_)return P_("enroll"===s0.type,Nf,"internal-error"),(yield l5(Nf,{idToken:s0.credential,phoneEnrollmentInfo:{phoneNumber:O_.phoneNumber,recaptchaToken:m_}})).phoneSessionInfo.sessionInfo;{P_("signin"===s0.type,Nf,"internal-error");const N0=(null===(_m=O_.multiFactorHint)||void 0===_m?void 0:_m.uid)||O_.multiFactorUid;return P_(N0,Nf,"missing-multi-factor-info"),(yield aS(Nf,{mfaPendingCredential:s0.credential,mfaEnrollmentId:N0,phoneSignInInfo:{recaptchaToken:m_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:s0}=yield U9(Nf,{phoneNumber:O_.phoneNumber,recaptchaToken:m_});return s0}}finally{ah._reset()}})).apply(this,arguments)}function y2(){return(y2=(0,f.Z)(function*(Nf,_c){yield ZM((0,q.m9)(Nf),_c)})).apply(this,arguments)}let E2=(()=>{class Nf{constructor(ah){this.providerId=Nf.PROVIDER_ID,this.auth=NI(ah)}verifyPhoneNumber(ah,_m){return zR(this.auth,ah,(0,q.m9)(_m))}static credential(ah,_m){return cP._fromVerification(ah,_m)}static credentialFromResult(ah){return Nf.credentialFromTaggedObject(ah)}static credentialFromError(ah){return Nf.credentialFromTaggedObject(ah.customData||{})}static credentialFromTaggedObject({_tokenResponse:ah}){if(!ah)return null;const{phoneNumber:_m,temporaryProof:m_}=ah;return _m&&m_?cP._fromTokenResponse(_m,m_):null}}return Nf.PROVIDER_ID="phone",Nf.PHONE_SIGN_IN_METHOD="phone",Nf})();function I2(Nf,_c){return _c?F_(_c):(P_(Nf._popupRedirectResolver,Nf,"argument-error"),Nf._popupRedirectResolver)}class b2 extends RO{constructor(_c){super("custom","custom"),this.params=_c}_getIdTokenResponse(_c){return bT(_c,this._buildIdpRequest())}_linkToIdToken(_c,ah){return bT(_c,this._buildIdpRequest(ah))}_getReauthenticationResolver(_c){return bT(_c,this._buildIdpRequest())}_buildIdpRequest(_c){const ah={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _c&&(ah.idToken=_c),ah}}function _1(Nf){return WS(Nf.auth,new b2(Nf),Nf.bypassAuthState)}function lj(Nf){const{auth:_c,user:ah}=Nf;return P_(ah,_c,"internal-error"),l3(ah,new b2(Nf),Nf.bypassAuthState)}function AL(Nf){return IR.apply(this,arguments)}function IR(){return(IR=(0,f.Z)(function*(Nf){const{auth:_c,user:ah}=Nf;return P_(ah,_c,"internal-error"),ZM(ah,new b2(Nf),Nf.bypassAuthState)})).apply(this,arguments)}class aM{constructor(_c,ah,_m,m_,O_=!1){this.auth=_c,this.resolver=_m,this.user=m_,this.bypassAuthState=O_,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(ah)?ah:[ah]}execute(){var _c=this;return new Promise(function(){var ah=(0,f.Z)(function*(_m,m_){_c.pendingPromise={resolve:_m,reject:m_};try{_c.eventManager=yield _c.resolver._initialize(_c.auth),yield _c.onExecution(),_c.eventManager.registerConsumer(_c)}catch(O_){_c.reject(O_)}});return function(_m,m_){return ah.apply(this,arguments)}}())}onAuthEvent(_c){var ah=this;return(0,f.Z)(function*(){const{urlResponse:_m,sessionId:m_,postBody:O_,tenantId:s0,error:N0,type:nI}=_c;if(N0)return void ah.reject(N0);const _I={auth:ah.auth,requestUri:_m,sessionId:m_,tenantId:s0||void 0,postBody:O_||void 0,user:ah.user,bypassAuthState:ah.bypassAuthState};try{ah.resolve(yield ah.getIdpTask(nI)(_I))}catch(GI){ah.reject(GI)}})()}onError(_c){this.reject(_c)}getIdpTask(_c){switch(_c){case"signInViaPopup":case"signInViaRedirect":return _1;case"linkViaPopup":case"linkViaRedirect":return AL;case"reauthViaPopup":case"reauthViaRedirect":return lj;default:Qv(this.auth,"internal-error")}}resolve(_c){E_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_c),this.unregisterAndCleanUp()}reject(_c){E_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _L=new B1(2e3,1e4);function C2(){return(C2=(0,f.Z)(function*(Nf,_c,ah){const _m=NI(Nf);H_(Nf,_c,vR);const m_=I2(_m,ah);return new _5(_m,"signInViaPopup",_c,m_).executeNotNull()})).apply(this,arguments)}function C3(){return(C3=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf);H_(_m.auth,_c,vR);const m_=I2(_m.auth,ah);return new _5(_m.auth,"reauthViaPopup",_c,m_,_m).executeNotNull()})).apply(this,arguments)}function iN(){return(iN=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf);H_(_m.auth,_c,vR);const m_=I2(_m.auth,ah);return new _5(_m.auth,"linkViaPopup",_c,m_,_m).executeNotNull()})).apply(this,arguments)}let _5=(()=>{class Nf extends aM{constructor(ah,_m,m_,O_,s0){super(ah,_m,O_,s0),this.provider=m_,this.authWindow=null,this.pollId=null,Nf.currentPopupAction&&Nf.currentPopupAction.cancel(),Nf.currentPopupAction=this}executeNotNull(){var ah=this;return(0,f.Z)(function*(){const _m=yield ah.execute();return P_(_m,ah.auth,"internal-error"),_m})()}onExecution(){var ah=this;return(0,f.Z)(function*(){E_(1===ah.filter.length,"Popup operations only handle one event");const _m=tM();ah.authWindow=yield ah.resolver._openPopup(ah.auth,ah.provider,ah.filter[0],_m),ah.authWindow.associatedEvent=_m,ah.resolver._originValidation(ah.auth).catch(m_=>{ah.reject(m_)}),ah.resolver._isIframeWebStorageSupported(ah.auth,m_=>{m_||ah.reject(h0(ah.auth,"web-storage-unsupported"))}),ah.pollUserCancellation()})()}get eventId(){var ah;return(null===(ah=this.authWindow)||void 0===ah?void 0:ah.associatedEvent)||null}cancel(){this.reject(h0(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nf.currentPopupAction=null}pollUserCancellation(){const ah=()=>{var _m,m_;this.pollId=(null===(m_=null===(_m=this.authWindow)||void 0===_m?void 0:_m.window)||void 0===m_?void 0:m_.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(h0(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(ah,_L.get())};ah()}}return Nf.currentPopupAction=null,Nf})();const kS=new Map;class mj extends aM{constructor(_c,ah,_m=!1){super(_c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],ah,void 0,_m),this.eventId=null}execute(){var _c=()=>super.execute,ah=this;return(0,f.Z)(function*(){let _m=kS.get(ah.auth._key());if(!_m){try{const O_=(yield function NG(Nf,_c){return BO.apply(this,arguments)}(ah.resolver,ah.auth))?yield _c().call(ah):null;_m=()=>Promise.resolve(O_)}catch(m_){_m=()=>Promise.reject(m_)}kS.set(ah.auth._key(),_m)}return ah.bypassAuthState||kS.set(ah.auth._key(),()=>Promise.resolve(null)),_m()})()}onAuthEvent(_c){var ah=()=>super.onAuthEvent,_m=this;return(0,f.Z)(function*(){if("signInViaRedirect"===_c.type)return ah().call(_m,_c);if("unknown"!==_c.type){if(_c.eventId){const m_=yield _m.auth._redirectUserForId(_c.eventId);if(m_)return _m.user=m_,ah().call(_m,_c);_m.resolve(null)}}else _m.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function BO(){return(BO=(0,f.Z)(function*(Nf,_c){const ah=W_(_c),_m=T_(Nf);if(!(yield _m._isAvailable()))return!1;const m_="true"===(yield _m._get(ah));return yield _m._remove(ah),m_})).apply(this,arguments)}function vL(Nf,_c){return w2.apply(this,arguments)}function w2(){return(w2=(0,f.Z)(function*(Nf,_c){return T_(Nf)._set(W_(_c),"true")})).apply(this,arguments)}function d_(Nf,_c){kS.set(Nf._key(),_c)}function T_(Nf){return F_(Nf._redirectPersistence)}function W_(Nf){return nS("pendingRedirect",Nf.config.apiKey,Nf.name)}function P0(){return(P0=(0,f.Z)(function*(Nf,_c,ah){const _m=NI(Nf);H_(Nf,_c,vR);const m_=I2(_m,ah);return yield vL(m_,_m),m_._openRedirect(_m,_c,"signInViaRedirect")})).apply(this,arguments)}function VI(){return(VI=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf);H_(_m.auth,_c,vR);const m_=I2(_m.auth,ah);yield vL(m_,_m.auth);const O_=yield uR(_m);return m_._openRedirect(_m.auth,_c,"reauthViaRedirect",O_)})).apply(this,arguments)}function _S(){return(_S=(0,f.Z)(function*(Nf,_c,ah){const _m=(0,q.m9)(Nf);H_(_m.auth,_c,vR);const m_=I2(_m.auth,ah);yield Y1(!1,_m,_c.providerId),yield vL(m_,_m.auth);const O_=yield uR(_m);return m_._openRedirect(_m.auth,_c,"linkViaRedirect",O_)})).apply(this,arguments)}function VN(){return(VN=(0,f.Z)(function*(Nf,_c){return yield NI(Nf)._initializationPromise,oN(Nf,_c,!1)})).apply(this,arguments)}function oN(Nf,_c){return YR.apply(this,arguments)}function YR(){return(YR=(0,f.Z)(function*(Nf,_c,ah=!1){const _m=NI(Nf),m_=I2(_m,_c),s0=yield new mj(_m,m_,ah).execute();return s0&&!ah&&(delete s0.user._redirectEventId,yield _m._persistUserIfCurrent(s0.user),yield _m._setRedirectUser(null,_c)),s0})).apply(this,arguments)}function uR(Nf){return T2.apply(this,arguments)}function T2(){return(T2=(0,f.Z)(function*(Nf){const _c=tM(`${Nf.uid}:::`);return Nf._redirectEventId=_c,yield Nf.auth._setRedirectUser(Nf),yield Nf.auth._persistUserIfCurrent(Nf),_c})).apply(this,arguments)}class cM{constructor(_c){this.auth=_c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_c){this.consumers.add(_c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_c)&&(this.sendToConsumer(this.queuedRedirectEvent,_c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_c){this.consumers.delete(_c)}onEvent(_c){if(this.hasEventBeenHandled(_c))return!1;let ah=!1;return this.consumers.forEach(_m=>{this.isEventForConsumer(_c,_m)&&(ah=!0,this.sendToConsumer(_c,_m),this.saveEventToCache(_c))}),this.hasHandledPotentialRedirect||!function v5(Nf){switch(Nf.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _j(Nf);default:return!1}}(_c)||(this.hasHandledPotentialRedirect=!0,ah||(this.queuedRedirectEvent=_c,ah=!0)),ah}sendToConsumer(_c,ah){var _m;if(_c.error&&!_j(_c)){const m_=(null===(_m=_c.error.code)||void 0===_m?void 0:_m.split("auth/")[1])||"internal-error";ah.onError(h0(this.auth,m_))}else ah.onAuthEvent(_c)}isEventForConsumer(_c,ah){const _m=null===ah.eventId||!!_c.eventId&&_c.eventId===ah.eventId;return ah.filter.includes(_c.type)&&_m}hasEventBeenHandled(_c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(JR(_c))}saveEventToCache(_c){this.cachedEventUids.add(JR(_c)),this.lastProcessedEventTime=Date.now()}}function JR(Nf){return[Nf.type,Nf.eventId,Nf.sessionId,Nf.tenantId].filter(_c=>_c).join("-")}function _j({type:Nf,error:_c}){return"unknown"===Nf&&"auth/no-auth-event"===(null==_c?void 0:_c.code)}function y5(Nf){return kG.apply(this,arguments)}function kG(){return(kG=(0,f.Z)(function*(Nf,_c={}){return S1(Nf,"GET","/v1/projects",_c)})).apply(this,arguments)}const E5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cU=/^https?/;function I5(){return(I5=(0,f.Z)(function*(Nf){if(Nf.config.emulator)return;const{authorizedDomains:_c}=yield y5(Nf);for(const ah of _c)try{if(IX(ah))return}catch(_m){}Qv(Nf,"unauthorized-domain")})).apply(this,arguments)}function IX(Nf){const _c=D0(),{protocol:ah,hostname:_m}=new URL(_c);if(Nf.startsWith("chrome-extension://")){const s0=new URL(Nf);return""===s0.hostname&&""===_m?"chrome-extension:"===ah&&Nf.replace("chrome-extension://","")===_c.replace("chrome-extension://",""):"chrome-extension:"===ah&&s0.hostname===_m}if(!cU.test(ah))return!1;if(E5.test(Nf))return _m===Nf;const m_=Nf.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m_+"|"+m_+")$","i").test(_m)}const H9=new B1(3e4,6e4);function jj(){const Nf=oS().___jsl;if(null==Nf?void 0:Nf.H)for(const _c of Object.keys(Nf.H))if(Nf.H[_c].r=Nf.H[_c].r||[],Nf.H[_c].L=Nf.H[_c].L||[],Nf.H[_c].r=[...Nf.H[_c].L],Nf.CP)for(let ah=0;ah<Nf.CP.length;ah++)Nf.CP[ah]=null}let w3=null;function R2(Nf){return w3=w3||function b5(Nf){return new Promise((_c,ah)=>{var _m,m_,O_;function s0(){jj(),gapi.load("gapi.iframes",{callback:()=>{_c(gapi.iframes.getContext())},ontimeout:()=>{jj(),ah(h0(Nf,"network-request-failed"))},timeout:H9.get()})}if(null===(m_=null===(_m=oS().gapi)||void 0===_m?void 0:_m.iframes)||void 0===m_?void 0:m_.Iframe)_c(gapi.iframes.getContext());else{if(!(null===(O_=oS().gapi)||void 0===O_?void 0:O_.load)){const N0=_2("iframefcb");return oS()[N0]=()=>{gapi.load?s0():ah(h0(Nf,"network-request-failed"))},jN(`https://apis.google.com/js/api.js?onload=${N0}`).catch(nI=>ah(nI))}s0()}}).catch(_c=>{throw w3=null,_c})}(Nf),w3}const T3=new B1(5e3,15e3),uM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q9(Nf){const _c=Nf.config;P_(_c.authDomain,Nf,"auth-domain-config-required");const ah=_c.emulator?A1(_c,"emulator/auth/iframe"):`https://${Nf.config.authDomain}/__/auth/iframe`,_m={apiKey:_c.apiKey,appName:Nf.name,v:_r.SDK_VERSION},m_=sN.get(Nf.config.apiHost);m_&&(_m.eid=m_);const O_=Nf._getFrameworks();return O_.length&&(_m.fw=O_.join(",")),`${ah}?${(0,q.xO)(_m).slice(1)}`}function O2(){return O2=(0,f.Z)(function*(Nf){const _c=yield R2(Nf),ah=oS().gapi;return P_(ah,Nf,"internal-error"),_c.open({where:document.body,url:q9(Nf),messageHandlersFilter:ah.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uM,dontclear:!0},_m=>new Promise(function(){var m_=(0,f.Z)(function*(O_,s0){yield _m.restyle({setHideOnLeave:!1});const N0=h0(Nf,"network-request-failed"),nI=oS().setTimeout(()=>{s0(N0)},T3.get());function _I(){oS().clearTimeout(nI),O_(_m)}_m.ping(_I).then(_I,()=>{s0(N0)})});return function(O_,s0){return m_.apply(this,arguments)}}()))}),O2.apply(this,arguments)}const $j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lU{constructor(_c){this.window=_c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_c){}}}function AO(Nf,_c,ah,_m,m_,O_){P_(Nf.config.authDomain,Nf,"auth-domain-config-required"),P_(Nf.config.apiKey,Nf,"invalid-api-key");const s0={apiKey:Nf.config.apiKey,appName:Nf.name,authType:ah,redirectUrl:_m,v:_r.SDK_VERSION,eventId:m_};if(_c instanceof vR){_c.setDefaultLanguage(Nf.languageCode),s0.providerId=_c.providerId||"",(0,q.xb)(_c.getCustomParameters())||(s0.customParameters=JSON.stringify(_c.getCustomParameters()));for(const[nI,_I]of Object.entries(O_||{}))s0[nI]=_I}if(_c instanceof RS){const nI=_c.getScopes().filter(_I=>""!==_I);nI.length>0&&(s0.scopes=nI.join(","))}Nf.tenantId&&(s0.tid=Nf.tenantId);const N0=s0;for(const nI of Object.keys(N0))void 0===N0[nI]&&delete N0[nI];return`${function SP({config:Nf}){return Nf.emulator?A1(Nf,"emulator/auth/handler"):`https://${Nf.authDomain}/__/auth/handler`}(Nf)}?${(0,q.xO)(N0).slice(1)}`}const R3="webStorageSupport";class tV extends class Y9{constructor(_c){this.factorId=_c}_process(_c,ah,_m){switch(ah.type){case"enroll":return this._finalizeEnroll(_c,ah.credential,_m);case"signin":return this._finalizeSignIn(_c,ah.credential);default:return Rv("unexpected MultiFactorSessionType")}}}{constructor(_c){super("phone"),this.credential=_c}static _fromCredential(_c){return new tV(_c)}_finalizeEnroll(_c,ah,_m){return function V9(Nf,_c){return S1(Nf,"POST","/v2/accounts/mfaEnrollment:finalize",U1(Nf,_c))}(_c,{idToken:ah,displayName:_m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_c,ah){return function y3(Nf,_c){return S1(Nf,"POST","/v2/accounts/mfaSignIn:finalize",U1(Nf,_c))}(_c,{mfaPendingCredential:ah,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let LG=(()=>{class Nf{constructor(){}static assertion(ah){return tV._fromCredential(ah)}}return Nf.FACTOR_ID="phone",Nf})();var MG="@firebase/auth";class $9{constructor(_c){this.auth=_c,this.internalListeners=new Map}getUid(){var _c;return this.assertAuthConfigured(),(null===(_c=this.auth.currentUser)||void 0===_c?void 0:_c.uid)||null}getToken(_c){var ah=this;return(0,f.Z)(function*(){return ah.assertAuthConfigured(),yield ah.auth._initializationPromise,ah.auth.currentUser?{accessToken:yield ah.auth.currentUser.getIdToken(_c)}:null})()}addAuthTokenListener(_c){if(this.assertAuthConfigured(),this.internalListeners.has(_c))return;const ah=this.auth.onIdTokenChanged(_m=>{var m_;_c((null===(m_=_m)||void 0===m_?void 0:m_.stsTokenManager.accessToken)||null)});this.internalListeners.set(_c,ah),this.updateProactiveRefresh()}removeAuthTokenListener(_c){this.assertAuthConfigured();const ah=this.internalListeners.get(_c);!ah||(this.internalListeners.delete(_c),ah(),this.updateProactiveRefresh())}assertAuthConfigured(){P_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lM(){return window}function cN(){return(cN=(0,f.Z)(function*(Nf,_c,ah){var _m;const{BuildInfo:m_}=lM();E_(_c.sessionId,"AuthEvent did not contain a session ID");const O_=yield bX(_c.sessionId),s0={};return pO()?s0.ibi=m_.packageName:eT()?s0.apn=m_.packageName:Qv(Nf,"operation-not-supported-in-this-environment"),m_.displayName&&(s0.appDisplayName=m_.displayName),s0.sessionId=O_,AO(Nf,ah,_c.type,void 0,null!==(_m=_c.eventId)&&void 0!==_m?_m:void 0,s0)})).apply(this,arguments)}function D3(){return(D3=(0,f.Z)(function*(Nf){const{BuildInfo:_c}=lM(),ah={};pO()?ah.iosBundleId=_c.packageName:eT()?ah.androidPackageName=_c.packageName:Qv(Nf,"operation-not-supported-in-this-environment"),yield y5(Nf,ah)})).apply(this,arguments)}function eH(){return(eH=(0,f.Z)(function*(Nf,_c,ah){const{cordova:_m}=lM();let m_=()=>{};try{yield new Promise((O_,s0)=>{let N0=null;function nI(){var QI;O_();const uS=null===(QI=_m.plugins.browsertab)||void 0===QI?void 0:QI.close;"function"==typeof uS&&uS(),"function"==typeof(null==ah?void 0:ah.close)&&ah.close()}function _I(){N0||(N0=window.setTimeout(()=>{s0(h0(Nf,"redirect-cancelled-by-user"))},2e3))}function GI(){"visible"===(null==document?void 0:document.visibilityState)&&_I()}_c.addPassiveListener(nI),document.addEventListener("resume",_I,!1),eT()&&document.addEventListener("visibilitychange",GI,!1),m_=()=>{_c.removePassiveListener(nI),document.removeEventListener("resume",_I,!1),document.removeEventListener("visibilitychange",GI,!1),N0&&window.clearTimeout(N0)}})}finally{m_()}})).apply(this,arguments)}function bX(Nf){return k3.apply(this,arguments)}function k3(){return(k3=(0,f.Z)(function*(Nf){const _c=BG(Nf),ah=yield crypto.subtle.digest("SHA-256",_c);return Array.from(new Uint8Array(ah)).map(m_=>m_.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function BG(Nf){if(E_(/[0-9a-zA-Z]+/.test(Nf),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Nf);const _c=new ArrayBuffer(Nf.length),ah=new Uint8Array(_c);for(let _m=0;_m<Nf.length;_m++)ah[_m]=Nf.charCodeAt(_m);return ah}!function Z9(Nf){(0,_r._registerComponent)(new _l.wA("auth",(_c,{options:ah})=>{const _m=_c.getProvider("app").getImmediate(),m_=_c.getProvider("heartbeat"),{apiKey:O_,authDomain:s0}=_m.options;return((N0,nI)=>{P_(O_&&!O_.includes(":"),"invalid-api-key",{appName:N0.name}),P_(!(null==s0?void 0:s0.includes(":")),"argument-error",{appName:N0.name});const _I={apiKey:O_,authDomain:s0,clientPlatform:Nf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HL(Nf)},GI=new gI(N0,nI,_I);return function z_(Nf,_c){const ah=(null==_c?void 0:_c.persistence)||[],_m=(Array.isArray(ah)?ah:[ah]).map(F_);(null==_c?void 0:_c.errorMap)&&Nf._updateErrorMap(_c.errorMap),Nf._initializeWithPersistence(_m,null==_c?void 0:_c.popupRedirectResolver)}(GI,ah),GI})(_m,m_)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_c,ah,_m)=>{_c.getProvider("auth-internal").initialize()})),(0,_r._registerComponent)(new _l.wA("auth-internal",_c=>{const ah=NI(_c.getProvider("auth").getImmediate());return new $9(ah)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,_r.registerVersion)(MG,"0.20.1",function O3(Nf){switch(Nf){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Nf)),(0,_r.registerVersion)(MG,"0.20.1","esm2017")}("Browser");class P3 extends cM{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(_c=>{this.resolveInialized=_c})}addPassiveListener(_c){this.passiveListeners.add(_c)}removePassiveListener(_c){this.passiveListeners.delete(_c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(_c){return this.resolveInialized(),this.passiveListeners.forEach(ah=>ah(_c)),super.onEvent(_c)}initialized(){var _c=this;return(0,f.Z)(function*(){yield _c.initPromise})()}}function hU(Nf){return oV.apply(this,arguments)}function oV(){return(oV=(0,f.Z)(function*(Nf){const _c=yield uN()._get(x3(Nf));return _c&&(yield uN()._remove(x3(Nf))),_c})).apply(this,arguments)}function sV(){const Nf=[],_c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ah=0;ah<20;ah++){const _m=Math.floor(Math.random()*_c.length);Nf.push(_c.charAt(_m))}return Nf.join("")}function uN(){return F_(BT)}function x3(Nf){return nS("authEvent",Nf.config.apiKey,Nf.name)}function $R(Nf){if(!(null==Nf?void 0:Nf.includes("?")))return{};const[_c,...ah]=Nf.split("?");return(0,q.zd)(ah.join("?"))}function fU(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:h0("no-auth-event")}}function pU(){var Nf;return(null===(Nf=null==self?void 0:self.location)||void 0===Nf?void 0:Nf.protocol)||null}function tH(Nf=(0,q.z$)()){return!("file:"!==pU()&&"ionic:"!==pU()||!Nf.toLowerCase().match(/iphone|ipad|ipod|android/))}function VG(){try{const Nf=self.localStorage,_c=tM();if(Nf)return Nf.setItem(_c,"1"),Nf.removeItem(_c),!function D5(Nf=(0,q.z$)()){return function gU(){return(0,q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function vS(Nf=(0,q.z$)()){return/Edge\/\d+/.test(Nf)}(Nf)}()||(0,q.hl)()}catch(Nf){return cV()&&(0,q.hl)()}return!1}function cV(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function xS(){return(function FG(){return"http:"===pU()||"https:"===pU()}()||(0,q.ru)()||tH())&&!function jG(){return(0,q.b$)()||(0,q.UG)()}()&&VG()&&!cV()}function L3(){return tH()&&"undefined"!=typeof document}function lV(){return(lV=(0,f.Z)(function*(){return!!L3()&&new Promise(Nf=>{const _c=setTimeout(()=>{Nf(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(_c),Nf(!0)})})})).apply(this,arguments)}const lR={LOCAL:"local",NONE:"none",SESSION:"session"},bL=P_,GG="persistence";function hM(Nf){return QG.apply(this,arguments)}function QG(){return(QG=(0,f.Z)(function*(Nf){yield Nf._initializationPromise;const _c=DP(),ah=nS(GG,Nf.config.apiKey,Nf.name);_c&&_c.setItem(ah,Nf._getPersistence())})).apply(this,arguments)}function DP(){var Nf;try{return(null===(Nf=function UY(){return"undefined"!=typeof window?window:null}())||void 0===Nf?void 0:Nf.sessionStorage)||null}catch(_c){return null}}const NP=P_;class ZR{constructor(){this.browserResolver=F_(class z9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UT,this._completeRedirectFn=oN,this._overrideRedirectResult=d_}_openPopup(_c,ah,_m,m_){var O_=this;return(0,f.Z)(function*(){var s0;E_(null===(s0=O_.eventManagers[_c._key()])||void 0===s0?void 0:s0.manager,"_initialize() not called before _openPopup()");const N0=AO(_c,ah,_m,D0(),m_);return function dU(Nf,_c,ah,_m=500,m_=600){const O_=Math.max((window.screen.availHeight-m_)/2,0).toString(),s0=Math.max((window.screen.availWidth-_m)/2,0).toString();let N0="";const nI=Object.assign(Object.assign({},$j),{width:_m.toString(),height:m_.toString(),top:O_,left:s0}),_I=(0,q.z$)().toLowerCase();ah&&(N0=WM(_I)?"_blank":ah),qM(_I)&&(_c=_c||"http://localhost",nI.scrollbars="yes");const GI=Object.entries(nI).reduce((uS,[FO,M3])=>`${uS}${FO}=${M3},`,"");if(function l2(Nf=(0,q.z$)()){var _c;return pO(Nf)&&!!(null===(_c=window.navigator)||void 0===_c?void 0:_c.standalone)}(_I)&&"_self"!==N0)return function PG(Nf,_c){const ah=document.createElement("a");ah.href=Nf,ah.target=_c;const _m=document.createEvent("MouseEvent");_m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),ah.dispatchEvent(_m)}(_c||"",N0),new lU(null);const QI=window.open(_c||"",N0,GI);P_(QI,Nf,"popup-blocked");try{QI.focus()}catch(uS){}return new lU(QI)}(_c,N0,tM())})()}_openRedirect(_c,ah,_m,m_){var O_=this;return(0,f.Z)(function*(){return yield O_._originValidation(_c),function AP(Nf){oS().location.href=Nf}(AO(_c,ah,_m,D0(),m_)),new Promise(()=>{})})()}_initialize(_c){const ah=_c._key();if(this.eventManagers[ah]){const{manager:m_,promise:O_}=this.eventManagers[ah];return m_?Promise.resolve(m_):(E_(O_,"If manager is not set, promise should be"),O_)}const _m=this.initAndGetManager(_c);return this.eventManagers[ah]={promise:_m},_m.catch(()=>{delete this.eventManagers[ah]}),_m}initAndGetManager(_c){var ah=this;return(0,f.Z)(function*(){const _m=yield function W9(Nf){return O2.apply(this,arguments)}(_c),m_=new cM(_c);return _m.register("authEvent",O_=>(P_(null==O_?void 0:O_.authEvent,_c,"invalid-auth-event"),{status:m_.onEvent(O_.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),ah.eventManagers[_c._key()]={manager:m_},ah.iframes[_c._key()]=_m,m_})()}_isIframeWebStorageSupported(_c,ah){this.iframes[_c._key()].send(R3,{type:R3},m_=>{var O_;const s0=null===(O_=null==m_?void 0:m_[0])||void 0===O_?void 0:O_[R3];void 0!==s0&&ah(!!s0),Qv(_c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_c){const ah=_c._key();return this.originValidationPromises[ah]||(this.originValidationPromises[ah]=function kj(Nf){return I5.apply(this,arguments)}(_c)),this.originValidationPromises[ah]}get _shouldInitProactively(){return iP()||SN()||pO()}}),this.cordovaResolver=F_(class S5{constructor(){this._redirectPersistence=UT,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=oN,this._overrideRedirectResult=d_}_initialize(_c){var ah=this;return(0,f.Z)(function*(){const _m=_c._key();let m_=ah.eventManagers.get(_m);return m_||(m_=new P3(_c),ah.eventManagers.set(_m,m_),ah.attachCallbackListeners(_c,m_)),m_})()}_openPopup(_c){Qv(_c,"operation-not-supported-in-this-environment")}_openRedirect(_c,ah,_m,m_){var O_=this;return(0,f.Z)(function*(){!function N3(Nf){var _c,ah,_m,m_,O_,s0,N0,nI,_I,GI;const QI=lM();P_("function"==typeof(null===(_c=null==QI?void 0:QI.universalLinks)||void 0===_c?void 0:_c.subscribe),Nf,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),P_(void 0!==(null===(ah=null==QI?void 0:QI.BuildInfo)||void 0===ah?void 0:ah.packageName),Nf,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),P_("function"==typeof(null===(O_=null===(m_=null===(_m=null==QI?void 0:QI.cordova)||void 0===_m?void 0:_m.plugins)||void 0===m_?void 0:m_.browsertab)||void 0===O_?void 0:O_.openUrl),Nf,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P_("function"==typeof(null===(nI=null===(N0=null===(s0=null==QI?void 0:QI.cordova)||void 0===s0?void 0:s0.plugins)||void 0===N0?void 0:N0.browsertab)||void 0===nI?void 0:nI.isAvailable),Nf,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P_("function"==typeof(null===(GI=null===(_I=null==QI?void 0:QI.cordova)||void 0===_I?void 0:_I.InAppBrowser)||void 0===GI?void 0:GI.open),Nf,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(_c);const s0=yield O_._initialize(_c);yield s0.initialized(),s0.resetRedirect(),function c_(){kS.clear()}(),yield O_._originValidation(_c);const N0=function iV(Nf,_c,ah=null){return{type:_c,eventId:ah,urlResponse:null,sessionId:sV(),postBody:null,tenantId:Nf.tenantId,error:h0(Nf,"no-auth-event")}}(_c,_m,m_);yield function UG(Nf,_c){return uN()._set(x3(Nf),_c)}(_c,N0);const nI=yield function w5(Nf,_c,ah){return cN.apply(this,arguments)}(_c,N0,ah),_I=yield function rV(Nf){const{cordova:_c}=lM();return new Promise(ah=>{_c.plugins.browsertab.isAvailable(_m=>{let m_=null;_m?_c.plugins.browsertab.openUrl(Nf):m_=_c.InAppBrowser.open(Nf,function W6(Nf=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(Nf)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(Nf)}()?"_blank":"_system","location=yes"),ah(m_)})})}(nI);return function IL(Nf,_c,ah){return eH.apply(this,arguments)}(_c,s0,_I)})()}_isIframeWebStorageSupported(_c,ah){throw new Error("Method not implemented.")}_originValidation(_c){const ah=_c._key();return this.originValidationPromises[ah]||(this.originValidationPromises[ah]=function nV(Nf){return D3.apply(this,arguments)}(_c)),this.originValidationPromises[ah]}attachCallbackListeners(_c,ah){const{universalLinks:_m,handleOpenURL:m_,BuildInfo:O_}=lM(),s0=setTimeout((0,f.Z)(function*(){yield hU(_c),ah.onEvent(fU())}),500),N0=function(){var GI=(0,f.Z)(function*(QI){clearTimeout(s0);const uS=yield hU(_c);let FO=null;uS&&(null==QI?void 0:QI.url)&&(FO=function LY(Nf,_c){var ah,_m;const m_=function dM(Nf){const _c=$R(Nf),ah=_c.link?decodeURIComponent(_c.link):void 0,_m=$R(ah).link,m_=_c.deep_link_id?decodeURIComponent(_c.deep_link_id):void 0;return $R(m_).link||m_||_m||ah||Nf}(_c);if(m_.includes("/__/auth/callback")){const O_=$R(m_),s0=O_.firebaseError?function RP(Nf){try{return JSON.parse(Nf)}catch(_c){return null}}(decodeURIComponent(O_.firebaseError)):null,N0=null===(_m=null===(ah=null==s0?void 0:s0.code)||void 0===ah?void 0:ah.split("auth/"))||void 0===_m?void 0:_m[1],nI=N0?h0(N0):null;return nI?{type:Nf.type,eventId:Nf.eventId,tenantId:Nf.tenantId,error:nI,urlResponse:null,sessionId:null,postBody:null}:{type:Nf.type,eventId:Nf.eventId,tenantId:Nf.tenantId,sessionId:Nf.sessionId,urlResponse:m_,postBody:null}}return null}(uS,QI.url)),ah.onEvent(FO||fU())});return function(uS){return GI.apply(this,arguments)}}();void 0!==_m&&"function"==typeof _m.subscribe&&_m.subscribe(null,N0);const nI=m_,_I=`${O_.packageName.toLowerCase()}://`;lM().handleOpenURL=function(){var GI=(0,f.Z)(function*(QI){if(QI.toLowerCase().startsWith(_I)&&N0({url:QI}),"function"==typeof nI)try{nI(QI)}catch(uS){console.error(uS)}});return function(QI){return GI.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=UT,this._completeRedirectFn=oN,this._overrideRedirectResult=d_}_initialize(_c){var ah=this;return(0,f.Z)(function*(){return yield ah.selectUnderlyingResolver(),ah.assertedUnderlyingResolver._initialize(_c)})()}_openPopup(_c,ah,_m,m_){var O_=this;return(0,f.Z)(function*(){return yield O_.selectUnderlyingResolver(),O_.assertedUnderlyingResolver._openPopup(_c,ah,_m,m_)})()}_openRedirect(_c,ah,_m,m_){var O_=this;return(0,f.Z)(function*(){return yield O_.selectUnderlyingResolver(),O_.assertedUnderlyingResolver._openRedirect(_c,ah,_m,m_)})()}_isIframeWebStorageSupported(_c,ah){this.assertedUnderlyingResolver._isIframeWebStorageSupported(_c,ah)}_originValidation(_c){return this.assertedUnderlyingResolver._originValidation(_c)}get _shouldInitProactively(){return L3()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return NP(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var _c=this;return(0,f.Z)(function*(){if(_c.underlyingResolver)return;const ah=yield function uV(){return lV.apply(this,arguments)}();_c.underlyingResolver=ah?_c.cordovaResolver:_c.browserResolver})()}}function hV(Nf){return Nf.unwrap()}function qG(Nf){return nH(Nf)}function nH(Nf){const{_tokenResponse:_c}=Nf instanceof q.ZR?Nf.customData:Nf;if(!_c)return null;if(!(Nf instanceof q.ZR)&&"temporaryProof"in _c&&"phoneNumber"in _c)return E2.credentialFromResult(Nf);const ah=_c.providerId;if(!ah||"password"===ah)return null;let _m;switch(ah){case"google.com":_m=c3;break;case"facebook.com":_m=WL;break;case"github.com":_m=SG;break;case"twitter.com":_m=e5;break;default:const{oauthIdToken:m_,oauthAccessToken:O_,oauthTokenSecret:s0,pendingToken:N0,nonce:nI}=_c;return O_||s0||m_||N0?N0?ah.startsWith("saml.")?eN._create(ah,N0):h2._fromParams({providerId:ah,signInMethod:ah,pendingToken:N0,idToken:m_,accessToken:O_}):new iS(ah).credential({idToken:m_,accessToken:O_,rawNonce:nI}):null}return Nf instanceof q.ZR?_m.credentialFromError(Nf):_m.credentialFromResult(Nf)}function UO(Nf,_c){return _c.catch(ah=>{throw ah instanceof q.ZR&&function CL(Nf,_c){var ah;const _m=null===(ah=_c.customData)||void 0===ah?void 0:ah._tokenResponse;if("auth/multi-factor-auth-required"===_c.code)_c.resolver=new rH(Nf,function DS(Nf,_c){var ah;const _m=(0,q.m9)(Nf),m_=_c;return P_(_c.customData.operationType,_m,"argument-error"),P_(null===(ah=m_.customData._serverResponse)||void 0===ah?void 0:ah.mfaPendingCredential,_m,"argument-error"),nN._fromError(_m,m_)}(Nf,_c));else if(_m){const m_=nH(_c),O_=_c;m_&&(O_.credential=m_,O_.tenantId=_m.tenantId||void 0,O_.email=_m.email||void 0,O_.phoneNumber=_m.phoneNumber||void 0)}}(Nf,ah),ah}).then(ah=>{const m_=ah.user;return{operationType:ah.operationType,credential:qG(ah),additionalUserInfo:KS(ah),user:_O.getOrCreate(m_)}})}function N5(Nf,_c){return k5.apply(this,arguments)}function k5(){return(k5=(0,f.Z)(function*(Nf,_c){const ah=yield _c;return{verificationId:ah.verificationId,confirm:_m=>UO(Nf,ah.confirm(_m))}})).apply(this,arguments)}class rH{constructor(_c,ah){this.resolver=ah,this.auth=function HG(Nf){return Nf.wrapped()}(_c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(_c){return UO(hV(this.auth),this.resolver.resolveSignIn(_c))}}class _O{constructor(_c){this._delegate=_c,this.multiFactor=function d5(Nf){const _c=(0,q.m9)(Nf);return ZL.has(_c)||ZL.set(_c,gP._fromUser(_c)),ZL.get(_c)}(_c)}static getOrCreate(_c){return _O.USER_MAP.has(_c)||_O.USER_MAP.set(_c,new _O(_c)),_O.USER_MAP.get(_c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(_c){return this._delegate.getIdTokenResult(_c)}getIdToken(_c){return this._delegate.getIdToken(_c)}linkAndRetrieveDataWithCredential(_c){return this.linkWithCredential(_c)}linkWithCredential(_c){var ah=this;return(0,f.Z)(function*(){return UO(ah.auth,aR(ah._delegate,_c))})()}linkWithPhoneNumber(_c,ah){var _m=this;return(0,f.Z)(function*(){return N5(_m.auth,function b3(Nf,_c,ah){return m5.apply(this,arguments)}(_m._delegate,_c,ah))})()}linkWithPopup(_c){var ah=this;return(0,f.Z)(function*(){return UO(ah.auth,function A5(Nf,_c,ah){return iN.apply(this,arguments)}(ah._delegate,_c,ZR))})()}linkWithRedirect(_c){var ah=this;return(0,f.Z)(function*(){return yield hM(NI(ah.auth)),function q1(Nf,_c,ah){return function _C(Nf,_c,ah){return _S.apply(this,arguments)}(Nf,_c,ah)}(ah._delegate,_c,ZR)})()}reauthenticateAndRetrieveDataWithCredential(_c){return this.reauthenticateWithCredential(_c)}reauthenticateWithCredential(_c){var ah=this;return(0,f.Z)(function*(){return UO(ah.auth,p2(ah._delegate,_c))})()}reauthenticateWithPhoneNumber(_c,ah){return N5(this.auth,function DG(Nf,_c,ah){return ER.apply(this,arguments)}(this._delegate,_c,ah))}reauthenticateWithPopup(_c){return UO(this.auth,function MO(Nf,_c,ah){return C3.apply(this,arguments)}(this._delegate,_c,ZR))}reauthenticateWithRedirect(_c){var ah=this;return(0,f.Z)(function*(){return yield hM(NI(ah.auth)),function yI(Nf,_c,ah){return function SI(Nf,_c,ah){return VI.apply(this,arguments)}(Nf,_c,ah)}(ah._delegate,_c,ZR)})()}sendEmailVerification(_c){return function OS(Nf,_c){return J4.apply(this,arguments)}(this._delegate,_c)}unlink(_c){var ah=this;return(0,f.Z)(function*(){return yield function n5(Nf,_c){return tT.apply(this,arguments)}(ah._delegate,_c),ah})()}updateEmail(_c){return function i5(Nf,_c){return nU((0,q.m9)(Nf),_c,null)}(this._delegate,_c)}updatePassword(_c){return function o5(Nf,_c){return nU((0,q.m9)(Nf),null,_c)}(this._delegate,_c)}updatePhoneNumber(_c){return function sM(Nf,_c){return y2.apply(this,arguments)}(this._delegate,_c)}updateProfile(_c){return function JL(Nf,_c){return A3.apply(this,arguments)}(this._delegate,_c)}verifyBeforeUpdateEmail(_c,ah){return function p3(Nf,_c,ah){return g3.apply(this,arguments)}(this._delegate,_c,ah)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_O.USER_MAP=new WeakMap;const fV=P_;let WG=(()=>{class Nf{constructor(ah,_m){if(this.app=ah,_m.isInitialized())return this._delegate=_m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m_}=ah.options;fV(m_,"invalid-api-key",{appName:ah.name}),fV(m_,"invalid-api-key",{appName:ah.name});const O_="undefined"!=typeof window?ZR:void 0;this._delegate=_m.initialize({options:{persistence:iH(m_,ah.name),popupRedirectResolver:O_}}),this._delegate._updateErrorMap(S_),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_O.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ah){this._delegate.languageCode=ah}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ah){this._delegate.tenantId=ah}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ah,_m){!function HR(Nf,_c,ah){const _m=NI(Nf);P_(_m._canInitEmulator,_m,"emulator-config-failed"),P_(/^https?:\/\//.test(_c),_m,"invalid-emulator-scheme");const m_=!!(null==ah?void 0:ah.disableWarnings),O_=RN(_c),{host:s0,port:N0}=function E1(Nf){const _c=RN(Nf),ah=/(\/\/)?([^?#/]+)/.exec(Nf.substr(_c.length));if(!ah)return{host:"",port:null};const _m=ah[2].split("@").pop()||"",m_=/^(\[[^\]]+\])(:|$)/.exec(_m);if(m_){const O_=m_[1];return{host:O_,port:ON(_m.substr(O_.length+1))}}{const[O_,s0]=_m.split(":");return{host:O_,port:ON(s0)}}}(_c);_m.config.emulator={url:`${O_}//${s0}${null===N0?"":`:${N0}`}/`},_m.settings.appVerificationDisabledForTesting=!0,_m.emulatorConfig=Object.freeze({host:s0,port:N0,protocol:O_.replace(":",""),options:Object.freeze({disableWarnings:m_})}),m_||function mT(){function Nf(){const _c=document.createElement("p"),ah=_c.style;_c.innerText="Running in emulator mode. Do not use with production credentials.",ah.position="fixed",ah.width="100%",ah.backgroundColor="#ffffff",ah.border=".1em solid #000000",ah.color="#b50000",ah.bottom="0px",ah.left="0px",ah.margin="0px",ah.zIndex="10000",ah.textAlign="center",_c.classList.add("firebase-emulator-warning"),document.body.appendChild(_c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",Nf):Nf())}()}(this._delegate,ah,_m)}applyActionCode(ah){return function zL(Nf,_c){return j0.apply(this,arguments)}(this._delegate,ah)}checkActionCode(ah){return R1(this._delegate,ah)}confirmPasswordReset(ah,_m){return function d3(Nf,_c,ah){return h3.apply(this,arguments)}(this._delegate,ah,_m)}createUserWithEmailAndPassword(ah,_m){var m_=this;return(0,f.Z)(function*(){return UO(m_._delegate,function tN(Nf,_c,ah){return NO.apply(this,arguments)}(m_._delegate,ah,_m))})()}fetchProvidersForEmail(ah){return this.fetchSignInMethodsForEmail(ah)}fetchSignInMethodsForEmail(ah){return function g2(Nf,_c){return fP.apply(this,arguments)}(this._delegate,ah)}isSignInWithEmailLink(ah){return function r5(Nf,_c){const ah=a3.parseLink(_c);return"EMAIL_SIGNIN"===(null==ah?void 0:ah.operation)}(0,ah)}getRedirectResult(){var ah=this;return(0,f.Z)(function*(){fV(xS(),ah._delegate,"operation-not-supported-in-this-environment");const _m=yield function PS(Nf,_c){return VN.apply(this,arguments)}(ah._delegate,ZR);return _m?UO(ah._delegate,Promise.resolve(_m)):{credential:null,user:null}})()}addFrameworkForLogging(ah){!function O5(Nf,_c){NI(Nf)._logFramework(_c)}(this._delegate,ah)}onAuthStateChanged(ah,_m,m_){const{next:O_,error:s0,complete:N0}=KG(ah,_m,m_);return this._delegate.onAuthStateChanged(O_,s0,N0)}onIdTokenChanged(ah,_m,m_){const{next:O_,error:s0,complete:N0}=KG(ah,_m,m_);return this._delegate.onIdTokenChanged(O_,s0,N0)}sendSignInLinkToEmail(ah,_m){return function MN(Nf,_c,ah){return Y4.apply(this,arguments)}(this._delegate,ah,_m)}sendPasswordResetEmail(ah,_m){return function K4(Nf,_c,ah){return eU.apply(this,arguments)}(this._delegate,ah,_m||void 0)}setPersistence(ah){var _m=this;return(0,f.Z)(function*(){let m_;switch(function OP(Nf,_c){bL(Object.values(lR).includes(_c),Nf,"invalid-persistence-type"),(0,q.b$)()?bL(_c!==lR.SESSION,Nf,"unsupported-persistence-type"):(0,q.UG)()?bL(_c===lR.NONE,Nf,"unsupported-persistence-type"):cV()?bL(_c===lR.NONE||_c===lR.LOCAL&&(0,q.hl)(),Nf,"unsupported-persistence-type"):bL(_c===lR.NONE||VG(),Nf,"unsupported-persistence-type")}(_m._delegate,ah),ah){case lR.SESSION:m_=UT;break;case lR.LOCAL:m_=(yield F_(gL)._isAvailable())?gL:BT;break;case lR.NONE:m_=_b;break;default:return Qv("argument-error",{appName:_m._delegate.name})}return _m._delegate.setPersistence(m_)})()}signInAndRetrieveDataWithCredential(ah){return this.signInWithCredential(ah)}signInAnonymously(){return UO(this._delegate,function t5(Nf){return u3.apply(this,arguments)}(this._delegate))}signInWithCredential(ah){return UO(this._delegate,LT(this._delegate,ah))}signInWithCustomToken(ah){return UO(this._delegate,function KL(Nf,_c){return zI.apply(this,arguments)}(this._delegate,ah))}signInWithEmailAndPassword(ah,_m){return UO(this._delegate,function z4(Nf,_c,ah){return LT((0,q.m9)(Nf),X6.credential(_c,ah))}(this._delegate,ah,_m))}signInWithEmailLink(ah,_m){return UO(this._delegate,function j9(Nf,_c,ah){return kO.apply(this,arguments)}(this._delegate,ah,_m))}signInWithPhoneNumber(ah,_m){return N5(this._delegate,function AS(Nf,_c,ah){return aU.apply(this,arguments)}(this._delegate,ah,_m))}signInWithPopup(ah){var _m=this;return(0,f.Z)(function*(){return fV(xS(),_m._delegate,"operation-not-supported-in-this-environment"),UO(_m._delegate,function Q9(Nf,_c,ah){return C2.apply(this,arguments)}(_m._delegate,ah,ZR))})()}signInWithRedirect(ah){var _m=this;return(0,f.Z)(function*(){return fV(xS(),_m._delegate,"operation-not-supported-in-this-environment"),yield hM(_m._delegate),function p0(Nf,_c,ah){return function y0(Nf,_c,ah){return P0.apply(this,arguments)}(Nf,_c,ah)}(_m._delegate,ah,ZR)})()}updateCurrentUser(ah){return this._delegate.updateCurrentUser(ah)}verifyPasswordResetCode(ah){return function ST(Nf,_c){return f3.apply(this,arguments)}(this._delegate,ah)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Nf.Persistence=lR,Nf})();function KG(Nf,_c,ah){let _m=Nf;"function"!=typeof Nf&&({next:_m,error:_c,complete:ah}=Nf);const m_=_m;return{next:s0=>m_(s0&&_O.getOrCreate(s0)),error:_c,complete:ah}}function iH(Nf,_c){const ah=function dV(Nf,_c){const ah=DP();if(!ah)return[];const _m=nS(GG,Nf,_c);switch(ah.getItem(_m)){case lR.NONE:return[_b];case lR.LOCAL:return[gL,UT];case lR.SESSION:return[UT];default:return[]}}(Nf,_c);if("undefined"!=typeof self&&!ah.includes(gL)&&ah.push(gL),"undefined"!=typeof window)for(const _m of[BT,UT])ah.includes(_m)||ah.push(_m);return ah.includes(_b)||ah.push(_b),ah}class P5{constructor(){this.providerId="phone",this._delegate=new E2(hV(k.Z.auth()))}static credential(_c,ah){return E2.credential(_c,ah)}verifyPhoneNumber(_c,ah){return this._delegate.verifyPhoneNumber(_c,ah)}unwrap(){return this._delegate}}P5.PHONE_SIGN_IN_METHOD=E2.PHONE_SIGN_IN_METHOD,P5.PROVIDER_ID=E2.PROVIDER_ID;const oH=P_;class FY{constructor(_c,ah,_m=k.Z.app()){var m_;oH(null===(m_=_m.options)||void 0===m_?void 0:m_.apiKey,"invalid-api-key",{appName:_m.name}),this._delegate=new X4(_c,ah,_m.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function GN(Nf){Nf.INTERNAL.registerComponent(new _l.wA("auth-compat",_c=>{const ah=_c.getProvider("app-compat").getImmediate(),_m=_c.getProvider("auth");return new WG(ah,_m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:X6,FacebookAuthProvider:WL,GithubAuthProvider:SG,GoogleAuthProvider:c3,OAuthProvider:iS,SAMLAuthProvider:qS,PhoneAuthProvider:P5,PhoneMultiFactorGenerator:LG,RecaptchaVerifier:FY,TwitterAuthProvider:e5,Auth:WG,AuthCredential:RO,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Nf.registerVersion("@firebase/auth-compat","0.2.14")}(k.Z)},8306:(h,l,g)=>{"use strict";g.d(l,{y:()=>_A});var f=g(930),k=g(727),q=g(8822),_r=g(4671);var _l=g(2416),bh=g(576),n_=g(2806);let _A=(()=>{class v_{constructor(x_){x_&&(this._subscribe=x_)}lift(x_){const B_=new v_;return B_.source=this,B_.operator=x_,B_}subscribe(x_,B_,Q_){const _0=function I_(v_){return v_&&v_ instanceof f.Lv||function p_(v_){return v_&&(0,bh.m)(v_.next)&&(0,bh.m)(v_.error)&&(0,bh.m)(v_.complete)}(v_)&&(0,k.Nn)(v_)}(x_)?x_:new f.Hp(x_,B_,Q_);return(0,n_.x)(()=>{const{operator:c0,source:Qv}=this;_0.add(c0?c0.call(_0,Qv):Qv?this._subscribe(_0):this._trySubscribe(_0))}),_0}_trySubscribe(x_){try{return this._subscribe(x_)}catch(B_){x_.error(B_)}}forEach(x_,B_){return new(B_=r_(B_))((Q_,_0)=>{const c0=new f.Hp({next:Qv=>{try{x_(Qv)}catch(h0){_0(h0),c0.unsubscribe()}},error:_0,complete:Q_});this.subscribe(c0)})}_subscribe(x_){var B_;return null===(B_=this.source)||void 0===B_?void 0:B_.subscribe(x_)}[q.L](){return this}pipe(...x_){return function _a(v_){return 0===v_.length?_r.y:1===v_.length?v_[0]:function(x_){return v_.reduce((B_,Q_)=>Q_(B_),x_)}}(x_)(this)}toPromise(x_){return new(x_=r_(x_))((B_,Q_)=>{let _0;this.subscribe(c0=>_0=c0,c0=>Q_(c0),()=>B_(_0))})}}return v_.create=S_=>new v_(S_),v_})();function r_(v_){var S_;return null!==(S_=null!=v_?v_:_l.v.Promise)&&void 0!==S_?S_:Promise}},7579:(h,l,g)=>{"use strict";g.d(l,{x:()=>_l});var f=g(8306),k=g(727);const _r=(0,g(3888).d)(n_=>function(){n_(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _s=g(8737),_a=g(2806);let _l=(()=>{class n_ extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r_){const p_=new bh(this,this);return p_.operator=r_,p_}_throwIfClosed(){if(this.closed)throw new _r}next(r_){(0,_a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const p_ of this.currentObservers)p_.next(r_)}})}error(r_){(0,_a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r_;const{observers:p_}=this;for(;p_.length;)p_.shift().error(r_)}})}complete(){(0,_a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r_}=this;for(;r_.length;)r_.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r_;return(null===(r_=this.observers)||void 0===r_?void 0:r_.length)>0}_trySubscribe(r_){return this._throwIfClosed(),super._trySubscribe(r_)}_subscribe(r_){return this._throwIfClosed(),this._checkFinalizedStatuses(r_),this._innerSubscribe(r_)}_innerSubscribe(r_){const{hasError:p_,isStopped:I_,observers:v_}=this;return p_||I_?k.Lc:(this.currentObservers=null,v_.push(r_),new k.w0(()=>{this.currentObservers=null,(0,_s.P)(v_,r_)}))}_checkFinalizedStatuses(r_){const{hasError:p_,thrownError:I_,isStopped:v_}=this;p_?r_.error(I_):v_&&r_.complete()}asObservable(){const r_=new f.y;return r_.source=this,r_}}return n_.create=(_A,r_)=>new bh(_A,r_),n_})();class bh extends _l{constructor(_A,r_){super(),this.destination=_A,this.source=r_}next(_A){var r_,p_;null===(p_=null===(r_=this.destination)||void 0===r_?void 0:r_.next)||void 0===p_||p_.call(r_,_A)}error(_A){var r_,p_;null===(p_=null===(r_=this.destination)||void 0===r_?void 0:r_.error)||void 0===p_||p_.call(r_,_A)}complete(){var _A,r_;null===(r_=null===(_A=this.destination)||void 0===_A?void 0:_A.complete)||void 0===r_||r_.call(_A)}_subscribe(_A){var r_,p_;return null!==(p_=null===(r_=this.source)||void 0===r_?void 0:r_.subscribe(_A))&&void 0!==p_?p_:k.Lc}}},930:(h,l,g)=>{"use strict";g.d(l,{Hp:()=>x_,Lv:()=>p_});var f=g(576),k=g(727),q=g(2416),_r=g(7849),_s=g(5032);const _a=n_("C",void 0,void 0);function n_(Qv,h0,E0){return{kind:Qv,value:h0,error:E0}}var _A=g(3410),r_=g(2806);class p_ extends k.w0{constructor(h0){super(),this.isStopped=!1,h0?(this.destination=h0,(0,k.Nn)(h0)&&h0.add(this)):this.destination=c0}static create(h0,E0,H_){return new x_(h0,E0,H_)}next(h0){this.isStopped?_0(function bh(Qv){return n_("N",Qv,void 0)}(h0),this):this._next(h0)}error(h0){this.isStopped?_0(function _l(Qv){return n_("E",void 0,Qv)}(h0),this):(this.isStopped=!0,this._error(h0))}complete(){this.isStopped?_0(_a,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(h0){this.destination.next(h0)}_error(h0){try{this.destination.error(h0)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const I_=Function.prototype.bind;function v_(Qv,h0){return I_.call(Qv,h0)}class S_{constructor(h0){this.partialObserver=h0}next(h0){const{partialObserver:E0}=this;if(E0.next)try{E0.next(h0)}catch(H_){B_(H_)}}error(h0){const{partialObserver:E0}=this;if(E0.error)try{E0.error(h0)}catch(H_){B_(H_)}else B_(h0)}complete(){const{partialObserver:h0}=this;if(h0.complete)try{h0.complete()}catch(E0){B_(E0)}}}class x_ extends p_{constructor(h0,E0,H_){let e0;if(super(),(0,f.m)(h0)||!h0)e0={next:null!=h0?h0:void 0,error:null!=E0?E0:void 0,complete:null!=H_?H_:void 0};else{let P_;this&&q.v.useDeprecatedNextContext?(P_=Object.create(h0),P_.unsubscribe=()=>this.unsubscribe(),e0={next:h0.next&&v_(h0.next,P_),error:h0.error&&v_(h0.error,P_),complete:h0.complete&&v_(h0.complete,P_)}):e0=h0}this.destination=new S_(e0)}}function B_(Qv){q.v.useDeprecatedSynchronousErrorHandling?(0,r_.O)(Qv):(0,_r.h)(Qv)}function _0(Qv,h0){const{onStoppedNotification:E0}=q.v;E0&&_A.z.setTimeout(()=>E0(Qv,h0))}const c0={closed:!0,next:_s.Z,error:function Q_(Qv){throw Qv},complete:_s.Z}},727:(h,l,g)=>{"use strict";g.d(l,{Lc:()=>_a,w0:()=>_s,Nn:()=>_l});var f=g(576);const q=(0,g(3888).d)(n_=>function(r_){n_(this),this.message=r_?`${r_.length} errors occurred during unsubscription:\n${r_.map((p_,I_)=>`${I_+1}) ${p_.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r_});var _r=g(8737);class _s{constructor(_A){this.initialTeardown=_A,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _A;if(!this.closed){this.closed=!0;const{_parentage:r_}=this;if(r_)if(this._parentage=null,Array.isArray(r_))for(const v_ of r_)v_.remove(this);else r_.remove(this);const{initialTeardown:p_}=this;if((0,f.m)(p_))try{p_()}catch(v_){_A=v_ instanceof q?v_.errors:[v_]}const{_finalizers:I_}=this;if(I_){this._finalizers=null;for(const v_ of I_)try{bh(v_)}catch(S_){_A=null!=_A?_A:[],S_ instanceof q?_A=[..._A,...S_.errors]:_A.push(S_)}}if(_A)throw new q(_A)}}add(_A){var r_;if(_A&&_A!==this)if(this.closed)bh(_A);else{if(_A instanceof _s){if(_A.closed||_A._hasParent(this))return;_A._addParent(this)}(this._finalizers=null!==(r_=this._finalizers)&&void 0!==r_?r_:[]).push(_A)}}_hasParent(_A){const{_parentage:r_}=this;return r_===_A||Array.isArray(r_)&&r_.includes(_A)}_addParent(_A){const{_parentage:r_}=this;this._parentage=Array.isArray(r_)?(r_.push(_A),r_):r_?[r_,_A]:_A}_removeParent(_A){const{_parentage:r_}=this;r_===_A?this._parentage=null:Array.isArray(r_)&&(0,_r.P)(r_,_A)}remove(_A){const{_finalizers:r_}=this;r_&&(0,_r.P)(r_,_A),_A instanceof _s&&_A._removeParent(this)}}_s.EMPTY=(()=>{const n_=new _s;return n_.closed=!0,n_})();const _a=_s.EMPTY;function _l(n_){return n_ instanceof _s||n_&&"closed"in n_&&(0,f.m)(n_.remove)&&(0,f.m)(n_.add)&&(0,f.m)(n_.unsubscribe)}function bh(n_){(0,f.m)(n_)?n_():n_.unsubscribe()}},2416:(h,l,g)=>{"use strict";g.d(l,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(h,l,g)=>{"use strict";g.d(l,{E:()=>k});const k=new(g(8306).y)(_s=>_s.complete())},8996:(h,l,g)=>{"use strict";g.d(l,{D:()=>h0});var f=g(8421),k=g(5363),q=g(9468),_a=g(8306),bh=g(2202),n_=g(576),_A=g(9672);function p_(E0,H_){if(!E0)throw new Error("Iterable cannot be null");return new _a.y(e0=>{(0,_A.f)(e0,H_,()=>{const P_=E0[Symbol.asyncIterator]();(0,_A.f)(e0,H_,()=>{P_.next().then(Rv=>{Rv.done?e0.complete():e0.next(Rv.value)})},0,!0)})})}var I_=g(3670),v_=g(8239),S_=g(1144),x_=g(6495),B_=g(2206),Q_=g(4532),_0=g(3260);function h0(E0,H_){return H_?function Qv(E0,H_){if(null!=E0){if((0,I_.c)(E0))return function _r(E0,H_){return(0,f.Xf)(E0).pipe((0,q.R)(H_),(0,k.Q)(H_))}(E0,H_);if((0,S_.z)(E0))return function _l(E0,H_){return new _a.y(e0=>{let P_=0;return H_.schedule(function(){P_===E0.length?e0.complete():(e0.next(E0[P_++]),e0.closed||this.schedule())})})}(E0,H_);if((0,v_.t)(E0))return function _s(E0,H_){return(0,f.Xf)(E0).pipe((0,q.R)(H_),(0,k.Q)(H_))}(E0,H_);if((0,B_.D)(E0))return p_(E0,H_);if((0,x_.T)(E0))return function r_(E0,H_){return new _a.y(e0=>{let P_;return(0,_A.f)(e0,H_,()=>{P_=E0[bh.h](),(0,_A.f)(e0,H_,()=>{let Rv,E_;try{({value:Rv,done:E_}=P_.next())}catch(L_){return void e0.error(L_)}E_?e0.complete():e0.next(Rv)},0,!0)}),()=>(0,n_.m)(null==P_?void 0:P_.return)&&P_.return()})}(E0,H_);if((0,_0.L)(E0))return function c0(E0,H_){return p_((0,_0.Q)(E0),H_)}(E0,H_)}throw(0,Q_.z)(E0)}(E0,H_):(0,f.Xf)(E0)}},8421:(h,l,g)=>{"use strict";g.d(l,{Xf:()=>I_});var f=g(655),k=g(1144),q=g(8239),_r=g(8306),_s=g(3670),_a=g(2206),_l=g(4532),bh=g(6495),n_=g(3260),_A=g(576),r_=g(7849),p_=g(8822);function I_(Qv){if(Qv instanceof _r.y)return Qv;if(null!=Qv){if((0,_s.c)(Qv))return function v_(Qv){return new _r.y(h0=>{const E0=Qv[p_.L]();if((0,_A.m)(E0.subscribe))return E0.subscribe(h0);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Qv);if((0,k.z)(Qv))return function S_(Qv){return new _r.y(h0=>{for(let E0=0;E0<Qv.length&&!h0.closed;E0++)h0.next(Qv[E0]);h0.complete()})}(Qv);if((0,q.t)(Qv))return function x_(Qv){return new _r.y(h0=>{Qv.then(E0=>{h0.closed||(h0.next(E0),h0.complete())},E0=>h0.error(E0)).then(null,r_.h)})}(Qv);if((0,_a.D)(Qv))return Q_(Qv);if((0,bh.T)(Qv))return function B_(Qv){return new _r.y(h0=>{for(const E0 of Qv)if(h0.next(E0),h0.closed)return;h0.complete()})}(Qv);if((0,n_.L)(Qv))return function _0(Qv){return Q_((0,n_.Q)(Qv))}(Qv)}throw(0,_l.z)(Qv)}function Q_(Qv){return new _r.y(h0=>{(function c0(Qv,h0){var E0,H_,e0,P_;return(0,f.mG)(this,void 0,void 0,function*(){try{for(E0=(0,f.KL)(Qv);!(H_=yield E0.next()).done;)if(h0.next(H_.value),h0.closed)return}catch(Rv){e0={error:Rv}}finally{try{H_&&!H_.done&&(P_=E0.return)&&(yield P_.call(E0))}finally{if(e0)throw e0.error}}h0.complete()})})(Qv,h0).catch(E0=>h0.error(E0))})}},6451:(h,l,g)=>{"use strict";g.d(l,{T:()=>_a});var f=g(8189),k=g(8421),q=g(515),_r=g(7669),_s=g(8996);function _a(..._l){const bh=(0,_r.yG)(_l),n_=(0,_r._6)(_l,1/0),_A=_l;return _A.length?1===_A.length?(0,k.Xf)(_A[0]):(0,f.J)(n_)((0,_s.D)(_A,bh)):q.E}},5403:(h,l,g)=>{"use strict";g.d(l,{x:()=>k});var f=g(930);function k(_r,_s,_a,_l,bh){return new q(_r,_s,_a,_l,bh)}class q extends f.Lv{constructor(_s,_a,_l,bh,n_,_A){super(_s),this.onFinalize=n_,this.shouldUnsubscribe=_A,this._next=_a?function(r_){try{_a(r_)}catch(p_){_s.error(p_)}}:super._next,this._error=bh?function(r_){try{bh(r_)}catch(p_){_s.error(p_)}finally{this.unsubscribe()}}:super._error,this._complete=_l?function(){try{_l()}catch(r_){_s.error(r_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _s;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_a}=this;super.unsubscribe(),!_a&&(null===(_s=this.onFinalize)||void 0===_s||_s.call(this))}}}},4004:(h,l,g)=>{"use strict";g.d(l,{U:()=>q});var f=g(4482),k=g(5403);function q(_r,_s){return(0,f.e)((_a,_l)=>{let bh=0;_a.subscribe((0,k.x)(_l,n_=>{_l.next(_r.call(_s,n_,bh++))}))})}},8189:(h,l,g)=>{"use strict";g.d(l,{J:()=>q});var f=g(5577),k=g(4671);function q(_r=1/0){return(0,f.z)(k.y,_r)}},5577:(h,l,g)=>{"use strict";g.d(l,{z:()=>bh});var f=g(4004),k=g(8421),q=g(4482),_r=g(9672),_s=g(5403),_l=g(576);function bh(n_,_A,r_=1/0){return(0,_l.m)(_A)?bh((p_,I_)=>(0,f.U)((v_,S_)=>_A(p_,v_,I_,S_))((0,k.Xf)(n_(p_,I_))),r_):("number"==typeof _A&&(r_=_A),(0,q.e)((p_,I_)=>function _a(n_,_A,r_,p_,I_,v_,S_,x_){const B_=[];let Q_=0,_0=0,c0=!1;const Qv=()=>{c0&&!B_.length&&!Q_&&_A.complete()},h0=H_=>Q_<p_?E0(H_):B_.push(H_),E0=H_=>{v_&&_A.next(H_),Q_++;let e0=!1;(0,k.Xf)(r_(H_,_0++)).subscribe((0,_s.x)(_A,P_=>{null==I_||I_(P_),v_?h0(P_):_A.next(P_)},()=>{e0=!0},void 0,()=>{if(e0)try{for(Q_--;B_.length&&Q_<p_;){const P_=B_.shift();S_?(0,_r.f)(_A,S_,()=>E0(P_)):E0(P_)}Qv()}catch(P_){_A.error(P_)}}))};return n_.subscribe((0,_s.x)(_A,h0,()=>{c0=!0,Qv()})),()=>{null==x_||x_()}}(p_,I_,n_,r_)))}},5363:(h,l,g)=>{"use strict";g.d(l,{Q:()=>_r});var f=g(9672),k=g(4482),q=g(5403);function _r(_s,_a=0){return(0,k.e)((_l,bh)=>{_l.subscribe((0,q.x)(bh,n_=>(0,f.f)(bh,_s,()=>bh.next(n_),_a),()=>(0,f.f)(bh,_s,()=>bh.complete(),_a),n_=>(0,f.f)(bh,_s,()=>bh.error(n_),_a)))})}},3099:(h,l,g)=>{"use strict";g.d(l,{B:()=>_a});var f=g(8996),k=g(5698),q=g(7579),_r=g(930),_s=g(4482);function _a(bh={}){const{connector:n_=(()=>new q.x),resetOnError:_A=!0,resetOnComplete:r_=!0,resetOnRefCountZero:p_=!0}=bh;return I_=>{let v_=null,S_=null,x_=null,B_=0,Q_=!1,_0=!1;const c0=()=>{null==S_||S_.unsubscribe(),S_=null},Qv=()=>{c0(),v_=x_=null,Q_=_0=!1},h0=()=>{const E0=v_;Qv(),null==E0||E0.unsubscribe()};return(0,_s.e)((E0,H_)=>{B_++,!_0&&!Q_&&c0();const e0=x_=null!=x_?x_:n_();H_.add(()=>{B_--,0===B_&&!_0&&!Q_&&(S_=_l(h0,p_))}),e0.subscribe(H_),v_||(v_=new _r.Hp({next:P_=>e0.next(P_),error:P_=>{_0=!0,c0(),S_=_l(Qv,_A,P_),e0.error(P_)},complete:()=>{Q_=!0,c0(),S_=_l(Qv,r_),e0.complete()}}),(0,f.D)(E0).subscribe(v_))})(I_)}}function _l(bh,n_,..._A){return!0===n_?(bh(),null):!1===n_?null:n_(..._A).pipe((0,k.q)(1)).subscribe(()=>bh())}},9468:(h,l,g)=>{"use strict";g.d(l,{R:()=>k});var f=g(4482);function k(q,_r=0){return(0,f.e)((_s,_a)=>{_a.add(q.schedule(()=>_s.subscribe(_a),_r))})}},5698:(h,l,g)=>{"use strict";g.d(l,{q:()=>_r});var f=g(515),k=g(4482),q=g(5403);function _r(_s){return _s<=0?()=>f.E:(0,k.e)((_a,_l)=>{let bh=0;_a.subscribe((0,q.x)(_l,n_=>{++bh<=_s&&(_l.next(n_),_s<=bh&&_l.complete())}))})}},8505:(h,l,g)=>{"use strict";g.d(l,{b:()=>_s});var f=g(576),k=g(4482),q=g(5403),_r=g(4671);function _s(_a,_l,bh){const n_=(0,f.m)(_a)||_l||bh?{next:_a,error:_l,complete:bh}:_a;return n_?(0,k.e)((_A,r_)=>{var p_;null===(p_=n_.subscribe)||void 0===p_||p_.call(n_);let I_=!0;_A.subscribe((0,q.x)(r_,v_=>{var S_;null===(S_=n_.next)||void 0===S_||S_.call(n_,v_),r_.next(v_)},()=>{var v_;I_=!1,null===(v_=n_.complete)||void 0===v_||v_.call(n_),r_.complete()},v_=>{var S_;I_=!1,null===(S_=n_.error)||void 0===S_||S_.call(n_,v_),r_.error(v_)},()=>{var v_,S_;I_&&(null===(v_=n_.unsubscribe)||void 0===v_||v_.call(n_)),null===(S_=n_.finalize)||void 0===S_||S_.call(n_)}))}):_r.y}},4408:(h,l,g)=>{"use strict";g.d(l,{o:()=>_s});var f=g(727);class k extends f.w0{constructor(_l,bh){super()}schedule(_l,bh=0){return this}}const q={setInterval(_a,_l,...bh){const{delegate:n_}=q;return(null==n_?void 0:n_.setInterval)?n_.setInterval(_a,_l,...bh):setInterval(_a,_l,...bh)},clearInterval(_a){const{delegate:_l}=q;return((null==_l?void 0:_l.clearInterval)||clearInterval)(_a)},delegate:void 0};var _r=g(8737);class _s extends k{constructor(_l,bh){super(_l,bh),this.scheduler=_l,this.work=bh,this.pending=!1}schedule(_l,bh=0){if(this.closed)return this;this.state=_l;const n_=this.id,_A=this.scheduler;return null!=n_&&(this.id=this.recycleAsyncId(_A,n_,bh)),this.pending=!0,this.delay=bh,this.id=this.id||this.requestAsyncId(_A,this.id,bh),this}requestAsyncId(_l,bh,n_=0){return q.setInterval(_l.flush.bind(_l,this),n_)}recycleAsyncId(_l,bh,n_=0){if(null!=n_&&this.delay===n_&&!1===this.pending)return bh;q.clearInterval(bh)}execute(_l,bh){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n_=this._execute(_l,bh);if(n_)return n_;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_l,bh){let _A,n_=!1;try{this.work(_l)}catch(r_){n_=!0,_A=r_||new Error("Scheduled action threw falsy error")}if(n_)return this.unsubscribe(),_A}unsubscribe(){if(!this.closed){const{id:_l,scheduler:bh}=this,{actions:n_}=bh;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_r.P)(n_,this),null!=_l&&(this.id=this.recycleAsyncId(bh,_l,null)),this.delay=null,super.unsubscribe()}}}},7565:(h,l,g)=>{"use strict";g.d(l,{v:()=>q});var f=g(6063);class k{constructor(_s,_a=k.now){this.schedulerActionCtor=_s,this.now=_a}schedule(_s,_a=0,_l){return new this.schedulerActionCtor(this,_s).schedule(_l,_a)}}k.now=f.l.now;class q extends k{constructor(_s,_a=k.now){super(_s,_a),this.actions=[],this._active=!1,this._scheduled=void 0}flush(_s){const{actions:_a}=this;if(this._active)return void _a.push(_s);let _l;this._active=!0;do{if(_l=_s.execute(_s.state,_s.delay))break}while(_s=_a.shift());if(this._active=!1,_l){for(;_s=_a.shift();)_s.unsubscribe();throw _l}}}},4986:(h,l,g)=>{"use strict";g.d(l,{z:()=>q});var f=g(4408);const q=new(g(7565).v)(f.o)},6063:(h,l,g)=>{"use strict";g.d(l,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(h,l,g)=>{"use strict";g.d(l,{z:()=>f});const f={setTimeout(k,q,..._r){const{delegate:_s}=f;return(null==_s?void 0:_s.setTimeout)?_s.setTimeout(k,q,..._r):setTimeout(k,q,..._r)},clearTimeout(k){const{delegate:q}=f;return((null==q?void 0:q.clearTimeout)||clearTimeout)(k)},delegate:void 0}},2202:(h,l,g)=>{"use strict";g.d(l,{h:()=>k});const k=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(h,l,g)=>{"use strict";g.d(l,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(h,l,g)=>{"use strict";g.d(l,{_6:()=>_a,jO:()=>_r,yG:()=>_s});var f=g(576);function q(_l){return _l[_l.length-1]}function _r(_l){return(0,f.m)(q(_l))?_l.pop():void 0}function _s(_l){return function k(_l){return _l&&(0,f.m)(_l.schedule)}(q(_l))?_l.pop():void 0}function _a(_l,bh){return"number"==typeof q(_l)?_l.pop():bh}},8737:(h,l,g)=>{"use strict";function f(k,q){if(k){const _r=k.indexOf(q);0<=_r&&k.splice(_r,1)}}g.d(l,{P:()=>f})},3888:(h,l,g)=>{"use strict";function f(k){const _r=k(_s=>{Error.call(_s),_s.stack=(new Error).stack});return _r.prototype=Object.create(Error.prototype),_r.prototype.constructor=_r,_r}g.d(l,{d:()=>f})},2806:(h,l,g)=>{"use strict";g.d(l,{O:()=>_r,x:()=>q});var f=g(2416);let k=null;function q(_s){if(f.v.useDeprecatedSynchronousErrorHandling){const _a=!k;if(_a&&(k={errorThrown:!1,error:null}),_s(),_a){const{errorThrown:_l,error:bh}=k;if(k=null,_l)throw bh}}else _s()}function _r(_s){f.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=_s)}},9672:(h,l,g)=>{"use strict";function f(k,q,_r,_s=0,_a=!1){const _l=q.schedule(function(){_r(),_a?k.add(this.schedule(null,_s)):this.unsubscribe()},_s);if(k.add(_l),!_a)return _l}g.d(l,{f:()=>f})},4671:(h,l,g)=>{"use strict";function f(k){return k}g.d(l,{y:()=>f})},1144:(h,l,g)=>{"use strict";g.d(l,{z:()=>f});const f=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(h,l,g)=>{"use strict";g.d(l,{D:()=>k});var f=g(576);function k(q){return Symbol.asyncIterator&&(0,f.m)(null==q?void 0:q[Symbol.asyncIterator])}},576:(h,l,g)=>{"use strict";function f(k){return"function"==typeof k}g.d(l,{m:()=>f})},3670:(h,l,g)=>{"use strict";g.d(l,{c:()=>q});var f=g(8822),k=g(576);function q(_r){return(0,k.m)(_r[f.L])}},6495:(h,l,g)=>{"use strict";g.d(l,{T:()=>q});var f=g(2202),k=g(576);function q(_r){return(0,k.m)(null==_r?void 0:_r[f.h])}},8239:(h,l,g)=>{"use strict";g.d(l,{t:()=>k});var f=g(576);function k(q){return(0,f.m)(null==q?void 0:q.then)}},3260:(h,l,g)=>{"use strict";g.d(l,{L:()=>_r,Q:()=>q});var f=g(655),k=g(576);function q(_s){return(0,f.FC)(this,arguments,function*(){const _l=_s.getReader();try{for(;;){const{value:bh,done:n_}=yield(0,f.qq)(_l.read());if(n_)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(bh)}}finally{_l.releaseLock()}})}function _r(_s){return(0,k.m)(null==_s?void 0:_s.getReader)}},4482:(h,l,g)=>{"use strict";g.d(l,{A:()=>k,e:()=>q});var f=g(576);function k(_r){return(0,f.m)(null==_r?void 0:_r.lift)}function q(_r){return _s=>{if(k(_s))return _s.lift(function(_a){try{return _r(_a,this)}catch(_l){this.error(_l)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(h,l,g)=>{"use strict";function f(){}g.d(l,{Z:()=>f})},7849:(h,l,g)=>{"use strict";g.d(l,{h:()=>q});var f=g(2416),k=g(3410);function q(_r){k.z.setTimeout(()=>{const{onUnhandledError:_s}=f.v;if(!_s)throw _r;_s(_r)})}},4532:(h,l,g)=>{"use strict";function f(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}g.d(l,{z:()=>f})},8926:h=>{function l(f,k,q,_r,_s,_a,_l){try{var bh=f[_a](_l),n_=bh.value}catch(_A){return void q(_A)}bh.done?k(n_):Promise.resolve(n_).then(_r,_s)}h.exports=function g(f){return function(){var k=this,q=arguments;return new Promise(function(_r,_s){var _a=f.apply(k,q);function _l(n_){l(_a,_r,_s,_l,bh,"next",n_)}function bh(n_){l(_a,_r,_s,_l,bh,"throw",n_)}_l(void 0)})}},h.exports.__esModule=!0,h.exports.default=h.exports},655:(h,l,g)=>{"use strict";function _r(E_,L_){var F_={};for(var J_ in E_)Object.prototype.hasOwnProperty.call(E_,J_)&&L_.indexOf(J_)<0&&(F_[J_]=E_[J_]);if(null!=E_&&"function"==typeof Object.getOwnPropertySymbols){var z_=0;for(J_=Object.getOwnPropertySymbols(E_);z_<J_.length;z_++)L_.indexOf(J_[z_])<0&&Object.prototype.propertyIsEnumerable.call(E_,J_[z_])&&(F_[J_[z_]]=E_[J_[z_]])}return F_}function bh(E_,L_,F_,J_){return new(F_||(F_=Promise))(function(D0,O0){function CI(B1){try{K0(J_.next(B1))}catch(A1){O0(A1)}}function tI(B1){try{K0(J_.throw(B1))}catch(A1){O0(A1)}}function K0(B1){B1.done?D0(B1.value):function z_(D0){return D0 instanceof F_?D0:new F_(function(O0){O0(D0)})}(B1.value).then(CI,tI)}K0((J_=J_.apply(E_,L_||[])).next())})}function B_(E_){return this instanceof B_?(this.v=E_,this):new B_(E_)}function Q_(E_,L_,F_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z_,J_=F_.apply(E_,L_||[]),D0=[];return z_={},O0("next"),O0("throw"),O0("return"),z_[Symbol.asyncIterator]=function(){return this},z_;function O0(FI){J_[FI]&&(z_[FI]=function(_w){return new Promise(function(uT,U1){D0.push([FI,_w,uT,U1])>1||CI(FI,_w)})})}function CI(FI,_w){try{!function tI(FI){FI.value instanceof B_?Promise.resolve(FI.value.v).then(K0,B1):A1(D0[0][2],FI)}(J_[FI](_w))}catch(uT){A1(D0[0][3],uT)}}function K0(FI){CI("next",FI)}function B1(FI){CI("throw",FI)}function A1(FI,_w){FI(_w),D0.shift(),D0.length&&CI(D0[0][0],D0[0][1])}}function c0(E_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F_,L_=E_[Symbol.asyncIterator];return L_?L_.call(E_):(E_=function p_(E_){var L_="function"==typeof Symbol&&Symbol.iterator,F_=L_&&E_[L_],J_=0;if(F_)return F_.call(E_);if(E_&&"number"==typeof E_.length)return{next:function(){return E_&&J_>=E_.length&&(E_=void 0),{value:E_&&E_[J_++],done:!E_}}};throw new TypeError(L_?"Object is not iterable.":"Symbol.iterator is not defined.")}(E_),F_={},J_("next"),J_("throw"),J_("return"),F_[Symbol.asyncIterator]=function(){return this},F_);function J_(D0){F_[D0]=E_[D0]&&function(O0){return new Promise(function(CI,tI){!function z_(D0,O0,CI,tI){Promise.resolve(tI).then(function(K0){D0({value:K0,done:CI})},O0)}(CI,tI,(O0=E_[D0](O0)).done,O0.value)})}}}g.d(l,{FC:()=>Q_,KL:()=>c0,_T:()=>_r,mG:()=>bh,qq:()=>B_})},5e3:(h,l,g)=>{"use strict";g.d(l,{$8M:()=>jN,$Z:()=>DV,AFp:()=>VW,AaK:()=>bh,BQk:()=>WH,CHM:()=>YL,CRH:()=>_$,CZH:()=>f7,CqO:()=>RU,EJc:()=>Nte,EiD:()=>RP,EpF:()=>KH,F4k:()=>PV,FYo:()=>NL,FiY:()=>uR,G48:()=>jte,GfV:()=>YV,Gpc:()=>r_,JOm:()=>O_,JVY:()=>z9,L6k:()=>yL,LAX:()=>tV,LFG:()=>SI,LSH:()=>fU,Lbi:()=>UU,NdJ:()=>xV,OlP:()=>RT,Oqu:()=>UJ,PXZ:()=>O8,Q6J:()=>IJ,QGY:()=>kV,Qsj:()=>rte,R0b:()=>zP,RDi:()=>$M,Rgc:()=>$V,SBq:()=>I8,Sil:()=>hse,Suo:()=>Ete,TTD:()=>iS,TgZ:()=>SQ,Tol:()=>xJ,Udp:()=>kJ,VLi:()=>xte,WLB:()=>TW,X6Q:()=>D$,XFs:()=>KI,Xpm:()=>qI,Y36:()=>e8,YKP:()=>JS,YNc:()=>dee,Yjl:()=>WM,Yz7:()=>_w,ZZ4:()=>c6,_Bn:()=>a4,_UZ:()=>SU,_Vd:()=>YQ,_c5:()=>Wte,_uU:()=>Ree,aQg:()=>sK,c2e:()=>w$,cJS:()=>U1,cg1:()=>oW,d8E:()=>u8,dDg:()=>C7,deG:()=>OG,dqk:()=>P1,eBb:()=>Y9,eFA:()=>Lte,ekj:()=>PJ,g9A:()=>t6,h0i:()=>u4,hGG:()=>S7,hij:()=>o8,iGM:()=>A$,ifc:()=>G1,ip1:()=>A4,kL8:()=>GJ,lG2:()=>SN,mCW:()=>EL,n5z:()=>KT,oAB:()=>_R,oJD:()=>S5,oxw:()=>zH,pB0:()=>LG,q3G:()=>cS,q4F:()=>ite,qLn:()=>CL,qOj:()=>H5,qZA:()=>J3,qzn:()=>SP,sBO:()=>Vte,sIi:()=>q3,s_b:()=>NW,soG:()=>r6,tBr:()=>YR,tb:()=>Dte,tp0:()=>S2,uIk:()=>VH,vHH:()=>S_,vpe:()=>PL,wAp:()=>$I,xp6:()=>pH,yhl:()=>R3,ynx:()=>NV,z2F:()=>i6,z3N:()=>AO,zSh:()=>TH,zs3:()=>L2});var f=g(7579),k=g(727),q=g(8306),_r=g(6451),_s=g(3099);function _a(I){for(let b in I)if(I[b]===_a)return b;throw Error("Could not find renamed property on target object.")}function _l(I,b){for(const F in b)b.hasOwnProperty(F)&&!I.hasOwnProperty(F)&&(I[F]=b[F])}function bh(I){if("string"==typeof I)return I;if(Array.isArray(I))return"["+I.map(bh).join(", ")+"]";if(null==I)return""+I;if(I.overriddenName)return`${I.overriddenName}`;if(I.name)return`${I.name}`;const b=I.toString();if(null==b)return""+b;const F=b.indexOf("\n");return-1===F?b:b.substring(0,F)}function n_(I,b){return null==I||""===I?null===b?"":b:null==b||""===b?I:I+" "+b}const _A=_a({__forward_ref__:_a});function r_(I){return I.__forward_ref__=r_,I.toString=function(){return bh(this())},I}function p_(I){return I_(I)?I():I}function I_(I){return"function"==typeof I&&I.hasOwnProperty(_A)&&I.__forward_ref__===r_}class S_ extends Error{constructor(b,F){super(function x_(I,b){return`NG0${Math.abs(I)}${b?": "+b:""}`}(b,F)),this.code=b}}function B_(I){return"string"==typeof I?I:null==I?"":String(I)}function Q_(I){return"function"==typeof I?I.name||I.toString():"object"==typeof I&&null!=I&&"function"==typeof I.type?I.type.name||I.type.toString():B_(I)}function h0(I,b){const F=b?` in ${b}`:"";throw new S_(-201,`No provider for ${Q_(I)} found${F}`)}function tI(I,b){null==I&&function K0(I,b,F,_n){throw new Error(`ASSERTION ERROR: ${I}`+(null==_n?"":` [Expected=> ${F} ${_n} ${b} <=Actual]`))}(b,I,null,"!=")}function _w(I){return{token:I.token,providedIn:I.providedIn||null,factory:I.factory,value:void 0}}function U1(I){return{providers:I.providers||[],imports:I.imports||[]}}function S1(I){return wN(I,XO)||wN(I,VR)}function wN(I,b){return I.hasOwnProperty(b)?I[b]:null}function XT(I){return I&&(I.hasOwnProperty(TN)||I.hasOwnProperty(_D))?I[TN]:null}const XO=_a({\u0275prov:_a}),TN=_a({\u0275inj:_a}),VR=_a({ngInjectableDef:_a}),_D=_a({ngInjectorDef:_a});var KI=(()=>((KI=KI||{})[KI.Default=0]="Default",KI[KI.Host=1]="Host",KI[KI.Self=2]="Self",KI[KI.SkipSelf=4]="SkipSelf",KI[KI.Optional=8]="Optional",KI))();let fO;function qT(I){const b=fO;return fO=I,b}function rP(I,b,F){const _n=S1(I);return _n&&"root"==_n.providedIn?void 0===_n.value?_n.value=_n.factory():_n.value:F&KI.Optional?null:void 0!==b?b:void h0(bh(I),"Injector")}function CS(I){return{toString:I}.toString()}var eS=(()=>((eS=eS||{})[eS.OnPush=0]="OnPush",eS[eS.Default=1]="Default",eS))(),G1=(()=>{return(I=G1||(G1={}))[I.Emulated=0]="Emulated",I[I.None=2]="None",I[I.ShadowDom=3]="ShadowDom",G1;var I})();const PI="undefined"!=typeof globalThis&&globalThis,JI="undefined"!=typeof window&&window,mR="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,P1=PI||"undefined"!=typeof global&&global||JI||mR,tS={},$_=[],_E=_a({\u0275cmp:_a}),r0=_a({\u0275dir:_a}),M0=_a({\u0275pipe:_a}),_y=_a({\u0275mod:_a}),m0=_a({\u0275fac:_a}),G0=_a({__NG_ELEMENT_ID__:_a});let II=0;function qI(I){return CS(()=>{const F={},_n={type:I.type,providersResolver:null,decls:I.decls,vars:I.vars,factory:null,template:I.template||null,consts:I.consts||null,ngContentSelectors:I.ngContentSelectors,hostBindings:I.hostBindings||null,hostVars:I.hostVars||0,hostAttrs:I.hostAttrs||null,contentQueries:I.contentQueries||null,declaredInputs:F,inputs:null,outputs:null,exportAs:I.exportAs||null,onPush:I.changeDetection===eS.OnPush,directiveDefs:null,pipeDefs:null,selectors:I.selectors||$_,viewQuery:I.viewQuery||null,features:I.features||null,data:I.data||{},encapsulation:I.encapsulation||G1.Emulated,id:"c",styles:I.styles||$_,_:null,setInput:null,schemas:I.schemas||null,tView:null},ca=I.directives,_d=I.features,_p=I.pipes;return _n.id+=II++,_n.inputs=qM(I.inputs,F),_n.outputs=qM(I.outputs),_d&&_d.forEach(t_=>t_(_n)),_n.directiveDefs=ca?()=>("function"==typeof ca?ca():ca).map(IT):null,_n.pipeDefs=_p?()=>("function"==typeof _p?_p():_p).map(_b):null,_n})}function IT(I){return wS(I)||function eT(I){return I[r0]||null}(I)}function _b(I){return function u2(I){return I[M0]||null}(I)}const nS={};function _R(I){return CS(()=>{const b={type:I.type,bootstrap:I.bootstrap||$_,declarations:I.declarations||$_,imports:I.imports||$_,exports:I.exports||$_,transitiveCompileScopes:null,schemas:I.schemas||null,id:I.id||null};return null!=I.id&&(nS[I.id]=I.type),b})}function qM(I,b){if(null==I)return tS;const F={};for(const _n in I)if(I.hasOwnProperty(_n)){let ca=I[_n],_d=ca;Array.isArray(ca)&&(_d=ca[1],ca=ca[0]),F[ca]=_n,b&&(b[ca]=_d)}return F}const SN=qI;function WM(I){return{type:I.type,name:I.name,factory:null,pure:!1!==I.pure,onDestroy:I.type.prototype.ngOnDestroy||null}}function wS(I){return I[_E]||null}function TS(I,b){const F=I[_y]||null;if(!F&&!0===b)throw new Error(`Type ${bh(I)} does not have '\u0275mod' property.`);return F}function qR(I){return Array.isArray(I)&&"object"==typeof I[1]}function NN(I){return Array.isArray(I)&&!0===I[1]}function s3(I){return 0!=(8&I.flags)}function K6(I){return 2==(2&I.flags)}function kN(I){return 1==(1&I.flags)}function PN(I){return null!==I.template}function H4(I){return 0!=(512&I[2])}function vR(I,b){return I.hasOwnProperty(m0)?I[m0]:null}class RS{constructor(b,F,_n){this.previousValue=b,this.currentValue=F,this.firstChange=_n}isFirstChange(){return this.firstChange}}function iS(){return WL}function WL(I){return I.type.prototype.ngOnChanges&&(I.setInput=SG),c3}function c3(){const I=eN(this),b=null==I?void 0:I.current;if(b){const F=I.previous;if(F===tS)I.previous=b;else for(let _n in b)F[_n]=b[_n];I.current=null,this.ngOnChanges(b)}}function SG(I,b,F,_n){const ca=eN(I)||function f2(I,b){return I[sL]=b}(I,{previous:tS,current:null}),_d=ca.current||(ca.current={}),_p=ca.previous,t_=this.declaredInputs[F],s_=_p[t_];_d[t_]=new RS(s_&&s_.currentValue,b,_p===tS),I[_n]=b}iS.ngInherit=!0;const sL="__ngSimpleChanges__";function eN(I){return I[sL]||null}let uP;function $M(I){uP=I}function xN(){return void 0!==uP?uP:"undefined"!=typeof document?document:void 0}function tT(I){return!!I.listen}const ZM={createRenderer:(I,b)=>xN()};function Y1(I){for(;Array.isArray(I);)I=I[0];return I}function lP(I,b){return Y1(b[I])}function WS(I,b){return Y1(b[I.index])}function LT(I,b){return I.data[b]}function aR(I,b){const F=b[I];return qR(F)?F:F[0]}function dP(I){return 4==(4&I[2])}function p2(I){return 128==(128&I[2])}function MT(I,b){return null==b?null:I[b]}function DO(I){I[18]=0}function KL(I,b){I[5]+=b;let F=I,_n=I[3];for(;null!==_n&&(1===b&&1===F[5]||-1===b&&0===F[5]);)_n[5]+=b,F=_n,_n=_n[3]}const zI={lFrame:$L(null),bindingsEnabled:!0};function d3(){return zI.bindingsEnabled}function j0(){return zI.lFrame.lView}function R1(){return zI.lFrame.tView}function YL(I){return zI.lFrame.contextLView=I,I[8]}function ST(){let I=f3();for(;null!==I&&64===I.type;)I=I.parent;return I}function f3(){return zI.lFrame.currentTNode}function NO(I,b){const F=zI.lFrame;F.currentTNode=I,F.isParent=b}function z4(){return zI.lFrame.isParent}function MN(){zI.lFrame.isParent=!1}function fP(){return zI.lFrame.bindingIndex++}function OS(I){const b=zI.lFrame,F=b.bindingIndex;return b.bindingIndex=b.bindingIndex+I,F}function g3(I,b){const F=zI.lFrame;F.bindingIndex=F.bindingRootIndex=I,tU(b)}function tU(I){zI.lFrame.currentDirectiveIndex=I}function JL(I){const b=zI.lFrame.currentDirectiveIndex;return-1===b?null:I[b]}function A3(){return zI.lFrame.currentQueryIndex}function i5(I){zI.lFrame.currentQueryIndex=I}function o5(I){const b=I[1];return 2===b.type?b.declTNode:1===b.type?I[6]:null}function nU(I,b,F){if(F&KI.SkipSelf){let ca=b,_d=I;for(;!(ca=ca.parent,null!==ca||F&KI.Host||(ca=o5(_d),null===ca||(_d=_d[15],10&ca.type))););if(null===ca)return!1;b=ca,I=_d}const _n=zI.lFrame=_3();return _n.currentTNode=b,_n.lView=I,!0}function pP(I){const b=_3(),F=I[1];zI.lFrame=b,b.currentTNode=F.firstChild,b.lView=I,b.tView=F,b.contextLView=I,b.bindingIndex=F.bindingStartIndex,b.inI18n=!1}function _3(){const I=zI.lFrame,b=null===I?null:I.child;return null===b?$L(I):b}function $L(I){const b={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:I,child:null,inI18n:!1};return null!==I&&(I.child=b),b}function s5(){const I=zI.lFrame;return zI.lFrame=I.parent,I.currentTNode=null,I.lView=null,I}const rU=s5;function gO(){const I=s5();I.isParent=!0,I.tView=null,I.selectedIndex=-1,I.contextLView=null,I.elementDepthCount=0,I.currentDirectiveIndex=-1,I.currentNamespace=null,I.bindingRootIndex=-1,I.bindingIndex=-1,I.currentQueryIndex=0}function KS(){return zI.lFrame.selectedIndex}function dL(I){zI.lFrame.selectedIndex=I}function gS(){const I=zI.lFrame;return LT(I.tView,I.selectedIndex)}function iU(I,b){for(let F=b.directiveStart,_n=b.directiveEnd;F<_n;F++){const _d=I.data[F].type.prototype,{ngAfterContentInit:_p,ngAfterContentChecked:t_,ngAfterViewInit:s_,ngAfterViewChecked:A_,ngOnDestroy:C_}=_d;_p&&(I.contentHooks||(I.contentHooks=[])).push(-F,_p),t_&&((I.contentHooks||(I.contentHooks=[])).push(F,t_),(I.contentCheckHooks||(I.contentCheckHooks=[])).push(F,t_)),s_&&(I.viewHooks||(I.viewHooks=[])).push(-F,s_),A_&&((I.viewHooks||(I.viewHooks=[])).push(F,A_),(I.viewCheckHooks||(I.viewCheckHooks=[])).push(F,A_)),null!=C_&&(I.destroyHooks||(I.destroyHooks=[])).push(F,C_)}}function m2(I,b,F){l5(I,b,3,F)}function nN(I,b,F,_n){(3&I[2])===F&&l5(I,b,F,_n)}function DS(I,b){let F=I[2];(3&F)===b&&(F&=2047,F+=1,I[2]=F)}function l5(I,b,F,_n){const _d=null!=_n?_n:-1,_p=b.length-1;let t_=0;for(let s_=void 0!==_n?65535&I[18]:0;s_<_p;s_++)if("number"==typeof b[s_+1]){if(t_=b[s_],null!=_n&&t_>=_n)break}else b[s_]<0&&(I[18]+=65536),(t_<_d||-1==_d)&&(V9(I,F,b,s_),I[18]=(4294901760&I[18])+s_+2),s_++}function V9(I,b,F,_n){const ca=F[_n]<0,_d=F[_n+1],t_=I[ca?-F[_n]:F[_n]];if(ca){if(I[2]>>11<I[18]>>16&&(3&I[2])===b){I[2]+=2048;try{_d.call(t_)}finally{}}}else try{_d.call(t_)}finally{}}class gP{constructor(b,F,_n){this.factory=b,this.resolving=!1,this.canSeeViewProviders=F,this.injectImpl=_n}}function BT(I,b,F){const _n=tT(I);let ca=0;for(;ca<F.length;){const _d=F[ca];if("number"==typeof _d){if(0!==_d)break;ca++;const _p=F[ca++],t_=F[ca++],s_=F[ca++];_n?I.setAttribute(b,t_,s_,_p):b.setAttributeNS(_p,t_,s_)}else{const _p=_d,t_=F[++ca];UT(_p)?_n&&I.setProperty(b,_p,t_):_n?I.setAttribute(b,_p,t_):b.setAttribute(_p,t_),ca++}}return ca}function KR(I){return 3===I||4===I||6===I}function UT(I){return 64===I.charCodeAt(0)}function eM(I,b){if(null!==b&&0!==b.length)if(null===I||0===I.length)I=b.slice();else{let F=-1;for(let _n=0;_n<b.length;_n++){const ca=b[_n];"number"==typeof ca?F=ca:0===F||h5(I,F,ca,null,-1===F||2===F?b[++_n]:null)}}return I}function h5(I,b,F,_n,ca){let _d=0,_p=I.length;if(-1===b)_p=-1;else for(;_d<I.length;){const t_=I[_d++];if("number"==typeof t_){if(t_===b){_p=-1;break}if(t_>b){_p=_d-1;break}}}for(;_d<I.length;){const t_=I[_d];if("number"==typeof t_)break;if(t_===F){if(null===_n)return void(null!==ca&&(I[_d+1]=ca));if(_n===I[_d+1])return void(I[_d+2]=ca)}_d++,null!==_n&&_d++,null!==ca&&_d++}-1!==_p&&(I.splice(_p,0,b),_d=_p+1),I.splice(_d++,0,F),null!==_n&&I.splice(_d++,0,_n),null!==ca&&I.splice(_d++,0,ca)}function tM(I){return-1!==I}function mP(I){return 32767&I}function AP(I,b){let F=function oS(I){return I>>16}(I),_n=b;for(;F>0;)_n=_n[15],F--;return _n}let rN=!0;function RI(I){const b=rN;return rN=I,b}let fL=0;function _P(I,b){const F=vP(I,b);if(-1!==F)return F;const _n=b[1];_n.firstCreatePass&&(I.injectorIndex=b.length,nM(_n.data,I),nM(b,null),nM(_n.blueprint,null));const ca=mS(I,b),_d=I.injectorIndex;if(tM(ca)){const _p=mP(ca),t_=AP(ca,b),s_=t_[1].data;for(let A_=0;A_<8;A_++)b[_d+A_]=t_[_p+A_]|s_[_p+A_]}return b[_d+8]=ca,_d}function nM(I,b){I.push(0,0,0,0,0,0,0,0,b)}function vP(I,b){return-1===I.injectorIndex||I.parent&&I.parent.injectorIndex===I.injectorIndex||null===b[I.injectorIndex+8]?-1:I.injectorIndex}function mS(I,b){if(I.parent&&-1!==I.parent.injectorIndex)return I.parent.injectorIndex;let F=0,_n=null,ca=b;for(;null!==ca;){const _d=ca[1],_p=_d.type;if(_n=2===_p?_d.declTNode:1===_p?ca[6]:null,null===_n)return-1;if(F++,ca=ca[15],-1!==_n.injectorIndex)return _n.injectorIndex|F<<16}return-1}function pL(I,b,F){!function sS(I,b,F){let _n;"string"==typeof F?_n=F.charCodeAt(0)||0:F.hasOwnProperty(G0)&&(_n=F[G0]),null==_n&&(_n=F[G0]=fL++);const ca=255&_n;b.data[I+(ca>>5)]|=1<<ca}(I,b,F)}function UN(I,b,F){if(F&KI.Optional)return I;h0(b,"NodeInjector")}function EP(I,b,F,_n){if(F&KI.Optional&&void 0===_n&&(_n=null),0==(F&(KI.Self|KI.Host))){const ca=I[9],_d=qT(void 0);try{return ca?ca.get(b,_n,F&KI.Optional):rP(b,_n,F&KI.Optional)}finally{qT(_d)}}return UN(_n,b,F)}function rM(I,b,F,_n=KI.Default,ca){if(null!==I){const _d=function gL(I){if("string"==typeof I)return I.charCodeAt(0)||0;const b=I.hasOwnProperty(G0)?I[G0]:void 0;return"number"==typeof b?b>=0?255&b:FN:b}(F);if("function"==typeof _d){if(!nU(b,I,_n))return _n&KI.Host?UN(ca,F,_n):EP(b,F,_n,ca);try{const _p=_d(_n);if(null!=_p||_n&KI.Optional)return _p;h0(F)}finally{rU()}}else if("number"==typeof _d){let _p=null,t_=vP(I,b),s_=-1,A_=_n&KI.Host?b[16][6]:null;for((-1===t_||_n&KI.SkipSelf)&&(s_=-1===t_?mS(I,b):b[t_+8],-1!==s_&&y3(_n,!1)?(_p=b[1],t_=mP(s_),b=AP(s_,b)):t_=-1);-1!==t_;){const C_=b[1];if(aS(_d,t_,C_.data)){const G_=bP(t_,b,F,_p,_n,A_);if(G_!==IP)return G_}s_=b[t_+8],-1!==s_&&y3(_n,b[1].data[t_+8]===A_)&&aS(_d,t_,b)?(_p=C_,t_=mP(s_),b=AP(s_,b)):t_=-1}}}return EP(b,F,_n,ca)}const IP={};function FN(){return new CP(ST(),j0())}function bP(I,b,F,_n,ca,_d){const _p=b[1],t_=_p.data[I+8],C_=sU(t_,_p,F,null==_n?K6(t_)&&rN:_n!=_p&&0!=(3&t_.type),ca&KI.Host&&_d===t_);return null!==C_?A2(b,_p,C_,t_):IP}function sU(I,b,F,_n,ca){const _d=I.providerIndexes,_p=b.data,t_=1048575&_d,s_=I.directiveStart,C_=_d>>20,X_=ca?t_+C_:I.directiveEnd;for(let g0=_n?t_:t_+C_;g0<X_;g0++){const x0=_p[g0];if(g0<s_&&F===x0||g0>=s_&&x0.type===F)return g0}if(ca){const g0=_p[s_];if(g0&&PN(g0)&&g0.type===F)return s_}return null}function A2(I,b,F,_n){let ca=I[F];const _d=b.data;if(function ZL(I){return I instanceof gP}(ca)){const _p=ca;_p.resolving&&function _0(I,b){const F=b?`. Dependency path: ${b.join(" > ")} > ${I}`:"";throw new S_(-200,`Circular dependency in DI detected for ${I}${F}`)}(Q_(_d[F]));const t_=RI(_p.canSeeViewProviders);_p.resolving=!0;const s_=_p.injectImpl?qT(_p.injectImpl):null;nU(I,_n,KI.Default);try{ca=I[F]=_p.factory(void 0,_d,I,_n),b.firstCreatePass&&F>=_n.directiveStart&&function PY(I,b,F){const{ngOnChanges:_n,ngOnInit:ca,ngDoCheck:_d}=b.type.prototype;if(_n){const _p=WL(b);(F.preOrderHooks||(F.preOrderHooks=[])).push(I,_p),(F.preOrderCheckHooks||(F.preOrderCheckHooks=[])).push(I,_p)}ca&&(F.preOrderHooks||(F.preOrderHooks=[])).push(0-I,ca),_d&&((F.preOrderHooks||(F.preOrderHooks=[])).push(I,_d),(F.preOrderCheckHooks||(F.preOrderCheckHooks=[])).push(I,_d))}(F,_d[F],b)}finally{null!==s_&&qT(s_),RI(t_),_p.resolving=!1,rU()}}return ca}function aS(I,b,F){return!!(F[b+(I>>5)]&1<<I)}function y3(I,b){return!(I&KI.Self||I&KI.Host&&b)}class CP{constructor(b,F){this._tNode=b,this._lView=F}get(b,F,_n){return rM(this._tNode,this._lView,b,_n,F)}}function KT(I){return CS(()=>{const b=I.prototype.constructor,F=b[m0]||mL(b),_n=Object.prototype;let ca=Object.getPrototypeOf(I.prototype).constructor;for(;ca&&ca!==_n;){const _d=ca[m0]||mL(ca);if(_d&&_d!==F)return _d;ca=Object.getPrototypeOf(ca)}return _d=>new _d})}function mL(I){return I_(I)?()=>{const b=mL(p_(I));return b&&b()}:vR(I)}function jN(I){return function yP(I,b){if("class"===b)return I.classes;if("style"===b)return I.styles;const F=I.attrs;if(F){const _n=F.length;let ca=0;for(;ca<_n;){const _d=F[ca];if(KR(_d))break;if(0===_d)ca+=2;else if("number"==typeof _d)for(ca++;ca<_n&&"string"==typeof F[ca];)ca++;else{if(_d===b)return F[ca+1];ca+=2}}}return null}(ST(),I)}const xO="__parameters__";function LO(I,b,F){return CS(()=>{const _n=function NS(I){return function(...F){if(I){const _n=I(...F);for(const ca in _n)this[ca]=_n[ca]}}}(b);function ca(..._d){if(this instanceof ca)return _n.apply(this,_d),this;const _p=new ca(..._d);return t_.annotation=_p,t_;function t_(s_,A_,C_){const G_=s_.hasOwnProperty(xO)?s_[xO]:Object.defineProperty(s_,xO,{value:[]})[xO];for(;G_.length<=C_;)G_.push(null);return(G_[C_]=G_[C_]||[]).push(_p),s_}}return F&&(ca.prototype=Object.create(F.prototype)),ca.prototype.ngMetadataName=I,ca.annotationCls=ca,ca})}class RT{constructor(b,F){this._desc=b,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof F?this.__NG_ELEMENT_ID__=F:void 0!==F&&(this.\u0275prov=_w({token:this,providedIn:F.providedIn||"root",factory:F.factory}))}toString(){return`InjectionToken ${this._desc}`}}const OG=new RT("AnalyzeForEntryComponents");function ER(I,b){void 0===b&&(b=I);for(let F=0;F<I.length;F++){let _n=I[F];Array.isArray(_n)?(b===I&&(b=I.slice(0,F)),ER(_n,b)):b!==I&&b.push(_n)}return b}function zR(I,b){I.forEach(F=>Array.isArray(F)?zR(F,b):b(F))}function oM(I,b,F){b>=I.length?I.push(F):I.splice(b,0,F)}function sM(I,b){return b>=I.length-1?I.pop():I.splice(b,1)[0]}function IR(I,b,F){let _n=_L(I,b);return _n>=0?I[1|_n]=F:(_n=~_n,function b2(I,b,F,_n){let ca=I.length;if(ca==b)I.push(F,_n);else if(1===ca)I.push(_n,I[0]),I[0]=F;else{for(ca--,I.push(I[ca-1],I[ca]);ca>b;)I[ca]=I[ca-2],ca--;I[b]=F,I[b+1]=_n}}(I,_n,b,F)),_n}function aM(I,b){const F=_L(I,b);if(F>=0)return I[1|F]}function _L(I,b){return function C2(I,b,F){let _n=0,ca=I.length>>F;for(;ca!==_n;){const _d=_n+(ca-_n>>1),_p=I[_d<<F];if(b===_p)return _d<<F;_p>b?ca=_d:_n=_d+1}return~(ca<<F)}(I,b,1)}const BO={},vL="__NG_DI_FLAG__",w2="ngTempTokenPath",d_=/\n/gm,W_="__source",p0=_a({provide:String,useValue:_a});let y0;function P0(I){const b=y0;return y0=I,b}function yI(I,b=KI.Default){if(void 0===y0)throw new S_(203,"");return null===y0?rP(I,void 0,b):y0.get(I,b&KI.Optional?null:void 0,b)}function SI(I,b=KI.Default){return(function TT(){return fO}()||yI)(p_(I),b)}const q1=SI;function _C(I){const b=[];for(let F=0;F<I.length;F++){const _n=p_(I[F]);if(Array.isArray(_n)){if(0===_n.length)throw new S_(900,"");let ca,_d=KI.Default;for(let _p=0;_p<_n.length;_p++){const t_=_n[_p],s_=PS(t_);"number"==typeof s_?-1===s_?ca=t_.token:_d|=s_:ca=t_}b.push(SI(ca,_d))}else b.push(SI(_n))}return b}function _S(I,b){return I[vL]=b,I.prototype[vL]=b,I}function PS(I){return I[vL]}const YR=_S(LO("Inject",I=>({token:I})),-1),uR=_S(LO("Optional"),8),S2=_S(LO("SkipSelf"),4);let S3,O2;function uM(I){var b;return(null===(b=function C5(){if(void 0===S3&&(S3=null,P1.trustedTypes))try{S3=P1.trustedTypes.createPolicy("angular",{createHTML:I=>I,createScript:I=>I,createScriptURL:I=>I})}catch(I){}return S3}())||void 0===b?void 0:b.createHTML(I))||I}function eV(I){var b;return(null===(b=function $j(){if(void 0===O2&&(O2=null,P1.trustedTypes))try{O2=P1.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:I=>I,createScript:I=>I,createScriptURL:I=>I})}catch(I){}return O2}())||void 0===b?void 0:b.createHTML(I))||I}class aN{constructor(b){this.changingThisBreaksApplicationSecurity=b}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lU extends aN{getTypeName(){return"HTML"}}class dU extends aN{getTypeName(){return"Style"}}class PG extends aN{getTypeName(){return"Script"}}class xG extends aN{getTypeName(){return"URL"}}class K9 extends aN{getTypeName(){return"ResourceURL"}}function AO(I){return I instanceof aN?I.changingThisBreaksApplicationSecurity:I}function SP(I,b){const F=R3(I);if(null!=F&&F!==b){if("ResourceURL"===F&&"URL"===b)return!0;throw new Error(`Required a safe ${b}, got a ${F} (see https://g.co/ng/security#xss)`)}return F===b}function R3(I){return I instanceof aN&&I.getTypeName()||null}function z9(I){return new lU(I)}function yL(I){return new dU(I)}function Y9(I){return new PG(I)}function tV(I){return new xG(I)}function LG(I){return new K9(I)}class J9{constructor(b){this.inertDocumentHelper=b}getInertBodyElement(b){b="<body><remove></remove>"+b;try{const F=(new window.DOMParser).parseFromString(uM(b),"text/html").body;return null===F?this.inertDocumentHelper.getInertBodyElement(b):(F.removeChild(F.firstChild),F)}catch(F){return null}}}class $9{constructor(b){if(this.defaultDoc=b,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const F=this.inertDocument.createElement("html");this.inertDocument.appendChild(F);const _n=this.inertDocument.createElement("body");F.appendChild(_n)}}getInertBodyElement(b){const F=this.inertDocument.createElement("template");if("content"in F)return F.innerHTML=uM(b),F;const _n=this.inertDocument.createElement("body");return _n.innerHTML=uM(b),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(_n),_n}stripCustomNsAttrs(b){const F=b.attributes;for(let ca=F.length-1;0<ca;ca--){const _p=F.item(ca).name;("xmlns:ns1"===_p||0===_p.indexOf("ns1:"))&&b.removeAttribute(_p)}let _n=b.firstChild;for(;_n;)_n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(_n),_n=_n.nextSibling}}const Z9=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function EL(I){return(I=String(I)).match(Z9)||I.match(lM)?I:"unsafe:"+I}function cN(I){const b={};for(const F of I.split(","))b[F]=!0;return b}function nV(...I){const b={};for(const F of I)for(const _n in F)F.hasOwnProperty(_n)&&(b[_n]=!0);return b}const D3=cN("area,br,col,hr,img,wbr"),rV=cN("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),IL=cN("rp,rt"),k3=nV(D3,nV(rV,cN("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nV(IL,cN("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nV(IL,rV)),BG=cN("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),T5=cN("srcset"),UG=nV(BG,T5,cN("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cN("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hU=cN("script,style,template");class oV{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(b){let F=b.firstChild,_n=!0;for(;F;)if(F.nodeType===Node.ELEMENT_NODE?_n=this.startElement(F):F.nodeType===Node.TEXT_NODE?this.chars(F.nodeValue):this.sanitizedSomething=!0,_n&&F.firstChild)F=F.firstChild;else for(;F;){F.nodeType===Node.ELEMENT_NODE&&this.endElement(F);let ca=this.checkClobberedElement(F,F.nextSibling);if(ca){F=ca;break}F=this.checkClobberedElement(F,F.parentNode)}return this.buf.join("")}startElement(b){const F=b.nodeName.toLowerCase();if(!k3.hasOwnProperty(F))return this.sanitizedSomething=!0,!hU.hasOwnProperty(F);this.buf.push("<"),this.buf.push(F);const _n=b.attributes;for(let ca=0;ca<_n.length;ca++){const _d=_n.item(ca),_p=_d.name,t_=_p.toLowerCase();if(!UG.hasOwnProperty(t_)){this.sanitizedSomething=!0;continue}let s_=_d.value;BG[t_]&&(s_=EL(s_)),T5[t_]&&(I=s_,s_=(I=String(I)).split(",").map(b=>EL(b.trim())).join(", ")),this.buf.push(" ",_p,'="',uN(s_),'"')}var I;return this.buf.push(">"),!0}endElement(b){const F=b.nodeName.toLowerCase();k3.hasOwnProperty(F)&&!D3.hasOwnProperty(F)&&(this.buf.push("</"),this.buf.push(F),this.buf.push(">"))}chars(b){this.buf.push(uN(b))}checkClobberedElement(b,F){if(F&&(b.compareDocumentPosition(F)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${b.outerHTML}`);return F}}const LY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sV=/([^\#-~ |!])/g;function uN(I){return I.replace(/&/g,"&amp;").replace(LY,function(b){return"&#"+(1024*(b.charCodeAt(0)-55296)+(b.charCodeAt(1)-56320)+65536)+";"}).replace(sV,function(b){return"&#"+b.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let x3;function RP(I,b){let F=null;try{x3=x3||function MG(I){const b=new $9(I);return function O3(){try{return!!(new window.DOMParser).parseFromString(uM(""),"text/html")}catch(I){return!1}}()?new J9(b):b}(I);let _n=b?String(b):"";F=x3.getInertBodyElement(_n);let ca=5,_d=_n;do{if(0===ca)throw new Error("Failed to sanitize html because the input is unstable");ca--,_n=_d,_d=F.innerHTML,F=x3.getInertBodyElement(_n)}while(_n!==_d);return uM((new oV).sanitizeChildren(dM(F)||F))}finally{if(F){const _n=dM(F)||F;for(;_n.firstChild;)_n.removeChild(_n.firstChild)}}}function dM(I){return"content"in I&&function $R(I){return I.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===I.nodeName}(I)?I.content:null}var cS=(()=>((cS=cS||{})[cS.NONE=0]="NONE",cS[cS.HTML=1]="HTML",cS[cS.STYLE=2]="STYLE",cS[cS.SCRIPT=3]="SCRIPT",cS[cS.URL=4]="URL",cS[cS.RESOURCE_URL=5]="RESOURCE_URL",cS))();function S5(I){const b=gU();return b?eV(b.sanitize(cS.HTML,I)||""):SP(I,"HTML")?eV(AO(I)):RP(xN(),B_(I))}function fU(I){const b=gU();return b?b.sanitize(cS.URL,I)||"":SP(I,"URL")?AO(I):EL(B_(I))}function gU(){const I=j0();return I&&I[12]}const cV="__ngContext__";function xS(I,b){I[cV]=b}function uV(I){const b=function L3(I){return I[cV]||null}(I);return b?Array.isArray(b)?b:b.lView:null}function hV(I){return I.ngOriginalError}function qG(I,...b){I.error(...b)}class CL{constructor(){this._console=console}handleError(b){const F=this._findOriginalError(b),_n=function HG(I){return I&&I.ngErrorLogger||qG}(b);_n(this._console,"ERROR",b),F&&_n(this._console,"ORIGINAL ERROR",F)}_findOriginalError(b){let F=b&&hV(b);for(;F&&hV(F);)F=hV(F);return F||null}}const P5=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(P1))();function Nf(I){return I instanceof Function?I():I}var O_=(()=>((O_=O_||{})[O_.Important=1]="Important",O_[O_.DashCase=2]="DashCase",O_))();function N0(I,b){return undefined(I,b)}function GI(I){const b=I[3];return NN(b)?b[3]:b}function FO(I){return x5(I[13])}function M3(I){return x5(I[4])}function x5(I){for(;null!==I&&!NN(I);)I=I[4];return I}function mU(I,b,F,_n,ca){if(null!=_n){let _d,_p=!1;NN(_n)?_d=_n:qR(_n)&&(_p=!0,_n=_n[0]);const t_=Y1(_n);0===I&&null!==F?null==ca?N2(b,F,t_):kP(b,F,t_,ca||null,!0):1===I&&null!==F?kP(b,F,t_,ca||null,!0):2===I?function M5(I,b,F){const _n=vO(I,b);_n&&function ZG(I,b,F,_n){tT(I)?I.removeChild(b,F,_n):b.removeChild(F)}(I,_n,b,F)}(b,t_,_p):3===I&&b.destroyNode(t_),null!=_d&&function AU(I,b,F,_n,ca){const _d=F[7];_d!==Y1(F)&&mU(b,I,_n,_d,ca);for(let t_=10;t_<F.length;t_++){const s_=F[t_];b0(s_[1],s_,I,b,_n,_d)}}(b,I,_d,F,ca)}}function lS(I,b,F){if(tT(I))return I.createElement(b,F);{const _n=null!==F?function u3(I){const b=I.toLowerCase();return"svg"===b?"http://www.w3.org/2000/svg":"math"===b?"http://www.w3.org/1998/MathML/":null}(F):null;return null===_n?I.createElement(b):I.createElementNS(_n,b)}}function JG(I,b){const F=I[9],_n=F.indexOf(b),ca=b[3];1024&b[2]&&(b[2]&=-1025,KL(ca,-1)),F.splice(_n,1)}function e1(I,b){if(I.length<=10)return;const F=10+b,_n=I[F];if(_n){const ca=_n[17];null!==ca&&ca!==I&&JG(ca,_n),b>0&&(I[F-1][4]=_n[4]);const _d=sM(I,10+b);!function L5(I,b){b0(I,b,b[11],2,null,null),b[0]=null,b[6]=null}(_n[1],_n);const _p=_d[19];null!==_p&&_p.detachView(_d[1]),_n[3]=null,_n[4]=null,_n[2]&=-129}return _n}function CX(I,b){if(!(256&b[2])){const F=b[11];tT(F)&&F.destroyNode&&b0(I,b,F,3,null,null),function mV(I){let b=I[13];if(!b)return $G(I[1],I);for(;b;){let F=null;if(qR(b))F=b[13];else{const _n=b[10];_n&&(F=_n)}if(!F){for(;b&&!b[4]&&b!==I;)qR(b)&&$G(b[1],b),b=b[3];null===b&&(b=I),qR(b)&&$G(b[1],b),F=b&&b[4]}b=F}}(b)}}function $G(I,b){if(!(256&b[2])){b[2]&=-129,b[2]|=256,function aH(I,b){let F;if(null!=I&&null!=(F=I.destroyHooks))for(let _n=0;_n<F.length;_n+=2){const ca=b[F[_n]];if(!(ca instanceof gP)){const _d=F[_n+1];if(Array.isArray(_d))for(let _p=0;_p<_d.length;_p+=2){const t_=ca[_d[_p]],s_=_d[_p+1];try{s_.call(t_)}finally{}}else try{_d.call(ca)}finally{}}}}(I,b),function jY(I,b){const F=I.cleanup,_n=b[7];let ca=-1;if(null!==F)for(let _d=0;_d<F.length-1;_d+=2)if("string"==typeof F[_d]){const _p=F[_d+1],t_="function"==typeof _p?_p(b):Y1(b[_p]),s_=_n[ca=F[_d+2]],A_=F[_d+3];"boolean"==typeof A_?t_.removeEventListener(F[_d],s_,A_):A_>=0?_n[ca=A_]():_n[ca=-A_].unsubscribe(),_d+=2}else{const _p=_n[ca=F[_d+1]];F[_d].call(_p)}if(null!==_n){for(let _d=ca+1;_d<_n.length;_d++)_n[_d]();b[7]=null}}(I,b),1===b[1].type&&tT(b[11])&&b[11].destroy();const F=b[17];if(null!==F&&NN(b[3])){F!==b[3]&&JG(F,b);const _n=b[19];null!==_n&&_n.detachView(I)}}}function VY(I,b,F){return function FT(I,b,F){let _n=b;for(;null!==_n&&40&_n.type;)_n=(b=_n).parent;if(null===_n)return F[0];if(2&_n.flags){const ca=I.data[_n.directiveStart].encapsulation;if(ca===G1.None||ca===G1.Emulated)return null}return WS(_n,F)}(I,b.parent,F)}function kP(I,b,F,_n,ca){tT(I)?I.insertBefore(b,F,_n,ca):b.insertBefore(F,_n,ca)}function N2(I,b,F){tT(I)?I.appendChild(b,F):b.appendChild(F)}function wX(I,b,F,_n,ca){null!==_n?kP(I,b,F,_n,ca):N2(I,b,F)}function vO(I,b){return tT(I)?I.parentNode(b):b.parentNode}let TX=function uH(I,b,F){return 40&I.type?WS(I,F):null};function k2(I,b,F,_n){const ca=VY(I,_n,b),_d=b[11],t_=function GY(I,b,F){return TX(I,b,F)}(_n.parent||b[6],_n,b);if(null!=ca)if(Array.isArray(F))for(let s_=0;s_<F.length;s_++)wX(_d,ca,F[s_],t_,!1);else wX(_d,ca,F,t_,!1)}function eQ(I,b){if(null!==b){const F=b.type;if(3&F)return WS(b,I);if(4&F)return lH(-1,I[b.index]);if(8&F){const _n=b.child;if(null!==_n)return eQ(I,_n);{const ca=I[b.index];return NN(ca)?lH(-1,ca):Y1(ca)}}if(32&F)return N0(b,I)()||Y1(I[b.index]);{const _n=SX(I,b);return null!==_n?Array.isArray(_n)?_n[0]:eQ(GI(I[16]),_n):eQ(I,b.next)}}return null}function SX(I,b){return null!==b?I[16][6].projection[b.projection]:null}function lH(I,b){const F=10+I+1;if(F<b.length){const _n=b[F],ca=_n[1].firstChild;if(null!==ca)return eQ(_n,ca)}return b[7]}function RX(I,b,F,_n,ca,_d,_p){for(;null!=F;){const t_=_n[F.index],s_=F.type;if(_p&&0===b&&(t_&&xS(Y1(t_),_n),F.flags|=4),64!=(64&F.flags))if(8&s_)RX(I,b,F.child,_n,ca,_d,!1),mU(b,I,ca,t_,_d);else if(32&s_){const A_=N0(F,_n);let C_;for(;C_=A_();)mU(b,I,ca,C_,_d);mU(b,I,ca,t_,_d)}else 16&s_?tQ(I,b,_n,F,ca,_d):mU(b,I,ca,t_,_d);F=_p?F.projectionNext:F.next}}function b0(I,b,F,_n,ca,_d){RX(F,_n,I.firstChild,b,ca,_d,!1)}function tQ(I,b,F,_n,ca,_d){const _p=F[16],s_=_p[6].projection[_n.projection];if(Array.isArray(s_))for(let A_=0;A_<s_.length;A_++)mU(b,I,ca,s_[A_],_d);else RX(I,b,s_,_p[3],ca,_d,!0)}function DX(I,b,F){tT(I)?I.setAttribute(b,"style",F):b.style.cssText=F}function B5(I,b,F){tT(I)?""===F?I.removeAttribute(b,"class"):I.setAttribute(b,"class",F):b.className=F}function NX(I,b,F){let _n=I.length;for(;;){const ca=I.indexOf(b,F);if(-1===ca)return ca;if(0===ca||I.charCodeAt(ca-1)<=32){const _d=b.length;if(ca+_d===_n||I.charCodeAt(ca+_d)<=32)return ca}F=ca+1}}const pM="ng-template";function PP(I,b,F){let _n=0;for(;_n<I.length;){let ca=I[_n++];if(F&&"class"===ca){if(ca=I[_n],-1!==NX(ca.toLowerCase(),b,0))return!0}else if(1===ca){for(;_n<I.length&&"string"==typeof(ca=I[_n++]);)if(ca.toLowerCase()===b)return!0;return!1}}return!1}function P2(I){return 4===I.type&&I.value!==pM}function _U(I,b,F){return b===(4!==I.type||F?I.value:pM)}function QY(I,b,F){let _n=4;const ca=I.attrs||[],_d=function TL(I){for(let b=0;b<I.length;b++)if(KR(I[b]))return b;return I.length}(ca);let _p=!1;for(let t_=0;t_<b.length;t_++){const s_=b[t_];if("number"!=typeof s_){if(!_p)if(4&_n){if(_n=2|1&_n,""!==s_&&!_U(I,s_,F)||""===s_&&1===b.length){if(QN(_n))return!1;_p=!0}}else{const A_=8&_n?s_:b[++t_];if(8&_n&&null!==I.attrs){if(!PP(I.attrs,A_,F)){if(QN(_n))return!1;_p=!0}continue}const G_=kX(8&_n?"class":s_,ca,P2(I),F);if(-1===G_){if(QN(_n))return!1;_p=!0;continue}if(""!==A_){let X_;X_=G_>_d?"":ca[G_+1].toLowerCase();const g0=8&_n?X_:null;if(g0&&-1!==NX(g0,A_,0)||2&_n&&A_!==X_){if(QN(_n))return!1;_p=!0}}}}else{if(!_p&&!QN(_n)&&!QN(s_))return!1;if(_p&&QN(s_))continue;_p=!1,_n=s_|1&_n}}return QN(_n)||_p}function QN(I){return 0==(1&I)}function kX(I,b,F,_n){if(null===b)return-1;let ca=0;if(_n||!F){let _d=!1;for(;ca<b.length;){const _p=b[ca];if(_p===I)return ca;if(3===_p||6===_p)_d=!0;else{if(1===_p||2===_p){let t_=b[++ca];for(;"string"==typeof t_;)t_=b[++ca];continue}if(4===_p)break;if(0===_p){ca+=4;continue}}ca+=_d?1:2}return-1}return function YS(I,b){let F=I.indexOf(4);if(F>-1)for(F++;F<I.length;){const _n=I[F];if("number"==typeof _n)return-1;if(_n===b)return F;F++}return-1}(b,I)}function hH(I,b,F=!1){for(let _n=0;_n<b.length;_n++)if(QY(I,b[_n],F))return!0;return!1}function rQ(I,b){return I?":not("+b.trim()+")":b}function iQ(I){let b=I[0],F=1,_n=2,ca="",_d=!1;for(;F<I.length;){let _p=I[F];if("string"==typeof _p)if(2&_n){const t_=I[++F];ca+="["+_p+(t_.length>0?'="'+t_+'"':"")+"]"}else 8&_n?ca+="."+_p:4&_n&&(ca+=" "+_p);else""!==ca&&!QN(_p)&&(b+=rQ(_d,ca),ca=""),_n=_p,_d=_d||!QN(_n);F++}return""!==ca&&(b+=rQ(_d,ca)),b}const t1={};function pH(I){qY(R1(),j0(),KS()+I,!1)}function qY(I,b,F,_n){if(!_n)if(3==(3&b[2])){const _d=I.preOrderCheckHooks;null!==_d&&m2(b,_d,F)}else{const _d=I.preOrderHooks;null!==_d&&nN(b,_d,0,F)}dL(F)}function mH(I,b){return I<<17|b<<2}function gM(I){return I>>17&32767}function PX(I){return 2|I}function U3(I){return(131068&I)>>2}function AH(I,b){return-131069&I|b<<2}function U5(I){return 1|I}function FX(I,b){const F=I.contentQueries;if(null!==F)for(let _n=0;_n<F.length;_n+=2){const ca=F[_n],_d=F[_n+1];if(-1!==_d){const _p=I.data[_d];i5(ca),_p.contentQueries(2,b[_d],_d)}}}function lQ(I,b,F,_n,ca,_d,_p,t_,s_,A_){const C_=b.blueprint.slice();return C_[0]=ca,C_[2]=140|_n,DO(C_),C_[3]=C_[15]=I,C_[8]=F,C_[10]=_p||I&&I[10],C_[11]=t_||I&&I[11],C_[12]=s_||I&&I[12]||null,C_[9]=A_||I&&I[9]||null,C_[6]=_d,C_[16]=2==b.type?I[16]:C_,C_}function j5(I,b,F,_n,ca){let _d=I.data[b];if(null===_d)_d=function dQ(I,b,F,_n,ca){const _d=f3(),_p=z4(),s_=I.data[b]=function Gie(I,b,F,_n,ca,_d){return{type:F,index:_n,insertBeforeIndex:null,injectorIndex:b?b.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:ca,attrs:_d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:b,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_p?_d:_d&&_d.parent,F,b,_n,ca);return null===I.firstChild&&(I.firstChild=s_),null!==_d&&(_p?null==_d.child&&null!==s_.parent&&(_d.child=s_):null===_d.next&&(_d.next=s_)),s_}(I,b,F,_n,ca),function J4(){return zI.lFrame.inI18n}()&&(_d.flags|=64);else if(64&_d.type){_d.type=F,_d.value=_n,_d.attrs=ca;const _p=function tN(){const I=zI.lFrame,b=I.currentTNode;return I.isParent?b:b.parent}();_d.injectorIndex=null===_p?-1:_p.injectorIndex}return NO(_d,!0),_d}function V5(I,b,F,_n){if(0===F)return-1;const ca=b.length;for(let _d=0;_d<F;_d++)b.push(_n),I.blueprint.push(_n),I.data.push(null);return ca}function vV(I,b,F){pP(b);try{const _n=I.viewQuery;null!==_n&&zT(1,_n,F);const ca=I.template;null!==ca&&JY(I,b,ca,1,F),I.firstCreatePass&&(I.firstCreatePass=!1),I.staticContentQueries&&FX(I,b),I.staticViewQueries&&zT(2,I.viewQuery,F);const _d=I.components;null!==_d&&function jie(I,b){for(let F=0;F<b.length;F++)bV(I,b[F])}(b,_d)}catch(_n){throw I.firstCreatePass&&(I.incompleteFirstPass=!0,I.firstCreatePass=!1),_n}finally{b[2]&=-5,gO()}}function G5(I,b,F,_n){const ca=b[2];if(256!=(256&ca)){pP(b);try{DO(b),function g2(I){return zI.lFrame.bindingIndex=I}(I.bindingStartIndex),null!==F&&JY(I,b,F,2,_n);const _p=3==(3&ca);if(_p){const A_=I.preOrderCheckHooks;null!==A_&&m2(b,A_,null)}else{const A_=I.preOrderHooks;null!==A_&&nN(b,A_,0,null),DS(b,0)}if(function $ie(I){for(let b=FO(I);null!==b;b=M3(b)){if(!b[2])continue;const F=b[9];for(let _n=0;_n<F.length;_n++){const ca=F[_n],_d=ca[3];0==(1024&ca[2])&&KL(_d,1),ca[2]|=1024}}}(b),function WX(I){for(let b=FO(I);null!==b;b=M3(b))for(let F=10;F<b.length;F++){const _n=b[F],ca=_n[1];p2(_n)&&G5(ca,_n,ca.template,_n[8])}}(b),null!==I.contentQueries&&FX(I,b),_p){const A_=I.contentCheckHooks;null!==A_&&m2(b,A_)}else{const A_=I.contentHooks;null!==A_&&nN(b,A_,1),DS(b,1)}!function Uie(I,b){const F=I.hostBindingOpCodes;if(null!==F)try{for(let _n=0;_n<F.length;_n++){const ca=F[_n];if(ca<0)dL(~ca);else{const _d=ca,_p=F[++_n],t_=F[++_n];g3(_p,_d),t_(2,b[_d])}}}finally{dL(-1)}}(I,b);const t_=I.components;null!==t_&&function Fie(I,b){for(let F=0;F<b.length;F++)EV(I,b[F])}(b,t_);const s_=I.viewQuery;if(null!==s_&&zT(2,s_,_n),_p){const A_=I.viewCheckHooks;null!==A_&&m2(b,A_)}else{const A_=I.viewHooks;null!==A_&&nN(b,A_,2),DS(b,2)}!0===I.firstUpdatePass&&(I.firstUpdatePass=!1),b[2]&=-73,1024&b[2]&&(b[2]&=-1025,KL(b[3],-1))}finally{gO()}}}function Q5(I,b,F,_n){const ca=b[10],_p=dP(b);try{!_p&&ca.begin&&ca.begin(),_p&&vV(I,b,_n),G5(I,b,F,_n)}finally{!_p&&ca.end&&ca.end()}}function JY(I,b,F,_n,ca){const _d=KS(),_p=2&_n;try{dL(-1),_p&&b.length>20&&qY(I,b,20,!1),F(_n,ca)}finally{dL(_d)}}function hQ(I,b,F){if(s3(b)){const ca=b.directiveEnd;for(let _d=b.directiveStart;_d<ca;_d++){const _p=I.data[_d];_p.contentQueries&&_p.contentQueries(1,F[_d],_d)}}}function $Y(I,b,F){!d3()||(function nJ(I,b,F,_n){const ca=F.directiveStart,_d=F.directiveEnd;I.firstCreatePass||_P(F,b),xS(_n,b);const _p=F.initialInputs;for(let t_=ca;t_<_d;t_++){const s_=I.data[t_],A_=PN(s_);A_&&LP(b,F,s_);const C_=A2(b,I,t_,F);xS(C_,b),null!==_p&&SL(0,t_-ca,C_,s_,0,_p),A_&&(aR(F.index,b)[8]=C_)}}(I,b,F,WS(F,b)),128==(128&F.flags)&&function Kie(I,b,F){const _n=F.directiveStart,ca=F.directiveEnd,_p=F.index,t_=function m3(){return zI.lFrame.currentDirectiveIndex}();try{dL(_p);for(let s_=_n;s_<ca;s_++){const A_=I.data[s_],C_=b[s_];tU(s_),(null!==A_.hostBindings||0!==A_.hostVars||null!==A_.hostAttrs)&&HX(A_,C_)}}finally{dL(-1),tU(t_)}}(I,b,F))}function ZY(I,b,F=WS){const _n=b.localNames;if(null!==_n){let ca=b.index+1;for(let _d=0;_d<_n.length;_d+=2){const _p=_n[_d+1],t_=-1===_p?F(b,I):I[_p];I[ca++]=t_}}}function jX(I){const b=I.tView;return null===b||b.incompleteFirstPass?I.tView=EH(1,null,I.template,I.decls,I.vars,I.directiveDefs,I.pipeDefs,I.viewQuery,I.schemas,I.consts):b}function EH(I,b,F,_n,ca,_d,_p,t_,s_,A_){const C_=20+_n,G_=C_+ca,X_=function Vie(I,b){const F=[];for(let _n=0;_n<b;_n++)F.push(_n<I?null:t1);return F}(C_,G_),g0="function"==typeof A_?A_():A_;return X_[1]={type:I,blueprint:X_,template:F,queries:null,viewQuery:t_,declTNode:b,data:X_.slice().fill(null,C_),bindingStartIndex:C_,expandoStartIndex:G_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _d?_d():_d,pipeRegistry:"function"==typeof _p?_p():_p,firstChild:null,schemas:s_,consts:g0,incompleteFirstPass:!1}}function eJ(I,b,F,_n){const ca=CR(b);null===F?ca.push(_n):(ca.push(F),I.firstCreatePass&&JX(I).push(_n,ca.length-1))}function Qie(I,b,F){for(let _n in I)if(I.hasOwnProperty(_n)){const ca=I[_n];(F=null===F?{}:F).hasOwnProperty(_n)?F[_n].push(b,ca):F[_n]=[b,ca]}return F}function x2(I,b,F,_n,ca,_d,_p,t_){const s_=WS(b,F);let C_,A_=b.inputs;!t_&&null!=A_&&(C_=A_[_n])?(XR(I,F,C_,_n,ca),K6(b)&&function IH(I,b){const F=aR(b,I);16&F[2]||(F[2]|=64)}(F,b.index)):3&b.type&&(_n=function fQ(I){return"class"===I?"className":"for"===I?"htmlFor":"formaction"===I?"formAction":"innerHtml"===I?"innerHTML":"readonly"===I?"readOnly":"tabindex"===I?"tabIndex":I}(_n),ca=null!=_p?_p(ca,b.value||"",_n):ca,tT(_d)?_d.setProperty(s_,_n,ca):UT(_n)||(s_.setProperty?s_.setProperty(_n,ca):s_[_n]=ca))}function xP(I,b,F,_n){let ca=!1;if(d3()){const _d=function zie(I,b,F){const _n=I.directiveRegistry;let ca=null;if(_n)for(let _d=0;_d<_n.length;_d++){const _p=_n[_d];hH(F,_p.selectors,!1)&&(ca||(ca=[]),pL(_P(F,b),I,_p.type),PN(_p)?(WN(I,F),ca.unshift(_p)):ca.push(_p))}return ca}(I,b,F),_p=null===_n?null:{"":-1};if(null!==_d){ca=!0,Yie(F,I.data.length,_d.length);for(let C_=0;C_<_d.length;C_++){const G_=_d[C_];G_.providersResolver&&G_.providersResolver(G_)}let t_=!1,s_=!1,A_=V5(I,b,_d.length,null);for(let C_=0;C_<_d.length;C_++){const G_=_d[C_];F.mergedAttrs=eM(F.mergedAttrs,G_.hostAttrs),yV(I,F,b,A_,G_),bR(A_,G_,_p),null!==G_.contentQueries&&(F.flags|=8),(null!==G_.hostBindings||null!==G_.hostAttrs||0!==G_.hostVars)&&(F.flags|=128);const X_=G_.type.prototype;!t_&&(X_.ngOnChanges||X_.ngOnInit||X_.ngDoCheck)&&((I.preOrderHooks||(I.preOrderHooks=[])).push(F.index),t_=!0),!s_&&(X_.ngOnChanges||X_.ngDoCheck)&&((I.preOrderCheckHooks||(I.preOrderCheckHooks=[])).push(F.index),s_=!0),A_++}!function Hie(I,b){const _n=b.directiveEnd,ca=I.data,_d=b.attrs,_p=[];let t_=null,s_=null;for(let A_=b.directiveStart;A_<_n;A_++){const C_=ca[A_],G_=C_.inputs,X_=null===_d||P2(b)?null:qX(G_,_d);_p.push(X_),t_=Qie(G_,A_,t_),s_=Qie(C_.outputs,A_,s_)}null!==t_&&(t_.hasOwnProperty("class")&&(b.flags|=16),t_.hasOwnProperty("style")&&(b.flags|=32)),b.initialInputs=_p,b.inputs=t_,b.outputs=s_}(I,F)}_p&&function aT(I,b,F){if(b){const _n=I.localNames=[];for(let ca=0;ca<b.length;ca+=2){const _d=F[b[ca+1]];if(null==_d)throw new S_(-301,!1);_n.push(b[ca],_d)}}}(F,_n,_p)}return F.mergedAttrs=eM(F.mergedAttrs,F.attrs),ca}function qN(I,b,F,_n,ca,_d){const _p=_d.hostBindings;if(_p){let t_=I.hostBindingOpCodes;null===t_&&(t_=I.hostBindingOpCodes=[]);const s_=~b.index;(function tJ(I){let b=I.length;for(;b>0;){const F=I[--b];if("number"==typeof F&&F<0)return F}return 0})(t_)!=s_&&t_.push(s_),t_.push(_n,ca,_p)}}function HX(I,b){null!==I.hostBindings&&I.hostBindings(1,b)}function WN(I,b){b.flags|=2,(I.components||(I.components=[])).push(b.index)}function bR(I,b,F){if(F){if(b.exportAs)for(let _n=0;_n<b.exportAs.length;_n++)F[b.exportAs[_n]]=I;PN(b)&&(F[""]=I)}}function Yie(I,b,F){I.flags|=1,I.directiveStart=b,I.directiveEnd=b+F,I.providerIndexes=b}function yV(I,b,F,_n,ca){I.data[_n]=ca;const _d=ca.factory||(ca.factory=vR(ca.type)),_p=new gP(_d,PN(ca),null);I.blueprint[_n]=_p,F[_n]=_p,qN(I,b,0,_n,V5(I,F,ca.hostVars,t1),ca)}function LP(I,b,F){const _n=WS(b,I),ca=jX(F),_d=I[10],_p=vU(I,lQ(I,ca,null,F.onPush?64:16,_n,b,_d,_d.createRenderer(_n,F),null,null));I[b.index]=_p}function dS(I,b,F,_n,ca,_d){const _p=WS(I,b);!function M_(I,b,F,_n,ca,_d,_p){if(null==_d)tT(I)?I.removeAttribute(b,ca,F):b.removeAttribute(ca);else{const t_=null==_p?B_(_d):_p(_d,_n||"",ca);tT(I)?I.setAttribute(b,ca,t_,F):F?b.setAttributeNS(F,ca,t_):b.setAttribute(ca,t_)}}(b[11],_p,_d,I.value,F,_n,ca)}function SL(I,b,F,_n,ca,_d){const _p=_d[b];if(null!==_p){const t_=_n.setInput;for(let s_=0;s_<_p.length;){const A_=_p[s_++],C_=_p[s_++],G_=_p[s_++];null!==t_?_n.setInput(F,G_,A_,C_):F[C_]=G_}}}function qX(I,b){let F=null,_n=0;for(;_n<b.length;){const ca=b[_n];if(0!==ca)if(5!==ca){if("number"==typeof ca)break;I.hasOwnProperty(ca)&&(null===F&&(F=[]),F.push(ca,I[ca],b[_n+1])),_n+=2}else _n+=2;else _n+=4}return F}function CH(I,b,F,_n){return new Array(I,!0,!1,b,null,0,_n,F,null,null)}function EV(I,b){const F=aR(b,I);if(p2(F)){const _n=F[1];80&F[2]?G5(_n,F,_n.template,F[8]):F[5]>0&&IV(F)}}function IV(I){for(let _n=FO(I);null!==_n;_n=M3(_n))for(let ca=10;ca<_n.length;ca++){const _d=_n[ca];if(1024&_d[2]){const _p=_d[1];G5(_p,_d,_p.template,_d[8])}else _d[5]>0&&IV(_d)}const F=I[1].components;if(null!==F)for(let _n=0;_n<F.length;_n++){const ca=aR(F[_n],I);p2(ca)&&ca[5]>0&&IV(ca)}}function bV(I,b){const F=aR(b,I),_n=F[1];(function rJ(I,b){for(let F=b.length;F<I.blueprint.length;F++)b.push(I.blueprint[F])})(_n,F),vV(_n,F,F[8])}function vU(I,b){return I[13]?I[14][4]=b:I[13]=b,I[14]=b,b}function wH(I){for(;I;){I[2]|=64;const b=GI(I);if(H4(I)&&!b)return I;I=b}return null}function V3(I){!function MP(I){for(let b=0;b<I.components.length;b++){const F=I.components[b],_n=uV(F),ca=_n[1];Q5(ca,_n,ca.template,F)}}(I[8])}function zT(I,b,F){i5(0),b(I,F)}const AM=(()=>Promise.resolve(null))();function CR(I){return I[7]||(I[7]=[])}function JX(I){return I.cleanup||(I.cleanup=[])}function $X(I,b){const F=I[9],_n=F?F.get(CL,null):null;_n&&_n.handleError(b)}function XR(I,b,F,_n,ca){for(let _d=0;_d<F.length;){const _p=F[_d++],t_=F[_d++],s_=b[_p],A_=I.data[_p];null!==A_.setInput?A_.setInput(s_,ca,_n,t_):s_[t_]=ca}}function eO(I,b,F){const _n=lP(b,I);!function OT(I,b,F){tT(I)?I.setValue(b,F):b.textContent=F}(I[11],_n,F)}function _M(I,b,F){let _n=F?I.styles:null,ca=F?I.classes:null,_d=0;if(null!==b)for(let _p=0;_p<b.length;_p++){const t_=b[_p];"number"==typeof t_?_d=t_:1==_d?ca=n_(ca,t_):2==_d&&(_n=n_(_n,t_+": "+b[++_p]+";"))}F?I.styles=_n:I.stylesWithoutHost=_n,F?I.classes=ca:I.classesWithoutHost=ca}const mQ=new RT("INJECTOR",-1);class wR{get(b,F=BO){if(F===BO){const _n=new Error(`NullInjectorError: No provider for ${bh(b)}!`);throw _n.name="NullInjectorError",_n}return F}}const TH=new RT("Set Injector scope."),CV={},SH={};let iJ;function oJ(){return void 0===iJ&&(iJ=new wR),iJ}function sJ(I,b=null,F=null,_n){const ca=RH(I,b,F,_n);return ca._resolveInjectorDefTypes(),ca}function RH(I,b=null,F=null,_n){return new RL(I,F,b||oJ(),_n)}class RL{constructor(b,F,_n,ca=null){this.parent=_n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _d=[];F&&zR(F,t_=>this.processProvider(t_,b,F)),zR([b],t_=>this.processInjectorType(t_,[],_d)),this.records.set(mQ,wV(void 0,this));const _p=this.records.get(TH);this.scope=null!=_p?_p.value:null,this.source=ca||("object"==typeof b?null:bh(b))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(b=>b.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(b,F=BO,_n=KI.Default){this.assertNotDestroyed();const ca=P0(this),_d=qT(void 0);try{if(!(_n&KI.SkipSelf)){let t_=this.records.get(b);if(void 0===t_){const s_=function kH(I){return"function"==typeof I||"object"==typeof I&&I instanceof RT}(b)&&S1(b);t_=s_&&this.injectableDefInScope(s_)?wV(G3(b),CV):null,this.records.set(b,t_)}if(null!=t_)return this.hydrate(b,t_)}return(_n&KI.Self?oJ():this.parent).get(b,F=_n&KI.Optional&&F===BO?null:F)}catch(_p){if("NullInjectorError"===_p.name){if((_p[w2]=_p[w2]||[]).unshift(bh(b)),ca)throw _p;return function VN(I,b,F,_n){const ca=I[w2];throw b[W_]&&ca.unshift(b[W_]),I.message=function oN(I,b,F,_n=null){I=I&&"\n"===I.charAt(0)&&"\u0275"==I.charAt(1)?I.substr(2):I;let ca=bh(b);if(Array.isArray(b))ca=b.map(bh).join(" -> ");else if("object"==typeof b){let _d=[];for(let _p in b)if(b.hasOwnProperty(_p)){let t_=b[_p];_d.push(_p+":"+("string"==typeof t_?JSON.stringify(t_):bh(t_)))}ca=`{${_d.join(", ")}}`}return`${F}${_n?"("+_n+")":""}[${ca}]: ${I.replace(d_,"\n  ")}`}("\n"+I.message,ca,F,_n),I.ngTokenPath=ca,I[w2]=null,I}(_p,b,"R3InjectorError",this.source)}throw _p}finally{qT(_d),P0(ca)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(b=>this.get(b))}toString(){const b=[];return this.records.forEach((_n,ca)=>b.push(bh(ca))),`R3Injector[${b.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S_(205,!1)}processInjectorType(b,F,_n){if(!(b=p_(b)))return!1;let ca=XT(b);const _d=null==ca&&b.ngModule||void 0,_p=void 0===_d?b:_d,t_=-1!==_n.indexOf(_p);if(void 0!==_d&&(ca=XT(_d)),null==ca)return!1;if(null!=ca.imports&&!t_){let C_;_n.push(_p);try{zR(ca.imports,G_=>{this.processInjectorType(G_,F,_n)&&(void 0===C_&&(C_=[]),C_.push(G_))})}finally{}if(void 0!==C_)for(let G_=0;G_<C_.length;G_++){const{ngModule:X_,providers:g0}=C_[G_];zR(g0,x0=>this.processProvider(x0,X_,g0||$_))}}this.injectorDefTypes.add(_p);const s_=vR(_p)||(()=>new _p);this.records.set(_p,wV(s_,CV));const A_=ca.providers;if(null!=A_&&!t_){const C_=b;zR(A_,G_=>this.processProvider(G_,C_,A_))}return void 0!==_d&&void 0!==b.providers}processProvider(b,F,_n){let ca=UP(b=p_(b))?b:p_(b&&b.provide);const _d=function AQ(I,b,F){return BP(I)?wV(void 0,I.useValue):wV(OH(I),CV)}(b);if(UP(b)||!0!==b.multi)this.records.get(ca);else{let _p=this.records.get(ca);_p||(_p=wV(void 0,CV,!0),_p.factory=()=>_C(_p.multi),this.records.set(ca,_p)),ca=b,_p.multi.push(b)}this.records.set(ca,_d)}hydrate(b,F){return F.value===CV&&(F.value=SH,F.value=F.factory()),"object"==typeof F.value&&F.value&&function NH(I){return null!==I&&"object"==typeof I&&"function"==typeof I.ngOnDestroy}(F.value)&&this.onDestroy.add(F.value),F.value}injectableDefInScope(b){if(!b.providedIn)return!1;const F=p_(b.providedIn);return"string"==typeof F?"any"===F||F===this.scope:this.injectorDefTypes.has(F)}}function G3(I){const b=S1(I),F=null!==b?b.factory:vR(I);if(null!==F)return F;if(I instanceof RT)throw new S_(204,!1);if(I instanceof Function)return function Xie(I){const b=I.length;if(b>0)throw function y2(I,b){const F=[];for(let _n=0;_n<I;_n++)F.push(b);return F}(b,"?"),new S_(204,!1);const F=function ET(I){const b=I&&(I[XO]||I[VR]);if(b){const F=function xT(I){if(I.hasOwnProperty("name"))return I.name;const b=(""+I).match(/^function\s*([^\s(]+)/);return null===b?"":b[1]}(I);return console.warn(`DEPRECATED: DI is instantiating a token "${F}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${F}" class.`),b}return null}(I);return null!==F?()=>F.factory(I):()=>new I}(I);throw new S_(204,!1)}function OH(I,b,F){let _n;if(UP(I)){const ca=p_(I);return vR(ca)||G3(ca)}if(BP(I))_n=()=>p_(I.useValue);else if(function XX(I){return!(!I||!I.useFactory)}(I))_n=()=>I.useFactory(..._C(I.deps||[]));else if(function DH(I){return!(!I||!I.useExisting)}(I))_n=()=>SI(p_(I.useExisting));else{const ca=p_(I&&(I.useClass||I.provide));if(!function aJ(I){return!!I.deps}(I))return vR(ca)||G3(ca);_n=()=>new ca(..._C(I.deps))}return _n}function wV(I,b,F=!1){return{factory:I,value:b,multi:F?[]:void 0}}function BP(I){return null!==I&&"object"==typeof I&&p0 in I}function UP(I){return"function"==typeof I}let L2=(()=>{class I{static create(F,_n){var ca;if(Array.isArray(F))return sJ({name:""},_n,F,"");{const _d=null!==(ca=F.name)&&void 0!==ca?ca:"";return sJ({name:_d},F.parent,F.providers,_d)}}}return I.THROW_IF_NOT_FOUND=BO,I.NULL=new wR,I.\u0275prov=_w({token:I,providedIn:"any",factory:()=>SI(mQ)}),I.__NG_ELEMENT_ID__=-1,I})();function pJ(I,b){iU(uV(I)[1],ST())}function H5(I){let b=function EU(I){return Object.getPrototypeOf(I.prototype).constructor}(I.type),F=!0;const _n=[I];for(;b;){let ca;if(PN(I))ca=b.\u0275cmp||b.\u0275dir;else{if(b.\u0275cmp)throw new S_(903,"");ca=b.\u0275dir}if(ca){if(F){_n.push(ca);const _p=I;_p.inputs=W5(I.inputs),_p.declaredInputs=W5(I.declaredInputs),_p.outputs=W5(I.outputs);const t_=ca.hostBindings;t_&&aee(I,t_);const s_=ca.viewQuery,A_=ca.contentQueries;if(s_&&BH(I,s_),A_&&K5(I,A_),_l(I.inputs,ca.inputs),_l(I.declaredInputs,ca.declaredInputs),_l(I.outputs,ca.outputs),PN(ca)&&ca.data.animation){const C_=I.data;C_.animation=(C_.animation||[]).concat(ca.data.animation)}}const _d=ca.features;if(_d)for(let _p=0;_p<_d.length;_p++){const t_=_d[_p];t_&&t_.ngInherit&&t_(I),t_===H5&&(F=!1)}}b=Object.getPrototypeOf(b)}!function q5(I){let b=0,F=null;for(let _n=I.length-1;_n>=0;_n--){const ca=I[_n];ca.hostVars=b+=ca.hostVars,ca.hostAttrs=eM(ca.hostAttrs,F=eM(F,ca.hostAttrs))}}(_n)}function W5(I){return I===tS?{}:I===$_?[]:I}function BH(I,b){const F=I.viewQuery;I.viewQuery=F?(_n,ca)=>{b(_n,ca),F(_n,ca)}:b}function K5(I,b){const F=I.contentQueries;I.contentQueries=F?(_n,ca,_d)=>{b(_n,ca,_d),F(_n,ca,_d)}:b}function aee(I,b){const F=I.hostBindings;I.hostBindings=F?(_n,ca)=>{b(_n,ca),F(_n,ca)}:b}let UH=null;function H3(){if(!UH){const I=P1.Symbol;if(I&&I.iterator)UH=I.iterator;else{const b=Object.getOwnPropertyNames(Map.prototype);for(let F=0;F<b.length;++F){const _n=b[F];"entries"!==_n&&"size"!==_n&&Map.prototype[_n]===Map.prototype.entries&&(UH=_n)}}}return UH}function q3(I){return!!jH(I)&&(Array.isArray(I)||!(I instanceof Map)&&H3()in I)}function jH(I){return null!==I&&("function"==typeof I||"object"==typeof I)}function TR(I,b,F){return!Object.is(I[b],F)&&(I[b]=F,!0)}function VH(I,b,F,_n){const ca=j0();return TR(ca,fP(),b)&&(R1(),dS(gS(),ca,I,b,F,_n)),VH}function dee(I,b,F,_n,ca,_d,_p,t_){const s_=j0(),A_=R1(),C_=I+20,G_=A_.firstCreatePass?function lee(I,b,F,_n,ca,_d,_p,t_,s_){const A_=b.consts,C_=j5(b,I,4,_p||null,MT(A_,t_));xP(b,F,C_,MT(A_,s_)),iU(b,C_);const G_=C_.tViews=EH(2,C_,_n,ca,_d,b.directiveRegistry,b.pipeRegistry,null,b.schemas,A_);return null!==b.queries&&(b.queries.template(b,C_),G_.queries=b.queries.embeddedTView(C_)),C_}(C_,A_,s_,b,F,_n,ca,_d,_p):A_.data[C_];NO(G_,!1);const X_=s_[11].createComment("");k2(A_,s_,X_,G_),xS(X_,s_),vU(s_,s_[C_]=CH(X_,s_,X_,G_)),kN(G_)&&$Y(A_,s_,G_),null!=_p&&ZY(s_,G_,t_)}function e8(I,b=KI.Default){const F=j0();return null===F?SI(I,b):rM(ST(),F,p_(I),b)}function DV(){throw new Error("invalid")}function IJ(I,b,F){const _n=j0();return TR(_n,fP(),b)&&x2(R1(),gS(),_n,I,b,_n[11],F,!1),IJ}function _T(I,b,F,_n,ca){const _p=ca?"class":"style";XR(I,F,b.inputs[_p],_p,_n)}function SQ(I,b,F,_n){const ca=j0(),_d=R1(),_p=20+I,t_=ca[11],s_=ca[_p]=lS(t_,b,function u5(){return zI.lFrame.currentNamespace}()),A_=_d.firstCreatePass?function TQ(I,b,F,_n,ca,_d,_p){const t_=b.consts,A_=j5(b,I,2,ca,MT(t_,_d));return xP(b,F,A_,MT(t_,_p)),null!==A_.attrs&&_M(A_,A_.attrs,!1),null!==A_.mergedAttrs&&_M(A_,A_.mergedAttrs,!0),null!==b.queries&&b.queries.elementStart(b,A_),A_}(_p,_d,ca,0,b,F,_n):_d.data[_p];NO(A_,!0);const C_=A_.mergedAttrs;null!==C_&&BT(t_,s_,C_);const G_=A_.classes;null!==G_&&B5(t_,s_,G_);const X_=A_.styles;return null!==X_&&DX(t_,s_,X_),64!=(64&A_.flags)&&k2(_d,ca,s_,A_),0===function lL(){return zI.lFrame.elementDepthCount}()&&xS(s_,ca),function K4(){zI.lFrame.elementDepthCount++}(),kN(A_)&&($Y(_d,ca,A_),hQ(_d,A_,ca)),null!==_n&&ZY(ca,A_),SQ}function J3(){let I=ST();z4()?MN():(I=I.parent,NO(I,!1));const b=I;!function eU(){zI.lFrame.elementDepthCount--}();const F=R1();return F.firstCreatePass&&(iU(F,I),s3(I)&&F.queries.elementEnd(I)),null!=b.classesWithoutHost&&function G9(I){return 0!=(16&I.flags)}(b)&&_T(F,b,j0(),b.classesWithoutHost,!0),null!=b.stylesWithoutHost&&function fT(I){return 0!=(32&I.flags)}(b)&&_T(F,b,j0(),b.stylesWithoutHost,!1),J3}function SU(I,b,F,_n){return SQ(I,b,F,_n),J3(),SU}function NV(I,b,F){const _n=j0(),ca=R1(),_d=I+20,_p=ca.firstCreatePass?function bJ(I,b,F,_n,ca){const _d=b.consts,_p=MT(_d,_n),t_=j5(b,I,8,"ng-container",_p);return null!==_p&&_M(t_,_p,!0),xP(b,F,t_,MT(_d,ca)),null!==b.queries&&b.queries.elementStart(b,t_),t_}(_d,ca,_n,b,F):ca.data[_d];NO(_p,!0);const t_=_n[_d]=_n[11].createComment("");return k2(ca,_n,t_,_p),xS(t_,_n),kN(_p)&&($Y(ca,_n,_p),hQ(ca,_p,_n)),null!=F&&ZY(_n,_p),NV}function WH(){let I=ST();const b=R1();return z4()?MN():(I=I.parent,NO(I,!1)),b.firstCreatePass&&(iU(b,I),s3(I)&&b.queries.elementEnd(I)),WH}function KH(){return j0()}function kV(I){return!!I&&"function"==typeof I.then}function PV(I){return!!I&&"function"==typeof I.subscribe}const RU=PV;function xV(I,b,F,_n){const ca=j0(),_d=R1(),_p=ST();return function t8(I,b,F,_n,ca,_d,_p,t_){const s_=kN(_n),C_=I.firstCreatePass&&JX(I),G_=b[8],X_=CR(b);let g0=!0;if(3&_n.type||t_){const fI=WS(_n,b),TI=t_?t_(fI):fI,F0=X_.length,xI=t_?j1=>t_(Y1(j1[_n.index])):_n.index;if(tT(F)){let j1=null;if(!t_&&s_&&(j1=function wJ(I,b,F,_n){const ca=I.cleanup;if(null!=ca)for(let _d=0;_d<ca.length-1;_d+=2){const _p=ca[_d];if(_p===F&&ca[_d+1]===_n){const t_=b[7],s_=ca[_d+2];return t_.length>s_?t_[s_]:null}"string"==typeof _p&&(_d+=2)}return null}(I,b,ca,_n.index)),null!==j1)(j1.__ngLastListenerFn__||j1).__ngNextListenerFn__=_d,j1.__ngLastListenerFn__=_d,g0=!1;else{_d=n8(_n,b,G_,_d,!1);const d1=F.listen(TI,ca,_d);X_.push(_d,d1),C_&&C_.push(ca,xI,F0,F0+1)}}else _d=n8(_n,b,G_,_d,!0),TI.addEventListener(ca,_d,_p),X_.push(_d),C_&&C_.push(ca,xI,F0,_p)}else _d=n8(_n,b,G_,_d,!1);const x0=_n.outputs;let Y0;if(g0&&null!==x0&&(Y0=x0[ca])){const fI=Y0.length;if(fI)for(let TI=0;TI<fI;TI+=2){const BS=b[Y0[TI]][Y0[TI+1]].subscribe(_d),jU=X_.length;X_.push(_d,BS),C_&&C_.push(ca,_n.index,jU,-(jU+1))}}}(_d,ca,ca[11],_p,I,b,!!F,_n),xV}function TJ(I,b,F,_n){try{return!1!==F(_n)}catch(ca){return $X(I,ca),!1}}function n8(I,b,F,_n,ca){return function _d(_p){if(_p===Function)return _n;const t_=2&I.flags?aR(I.index,b):b;0==(32&b[2])&&wH(t_);let s_=TJ(b,0,_n,_p),A_=_d.__ngNextListenerFn__;for(;A_;)s_=TJ(b,0,A_,_p)&&s_,A_=A_.__ngNextListenerFn__;return ca&&!1===s_&&(_p.preventDefault(),_p.returnValue=!1),s_}}function zH(I=1){return function RG(I){return(zI.lFrame.contextLView=function $4(I,b){for(;I>0;)b=b[15],I--;return b}(I,zI.lFrame.contextLView))[8]}(I)}function bee(I,b,F,_n,ca){const _d=I[F+1],_p=null===b;let t_=_n?gM(_d):U3(_d),s_=!1;for(;0!==t_&&(!1===s_||_p);){const C_=I[t_+1];OJ(I[t_],b)&&(s_=!0,I[t_+1]=_n?U5(C_):PX(C_)),t_=_n?gM(C_):U3(C_)}s_&&(I[F+1]=_n?PX(_d):U5(_d))}function OJ(I,b){return null===I||null==b||(Array.isArray(I)?I[1]:I)===b||!(!Array.isArray(I)||"string"!=typeof b)&&_L(I,b)>=0}const MS={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $3(I){return I.substring(MS.key,MS.keyEnd)}function DQ(I,b){const F=MS.textEnd;return F===b?-1:(b=MS.keyEnd=function DU(I,b,F){for(;b<F&&I.charCodeAt(b)>32;)b++;return b}(I,MS.key=b,F),yM(I,b,F))}function yM(I,b,F){for(;b<F&&I.charCodeAt(b)<=32;)b++;return b}function kJ(I,b,F){return EO(I,b,F,!1),kJ}function PJ(I,b){return EO(I,b,null,!0),PJ}function xJ(I){!function V2(I,b,F,_n){const ca=R1(),_d=OS(2);ca.firstUpdatePass&&NT(ca,null,_d,_n);const _p=j0();if(F!==t1&&TR(_p,_d,F)){const t_=ca.data[KS()];if(See(t_,_n)&&!wee(ca,_d)){let s_=_n?t_.classesWithoutHost:t_.stylesWithoutHost;null!==s_&&(F=n_(s_,F||"")),_T(ca,t_,_p,F,_n)}else!function MJ(I,b,F,_n,ca,_d,_p,t_){ca===t1&&(ca=$_);let s_=0,A_=0,C_=0<ca.length?ca[0]:null,G_=0<_d.length?_d[0]:null;for(;null!==C_||null!==G_;){const X_=s_<ca.length?ca[s_+1]:void 0,g0=A_<_d.length?_d[A_+1]:void 0;let Y0,x0=null;C_===G_?(s_+=2,A_+=2,X_!==g0&&(x0=G_,Y0=g0)):null===G_||null!==C_&&C_<G_?(s_+=2,x0=C_):(A_+=2,x0=G_,Y0=g0),null!==x0&&FV(I,b,F,_n,x0,Y0,_p,t_),C_=s_<ca.length?ca[s_]:null,G_=A_<_d.length?_d[A_]:null}}(ca,t_,_p,_p[11],_p[_d+1],_p[_d+1]=function Tee(I,b,F){if(null==F||""===F)return $_;const _n=[],ca=AO(F);if(Array.isArray(ca))for(let _d=0;_d<ca.length;_d++)I(_n,ca[_d],!0);else if("object"==typeof ca)for(const _d in ca)ca.hasOwnProperty(_d)&&I(_n,_d,ca[_d]);else"string"==typeof ca&&b(_n,ca);return _n}(I,b,F),_n,_d)}}(IR,j2,I,!0)}function j2(I,b){for(let F=function F2(I){return function NQ(I){MS.key=0,MS.keyEnd=0,MS.value=0,MS.valueEnd=0,MS.textEnd=I.length}(I),DQ(I,yM(I,0,MS.textEnd))}(b);F>=0;F=DQ(b,F))IR(I,$3(b),!0)}function EO(I,b,F,_n){const ca=j0(),_d=R1(),_p=OS(2);_d.firstUpdatePass&&NT(_d,I,_p,_n),b!==t1&&TR(ca,_p,b)&&FV(_d,_d.data[KS()],ca,ca[11],I,ca[_p+1]=function ZH(I,b){return null==I||("string"==typeof b?I+=b:"object"==typeof I&&(I=bh(AO(I)))),I}(b,F),_n,_p)}function wee(I,b){return b>=I.expandoStartIndex}function NT(I,b,F,_n){const ca=I.data;if(null===ca[F+1]){const _d=ca[KS()],_p=wee(I,F);See(_d,_n)&&null===b&&!_p&&(b=!1),b=function GP(I,b,F,_n){const ca=JL(I);let _d=_n?b.residualClasses:b.residualStyles;if(null===ca)0===(_n?b.classBindings:b.styleBindings)&&(F=DL(F=i8(null,I,b,F,_n),b.attrs,_n),_d=null);else{const _p=b.directiveStylingLast;if(-1===_p||I[_p]!==ca)if(F=i8(ca,I,b,F,_n),null===_d){let s_=function UV(I,b,F){const _n=F?b.classBindings:b.styleBindings;if(0!==U3(_n))return I[gM(_n)]}(I,b,_n);void 0!==s_&&Array.isArray(s_)&&(s_=i8(null,I,b,s_[1],_n),s_=DL(s_,b.attrs,_n),function LJ(I,b,F,_n){I[gM(F?b.classBindings:b.styleBindings)]=_n}(I,b,_n,s_))}else _d=function $H(I,b,F){let _n;const ca=b.directiveEnd;for(let _d=1+b.directiveStylingLast;_d<ca;_d++)_n=DL(_n,I[_d].hostAttrs,F);return DL(_n,b.attrs,F)}(I,b,_n)}return void 0!==_d&&(_n?b.residualClasses=_d:b.residualStyles=_d),F}(ca,_d,b,_n),function VP(I,b,F,_n,ca,_d){let _p=_d?b.classBindings:b.styleBindings,t_=gM(_p),s_=U3(_p);I[_n]=F;let C_,A_=!1;if(Array.isArray(F)){const G_=F;C_=G_[1],(null===C_||_L(G_,C_)>0)&&(A_=!0)}else C_=F;if(ca)if(0!==s_){const X_=gM(I[t_+1]);I[_n+1]=mH(X_,t_),0!==X_&&(I[X_+1]=AH(I[X_+1],_n)),I[t_+1]=function ide(I,b){return 131071&I|b<<17}(I[t_+1],_n)}else I[_n+1]=mH(t_,0),0!==t_&&(I[t_+1]=AH(I[t_+1],_n)),t_=_n;else I[_n+1]=mH(s_,0),0===t_?t_=_n:I[s_+1]=AH(I[s_+1],_n),s_=_n;A_&&(I[_n+1]=PX(I[_n+1])),bee(I,C_,_n,!0),bee(I,C_,_n,!1),function Iee(I,b,F,_n,ca){const _d=ca?I.residualClasses:I.residualStyles;null!=_d&&"string"==typeof b&&_L(_d,b)>=0&&(F[_n+1]=U5(F[_n+1]))}(b,C_,I,_n,_d),_p=mH(t_,s_),_d?b.classBindings=_p:b.styleBindings=_p}(ca,_d,b,F,_p,_n)}}function i8(I,b,F,_n,ca){let _d=null;const _p=F.directiveEnd;let t_=F.directiveStylingLast;for(-1===t_?t_=F.directiveStart:t_++;t_<_p&&(_d=b[t_],_n=DL(_n,_d.hostAttrs,ca),_d!==I);)t_++;return null!==I&&(F.directiveStylingLast=t_),_n}function DL(I,b,F){const _n=F?1:2;let ca=-1;if(null!==b)for(let _d=0;_d<b.length;_d++){const _p=b[_d];"number"==typeof _p?ca=_p:ca===_n&&(Array.isArray(I)||(I=void 0===I?[]:["",I]),IR(I,_p,!!F||b[++_d]))}return void 0===I?null:I}function FV(I,b,F,_n,ca,_d,_p,t_){if(!(3&b.type))return;const s_=I.data,A_=s_[t_+1];jV(function Oie(I){return 1==(1&I)}(A_)?BJ(s_,b,F,ca,U3(A_),_p):void 0)||(jV(_d)||function Rie(I){return 2==(2&I)}(A_)&&(_d=BJ(s_,null,F,ca,t_,_p)),function dH(I,b,F,_n,ca){const _d=tT(I);if(b)ca?_d?I.addClass(F,_n):F.classList.add(_n):_d?I.removeClass(F,_n):F.classList.remove(_n);else{let _p=-1===_n.indexOf("-")?void 0:O_.DashCase;if(null==ca)_d?I.removeStyle(F,_n,_p):F.style.removeProperty(_n);else{const t_="string"==typeof ca&&ca.endsWith("!important");t_&&(ca=ca.slice(0,-10),_p|=O_.Important),_d?I.setStyle(F,_n,ca,_p):F.style.setProperty(_n,ca,t_?"important":"")}}}(_n,_p,lP(KS(),F),ca,_d))}function BJ(I,b,F,_n,ca,_d){const _p=null===b;let t_;for(;ca>0;){const s_=I[ca],A_=Array.isArray(s_),C_=A_?s_[1]:s_,G_=null===C_;let X_=F[ca+1];X_===t1&&(X_=G_?$_:void 0);let g0=G_?aM(X_,_n):C_===_n?X_:void 0;if(A_&&!jV(g0)&&(g0=aM(s_,_n)),jV(g0)&&(t_=g0,_p))return t_;const x0=I[ca+1];ca=_p?gM(x0):U3(x0)}if(null!==b){let s_=_d?b.residualClasses:b.residualStyles;null!=s_&&(t_=aM(s_,_n))}return t_}function jV(I){return void 0!==I}function See(I,b){return 0!=(I.flags&(b?16:32))}function Ree(I,b=""){const F=j0(),_n=R1(),ca=I+20,_d=_n.firstCreatePass?j5(_n,ca,1,b,null):_n.data[ca],_p=F[ca]=function pV(I,b){return tT(I)?I.createText(b):I.createTextNode(b)}(F[11],b);k2(_n,F,_p,_d),NO(_d,!1)}function UJ(I){return o8("",I,""),UJ}function o8(I,b,F){const _n=j0(),ca=function bU(I,b,F,_n){return TR(I,fP(),F)?b+B_(F)+_n:t1}(_n,I,b,F);return ca!==t1&&eO(_n,KS(),ca),o8}function u8(I,b,F){const _n=j0();if(TR(_n,fP(),b)){const _d=R1(),_p=gS();x2(_d,_p,_n,I,b,function pQ(I,b,F){return(null===I||PN(I))&&(F=function uL(I){for(;Array.isArray(I);){if("object"==typeof I[1])return I;I=I[0]}return null}(F[b.index])),F[11]}(JL(_d.data),_p,_n),F,!0)}return u8}const X3=void 0;var woe=["en",[["a","p"],["AM","PM"],X3],[["AM","PM"],X3,X3],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],X3,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],X3,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",X3,"{1} 'at' {0}",X3],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Coe(I){const F=Math.floor(Math.abs(I)),_n=I.toString().replace(/^[^.]*\.?/,"").length;return 1===F&&0===_n?1:5}];let e4={};function oW(I){const b=function aW(I){return I.toLowerCase().replace(/_/g,"-")}(I);let F=MQ(b);if(F)return F;const _n=b.split("-")[0];if(F=MQ(_n),F)return F;if("en"===_n)return woe;throw new Error(`Missing locale data for the locale "${I}".`)}function GJ(I){return oW(I)[$I.PluralCase]}function MQ(I){return I in e4||(e4[I]=P1.ng&&P1.ng.common&&P1.ng.common.locales&&P1.ng.common.locales[I]),e4[I]}var $I=(()=>(($I=$I||{})[$I.LocaleId=0]="LocaleId",$I[$I.DayPeriodsFormat=1]="DayPeriodsFormat",$I[$I.DayPeriodsStandalone=2]="DayPeriodsStandalone",$I[$I.DaysFormat=3]="DaysFormat",$I[$I.DaysStandalone=4]="DaysStandalone",$I[$I.MonthsFormat=5]="MonthsFormat",$I[$I.MonthsStandalone=6]="MonthsStandalone",$I[$I.Eras=7]="Eras",$I[$I.FirstDayOfWeek=8]="FirstDayOfWeek",$I[$I.WeekendRange=9]="WeekendRange",$I[$I.DateFormat=10]="DateFormat",$I[$I.TimeFormat=11]="TimeFormat",$I[$I.DateTimeFormat=12]="DateTimeFormat",$I[$I.NumberSymbols=13]="NumberSymbols",$I[$I.NumberFormats=14]="NumberFormats",$I[$I.CurrencyCode=15]="CurrencyCode",$I[$I.CurrencySymbol=16]="CurrencySymbol",$I[$I.CurrencyName=17]="CurrencyName",$I[$I.Currencies=18]="Currencies",$I[$I.Directionality=19]="Directionality",$I[$I.PluralCase=20]="PluralCase",$I[$I.ExtraData=21]="ExtraData",$I))();const l8="en-US";let HJ=l8;function r$(I,b,F,_n,ca){if(I=p_(I),Array.isArray(I))for(let _d=0;_d<I.length;_d++)r$(I[_d],b,F,_n,ca);else{const _d=R1(),_p=j0();let t_=UP(I)?I:p_(I.provide),s_=OH(I);const A_=ST(),C_=1048575&A_.providerIndexes,G_=A_.directiveStart,X_=A_.providerIndexes>>20;if(UP(I)||!I.multi){const g0=new gP(s_,ca,e8),x0=bW(t_,b,ca?C_:C_+X_,G_);-1===x0?(pL(_P(A_,_p),_d,t_),y8(_d,I,b.length),b.push(t_),A_.directiveStart++,A_.directiveEnd++,ca&&(A_.providerIndexes+=1048576),F.push(g0),_p.push(g0)):(F[x0]=g0,_p[x0]=g0)}else{const g0=bW(t_,b,C_+X_,G_),x0=bW(t_,b,C_,C_+X_),Y0=g0>=0&&F[g0],fI=x0>=0&&F[x0];if(ca&&!fI||!ca&&!Y0){pL(_P(A_,_p),_d,t_);const TI=function CW(I,b,F,_n,ca){const _d=new gP(I,F,e8);return _d.multi=[],_d.index=b,_d.componentProviders=0,s4(_d,ca,_n&&!F),_d}(ca?ete:Xee,F.length,ca,_n,s_);!ca&&fI&&(F[x0].providerFactory=TI),y8(_d,I,b.length,0),b.push(t_),A_.directiveStart++,A_.directiveEnd++,ca&&(A_.providerIndexes+=1048576),F.push(TI),_p.push(TI)}else y8(_d,I,g0>-1?g0:x0,s4(F[ca?x0:g0],s_,!ca&&_n));!ca&&_n&&fI&&F[x0].componentProviders++}}}function y8(I,b,F,_n){const ca=UP(b),_d=function eee(I){return!!I.useClass}(b);if(ca||_d){const s_=(_d?p_(b.useClass):b).prototype.ngOnDestroy;if(s_){const A_=I.destroyHooks||(I.destroyHooks=[]);if(!ca&&b.multi){const C_=A_.indexOf(F);-1===C_?A_.push(F,[_n,s_]):A_[C_+1].push(_n,s_)}else A_.push(F,s_)}}}function s4(I,b,F){return F&&I.componentProviders++,I.multi.push(b)-1}function bW(I,b,F,_n){for(let ca=F;ca<_n;ca++)if(b[ca]===I)return ca;return-1}function Xee(I,b,F,_n){return WV(this.multi,[])}function ete(I,b,F,_n){const ca=this.multi;let _d;if(this.providerFactory){const _p=this.providerFactory.componentProviders,t_=A2(F,F[1],this.providerFactory.index,_n);_d=t_.slice(0,_p),WV(ca,_d);for(let s_=_p;s_<t_.length;s_++)_d.push(t_[s_])}else _d=[],WV(ca,_d);return _d}function WV(I,b){for(let F=0;F<I.length;F++)b.push((0,I[F])());return b}function a4(I,b=[]){return F=>{F.providersResolver=(_n,ca)=>function xoe(I,b,F){const _n=R1();if(_n.firstCreatePass){const ca=PN(I);r$(F,_n.data,_n.blueprint,ca,!0),r$(b,_n.data,_n.blueprint,ca,!1)}}(_n,ca?ca(I):I,b)}}class o${}class tte{resolveComponentFactory(b){throw function Loe(I){const b=Error(`No component factory found for ${bh(I)}. Did you add it to @NgModule.entryComponents?`);return b.ngComponent=I,b}(b)}}let YQ=(()=>{class I{}return I.NULL=new tte,I})();function E8(){return EM(ST(),j0())}function EM(I,b){return new I8(WS(I,b))}let I8=(()=>{class I{constructor(F){this.nativeElement=F}}return I.__NG_ELEMENT_ID__=E8,I})();function nte(I){return I instanceof I8?I.nativeElement:I}class NL{}let rte=(()=>{class I{}return I.__NG_ELEMENT_ID__=()=>function LU(){const I=j0(),F=aR(ST().index,I);return function s$(I){return I[11]}(qR(F)?F:I)}(),I})(),Moe=(()=>{class I{}return I.\u0275prov=_w({token:I,providedIn:"root",factory:()=>null}),I})();class YV{constructor(b){this.full=b,this.major=b.split(".")[0],this.minor=b.split(".")[1],this.patch=b.split(".").slice(2).join(".")}}const ite=new YV("13.3.8"),$Q={};function ZQ(I,b,F,_n,ca=!1){for(;null!==F;){const _d=b[F.index];if(null!==_d&&_n.push(Y1(_d)),NN(_d))for(let t_=10;t_<_d.length;t_++){const s_=_d[t_],A_=s_[1].firstChild;null!==A_&&ZQ(s_[1],s_,A_,_n)}const _p=F.type;if(8&_p)ZQ(I,b,F.child,_n);else if(32&_p){const t_=N0(F,b);let s_;for(;s_=t_();)_n.push(s_)}else if(16&_p){const t_=SX(b,F);if(Array.isArray(t_))_n.push(...t_);else{const s_=GI(b[16]);ZQ(s_[1],s_,t_,_n,!0)}}F=ca?F.projectionNext:F.next}return _n}class c4{constructor(b,F){this._lView=b,this._cdRefInjectingView=F,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const b=this._lView,F=b[1];return ZQ(F,b,F.firstChild,[])}get context(){return this._lView[8]}set context(b){this._lView[8]=b}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const b=this._lView[3];if(NN(b)){const F=b[8],_n=F?F.indexOf(this):-1;_n>-1&&(e1(b,_n),sM(F,_n))}this._attachedToViewContainer=!1}CX(this._lView[1],this._lView)}onDestroy(b){eJ(this._lView[1],this._lView,null,b)}markForCheck(){wH(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function yU(I,b,F){const _n=b[10];_n.begin&&_n.begin();try{G5(I,b,I.template,F)}catch(ca){throw $X(b,ca),ca}finally{_n.end&&_n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S_(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function B3(I,b){b0(I,b,b[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(b){if(this._attachedToViewContainer)throw new S_(902,"");this._appRef=b}}class XQ extends c4{constructor(b){super(b),this._view=b}detectChanges(){V3(this._view)}checkNoChanges(){}get context(){return null}}class wW extends YQ{constructor(b){super(),this.ngModule=b}resolveComponentFactory(b){const F=wS(b);return new t7(F,this.ngModule)}}function e7(I){const b=[];for(let F in I)I.hasOwnProperty(F)&&b.push({propName:I[F],templateName:F});return b}class t7 extends o${constructor(b,F){super(),this.componentDef=b,this.ngModule=F,this.componentType=b.type,this.selector=function HY(I){return I.map(iQ).join(",")}(b.selectors),this.ngContentSelectors=b.ngContentSelectors?b.ngContentSelectors:[],this.isBoundToModule=!!F}get inputs(){return e7(this.componentDef.inputs)}get outputs(){return e7(this.componentDef.outputs)}create(b,F,_n,ca){const _d=(ca=ca||this.ngModule)?function Uoe(I,b){return{get:(F,_n,ca)=>{const _d=I.get(F,$Q,ca);return _d!==$Q||_n===$Q?_d:b.get(F,_n,ca)}}}(b,ca.injector):b,_p=_d.get(NL,ZM),t_=_d.get(Moe,null),s_=_p.createRenderer(null,this.componentDef),A_=this.componentDef.selectors[0][0]||"div",C_=_n?function GX(I,b,F){if(tT(I))return I.selectRootElement(b,F===G1.ShadowDom);let _n="string"==typeof b?I.querySelector(b):b;return _n.textContent="",_n}(s_,_n,this.componentDef.encapsulation):lS(_p.createRenderer(null,this.componentDef),A_,function Boe(I){const b=I.toLowerCase();return"svg"===b?"svg":"math"===b?"math":null}(A_)),G_=this.componentDef.onPush?576:528,X_=function see(I,b){return{components:[],scheduler:I||P5,clean:AM,playerHandler:b||null,flags:0}}(),g0=EH(0,null,null,1,0,null,null,null,null,null),x0=lQ(null,g0,X_,G_,null,null,_p,s_,t_,_d);let Y0,fI;pP(x0);try{const TI=function Q3(I,b,F,_n,ca,_d){const _p=F[1];F[20]=I;const s_=j5(_p,20,2,"#host",null),A_=s_.mergedAttrs=b.hostAttrs;null!==A_&&(_M(s_,A_,!0),null!==I&&(BT(ca,I,A_),null!==s_.classes&&B5(ca,I,s_.classes),null!==s_.styles&&DX(ca,I,s_.styles)));const C_=_n.createRenderer(I,b),G_=lQ(F,jX(b),null,b.onPush?64:16,F[20],s_,_n,C_,_d||null,null);return _p.firstCreatePass&&(pL(_P(s_,F),_p,b.type),WN(_p,s_),Yie(s_,F.length,1)),vU(F,G_),F[20]=G_}(C_,this.componentDef,x0,_p,s_);if(C_)if(_n)BT(s_,C_,["ng-version",ite.full]);else{const{attrs:F0,classes:xI}=function fH(I){const b=[],F=[];let _n=1,ca=2;for(;_n<I.length;){let _d=I[_n];if("string"==typeof _d)2===ca?""!==_d&&b.push(_d,I[++_n]):8===ca&&F.push(_d);else{if(!QN(ca))break;ca=_d}_n++}return{attrs:b,classes:F}}(this.componentDef.selectors[0]);F0&&BT(s_,C_,F0),xI&&xI.length>0&&B5(s_,C_,xI.join(" "))}if(fI=LT(g0,20),void 0!==F){const F0=fI.projection=[];for(let xI=0;xI<this.ngContentSelectors.length;xI++){const j1=F[xI];F0.push(null!=j1?Array.from(j1):null)}}Y0=function fJ(I,b,F,_n,ca){const _d=F[1],_p=function Wie(I,b,F){const _n=ST();I.firstCreatePass&&(F.providersResolver&&F.providersResolver(F),yV(I,_n,b,V5(I,b,1,null),F));const ca=A2(b,I,_n.directiveStart,_n);xS(ca,b);const _d=WS(_n,b);return _d&&xS(_d,b),ca}(_d,F,b);if(_n.components.push(_p),I[8]=_p,ca&&ca.forEach(s_=>s_(_p,b)),b.contentQueries){const s_=ST();b.contentQueries(1,_p,s_.directiveStart)}const t_=ST();return!_d.firstCreatePass||null===b.hostBindings&&null===b.hostAttrs||(dL(t_.index),qN(F[1],t_,0,t_.directiveStart,t_.directiveEnd,b),HX(b,_p)),_p}(TI,this.componentDef,x0,X_,[pJ]),vV(g0,x0,null)}finally{gO()}return new ote(this.componentType,Y0,EM(fI,x0),x0,fI)}}class ote extends class i${}{constructor(b,F,_n,ca,_d){super(),this.location=_n,this._rootLView=ca,this._tNode=_d,this.instance=F,this.hostView=this.changeDetectorRef=new XQ(ca),this.componentType=b}get injector(){return new CP(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(b){this.hostView.onDestroy(b)}}class u4{}class JS{}const MU=new Map;class l4 extends u4{constructor(b,F){super(),this._parent=F,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wW(this);const _n=TS(b);this._bootstrapComponents=Nf(_n.bootstrap),this._r3Injector=RH(b,F,[{provide:u4,useValue:this},{provide:YQ,useValue:this.componentFactoryResolver}],bh(b)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(b)}get(b,F=L2.THROW_IF_NOT_FOUND,_n=KI.Default){return b===L2||b===u4||b===mQ?this:this._r3Injector.get(b,F,_n)}destroy(){const b=this._r3Injector;!b.destroyed&&b.destroy(),this.destroyCbs.forEach(F=>F()),this.destroyCbs=null}onDestroy(b){this.destroyCbs.push(b)}}class cte extends JS{constructor(b){super(),this.moduleType=b,null!==TS(b)&&function KP(I){const b=new Set;!function F(_n){const ca=TS(_n,!0),_d=ca.id;null!==_d&&(function n7(I,b,F){if(b&&b!==F)throw new Error(`Duplicate module registered for ${I} - ${bh(b)} vs ${bh(b.name)}`)}(_d,MU.get(_d),_n),MU.set(_d,_n));const _p=Nf(ca.imports);for(const t_ of _p)b.has(t_)||(b.add(t_),F(t_))}(I)}(b)}create(b){return new l4(this.moduleType,b)}}function TW(I,b,F,_n,ca){return function RW(I,b,F,_n,ca,_d,_p){const t_=b+F;return function K3(I,b,F,_n){const ca=TR(I,b,F);return TR(I,b+1,_n)||ca}(I,t_,ca,_d)?function OL(I,b,F){return I[b]=F}(I,t_+2,_p?_n.call(_p,ca,_d):_n(ca,_d)):function h4(I,b){const F=I[b];return F===t1?void 0:F}(I,t_+2)}(j0(),function yR(){const I=zI.lFrame;let b=I.bindingRootIndex;return-1===b&&(b=I.bindingRootIndex=I.tView.bindingStartIndex),b}(),I,b,F,_n,ca)}function d$(I){return b=>{setTimeout(I,void 0,b)}}const PL=class Woe extends f.x{constructor(b=!1){super(),this.__isAsync=b}emit(b){super.next(b)}subscribe(b,F,_n){var ca,_d,_p;let t_=b,s_=F||(()=>null),A_=_n;if(b&&"object"==typeof b){const G_=b;t_=null===(ca=G_.next)||void 0===ca?void 0:ca.bind(G_),s_=null===(_d=G_.error)||void 0===_d?void 0:_d.bind(G_),A_=null===(_p=G_.complete)||void 0===_p?void 0:_p.bind(G_)}this.__isAsync&&(s_=d$(s_),t_&&(t_=d$(t_)),A_&&(A_=d$(A_)));const C_=super.subscribe({next:t_,error:s_,complete:A_});return b instanceof k.w0&&b.add(C_),C_}};function Koe(){return this._results[H3()]()}class h${constructor(b=!1){this._emitDistinctChangesOnly=b,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const F=H3(),_n=h$.prototype;_n[F]||(_n[F]=Koe)}get changes(){return this._changes||(this._changes=new PL)}get(b){return this._results[b]}map(b){return this._results.map(b)}filter(b){return this._results.filter(b)}find(b){return this._results.find(b)}reduce(b,F){return this._results.reduce(b,F)}forEach(b){this._results.forEach(b)}some(b){return this._results.some(b)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(b,F){const _n=this;_n.dirty=!1;const ca=ER(b);(this._changesDetected=!function DG(I,b,F){if(I.length!==b.length)return!1;for(let _n=0;_n<I.length;_n++){let ca=I[_n],_d=b[_n];if(F&&(ca=F(ca),_d=F(_d)),_d!==ca)return!1}return!0}(_n._results,ca,F))&&(_n._results=ca,_n.length=ca.length,_n.last=ca[this.length-1],_n.first=ca[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $V=(()=>{class I{}return I.__NG_ELEMENT_ID__=zoe,I})();const pte=$V,gte=class extends pte{constructor(b,F,_n){super(),this._declarationLView=b,this._declarationTContainer=F,this.elementRef=_n}createEmbeddedView(b){const F=this._declarationTContainer.tViews,_n=lQ(this._declarationLView,F,b,16,null,F.declTNode,null,null,null,null);_n[17]=this._declarationLView[this._declarationTContainer.index];const _d=this._declarationLView[19];return null!==_d&&(_n[19]=_d.createEmbeddedView(F)),vV(F,_n,b),new c4(_n)}};function zoe(){return o7(ST(),j0())}function o7(I,b){return 4&I.type?new gte(b,I,EM(I,b)):null}let NW=(()=>{class I{}return I.__NG_ELEMENT_ID__=Yoe,I})();function Yoe(){return vte(ST(),j0())}const mte=NW,Ate=class extends mte{constructor(b,F,_n){super(),this._lContainer=b,this._hostTNode=F,this._hostLView=_n}get element(){return EM(this._hostTNode,this._hostLView)}get injector(){return new CP(this._hostTNode,this._hostLView)}get parentInjector(){const b=mS(this._hostTNode,this._hostLView);if(tM(b)){const F=AP(b,this._hostLView),_n=mP(b);return new CP(F[1].data[_n+8],F)}return new CP(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(b){const F=_te(this._lContainer);return null!==F&&F[b]||null}get length(){return this._lContainer.length-10}createEmbeddedView(b,F,_n){const ca=b.createEmbeddedView(F||{});return this.insert(ca,_n),ca}createComponent(b,F,_n,ca,_d){const _p=b&&!function b3(I){return"function"==typeof I}(b);let t_;if(_p)t_=F;else{const G_=F||{};t_=G_.index,_n=G_.injector,ca=G_.projectableNodes,_d=G_.ngModuleRef}const s_=_p?b:new t7(wS(b)),A_=_n||this.parentInjector;if(!_d&&null==s_.ngModule){const X_=(_p?A_:this.parentInjector).get(u4,null);X_&&(_d=X_)}const C_=s_.create(A_,ca,void 0,_d);return this.insert(C_.hostView,t_),C_}insert(b,F){const _n=b._lView,ca=_n[1];if(function LN(I){return NN(I[3])}(_n)){const C_=this.indexOf(b);if(-1!==C_)this.detach(C_);else{const G_=_n[3],X_=new Ate(G_,G_[6],G_[3]);X_.detach(X_.indexOf(b))}}const _d=this._adjustIndex(F),_p=this._lContainer;!function nT(I,b,F,_n){const ca=10+_n,_d=F.length;_n>0&&(F[ca-1][4]=b),_n<_d-10?(b[4]=F[ca],oM(F,10+_n,b)):(F.push(b),b[4]=null),b[3]=F;const _p=b[17];null!==_p&&F!==_p&&function D2(I,b){const F=I[9];b[16]!==b[3][3][16]&&(I[2]=!0),null===F?I[9]=[b]:F.push(b)}(_p,b);const t_=b[19];null!==t_&&t_.insertView(I),b[2]|=128}(ca,_n,_p,_d);const t_=lH(_d,_p),s_=_n[11],A_=vO(s_,_p[7]);return null!==A_&&function YG(I,b,F,_n,ca,_d){_n[0]=ca,_n[6]=b,b0(I,_n,F,1,ca,_d)}(ca,_p[6],s_,_n,A_,t_),b.attachToViewContainerRef(),oM(YN(_p),_d,b),b}move(b,F){return this.insert(b,F)}indexOf(b){const F=_te(this._lContainer);return null!==F?F.indexOf(b):-1}remove(b){const F=this._adjustIndex(b,-1),_n=e1(this._lContainer,F);_n&&(sM(YN(this._lContainer),F),CX(_n[1],_n))}detach(b){const F=this._adjustIndex(b,-1),_n=e1(this._lContainer,F);return _n&&null!=sM(YN(this._lContainer),F)?new c4(_n):null}_adjustIndex(b,F=0){return null==b?this.length+F:b}};function _te(I){return I[8]}function YN(I){return I[8]||(I[8]=[])}function vte(I,b){let F;const _n=b[I.index];if(NN(_n))F=_n;else{let ca;if(8&I.type)ca=Y1(_n);else{const _d=b[11];ca=_d.createComment("");const _p=WS(I,b);kP(_d,vO(_d,_p),ca,function cH(I,b){return tT(I)?I.nextSibling(b):b.nextSibling}(_d,_p),!1)}b[I.index]=F=CH(_n,b,ca,I),vU(b,F)}return new Ate(F,I,b)}class xW{constructor(b){this.queryList=b,this.matches=null}clone(){return new xW(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZV{constructor(b=[]){this.queries=b}createEmbeddedView(b){const F=b.queries;if(null!==F){const _n=null!==b.contentQueries?b.contentQueries[0]:F.length,ca=[];for(let _d=0;_d<_n;_d++){const _p=F.getByIndex(_d);ca.push(this.queries[_p.indexInDeclarationView].clone())}return new ZV(ca)}return null}insertView(b){this.dirtyQueriesWithMatches(b)}detachView(b){this.dirtyQueriesWithMatches(b)}dirtyQueriesWithMatches(b){for(let F=0;F<this.queries.length;F++)null!==Zoe(b,F).matches&&this.queries[F].setDirty()}}class f${constructor(b,F,_n=null){this.predicate=b,this.flags=F,this.read=_n}}class XV{constructor(b=[]){this.queries=b}elementStart(b,F){for(let _n=0;_n<this.queries.length;_n++)this.queries[_n].elementStart(b,F)}elementEnd(b){for(let F=0;F<this.queries.length;F++)this.queries[F].elementEnd(b)}embeddedTView(b){let F=null;for(let _n=0;_n<this.length;_n++){const ca=null!==F?F.length:0,_d=this.getByIndex(_n).embeddedTView(b,ca);_d&&(_d.indexInDeclarationView=_n,null!==F?F.push(_d):F=[_d])}return null!==F?new XV(F):null}template(b,F){for(let _n=0;_n<this.queries.length;_n++)this.queries[_n].template(b,F)}getByIndex(b){return this.queries[b]}get length(){return this.queries.length}track(b){this.queries.push(b)}}class f4{constructor(b,F=-1){this.metadata=b,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=F}elementStart(b,F){this.isApplyingToNode(F)&&this.matchTNode(b,F)}elementEnd(b){this._declarationNodeIndex===b.index&&(this._appliesToNextNode=!1)}template(b,F){this.elementStart(b,F)}embeddedTView(b,F){return this.isApplyingToNode(b)?(this.crossesNgTemplate=!0,this.addMatch(-b.index,F),new f4(this.metadata)):null}isApplyingToNode(b){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const F=this._declarationNodeIndex;let _n=b.parent;for(;null!==_n&&8&_n.type&&_n.index!==F;)_n=_n.parent;return F===(null!==_n?_n.index:-1)}return this._appliesToNextNode}matchTNode(b,F){const _n=this.metadata.predicate;if(Array.isArray(_n))for(let ca=0;ca<_n.length;ca++){const _d=_n[ca];this.matchTNodeWithReadOption(b,F,p$(F,_d)),this.matchTNodeWithReadOption(b,F,sU(F,b,_d,!1,!1))}else _n===$V?4&F.type&&this.matchTNodeWithReadOption(b,F,-1):this.matchTNodeWithReadOption(b,F,sU(F,b,_n,!1,!1))}matchTNodeWithReadOption(b,F,_n){if(null!==_n){const ca=this.metadata.read;if(null!==ca)if(ca===I8||ca===NW||ca===$V&&4&F.type)this.addMatch(F.index,-2);else{const _d=sU(F,b,ca,!1,!1);null!==_d&&this.addMatch(F.index,_d)}else this.addMatch(F.index,_n)}}addMatch(b,F){null===this.matches?this.matches=[b,F]:this.matches.push(b,F)}}function p$(I,b){const F=I.localNames;if(null!==F)for(let _n=0;_n<F.length;_n+=2)if(F[_n]===b)return F[_n+1];return null}function LW(I,b,F,_n){return-1===F?function g$(I,b){return 11&I.type?EM(I,b):4&I.type?o7(I,b):null}(b,I):-2===F?function Ide(I,b,F){return F===I8?EM(b,I):F===$V?o7(b,I):F===NW?vte(b,I):void 0}(I,b,_n):A2(I,I[1],F,b)}function yte(I,b,F,_n){const ca=b[19].queries[_n];if(null===ca.matches){const _d=I.data,_p=F.matches,t_=[];for(let s_=0;s_<_p.length;s_+=2){const A_=_p[s_];t_.push(A_<0?null:LW(b,_d[A_],_p[s_+1],F.metadata.read))}ca.matches=t_}return ca.matches}function m$(I,b,F,_n){const ca=I.queries.getByIndex(F),_d=ca.matches;if(null!==_d){const _p=yte(I,b,ca,F);for(let t_=0;t_<_d.length;t_+=2){const s_=_d[t_];if(s_>0)_n.push(_p[t_/2]);else{const A_=_d[t_+1],C_=b[-s_];for(let G_=10;G_<C_.length;G_++){const X_=C_[G_];X_[17]===X_[3]&&m$(X_[1],X_,A_,_n)}if(null!==C_[9]){const G_=C_[9];for(let X_=0;X_<G_.length;X_++){const g0=G_[X_];m$(g0[1],g0,A_,_n)}}}}}return _n}function A$(I){const b=j0(),F=R1(),_n=A3();i5(_n+1);const ca=Zoe(F,_n);if(I.dirty&&dP(b)===(2==(2&ca.metadata.flags))){if(null===ca.matches)I.reset([]);else{const _d=ca.crossesNgTemplate?m$(F,b,_n,[]):yte(F,b,ca,_n);I.reset(_d,nte),I.notifyOnChanges()}return!0}return!1}function Ete(I,b,F,_n){const ca=R1();if(ca.firstCreatePass){const _d=ST();(function JN(I,b,F){null===I.queries&&(I.queries=new XV),I.queries.track(new f4(b,F))})(ca,new f$(b,F,_n),_d.index),function $oe(I,b){const F=I.contentQueries||(I.contentQueries=[]);b!==(F.length?F[F.length-1]:-1)&&F.push(I.queries.length-1,b)}(ca,I),2==(2&F)&&(ca.staticContentQueries=!0)}!function y$(I,b,F){const _n=new h$(4==(4&F));eJ(I,b,_n,_n.destroy),null===b[19]&&(b[19]=new ZV),b[19].queries.push(new xW(_n))}(ca,j0(),F)}function _$(){return function v$(I,b){return I[19].queries[b].queryList}(j0(),A3())}function Zoe(I,b){return I.queries.getByIndex(b)}function h7(...I){}const A4=new RT("Application Initializer");let f7=(()=>{class I{constructor(F){this.appInits=F,this.resolve=h7,this.reject=h7,this.initialized=!1,this.done=!1,this.donePromise=new Promise((_n,ca)=>{this.resolve=_n,this.reject=ca})}runInitializers(){if(this.initialized)return;const F=[],_n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let ca=0;ca<this.appInits.length;ca++){const _d=this.appInits[ca]();if(kV(_d))F.push(_d);else if(RU(_d)){const _p=new Promise((t_,s_)=>{_d.subscribe({complete:t_,error:s_})});F.push(_p)}}Promise.all(F).then(()=>{_n()}).catch(ca=>{this.reject(ca)}),0===F.length&&_n(),this.initialized=!0}}return I.\u0275fac=function(F){return new(F||I)(SI(A4,8))},I.\u0275prov=_w({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const VW=new RT("AppId",{providedIn:"root",factory:function p7(){return`${m7()}${m7()}${m7()}`}});function m7(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const t6=new RT("Platform Initializer"),UU=new RT("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dte=new RT("appBootstrapListener");let w$=(()=>{class I{log(F){console.log(F)}warn(F){console.warn(F)}}return I.\u0275fac=function(F){return new(F||I)},I.\u0275prov=_w({token:I,factory:I.\u0275fac,providedIn:"platform"}),I})();const r6=new RT("LocaleId",{providedIn:"root",factory:()=>q1(r6,KI.Optional|KI.SkipSelf)||function lse(){return"undefined"!=typeof $localize&&$localize.locale||l8}()}),Nte=new RT("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dse{constructor(b,F){this.ngModuleFactory=b,this.componentFactories=F}}let hse=(()=>{class I{compileModuleSync(F){return new cte(F)}compileModuleAsync(F){return Promise.resolve(this.compileModuleSync(F))}compileModuleAndAllComponentsSync(F){const _n=this.compileModuleSync(F),_d=Nf(TS(F).declarations).reduce((_p,t_)=>{const s_=wS(t_);return s_&&_p.push(new t7(s_)),_p},[]);return new dse(_n,_d)}compileModuleAndAllComponentsAsync(F){return Promise.resolve(this.compileModuleAndAllComponentsSync(F))}clearCache(){}clearCacheFor(F){}getModuleId(F){}}return I.\u0275fac=function(F){return new(F||I)},I.\u0275prov=_w({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const T$=(()=>Promise.resolve(0))();function _7(I){"undefined"==typeof Zone?T$.then(()=>{I&&I.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",I)}class zP{constructor({enableLongStackTrace:b=!1,shouldCoalesceEventChangeDetection:F=!1,shouldCoalesceRunChangeDetection:_n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new PL(!1),this.onMicrotaskEmpty=new PL(!1),this.onStable=new PL(!1),this.onError=new PL(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const ca=this;ca._nesting=0,ca._outer=ca._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(ca._inner=ca._inner.fork(new Zone.TaskTrackingZoneSpec)),b&&Zone.longStackTraceZoneSpec&&(ca._inner=ca._inner.fork(Zone.longStackTraceZoneSpec)),ca.shouldCoalesceEventChangeDetection=!_n&&F,ca.shouldCoalesceRunChangeDetection=_n,ca.lastRequestAnimationFrameId=-1,ca.nativeRequestAnimationFrame=function v7(){let I=P1.requestAnimationFrame,b=P1.cancelAnimationFrame;if("undefined"!=typeof Zone&&I&&b){const F=I[Zone.__symbol__("OriginalDelegate")];F&&(I=F);const _n=b[Zone.__symbol__("OriginalDelegate")];_n&&(b=_n)}return{nativeRequestAnimationFrame:I,nativeCancelAnimationFrame:b}}().nativeRequestAnimationFrame,function Pte(I){const b=()=>{!function E7(I){I.isCheckStableRunning||-1!==I.lastRequestAnimationFrameId||(I.lastRequestAnimationFrameId=I.nativeRequestAnimationFrame.call(P1,()=>{I.fakeTopEventTask||(I.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{I.lastRequestAnimationFrameId=-1,I7(I),I.isCheckStableRunning=!0,QW(I),I.isCheckStableRunning=!1},void 0,()=>{},()=>{})),I.fakeTopEventTask.invoke()}),I7(I))}(I)};I._inner=I._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(F,_n,ca,_d,_p,t_)=>{try{return HW(I),F.invokeTask(ca,_d,_p,t_)}finally{(I.shouldCoalesceEventChangeDetection&&"eventTask"===_d.type||I.shouldCoalesceRunChangeDetection)&&b(),S$(I)}},onInvoke:(F,_n,ca,_d,_p,t_,s_)=>{try{return HW(I),F.invoke(ca,_d,_p,t_,s_)}finally{I.shouldCoalesceRunChangeDetection&&b(),S$(I)}},onHasTask:(F,_n,ca,_d)=>{F.hasTask(ca,_d),_n===ca&&("microTask"==_d.change?(I._hasPendingMicrotasks=_d.microTask,I7(I),QW(I)):"macroTask"==_d.change&&(I.hasPendingMacrotasks=_d.macroTask))},onHandleError:(F,_n,ca,_d)=>(F.handleError(ca,_d),I.runOutsideAngular(()=>I.onError.emit(_d)),!1)})}(ca)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zP.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(zP.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(b,F,_n){return this._inner.run(b,F,_n)}runTask(b,F,_n,ca){const _d=this._inner,_p=_d.scheduleEventTask("NgZoneEvent: "+ca,b,y7,h7,h7);try{return _d.runTask(_p,F,_n)}finally{_d.cancelTask(_p)}}runGuarded(b,F,_n){return this._inner.runGuarded(b,F,_n)}runOutsideAngular(b){return this._outer.run(b)}}const y7={};function QW(I){if(0==I._nesting&&!I.hasPendingMicrotasks&&!I.isStable)try{I._nesting++,I.onMicrotaskEmpty.emit(null)}finally{if(I._nesting--,!I.hasPendingMicrotasks)try{I.runOutsideAngular(()=>I.onStable.emit(null))}finally{I.isStable=!0}}}function I7(I){I.hasPendingMicrotasks=!!(I._hasPendingMicrotasks||(I.shouldCoalesceEventChangeDetection||I.shouldCoalesceRunChangeDetection)&&-1!==I.lastRequestAnimationFrameId)}function HW(I){I._nesting++,I.isStable&&(I.isStable=!1,I.onUnstable.emit(null))}function S$(I){I._nesting--,QW(I)}class b7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new PL,this.onMicrotaskEmpty=new PL,this.onStable=new PL,this.onError=new PL}run(b,F,_n){return b.apply(F,_n)}runGuarded(b,F,_n){return b.apply(F,_n)}runOutsideAngular(b){return b()}runTask(b,F,_n,ca){return b.apply(F,_n)}}let C7=(()=>{class I{constructor(F){this._ngZone=F,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),F.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zP.assertNotInAngularZone(),_7(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_7(()=>{for(;0!==this._callbacks.length;){let F=this._callbacks.pop();clearTimeout(F.timeoutId),F.doneCb(this._didWork)}this._didWork=!1});else{let F=this.getPendingTasks();this._callbacks=this._callbacks.filter(_n=>!_n.updateCb||!_n.updateCb(F)||(clearTimeout(_n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(F=>({source:F.source,creationLocation:F.creationLocation,data:F.data})):[]}addCallback(F,_n,ca){let _d=-1;_n&&_n>0&&(_d=setTimeout(()=>{this._callbacks=this._callbacks.filter(_p=>_p.timeoutId!==_d),F(this._didWork,this.getPendingTasks())},_n)),this._callbacks.push({doneCb:F,timeoutId:_d,updateCb:ca})}whenStable(F,_n,ca){if(ca&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(F,_n,ca),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(F,_n,ca){return[]}}return I.\u0275fac=function(F){return new(F||I)(SI(zP))},I.\u0275prov=_w({token:I,factory:I.\u0275fac}),I})(),pse=(()=>{class I{constructor(){this._applications=new Map,R8.addToWindow(this)}registerApplication(F,_n){this._applications.set(F,_n)}unregisterApplication(F){this._applications.delete(F)}unregisterAllApplications(){this._applications.clear()}getTestability(F){return this._applications.get(F)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(F,_n=!0){return R8.findTestabilityInTree(this,F,_n)}}return I.\u0275fac=function(F){return new(F||I)},I.\u0275prov=_w({token:I,factory:I.\u0275fac,providedIn:"platform"}),I})();class CM{addToWindow(b){}findTestabilityInTree(b,F,_n){return null}}function xte(I){R8=I}let R8=new CM,FU=null;const qW=new RT("AllowMultipleToken"),Q2=new RT("PlatformOnDestroy");class O8{constructor(b,F){this.name=b,this.token=F}}function Lte(I,b,F=[]){const _n=`Platform: ${b}`,ca=new RT(_n);return(_d=[])=>{let _p=N8();if(!_p||_p.injector.get(qW,!1)){const t_=[...F,..._d,{provide:ca,useValue:!0}];I?I(t_):function D8(I){if(FU&&!FU.get(qW,!1))throw new S_(400,"");FU=I;const b=I.get(Bte),F=I.get(t6,null);F&&F.forEach(_n=>_n())}(function Mte(I=[],b){return L2.create({name:b,providers:[{provide:TH,useValue:"platform"},{provide:Q2,useValue:()=>FU=null},...I]})}(t_,_n))}return function mse(I){const b=N8();if(!b)throw new S_(401,"");return b}()}}function N8(){var I;return null!==(I=null==FU?void 0:FU.get(Bte))&&void 0!==I?I:null}let Bte=(()=>{class I{constructor(F){this._injector=F,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(F,_n){const t_=function Ute(I,b){let F;return F="noop"===I?new b7:("zone.js"===I?void 0:I)||new zP({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==b?void 0:b.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==b?void 0:b.ngZoneRunCoalescing)}),F}(_n?_n.ngZone:void 0,{ngZoneEventCoalescing:_n&&_n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:_n&&_n.ngZoneRunCoalescing||!1}),s_=[{provide:zP,useValue:t_}];return t_.run(()=>{const A_=L2.create({providers:s_,parent:this.injector,name:F.moduleType.name}),C_=F.create(A_),G_=C_.injector.get(CL,null);if(!G_)throw new S_(402,"");return t_.runOutsideAngular(()=>{const X_=t_.onError.subscribe({next:g0=>{G_.handleError(g0)}});C_.onDestroy(()=>{KW(this._modules,C_),X_.unsubscribe()})}),function Fte(I,b,F){try{const _n=F();return kV(_n)?_n.catch(ca=>{throw b.runOutsideAngular(()=>I.handleError(ca)),ca}):_n}catch(_n){throw b.runOutsideAngular(()=>I.handleError(_n)),_n}}(G_,t_,()=>{const X_=C_.injector.get(f7);return X_.runInitializers(),X_.donePromise.then(()=>(function Vee(I){tI(I,"Expected localeId to be defined"),"string"==typeof I&&(HJ=I.toLowerCase().replace(/_/g,"-"))}(C_.injector.get(r6,l8)||l8),this._moduleDoBootstrap(C_),C_))})})}bootstrapModule(F,_n=[]){const ca=R$({},_n);return function w7(I,b,F){const _n=new cte(F);return Promise.resolve(_n)}(0,0,F).then(_d=>this.bootstrapModuleFactory(_d,ca))}_moduleDoBootstrap(F){const _n=F.injector.get(i6);if(F._bootstrapComponents.length>0)F._bootstrapComponents.forEach(ca=>_n.bootstrap(ca));else{if(!F.instance.ngDoBootstrap)throw new S_(403,"");F.instance.ngDoBootstrap(_n)}this._modules.push(F)}onDestroy(F){this._destroyListeners.push(F)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S_(404,"");this._modules.slice().forEach(_n=>_n.destroy()),this._destroyListeners.forEach(_n=>_n());const F=this._injector.get(Q2,null);null==F||F(),this._destroyed=!0}get destroyed(){return this._destroyed}}return I.\u0275fac=function(F){return new(F||I)(SI(L2))},I.\u0275prov=_w({token:I,factory:I.\u0275fac,providedIn:"platform"}),I})();function R$(I,b){return Array.isArray(b)?b.reduce(R$,I):Object.assign(Object.assign({},I),b)}let i6=(()=>{class I{constructor(F,_n,ca,_d){this._zone=F,this._injector=_n,this._exceptionHandler=ca,this._initStatus=_d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _p=new q.y(s_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{s_.next(this._stable),s_.complete()})}),t_=new q.y(s_=>{let A_;this._zone.runOutsideAngular(()=>{A_=this._zone.onStable.subscribe(()=>{zP.assertNotInAngularZone(),_7(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,s_.next(!0))})})});const C_=this._zone.onUnstable.subscribe(()=>{zP.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{s_.next(!1)}))});return()=>{A_.unsubscribe(),C_.unsubscribe()}});this.isStable=(0,_r.T)(_p,t_.pipe((0,_s.B)()))}bootstrap(F,_n){if(!this._initStatus.done)throw new S_(405,"");let ca;ca=F instanceof o$?F:this._injector.get(YQ).resolveComponentFactory(F),this.componentTypes.push(ca.componentType);const _d=function WW(I){return I.isBoundToModule}(ca)?void 0:this._injector.get(u4),t_=ca.create(L2.NULL,[],_n||ca.selector,_d),s_=t_.location.nativeElement,A_=t_.injector.get(C7,null),C_=A_&&t_.injector.get(pse);return A_&&C_&&C_.registerApplication(s_,A_),t_.onDestroy(()=>{this.detachView(t_.hostView),KW(this.components,t_),C_&&C_.unregisterApplication(s_)}),this._loadComponent(t_),t_}tick(){if(this._runningTick)throw new S_(101,"");try{this._runningTick=!0;for(let F of this._views)F.detectChanges()}catch(F){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(F))}finally{this._runningTick=!1}}attachView(F){const _n=F;this._views.push(_n),_n.attachToAppRef(this)}detachView(F){const _n=F;KW(this._views,_n),_n.detachFromAppRef()}_loadComponent(F){this.attachView(F.hostView),this.tick(),this.components.push(F),this._injector.get(Dte,[]).concat(this._bootstrapListeners).forEach(ca=>ca(F))}ngOnDestroy(){this._views.slice().forEach(F=>F.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return I.\u0275fac=function(F){return new(F||I)(SI(zP),SI(L2),SI(CL),SI(f7))},I.\u0275prov=_w({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function KW(I,b){const F=I.indexOf(b);F>-1&&I.splice(F,1)}let o6=!0,s6=!1;function D$(){return s6=!0,o6}function jte(){if(s6)throw new Error("Cannot enable prod mode after platform setup.");o6=!1}let Vte=(()=>{class I{}return I.__NG_ELEMENT_ID__=Dde,I})();function Dde(I){return function yse(I,b,F){if(K6(I)&&!F){const _n=aR(I.index,b);return new c4(_n,_n)}return 47&I.type?new c4(b[16],b):null}(ST(),j0(),16==(16&I))}class Ise{constructor(){}supports(b){return q3(b)}create(b){return new Lde(b)}}const bse=(I,b)=>b;class Lde{constructor(b){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=b||bse}forEachItem(b){let F;for(F=this._itHead;null!==F;F=F._next)b(F)}forEachOperation(b){let F=this._itHead,_n=this._removalsHead,ca=0,_d=null;for(;F||_n;){const _p=!_n||F&&F.currentIndex<tK(_n,ca,_d)?F:_n,t_=tK(_p,ca,_d),s_=_p.currentIndex;if(_p===_n)ca--,_n=_n._nextRemoved;else if(F=F._next,null==_p.previousIndex)ca++;else{_d||(_d=[]);const A_=t_-ca,C_=s_-ca;if(A_!=C_){for(let X_=0;X_<A_;X_++){const g0=X_<_d.length?_d[X_]:_d[X_]=0,x0=g0+X_;C_<=x0&&x0<A_&&(_d[X_]=g0+1)}_d[_p.previousIndex]=C_-A_}}t_!==s_&&b(_p,t_,s_)}}forEachPreviousItem(b){let F;for(F=this._previousItHead;null!==F;F=F._nextPrevious)b(F)}forEachAddedItem(b){let F;for(F=this._additionsHead;null!==F;F=F._nextAdded)b(F)}forEachMovedItem(b){let F;for(F=this._movesHead;null!==F;F=F._nextMoved)b(F)}forEachRemovedItem(b){let F;for(F=this._removalsHead;null!==F;F=F._nextRemoved)b(F)}forEachIdentityChange(b){let F;for(F=this._identityChangesHead;null!==F;F=F._nextIdentityChange)b(F)}diff(b){if(null==b&&(b=[]),!q3(b))throw new S_(900,"");return this.check(b)?this:null}onDestroy(){}check(b){this._reset();let ca,_d,_p,F=this._itHead,_n=!1;if(Array.isArray(b)){this.length=b.length;for(let t_=0;t_<this.length;t_++)_d=b[t_],_p=this._trackByFn(t_,_d),null!==F&&Object.is(F.trackById,_p)?(_n&&(F=this._verifyReinsertion(F,_d,_p,t_)),Object.is(F.item,_d)||this._addIdentityChange(F,_d)):(F=this._mismatch(F,_d,_p,t_),_n=!0),F=F._next}else ca=0,function aoe(I,b){if(Array.isArray(I))for(let F=0;F<I.length;F++)b(I[F]);else{const F=I[H3()]();let _n;for(;!(_n=F.next()).done;)b(_n.value)}}(b,t_=>{_p=this._trackByFn(ca,t_),null!==F&&Object.is(F.trackById,_p)?(_n&&(F=this._verifyReinsertion(F,t_,_p,ca)),Object.is(F.item,t_)||this._addIdentityChange(F,t_)):(F=this._mismatch(F,t_,_p,ca),_n=!0),F=F._next,ca++}),this.length=ca;return this._truncate(F),this.collection=b,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let b;for(b=this._previousItHead=this._itHead;null!==b;b=b._next)b._nextPrevious=b._next;for(b=this._additionsHead;null!==b;b=b._nextAdded)b.previousIndex=b.currentIndex;for(this._additionsHead=this._additionsTail=null,b=this._movesHead;null!==b;b=b._nextMoved)b.previousIndex=b.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(b,F,_n,ca){let _d;return null===b?_d=this._itTail:(_d=b._prev,this._remove(b)),null!==(b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(_n,null))?(Object.is(b.item,F)||this._addIdentityChange(b,F),this._reinsertAfter(b,_d,ca)):null!==(b=null===this._linkedRecords?null:this._linkedRecords.get(_n,ca))?(Object.is(b.item,F)||this._addIdentityChange(b,F),this._moveAfter(b,_d,ca)):b=this._addAfter(new XW(F,_n),_d,ca),b}_verifyReinsertion(b,F,_n,ca){let _d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(_n,null);return null!==_d?b=this._reinsertAfter(_d,b._prev,ca):b.currentIndex!=ca&&(b.currentIndex=ca,this._addToMoves(b,ca)),b}_truncate(b){for(;null!==b;){const F=b._next;this._addToRemovals(this._unlink(b)),b=F}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(b,F,_n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(b);const ca=b._prevRemoved,_d=b._nextRemoved;return null===ca?this._removalsHead=_d:ca._nextRemoved=_d,null===_d?this._removalsTail=ca:_d._prevRemoved=ca,this._insertAfter(b,F,_n),this._addToMoves(b,_n),b}_moveAfter(b,F,_n){return this._unlink(b),this._insertAfter(b,F,_n),this._addToMoves(b,_n),b}_addAfter(b,F,_n){return this._insertAfter(b,F,_n),this._additionsTail=null===this._additionsTail?this._additionsHead=b:this._additionsTail._nextAdded=b,b}_insertAfter(b,F,_n){const ca=null===F?this._itHead:F._next;return b._next=ca,b._prev=F,null===ca?this._itTail=b:ca._prev=b,null===F?this._itHead=b:F._next=b,null===this._linkedRecords&&(this._linkedRecords=new eK),this._linkedRecords.put(b),b.currentIndex=_n,b}_remove(b){return this._addToRemovals(this._unlink(b))}_unlink(b){null!==this._linkedRecords&&this._linkedRecords.remove(b);const F=b._prev,_n=b._next;return null===F?this._itHead=_n:F._next=_n,null===_n?this._itTail=F:_n._prev=F,b}_addToMoves(b,F){return b.previousIndex===F||(this._movesTail=null===this._movesTail?this._movesHead=b:this._movesTail._nextMoved=b),b}_addToRemovals(b){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eK),this._unlinkedRecords.put(b),b.currentIndex=null,b._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=b,b._prevRemoved=null):(b._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=b),b}_addIdentityChange(b,F){return b.item=F,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=b:this._identityChangesTail._nextIdentityChange=b,b}}class XW{constructor(b,F){this.item=b,this.trackById=F,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cse{constructor(){this._head=null,this._tail=null}add(b){null===this._head?(this._head=this._tail=b,b._nextDup=null,b._prevDup=null):(this._tail._nextDup=b,b._prevDup=this._tail,b._nextDup=null,this._tail=b)}get(b,F){let _n;for(_n=this._head;null!==_n;_n=_n._nextDup)if((null===F||F<=_n.currentIndex)&&Object.is(_n.trackById,b))return _n;return null}remove(b){const F=b._prevDup,_n=b._nextDup;return null===F?this._head=_n:F._nextDup=_n,null===_n?this._tail=F:_n._prevDup=F,null===this._head}}class eK{constructor(){this.map=new Map}put(b){const F=b.trackById;let _n=this.map.get(F);_n||(_n=new Cse,this.map.set(F,_n)),_n.add(b)}get(b,F){const ca=this.map.get(b);return ca?ca.get(b,F):null}remove(b){const F=b.trackById;return this.map.get(F).remove(b)&&this.map.delete(F),b}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tK(I,b,F){const _n=I.previousIndex;if(null===_n)return _n;let ca=0;return F&&_n<F.length&&(ca=F[_n]),_n+b+ca}class nK{constructor(){}supports(b){return b instanceof Map||jH(b)}create(){return new M$}}class M${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(b){let F;for(F=this._mapHead;null!==F;F=F._next)b(F)}forEachPreviousItem(b){let F;for(F=this._previousMapHead;null!==F;F=F._nextPrevious)b(F)}forEachChangedItem(b){let F;for(F=this._changesHead;null!==F;F=F._nextChanged)b(F)}forEachAddedItem(b){let F;for(F=this._additionsHead;null!==F;F=F._nextAdded)b(F)}forEachRemovedItem(b){let F;for(F=this._removalsHead;null!==F;F=F._nextRemoved)b(F)}diff(b){if(b){if(!(b instanceof Map||jH(b)))throw new S_(900,"")}else b=new Map;return this.check(b)?this:null}onDestroy(){}check(b){this._reset();let F=this._mapHead;if(this._appendAfter=null,this._forEach(b,(_n,ca)=>{if(F&&F.key===ca)this._maybeAddToChanges(F,_n),this._appendAfter=F,F=F._next;else{const _d=this._getOrCreateRecordForKey(ca,_n);F=this._insertBeforeOrAppend(F,_d)}}),F){F._prev&&(F._prev._next=null),this._removalsHead=F;for(let _n=F;null!==_n;_n=_n._nextRemoved)_n===this._mapHead&&(this._mapHead=null),this._records.delete(_n.key),_n._nextRemoved=_n._next,_n.previousValue=_n.currentValue,_n.currentValue=null,_n._prev=null,_n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(b,F){if(b){const _n=b._prev;return F._next=b,F._prev=_n,b._prev=F,_n&&(_n._next=F),b===this._mapHead&&(this._mapHead=F),this._appendAfter=b,b}return this._appendAfter?(this._appendAfter._next=F,F._prev=this._appendAfter):this._mapHead=F,this._appendAfter=F,null}_getOrCreateRecordForKey(b,F){if(this._records.has(b)){const ca=this._records.get(b);this._maybeAddToChanges(ca,F);const _d=ca._prev,_p=ca._next;return _d&&(_d._next=_p),_p&&(_p._prev=_d),ca._next=null,ca._prev=null,ca}const _n=new rK(b);return this._records.set(b,_n),_n.currentValue=F,this._addToAdditions(_n),_n}_reset(){if(this.isDirty){let b;for(this._previousMapHead=this._mapHead,b=this._previousMapHead;null!==b;b=b._next)b._nextPrevious=b._next;for(b=this._changesHead;null!==b;b=b._nextChanged)b.previousValue=b.currentValue;for(b=this._additionsHead;null!=b;b=b._nextAdded)b.previousValue=b.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(b,F){Object.is(F,b.currentValue)||(b.previousValue=b.currentValue,b.currentValue=F,this._addToChanges(b))}_addToAdditions(b){null===this._additionsHead?this._additionsHead=this._additionsTail=b:(this._additionsTail._nextAdded=b,this._additionsTail=b)}_addToChanges(b){null===this._changesHead?this._changesHead=this._changesTail=b:(this._changesTail._nextChanged=b,this._changesTail=b)}_forEach(b,F){b instanceof Map?b.forEach(F):Object.keys(b).forEach(_n=>F(b[_n],_n))}}class rK{constructor(b){this.key=b,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function T7(){return new c6([new Ise])}let c6=(()=>{class I{constructor(F){this.factories=F}static create(F,_n){if(null!=_n){const ca=_n.factories.slice();F=F.concat(ca)}return new I(F)}static extend(F){return{provide:I,useFactory:_n=>I.create(F,_n||T7()),deps:[[I,new S2,new uR]]}}find(F){const _n=this.factories.find(ca=>ca.supports(F));if(null!=_n)return _n;throw new S_(901,"")}}return I.\u0275prov=_w({token:I,providedIn:"root",factory:T7}),I})();function oK(){return new sK([new nK])}let sK=(()=>{class I{constructor(F){this.factories=F}static create(F,_n){if(_n){const ca=_n.factories.slice();F=F.concat(ca)}return new I(F)}static extend(F){return{provide:I,useFactory:_n=>I.create(F,_n||oK()),deps:[[I,new S2,new uR]]}}find(F){const _n=this.factories.find(_d=>_d.supports(F));if(_n)return _n;throw new S_(901,"")}}return I.\u0275prov=_w({token:I,providedIn:"root",factory:oK}),I})();const Wte=Lte(null,"core",[]);let S7=(()=>{class I{constructor(F){}}return I.\u0275fac=function(F){return new(F||I)(SI(i6))},I.\u0275mod=_R({type:I}),I.\u0275inj=U1({}),I})()},3942:(h,l,g)=>{"use strict";g.d(l,{Z:()=>S_});var f=g(2090),k=g(4859),q=g(9681),_r=g(1877);class _s{constructor(B_,Q_){this._delegate=B_,this.firebase=Q_,(0,q._addComponent)(B_,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=B_.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B_){this._delegate.automaticDataCollectionEnabled=B_}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(B_=>{this._delegate.checkDestroyed(),B_()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(B_,Q_=q._DEFAULT_ENTRY_NAME){var _0;this._delegate.checkDestroyed();const c0=this._delegate.container.getProvider(B_);return!c0.isInitialized()&&"EXPLICIT"===(null===(_0=c0.getComponent())||void 0===_0?void 0:_0.instantiationMode)&&c0.initialize(),c0.getImmediate({identifier:Q_})}_removeServiceInstance(B_,Q_=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(B_).clearInstance(Q_)}_addComponent(B_){(0,q._addComponent)(this._delegate,B_)}_addOrOverwriteComponent(B_){(0,q._addOrOverwriteComponent)(this._delegate,B_)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _l=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_A=function n_(){const x_=function bh(x_){const B_={},Q_={__esModule:!0,initializeApp:function Qv(e0,P_={}){const Rv=q.initializeApp(e0,P_);if((0,f.r3)(B_,Rv.name))return B_[Rv.name];const E_=new x_(Rv,Q_);return B_[Rv.name]=E_,E_},app:c0,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function E0(e0){const P_=e0.name,Rv=P_.replace("-compat","");if(q._registerComponent(e0)&&"PUBLIC"===e0.type){const E_=(L_=c0())=>{if("function"!=typeof L_[Rv])throw _l.create("invalid-app-argument",{appName:P_});return L_[Rv]()};void 0!==e0.serviceProps&&(0,f.ZB)(E_,e0.serviceProps),Q_[Rv]=E_,x_.prototype[Rv]=function(...L_){return this._getService.bind(this,P_).apply(this,e0.multipleInstances?L_:[])}}return"PUBLIC"===e0.type?Q_[Rv]:null},removeApp:function _0(e0){delete B_[e0]},useAsService:function H_(e0,P_){return"serverAuth"===P_?null:P_},modularAPIs:q}};function c0(e0){if(!(0,f.r3)(B_,e0=e0||q._DEFAULT_ENTRY_NAME))throw _l.create("no-app",{appName:e0});return B_[e0]}return Q_.default=Q_,Object.defineProperty(Q_,"apps",{get:function h0(){return Object.keys(B_).map(e0=>B_[e0])}}),c0.App=x_,Q_}(_s);return x_.INTERNAL=Object.assign(Object.assign({},x_.INTERNAL),{createFirebaseNamespace:n_,extendNamespace:function B_(Q_){(0,f.ZB)(x_,Q_)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),x_}(),r_=new _r.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){r_.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const x_=self.firebase.SDK_VERSION;x_&&x_.indexOf("LITE")>=0&&r_.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const S_=_A;!function v_(x_){(0,q.registerVersion)("@firebase/app-compat","0.1.25",x_)}()},9681:(h,l,g)=>{"use strict";g.r(l),g.d(l,{FirebaseError:()=>_r.ZR,SDK_VERSION:()=>XO,_DEFAULT_ENTRY_NAME:()=>tI,_addComponent:()=>FI,_addOrOverwriteComponent:()=>_w,_apps:()=>B1,_clearComponents:()=>wN,_components:()=>A1,_getProvider:()=>U1,_registerComponent:()=>uT,_removeServiceInstance:()=>S1,deleteApp:()=>KI,getApp:()=>VR,getApps:()=>_D,initializeApp:()=>TN,onLog:()=>qT,registerVersion:()=>TT,setLogLevel:()=>rP});var f=g(5861),k=g(4859),q=g(1877),_r=g(2090),_s=g(8766);class _a{constructor(m0){this.container=m0}getPlatformInfoString(){return this.container.getProviders().map(G0=>{if(function _l(_y){const m0=_y.getComponent();return"VERSION"===(null==m0?void 0:m0.type)}(G0)){const II=G0.getImmediate();return`${II.library}/${II.version}`}return null}).filter(G0=>G0).join(" ")}}const bh="@firebase/app",_A=new q.Yd("@firebase/app"),tI="[DEFAULT]",K0={[bh]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},B1=new Map,A1=new Map;function FI(_y,m0){try{_y.container.addComponent(m0)}catch(G0){_A.debug(`Component ${m0.name} failed to register with FirebaseApp ${_y.name}`,G0)}}function _w(_y,m0){_y.container.addOrOverwriteComponent(m0)}function uT(_y){const m0=_y.name;if(A1.has(m0))return _A.debug(`There were multiple attempts to register component ${m0}.`),!1;A1.set(m0,_y);for(const G0 of B1.values())FI(G0,_y);return!0}function U1(_y,m0){const G0=_y.container.getProvider("heartbeat").getImmediate({optional:!0});return G0&&G0.triggerHeartbeat(),_y.container.getProvider(m0)}function S1(_y,m0,G0=tI){U1(_y,m0).clearInstance(G0)}function wN(){A1.clear()}const xT=new _r.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class XT{constructor(m0,G0,II){this._isDeleted=!1,this._options=Object.assign({},m0),this._config=Object.assign({},G0),this._name=G0.name,this._automaticDataCollectionEnabled=G0.automaticDataCollectionEnabled,this._container=II,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(m0){this.checkDestroyed(),this._automaticDataCollectionEnabled=m0}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(m0){this._isDeleted=m0}checkDestroyed(){if(this.isDeleted)throw xT.create("app-deleted",{appName:this._name})}}const XO="9.8.1";function TN(_y,m0={}){"object"!=typeof m0&&(m0={name:m0});const G0=Object.assign({name:tI,automaticDataCollectionEnabled:!1},m0),II=G0.name;if("string"!=typeof II||!II)throw xT.create("bad-app-name",{appName:String(II)});const qI=B1.get(II);if(qI){if((0,_r.vZ)(_y,qI.options)&&(0,_r.vZ)(G0,qI.config))return qI;throw xT.create("duplicate-app",{appName:II})}const XI=new k.H0(II);for(const _b of A1.values())XI.addComponent(_b);const IT=new XT(_y,G0,XI);return B1.set(II,IT),IT}function VR(_y=tI){const m0=B1.get(_y);if(!m0)throw xT.create("no-app",{appName:_y});return m0}function _D(){return Array.from(B1.values())}function KI(_y){return fO.apply(this,arguments)}function fO(){return(fO=(0,f.Z)(function*(_y){const m0=_y.name;B1.has(m0)&&(B1.delete(m0),yield Promise.all(_y.container.getProviders().map(G0=>G0.delete())),_y.isDeleted=!0)})).apply(this,arguments)}function TT(_y,m0,G0){var II;let qI=null!==(II=K0[_y])&&void 0!==II?II:_y;G0&&(qI+=`-${G0}`);const XI=qI.match(/\s|\//),IT=m0.match(/\s|\//);if(XI||IT){const _b=[`Unable to register library "${qI}" with version "${m0}":`];return XI&&_b.push(`library name "${qI}" contains illegal characters (whitespace or "/")`),XI&&IT&&_b.push("and"),IT&&_b.push(`version name "${m0}" contains illegal characters (whitespace or "/")`),void _A.warn(_b.join(" "))}uT(new k.wA(`${qI}-version`,()=>({library:qI,version:m0}),"VERSION"))}function qT(_y,m0){if(null!==_y&&"function"!=typeof _y)throw xT.create("invalid-log-argument");(0,q.Am)(_y,m0)}function rP(_y){(0,q.Ub)(_y)}const eS="firebase-heartbeat-store";let SO=null;function rL(){return SO||(SO=(0,_s.X3)("firebase-heartbeat-database",1,{upgrade:(_y,m0)=>{0===m0&&_y.createObjectStore(eS)}}).catch(_y=>{throw xT.create("storage-open",{originalErrorMessage:_y.message})})),SO}function PI(){return(PI=(0,f.Z)(function*(_y){try{return(yield rL()).transaction(eS).objectStore(eS).get(iR(_y))}catch(m0){throw xT.create("storage-get",{originalErrorMessage:m0.message})}})).apply(this,arguments)}function JI(_y,m0){return mR.apply(this,arguments)}function mR(){return(mR=(0,f.Z)(function*(_y,m0){try{const II=(yield rL()).transaction(eS,"readwrite");return yield II.objectStore(eS).put(m0,iR(_y)),II.done}catch(G0){throw xT.create("storage-set",{originalErrorMessage:G0.message})}})).apply(this,arguments)}function iR(_y){return`${_y.name}!${_y.options.appId}`}class AR{constructor(m0){this.container=m0,this._heartbeatsCache=null;const G0=this.container.getProvider("app").getImmediate();this._storage=new _E(G0),this._heartbeatsCachePromise=this._storage.read().then(II=>(this._heartbeatsCache=II,II))}triggerHeartbeat(){var m0=this;return(0,f.Z)(function*(){const II=m0.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qI=tS();if(null===m0._heartbeatsCache&&(m0._heartbeatsCache=yield m0._heartbeatsCachePromise),m0._heartbeatsCache.lastSentHeartbeatDate!==qI&&!m0._heartbeatsCache.heartbeats.some(XI=>XI.date===qI))return m0._heartbeatsCache.heartbeats.push({date:qI,agent:II}),m0._heartbeatsCache.heartbeats=m0._heartbeatsCache.heartbeats.filter(XI=>{const IT=new Date(XI.date).valueOf();return Date.now()-IT<=2592e6}),m0._storage.overwrite(m0._heartbeatsCache)})()}getHeartbeatsHeader(){var m0=this;return(0,f.Z)(function*(){if(null===m0._heartbeatsCache&&(yield m0._heartbeatsCachePromise),null===m0._heartbeatsCache||0===m0._heartbeatsCache.heartbeats.length)return"";const G0=tS(),{heartbeatsToSend:II,unsentEntries:qI}=function $_(_y,m0=1024){const G0=[];let II=_y.slice();for(const qI of _y){const XI=G0.find(IT=>IT.agent===qI.agent);if(XI){if(XI.dates.push(qI.date),r0(G0)>m0){XI.dates.pop();break}}else if(G0.push({agent:qI.agent,dates:[qI.date]}),r0(G0)>m0){G0.pop();break}II=II.slice(1)}return{heartbeatsToSend:G0,unsentEntries:II}}(m0._heartbeatsCache.heartbeats),XI=(0,_r.L)(JSON.stringify({version:2,heartbeats:II}));return m0._heartbeatsCache.lastSentHeartbeatDate=G0,qI.length>0?(m0._heartbeatsCache.heartbeats=qI,yield m0._storage.overwrite(m0._heartbeatsCache)):(m0._heartbeatsCache.heartbeats=[],m0._storage.overwrite(m0._heartbeatsCache)),XI})()}}function tS(){return(new Date).toISOString().substring(0,10)}class _E{constructor(m0){this.app=m0,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,_r.hl)()&&(0,_r.eu)().then(()=>!0).catch(()=>!1)})()}read(){var m0=this;return(0,f.Z)(function*(){return(yield m0._canUseIndexedDBPromise)&&(yield function G1(_y){return PI.apply(this,arguments)}(m0.app))||{heartbeats:[]}})()}overwrite(m0){var G0=this;return(0,f.Z)(function*(){var II;if(yield G0._canUseIndexedDBPromise){const XI=yield G0.read();return JI(G0.app,{lastSentHeartbeatDate:null!==(II=m0.lastSentHeartbeatDate)&&void 0!==II?II:XI.lastSentHeartbeatDate,heartbeats:m0.heartbeats})}})()}add(m0){var G0=this;return(0,f.Z)(function*(){var II;if(yield G0._canUseIndexedDBPromise){const XI=yield G0.read();return JI(G0.app,{lastSentHeartbeatDate:null!==(II=m0.lastSentHeartbeatDate)&&void 0!==II?II:XI.lastSentHeartbeatDate,heartbeats:[...XI.heartbeats,...m0.heartbeats]})}})()}}function r0(_y){return(0,_r.L)(JSON.stringify({version:2,heartbeats:_y})).length}!function M0(_y){uT(new k.wA("platform-logger",m0=>new _a(m0),"PRIVATE")),uT(new k.wA("heartbeat",m0=>new AR(m0),"PRIVATE")),TT(bh,"0.7.24",_y),TT(bh,"0.7.24","esm2017"),TT("fire-js","")}("")},4859:(h,l,g)=>{"use strict";g.d(l,{H0:()=>bh,wA:()=>q,zt:()=>_s});var f=g(5861),k=g(2090);class q{constructor(_A,r_,p_){this.name=_A,this.instanceFactory=r_,this.type=p_,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_A){return this.instantiationMode=_A,this}setMultipleInstances(_A){return this.multipleInstances=_A,this}setServiceProps(_A){return this.serviceProps=_A,this}setInstanceCreatedCallback(_A){return this.onInstanceCreated=_A,this}}const _r="[DEFAULT]";class _s{constructor(_A,r_){this.name=_A,this.container=r_,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_A){const r_=this.normalizeInstanceIdentifier(_A);if(!this.instancesDeferred.has(r_)){const p_=new k.BH;if(this.instancesDeferred.set(r_,p_),this.isInitialized(r_)||this.shouldAutoInitialize())try{const I_=this.getOrInitializeService({instanceIdentifier:r_});I_&&p_.resolve(I_)}catch(I_){}}return this.instancesDeferred.get(r_).promise}getImmediate(_A){var r_;const p_=this.normalizeInstanceIdentifier(null==_A?void 0:_A.identifier),I_=null!==(r_=null==_A?void 0:_A.optional)&&void 0!==r_&&r_;if(!this.isInitialized(p_)&&!this.shouldAutoInitialize()){if(I_)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:p_})}catch(v_){if(I_)return null;throw v_}}getComponent(){return this.component}setComponent(_A){if(_A.name!==this.name)throw Error(`Mismatching Component ${_A.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_A,this.shouldAutoInitialize()){if(function _l(n_){return"EAGER"===n_.instantiationMode}(_A))try{this.getOrInitializeService({instanceIdentifier:_r})}catch(r_){}for(const[r_,p_]of this.instancesDeferred.entries()){const I_=this.normalizeInstanceIdentifier(r_);try{const v_=this.getOrInitializeService({instanceIdentifier:I_});p_.resolve(v_)}catch(v_){}}}}clearInstance(_A=_r){this.instancesDeferred.delete(_A),this.instancesOptions.delete(_A),this.instances.delete(_A)}delete(){var _A=this;return(0,f.Z)(function*(){const r_=Array.from(_A.instances.values());yield Promise.all([...r_.filter(p_=>"INTERNAL"in p_).map(p_=>p_.INTERNAL.delete()),...r_.filter(p_=>"_delete"in p_).map(p_=>p_._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_A=_r){return this.instances.has(_A)}getOptions(_A=_r){return this.instancesOptions.get(_A)||{}}initialize(_A={}){const{options:r_={}}=_A,p_=this.normalizeInstanceIdentifier(_A.instanceIdentifier);if(this.isInitialized(p_))throw Error(`${this.name}(${p_}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const I_=this.getOrInitializeService({instanceIdentifier:p_,options:r_});for(const[v_,S_]of this.instancesDeferred.entries())p_===this.normalizeInstanceIdentifier(v_)&&S_.resolve(I_);return I_}onInit(_A,r_){var p_;const I_=this.normalizeInstanceIdentifier(r_),v_=null!==(p_=this.onInitCallbacks.get(I_))&&void 0!==p_?p_:new Set;v_.add(_A),this.onInitCallbacks.set(I_,v_);const S_=this.instances.get(I_);return S_&&_A(S_,I_),()=>{v_.delete(_A)}}invokeOnInitCallbacks(_A,r_){const p_=this.onInitCallbacks.get(r_);if(p_)for(const I_ of p_)try{I_(_A,r_)}catch(v_){}}getOrInitializeService({instanceIdentifier:_A,options:r_={}}){let p_=this.instances.get(_A);if(!p_&&this.component&&(p_=this.component.instanceFactory(this.container,{instanceIdentifier:(n_=_A,n_===_r?void 0:n_),options:r_}),this.instances.set(_A,p_),this.instancesOptions.set(_A,r_),this.invokeOnInitCallbacks(p_,_A),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_A,p_)}catch(I_){}var n_;return p_||null}normalizeInstanceIdentifier(_A=_r){return this.component?this.component.multipleInstances?_A:_r:_A}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bh{constructor(_A){this.name=_A,this.providers=new Map}addComponent(_A){const r_=this.getProvider(_A.name);if(r_.isComponentSet())throw new Error(`Component ${_A.name} has already been registered with ${this.name}`);r_.setComponent(_A)}addOrOverwriteComponent(_A){this.getProvider(_A.name).isComponentSet()&&this.providers.delete(_A.name),this.addComponent(_A)}getProvider(_A){if(this.providers.has(_A))return this.providers.get(_A);const r_=new _s(_A,this);return this.providers.set(_A,r_),r_}getProviders(){return Array.from(this.providers.values())}}},1877:(h,l,g)=>{"use strict";g.d(l,{Am:()=>n_,Ub:()=>bh,Yd:()=>_l,in:()=>k});const f=[];var k=(()=>{return(_A=k||(k={}))[_A.DEBUG=0]="DEBUG",_A[_A.VERBOSE=1]="VERBOSE",_A[_A.INFO=2]="INFO",_A[_A.WARN=3]="WARN",_A[_A.ERROR=4]="ERROR",_A[_A.SILENT=5]="SILENT",k;var _A})();const q={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},_r=k.INFO,_s={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},_a=(_A,r_,...p_)=>{if(r_<_A.logLevel)return;const I_=(new Date).toISOString(),v_=_s[r_];if(!v_)throw new Error(`Attempted to log a message with an invalid logType (value: ${r_})`);console[v_](`[${I_}]  ${_A.name}:`,...p_)};class _l{constructor(r_){this.name=r_,this._logLevel=_r,this._logHandler=_a,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(r_){if(!(r_ in k))throw new TypeError(`Invalid value "${r_}" assigned to \`logLevel\``);this._logLevel=r_}setLogLevel(r_){this._logLevel="string"==typeof r_?q[r_]:r_}get logHandler(){return this._logHandler}set logHandler(r_){if("function"!=typeof r_)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=r_}get userLogHandler(){return this._userLogHandler}set userLogHandler(r_){this._userLogHandler=r_}debug(...r_){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...r_),this._logHandler(this,k.DEBUG,...r_)}log(...r_){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...r_),this._logHandler(this,k.VERBOSE,...r_)}info(...r_){this._userLogHandler&&this._userLogHandler(this,k.INFO,...r_),this._logHandler(this,k.INFO,...r_)}warn(...r_){this._userLogHandler&&this._userLogHandler(this,k.WARN,...r_),this._logHandler(this,k.WARN,...r_)}error(...r_){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...r_),this._logHandler(this,k.ERROR,...r_)}}function bh(_A){f.forEach(r_=>{r_.setLogLevel(_A)})}function n_(_A,r_){for(const p_ of f){let I_=null;r_&&r_.level&&(I_=q[r_.level]),p_.userLogHandler=null===_A?null:(v_,S_,...x_)=>{const B_=x_.map(Q_=>{if(null==Q_)return null;if("string"==typeof Q_)return Q_;if("number"==typeof Q_||"boolean"==typeof Q_)return Q_.toString();if(Q_ instanceof Error)return Q_.message;try{return JSON.stringify(Q_)}catch(_0){return null}}).filter(Q_=>Q_).join(" ");S_>=(null!=I_?I_:v_.logLevel)&&_A({level:k[S_].toLowerCase(),message:B_,args:x_,type:v_.name})}}}},8766:(h,l,g)=>{"use strict";g.d(l,{Lj:()=>Qv,X3:()=>c0});var f=g(5861);let q,_r;const _l=new WeakMap,bh=new WeakMap,n_=new WeakMap,_A=new WeakMap,r_=new WeakMap;let v_={get(P_,Rv,E_){if(P_ instanceof IDBTransaction){if("done"===Rv)return bh.get(P_);if("objectStoreNames"===Rv)return P_.objectStoreNames||n_.get(P_);if("store"===Rv)return E_.objectStoreNames[1]?void 0:E_.objectStore(E_.objectStoreNames[0])}return Q_(P_[Rv])},set:(P_,Rv,E_)=>(P_[Rv]=E_,!0),has:(P_,Rv)=>P_ instanceof IDBTransaction&&("done"===Rv||"store"===Rv)||Rv in P_};function B_(P_){return"function"==typeof P_?function x_(P_){return P_!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _a(){return _r||(_r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P_)?function(...Rv){return P_.apply(_0(this),Rv),Q_(_l.get(this))}:function(...Rv){return Q_(P_.apply(_0(this),Rv))}:function(Rv,...E_){const L_=P_.call(_0(this),Rv,...E_);return n_.set(L_,Rv.sort?Rv.sort():[Rv]),Q_(L_)}}(P_):(P_ instanceof IDBTransaction&&function I_(P_){if(bh.has(P_))return;const Rv=new Promise((E_,L_)=>{const F_=()=>{P_.removeEventListener("complete",J_),P_.removeEventListener("error",z_),P_.removeEventListener("abort",z_)},J_=()=>{E_(),F_()},z_=()=>{L_(P_.error||new DOMException("AbortError","AbortError")),F_()};P_.addEventListener("complete",J_),P_.addEventListener("error",z_),P_.addEventListener("abort",z_)});bh.set(P_,Rv)}(P_),((P_,Rv)=>Rv.some(E_=>P_ instanceof E_))(P_,function _s(){return q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P_,v_):P_)}function Q_(P_){if(P_ instanceof IDBRequest)return function p_(P_){const Rv=new Promise((E_,L_)=>{const F_=()=>{P_.removeEventListener("success",J_),P_.removeEventListener("error",z_)},J_=()=>{E_(Q_(P_.result)),F_()},z_=()=>{L_(P_.error),F_()};P_.addEventListener("success",J_),P_.addEventListener("error",z_)});return Rv.then(E_=>{E_ instanceof IDBCursor&&_l.set(E_,P_)}).catch(()=>{}),r_.set(Rv,P_),Rv}(P_);if(_A.has(P_))return _A.get(P_);const Rv=B_(P_);return Rv!==P_&&(_A.set(P_,Rv),r_.set(Rv,P_)),Rv}const _0=P_=>r_.get(P_);function c0(P_,Rv,{blocked:E_,upgrade:L_,blocking:F_,terminated:J_}={}){const z_=indexedDB.open(P_,Rv),D0=Q_(z_);return L_&&z_.addEventListener("upgradeneeded",O0=>{L_(Q_(z_.result),O0.oldVersion,O0.newVersion,Q_(z_.transaction))}),E_&&z_.addEventListener("blocked",()=>E_()),D0.then(O0=>{J_&&O0.addEventListener("close",()=>J_()),F_&&O0.addEventListener("versionchange",()=>F_())}).catch(()=>{}),D0}function Qv(P_,{blocked:Rv}={}){const E_=indexedDB.deleteDatabase(P_);return Rv&&E_.addEventListener("blocked",()=>Rv()),Q_(E_).then(()=>{})}const h0=["get","getKey","getAll","getAllKeys","count"],E0=["put","add","delete","clear"],H_=new Map;function e0(P_,Rv){if(!(P_ instanceof IDBDatabase)||Rv in P_||"string"!=typeof Rv)return;if(H_.get(Rv))return H_.get(Rv);const E_=Rv.replace(/FromIndex$/,""),L_=Rv!==E_,F_=E0.includes(E_);if(!(E_ in(L_?IDBIndex:IDBObjectStore).prototype)||!F_&&!h0.includes(E_))return;const J_=function(){var z_=(0,f.Z)(function*(D0,...O0){const CI=this.transaction(D0,F_?"readwrite":"readonly");let tI=CI.store;return L_&&(tI=tI.index(O0.shift())),(yield Promise.all([tI[E_](...O0),F_&&CI.done]))[0]});return function(O0){return z_.apply(this,arguments)}}();return H_.set(Rv,J_),J_}!function S_(P_){v_=P_(v_)}(P_=>Z0e($0e({},P_),{get:(Rv,E_,L_)=>e0(Rv,E_)||P_.get(Rv,E_,L_),has:(Rv,E_)=>!!e0(Rv,E_)||P_.has(Rv,E_)}))},5861:(h,l,g)=>{"use strict";function f(q,_r,_s,_a,_l,bh,n_){try{var _A=q[bh](n_),r_=_A.value}catch(p_){return void _s(p_)}_A.done?_r(r_):Promise.resolve(r_).then(_a,_l)}function k(q){return function(){var _r=this,_s=arguments;return new Promise(function(_a,_l){var bh=q.apply(_r,_s);function n_(r_){f(bh,_a,_l,n_,_A,"next",r_)}function _A(r_){f(bh,_a,_l,n_,_A,"throw",r_)}n_(void 0)})}}g.d(l,{Z:()=>k})}},h=>{h(h.s=6114)}]);